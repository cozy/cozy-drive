/*! For license information please see cozy.ac66d3e7.js.LICENSE.txt */
(self.webpackChunkcozy_drive=self.webpackChunkcozy_drive||[]).push([["465"],{14995:function(){},59507:function(){},78893:function(){},97795:function(){},18621:function(e,t,n){"use strict";var r=n(34155),a=n(20862),i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(68551)),s=i(n(63038)),c=i(n(319)),u=i(n(6479)),l=i(n(87757)),d=i(n(48926)),f=i(n(34575)),p=i(n(93913)),h=i(n(59713)),v=i(n(66604)),m=i(n(17204)),y=i(n(85564)),g=i(n(45578)),b=i(n(4788)),w=i(n(84486)),k=i(n(27361)),x=i(n(37203)),O=a(n(80419)),C=n(87941),S=i(n(97619)),E=n(25367),P=n(11282),_=n(72004),A=n(71450),R=n(18118),D=i(n(20057)),M=a(n(65972)),T=i(n(39268)),j=i(n(42189)),N=n(37130),I=i(n(31344)),L=n(12196),z=n(325),Z=i(n(22853)),B=n(76305),F=i(n(67266)),U=i(n(25888)),V=n(23864);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){(0,h.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function q(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var K=function(e){return{get:function(t,n){return Z.default.warn(e),t[n]}}},Q=function(e){var t;if(e&&"undefined"!=typeof window&&null!==(t=window.cozy)&&void 0!==t&&t.isSecureProtocol){var n,r=new URL(e);return r.protocol="https:",(n=r.toString()).endsWith("/")?n.slice(0,-1):n}return e},Y="creation",J="update",$=function(){var e,t,n,a,i,x,T,H,G,$,X,ee,et,en,er,ea,ei,eo,es,ec,eu,el,ed,ef;function ep(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.default)(this,ep),(0,h.default)(this,"fetchQueryAndGetFromState",(e=(0,d.default)(l.default.mark(function e(t){var r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.definition,a=t.options,e.prev=1,e.next=4,n.query(r,a);case 4:return e.abrupt("return",n.getQueryFromState(a.as,a));case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}},e,null,[[1,7]])})),function(t){return e.apply(this,arguments)}));var a=r.link,i=r.links,o=r.schema,s=r.appMetadata,c=r.capabilities,p=r.performanceApi,v=(0,u.default)(r,["link","links","schema","appMetadata","capabilities","performanceApi"]);a&&Z.default.warn("`link` is deprecated, use `links`"),this.performanceApi=p||L.defaultPerformanceApi,this.appMetadata=void 0===s?{}:s,this.loginPromise=null,v.uri=Q(v.uri),this.options=v,this.queryIdGenerator=new B.QueryIDGenerator,this.isLogged=!1,this.instanceOptions={},this.handleRevocationChange=this.handleRevocationChange.bind(this),this.handleTokenRefresh=this.handleTokenRefresh.bind(this),this.createClient();var m=this.getStackClient();if(m.on("error",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.emit.apply(n,["error"].concat(t))}),this.setLinks(Array.isArray(t=a||i||new S.default({performanceApi:this.performanceApi}))?t:[t]),this.schema=new j.default(void 0===o?{}:o,m),this.capabilities=c||null,this.plugins={},!(this.stackClient instanceof O.OAuthClient))try{this.loadInstanceOptionsFromDOM()}catch(e){}this._promiseCache=new U.default,v.uri&&v.token&&this.login(),this.storeAccesors=null,!1!==v.store&&this.ensureStore()}return(0,p.default)(ep,[{key:"emit",value:function(){}},{key:"on",value:function(){}},{key:"removeListener",value:function(){}},{key:"registerPlugin",value:function(e,t){if(!e.pluginName)throw Error("Cannot register a plugin whose class does not have `pluginName` attribute.");if(this.plugins[e.pluginName])throw Error("Cannot register plugin ".concat(e.pluginName,". A plugin with the same name has already been registered."));var n=new e(this,t);return this.plugins[e.pluginName]=n,n}},{key:"addSchema",value:function(e){this.schema.add(e)}},{key:"registerClientOnLinks",value:function(){var e,t=q(this.links);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.registerClient)try{n.registerClient(this)}catch(e){Z.default.warn(e)}}}catch(e){t.e(e)}finally{t.f()}}},{key:"login",value:function(e){return this.isLogged&&!this.isRevoked?(Z.default.warn("CozyClient is already logged."),this.loginPromise):this.loginPromise=this._login(e)}},{key:"_login",value:(e=(0,d.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.emit("beforeLogin"),this.registerClientOnLinks(),t&&(t.uri&&this.stackClient.setUri(t.uri),t.token&&this.stackClient.setToken(t.token)),n=q(this.links),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=13;break}if(!(a=r.value).onLogin){e.next=11;break}return e.next=11,a.onLogin();case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:if(this.isLogged=!0,this.isRevoked=!1,!(this.stackClient instanceof O.OAuthClient)){e.next=26;break}return e.next=26,this.loadInstanceOptionsFromStack();case 26:this.emit("login");case 27:case"end":return e.stop()}},e,this,[[4,15,18,21]])})),function(t){return e.apply(this,arguments)})},{key:"logout",value:(t=(0,d.default)(l.default.mark(function e(){var t,n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLogged){e.next=3;break}return Z.default.warn("CozyClient isn't logged."),e.abrupt("return");case 3:if(this.emit("beforeLogout"),this.isLogged=!1,!(this.stackClient instanceof O.OAuthClient)){e.next=17;break}if(e.prev=6,!(this.stackClient.unregister&&(!this.stackClient.isRegistered||this.stackClient.isRegistered()))){e.next=10;break}return e.next=10,this.stackClient.unregister();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),Z.default.warn("Impossible to unregister client on stack: ".concat(e.t0));case 15:case 20:e.next=25;break;case 17:return e.prev=17,e.next=20,this.stackClient.fetch("DELETE","/auth/login");case 22:e.prev=22,e.t1=e.catch(17),Z.default.warn("Impossible to log out: ".concat(e.t1));case 25:t=q(this.links),e.prev=26,t.s();case 28:if((n=t.n()).done){e.next=41;break}if(!(r=n.value).reset){e.next=39;break}return e.prev=31,e.next=34,r.reset();case 34:e.next=39;break;case 36:e.prev=36,e.t2=e.catch(31),Z.default.warn(e.t2);case 39:e.next=28;break;case 41:e.next=46;break;case 43:e.prev=43,e.t3=e.catch(26),t.e(e.t3);case 46:return e.prev=46,t.f(),e.finish(46);case 49:this.store&&this.dispatch((0,M.resetState)()),this.emit("logout");case 51:case"end":return e.stop()}},e,this,[[6,12],[17,22],[26,43,46,49],[31,36]])})),function(){return t.apply(this,arguments)})},{key:"collection",value:function(e){return this.getStackClient().collection(e)}},{key:"fetch",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.getStackClient().fetch(e,t,n,r)}},{key:"all",value:function(e){return Z.default.warn("\nclient.all is deprecated, prefer to use the Q helper to build a new QueryDefinition.\n\nimport { Q } from 'cozy-client'\nclient.query(Q('io.cozy.bills'))"),(0,A.Q)(e)}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Z.default.warn("client.find(doctype, selector) is deprecated, please use Q(doctype).where(selector) to build the same query."),new A.QueryDefinition({doctype:e,selector:t})}},{key:"get",value:function(e,t){return Z.default.warn("client.get(".concat(e,", id) is deprecated, please use Q(").concat(e,").getById(id) to build the same query.")),new A.QueryDefinition({doctype:e,id:t})}},{key:"create",value:(n=(0,d.default)(l.default.mark(function e(t,n,r){var a,i,o,s=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>3&&void 0!==s[3]?s[3]:{},n._type,o=W({_type:t},(0,u.default)(n,["_type"])),e.next=5,this.schema.validate(o);case 5:if(!(!0!==e.sent)){e.next=8;break}throw Error("Validation failed");case 8:return e.abrupt("return",this.mutate(this.getDocumentSavePlan(o,r),a));case 9:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"validate",value:function(e){return this.schema.validate(e)}},{key:"save",value:(a=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r=t._type,a=(0,u.default)(t,["_type"]),r){e.next=4;break}throw Error("The document must have a `_type` property");case 4:return i=W({_type:r},a),e.next=7,this.schema.validate(i);case 7:if(!(!0!==e.sent)){e.next=10;break}throw Error("Validation failed");case 10:return e.abrupt("return",this.mutate(this.getDocumentSavePlan(i),n));case 11:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"saveAll",value:(i=(0,d.default)(l.default.mark(function e(t){var n=this,r,a,i,o,s=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:{},!(1!==Array.from(new Set(t.map(function(e){return e._type}))).length)){e.next=4;break}throw Error("saveAll can only save documents with the same doctype");case 4:return e.next=6,Promise.all(t.map(function(e){return n.schema.validate(e)}));case 6:if(!((a=e.sent.filter(function(e){return!0!==e})).length>0)){e.next=11;break}throw Z.default.warn("There has been some validation errors while bulk saving",a),Error("Validation failed for at least one doc");case 11:return i=t.map(function(e){return n.prepareDocumentForSave(e)}),o=A.Mutations.updateDocuments(i),e.abrupt("return",this.mutate(o,r));case 14:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"ensureCozyMetadata",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{event:Y};if(void 0===this.appMetadata)return e;if(e._type){var r=this.schema.getDoctypeSchema(e._type);t=(0,k.default)(r,"doctypeVersion")}var a=this.appMetadata,i=a.slug,o=a.sourceAccount,s=a.sourceAccountIdentifier,u=a.version,l=new Date().toISOString(),d=(0,k.default)(e,"cozyMetadata",{});return n.event===Y?d=W({metadataVersion:1,doctypeVersion:t,createdByApp:i,sourceAccount:o,sourceAccountIdentifier:s,createdAt:l,createdByAppVersion:u,updatedAt:l,updatedByApps:i?[{date:l,slug:i,version:u}]:[]},d):n.event===J&&(d=W(W({},d),{},{updatedAt:l,updatedByApps:[{date:l,slug:i,version:u}].concat((0,c.default)((0,k.default)(e,"cozyMetadata.updatedByApps",[]).filter(function(e){return e.slug!==i})))})),W(W({},e),{},{cozyMetadata:d})}},{key:"prepareDocumentForSave",value:function(e){var t=!e._rev;return this.ensureCozyMetadata((0,_.dehydrate)(e),{event:t?Y:J})}},{key:"getDocumentSavePlan",value:function(e,t){var n=this,r=!e._rev,a=this.prepareDocumentForSave(e),i=r?A.Mutations.createDocument(a):A.Mutations.updateDocument(a);if(!(t&&Object.values(t).filter(function(e){return Array.isArray(e)?e.length>0:e}).length>0))return i;for(var o=0,c=Object.keys(t);o<c.length;o++){var u,l,d=c[o],f=e._type,p=this.schema.getRelationship(f,d);if(!((u=p.type).prototype.addReferences&&u.prototype.removeReferences)){;throw l=p.name,Error('The "'.concat(l,'" relationship does not support references. If you need to add references to a document, its relationship class must have the methods {add,remove}References'))}}if(t&&!r)throw Error("Unable to save external relationships on a not-new document");return[i,function(e){var r=n.hydrateDocument(e.data);return Object.entries(t).map(function(e){var t=(0,s.default)(e,2),n=t[0],a=t[1];return r[n].addReferences(a)})}]}},{key:"triggerHook",value:function(e,t){if(ep.hooks){var n,r=q((ep.hooks[t._type]||{})[e]||[]);try{for(r.s();!(n=r.n()).done;)(0,n.value)(this,t)}catch(e){r.e(e)}finally{r.f()}}}},{key:"destroy",value:(x=(0,d.default)(l.default.mark(function e(t){var n,r,a=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.triggerHook("before:destroy",t);case 3:return e.next=5,this.mutate(A.Mutations.deleteDocument(t),n);case 5:return r=e.sent,e.next=8,this.triggerHook("after:destroy",t);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})},{key:"upload",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.mutate(A.Mutations.uploadFile(e,t),n)}},{key:"ensureQueryExists",value:function(e,t,n){this.ensureStore(),("loaded"!==(0,M.getQueryFromState)(this.store.getState(),e).fetchStatus||!t.skip&&!t.bookmark)&&this.dispatch((0,M.initQuery)(e,t,n))}},{key:"query",value:(T=(0,d.default)(l.default.mark(function e(t){var n=this,r,a,i,o,s,c,d,f,p,h,v=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(r=v.length>1&&void 0!==v[1]?v[1]:{}).update,i=r.executeFromStore,o=(0,u.default)(r,["update","executeFromStore"]),s=this.performanceApi.mark("client.query(".concat(t.doctype,")")),this.ensureStore(),c=o.as||this.queryIdGenerator.generateId(t),d=this.getQueryFromState(c,o),!(void 0!==o.enabled)||!("boolean"!=typeof o.enabled)){e.next=9;break}throw Error("option.enabled should be a boolean for this query: ".concat(JSON.stringify(t)));case 9:if(!o.fetchPolicy){e.next=15;break}if(o.as){e.next=12;break}throw Error("Cannot use `fetchPolicy` without naming the query, please use `as` to name the query");case 12:if(o.fetchPolicy(d)){e.next=15;break}return e.abrupt("return");case 15:if(!(d&&Object.keys(d).length>0)||"loading"!==d.fetchStatus){e.next=18;break}return e.abrupt("return",this._promiseCache.get(function(){return(0,F.default)(t)}));case 18:return this.ensureQueryExists(c,t,o),e.prev=19,f=void 0!==o.backgroundFetching?o.backgroundFetching:this.options.backgroundFetching,this.dispatch((0,M.loadQuery)(c,{backgroundFetching:f})),p=i?function(){return Promise.resolve((0,M.executeQueryFromState)(n.store.getState(),t))}:function(){return n.requestQuery(t,o)},e.next=25,this._promiseCache.exec(p,function(){return(0,F.default)(t)});case 25:return h=e.sent,this.dispatch((0,M.receiveQueryResult)(c,h,{update:a,backgroundFetching:f})),this.performanceApi.measure({markName:s,measureName:"".concat(s," success"),color:"primary"}),e.abrupt("return",h);case 31:if(e.prev=31,e.t0=e.catch(19),this.performanceApi.measure({markName:s,measureName:"".concat(s," error"),color:"error"}),this.dispatch((0,M.receiveQueryError)(c,e.t0)),!o.onError){e.next=39;break}o.onError(e.t0),e.next=44;break;case 39:if(!this.options.onError){e.next=43;break}this.options.onError(e.t0),e.next=44;break;case 43:throw e.t0;case 44:case"end":return e.stop()}},e,this,[[19,31]])})),function(e){return T.apply(this,arguments)})},{key:"queryAll",value:(H=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o,s,u=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=u.length>1&&void 0!==u[1]?u[1]:{}).as||this.queryIdGenerator.generateId(t),a=W(W({},n),{},{as:r}),e.prev=3,e.next=6,this.query(t,a);case 6:o=(i=e.sent).data;case 8:if(!(i&&i.next)){e.next=22;break}if(!i.bookmark){e.next=15;break}return e.next=12,this.query(t.offsetBookmark(i.bookmark),a);case 12:i=e.sent,e.next=19;break;case 15:return s=(0,M.getRawQueryFromState)(this.store.getState(),r),e.next=18,this.query(t.offset(s.data.length),a);case 18:i=e.sent;case 19:o.push.apply(o,(0,c.default)(i.data)),e.next=8;break;case 22:return e.abrupt("return",o);case 25:return e.prev=25,e.t0=e.catch(3),Z.default.log("queryAll error for ".concat(e.t0.toString())),e.abrupt("return",[]);case 29:case"end":return e.stop()}},e,this,[[3,25]])})),function(e){return H.apply(this,arguments)})},{key:"watchQuery",value:function(){return Z.default.warn("client.watchQuery is deprecated, please use client.makeObservableQuery."),this.makeObservableQuery.apply(this,arguments)}},{key:"makeObservableQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ensureStore();var n=t.as||this.queryIdGenerator.generateId(e);return this.ensureQueryExists(n,e),new I.default(n,e,this,t)}},{key:"mutate",value:(G=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o,s,c=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=c.length>1&&void 0!==c[1]?c[1]:{}).update,a=n.updateQueries,i=(0,u.default)(n,["update","updateQueries"]),this.ensureStore(),o=i.as||this.queryIdGenerator.generateId(t),this.dispatch((0,M.initMutation)(o,t)),e.prev=5,e.next=8,this.requestMutation(t,i);case 8:return s=e.sent,this.dispatch((0,M.receiveMutationResult)(o,s,{update:r,updateQueries:a},t)),e.abrupt("return",s);case 13:throw e.prev=13,e.t0=e.catch(5),this.dispatch((0,M.receiveMutationError)(o,e.t0,t)),e.t0;case 17:case"end":return e.stop()}},e,this,[[5,13]])})),function(e){return G.apply(this,arguments)})},{key:"requestQuery",value:($=(0,d.default)(l.default.mark(function e(t,n){var r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.chain.request(t,n);case 2:return r=e.sent,e.next=5,this.persistVirtualDocuments(t,r.data);case 5:if(t.includes){e.next=7;break}return e.abrupt("return",r);case 7:return e.next=9,this.fetchRelationships(r,this.getIncludesRelationships(t));case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return $.apply(this,arguments)})},{key:"persistVirtualDocuments",value:(X=(0,d.default)(l.default.mark(function e(t,n){var r,a,i,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=["io.cozy.files.shortcuts"].includes(t.doctype),"io.cozy.apps_registry"!==t.doctype){e.next=6;break}return e.next=5,this.persistVirtualDocument({_type:"io.cozy.apps_registry",_id:t.id,cozyPouchData:n},r);case 5:return e.abrupt("return",e.sent);case 6:if(Array.isArray(n)){e.next=11;break}return e.next=9,this.persistVirtualDocument(n,r);case 9:e.next=28;break;case 11:a=q(n),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=20;break}return o=i.value,e.next=18,this.persistVirtualDocument(o,r);case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),a.e(e.t0);case 25:return e.prev=25,a.f(),e.finish(25);case 28:case"end":return e.stop()}},e,this,[[12,22,25,28]])})),function(e,t){return X.apply(this,arguments)})},{key:"persistVirtualDocument",value:(ee=(0,d.default)(l.default.mark(function e(t,n){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.cozyLocalOnly)){e.next=2;break}return e.abrupt("return");case 2:if(!(!(null!==(r=t.meta)&&void 0!==r&&r.rev)&&!t._rev||n)){e.next=5;break}return e.next=5,this.chain.persistCozyData(t);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return ee.apply(this,arguments)})},{key:"fetchRelationships",value:(et=(0,d.default)(l.default.mark(function e(t,n){var r,a,i,o,c,u,d,f,p,h,v,m,k,x,O,C,S,E,_,R=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(r=!Array.isArray(t.data))&&0===t.data.length)){e.next=3;break}return e.abrupt("return",t);case 3:return a=r?[t.data]:t.data,i=new Map,o=[],c=[],a.forEach(function(e){return(0,w.default)(n,function(t,n){try{var r=t.type.query(e,R,t),a=e._id;i.set(r,[a,n]),r instanceof A.QueryDefinition?c.push(r):o.push(r)}catch(e){}})}),u=(0,D.default)(c),e.next=11,Promise.all(u.map(function(e){return R.chain.request(e)}));case 11:d=e.sent,f=(0,g.default)((0,y.default)(o),"_id"),p=(0,y.default)(d.map(function(e){return e.included||e.data})).concat(f).filter(Boolean),h={},v=q((0,b.default)(u,d));try{for(v.s();!(m=v.n()).done;)x=(k=(0,s.default)(m.value,2))[0],O=k[1],(C=i.get(x))&&(E=(S=(0,s.default)(C,2))[0],_=S[1],h[E]=h[E]||{},h[E][_]=(0,P.responseToRelationship)(O))}catch(e){v.e(e)}finally{v.f()}return e.abrupt("return",W(W({},(0,P.attachRelationships)(t,h)),{},{included:p}));case 18:case"end":return e.stop()}},e)})),function(e,t){return et.apply(this,arguments)})},{key:"requestMutation",value:(en=(0,d.default)(l.default.mark(function e(t,n){var r,a,i,s,c=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=8;break}return a=(r=(0,o.default)(t))[0],i=r.slice(1),e.next=4,this.requestMutation(a);case 4:return s=e.sent,e.next=7,Promise.all(i.map(function(e){var t="function"==typeof e?e(s):e;return c.requestMutation(t)}));case 7:return e.abrupt("return",s);case 8:return e.abrupt("return",this.chain.request(t,n));case 9:case"end":return e.stop()}},e,this)})),function(e,t){return en.apply(this,arguments)})},{key:"getIncludesRelationships",value:function(e){var t=this,n=e.includes,r=e.doctype;return n?(0,m.default)(n.map(function(e){return[e,t.schema.getRelationship(r,e)]})):{}}},{key:"hydrateDocuments",value:function(e,t){var n=this;if(!1===this.options.autoHydrate)return t;var r=this.schema.getDoctypeSchema(e);return r.relationships?t.map(function(e){return n.hydrateDocument(e,r)}):t}},{key:"hydrateDocument",value:function(e,t){if(!e)return e;var n=t||this.schema.getDoctypeSchema(e._type);return W(W({},e),this.hydrateRelationships(e,n.relationships))}},{key:"hydrateRelationships",value:function(e,t){var n=this.getRelationshipStoreAccessors();return(0,v.default)(t,function(t,r){return(0,E.create)(e,t,n)})}},{key:"makeNewDocument",value:function(e){return this.hydrateDocument({_type:e})}},{key:"generateRandomId",value:function(){return this.queryIdGenerator.generateRandomId()}},{key:"getAssociation",value:function(e,t){return(0,E.create)(e,this.schema.getRelationship(e._type,t),this.getRelationshipStoreAccessors())}},{key:"getRelationshipStoreAccessors",value:function(){var e=this;return!this.storeAccesors&&(this.storeAccessors={get:this.getDocumentFromState.bind(this),save:function(t,n){return e.save.call(e,t,n)},dispatch:this.dispatch.bind(this),query:function(t,n){return e.query.call(e,t,n)},mutate:function(t,n){return e.mutate.call(e,t,n)}}),this.storeAccessors}},{key:"getCollectionFromState",value:function(e){try{return(0,M.getCollectionFromState)(this.store.getState(),e)}catch(t){return Z.default.warn("Could not getCollectionFromState",e,t.message),null}}},{key:"getDocumentFromState",value:function(e,t){try{return(0,M.getDocumentFromState)(this.store.getState(),e,t)}catch(n){return Z.default.warn("Could not getDocumentFromState",e,t,n.message),null}}},{key:"getQueryFromState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hydrated||!1,r=t.singleDocData||!1;try{var a=(0,M.getQueryFromState)(this.store.getState(),e),i=a.definition&&a.definition.doctype,o=a.definition&&a.definition.id;if(!n&&!r)return a;var s=n&&i?this.hydrateDocuments(i,a.data):a.data;return W(W({},a),{},{data:o&&r?s[0]:s})}catch(t){return Z.default.warn("Could not get query from state. queryId: ".concat(e,", error: ").concat(t.message)),null}}},{key:"register",value:function(e){return this.getStackClient().setUri(e),this.startOAuthFlow(R.authFunction)}},{key:"isReactNative",value:function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product}},{key:"startOAuthFlow",value:(er=(0,d.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getStackClient(),e.next=3,n.register();case 3:return e.next=5,this.certifyFlagship();case 5:return e.abrupt("return",this.authorize({openURLCallback:t}));case 6:case"end":return e.stop()}},e,this)})),function(e){return er.apply(this,arguments)})},{key:"certifyFlagship",value:(ea=(0,d.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getStackClient()).oauthOptions.shouldRequireFlagshipPermissions){e.next=4;break}return e.next=4,(0,V.certifyFlagship)(t.oauthOptions.certificationConfig,this);case 4:case"end":return e.stop()}},e,this)})),function(){return ea.apply(this,arguments)})},{key:"authorize",value:(ei=(0,d.default)(l.default.mark(function e(){var t,n,r,a,i,o,s,c,u,d,f,p,h,v,m,y=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(t=y.length>0&&void 0!==y[0]?y[0]:{}).openURLCallback)?R.authFunction:n,i=void 0===(a=t.sessionCode)?void 0:a,s=void 0===(o=t.pkceCodes)?{}:o,e.prev=1,c=s.codeVerifier,u=s.codeChallenge,f=(d=this.getStackClient()).generateStateCode(),p=d.getAuthCodeURL({stateCode:f,scopes:void 0,sessionCode:i,codeChallenge:u}),e.next=8,r(p);case 8:return h=e.sent,v=d.getAccessCodeFromURL(h,f),e.next=12,d.fetchAccessToken(v,void 0,void 0,c);case 12:return m=e.sent,d.setToken(m),e.abrupt("return",{token:m,infos:d.oauthOptions,client:d.oauthOptions});case 17:throw e.prev=17,e.t0=e.catch(1),e.t0.message===C.REGISTRATION_ABORT&&this.getStackClient().unregister(),e.t0;case 21:case"end":return e.stop()}},e,this,[[1,17]])})),function(){return ei.apply(this,arguments)})},{key:"renewAuthorization",value:function(){return this.authorize({openURLCallback:R.authFunction})}},{key:"setStore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.force;if(void 0===e)throw Error("Store is undefined");if(this.store&&!(void 0!==n&&n))throw Error("Client already has a store, it is forbidden to change store.\nsetStore must be called before any query is executed. Try to\ncall setStore earlier in your code, preferably just after the\ninstantiation of the client.");this.store=e}},{key:"ensureStore",value:function(){!this.store&&this.setStore((0,M.createStore)(this.performanceApi))}},{key:"checkForRevocation",value:(eo=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.stackClient instanceof O.OAuthClient)){e.next=4;break}return e.abrupt("return",this.stackClient.checkForRevocation());case 4:throw"checkForRevocation is only implemented for OAutClient";case 5:case"end":return e.stop()}},e,this)})),function(){return eo.apply(this,arguments)})},{key:"handleRevocationChange",value:function(e){e?(this.isRevoked=!0,this.emit("revoked")):(this.isRevoked=!1,this.emit("unrevoked"))}},{key:"handleTokenRefresh",value:function(e){this.emit("tokenRefreshed"),this.options.onTokenRefresh&&(K("Using onTokenRefresh is deprecated, please use events like this: cozyClient.on('tokenRefreshed', token => console.log('Token has been refreshed', token)). https://git.io/fj3M3"),this.options.onTokenRefresh(e))}},{key:"createClient",value:function(){this.options.client&&Z.default.warn("CozyClient: Using options.client is deprecated, please use options.stackClient.");var e=void 0===this.options.warningForCustomHandlers||this.options.warningForCustomHandlers,t=this.options.client||this.options.stackClient,n={onRevocationChange:this.handleRevocationChange,onTokenRefresh:this.handleTokenRefresh};if(t){this.stackClient=t,!t.options&&(t.options={});for(var r=0,a=Object.keys(n);r<a.length;r++){var i=a[r];t.options[i]?e&&Z.default.warn("You passed a stackClient with its own ".concat(i,". It is not supported, unexpected things might happen.")):t.options[i]=n[i]}}else{var o=W(W({},this.options),n);this.stackClient=this.options.oauth?new O.OAuthClient(o):new O.default(o)}this.client=new Proxy(this.stackClient,K("Using cozyClient.client is deprecated, please use cozyClient.stackClient."))}},{key:"getClient",value:function(){return Z.default.warn("CozyClient: getClient() is deprecated, please use getStackClient()."),this.getStackClient()}},{key:"getStackClient",value:function(){return!this.stackClient&&this.createClient(),this.stackClient}},{key:"reducer",value:function(){return(0,M.default)(this.performanceApi)}},{key:"dispatch",value:function(e){return this.store.dispatch(e)}},{key:"getInstanceOptions",value:function(){return this.instanceOptions}},{key:"loadInstanceOptionsFromDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[role=application]",t=document.querySelector(e);if(!(t instanceof HTMLElement))throw Error("The selector that is passed does not return an HTMLElement");var n=t.dataset,r=n.cozy,a=(0,u.default)(n,["cozy"]);this.instanceOptions=W(W({},JSON.parse(void 0===r?"{}":r)),a),this.capabilities=this.instanceOptions.capabilities||null}},{key:"loadInstanceOptionsFromStack",value:(es=(0,d.default)(l.default.mark(function e(){var t,n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.query((0,A.Q)("io.cozy.settings").getById("io.cozy.settings.capabilities")),this.query((0,A.Q)("io.cozy.settings").getById("io.cozy.settings.instance"))]);case 2:n=(t=e.sent)[0].data,r=t[1].data,this.instanceOptions={capabilities:n,locale:r.locale,tracking:r.tracking},this.capabilities=this.instanceOptions.capabilities||null;case 7:case"end":return e.stop()}},e,this)})),function(){return es.apply(this,arguments)})},{key:"setData",value:function(e){var t=this;this.ensureStore(),Object.entries(e).forEach(function(e){var n=(0,s.default)(e,2),r=(n[0],n[1]);t.dispatch((0,M.receiveQueryResult)(null,{data:r}))})}},{key:"setOnError",value:function(e){if(this.options&&this.options.onError)throw Error("On Error is already defined");this.options.onError=e}},{key:"toJSON",value:function(){return new z.CozyClient({uri:this.options.uri})}},{key:"setAppMetadata",value:function(e){this.appMetadata=W(W({},this.appMetadata),e)}},{key:"setLinks",value:(ec=(0,d.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.links=t||[new S.default({performanceApi:this.performanceApi})],this.registerClientOnLinks(),this.chain=(0,N.chain)(this.links),!this.isLogged){e.next=22;break}n=q(this.links),e.prev=5,n.s();case 7:if((r=n.n()).done){e.next=14;break}if(!(a=r.value).onLogin){e.next=12;break}return e.next=12,a.onLogin();case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:case"end":return e.stop()}},e,this,[[5,16,19,22]])})),function(e){return ec.apply(this,arguments)})},{key:"getSettings",value:(eu=(0,d.default)(l.default.mark(function e(t,n){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.getSettings)(this,t,n));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return eu.apply(this,arguments)})},{key:"saveAfterFetchSettings",value:(el=(0,d.default)(l.default.mark(function e(t,n,r){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.saveAfterFetchSettings)(this,t,n,r));case 1:case"end":return e.stop()}},e,this)})),function(e,t,n){return el.apply(this,arguments)})},{key:"resetQuery",value:(ed=(0,d.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(0,M.isQueryExisting)(this.store.getState(),t)){e.next=3;break}return e.abrupt("return",Promise.resolve(null));case 3:return this.dispatch((0,M.resetQuery)(t)),n=this.getQueryFromState(t),e.next=7,this.query(n.definition,{as:t});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}},e,this,[[0,10]])})),function(e){return ed.apply(this,arguments)})}],[{key:"fromOldClient",value:function(e,t){return new ep(W({uri:e._url,token:e._token.token},t))}},{key:"fromOldOAuthClient",value:(ef=(0,d.default)(l.default.mark(function e(t,n){var r,a,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._oauth){e.next=12;break}return e.next=3,t.authorize();case 3:if(a={oauth:(r=e.sent).client,token:r.token,scope:r.token.scope},!(i=new ep(W(W({uri:t._url},a),n))).loginPromise){e.next=9;break}return e.next=9,i.loginPromise;case 9:return e.abrupt("return",i);case 12:throw Error("Cannot instantiate a new client: old client is not an OAuth client. CozyClient.fromOldClient might be more suitable.");case 13:case"end":return e.stop()}},e)})),function(e,t){return ef.apply(this,arguments)})},{key:"fromEnv",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e||(void 0!==r?r.env:{}),a=n.COZY_URL,i=n.COZY_CREDENTIALS;if(!a||!i)throw Error("Env used to instantiate CozyClient must have COZY_URL and COZY_CREDENTIALS");try{t.oauth=JSON.parse(i)}catch(e){t.token=i.trim()}return t.uri=a.trim(),new ep(W({},t))}},{key:"fromDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[role=application]",n=document.querySelector(t);if(!(n instanceof HTMLElement))throw Error("Cannot find an HTMLElement corresponding to ".concat(t));if(!n||!n.dataset)throw Error("Found no data in ".concat(t," to instantiate cozyClient"));var r=n.dataset.cozy?JSON.parse(n.dataset.cozy):W({},n.dataset),a=r.domain,i=r.token;if((!a||!i)&&(a=a||r.cozyDomain,i=i||r.cozyToken),!a||!i)throw Error("Found no data in ".concat(n.dataset," to instantiate cozyClient"));return new ep(W({uri:"".concat(window.location.protocol,"//").concat(a),token:i,capabilities:r.capabilities},e))}},{key:"registerHook",value:function(e,t,n){var r=ep.hooks[e]=ep.hooks[e]||{};r[t]=r[t]||[],r[t].push(n)}}]),ep}();$.hooks=$.hooks||{},$.fetchPolicies=T.default,$.version="53.1.1",x.default.mixin($);t.default=$},37130:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.chain=t.default=void 0;var a=r(n(319)),i=r(n(87757)),o=r(n(48926)),s=r(n(34575)),c=r(n(93913)),u=function(){var e,t,n;function r(e,t){(0,s.default)(this,r),"function"==typeof e&&(this.request=e),"function"==typeof t&&(this.persistCozyData=t)}return(0,c.default)(r,[{key:"request",value:(e=(0,o.default)(i.default.mark(function e(t,n,r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("request is not implemented");case 1:case"end":return e.stop()}},e)})),function(t,n,r,a){return e.apply(this,arguments)})},{key:"persistCozyData",value:(t=(0,o.default)(i.default.mark(function e(t,n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("persistCozyData is not implemented");case 1:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)})},{key:"reset",value:(n=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("reset is not implemented");case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})}]),r}();t.default=u;var l=function(e){return"function"==typeof e?new u(e):e},d=new u(function(e,t,n){if(n)return n;if(e.execute)return e.execute();throw Error("No link could handle operation ".concat(JSON.stringify(e)))},function(e,t){});t.chain=function(e){return[].concat((0,a.default)(e),[d]).map(l).reduce(f)};var f=function(e,t){return new u(function(n,r,a,i){return e.request(n,r,a,function(e,n,r){return t.request(e,n,r,i)})},function(n,r){return e.persistCozyData(n,function(e){return t.persistCozyData(e,r)})})}},31344:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(59713)),s=r(n(27361)),c=n(65972),u=Object.prototype.hasOwnProperty,l=function(){function e(t,n,r,i){var s=this;if((0,a.default)(this,e),(0,o.default)(this,"handleStoreChange",function(){var e=s.currentRawResult();!function(e,t){if(d(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!u.call(t,n[a])||!d(e[n[a]],t[n[a]]))return!1;return!0}(e,s.lastResult)&&(s.lastResult=e,s.notifyObservers())}),!t||!n||!r)throw Error("ObservableQuery takes 3 arguments: queryId, definition and client");this.queryId=t,this.definition=n,this.client=r,this.observers={},this.idCounter=1,this.lastResult=this.currentRawResult(),this.options=i}return(0,i.default)(e,[{key:"currentResult",value:function(){return this.client.getQueryFromState(this.queryId,{hydrated:(0,s.default)(this.options,"hydrated",!0),singleDocData:!0})}},{key:"fetch",value:function(){return this.client.query(this.definition,{as:this.queryId})}},{key:"fetchMore",value:function(){var e=this.currentRawResult();return e.bookmark?this.client.query(this.definition.offsetBookmark(e.bookmark),{as:this.queryId}):this.client.query(this.definition.offset(e.data.length),{as:this.queryId})}},{key:"currentRawResult",value:function(){return(0,c.getRawQueryFromState)(this.getStore().getState(),this.queryId)}},{key:"notifyObservers",value:function(){var e=this;Object.keys(this.observers).forEach(function(t){return e.observers[t]()})}},{key:"subscribeToStore",value:function(){if(this._unsubscribeStore)throw Error("ObservableQuery instance is already subscribed to store.");this._unsubscribeStore=this.getStore().subscribe(this.handleStoreChange)}},{key:"unsubscribeFromStore",value:function(){if(!this._unsubscribeStore)throw Error("ObservableQuery instance is not subscribed to store");this._unsubscribeStore()}},{key:"subscribe",value:function(e){var t=this,n=this.idCounter;return this.idCounter++,this.observers[n]=e,1===Object.keys(this.observers).length&&this.subscribeToStore(),function(){return t.unsubscribe(n)}}},{key:"unsubscribe",value:function(e){if(!this.observers[e])throw Error("Cannot unsubscribe unknown callbackId ".concat(e));delete this.observers[e],0===Object.keys(this.observers).length&&(this.unsubscribeFromStore(),this._unsubscribeStore=null)}},{key:"getStore",value:function(){return this.client.store}}]),e}();function d(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.default=l},63384:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),c=a(n(78585)),u=a(n(29754)),l=a(n(59713)),d=r(n(67294)),f=a(n(45697)),p=a(n(54028)),h=f.default.shape({subscribe:f.default.func.isRequired,dispatch:f.default.func.isRequired,getState:f.default.func.isRequired}),v=function(e){(0,s.default)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function a(e,t){var n;if((0,i.default)(this,a),n=r.call(this,e,t),!e.client)throw Error("CozyProvider was not passed a client instance.");return e.store&&e.client.setStore(e.store),n}return(0,o.default)(a,[{key:"getChildContext",value:function(){return{store:this.props.store||this.context.store||this.props.client.store,client:this.props.client}}},{key:"render",value:function(){return d.default.createElement(p.default.Provider,{value:this.getChildContext()},this.props.children)}}]),a}(d.Component);t.default=v,(0,l.default)(v,"propTypes",{store:h,client:f.default.object.isRequired,children:f.default.oneOfType([f.default.element,f.default.arrayOf(f.default.element)]).isRequired}),(0,l.default)(v,"childContextTypes",{store:f.default.object,client:f.default.object.isRequired}),(0,l.default)(v,"contextTypes",{store:f.default.object})},18597:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.computeChildrenArgs=t.getQueryAttributes=t.default=t.fetchQuery=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(81506)),s=r(n(2205)),c=r(n(78585)),u=r(n(29754)),l=r(n(59713)),d=r(n(6479)),f=n(67294);r(n(18621));var p=r(n(45697));r(n(31344));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m={},y=function(e,t){return t.fetch?t.fetch():e.query(t.definition,{as:t.queryId})};t.fetchQuery=y;var g=function(e,t){var n=e.create.bind(e),r=e.save.bind(e),a=e.destroy.bind(e),i=e.getAssociation.bind(e),o="function"==typeof t.query?t.query(e,t):t.query,s=e.makeObservableQuery(o,t),c=s.fetchMore.bind(s),u=t.mutations,l=(0,d.default)(t,["mutations"]),f="function"==typeof u?u(e,s,l):u,p=s.fetch?s.fetch.bind(s):null;return{client:e,observableQuery:s,queryDefinition:o,createDocument:n,saveDocument:r,deleteDocument:a,getAssociation:i,fetchMore:c,fetch:p,mutations:f}};t.getQueryAttributes=g;var b=function(e){var t=e.observableQuery,n=e.fetchMore,r=e.fetch,a=e.createDocument,i=e.saveDocument,o=e.deleteDocument,s=e.getAssociation,c=e.mutations;return[v({fetchMore:n,fetch:r},t.currentResult()),v({createDocument:a,saveDocument:i,deleteDocument:o,getAssociation:s},c)]};t.computeChildrenArgs=b;var w=function(e){(0,s.default)(d,e);var t,n,r=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function d(e,t){(0,a.default)(this,d),n=r.call(this,e,t),(0,l.default)((0,o.default)(n),"onQueryChange",function(){n.recomputeChildrenArgs(),n.setState(m)});var n,i=t.client;if(!t.client)throw Error("Query should be used with client in context (use CozyProvider to set context)");return n.client=i,n.observableQuery=null,n.queryUnsubscribe=null,Object.assign((0,o.default)(n),g(i,e)),n.recomputeChildrenArgs(),n}return(0,i.default)(d,[{key:"componentDidMount",value:function(){this.queryUnsubscribe=this.observableQuery.subscribe(this.onQueryChange),!1!==this.props.enabled&&this.executeQueryRespectingFetchPolicy()}},{key:"executeQueryRespectingFetchPolicy",value:function(){if(this.props.fetchPolicy){var e=this.client.getQueryFromState(this.props.as);this.props.fetchPolicy&&"function"==typeof this.props.fetchPolicy&&this.props.fetchPolicy(e)&&y(this.client,this.observableQuery)}else y(this.client,this.observableQuery)}},{key:"componentDidUpdate",value:function(e){!1===e.enabled&&!1!==this.props.enabled&&this.executeQueryRespectingFetchPolicy()}},{key:"componentWillUnmount",value:function(){this.queryUnsubscribe&&this.queryUnsubscribe()}},{key:"recomputeChildrenArgs",value:function(){this.childrenArgs=b(this)}},{key:"render",value:function(){return(0,this.props.children)(this.childrenArgs[0],this.childrenArgs[1])}}]),d}(f.Component);t.default=w,w.contextTypes={client:p.default.object,store:p.default.object};var k=p.default.object;w.propTypes={query:p.default.oneOfType([p.default.func,k]).isRequired,enabled:p.default.bool,as:p.default.string,children:p.default.func.isRequired,fetchPolicy:p.default.func},w.defaultProps={enabled:!0}},1153:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=n(67294),s=r(n(26726)),c=n(45330),u=n(14932),l=(0,o.memo)(function(e){var t=e.doctype,n=(0,s.default)();return(0,o.useEffect)(function(){var e,r=n.plugins.realtime;if(!r)throw Error("You must include the realtime plugin to use RealTimeQueries");var o={};"io.cozy.files"===t&&(o.enhanceDocFn=u.ensureFilePath);var s=function(e){(0,c.dispatchCreate)(n,t,e,o)},l=function(e){(0,c.dispatchUpdate)(n,t,e,o)},d=function(e){(0,c.dispatchDelete)(n,t,e,o)};return(e=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.subscribe("created",t,s);case 2:return e.next=4,r.subscribe("updated",t,l);case 4:return e.next=6,r.subscribe("deleted",t,d);case 6:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})(),function(){r.unsubscribe("created",t,s),r.unsubscribe("updated",t,l),r.unsubscribe("deleted",t,d)}},[n,t]),null});t.default=l},42189:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(59713)),u=r(n(24350)),l=r(n(66604)),d=r(n(82492)),f=r(n(84238)),p=r(n(71843)),h=n(25367);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){var t=(0,l.default)(e.relationships||{},function(e,t){return m(m({},e),{},{name:t,type:(0,h.resolveClass)(e.doctype,e.type)})});return m(m({},e),{},{relationships:(0,f.default)(t)>0?(0,u.default)(t,"name"):null})},g=function(e,t){if(!e)throw Error(t)},b=function(e,t){var n=(0,p.default)(e,t,function(e){return e.name});g(0===n.length,"Duplicated names in schemas being added: ".concat(n.map(function(e){return e.name}).join(", ")));var r=(0,p.default)(e,t,function(e){return e.doctype});g(0===r.length,"Duplicated doctypes in schemas being added: ".concat(r.map(function(e){return e.name}).join(", ")))},w=function(){var e,t;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,o.default)(this,n),this.byDoctype={},this.add(e),this.client=t}return(0,s.default)(n,[{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.default)(e,function(e,t){return m({name:t},y(e))});b(Object.values(t),Object.values(this.byDoctype)),(0,d.default)(this.byDoctype,(0,u.default)(t,function(e){return e.doctype}))}},{key:"getDoctypeSchema",value:function(e){var t=this.byDoctype[e];return!t&&(t=y({name:e,doctype:e}),this.byDoctype[e]=t),t}},{key:"getRelationship",value:function(e,t){if(!e)throw TypeError("Invalid doctype ".concat(e));var n=this.getDoctypeSchema(e);if(!n)throw Error("Cannot find doctype ".concat(e," in schema"));if(!n.relationships)throw Error("Schema for doctype ".concat(e," has no relationships"));return n.relationships[t]}},{key:"validate",value:(e=(0,i.default)(a.default.mark(function e(t){var n,r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},r=this.byDoctype[t._type]){e.next=4;break}return e.abrupt("return",!0);case 4:if(r.attributes){e.next=6;break}return e.abrupt("return",!0);case 6:e.t0=a.default.keys(r.attributes);case 7:if((e.t1=e.t0()).done){e.next=15;break}return i=e.t1.value,e.next=11,this.validateAttribute(t,i,r.attributes[i]);case 11:!0!==(o=e.sent)&&(n[i]=o),e.next=7;break;case 15:if(0!==Object.keys(n).length){e.next=17;break}return e.abrupt("return",!0);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"validateAttribute",value:(t=(0,i.default)(a.default.mark(function e(t,n,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.unique&&this.client)){e.next=6;break}return e.next=3,this.client.collection(t._type).checkUniquenessOf(n,t[n]);case 3:if(!(!0!==e.sent)){e.next=6;break}return e.abrupt("return","must be unique");case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}},e,this)})),function(e,n,r){return t.apply(this,arguments)})}]),n}();t.default=w},97619:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.transformBulkDocsResponse=void 0;var a=r(n(6479)),i=r(n(87757)),o=r(n(48926)),s=r(n(34575)),c=r(n(93913)),u=r(n(2205)),l=r(n(78585)),d=r(n(29754)),f=r(n(59713)),p=r(n(35905)),h=n(71450),v=r(n(37130)),m=n(87941),y=n(29822),g=r(n(22853)),b=n(88930),w=n(12196);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O=function(e){var t=e.selector,n=e.partialFilter,r=e.sort,a=e.fields;return!!t||!!n||!!r||!!a||!1},C=function(e,t){var n=(0,p.default)(e,t,function(e,t){return e.ok?x(x({},t),{},{_id:e.id,_rev:e.rev}):t});if(e.find(function(e){return!e.ok}))throw new y.BulkEditError(e,n);return{data:n}};t.transformBulkDocsResponse=C;var S=function(e){(0,u.default)(k,e);var t,n,r,f,p,v,y=(t=k,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);return e=n?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function k(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.client,r=t.stackClient,a=t.platform,i=t.performanceApi;return(0,s.default)(this,k),e=y.call(this),n&&g.default.warn("Using options.client is deprecated, prefer options.stackClient"),e.stackClient=r||n,e.isOnline=null==a?void 0:a.isOnline,e.performanceApi=i||w.defaultPerformanceApi,e}return(0,c.default)(k,[{key:"registerClient",value:function(e){this.stackClient=e.stackClient||e.client}},{key:"reset",value:(r=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.stackClient=null;case 1:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"request",value:(f=(0,o.default)(i.default.mark(function e(t,n,r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(null!=n&&n.forceStack)&&this.isOnline,!e.t0){e.next=5;break}return e.next=4,this.isOnline();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",a(t,n));case 7:if(e.prev=7,!t.mutationType){e.next=12;break}return e.next=11,this.executeMutation(t,n,r,a);case 11:case 14:return e.abrupt("return",e.sent);case 12:return e.next=14,this.executeQuery(t);case 17:if(e.prev=17,e.t1=e.catch(7),!(!(null!=n&&n.forceStack)&&(0,b.isReactNativeOfflineError)(e.t1))){e.next=21;break}return e.abrupt("return",a(t,n));case 21:throw e.t1;case 22:case"end":return e.stop()}},e,this,[[7,17]])})),function(e,t,n,r){return f.apply(this,arguments)})},{key:"persistCozyData",value:(p=(0,o.default)(i.default.mark(function e(t,n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(t));case 1:case"end":return e.stop()}},e)})),function(e,t){return p.apply(this,arguments)})},{key:"executeQuery",value:function(e){var t=e.doctype,n=e.selector,r=e.id,i=e.ids,o=e.referenced,s=(0,a.default)(e,["doctype","selector","id","ids","referenced"]);if(!t)throw g.default.warn("Bad query",e),Error("No doctype found in a query definition");var c=this.stackClient.collection(t);return r?c.get(r,e):i?c.getAll(i):o?c.findReferencedBy(o,s):O(e)?c.find(n,s):c.all(s)}},{key:"executeMutation",value:(v=(0,o.default)(i.default.mark(function e(t,n,r,o){var s,c,u,l,d;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=t.mutationType,c=t.document,u=t.documents,l=(0,a.default)(t,["mutationType","document","documents"]),e.t0=s,e.next=e.t0===h.MutationTypes.CREATE_DOCUMENT?4:e.t0===h.MutationTypes.UPDATE_DOCUMENTS?5:e.t0===h.MutationTypes.UPDATE_DOCUMENT?9:e.t0===h.MutationTypes.DELETE_DOCUMENT?10:e.t0===h.MutationTypes.ADD_REFERENCES_TO?11:e.t0===h.MutationTypes.REMOVE_REFERENCES_TO?12:e.t0===h.MutationTypes.ADD_REFERENCED_BY?13:e.t0===h.MutationTypes.REMOVE_REFERENCED_BY?18:e.t0===h.MutationTypes.UPLOAD_FILE?23:24;break;case 4:return e.abrupt("return",this.stackClient.collection(c._type).create(c));case 5:return e.next=7,this.stackClient.collection(u[0]._type).updateAll(u);case 7:return d=e.sent,e.abrupt("return",C(d,u));case 9:return e.abrupt("return",this.stackClient.collection(c._type).update(c));case 10:return e.abrupt("return",this.stackClient.collection(c._type).destroy(c));case 11:return e.abrupt("return",this.stackClient.collection(l.referencedDocuments[0]._type).addReferencesTo(c,l.referencedDocuments));case 12:return e.abrupt("return",this.stackClient.collection(l.referencedDocuments[0]._type).removeReferencesTo(c,l.referencedDocuments));case 13:if(c._type!==m.DOCTYPE_FILES){e.next=17;break}return e.abrupt("return",this.stackClient.collection(m.DOCTYPE_FILES).addReferencedBy(c,l.referencedDocuments));case 17:case 22:throw Error("The document type should be io.cozy.files");case 18:if(c._type!==m.DOCTYPE_FILES){e.next=22;break}return e.abrupt("return",this.stackClient.collection(m.DOCTYPE_FILES).removeReferencedBy(c,l.referencedDocuments));case 23:return e.abrupt("return",this.stackClient.collection(m.DOCTYPE_FILES).upload(l.file,l.dirPath));case 24:return e.abrupt("return",o(t,n,r));case 25:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return v.apply(this,arguments)})}]),k}(v.default);t.default=S},62946:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(2205)),u=r(n(78585)),l=r(n(29754)),d=r(n(37130)),f=function(e){(0,c.default)(h,e);var t,n,r,d,f,p=(t=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);return e=n?Reflect.construct(r,arguments,(0,l.default)(this).constructor):r.apply(this,arguments),(0,u.default)(this,e)});function h(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.webviewIntent;return(0,o.default)(this,h),(e=p.call(this)).webviewIntent=n,e}return(0,s.default)(h,[{key:"registerClient",value:function(e){}},{key:"reset",value:(r=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"request",value:(d=(0,i.default)(a.default.mark(function e(t,n,r,i){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.webviewIntent.call("flagshipLinkRequest",t,n));case 1:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return d.apply(this,arguments)})},{key:"persistCozyData",value:(f=(0,i.default)(a.default.mark(function e(t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}},e)})),function(e,t){return f.apply(this,arguments)})}]),h}(d.default);t.default=f},28187:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913));n(71450);var o=function(){function e(t,n,r,i){(0,a.default)(this,e);var o=i.dispatch,s=i.get,c=i.query,u=i.mutate,l=i.save;this.target=t,this.name=n,this.doctype=r,this.get=s,this.query=c,this.mutate=u,this.save=l,this.dispatch=o}return(0,i.default)(e,[{key:"raw",get:function(){throw Error("A relationship must define its raw getter")}},{key:"data",get:function(){throw Error("A relationship must define its data getter")}}],[{key:"query",value:function(e,t,n){throw Error("A custom relationship must define its query() function")}}]),e}();t.default=o},13965:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.updateRelationship=t.updateHasManyItem=t.removeHasManyItem=t.setHasManyItem=t.getHasManyItems=t.getHasManyItem=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(81506)),s=r(n(2205)),c=r(n(78585)),u=r(n(29754)),l=r(n(59713)),d=r(n(319)),f=r(n(27361)),p=r(n(82492)),h=n(71450),v=n(65972),m=r(n(28187)),y=r(n(22853));function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=function(e,t,n){var r=-1===t?e.length:t;return[].concat((0,d.default)(e.slice(0,r)),[n],(0,d.default)(e.slice(r+1)))},k=function(e){(0,s.default)(p,e);var t,n,r=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function p(){var e;(0,a.default)(this,p);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),(0,l.default)((0,o.default)(e),"updateRelationshipData",function(t){return function(n,r){var a=(0,v.getDocumentFromState)(r(),e.target._type,e.target._id);n((0,v.receiveQueryResult)(null,{data:b(b({},a),{},{relationships:b(b({},a.relationships),{},(0,l.default)({},e.name,t(a.relationships[e.name])))})}))}}),e}return(0,i.default)(p,[{key:"fetchMore",value:function(){throw"Not implemented"}},{key:"exists",value:function(e){return this.existsById(e._id)}},{key:"containsById",value:function(e){return void 0!==this.getRelationship().data.find(function(t){return e===t._id})}},{key:"existsById",value:function(e){return!!(this.containsById(e)&&this.get(this.doctype,e))}},{key:"add",value:function(e){var t=(Array.isArray(e)?e:[e]).map(function(e){return e._id});return this.addById(t)}},{key:"remove",value:function(e){var t=(Array.isArray(e)?e:[e]).map(function(e){return e._id});return this.removeById(t)}},{key:"addTargetRelationships",value:function(e){var t,n=this;!this.target.relationships&&(this.target.relationships={}),!this.target.relationships[this.name]&&(this.target.relationships[this.name]={data:[]});var r=(Array.isArray(e)?e:[e]).filter(function(e){return!n.existsById(e)}).map(function(e){return{_id:e,_type:n.doctype}});(t=this.target.relationships[this.name].data).push.apply(t,(0,d.default)(r)),this.updateMetaCount()}},{key:"addById",value:function(e){return this.addTargetRelationships(e),this.save(this.target)}},{key:"removeTargetRelationships",value:function(e){var t=Array.isArray(e)?e:[e];this.target.relationships[this.name].data=this.target.relationships[this.name].data.filter(function(e){var n=e._id;return!t.includes(n)}),this.updateMetaCount()}},{key:"removeById",value:function(e){return this.removeTargetRelationships(e),this.save(this.target)}},{key:"updateMetaCount",value:function(){void 0!==(0,f.default)(this.target.relationships[this.name],"meta.count")&&(this.target.relationships[this.name].meta=b(b({},this.target.relationships[this.name].meta),{},{count:this.target.relationships[this.name].data.length}))}},{key:"getRelationship",value:function(){var e=this.target[this.name],t=(0,f.default)(this.target,"relationships.".concat(this.name));return t?t:(e&&e.length&&y.default.warn("You're trying to access data on a relationship that appear to not be loaded yet. You may want to use 'include()' on your query"),{data:[],next:!0,meta:{count:0}})}},{key:"updateTargetRelationship",value:function(e,t){var n=e.readDocument(this.target._type,this.target._id);e.writeDocument(this.updateRelationship(n,t))}},{key:"updateRelationship",value:function(e,t){return p.updateRelationship(e,this.name,t)}},{key:"dehydrate",value:function(e){return b(b({},e),{},{relationships:b(b({},e.relationships),{},(0,l.default)({},this.name,{data:this.raw}))})}},{key:"raw",get:function(){return this.getRelationship().data}},{key:"data",get:function(){var e=this;return this.getRelationship().data.map(function(t){var n=t._id,r=t._type;return e.get(r,n)}).filter(Boolean)}},{key:"hasMore",get:function(){return this.getRelationship().next}},{key:"count",get:function(){var e=this.getRelationship();return e.meta?e.meta.count:e.data.length}}],[{key:"query",value:function(e,t,n){var r=(0,f.default)(e,"relationships.".concat(n.name,".data"),[]).map(function(e){return e._id});return new h.QueryDefinition({doctype:n.doctype,ids:r})}}]),p}(m.default),x=k.getHasManyItem=function(e,t,n){return(0,f.default)(e,"relationships.".concat(t,".data"),[]).find(function(e){return e._id==n})};t.getHasManyItem=x;var O=k.getHasManyItems=function(e,t){return(0,f.default)(e,"relationships.".concat(t,".data"),[])};t.getHasManyItems=O;var C=k.setHasManyItem=function(e,t,n,r){var a=k.getHasManyItems(e,t),i=a.findIndex(function(e){return e._id===n}),o=(0,p.default)({},a[i],r),s=w(a,i,o);return k.updateRelationship(e,t,function(e){return(0,p.default)({},e,{data:s})})};t.setHasManyItem=C;var S=k.removeHasManyItem=function(e,t,n){var r=k.getHasManyItems(e,t).filter(function(e){return e._id!==n});return k.updateRelationship(e,t,function(){return{data:r}})};t.removeHasManyItem=S;var E=k.updateHasManyItem=function(e,t,n,r){var a=r(k.getHasManyItem(e,t,n));return k.setHasManyItem(e,t,n,a)};t.updateHasManyItem=E;var P=k.updateRelationship=function(e,t,n){return b(b({},e),{},{relationships:b(b({},e.relationships),{},(0,l.default)({},t,b(b({},e.relationships?e.relationships[t]:{}),n(e.relationships?e.relationships[t]:{}))))})};t.updateRelationship=P;t.default=k},32349:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getFileDatetime=void 0;var a=r(n(87757)),i=r(n(319)),o=r(n(59713)),s=r(n(48926)),c=r(n(34575)),u=r(n(93913)),l=r(n(16525)),d=r(n(2205)),f=r(n(78585)),p=r(n(29754)),h=r(n(63038)),v=r(n(27361)),m=r(n(57557)),y=r(n(44908)),g=n(71450),b=n(65972),w=n(87941);r(n(28187));var k=r(n(13965));function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C=function(e,t){var n=(0,h.default)(e,3),r=n[0],a=n[1],i=n[2];return[i?[r,a,i]:[r,a],t]},S=function(e){var t;return(null===(t=e.metadata)||void 0===t?void 0:t.datetime)||e.created_at};t.getFileDatetime=S;var E=function(e){(0,d.default)(x,e);var t,n,r,o,h,k=(t=x,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,p.default)(t);return e=n?Reflect.construct(r,arguments,(0,p.default)(this).constructor):r.apply(this,arguments),(0,f.default)(this,e)});function x(){return(0,c.default)(this,x),k.apply(this,arguments)}return(0,u.default)(x,[{key:"fetchMore",value:(r=(0,s.default)(a.default.mark(function e(){var t,n,r,o=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new g.QueryDefinition({doctype:w.DOCTYPE_FILES}),r=(n=this.getRelationship().data)[n.length-1],e.next=5,this.dispatch(function(){var e=(0,s.default)(a.default.mark(function e(s,c){var u,l,d;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=S((0,b.getDocumentFromState)(c(),r._type,r._id)),l=C([o.target._type,o.target._id,u],n[n.length-1]._id),e.next=5,o.query(t.referencedBy(o.target).offsetCursor(l));case 5:return(d=e.sent).data.shift(),e.next=9,o.dispatch(o.updateRelationshipData(function(e){return O(O({},e),{},{data:[].concat((0,i.default)(e.data),(0,i.default)(d.data)),next:d.next})}));case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"addById",value:(o=(0,s.default)(a.default.mark(function e(t){var n,r,i=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.isArray(t)?t:[t],this.addTargetRelationships(n),r=n.map(function(e){return{_id:e,_type:i.doctype}}),e.next=5,this.mutate(this.addReferences(r));case 5:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"removeById",value:(h=(0,s.default)(a.default.mark(function e(t){var n,r,i=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.isArray(t)?t:[t],this.removeTargetRelationships(t),r=n.map(function(e){return{_id:e,_type:i.doctype}}),e.next=5,this.mutate(this.removeReferences(r));case 5:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"addReferences",value:function(e){if(this.target._type===w.DOCTYPE_FILES)return g.Mutations.addReferencedBy(this.target,e);if(e[0]._type===w.DOCTYPE_FILES)return g.Mutations.addReferencesTo(this.target,e);throw Error("Either the document or the references should be io.cozy.files")}},{key:"removeReferences",value:function(e){if(this.target._type===w.DOCTYPE_FILES)return g.Mutations.removeReferencedBy(this.target,e);if(e[0]._type===w.DOCTYPE_FILES)return g.Mutations.removeReferencesTo(this.target,e);throw Error("Either the document or the references should be io.cozy.files")}},{key:"dehydrate",value:function(e){return(0,m.default)(e,[this.name,"relationships.".concat(this.name)])}},{key:"data",get:function(){var e=this;return this.target._type===w.DOCTYPE_FILES?(0,v.default)(this.target,"referenced_by",[]).map(function(t){var n=t.id,r=t.type;return e.get(r,n)}).filter(Boolean):(0,l.default)((0,p.default)(x.prototype),"data",this)}}],[{key:"query",value:function(e,t,n){if(e._type===w.DOCTYPE_FILES){var r=(0,v.default)(e,"relationships.referenced_by.data",[]),a=(0,y.default)(r.filter(function(e){return e.type===n.doctype}).map(function(e){return e.id}));return a.length>0?(0,g.Q)(n.doctype).getByIds(a):null}var i=C([e._type,e._id],"");return(0,g.Q)(n.doctype).referencedBy(e).offsetCursor(i)}}]),x}(k.default);t.default=E},23433:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(59713)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),c=r(n(78585)),u=r(n(29754)),l=n(71450),d=r(n(28187));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(e){(0,s.default)(d,e);var t,n,r=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function d(){return(0,i.default)(this,d),r.apply(this,arguments)}return(0,o.default)(d,[{key:"addById",value:function(e){this.getRelationship().push(e)}},{key:"removeById",value:function(e){var t=this.getRelationship(),n=t.indexOf(e);-1!==n&&t.splice(n,1)}},{key:"existsById",value:function(e){return -1!==this.getRelationship().indexOf(e)}},{key:"getRelationship",value:function(){return this.target[this.name]=this.target[this.name]||[],this.target[this.name]}},{key:"dehydrate",value:function(e){return p(p({},e),{},(0,a.default)({},this.name,this.raw||[]))}},{key:"raw",get:function(){return this.target[this.name]}},{key:"data",get:function(){var e=this,t=this.doctype;return(this.raw||[]).map(function(n){return e.get(t,n)})}}],[{key:"query",value:function(e,t,n){var r=e[n.name];return r&&r>0?(0,l.Q)(n.doctype).getByIds(r):null}}]),d}(d.default);t.default=h},1715:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(16525)),s=r(n(2205)),c=r(n(78585)),u=r(n(29754)),l=r(n(13965)),d=n(71450),f=function(e){(0,s.default)(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function l(){return(0,a.default)(this,l),r.apply(this,arguments)}return(0,i.default)(l,[{key:"data",get:function(){var e=this;return(0,o.default)((0,u.default)(l.prototype),"data",this).filter(function(t){return t.slug===e.target.slug})}}],[{key:"query",value:function(e,t){return(0,d.Q)("io.cozy.triggers").where({worker:"konnector"})}}]),l}(l.default);t.default=f},95760:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(59713)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),c=r(n(78585)),u=r(n(29754)),l=r(n(27361)),d=r(n(36968)),f=n(71450),p=r(n(28187)),h=r(n(22853));function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){(0,s.default)(p,e);var t,n,r=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function p(){return(0,i.default)(this,p),r.apply(this,arguments)}return(0,o.default)(p,[{key:"add",value:function(e){return this.setRelationship(e),this.save(this.target)}},{key:"remove",value:function(){return this.setRelationship(void 0),this.save(this.target)}},{key:"setRelationship",value:function(e){if(e&&e._type!==this.doctype)throw Error("Tried to associate a ".concat(e._type," document to a HasOne relationship on ").concat(this.doctype," document"));var t="relationships[".concat(this.name,"].data");e?(0,d.default)(this.target,t,{_id:e._id,_type:e._type}):(0,d.default)(this.target,t,void 0)}},{key:"set",value:function(e){h.default.warn("set is deprecated for has-one relationships. Use `add` instead."),this.setRelationship(e)}},{key:"unset",value:function(){h.default.warn("unset is deprecated for has-one relationships. Use `remove` instead."),this.setRelationship(void 0)}},{key:"dehydrate",value:function(e){return this.raw?m(m({},e),{},{relationships:m(m({},e.relationships),{},(0,a.default)({},this.name,{data:this.raw}))}):e}},{key:"raw",get:function(){return(0,l.default)(this.target,"relationships[".concat(this.name,"].data"),null)}},{key:"data",get:function(){return this.raw?this.get(this.doctype,this.raw._id):null}}],[{key:"query",value:function(e,t,n){var r=(0,l.default)(e,"relationships.".concat(n.name,".data"),{});return r&&r._id?(0,f.Q)(n.doctype).getById(r._id):null}}]),p}(p.default);t.default=y},13846:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BelongsToInPlace=t.default=void 0;var a=r(n(59713)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),c=r(n(78585)),u=r(n(29754)),l=r(n(28187)),d=n(71450);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(e){(0,s.default)(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function l(){return(0,i.default)(this,l),r.apply(this,arguments)}return(0,o.default)(l,[{key:"dehydrate",value:function(e){return p(p({},e),{},(0,a.default)({},this.name,this.raw||void 0))}},{key:"raw",get:function(){return this.target[this.name]}},{key:"data",get:function(){return this.get(this.doctype,this.raw)}}],[{key:"query",value:function(e,t,n){var r=e[n.name];return t.getDocumentFromState(n.doctype,r)||(0,d.Q)(n.doctype).getById(r)}}]),l}(l.default);t.default=h;t.BelongsToInPlace=h},11282:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getReferencedById=t.getReferencedBy=t.isReferencedById=t.isReferencedBy=t.create=t.resolveClass=t.attachRelationships=t.responseToRelationship=t.pickTypeAndId=void 0;var a=r(n(59713)),i=r(n(78718)),o=r(n(35937)),s=r(n(28187)),c=r(n(95760)),u=r(n(13846)),l=r(n(13965)),d=r(n(23433)),f=r(n(32349));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(e){return(0,i.default)(e,"_type","_id")};t.pickTypeAndId=v;t.responseToRelationship=function(e){var t,n;return(0,o.default)({data:(t=v,Array.isArray(n=e.data)?n.map(t):t(n)),meta:e.meta,next:e.next,skip:e.skip,bookmark:e.bookmark})};var m=function(e,t){return h(h({},e),{},{relationships:h(h({},e.relationships),t)})};t.attachRelationships=function(e,t){if(Array.isArray(e.data))return h(h({},e),{},{data:e.data.map(function(e){return m(e,t[e._id])})});var n=e.data;return h(h({},e),{},{data:m(n,t[n._id])})};var y={"io.cozy.files:has-many":f.default,"has-many":l.default,"belongs-to-in-place":u.default,"has-one":c.default,"has-one-in-place":u.default,"has-many-in-place":d.default};t.resolveClass=function(e,t){if(void 0===t)throw Error("Undefined type for "+e);if("string"!=typeof t)return t;var n=y["".concat(e,":").concat(t)]||y[t];if(n)return n;throw Error("Unknown association '".concat(t,"'"))};t.create=function(e,t,n){var r=t.name,a=t.type,i=t.doctype;if(e[r]instanceof s.default)throw Error("Association ".concat(r," already exists"));return new a(e,r,i,n)};t.isReferencedBy=function(e,t){var n,r;return((null==e?void 0:null===(n=e.relationships)||void 0===n?void 0:null===(r=n.referenced_by)||void 0===r?void 0:r.data)||(null==e?void 0:e.referenced_by)||[]).some(function(e){return e.type===t})};t.isReferencedById=function(e,t,n){var r,a;return((null==e?void 0:null===(r=e.relationships)||void 0===r?void 0:null===(a=r.referenced_by)||void 0===a?void 0:a.data)||(null==e?void 0:e.referenced_by)||[]).some(function(e){return e.type===t&&e.id===n})};t.getReferencedBy=function(e,t){var n,r;return((null==e?void 0:null===(n=e.relationships)||void 0===n?void 0:null===(r=n.referenced_by)||void 0===r?void 0:r.data)||(null==e?void 0:e.referenced_by)||[]).filter(function(e){return e.type===t})};t.getReferencedById=function(e,t,n){var r,a;return((null==e?void 0:null===(r=e.relationships)||void 0===r?void 0:null===(a=r.referenced_by)||void 0===a?void 0:a.data)||(null==e?void 0:e.referenced_by)||[]).filter(function(e){return e.type===t&&e.id===n})}},25367:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"HasManyFiles",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"HasMany",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"HasOne",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"HasOneInPlace",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"HasManyInPlace",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"HasManyTriggers",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Association",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"resolveClass",{enumerable:!0,get:function(){return d.resolveClass}}),Object.defineProperty(t,"create",{enumerable:!0,get:function(){return d.create}}),Object.defineProperty(t,"isReferencedBy",{enumerable:!0,get:function(){return d.isReferencedBy}}),Object.defineProperty(t,"isReferencedById",{enumerable:!0,get:function(){return d.isReferencedById}}),Object.defineProperty(t,"getReferencedBy",{enumerable:!0,get:function(){return d.getReferencedBy}}),Object.defineProperty(t,"getReferencedById",{enumerable:!0,get:function(){return d.getReferencedById}});var a=r(n(32349)),i=r(n(13965)),o=r(n(95760)),s=r(n(13846)),c=r(n(23433)),u=r(n(1715)),l=r(n(28187)),d=n(11282)},18118:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.authFunction=t.authenticateWithCordova=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(87941),c=n(25976),u="undefined"!=typeof window?window:null,l=function(e){return new Promise(function(t,n){u.SafariViewController.show({url:e,transition:"curl"},function(e){"closed"===e.event&&n(Error(s.REGISTRATION_ABORT))},function(e){console.log("KO: "+e),n(Error(s.REGISTRATION_ABORT))});var r=u.handleOpenURL;u.handleOpenURL=function(e){u.SafariViewController.hide(),t(e),r&&(u.handleOpenURL=r)}})},d=function(e){return new Promise(function(t,n){var r=u.cordova.InAppBrowser.open(e,"_blank","clearcache=yes,zoom=no"),a=function(){r.removeEventListener("loadstart",i),r.removeEventListener("exit",o)},i=function(e){var n=e.url,i=/\?access_code=(.+)$/.test(n),o=/\?state=(.+)$/.test(n);(i||o)&&(t(n),a(),r.close())},o=function(){n(Error(s.REGISTRATION_ABORT)),a(),r.close()};r.addEventListener("loadstart",i),r.addEventListener("exit",o)})};var f=(r=(0,o.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=(0,c.isIOSApp)(),!e.t0){e.next=5;break}return e.next=4,(0,c.hasSafariPlugin)();case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=9;break}return e.abrupt("return",l(t));case 9:if(!(0,c.hasInAppBrowserPlugin)()){e.next=13;break}return e.abrupt("return",d(t));case 13:return console.log(t),e.abrupt("return",new Promise(function(e){setTimeout(function(){e(prompt("Paste the url here:"))},5e3)}));case 15:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.authenticateWithCordova=f;t.authFunction=f},87941:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOCTYPE_FILES_ENCRYPTION=t.DOCTYPE_PERMISSIONS=t.DOCTYPE_FILES=t.REGISTRATION_ABORT=void 0;t.REGISTRATION_ABORT="REGISTRATION_ABORT";t.DOCTYPE_FILES="io.cozy.files";t.DOCTYPE_PERMISSIONS="io.cozy.permissions";t.DOCTYPE_FILES_ENCRYPTION="io.cozy.files.encryption"},20538:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_TYPE=void 0;t.APP_TYPE={KONNECTOR:"konnector",WEBAPP:"webapp"}},54028:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.clientContext=void 0;var a=n(67294);r(n(18621));var i=(0,a.createContext)({client:null,store:null});t.clientContext=i;t.default=i},29822:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.BulkEditError=void 0;var a=r(n(59713)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),c=r(n(78585)),u=r(n(29754)),l=r(n(65957)),d=r(n(35905));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(e){(0,s.default)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function a(e,t){var n;return(0,i.default)(this,a),(n=r.call(this,"Error while bulk saving")).name="BulkEditError",n.results=(0,d.default)(e,t,function(e,t){return p(p({},e),{},{doc:t})}),n}return(0,o.default)(a,[{key:"getUpdatedDocuments",value:function(){return this.results.filter(function(e){return e.ok}).map(function(e){return e.doc})}},{key:"getErrors",value:function(){return this.results.filter(function(e){return!e.ok})}}]),a}((0,l.default)(Error));t.BulkEditError=h},23864:function(e,t,n){"use strict";var r,a,i,o=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.certifyFlagship=void 0;var s=o(n(87757)),c=o(n(48926));o(n(18621));var u=n(79166);var l=(r=(0,c.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.getStackClient(),e.next=4,n.fetchJSON("POST","/auth/clients/".concat(n.oauthOptions.clientID,"/challenge"),null,{headers:{Authorization:n.registrationAccessTokenToAuthHeader()}});case 4:return r=e.sent,e.abrupt("return",r.nonce);case 8:throw e.prev=8,e.t0=e.catch(0),Error("[FLAGSHIP_CERTIFICATION] Something went wrong while requesting a challenge from CozyStack:\n"+e.t0.message);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return r.apply(this,arguments)});var d=(a=(0,c.default)(s.default.mark(function e(t,n,r){var a,i,o,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.platform,i=t.attestation,o=t.keyId,c=t.issuer,u=r.getStackClient(),e.next=5,u.fetchJSON("POST","/auth/clients/".concat(u.oauthOptions.clientID,"/attestation"),{platform:a,attestation:i,challenge:n,keyId:o,issuer:c},{headers:{Authorization:u.registrationAccessTokenToAuthHeader()}});case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),Error("[FLAGSHIP_CERTIFICATION] Something went wrong while giving attestation to CozyStack:\n"+e.t0.message);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return a.apply(this,arguments)});var f=(i=(0,c.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("[FLAGSHIP_CERTIFICATION] Certification configuration is not set");case 2:return e.prev=2,e.next=5,l(n);case 5:return r=e.sent,e.next=8,(0,u.getAppAttestationFromStore)(r,t);case 8:return a=e.sent,e.next=11,d(a,r,n);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.warn('[FLAGSHIP_CERTIFICATION] Automatic certification for URI "'.concat(n.stackClient.uri,'" failed. This is expected on dev environments and non-official phones. Cozy-stack will continue with manual certification through 2FA')),console.warn(e.t0.message);case 17:case"end":return e.stop()}},e,null,[[2,13]])})),function(e,t){return i.apply(this,arguments)});t.certifyFlagship=f},79166:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAppAttestationFromStore=void 0;var i=a(n(87757)),o=a(n(48926));var s=(r=(0,o.default)(i.default.mark(function e(t,n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("getAppAttestationFromStore can only be called from a React Native container");case 1:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.getAppAttestationFromStore=s},78133:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.dehydrate=void 0;var a=r(n(63038)),i=n(25367);t.dehydrate=function(e){return Object.entries(e).reduce(function(e,t){var n=(0,a.default)(t,2),r=n[0],o=n[1],s=e;if(o instanceof i.Association){if(o.dehydrate)s=o.dehydrate(s);else throw Error("Association on key ".concat(r," should have a dehydrate method"))}else s[r]=o;return s},{})}},72004:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"deconstructCozyWebLinkWithSlug",{enumerable:!0,get:function(){return r.deconstructCozyWebLinkWithSlug}}),Object.defineProperty(t,"deconstructRedirectLink",{enumerable:!0,get:function(){return r.deconstructRedirectLink}}),Object.defineProperty(t,"generateWebLink",{enumerable:!0,get:function(){return r.generateWebLink}}),Object.defineProperty(t,"ensureFirstSlash",{enumerable:!0,get:function(){return r.ensureFirstSlash}}),Object.defineProperty(t,"rootCozyUrl",{enumerable:!0,get:function(){return r.rootCozyUrl}}),Object.defineProperty(t,"InvalidRedirectLinkError",{enumerable:!0,get:function(){return r.InvalidRedirectLinkError}}),Object.defineProperty(t,"InvalidCozyUrlError",{enumerable:!0,get:function(){return r.InvalidCozyUrlError}}),Object.defineProperty(t,"InvalidProtocolError",{enumerable:!0,get:function(){return r.InvalidProtocolError}}),Object.defineProperty(t,"BlockedCozyError",{enumerable:!0,get:function(){return r.BlockedCozyError}}),Object.defineProperty(t,"dehydrate",{enumerable:!0,get:function(){return a.dehydrate}}),Object.defineProperty(t,"editSettings",{enumerable:!0,get:function(){return i.editSettings}}),Object.defineProperty(t,"getQuery",{enumerable:!0,get:function(){return i.getQuery}}),Object.defineProperty(t,"getSettings",{enumerable:!0,get:function(){return i.getSettings}}),Object.defineProperty(t,"normalizeSettings",{enumerable:!0,get:function(){return i.normalizeSettings}}),Object.defineProperty(t,"saveAfterFetchSettings",{enumerable:!0,get:function(){return i.saveAfterFetchSettings}});var r=n(77304),a=n(78133),i=n(56200)},14932:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ensureFilePath=void 0;var i=a(n(87757)),o=a(n(59713)),s=a(n(48926)),c=n(71450),u=a(n(18621));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var d=function(e){return{definition:function(){return(0,c.Q)("io.cozy.files").getById(e)},options:{as:"io.cozy.files/".concat(e),singleDocData:!0,fetchPolicy:u.default.fetchPolicies.olderThan(3e4)}}};var f=(r=(0,s.default)(i.default.mark(function e(t){var n,r,a,s,c=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:{},!t.path){e.next=3;break}return e.abrupt("return",t);case 3:return r=d(t.dir_id),e.next=6,n.client.fetchQueryAndGetFromState({definition:r.definition(),options:r.options});case 6:if(!(!(a=e.sent).data||!a.data.path)){e.next=9;break}throw Error("Could not define a file path for ".concat(t._id||t.id));case 9:return s=a.data.path+"/"+t.name,e.abrupt("return",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({path:s},t));case 11:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.ensureFilePath=f},56200:function(e,t,n){"use strict";var r,a,i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getQuery=t.extractKeys=t.editSettings=t.normalizeSettings=t.saveAfterFetchSettings=t.getSettings=void 0;var o=i(n(63038)),s=i(n(59713)),c=i(n(87757)),u=i(n(48926));i(n(18621));var l=i(n(39268)),d=n(71450);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=l.default.olderThan(36e5);var m=(r=(0,u.default)(c.default.mark(function e(t,n,r){var a,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=O(n),e.next=3,t.fetchQueryAndGetFromState({definition:a.definition,options:a.options});case 3:return i=g(e.sent.data),e.abrupt("return",x(i,r));case 6:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)});t.getSettings=m;var y=(a=(0,u.default)(c.default.mark(function e(t,n,r,a){var i,o,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=O(n),e.next=3,t.fetchQueryAndGetFromState({definition:i.definition,options:i.options});case 3:return o=g(e.sent.data),s=void 0,s="function"==typeof r?r(x(o,a)):h(h({},x(o,Object.keys(r))),r),u=b(n,o,s),e.next=10,t.save(u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)})),function(e,t,n,r){return a.apply(this,arguments)});t.saveAfterFetchSettings=y;var g=function(e){return(Array.isArray(e)?e[0]:e)||{}};t.normalizeSettings=g;var b=function(e,t,n){var r=E(e);return"instance"===e?w(t,n):k(t,r,n)};t.editSettings=b;var w=function(e,t){for(var n=h(h({_id:e._id,_type:e._type,_rev:e.meta.rev},e),{},{attributes:h({},e.attributes)}),r=0,a=Object.entries(t);r<a.length;r++){var i=(0,o.default)(a[r],2),s=i[0],c=i[1];n[s]=c,n.attributes[s]=c}return n},k=function(e,t,n){for(var r=h({_type:t},e),a=0,i=Object.entries(n);a<i.length;a++){var s=(0,o.default)(i[a],2),c=s[0],u=s[1];r[c]=u}return r},x=function(e,t){var n={},r,a=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}}}(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;n[i]=e[i]}}catch(e){a.e(e)}finally{a.f()}return n};t.extractKeys=x;var O=function(e){return"instance"===e?S(e):"passwords"===e?S("bitwarden"):C(e)};t.getQuery=O;var C=function(e){var t=E(e);return{definition:(0,d.Q)(t).limitBy(1),options:{as:t,fetchPolicy:v,singleDocData:!0}}},S=function(e){var t="io.cozy.settings",n=E(e);return{definition:(0,d.Q)(t).getById(n),options:{as:"".concat(t,"/").concat(n),fetchPolicy:v,singleDocData:!0}}},E=function(e){return["instance","bitwarden"].includes(e)?"io.cozy.settings.".concat(e):"passwords"===e?"io.cozy.settings.bitwarden":"io.cozy.".concat(e,".settings")}},77304:function(e,t,n){"use strict";var r,a,i,o=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.rootCozyUrl=t.InvalidCozyUrlError=t.BlockedCozyError=t.InvalidProtocolError=t.InvalidRedirectLinkError=t.deconstructRedirectLink=t.deconstructCozyWebLinkWithSlug=t.generateWebLink=t.ensureFirstSlash=void 0;var s=o(n(319)),c=o(n(68551)),u=o(n(87757)),l=o(n(48926)),d=o(n(34575)),f=o(n(2205)),p=o(n(78585)),h=o(n(29754)),v=o(n(65957)),m=o(n(63038));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);return n=t?Reflect.construct(r,arguments,(0,h.default)(this).constructor):r.apply(this,arguments),(0,p.default)(this,n)}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){return e?e.startsWith("/")?e:"/"+e:"/"};t.ensureFirstSlash=b;t.generateWebLink=function(e){var t=e.cozyUrl,n=e.searchParams,r=e.pathname,a=e.hash,i=e.slug,o=e.subDomainType,s=new URL(t);s.host="nested"===o?"".concat(i,".").concat(s.host):s.host.split(".").map(function(e,t){return 0===t?e+"-"+i:e}).join("."),s.pathname=b(r),s.hash=b(a);var c,u=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}}}(n||[]);try{for(u.s();!(c=u.n()).done;){var l=(0,m.default)(c.value,2),d=l[0],f=l[1];s.searchParams.set(d,f)}}catch(e){u.e(e)}finally{u.f()}return s.toString()};t.deconstructCozyWebLinkWithSlug=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flat",n=new URL(e),r="nested"===t?n.host.split(".")[0]:n.host.split(".")[0].split("-")[1],a="nested"===t?n.host.split(".")[1]:n.host.split(".")[0].split("-")[0];return{cozyBaseDomain:n.host.split(".").slice("nested"===t?2:1).join("."),cozyName:a,pathname:n.pathname,hash:n.hash,protocol:n.protocol,searchParams:n.searchParams.toString(),slug:r}};t.deconstructRedirectLink=function(e){var t=e.split("#"),n=(0,m.default)(t,2),r=n[0],a=n[1],i=r.split(/\/(.*)/),o=(0,m.default)(i,2),s=o[0],c=o[1];if(!s.match(/^[a-z0-9]+$/))throw new w(e);return{slug:s,pathname:c,hash:a}};var w=function(e){(0,f.default)(n,e);var t=y(n);function n(e){var r;return(0,d.default)(this,n),(r=t.call(this,"Invalid redirect link ".concat(e))).redirectLink=e,r}return n}((0,v.default)(Error));t.InvalidRedirectLinkError=w;var k=function(e){(0,f.default)(n,e);var t=y(n);function n(e){var r;return(0,d.default)(this,n),(r=t.call(this,"Invalid URL protocol ".concat(e.protocol))).url=e,r}return n}((0,v.default)(Error));t.InvalidProtocolError=k;var x=function(e){(0,f.default)(n,e);var t=y(n);function n(e){var r;return(0,d.default)(this,n),(r=t.call(this,"Blocked cozy ".concat(e.toString()))).url=e,r}return n}((0,v.default)(Error));t.BlockedCozyError=x;var O=function(e){(0,f.default)(n,e);var t=y(n);function n(e){var r;return(0,d.default)(this,n),(r=t.call(this,"URL ".concat(e.toString()," does not seem to be a valid Cozy URL"))).url=e,r}return n}((0,v.default)(Error));t.InvalidCozyUrlError=O;var C=function(e){var t=e.protocol,n=e.hostname,r=e.port;return(""!==t?"".concat(t,"//"):"https://")+n+(""!==r?":".concat(r):"")};var S=(r=(0,l.default)(u.default.mark(function e(t){var n,r,a,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(C(t)+"/.well-known/change-password");case 2:if(r=(n=e.sent).status,a=n.url,404!==r){e.next=6;break}throw new O(t);case 6:return e.next=8,P(n);case 8:if(!e.sent){e.next=10;break}throw new x(t);case 10:return i=t.origin!==new URL(a).origin,e.abrupt("return",200===r&&!i);case 12:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});var E=(a=(0,l.default)(u.default.mark(function e(t){var n,r,a,i,o,l,d,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(["http:","https:"].includes(t.protocol)){e.next=2;break}throw new k(t);case 2:return e.next=4,S(t);case 4:if(!e.sent){e.next=6;break}return e.abrupt("return",new URL(C({protocol:t.protocol,hostname:t.hostname,port:t.port})));case 6:if(!/^[^.-][^.]+-[^.-]+\./.test(t.hostname)){e.next=14;break}return n=t.hostname.split("."),a=(r=(0,c.default)(n))[0],i=r.slice(1),o=[a.replace(/-.+/,"")].concat((0,s.default)(i)).join("."),l=new URL(C({protocol:t.protocol,hostname:o,port:t.port})),e.next=12,S(l);case 12:if(!e.sent){e.next=14;break}return e.abrupt("return",l);case 14:return d=t.hostname.split(".").splice(1).join("."),f=new URL(C({protocol:t.protocol,hostname:d,port:t.port})),e.next=18,S(f);case 18:if(!e.sent){e.next=20;break}return e.abrupt("return",f);case 20:throw new O(t);case 21:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});t.rootCozyUrl=E;var P=(i=(0,l.default)(u.default.mark(function e(t){var n,r,a,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(503!==t.status)){e.next=2;break}return e.abrupt("return",!1);case 2:return a=(r=t.headers.get("content-type"))&&r.indexOf("json")>=0,e.next=6,a?t.json():t.text();case 6:if(!(null!=(i=e.sent)&&null!==(n=i.some)&&void 0!==n&&n.call(i,function(e){return"Blocked"===e.title}))){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},378:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.queryConnectFlat=t.queryConnect=t.withClient=void 0;var i=a(n(59713)),o=a(n(67154)),s=r(n(67294)),c=a(n(45697)),u=a(n(47745)),l=a(n(18597)),d=a(n(26726)),f=n(72403),p=a(n(22853));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.withClient=function(e){var t=function(t){var n=(0,d.default)();return s.default.createElement(e,(0,o.default)({},t,{client:n}))};return t.displayName="withClient(".concat(e.displayName||e.name,")"),t};var m=function(e,t,n){if(!t)throw Error("withQuery has no options for ".concat(e," (wrapping ").concat(n.name,")"));return function(n){var r=function(r,a){if(!a.client)throw Error("Should be used with client in context (use CozyProvider to set context)");var o="function"==typeof t?t(r):t;return t.doc?(p.default.warn("queryOpts.doc is deprecated"),s.default.createElement(n,v((0,i.default)({},e,o.doc),r))):s.default.createElement(l.default,o,function(t){return s.default.createElement(n,v((0,i.default)({},e,t),r))})};return r.contextTypes={client:c.default.object},r.displayName="withQuery(".concat(n.displayName||n.name,")"),r}};t.queryConnect=function(e){return function(t){var n=Object.keys(e).map(function(n){return m(n,e[n],t)});return u.default.apply(null,n)(t)}};t.queryConnectFlat=function(e){return function(t){var n=function(n){var r=(0,f.useQueries)(e);return s.default.createElement(t,(0,o.default)({},n,r))};return n.displayName="queryConnectFlat(".concat(t.displayName||t.name,")"),n}}},54277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(67294);t.default=function(){var e=(0,r.useRef)();return(0,r.useEffect)(function(){return e.current=!0,function(){e.current=!1}},[]),e}},29568:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(63038)),i=n(67294),o=r(n(54277));t.default=function(e){var t=(0,o.default)(),n=(0,i.useState)(e),r=(0,a.default)(n,2),s=r[0],c=r[1];return[s,(0,i.useCallback)(function(e){t.current&&c(e)},[])]}},63786:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useAppLinkWithStoreFallback",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"useCapabilities",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"useFetchShortcut",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"useClient",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"useQuery",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"useQueries",{enumerable:!0,get:function(){return u.useQueries}}),Object.defineProperty(t,"useAppsInMaintenance",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"useQueryAll",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"useMutation",{enumerable:!0,get:function(){return f.useMutation}}),Object.defineProperty(t,"useInstanceInfo",{enumerable:!0,get:function(){return p.useInstanceInfo}}),Object.defineProperty(t,"useSettings",{enumerable:!0,get:function(){return h.useSettings}});var i=a(n(25199)),o=a(n(56733)),s=a(n(90797)),c=a(n(26726)),u=r(n(72403)),l=a(n(82475)),d=a(n(71747)),f=n(34607),p=n(22380),h=n(74108)},25199:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(63038)),s=n(67294),c=n(71450),u=n(23963);t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=(0,s.useState)("loading"),l=(0,o.default)(r,2),d=l[0],f=l[1],p=(0,s.useState)(!0),h=(0,o.default)(p,2),v=h[0],m=h[1],y=(0,s.useState)(null),g=(0,o.default)(y,2),b=g[0],w=g[1];return(0,s.useEffect)(function(){var r;(r=(0,i.default)(a.default.mark(function r(){var i,o,s;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.query((0,c.Q)("io.cozy.apps"));case 3:i=r.sent,o={slug:e},m(!!(s=(0,u.isInstalled)(i.data,o))),s?w((0,u.getUrl)(s)+n):w((0,u.getStoreURL)(i.data,o)),f("loaded"),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),f("errored");case 14:case"end":return r.stop()}},r,null,[[0,11]])})),function(){return r.apply(this,arguments)})()},[t,e,n]),{fetchStatus:d,isInstalled:v,url:b}}},82475:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(72403)),i=n(71450),o=r(n(18621));t.default=function(){return(0,a.default)((0,i.Q)("io.cozy.apps_registry").getById("maintenance"),{as:"io.cozy.apps_registry/maintenance",fetchPolicy:o.default.fetchPolicies.olderThan(6e5),singleDocData:!1}).data||[]}},56733:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(63038)),s=n(67294),c=r(n(27361)),u=n(71450);t.default=function(e){var t=(0,s.useState)(),n=(0,o.default)(t,2),r=n[0],l=n[1],d=(0,s.useState)("idle"),f=(0,o.default)(d,2),p=f[0],h=f[1];return(0,s.useEffect)(function(){var t,n=(t=(0,i.default)(a.default.mark(function t(){var n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h("loading"),t.prev=1,t.next=4,e.query((0,u.Q)("io.cozy.settings").getById("io.cozy.settings.capabilities"));case 4:n=t.sent,l((0,c.default)(n,"data",{})),h("loaded"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),h("failed");case 12:case"end":return t.stop()}},t,null,[[1,9]])})),function(){return t.apply(this,arguments)});e.capabilities?(l(e.capabilities),h("loaded")):n()},[e]),{capabilities:r,fetchStatus:p}}},26726:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(67294),i=r(n(54028));r(n(18621));t.default=function(){return(0,a.useContext)(i.default).client}},87197:function(e,t,n){"use strict";var r=n(95318);t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(63038)),s=n(67294),c=r(n(26726));t.default=function(e,t,n,r,u){var l=(0,c.default)(),d=(0,s.useState)("pending"),f=(0,o.default)(d,2),p=f[0],h=f[1],v=(0,s.useState)(null),m=(0,o.default)(v,2),y=m[0],g=m[1],b=(0,s.useState)(null),w=(0,o.default)(b,2),k=w[0],x=w[1];return(0,s.useEffect)(function(){var o;(o=(0,i.default)(a.default.mark(function i(){return a.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return h("loading"),a.prev=1,a.next=4,l.stackClient.fetchJSON(e,t,n,r);case 4:x(a.sent),g(null),h("loaded"),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),g(a.t0),h("error");case 14:case"end":return a.stop()}},i,null,[[1,10]])})),function(){return o.apply(this,arguments)})()},[l.stackClient,e,t,n,r,u]),{fetchStatus:p,error:y,data:k}}},90797:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(63038)),s=n(67294),c=n(71450),u=r(n(18621));t.default=function(e,t){var n=(0,s.useState)(null),r=(0,o.default)(n,2),l=r[0],d=r[1],f=(0,s.useState)(null),p=(0,o.default)(f,2),h=p[0],v=p[1],m=(0,s.useState)("idle"),y=(0,o.default)(m,2),g=y[0],b=y[1];return(0,s.useEffect)(function(){var n;(n=(0,i.default)(a.default.mark(function n(){var r,i,o,s,l,f;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return b("loading"),n.prev=1,n.next=4,e.fetchQueryAndGetFromState({definition:(0,c.Q)("io.cozy.files.shortcuts").getById(t),options:{as:"io.cozy.files.shortcuts/".concat(t),fetchPolicy:u.default.fetchPolicies.olderThan(6e5),singleDocData:!0}});case 4:if(!(l=null==(s=n.sent)?void 0:null===(r=s.data)||void 0===r?void 0:null===(i=r.metadata)||void 0===i?void 0:null===(o=i.target)||void 0===o?void 0:o.app)){n.next=13;break}return n.next=9,e.getStackClient().getIconURL({type:"app",slug:l,priority:"stack"});case 9:v(n.sent),n.next=16;break;case 13:f=new URL(s.data.url),v("".concat(e.getStackClient().uri,"/bitwarden/icons/").concat(f.host,"/icon.png"));case 16:d({data:s.data}),b("loaded"),n.next=23;break;case 20:n.prev=20,n.t0=n.catch(1),b("failed");case 23:case"end":return n.stop()}},n,null,[[1,20]])})),function(){return n.apply(this,arguments)})()},[e,t]),{shortcutInfos:l,shortcutImg:h,fetchStatus:g}}},22380:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useInstanceInfo=void 0;var a=r(n(72403)),i=r(n(18621)),o=n(71450),s=n(88930);t.useInstanceInfo=function(){var e=c("io.cozy.settings.instance"),t=(0,a.default)(e.definition,e.options),n=c("io.cozy.settings.context"),r=(0,a.default)(n.definition,n.options),i=c("io.cozy.settings.disk-usage"),o=(0,a.default)(i.definition,i.options);return{isLoaded:null!==(0,s.hasQueryBeenLoaded)(t)&&null!==(0,s.hasQueryBeenLoaded)(r)&&null!==(0,s.hasQueryBeenLoaded)(o),instance:{data:t.data},context:{data:r.data},diskUsage:{data:o.data}}};var c=function(e){return{definition:(0,o.Q)("io.cozy.settings").getById(e),options:{as:"io.cozy.settings/".concat(e),fetchPolicy:i.default.fetchPolicies.olderThan(54e4),singleDocData:!0}}}},34607:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useMutation=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(63038)),s=n(67294),c=r(n(45697)),u=r(n(26726)),l=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onSuccess,r=void 0===n?void 0:n,c=t.onError,l=void 0===c?void 0:c,d=(0,u.default)(),f=(0,s.useState)("pending"),p=(0,o.default)(f,2),h=p[0],v=p[1],m=(0,s.useState)(),y=(0,o.default)(m,2),g=y[0],b=y[1],w=(0,s.useState)(),k=(0,o.default)(w,2),x=k[0],O=k[1];return{mutate:(0,s.useCallback)((e=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b(void 0),v("loading"),e.prev=2,e.next=5,d.save(t);case 5:if(O((n=e.sent).data),"function"!=typeof r){e.next=10;break}return e.next=10,r(n.data);case 10:v("loaded"),e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(2),v("failed"),b(e.t0),"function"!=typeof l){e.next=20;break}return e.next=20,l(e.t0);case 20:case"end":return e.stop()}},e,null,[[2,13]])})),function(t){return e.apply(this,arguments)}),[d,l,r]),mutationStatus:h,error:g,data:x}};t.useMutation=l,l.propTypes={onSuccess:c.default.func,onError:c.default.func}},72403:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useQueries=void 0;var a=r(n(63038)),i=r(n(59713)),o=n(67294),s=n(67577),c=r(n(27361)),u=r(n(26726)),l=r(n(22853)),d=n(54028);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(71450);var h=(0,s.createSelectorHook)(d.clientContext),v=function(e,t){if(!h)throw Error("You must use react-redux > 7.1.0 to use useQuery (uses useSelector) under the hood");if(!e)throw l.default.warn("Bad query",e),Error("Bad query");var n,r=t.as,a=t.enabled,i=void 0===a||a;var s=i?"function"==typeof(n=e)?n():n:null;if(!r)throw Error("You must specify options.as when using useQuery");var d=(0,u.default)(),f=h(function(){return void 0===t.singleDocData&&null!=s&&s.id&&l.default.warn("useQuery options.singleDocData will pass to true in a next version of cozy-client, please add it now to prevent any problem in the future."),d.getQueryFromState(r,{hydrated:(0,c.default)(t,"hydrated",!0),singleDocData:(0,c.default)(t,"singleDocData",!1)})});(0,o.useEffect)(function(){if(!1!==i)d.query(s,t)},[r,i]);var v=(0,o.useCallback)(function(){var e,t=d.getQueryFromState(r);return d.query((e=t).bookmark?e.definition.offsetBookmark(e.bookmark):e.definition.offset(e.data.length),{as:r})},[r,d]),m=(0,o.useCallback)(function(){return d.query(s,t)},[d,s,t]);return p(p({},f),{},{fetchMore:v,fetch:m})};t.useQueries=function(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var i=(0,a.default)(r[n],2),o=i[0],s=i[1];t[o]=v(s.query,s)}return t};t.default=v},71747:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(63038)),s=n(67294);n(71450);var c=r(n(72403)),u=r(n(29568));t.default=function(e,t){var n=(0,u.default)(!1),r=(0,o.default)(n,2),l=r[0],d=r[1],f=(0,c.default)(e,t);return(0,s.useEffect)(function(){var e;(e=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("loaded"===f.fetchStatus&&f.hasMore&&!l)){e.next=5;break}return d(!0),e.next=4,f.fetchMore();case 4:d(!1);case 5:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[f.hasMore,f.fetchStatus,l]),f}},74108:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useSettings=void 0;var a=r(n(6479)),i=n(67294),o=n(72004),s=n(34607),c=r(n(72403)),u=n(88930),l=n(56200);t.useSettings=function(e,t){var n=(0,o.getQuery)(e),r=(0,c.default)(n.definition,n.options),d=r.data,f=(0,a.default)(r,["data"]),p=(0,s.useMutation)(),h=p.mutate,v=(0,a.default)(p,["mutate"]),m=(0,i.useCallback)(function(t){var n=(0,o.normalizeSettings)(d);return h((0,o.editSettings)(e,n,t))},[h,d,e]),y=(0,o.normalizeSettings)(d),g=(0,u.hasQueryBeenLoaded)(f)?(0,l.extractKeys)(y,t):void 0;return{query:f,values:g,save:m,mutation:v}}},16396:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0});var i={CozyLink:!0,StackLink:!0,WebFlagshipLink:!0,compose:!0,QueryDefinition:!0,Q:!0,Mutations:!0,MutationTypes:!0,getDoctypeFromOperation:!0,Association:!0,HasMany:!0,HasOne:!0,HasOneInPlace:!0,HasManyInPlace:!0,HasManyTriggers:!0,isReferencedBy:!0,isReferencedById:!0,getReferencedBy:!0,getReferencedById:!0,deconstructCozyWebLinkWithSlug:!0,deconstructRedirectLink:!0,dehydrate:!0,generateWebLink:!0,ensureFirstSlash:!0,rootCozyUrl:!0,InvalidRedirectLinkError:!0,InvalidCozyUrlError:!0,InvalidProtocolError:!0,BlockedCozyError:!0,cancelable:!0,isQueryLoading:!0,hasQueryBeenLoaded:!0,isQueriesLoading:!0,hasQueriesBeenLoaded:!0,getQueryFromState:!0,dispatchCreate:!0,dispatchUpdate:!0,dispatchDelete:!0,Registry:!0,RealTimeQueries:!0,manifest:!0,CozyProvider:!0,withMutation:!0,withMutations:!0,Query:!0,queryConnect:!0,queryConnectFlat:!0,withClient:!0,models:!0,fetchPolicies:!0,BulkEditError:!0,webPerformanceApi:!0,defaultPerformanceApi:!0};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"CozyLink",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"StackLink",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"WebFlagshipLink",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"compose",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"QueryDefinition",{enumerable:!0,get:function(){return d.QueryDefinition}}),Object.defineProperty(t,"Q",{enumerable:!0,get:function(){return d.Q}}),Object.defineProperty(t,"Mutations",{enumerable:!0,get:function(){return d.Mutations}}),Object.defineProperty(t,"MutationTypes",{enumerable:!0,get:function(){return d.MutationTypes}}),Object.defineProperty(t,"getDoctypeFromOperation",{enumerable:!0,get:function(){return d.getDoctypeFromOperation}}),Object.defineProperty(t,"Association",{enumerable:!0,get:function(){return f.Association}}),Object.defineProperty(t,"HasMany",{enumerable:!0,get:function(){return f.HasMany}}),Object.defineProperty(t,"HasOne",{enumerable:!0,get:function(){return f.HasOne}}),Object.defineProperty(t,"HasOneInPlace",{enumerable:!0,get:function(){return f.HasOneInPlace}}),Object.defineProperty(t,"HasManyInPlace",{enumerable:!0,get:function(){return f.HasManyInPlace}}),Object.defineProperty(t,"HasManyTriggers",{enumerable:!0,get:function(){return f.HasManyTriggers}}),Object.defineProperty(t,"isReferencedBy",{enumerable:!0,get:function(){return p.isReferencedBy}}),Object.defineProperty(t,"isReferencedById",{enumerable:!0,get:function(){return p.isReferencedById}}),Object.defineProperty(t,"getReferencedBy",{enumerable:!0,get:function(){return p.getReferencedBy}}),Object.defineProperty(t,"getReferencedById",{enumerable:!0,get:function(){return p.getReferencedById}}),Object.defineProperty(t,"deconstructCozyWebLinkWithSlug",{enumerable:!0,get:function(){return h.deconstructCozyWebLinkWithSlug}}),Object.defineProperty(t,"deconstructRedirectLink",{enumerable:!0,get:function(){return h.deconstructRedirectLink}}),Object.defineProperty(t,"dehydrate",{enumerable:!0,get:function(){return h.dehydrate}}),Object.defineProperty(t,"generateWebLink",{enumerable:!0,get:function(){return h.generateWebLink}}),Object.defineProperty(t,"ensureFirstSlash",{enumerable:!0,get:function(){return h.ensureFirstSlash}}),Object.defineProperty(t,"rootCozyUrl",{enumerable:!0,get:function(){return h.rootCozyUrl}}),Object.defineProperty(t,"InvalidRedirectLinkError",{enumerable:!0,get:function(){return h.InvalidRedirectLinkError}}),Object.defineProperty(t,"InvalidCozyUrlError",{enumerable:!0,get:function(){return h.InvalidCozyUrlError}}),Object.defineProperty(t,"InvalidProtocolError",{enumerable:!0,get:function(){return h.InvalidProtocolError}}),Object.defineProperty(t,"BlockedCozyError",{enumerable:!0,get:function(){return h.BlockedCozyError}}),Object.defineProperty(t,"cancelable",{enumerable:!0,get:function(){return v.cancelable}}),Object.defineProperty(t,"isQueryLoading",{enumerable:!0,get:function(){return v.isQueryLoading}}),Object.defineProperty(t,"hasQueryBeenLoaded",{enumerable:!0,get:function(){return v.hasQueryBeenLoaded}}),Object.defineProperty(t,"isQueriesLoading",{enumerable:!0,get:function(){return v.isQueriesLoading}}),Object.defineProperty(t,"hasQueriesBeenLoaded",{enumerable:!0,get:function(){return v.hasQueriesBeenLoaded}}),Object.defineProperty(t,"getQueryFromState",{enumerable:!0,get:function(){return m.getQueryFromState}}),Object.defineProperty(t,"dispatchCreate",{enumerable:!0,get:function(){return m.dispatchCreate}}),Object.defineProperty(t,"dispatchUpdate",{enumerable:!0,get:function(){return m.dispatchUpdate}}),Object.defineProperty(t,"dispatchDelete",{enumerable:!0,get:function(){return m.dispatchDelete}}),Object.defineProperty(t,"Registry",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"RealTimeQueries",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"CozyProvider",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"withMutation",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"withMutations",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"Query",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"queryConnect",{enumerable:!0,get:function(){return C.queryConnect}}),Object.defineProperty(t,"queryConnectFlat",{enumerable:!0,get:function(){return C.queryConnectFlat}}),Object.defineProperty(t,"withClient",{enumerable:!0,get:function(){return C.withClient}}),Object.defineProperty(t,"fetchPolicies",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"BulkEditError",{enumerable:!0,get:function(){return A.BulkEditError}}),Object.defineProperty(t,"webPerformanceApi",{enumerable:!0,get:function(){return R.webPerformanceApi}}),Object.defineProperty(t,"defaultPerformanceApi",{enumerable:!0,get:function(){return D.defaultPerformanceApi}}),t.models=t.manifest=void 0;var o=a(n(18621)),s=a(n(37130)),c=a(n(97619)),u=a(n(62946)),l=a(n(59242)),d=n(71450),f=n(25367),p=n(11282),h=n(72004),v=n(88930),m=n(65972),y=a(n(10513)),g=a(n(1153)),b=r(n(86092));t.manifest=b;var w=a(n(63384)),k=a(n(43592)),x=a(n(18428)),O=a(n(18597)),C=n(378),S=r(n(4034));t.models=S;var E=a(n(39268)),P=n(24424);Object.keys(P).forEach(function(e){if(!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e)))(!(e in t)||t[e]!==P[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}})});var _=n(63786);Object.keys(_).forEach(function(e){if(!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e)))(!(e in t)||t[e]!==_[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}})});var A=n(29822),R=n(86465),D=n(12196)},22853:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(60732)),i=(0,a.default)("cozy-client");a.default.suggest.deny("cozy-client","info");t.default=i},24424:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createFakeClient=t.createMockClient=void 0;var a=r(n(63038)),i=r(n(87757)),o=r(n(48926)),s=r(n(59713)),c=r(n(6479)),u=r(n(82492)),l=r(n(18621)),d=n(65972),f=n(80419),p=n(71450);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var v=function(e,t,n){var r=n.definition,a=n.doctype,i=n.data,o=n.queryError,u=(0,c.default)(n,["definition","doctype","data","queryError"]);e.store.dispatch((0,d.initQuery)(t,r||(0,p.Q)(a))),o?e.store.dispatch((0,d.receiveQueryError)(t,o)):e.store.dispatch((0,d.receiveQueryResult)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({data:i?i.map(function(e){return(0,f.normalizeDoc)(e,a)}):i},u)))},m=function(e){var t;return t=(0,o.default)(i.default.mark(function t(n){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",{data:null});case 2:if(!e[n.doctype]){t.next=6;break}return t.abrupt("return",{data:e[n.doctype]});case 6:return t.abrupt("return",{data:[]});case 7:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}};t.createMockClient=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queries,n=e.remote,r=e.clientOptions,a=e.clientFunctions,i=jest.fn().mockImplementation(m(n));return y({queries:t,remote:n,clientOptions:r,clientFunctions:(0,u.default)({query:i,save:jest.fn(),saveAll:jest.fn(),stackClient:{fetchJSON:jest.fn()}},a)})};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queries,n=e.remote,r=e.clientOptions,i=e.clientFunctions,o=new l.default(r||{});o.ensureStore();for(var s=0,c=Object.entries(t||{});s<c.length;s++){var d=(0,a.default)(c[s],2);v(o,d[0],d[1])}return o.query=m(n),(0,u.default)(o,i),o};t.createFakeClient=y},94564:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isAccountWithTrigger=t.buildAccount=t.getAccountName=t.getAccountLogin=t.setContractSyncStatusInAccount=t.getContractSyncStatusFromAccount=t.muteError=t.getMutedErrors=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(59713)),c=a(n(82492)),u=n(71450),l=n(13965),d=n(86092);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(e){return(null==e?void 0:e.mutedErrors)||[]};t.getMutedErrors=v;t.muteError=function(e,t){var n=v(e);return n.push({type:t,mutedAt:new Date().toISOString()}),h(h({},e),{},{mutedErrors:n})};t.getContractSyncStatusFromAccount=function(e,t){var n,r,a=(0,l.getHasManyItem)(e,"contracts",t);if(!a)throw Error("Cannot find contrat ".concat(t," in account"));return null===(n=null==a?void 0:null===(r=a.metadata)||void 0===r?void 0:r.imported)||void 0===n||n};t.setContractSyncStatusInAccount=function(e,t,n){return(0,l.updateHasManyItem)(e,"contracts",t,function(e){if(void 0===e)throw Error("Cannot find contrat ".concat(t," in account"));return(0,c.default)({},e,{metadata:{imported:n}})})};var m=function(e){if(e.identifier)return e.auth[e.identifier];if(e&&e.auth){var t,n=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}}}(d.legacyLoginFields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.auth[r])return e.auth[r]}}catch(e){n.e(e)}finally{n.f()}}return null};t.getAccountLogin=m;t.getAccountName=function(e){return e?e.auth&&(e.auth.accountName||m(e))||e._id:null};t.buildAccount=function(e,t){return{auth:t,account_type:e.slug,identifier:(0,d.getIdentifier)(e.fields),state:null}};var y=(r=(0,o.default)(i.default.mark(function e(t,n){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,u.Q)("io.cozy.triggers").where({"message.account":n._id}).indexFields(["message.account"]).limitBy(1));case 2:return r=e.sent,e.abrupt("return",r.data.length>0);case 4:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.isAccountWithTrigger=y},23963:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getAppDisplayName=t.getUrl=t.isInstalled=t.getStoreInstallationURL=t.getStoreURL=void 0;var a=r(n(27361)),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.slug)throw Error("Expected app / konnector with the defined slug");var n=o(e,{slug:"store"});if(!n)return null;var r=n.links&&n.links.related;return r?"".concat(r,"#/discover/").concat(t.slug):null};t.getStoreURL=i;t.getStoreInstallationURL=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i(e,t);return n?"".concat(n,"/install"):null};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.find(function(e){return e.slug===t.slug})};t.isInstalled=o;t.getUrl=function(e){return e.links&&e.links.related};t.getAppDisplayName=function(e,t){var n=(0,a.default)(e,"name_prefix"),r=(0,a.default)(e,"name"),i=(0,a.default)(e,["locales",t,"name"],r),o=(0,a.default)(e,["locales",t,"name_prefix"],n);return o&&"cozy"!==o.toLowerCase()?"".concat(o," ").concat(i):i}},88842:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasExtensionInstalledAttribute=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(71450);var c=(r=(0,o.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchQueryAndGetFromState({definition:(0,s.Q)("io.cozy.settings").getById("io.cozy.settings.bitwarden"),options:{as:"io.cozy.settings/io.cozy.settings.bitwarden",singleDocData:!0}});case 3:return n=e.sent.data.extension_installed,e.abrupt("return",!!n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return r.apply(this,arguments)});t.hasExtensionInstalledAttribute=c},47978:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMagicLink=t.isOIDC=void 0;t.isOIDC=function(e){var t;return null!==(t=e.capabilities.can_auth_with_oidc)&&void 0!==t&&t};t.isMagicLink=function(e){var t;return null!==(t=e.capabilities.can_auth_with_magic_links)&&void 0!==t&&t}},40996:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isContact=t.getIndexByFamilyNameGivenNameEmailCozyUrl=t.getDefaultSortIndexValue=t.makeDefaultSortIndexValue=t.getDisplayName=t.makeDisplayName=t.getFullname=t.makeFullname=t.getPrimaryAddress=t.getPrimaryPhone=t.getPrimaryCozyDomain=t.getPrimaryCozy=t.getPrimaryEmail=t.getInitials=t.getPrimaryOrFirst=t.CONTACTS_DOCTYPE=void 0;var a=r(n(27361)),i=r(n(41609)),o=r(n(22853)),s="io.cozy.contacts";t.CONTACTS_DOCTYPE=s;var c=function(e){return function(t){return t&&t[e]&&0!==t[e].length&&t[e][0]?t[e].find(function(e){return e.primary})||t[e][0]:""}};t.getPrimaryOrFirst=c;t.getInitials=function(e){if(null!=e&&null!==(t=e.name)&&void 0!==t&&t.givenName||null!=e&&null!==(n=e.name)&&void 0!==n&&n.familyName)return["givenName","familyName"].map(function(t){return(0,a.default)(e,["name",t,0],"")}).join("").toUpperCase();var t,n,r=u(e);if(r)return r[0].toUpperCase();var i=d(e);return i?i[0].toUpperCase():""};var u=function(e){return Array.isArray(e.email)?c("email")(e).address||"":e.email};t.getPrimaryEmail=u;var l=function(e){return Array.isArray(e.cozy)?c("cozy")(e).url||"":e.url};t.getPrimaryCozy=l;var d=function(e){try{return new URL(l(e)).hostname.replace(/^(www.)/g,"")}catch(t){return l(e)}};t.getPrimaryCozyDomain=d;t.getPrimaryPhone=function(e){return c("phone")(e).number||""};t.getPrimaryAddress=function(e){return c("address")(e).formattedAddress||""};var f=["namePrefix","givenName","additionalName","familyName","nameSuffix"],p=function(e,t){var n=(null==t?void 0:t.attributesFullname)||f;return e.name?n.map(function(t){return e.name[t]}).filter(function(e){return void 0!==e}).join(" ").trim():""};t.makeFullname=p;t.getFullname=function(e){return(0,a.default)(e,"fullname")?e.fullname:p(e)};var h=function(e,t){var n=p(e,t),r=u(e),a=d(e);return n&&n.length>0?n:r&&r.length>0?r:a&&a.length>0?a:""};t.makeDisplayName=h;t.getDisplayName=function(e){return(0,a.default)(e,"displayName")?e.displayName:h(e)};var v=function(e){var t=[(0,a.default)(e,"name.familyName",""),(0,a.default)(e,"name.givenName",""),u(e),d(e)].join("").trim().toLowerCase();return 0===t.length?null:t};t.makeDefaultSortIndexValue=v;var m=function(e){var t=(0,a.default)(e,"indexes.byFamilyNameGivenNameEmailCozyUrl",null);return null!==t?(0,i.default)(t)?null:t:v(e)};t.getDefaultSortIndexValue=m;t.getIndexByFamilyNameGivenNameEmailCozyUrl=function(e){return o.default.warn("Deprecation: `getIndexByFamilyNameGivenNameEmailCozyUrl` is deprecated, please use `getDefaultSortIndexValue` instead"),m(e)};t.isContact=function(e){return e._type===s}},65314:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getEmojiByCountry=t.getAllNationalities=t.getNationalityByCodeISO=t.getAllCountryNames=t.getCountryNameByCodeISO=t.getAllCountries=t.checkCountryCode=t.isCountryCodeAlpha2=t.isCountryCodeAlpha3=t.isValidCountryCodeTranslation=t.COUNTRIES_ISO=void 0;var a=r(n(319)),i=n(61774),o=r(n(22853)),s=[{code2:"AF",code3:"AFG",number:"004"},{code2:"AL",code3:"ALB",number:"008"},{code2:"DZ",code3:"DZA",number:"012"},{code2:"AD",code3:"AND",number:"020"},{code2:"AO",code3:"AGO",number:"024"},{code2:"AG",code3:"ATG",number:"028"},{code2:"AR",code3:"ARG",number:"032"},{code2:"AM",code3:"ARM",number:"051"},{code2:"AU",code3:"AUS",number:"036"},{code2:"AT",code3:"AUT",number:"040"},{code2:"AZ",code3:"AZE",number:"031"},{code2:"BS",code3:"BHS",number:"044"},{code2:"BH",code3:"BHR",number:"048"},{code2:"BD",code3:"BGD",number:"050"},{code2:"BB",code3:"BRB",number:"052"},{code2:"BY",code3:"BLR",number:"112"},{code2:"BE",code3:"BEL",number:"056"},{code2:"BZ",code3:"BLZ",number:"084"},{code2:"BJ",code3:"BEN",number:"204"},{code2:"BM",code3:"BMU",number:"060"},{code2:"BT",code3:"BTN",number:"064"},{code2:"BO",code3:"BOL",number:"068"},{code2:"BQ",code3:"BES",number:"535"},{code2:"BA",code3:"BIH",number:"070"},{code2:"BW",code3:"BWA",number:"072"},{code2:"BV",code3:"BVT",number:"074"},{code2:"BR",code3:"BRA",number:"076"},{code2:"IO",code3:"IOT",number:"086"},{code2:"BN",code3:"BRN",number:"096"},{code2:"BG",code3:"BGR",number:"100"},{code2:"BF",code3:"BFA",number:"854"},{code2:"BI",code3:"BDI",number:"108"},{code2:"CV",code3:"CPV",number:"132"},{code2:"KH",code3:"KHM",number:"116"},{code2:"CM",code3:"CMR",number:"120"},{code2:"CA",code3:"CAN",number:"124"},{code2:"KY",code3:"CYM",number:"136"},{code2:"CF",code3:"CAF",number:"140"},{code2:"TD",code3:"TCD",number:"148"},{code2:"CL",code3:"CHL",number:"152"},{code2:"CN",code3:"CHN",number:"156"},{code2:"CX",code3:"CXR",number:"162"},{code2:"CC",code3:"CCK",number:"166"},{code2:"CO",code3:"COL",number:"170"},{code2:"KM",code3:"COM",number:"174"},{code2:"CD",code3:"COD",number:"180"},{code2:"CG",code3:"COG",number:"178"},{code2:"CK",code3:"COK",number:"184"},{code2:"CR",code3:"CRI",number:"188"},{code2:"HR",code3:"HRV",number:"191"},{code2:"CU",code3:"CUB",number:"192"},{code2:"CW",code3:"CUW",number:"531"},{code2:"CY",code3:"CYP",number:"196"},{code2:"CZ",code3:"CZE",number:"203"},{code2:"CI",code3:"CIV",number:"384"},{code2:"DK",code3:"DNK",number:"208"},{code2:"DJ",code3:"DJI",number:"262"},{code2:"DM",code3:"DMA",number:"212"},{code2:"DO",code3:"DOM",number:"214"},{code2:"EC",code3:"ECU",number:"218"},{code2:"EG",code3:"EGY",number:"818"},{code2:"SV",code3:"SLV",number:"222"},{code2:"GQ",code3:"GNQ",number:"226"},{code2:"ER",code3:"ERI",number:"232"},{code2:"EE",code3:"EST",number:"233"},{code2:"SZ",code3:"SWZ",number:"748"},{code2:"ET",code3:"ETH",number:"231"},{code2:"FK",code3:"FLK",number:"238"},{code2:"FO",code3:"FRO",number:"234"},{code2:"FJ",code3:"FJI",number:"242"},{code2:"FI",code3:"FIN",number:"246"},{code2:"FR",code3:"FRA",number:"250"},{code2:"GF",code3:"GUF",number:"254"},{code2:"PF",code3:"PYF",number:"258"},{code2:"TF",code3:"ATF",number:"260"},{code2:"GA",code3:"GAB",number:"266"},{code2:"GM",code3:"GMB",number:"270"},{code2:"GE",code3:"GEO",number:"268"},{code2:"DE",code3:"DEU",number:"276"},{code2:"GH",code3:"GHA",number:"288"},{code2:"GI",code3:"GIB",number:"292"},{code2:"GR",code3:"GRC",number:"300"},{code2:"GL",code3:"GRL",number:"304"},{code2:"GD",code3:"GRD",number:"308"},{code2:"GP",code3:"GLP",number:"312"},{code2:"GU",code3:"GUM",number:"316"},{code2:"GT",code3:"GTM",number:"320"},{code2:"GG",code3:"GGY",number:"831"},{code2:"GN",code3:"GIN",number:"324"},{code2:"GW",code3:"GNB",number:"624"},{code2:"GY",code3:"GUY",number:"328"},{code2:"HT",code3:"HTI",number:"332"},{code2:"HM",code3:"HMD",number:"334"},{code2:"VA",code3:"VAT",number:"336"},{code2:"HN",code3:"HND",number:"340"},{code2:"HK",code3:"HKG",number:"344"},{code2:"HU",code3:"HUN",number:"348"},{code2:"IS",code3:"ISL",number:"352"},{code2:"IN",code3:"IND",number:"356"},{code2:"ID",code3:"IDN",number:"360"},{code2:"IR",code3:"IRN",number:"364"},{code2:"IQ",code3:"IRQ",number:"368"},{code2:"IE",code3:"IRL",number:"372"},{code2:"IM",code3:"IMN",number:"833"},{code2:"IL",code3:"ISR",number:"376"},{code2:"IT",code3:"ITA",number:"380"},{code2:"JM",code3:"JAM",number:"388"},{code2:"JP",code3:"JPN",number:"392"},{code2:"JE",code3:"JEY",number:"832"},{code2:"JO",code3:"JOR",number:"400"},{code2:"KZ",code3:"KAZ",number:"398"},{code2:"KE",code3:"KEN",number:"404"},{code2:"KI",code3:"KIR",number:"296"},{code2:"KP",code3:"PRK",number:"408"},{code2:"KR",code3:"KOR",number:"410"},{code2:"KW",code3:"KWT",number:"414"},{code2:"KG",code3:"KGZ",number:"417"},{code2:"LA",code3:"LAO",number:"418"},{code2:"LV",code3:"LVA",number:"428"},{code2:"LB",code3:"LBN",number:"422"},{code2:"LS",code3:"LSO",number:"426"},{code2:"LR",code3:"LBR",number:"430"},{code2:"LY",code3:"LBY",number:"434"},{code2:"LI",code3:"LIE",number:"438"},{code2:"LT",code3:"LTU",number:"440"},{code2:"LU",code3:"LUX",number:"442"},{code2:"MO",code3:"MAC",number:"446"},{code2:"MG",code3:"MDG",number:"450"},{code2:"MW",code3:"MWI",number:"454"},{code2:"MY",code3:"MYS",number:"458"},{code2:"MV",code3:"MDV",number:"462"},{code2:"ML",code3:"MLI",number:"466"},{code2:"MT",code3:"MLT",number:"470"},{code2:"MH",code3:"MHL",number:"584"},{code2:"MQ",code3:"MTQ",number:"474"},{code2:"MR",code3:"MRT",number:"478"},{code2:"MU",code3:"MUS",number:"480"},{code2:"YT",code3:"MYT",number:"175"},{code2:"MX",code3:"MEX",number:"484"},{code2:"FM",code3:"FSM",number:"583"},{code2:"MD",code3:"MDA",number:"498"},{code2:"MC",code3:"MCO",number:"492"},{code2:"MN",code3:"MNG",number:"496"},{code2:"ME",code3:"MNE",number:"499"},{code2:"MS",code3:"MSR",number:"500"},{code2:"MA",code3:"MAR",number:"504"},{code2:"MZ",code3:"MOZ",number:"508"},{code2:"MM",code3:"MMR",number:"104"},{code2:"NA",code3:"NAM",number:"516"},{code2:"NR",code3:"NRU",number:"520"},{code2:"NP",code3:"NPL",number:"524"},{code2:"NL",code3:"NLD",number:"528"},{code2:"NC",code3:"NCL",number:"540"},{code2:"NZ",code3:"NZL",number:"554"},{code2:"NI",code3:"NIC",number:"558"},{code2:"NE",code3:"NER",number:"562"},{code2:"NG",code3:"NGA",number:"566"},{code2:"NU",code3:"NIU",number:"570"},{code2:"NF",code3:"NFK",number:"574"},{code2:"MP",code3:"MNP",number:"580"},{code2:"NO",code3:"NOR",number:"578"},{code2:"OM",code3:"OMN",number:"512"},{code2:"PK",code3:"PAK",number:"586"},{code2:"PW",code3:"PLW",number:"585"},{code2:"PS",code3:"PSE",number:"275"},{code2:"PA",code3:"PAN",number:"591"},{code2:"PG",code3:"PNG",number:"598"},{code2:"PY",code3:"PRY",number:"600"},{code2:"PE",code3:"PER",number:"604"},{code2:"PH",code3:"PHL",number:"608"},{code2:"PN",code3:"PCN",number:"612"},{code2:"PL",code3:"POL",number:"616"},{code2:"PT",code3:"PRT",number:"620"},{code2:"PR",code3:"PRI",number:"630"},{code2:"QA",code3:"QAT",number:"634"},{code2:"MK",code3:"MKD",number:"807"},{code2:"RO",code3:"ROU",number:"642"},{code2:"RU",code3:"RUS",number:"643"},{code2:"RW",code3:"RWA",number:"646"},{code2:"RE",code3:"REU",number:"638"},{code2:"BL",code3:"BLM",number:"652"},{code2:"SH",code3:"SHN",number:"654"},{code2:"KN",code3:"KNA",number:"659"},{code2:"LC",code3:"LCA",number:"662"},{code2:"MF",code3:"MAF",number:"663"},{code2:"PM",code3:"SPM",number:"666"},{code2:"VC",code3:"VCT",number:"670"},{code2:"WS",code3:"WSM",number:"882"},{code2:"SM",code3:"SMR",number:"674"},{code2:"ST",code3:"STP",number:"678"},{code2:"SA",code3:"SAU",number:"682"},{code2:"SN",code3:"SEN",number:"686"},{code2:"RS",code3:"SRB",number:"688"},{code2:"SC",code3:"SYC",number:"690"},{code2:"SL",code3:"SLE",number:"694"},{code2:"SG",code3:"SGP",number:"702"},{code2:"SX",code3:"SXM",number:"534"},{code2:"SK",code3:"SVK",number:"703"},{code2:"SI",code3:"SVN",number:"705"},{code2:"SB",code3:"SLB",number:"090"},{code2:"SO",code3:"SOM",number:"706"},{code2:"ZA",code3:"ZAF",number:"710"},{code2:"GS",code3:"SGS",number:"239"},{code2:"SS",code3:"SSD",number:"728"},{code2:"ES",code3:"ESP",number:"724"},{code2:"LK",code3:"LKA",number:"144"},{code2:"SD",code3:"SDN",number:"729"},{code2:"SR",code3:"SUR",number:"740"},{code2:"SJ",code3:"SJM",number:"744"},{code2:"SE",code3:"SWE",number:"752"},{code2:"CH",code3:"CHE",number:"756"},{code2:"SY",code3:"SYR",number:"760"},{code2:"TW",code3:"TWN",number:"158"},{code2:"TJ",code3:"TJK",number:"762"},{code2:"TZ",code3:"TZA",number:"834"},{code2:"TH",code3:"THA",number:"764"},{code2:"TL",code3:"TLS",number:"626"},{code2:"TG",code3:"TGO",number:"768"},{code2:"TK",code3:"TKL",number:"772"},{code2:"TO",code3:"TON",number:"776"},{code2:"TT",code3:"TTO",number:"780"},{code2:"TN",code3:"TUN",number:"788"},{code2:"TR",code3:"TUR",number:"792"},{code2:"TM",code3:"TKM",number:"795"},{code2:"TC",code3:"TCA",number:"796"},{code2:"TV",code3:"TUV",number:"798"},{code2:"UG",code3:"UGA",number:"800"},{code2:"UA",code3:"UKR",number:"804"},{code2:"AE",code3:"ARE",number:"784"},{code2:"GB",code3:"GBR",number:"826"},{code2:"UM",code3:"UMI",number:"581"},{code2:"US",code3:"USA",number:"840"},{code2:"UY",code3:"URY",number:"858"},{code2:"UZ",code3:"UZB",number:"860"},{code2:"VU",code3:"VUT",number:"548"},{code2:"VE",code3:"VEN",number:"862"},{code2:"VN",code3:"VNM",number:"704"},{code2:"VG",code3:"VGB",number:"092"},{code2:"VI",code3:"VIR",number:"850"},{code2:"WF",code3:"WLF",number:"876"},{code2:"EH",code3:"ESH",number:"732"},{code2:"YE",code3:"YEM",number:"887"},{code2:"ZM",code3:"ZMB",number:"894"},{code2:"ZW",code3:"ZWE",number:"716"},{code2:"AX",code3:"ALA",number:"248"}];t.COUNTRIES_ISO=s;t.isValidCountryCodeTranslation=function(e,t){var n=(0,i.getLocalizer)(e).polyglot;return u(t)&&n.has("nationalities.".concat(t))&&n.has("countries.".concat(t))};var c=function(e){if(!e)return!1;var t=e.toUpperCase();return s.some(function(e){return e.code3===t})};t.isCountryCodeAlpha3=c;var u=function(e){if(!e)return!1;var t=e.toUpperCase();return s.some(function(e){return e.code2===t})};t.isCountryCodeAlpha2=u;t.checkCountryCode=function(e){return u(e)||c(e)};var l=function(e){var t=(0,i.getLocalizer)(e).t;return s.map(function(e){return{code2:e.code2,code3:e.code3,number:e.number,name:t("countries.".concat(e.code2)),nationality:t("nationalities.".concat(e.code2))}})};t.getAllCountries=l;var d=function(e){return function(t){var n,r=null==e?void 0:null===(n=e.toString())||void 0===n?void 0:n.toUpperCase();return/^[A-Z]{2,3}$/.test(r)?t.code2===r||t.code3===r:!!/^\d+$/.test(r)&&t.number===r}};t.getCountryNameByCodeISO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lang:"en"},n=l(t.lang).find(d(e));return n?n.name:(o.default.warn("Country with code ".concat(e," not found")),null)};t.getAllCountryNames=function(e){return l(e).map(function(e){return e.name})};t.getNationalityByCodeISO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lang:"en"},n=l(t.lang).find(d(e));return n?n.nationality:(o.default.warn("Nationality with code ".concat(e," not found")),null)};t.getAllNationalities=function(e){return l(e).map(function(e){return e.nationality})};t.getEmojiByCountry=function(e){if(!e)return null;if(!/^[a-z]{2}$/i.test(e))return o.default.error("Country argument must be an ISO 3166-1 alpha-2 string, but got '".concat(JSON.stringify(e),"' instead.")),null;if(!s.find(function(t){return t.code2===e.toUpperCase()}))return o.default.error("Country with code ".concat(e," not found in the list of countries")),null;var t=(0,a.default)(e.toUpperCase()).map(function(e){return e.codePointAt(0)+127397});return String.fromCodePoint.apply(String,(0,a.default)(t))}},61774:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalizer=void 0;for(var a=r(n(54078)),i=r(n(20455)),o=r(n(40883)),s={en:i.default,fr:o.default},c={},u=0,l=["fr","en"];u<l.length;u++){var d=l[u],f=new a.default;f.extend(s[d]),c[d]=f}t.getLocalizer=function(e){var t=c[e]||c.en;return{t:t.t.bind(t),polyglot:t,lang:e}}},61645:function(e,t,n){"use strict";var r,a,i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAggregatesFromDACC=t.buildAggregateParams=t.sendMeasureToDACC=t.checkMeasureParams=t.isCorrectDateFormat=void 0;var o=i(n(87757)),s=i(n(48926)),c=i(n(33918));i(n(18621));var u=function(e){try{return!!new Date(Date.parse(e)).toISOString().startsWith(e)}catch(e){return!1}};t.isCorrectDateFormat=u;var l=function(e){var t=e.createdBy,n=e.measureName,r=e.startDate,a=e.value,i=e.group1,o=e.group2,s=e.group3;if(!t||"string"!=typeof t)throw Error("Missing or wrong type parameter: createdBy");if(!n||"string"!=typeof n)throw Error("Missing or wrong type parameter: measureName");if(!r)throw Error("Missing parameter: startDate");if(!u(r))throw Error("Date should be in YYYY-MM-DD format");if("number"!=typeof a)throw Error("Missing or wrong type parameter: value");if(i&&("object"!=typeof i||0===Object.keys(i).length)||o&&("object"!=typeof o||0===Object.keys(o).length)||s&&("object"!=typeof s||0===Object.keys(s).length))throw Error("Groups should be key-value objects");if(s&&(!o||!i)||o&&!i)throw Error("Group order must be respected")};t.checkMeasureParams=l;var d=(r=(0,s.default)(o.default.mark(function e(t,n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(r),e.next=4,t.getStackClient().fetchJSON("POST","/remote/".concat(n),{data:JSON.stringify(r),path:"measure"});case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),(0,c.default)("error","Error while sending measure to remote doctype: ".concat(e.t0.message)),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,6]])})),function(e,t,n){return r.apply(this,arguments)});t.sendMeasureToDACC=d;var f=function(e){var t=e.measureName;if(!t||"string"!=typeof t)throw Error("Missing or wrong type parameter: measureName");var n=e.startDate||new Date(0).toISOString(),r=e.endDate||new Date(Date.now()).toISOString();if(!u(n)||!u(r))throw(0,c.default)("error","Date should be in YYYY-MM-DD format but received: startDate: ".concat(n," | endDate: ").concat(r)),Error("Date should be in YYYY-MM-DD format");return{measureName:t,startDate:n,endDate:r}};t.buildAggregateParams=f;var p=(a=(0,s.default)(o.default.mark(function e(t,n,r){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=f(r),e.next=4,t.getStackClient().fetchJSON("POST","/remote/".concat(n),{data:JSON.stringify(a),path:"aggregate"});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),(0,c.default)("error","Error while fetching aggregates to remote doctype: ".concat(e.t0.message)),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return a.apply(this,arguments)});t.fetchAggregatesFromDACC=p},60195:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iconLabelPairs=t.THEME_OTHERS_LABELS=t.THEME_INVOICE_LABELS=t.THEME_FINANCE_LABELS=t.THEME_ACTIVITY_LABELS=t.THEME_TRANSPORT_LABELS=t.THEME_HOME_LABELS=t.THEME_HEALTH_LABELS=t.THEME_WORK_STUDY_LABELS=t.THEME_FAMILY_LABELS=t.THEME_IDENTITY_LABELS=void 0;t.THEME_IDENTITY_LABELS=["identity_photo","national_id_card","passport","residence_permit","electoral_card","family_record_book","birth_certificate","driver_license","citizen_registration_certificate","note_identity_document","other_identity_document"];t.THEME_FAMILY_LABELS=["family_record_book","birth_certificate","wedding","pacs","single_parent_benefit","divorce","large_family_card","caf","payment_proof_family_allowance","note_family_document","other_family_document","person_insurance"];t.THEME_WORK_STUDY_LABELS=["diploma","work_contract","pay_sheet","unemployment_benefit","employment_center_certificate","pension","work_disability_recognition","gradebook","student_card","school_attendance_certificate","school_insurance_certificate","resume","motivation_letter","expense_claim","note_work_document","other_work_document"];t.THEME_HEALTH_LABELS=["health_certificate","health_book","national_health_insurance_card","national_health_insurance_right_certificate","health_insurance_card","prescription","health_invoice","work_disability_recognition","pregnancy_medical_certificate","note_health_document","other_health_document"];t.THEME_HOME_LABELS=["phone_invoice","isp_invoice","telecom_invoice","energy_invoice","water_invoice","other_invoice","work_invoice","house_sale_agreeement","building_permit","technical_diagnostic_record","unfit_for_habitation_declaration","lease","rent_receipt","accommodation_proof","house_insurance","work_quote","condition_report","note_house_document","other_house_document","real_estate_insurance"];t.THEME_TRANSPORT_LABELS=["driver_license","vehicle_registration","car_insurance","transport_card","mechanic_invoice","transport_invoice","note_transport_document","other_transport_document"];t.THEME_ACTIVITY_LABELS=["personal_sporting_licence","fidelity_card","note_activity_document","other_activity_document"];t.THEME_FINANCE_LABELS=["fine","tax_certificate","tax_return","tax_notice","tax_timetable","real_estate_tax","pay_sheet","receipt","single_parent_benefit","other_tax_document","bank_details","bank_statement","loan_agreement","payment_proof_family_allowance","note_finance","expense_claim","other_bank_document","other_revenue"];t.THEME_INVOICE_LABELS=["phone_invoice","isp_invoice","telecom_invoice","energy_invoice","water_invoice","appliance_invoice","web_service_invoice","restaurant_invoice","work_invoice","transport_invoice","health_invoice","note_invoice","expense_claim","energy_contract","grocery_invoice","other_invoice"];t.THEME_OTHERS_LABELS=["other_administrative_document"];t.iconLabelPairs=[{icon:"bank-check",labels:["bank_details"]},{icon:"bank",labels:["other_administrative_document","other_tax_document","real_estate_tax","tax_certificate","tax_notice","tax_return","tax_timetable"]},{icon:"benefit",labels:["loan_agreement","other_revenue","pay_sheet","payment_proof_family_allowance","pension"]},{icon:"bill",labels:["other_invoice"]},{icon:"car",labels:["car_insurance","driver_license","other_transport_document","transport_card","transport_invoice","vehicle_registration"]},{icon:"child",labels:["birth_certificate"]},{icon:"email",labels:["receipt"]},{icon:"euro",labels:["other_bank_document"]},{icon:"exchange",labels:["bank_statement"]},{icon:"file-type-note",labels:["note_activity_document","note_family_document","note_finance","note_health_document","note_house_document","note_identity_document","note_invoice","note_transport_document","note_work_document"]},{icon:"fitness",labels:["other_activity_document","personal_sporting_licence"]},{icon:"globe",labels:["residence_permit"]},{icon:"gouv",labels:["electoral_card"]},{icon:"heart",labels:["health_book","health_certificate","health_insurance_card","health_invoice","national_health_insurance_card","national_health_insurance_right_certificate","other_health_document","person_insurance","pregnancy_medical_certificate","prescription"]},{icon:"home",labels:["accommodation_proof","building_permit","condition_report","house_insurance","house_sale_agreeement","lease","mechanic_invoice","other_house_document","real_estate_insurance","rent_receipt","technical_diagnostic_record","unfit_for_habitation_declaration","work_invoice","work_quote"]},{icon:"image",labels:["identity_photo"]},{icon:"justice",labels:["fine"]},{icon:"laudry",labels:["appliance_invoice"]},{icon:"lightning",labels:["energy_contract","energy_invoice"]},{icon:"people",labels:["national_id_card","other_identity_document","resume","work_disability_recognition"]},{icon:"plane",labels:["passport"]},{icon:"remboursement",labels:["expense_claim"]},{icon:"restaurant",labels:["restaurant_invoice"]},{icon:"school",labels:["diploma","gradebook"]},{icon:"shop",labels:["fidelity_card","grocery_invoice"]},{icon:"team",labels:["caf","citizen_registration_certificate","divorce","family_record_book","large_family_card","other_family_document","pacs","single_parent_benefit","wedding"]},{icon:"telecom",labels:["isp_invoice","telecom_invoice","web_service_invoice"]},{icon:"telephone",labels:["phone_invoice"]},{icon:"water",labels:["water_invoice"]},{icon:"work",labels:["employment_center_certificate","motivation_letter","other_work_document","school_attendance_certificate","school_insurance_certificate","student_card","unemployment_benefit","work_contract"]}]},48536:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.themesList=void 0;var r=n(60195),a=n(34259),i=function(e){return e.map(function(e){try{return a.Qualification.getByLabel(e)}catch(e){return console.log("error",e),null}}).filter(function(e){return e})},o=[{id:"theme1",label:"identity",icon:"people",items:i(r.THEME_IDENTITY_LABELS),defaultItems:["birth_certificate"]},{id:"theme2",label:"family",icon:"team",items:i(r.THEME_FAMILY_LABELS),defaultItems:["family_record_book"]},{id:"theme3",label:"work_study",icon:"work",items:i(r.THEME_WORK_STUDY_LABELS)},{id:"theme4",label:"health",icon:"heart",items:i(r.THEME_HEALTH_LABELS)},{id:"theme5",label:"home",icon:"home",items:i(r.THEME_HOME_LABELS)},{id:"theme6",label:"transport",icon:"car",items:i(r.THEME_TRANSPORT_LABELS),defaultItems:["driver_license"]},{id:"theme7",label:"activity",icon:"chess",items:i(r.THEME_ACTIVITY_LABELS)},{id:"theme8",label:"finance",icon:"bank",items:i(r.THEME_FINANCE_LABELS)},{id:"theme9",label:"invoice",icon:"bill",items:i(r.THEME_INVOICE_LABELS)},{id:"theme10",label:"others",icon:"dots",items:i(r.THEME_OTHERS_LABELS)}];t.themesList=o},29444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQualificationNote=t.getThemeByItem=void 0;var r=n(48536);t.getThemeByItem=function(e){var t,n=(t=e,r.themesList.find(function(e){return e.defaultItems&&e.defaultItems.includes(t.label)}));return n?n:r.themesList.find(function(t){return t.items.some(function(t){return t.label===e.label})})};t.isQualificationNote=function(e){return e.label.toLowerCase().startsWith("note_")}},41818:function(e,t,n){"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Qualification",{enumerable:!0,get:function(){return a.Qualification}}),Object.defineProperty(t,"setQualification",{enumerable:!0,get:function(){return a.setQualification}}),Object.defineProperty(t,"getQualification",{enumerable:!0,get:function(){return a.getQualification}}),t.helpers=t.themes=t.locales=void 0;var a=n(34259),i=r(n(92984));t.locales=i;var o=r(n(48536));t.themes=o;var s=r(n(29444));t.helpers=s},92984:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalizer=t.getBoundT=void 0;var a=r(n(59713)),i=r(n(54078)),o=r(n(28330)),s=r(n(6765)),c=n(65314);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}for(var d={en:o.default,fr:s.default},f={},p=0,h=["fr","en"];p<h.length;p++){var v=h[p],m=new i.default;m.extend(d[v]),f[v]=m}t.getBoundT=function(e){var t=y(e);return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l(l({},n),{},{smart_count:(null==n?void 0:n.smart_count)||1}),a=null==n?void 0:n.country,i="foreign"!==a?(0,c.getEmojiByCountry)(a):null,o="foreign"===a?t("country.foreign"):null;return i||o?"".concat(t(e,r)," ").concat(i||o):t(e,r)}};var y=function(e){var t=f[e]||f.en;return t.t.bind(t)};t.getLocalizer=y},34259:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasSupportedQualification=t.isSupportedQualification=t.getIconByLabel=t.getQualification=t.setQualification=t.Qualification=void 0;var i=a(n(59713)),o=a(n(34575)),s=a(n(93913)),c=a(n(36968)),u=a(n(91966)),l=r(n(37504)),d=a(n(22853)),f=n(60195);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,e);var r=l.qualifications.find(function(e){return e.label===t});if(r){this.icon=n.icon||y(t),this.label=r.label;var a=n.purpose||r.purpose;a&&(this.purpose=a);var i=n.sourceCategory||r.sourceCategory;i&&(this.sourceCategory=i);var s=n.sourceSubCategory||r.sourceSubCategory;s&&(this.sourceSubCategory=s);var c=n.subjects||r.subjects;c&&(this.subjects=c)}else throw Error("No qualification found for the label ".concat(t))}return(0,s.default)(e,[{key:"checkAttributes",value:function(e){if(this.purpose!==e.purpose){if(this.purpose)throw Error("The purpose for the label ".concat(this.label," should be ").concat(this.purpose,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");!l.purposeKnownValues.includes(e.purpose)&&d.default.info("This purpose is not listed among the known values: ".concat(e.purpose,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}if(this.sourceCategory!==e.sourceCategory){if(this.sourceCategory)throw Error("The sourceCategory for the label ".concat(this.label," should be ").concat(this.sourceCategory,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");!l.sourceCategoryKnownValues.includes(e.sourceCategory)&&d.default.info("This sourceCategory is not listed among the known values: ".concat(e.sourceCategory,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}if(this.sourceSubCategory!==e.sourceSubCategory){if(this.sourceSubCategory)throw Error("The sourceSubCategory for the label ".concat(this.label," should be ").concat(this.sourceSubCategory,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");!l.sourceSubCategoryKnownValues.includes(e.sourceSubCategory)&&d.default.info("This sourceSubCategory is not listed among the known values: ".concat(e.sourceSubCategory,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}if((0,u.default)(this.subjects,e.subjects).length>0)throw Error("The subjects for the label ".concat(this.label," should include ").concat(this.subjects,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");var t=(0,u.default)(e.subjects,this.subjects);if(t.length>0){var n=(0,u.default)(t,l.subjectsKnownValues);n.length>0&&d.default.info("These subjects are not listed among the known values: ".concat(n,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}}},{key:"setPurpose",value:function(t){return new e(this.label,v(v({},this.toQualification()),{},{purpose:t}))}},{key:"setSourceCategory",value:function(t){return new e(this.label,v(v({},this.toQualification()),{},{sourceCategory:t}))}},{key:"setSourceSubCategory",value:function(t){return new e(this.label,v(v({},this.toQualification()),{},{sourceSubCategory:t}))}},{key:"setSubjects",value:function(t){return new e(this.label,v(v({},this.toQualification()),{},{subjects:t}))}},{key:"setIcon",value:function(t){return new e(this.label,v(v({},this.toQualification()),{},{icon:t}))}},{key:"toQualification",value:function(){return{icon:this.icon,label:this.label,purpose:this.purpose,sourceCategory:this.sourceCategory,sourceSubCategory:this.sourceSubCategory,subjects:this.subjects}}}]),e}();t.Qualification=m,m.getByLabel=function(e){return new m(e)};t.setQualification=function(e,t){if(t.label){var n=t;return new m(t.label).checkAttributes(t),!t.icon&&(n=new m(t.label,t).setIcon(y(t.label))),(0,c.default)(e,"metadata.qualification",n)}throw Error("You must set a label to qualify")};t.getQualification=function(e){var t,n=null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:t.qualification;return n?new m(n.label,n.qualification).toQualification():null};var y=function(e){var t,n=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}}}(f.iconLabelPairs);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.labels.includes(e))return r.icon}}catch(e){n.e(e)}finally{n.f()}return d.default.info("The ".concat(e," qualification does not seem to have an icon.\n    Please open an issue on https://github.com/cozy/cozy-client/issues")),""};t.getIconByLabel=y;var g=function(e){return l.qualifications.some(function(t){return t.label===e})};t.isSupportedQualification=g;t.hasSupportedQualification=function(e){var t,n;return g(null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:null===(n=t.qualification)||void 0===n?void 0:n.label)}},67348:function(e,t,n){"use strict";var r,a,i,o,s,c,u,l,d,f,p,h=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=function(e){var t=e._id||e.id;return _({_id:t,id:t,_type:e._type||S.DOCTYPE_FILES},e)},t.ensureFilePath=function(e,t){if(e.path)return e;if(!t||!t.path)throw Error("Could not define a file path for ".concat(e._id||e.id));return _({path:t.path+"/"+e.name},e)},t.getParentFolderId=function(e){var t=(0,b.default)(e,"attributes.dir_id");return""===t?null:t},t.downloadFile=t.copy=t.fetchBlobFileById=t.isFromKonnector=t.hasCertifications=t.hasQualifications=t.isPlainText=t.doMobileUpload=t.readMobileFile=t.uploadFileWithConflictStrategy=t.generateFileNameForRevision=t.generateNewFileNameOnConflict=t.overrideFileForPath=t.move=t.getFullpath=t.hasMetadataAttribute=t.fetchFilesByQualificationRules=t.saveFileQualification=t.isSharingShorcutNew=t.isSharingShortcutNew=t.isSharingShorcut=t.isSharingShortcut=t.getSharingShortcutTargetDoctype=t.getSharingShortcutTargetMime=t.getSharingShortcutStatus=t.isShortcut=t.shouldBeOpenedByOnlyOffice=t.isOnlyOfficeFile=t.isEncryptedFileOrFolder=t.isEncryptedFolder=t.getEncryptiondRef=t.isEncrypted=t.isNote=t.isDirectory=t.isFile=t.splitFilename=t.ALBUMS_DOCTYPE=void 0;var v=h(n(87757)),m=h(n(48926)),y=h(n(59713)),g=n(25976),b=h(n(27361)),w=h(n(47037)),k=h(n(18721)),x=h(n(10691)),O=n(34259),C=n(71450),S=n(87941);h(n(18621));var E=h(n(22853));function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,y.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A="file";t.ALBUMS_DOCTYPE="io.cozy.photos.albums";var R=/(.+)(\..*)$/,D=function(e){if(!(0,w.default)(e.name))throw Error("file should have a name property");if("file"===e.type){var t=e.name.match(R);if(t)return{filename:t[1],extension:t[2]}}return{filename:e.name,extension:""}};t.splitFilename=D;var M=function(e){return e&&e.type===A};t.isFile=M;t.isDirectory=function(e){return e&&"directory"===e.type};var T=function(e){return!!(e&&e.name&&e.name.endsWith(".cozy-note"))&&e.type===A&&!!e.metadata&&void 0!==e.metadata.title&&void 0!==e.metadata.version||!1};t.isNote=T;var j=function(e){return!!e.encrypted};t.isEncrypted=j;var N=function(e){return(0,b.default)(e,"referenced_by",[]).find(function(e){return e.type===S.DOCTYPE_FILES_ENCRYPTION})};t.getEncryptiondRef=N;var I=function(e){return!!N(e)};t.isEncryptedFolder=I;t.isEncryptedFileOrFolder=function(e){return I(e)||j(e)};var L=function(e){return M(e)&&!T(e)&&("text"===e.class||"spreadsheet"===e.class||"slide"===e.class)};t.isOnlyOfficeFile=L;t.shouldBeOpenedByOnlyOffice=function(e){return L(e)&&!e.name.endsWith(".txt")&&!e.name.endsWith(".md")};t.isShortcut=function(e){return e&&"shortcut"===e.class};var z=function(e){return(0,b.default)(e,"metadata.sharing.status")};t.getSharingShortcutStatus=z;t.getSharingShortcutTargetMime=function(e){return(0,b.default)(e,"metadata.target.mime")};t.getSharingShortcutTargetDoctype=function(e){return(0,b.default)(e,"metadata.target._type")};var Z=function(e){return!!z(e)};t.isSharingShortcut=Z;t.isSharingShorcut=function(e){return E.default.warn("Deprecation: `isSharingShorcut` is deprecated, please use `isSharingShortcut` instead"),Z(e)};var B=function(e){return"new"===z(e)};t.isSharingShortcutNew=B;t.isSharingShorcutNew=function(e){return E.default.warn("Deprecation: `isSharingShorcutNew` is deprecated, please use `isSharingShortcutNew` instead"),B(e)};var F=(r=(0,m.default)(v.default.mark(function e(t,n,r){var a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,O.setQualification)(n,r),e.abrupt("return",t.collection(S.DOCTYPE_FILES).updateMetadataAttribute(n._id,a.metadata));case 2:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)});t.saveFileQualification=F;var U=(a=(0,m.default)(v.default.mark(function e(t,n){var r,a,i,o;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rules,a=n.count,i=(0,C.Q)(S.DOCTYPE_FILES).where(_({},r)).partialIndex({trashed:!1}).indexFields(["cozyMetadata.updatedAt","metadata.qualification"]).sortBy([{"cozyMetadata.updatedAt":"desc"}]).limitBy(a||1),e.next=4,t.query(i);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.fetchFilesByQualificationRules=U;t.hasMetadataAttribute=function(e){var t=e.file,n=e.attribute;return(0,k.default)(t,"metadata.".concat(n))};var V=(i=(0,m.default)(v.default.mark(function e(t,n,r){var a,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw Error("You must provide a dirId");case 2:return e.next=4,t.query((0,C.Q)(S.DOCTYPE_FILES).getById(n));case 4:return a=e.sent.data,i=(0,x.default)(a.path,"/"),e.abrupt("return","".concat(i,"/").concat(r));case 8:case"end":return e.stop()}},e)})),function(e,t,n){return i.apply(this,arguments)});t.getFullpath=V;var H=(o=(0,m.default)(v.default.mark(function e(t,n,r){var a,i,o,s,c,u=arguments;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(u.length>3&&void 0!==u[3]?u[3]:{force:!1}).force,e.prev=1,"io.cozy.remote.nextcloud.files"!==n._type){e.next=10;break}if("io.cozy.remote.nextcloud.files"!==r._type){e.next=7;break}return e.next=6,t.collection("io.cozy.remote.nextcloud.files").move(n,r);case 6:case 9:case 13:return e.abrupt("return",{moved:void 0,deleted:null});case 7:return e.next=9,t.collection("io.cozy.remote.nextcloud.files").moveToCozy(n,r);case 10:if("io.cozy.remote.nextcloud.files"!==r._type){e.next=14;break}return e.next=13,t.collection("io.cozy.remote.nextcloud.files").moveFromCozy(r,n);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(1),e.t0;case 19:return e.prev=19,e.next=22,t.collection(S.DOCTYPE_FILES).updateFileMetadata(n._id,{dir_id:r._id});case 22:return i=e.sent,e.abrupt("return",{moved:i.data,deleted:null});case 26:if(e.prev=26,e.t1=e.catch(19),!(409===e.t1.status&&a)){e.next=43;break}return e.next=31,V(t,r._id,n.name);case 31:return o=e.sent,e.next=34,t.collection(S.DOCTYPE_FILES).statByPath(o);case 34:return s=e.sent,e.next=37,t.collection(S.DOCTYPE_FILES).destroy(s.data);case 37:return e.next=39,t.collection(S.DOCTYPE_FILES).updateFileMetadata(n._id,{dir_id:r._id});case 39:return c=e.sent,e.abrupt("return",{moved:c.data,deleted:s.data.id});case 43:throw e.t1;case 44:case"end":return e.stop()}},e,null,[[1,16],[19,26]])})),function(e,t,n){return o.apply(this,arguments)});t.move=H;var W=(s=(0,m.default)(v.default.mark(function e(t,n,r,a){var i,o,s,c,u,l,d,f;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return!(i=n).endsWith("/")&&(i+="/"),o=t.collection(S.DOCTYPE_FILES),e.prev=3,e.next=6,o.statByPath(i+r.name);case 6:return c=(s=e.sent.data).id,u=s.dir_id,e.next=10,o.updateFile(r,{dirId:u,fileId:c,metadata:a});case 10:return l=e.sent,e.abrupt("return",l);case 14:if(e.prev=14,e.t0=e.catch(3),!/Not Found/.test(e.t0)){e.next=24;break}return e.next=19,o.ensureDirectoryExists(i);case 19:return d=e.sent,e.next=22,o.createFile(r,{dirId:d,metadata:a});case 22:return f=e.sent,e.abrupt("return",f);case 24:throw e.t0;case 25:case"end":return e.stop()}},e,null,[[3,14]])})),function(e,t,n,r){return s.apply(this,arguments)});t.overrideFileForPath=W;var q=function(e,t){var n=(null==t?void 0:t.delimiter)||"_",r=new RegExp("(".concat(n,")([0-9]+)$")),a=e.match(r);if(!a)return"".concat(e).concat(n,"1");var i=parseInt(a[2]);return i++,e.replace(new RegExp("(".concat(n,")([0-9]+)$")),"".concat(n).concat(i))};t.generateNewFileNameOnConflict=q;t.generateFileNameForRevision=function(e,t,n){var r=D(e),a=r.filename,i=r.extension;return"".concat(a,"_").concat(n(t.updated_at,"DD MMMM - HH[h]mm")).concat(i)};var G=(c=(0,m.default)(v.default.mark(function e(t,n,r){var a,i,o,s,c,u,l,d,f,p,h;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.name,i=r.dirId,o=r.conflictStrategy,s=r.conflictOptions,e.prev=1,e.next=4,V(t,i,a);case 4:return c=e.sent,e.next=7,t.collection(S.DOCTYPE_FILES).statByPath(c);case 7:if(u=e.sent.data.id,"erase"!==o){e.next=16;break}return e.next=12,t.collection(S.DOCTYPE_FILES).updateFile(n,_(_({},r),{},{fileId:u}));case 12:return l=e.sent,e.abrupt("return",l);case 16:return f=(d=D({name:a,type:"file"})).filename,p=d.extension,h=q(f,s)+p,e.abrupt("return",G(t,n,_(_({},r),{},{name:h})));case 19:e.next=26;break;case 21:if(e.prev=21,e.t0=e.catch(1),!/Not Found/.test(e.t0.message)){e.next=25;break}return e.abrupt("return",t.collection(S.DOCTYPE_FILES).createFile(n,r));case 25:throw e.t0;case 26:case"end":return e.stop()}},e,null,[[1,21]])})),function(e,t,n){return c.apply(this,arguments)});t.uploadFileWithConflictStrategy=G;var K=(u=(0,m.default)(v.default.mark(function e(t){var n;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise(function(e,n){var r=function(){var t=(0,m.default)(v.default.mark(function t(r){return v.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r.file(function(){var t=(0,m.default)(v.default.mark(function t(n){var r;return v.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(r=new FileReader).onloadend=(0,m.default)(v.default.mark(function t(){return v.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e(r.result);case 1:case"end":return t.stop()}},t)})),r.readAsArrayBuffer(n);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),function(e){console.error("error getting fileentry file!"+e),n(e)});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),a=function(e){n(e)};window.resolveLocalFileSystemURL(t,r,a)}),e.abrupt("return",n);case 2:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)});t.readMobileFile=K;var Q=(l=(0,m.default)(v.default.mark(function e(t,n,r){var a;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(n);case 2:return a=e.sent,e.abrupt("return",G(t,a,r));case 4:case"end":return e.stop()}},e)})),function(e,t,n){return l.apply(this,arguments)});t.doMobileUpload=Q;t.isPlainText=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?/^text\//.test(e):/\.(txt|md)$/.test(t)};t.hasQualifications=function(e){return!!(0,b.default)(e,"metadata.qualification")};t.hasCertifications=function(e){return(0,b.default)(e,"metadata.carbonCopy",!1)||(0,b.default)(e,"metadata.electronicSafe",!1)};t.isFromKonnector=function(e){return(0,k.default)(e,"cozyMetadata.sourceAccount")};var Y=(d=(0,m.default)(v.default.mark(function e(t,n){var r,a,i;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.collection(S.DOCTYPE_FILES),e.next=3,r.fetchFileContentById(n);case 3:return a=e.sent,e.next=6,a.blob();case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e)})),function(e,t){return d.apply(this,arguments)});t.fetchBlobFileById=Y;var J=(f=(0,m.default)(v.default.mark(function e(t,n,r){var a,i,o,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!("io.cozy.remote.nextcloud.files"===n._type&&"io.cozy.remote.nextcloud.files"===r._type)){e.next=6;break}return e.next=4,t.collection("io.cozy.remote.nextcloud.files").copy(n,r);case 4:return a=e.sent,e.abrupt("return",a);case 6:if(!("io.cozy.remote.nextcloud.files"===n._type&&"io.cozy.files"===r._type)){e.next=11;break}return e.next=9,t.collection("io.cozy.remote.nextcloud.files").moveToCozy(n,r,{copy:!0});case 9:return i=e.sent,e.abrupt("return",i);case 11:if("io.cozy.remote.nextcloud.files"!==r._type){e.next=16;break}return e.next=14,t.collection("io.cozy.remote.nextcloud.files").moveFromCozy(r,n,{copy:!0});case 14:return o=e.sent,e.abrupt("return",o);case 16:return e.next=18,t.collection(S.DOCTYPE_FILES).copy(n._id,void 0,r._id);case 18:return s=e.sent,e.abrupt("return",s);case 22:throw e.prev=22,e.t0=e.catch(0),e.t0;case 25:case"end":return e.stop()}},e,null,[[0,22]])})),function(e,t,n){return f.apply(this,arguments)});t.copy=J;var $=(p=(0,m.default)(v.default.mark(function e(t){var n,r,a,i,o,s;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.file,a=t.url,i=t.webviewIntent,o=n.collection(S.DOCTYPE_FILES),!((0,g.isFlagshipApp)()&&i&&!j(r))){e.next=19;break}return e.next=5,null==i?void 0:i.call("isAvailable","downloadFile");case 5:if(e.t1=s=e.sent,e.t0=null!==e.t1,!e.t0){e.next=9;break}e.t0=void 0!==s;case 9:if(!e.t0){e.next=13;break}e.t2=s,e.next=14;break;case 13:e.t2=!1;case 14:if(!e.t2){e.next=19;break}return e.next=18,i.call("downloadFile",r);case 18:return e.abrupt("return",e.sent);case 19:if(!j(r)){e.next=21;break}return e.abrupt("return",o.forceFileDownload(a,r.name));case 21:return e.abrupt("return",o.download(r));case 22:case"end":return e.stop()}},e)})),function(e){return p.apply(this,arguments)});t.downloadFile=$},27899:function(e,t,n){"use strict";var r,a,i,o=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getReferencedFolder=t.createFolderWithReference=t.ensureMagicFolder=t.MAGIC_FOLDERS=void 0;var s=o(n(87757)),c=o(n(48926)),u=o(n(89734));o(n(18621));var l=n(87941),d=n(71450),f="io.cozy.apps",p="administrative",h="photos",v={ADMINISTRATIVE:"".concat(f,"/").concat(p),PHOTOS:"".concat(f,"/").concat(h),PHOTOS_BACKUP:"".concat(f,"/").concat(h,"/mobile"),PHOTOS_UPLOAD:"".concat(f,"/").concat(h,"/upload"),NOTES:"".concat(f,"/notes"),HOME:"".concat(f,"/home"),PAPERS:"".concat(f,"/").concat(p,"/papers"),COACH_CO2:"".concat(f,"/").concat(p,"/coachco2")};t.MAGIC_FOLDERS=v;var m=(r=(0,c.default)(s.default.mark(function e(t,n,r){var a,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={_type:f,_id:n},e.next=3,g(t,a);case 3:if(!(i=e.sent)){e.next=6;break}return e.abrupt("return",i);case 6:if((o=Object.values(v)).includes(n)){e.next=9;break}throw Error("Cannot create Magic folder with id ".concat(n,". Allowed values are ").concat(o.join(", "),"."));case 9:if(r){e.next=11;break}throw Error("Magic folder default path must be defined");case 11:return e.abrupt("return",y(t,r,a));case 12:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)});t.ensureMagicFolder=m;var y=(a=(0,c.default)(s.default.mark(function e(t,n,r){var a,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.collection(l.DOCTYPE_FILES),e.next=3,a.ensureDirectoryExists(n);case 3:return i=e.sent,e.next=6,a.addReferencesTo(r,[{_id:i}]);case 6:return e.next=8,a.get(i);case 8:return o=e.sent.data,e.abrupt("return",o);case 11:case"end":return e.stop()}},e)})),function(e,t,n){return a.apply(this,arguments)});t.createFolderWithReference=y;var g=(i=(0,c.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,d.Q)(l.DOCTYPE_FILES).partialIndex({type:"directory",trashed:!1}).referencedBy(n));case 2:return r=e.sent.included,e.abrupt("return",r.length>0?(0,u.default)(r,"created_at").pop():null);case 5:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)});t.getReferencedFolder=g},34177:function(e,t,n){"use strict";var r,a,i,o,s=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.openFileWith=t.openOfflineFile=t.getNativeFile=t.saveAndOpenWithCordova=t.temporarySave=t.saveFileWithCordova=t.deleteOfflineFile=t.openFileWithCordova=t.writeFile=t.getDirectory=t.createCozyPath=t.getCozyEntry=t.getEntry=t.getCozyPath=t.getTemporaryRootPath=t.getRootPath=void 0;var c=s(n(87757)),u=s(n(48926)),l=n(25976);s(n(18621)),n(41315);var d=s(n(22853)),f=n(87941),p="Error to get directory",h="Error to write file",v="Error to get file",m="Cozy",y=(0,l.isIOS)()?"CozyDrive":"Cozy Drive",g=window,b=function(){return(0,l.isAndroidApp)()?g.cordova.file.externalDataDirectory:g.cordova.file.dataDirectory};t.getRootPath=b;var w=function(){return(0,l.isAndroidApp)()?g.cordova.file.externalCacheDirectory:g.cordova.file.cacheDirectory};t.getTemporaryRootPath=w;var k=function(){return m+"/"+y+"/"};t.getCozyPath=k;var x=function(e){return new Promise(function(t,n){g.resolveLocalFileSystemURL(e,t,function(t){d.default.error("".concat(e," could not be resolved: ").concat(t.message)),n(t)})})};t.getEntry=x;var O=function(){return x(b()+k()).catch(function(){return C()})};t.getCozyEntry=O;var C=function(){return x(b()).then(function(e){return S(e,m).then(function(e){return S(e,y)})})};t.createCozyPath=C;var S=function(e,t){return new Promise(function(n,r){e.getDirectory(t,{create:!0},n,function(e){d.default.warn(p,t),d.default.warn(e),r(p)})})};t.getDirectory=S;var E=function(e,t){return new Promise(function(n,r){e.createWriter(function(a){a.onwriteend=function(){n(e)},a.onerror=function(e){d.default.warn(h),d.default.warn(e),r(h)},a.write(t)})})};t.writeFile=E;var P=function(e,t,n){return new Promise(function(r,a){e.getFile(n,{create:!0,exclusive:!1},function(e){E(e,t).then(function(){r(e)}).catch(a)},function(e){d.default.warn(v),d.default.warn(e),a(v)})})},_=function(e,t){return new Promise(function(n,r){g.cordova.plugins.fileOpener2.open(e,t,{error:r,success:n})})};t.openFileWithCordova=_;var A=(r=(0,u.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return n=e.sent,e.next=5,x("".concat(n.nativeURL).concat(t));case 5:return r=e.sent,e.abrupt("return",r.remove());case 7:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.deleteOfflineFile=A;t.saveFileWithCordova=function(e,t){return O().then(function(n){return P(n,e,t)})};var R=function(e,t){return x(w()).then(function(n){return P(n,e,t)})};t.temporarySave=R;var D=function(e,t){return R(e,t.name).then(function(e){return _(e.nativeURL,t.mime)})};t.saveAndOpenWithCordova=D;var M=(a=(0,u.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return n=e.sent,e.abrupt("return",x("".concat(n.nativeURL).concat(t.id)));case 4:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});t.getNativeFile=M;var T=(i=(0,u.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return n=e.sent,e.abrupt("return",_(n.nativeURL,t.mime));case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)});t.openOfflineFile=T;var j=(o=(0,u.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,l.isMobileApp)()&&g.cordova.plugins.fileOpener2)){e.next=23;break}return e.prev=1,e.next=4,t.collection(f.DOCTYPE_FILES).fetchFileContent(n.id);case 4:r=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),404===e.t0.status?"missing":"offline";case 10:return e.next=12,r.blob();case 12:return a=e.sent,e.prev=13,e.next=16,N.saveAndOpenWithCordova(a,n);case 16:e.next=21;break;case 18:throw e.prev=18,e.t1=e.catch(13),"noapp";case 21:e.next=24;break;case 23:throw"noapp";case 24:case"end":return e.stop()}},e,null,[[1,7],[13,18]])})),function(e,t){return o.apply(this,arguments)});t.openFileWith=j;var N={saveAndOpenWithCordova:D};t.default=N},93829:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deltaLatitude=t.deltaLongitude=t.computeSphericalCenter=t.geodesicDistance=t.computeSpeed=void 0;function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.computeSpeed=function(e,t){return e&&t?Math.round(e/t*100)/100:0};var r=function(e){return e*Math.PI/180},a=function(e){return 180*e/Math.PI},i=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n};t.geodesicDistance=function(e,t){if((null==e?void 0:e.lon)===void 0||(null==e?void 0:e.lat)===void 0||(null==t?void 0:t.lon)===void 0||(null==t?void 0:t.lat)===void 0)return null;var n=r(e.lon),a=r(e.lat),o=r(t.lon),s=r(t.lat),c=2*Math.asin(Math.sqrt(Math.pow(Math.sin((s-a)/2),2)+Math.cos(a)*Math.cos(s)*Math.pow(Math.sin((o-n)/2),2)));return i(6378137*c,2)};t.computeSphericalCenter=function(e){if(e.length<1)return null;if(1===e.length)return e[0];var t=0,o=0,s=0,c,u=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}}(e))){i&&(e=i);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,s=!0,c=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{!s&&null!=i.return&&i.return()}finally{if(c)throw o}}}}(e);try{for(u.s();!(c=u.n()).done;){var l=c.value,d=r(l.lon),f=r(l.lat),p=Math.cos(f)*Math.cos(d),h=Math.cos(f)*Math.sin(d),v=Math.sin(f);t+=p,o+=h,s+=v}}catch(e){u.e(e)}finally{u.f()}var m=t/e.length,y=o/e.length,g=s/e.length,b=a(Math.atan2(y,m));return{lat:i(a(Math.atan2(g,Math.sqrt(m*m+y*y))),13),lon:i(b,13)}};t.deltaLongitude=function(e,t){return i(a(t/(6378137*Math.cos(r(e)))),13)};t.deltaLatitude=function(e){return i(e/(40075e3/360),13)}},4034:function(e,t,n){"use strict";var r=n(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.geo=t.user=t.paper=t.dacc=t.sharing=t.timeseries=t.document=t.contact=t.utils=t.permission=t.note=t.account=t.konnectorFolder=t.folder=t.file=t.applications=t.instance=t.trigger=t.accounts=t.triggers=void 0;var a=r(n(20786));t.trigger=a;var i=r(n(5499));t.instance=i;var o=r(n(23963));t.applications=o;var s=r(n(67348));t.file=s;var c=r(n(27899));t.folder=c;var u=r(n(3857));t.konnectorFolder=u;var l=r(n(94564));t.account=l;var d=r(n(49666));t.note=d;var f=r(n(13001));t.permission=f;var p=r(n(1028));t.utils=p;var h=r(n(40996));t.contact=h;var v=r(n(41818));t.document=v;var m=r(n(48398));t.timeseries=m;var y=r(n(32672));t.sharing=y;var g=r(n(61645));t.dacc=g;var b=r(n(87067));t.paper=b;var w=r(n(51398));t.user=w;var k=r(n(93829));t.geo=k;t.triggers=a;t.accounts=l},5499:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.makeDiskInfos=t.hasPasswordDefinedAttribute=t.buildPremiumLink=t.hasAnOffer=t.shouldDisplayOffers=t.getUuid=t.isFreemiumUser=t.arePremiumLinksEnabled=t.isSelfHosted=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(27361)),c=n(71450),u=5e10,l=function(e){return!(0,s.default)(e,"context.data.manager_url")};t.isSelfHosted=l;var d=function(e){return!!(0,s.default)(e,"context.data.enable_premium_links")};t.arePremiumLinksEnabled=d;var f=function(e){return parseInt((0,s.default)(e,"diskUsage.data.quota",!1))<=u};t.isFreemiumUser=f;var p=function(e){return(0,s.default)(e,"instance.data.uuid")};t.getUuid=p;t.shouldDisplayOffers=function(e){return!l(e)&&d(e)&&p(e)&&f(e)};t.hasAnOffer=function(e){return!l(e)&&d(e)&&p(e)&&!f(e)};t.buildPremiumLink=function(e){var t=(0,s.default)(e,"context.data.manager_url",!1),n=p(e);return t&&n?"".concat(t,"/cozy/instances/").concat(n,"/premium"):null};var h=(r=(0,o.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchQueryAndGetFromState({definition:(0,c.Q)("io.cozy.settings").getById("io.cozy.settings.instance"),options:{as:"io.cozy.settings/io.cozy.settings.instance",singleDocData:!0}});case 3:return n=e.sent.data.password_defined,e.abrupt("return",!!n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return r.apply(this,arguments)});t.hasPasswordDefinedAttribute=h;var v=function(e){return 1e-9*e},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"".concat(e%1?e.toFixed(t):e)},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return{diskQuota:v(t),diskUsage:v(e),percentUsage:e/t*100}};t.makeDiskInfos=function(e,t){var n=y(+e,t?+t:void 0),r=n.diskQuota,a=n.diskUsage,i=n.percentUsage;return{humanDiskQuota:m(r),humanDiskUsage:m(a),percentUsage:Math.round(i).toString()}}},3857:function(e,t,n){"use strict";var r,a,i,o,s,c,u,l=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.findKonnectorAccountFolderByReference=t.buildFolderPermission=t.buildMainFolderPath=t.buildFolderPath=t.statDirectoryByPath=t.createDirectoryByPath=t.ensureKonnectorFolder=void 0;var d=l(n(87757)),f=l(n(63038)),p=l(n(48926)),h=n(27899);l(n(18621));var v=n(94564),m=n(92984),y=n(71450),g="io.cozy.files";var b=(r=(0,p.default)(d.default.mark(function e(t,n){var r,a,i,o,s,c,u,l,p,y,g,b,C,S,E;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.konnector,a=n.account,i=n.lang,o=t.collection("io.cozy.permissions"),s=(0,m.getLocalizer)(i),e.next=5,Promise.all([(0,h.ensureMagicFolder)(t,h.MAGIC_FOLDERS.ADMINISTRATIVE,s("MagicFolders.administrative")),(0,h.ensureMagicFolder)(t,h.MAGIC_FOLDERS.PHOTOS,s("MagicFolders.photos"))]);case 5:return c=e.sent,l=(u=(0,f.default)(c,2))[0],p=u[1],y=(0,v.getAccountName)(a),e.next=12,I({client:t,slug:r.slug,sourceAccountIdentifier:y});case 12:if(!(g=e.sent)){e.next=15;break}return e.abrupt("return",g);case 15:return e.next=17,L({client:t,slug:r.slug});case 17:if(!(b=e.sent)){e.next=22;break}return e.next=21,function(e){return z.apply(this,arguments)}({client:t,mainFolder:b,konnector:r,sourceAccountIdentifier:y});case 21:return e.abrupt("return",e.sent);case 22:return C=O(r,{administrative:l.path,photos:p.path}),e.next=25,k(t,C);case 25:if(e.t0=e.sent,e.t0){e.next=30;break}return e.next=29,w(t,C);case 29:e.t0=e.sent;case 30:return j({client:t,folder:e.t0,konnector:r}),S=x(r,a,{administrative:l.path,photos:p.path}),e.next=35,k(t,S);case 35:if(e.t1=e.sent,e.t1){e.next=40;break}return e.next=39,w(t,S);case 39:e.t1=e.sent;case 40:return E=e.t1,e.next=43,Promise.all([o.add(r,R(E)),j({client:t,folder:E,konnector:r}),N({client:t,folder:E,sourceAccountIdentifier:y})]);case 43:return e.abrupt("return",E);case 44:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.ensureKonnectorFolder=b;var w=(a=(0,p.default)(d.default.mark(function e(t,n){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(g).createDirectoryByPath(n);case 2:return r=e.sent.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.createDirectoryByPath=w;var k=(i=(0,p.default)(d.default.mark(function e(t,n){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.collection(g).statByPath(n);case 3:if(!(r=e.sent).data.trashed){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",r.data);case 9:if(e.prev=9,e.t0=e.catch(0),!(e.t0&&404===e.t0.status)){e.next=13;break}return e.abrupt("return",null);case 13:throw Error(e.t0.message);case 14:case"end":return e.stop()}},e,null,[[0,9]])})),function(e,t){return i.apply(this,arguments)});t.statDirectoryByPath=k;var x=function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=D(((null==e?void 0:null===(n=e.folders)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.defaultDir)||"$administrative/$konnector/$account").replace(/(\/+)/g,"/"),"/");!C(i)&&(i="$administrative/"+i);var o=i.split("/",1),s=E(i,o[0]),c=P(o[0],a),u=_(s,{konnector:e.name,account:(0,v.getAccountName)(t).replace(A,"-")});return"/".concat(c,"/").concat(u)};t.buildFolderPath=x;var O=function(e){var t,n,r,a,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=D(((null==e?void 0:null===(t=e.folders)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:null===(r=n.defaultDir)||void 0===r?void 0:null===(a=r.split("/"))||void 0===a?void 0:null===(i=a.slice(0,-1))||void 0===i?void 0:i.join("/"))||"$administrative/$konnector").replace(/(\/+)/g,"/"),"/");!C(s)&&(s="$administrative/"+s);var c=s.split("/",1),u=E(s,c[0]),l=P(c[0],o),d=_(u,{konnector:e.name});return"/".concat(l,"/").concat(d)};t.buildMainFolderPath=O;var C=function(e){return S.some(function(t){return e.startsWith(t)})},S=["$administrative","$photos"],E=function(e,t){var n=e.substring(t.length);return""===n&&(n="$konnector/$account"),n},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D((t[e.slice(1)]||"Administrative").replace(/(\/+)/g,"/"),"/")},_=function(e,t){return D(e.replace(/(\/+)/g,"/"),"/").split("/").map(function(e){return(null==t?void 0:t[e.slice(1)])||e}).join("/")},A=/\//g,R=function(e){return{saveFolder:{type:g,values:[e._id],verbs:["GET","PATCH","POST"]}}};t.buildFolderPermission=R;var D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\\s";return e.replace(new RegExp("^([".concat(t,"]*)(.*?)([").concat(t,"]*)$")),"$2")},M=function(e,t){var n;return!!(null===(n=e.referenced_by)||void 0===n?void 0:n.find(function(e){return"io.cozy.konnectors"===e.type&&e.id==="io.cozy.konnectors/"+t}))},T=function(e,t){var n;return!!(null===(n=e.referenced_by)||void 0===n?void 0:n.find(function(e){return"io.cozy.accounts.sourceAccountIdentifier"===e.type&&(!t||e.id===t)}))};var j=(o=(0,p.default)(d.default.mark(function e(t){var n,r,a,i;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.folder,a=t.konnector,i=n.collection(g),M(r,a.slug)){e.next=5;break}return e.next=5,i.addReferencesTo(a,[r]);case 5:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)});var N=(s=(0,p.default)(d.default.mark(function e(t){var n,r,a,i;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.folder,a=t.sourceAccountIdentifier,i=n.collection(g),T(r,a)){e.next=5;break}return e.next=5,i.addReferencesTo({_id:a,_type:"io.cozy.accounts.sourceAccountIdentifier"},[r]);case 5:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)});var I=(c=(0,p.default)(d.default.mark(function e(t){var n,r,a,i;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.slug,a=t.sourceAccountIdentifier,e.next=3,n.query((0,y.Q)(g).partialIndex({type:"directory",trashed:!1}).referencedBy({_type:"io.cozy.konnectors",_id:"io.cozy.konnectors/".concat(r)}));case 3:return i=e.sent.included,e.abrupt("return",i.find(function(e){return T(e,a)}));case 6:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)});t.findKonnectorAccountFolderByReference=I;var L=(u=(0,p.default)(d.default.mark(function e(t){var n,r,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.slug,e.next=3,n.query((0,y.Q)(g).partialIndex({type:"directory",trashed:!1}).referencedBy({_type:"io.cozy.konnectors",_id:"io.cozy.konnectors/".concat(r)}));case 3:return a=e.sent.included,e.abrupt("return",a.find(function(e){return!T(e)}));case 6:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)});function z(){return(z=(0,p.default)(d.default.mark(function e(t){var n,r,a,i,o,s;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.mainFolder,a=t.konnector,i=t.sourceAccountIdentifier,o=r.path+"/"+i,e.next=4,k(n,o);case 4:if(e.t0=e.sent,e.t0){e.next=9;break}return e.next=8,w(n,o);case 8:e.t0=e.sent;case 9:return s=e.t0,e.next=12,j({client:n,folder:s,konnector:a});case 12:return e.next=14,N({client:n,folder:s,sourceAccountIdentifier:i});case 14:return e.abrupt("return",s);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}},86092:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeCategories=h,t.areTermsValid=v,t.isPartnershipValid=m,t.sanitize=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return!e.categories&&e.category&&"string"==typeof e.category&&(t.categories=[e.category],delete t.category),t.categories=h(t.categories),"object"==typeof e.name&&(t.name=e.name.en),e.available_version&&(t.availableVersion=e.available_version,delete t.available_version),e.latest_version&&(t.latestVersion=e.latestVersion,delete t.latest_version),t.terms&&!v(t.terms)&&delete t.terms,t.partnership&&!m(t.partnership)&&delete t.partnership,t.fields&&(t.fields=g(e.fields)),t},t.getIdentifier=t.sanitizeIdentifier=t.legacyLoginFields=t.ROLE_IDENTIFIER=void 0;var a=r(n(59713)),i=r(n(59242)),o=r(n(50361)),s=r(n(70894));function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var l="identifier";t.ROLE_IDENTIFIER=l;var d=["login","identifier","new_identifier","email"];t.legacyLoginFields=d;var f=["secret","dob","code","answer","access_token","refresh_token","appSecret"],p=["banking","cozy","energy","health","host_provider","insurance","isp","mes_infos","online_services","others","partners","press","productivity","ptnb","public_service","shopping","social","telecom","transport"];function h(e){if(!e)return["others"];var t=e.filter(function(e){return p.includes(e)});return t.length?t:["others"]}function v(e){return!!(e&&e.id&&e.url&&e.version)}function m(e){return!!(e&&e.description)}var y=function(e){var t=(0,o.default)(e),n=!1;for(var r in t)t[r].role===l&&(n?delete t[r].role:n=!0);if(n)return t;var a,i=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}}}(d);try{for(i.s();!(a=i.n()).done;){var s=a.value;if(t[s])return t[s].role=l,t}}catch(e){i.e(e)}finally{i.f()}for(var u in t)if("password"!==t[u].type){t[u].role=l;break}return t};t.sanitizeIdentifier=y;t.getIdentifier=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.default)(y(e),function(e){return e.role===l})||null};var g=(0,i.default)([function(e){var t=(0,o.default)(e);return delete t.advancedFields,t},y,function(e){var t=(0,o.default)(e);for(var n in t){var r=t[n],a=void 0===r.required?r.isRequired:r.required;t[n].required="boolean"!=typeof a||a}return t},function(e){var t=(0,o.default)(e);for(var n in t){var r=t[n];"boolean"!=typeof r.encrypted&&(r.encrypted="password"===r.type||f.includes(n))}return t}])},49666:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchURL=t.generateUrlForNote=t.generatePrivateUrl=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(72004),c=a(n(22853)),u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.returnUrl,a=new URL(e);return r&&a.searchParams.set("returnUrl",r),a.hash="#/n/".concat(t.id),a.toString()};t.generatePrivateUrl=u;t.generateUrlForNote=function(e,t){return c.default.warn("generateUrlForNote is deprecated. Please use models.note.generatePrivateUrl instead"),u(e,t)};var l=(r=(0,o.default)(i.default.mark(function e(t,n){var r,a,o,c,u,l,d,f,p,h,v,m=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>2&&void 0!==m[2]?m[2]:{},e.next=3,t.getStackClient().collection("io.cozy.notes").fetchURL({_id:n.id});case 3:if(o=(a=e.sent.data).note_id,c=a.subdomain,u=a.protocol,l=a.instance,d=a.sharecode,f=a.public_name,!d){e.next=18;break}return(h=[["id",o]]).push(["sharecode",d]),f&&h.push(["username",f]),e.abrupt("return",(0,s.generateWebLink)({cozyUrl:"".concat(u,"://").concat(l),searchParams:h,pathname:null!==(p=r.pathname)&&void 0!==p?p:"/public/",slug:"notes",subDomainType:c}));case 18:return e.abrupt("return",(0,s.generateWebLink)({cozyUrl:"".concat(u,"://").concat(l),pathname:null!==(v=r.pathname)&&void 0!==v?v:"",slug:"notes",subDomainType:c,hash:"/n/".concat(o)}));case 19:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.fetchURL=l},87067:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isForeignPaper=t.makeExpirationDescription=t.makeExpiresInMessage=t.makeExpiredMessage=t.formatContactValue=t.getTranslatedNameForContact=t.formatOtherMetadataValue=t.getTranslatedNameForOtherMetadata=t.formatInformationMetadataValue=t.getTranslatedNameForInformationMetadata=t.formatDateMetadataValue=t.getTranslatedNameForDateMetadata=t.getMetadataQualificationType=t.formatMetadataQualification=t.makeMetadataQualification=t.isExpiringSoon=t.isExpired=t.computeExpirationNoticeLink=t.computeExpirationNoticeDate=t.computeExpirationDate=t.isExpiring=t.KNOWN_BILLS_ATTRIBUTES_NAMES=t.KNOWN_OTHER_METADATA_NAMES=t.KNOWN_INFORMATION_METADATA_NAMES=t.KNOWN_DATE_METADATA_NAMES=void 0;var a=r(n(319)),i=r(n(86802)),o=r(n(83386)),s=r(n(95110)),c=r(n(12102)),u=n(92984),l=n(61774),d=n(40996),f=r(n(27361)),p=n(65314),h={national_id_card:"https://www.service-public.fr/particuliers/vosdroits/N358",residence_permit:"https://www.service-public.fr/particuliers/vosdroits/N110",passport:"https://www.service-public.fr/particuliers/vosdroits/N360",driver_license:"https://permisdeconduire.ants.gouv.fr/demarches-en-ligne/perte-vol-deterioration-fin-de-validite-ou-changement-d-etat-civil"},v=["AObtentionDate","BObtentionDate","CObtentionDate","DObtentionDate","obtentionDate","expirationDate","referencedDate","issueDate","shootingDate","date","datetime"];t.KNOWN_DATE_METADATA_NAMES=v;var m=["number","bicNumber","country","refTaxIncome","contractType","netSocialAmount","employerName","vehicle.licenseNumber","vehicle.confidentialNumber","noticePeriod"];t.KNOWN_INFORMATION_METADATA_NAMES=m;var y=["contact","page","qualification"];t.KNOWN_OTHER_METADATA_NAMES=y;var g=["amount","subtype","employer"];t.KNOWN_BILLS_ATTRIBUTES_NAMES=g;var b=function(e){var t,n,r,a,i,o=null===(t=e.metadata)||void 0===t?void 0:null===(n=t.qualification)||void 0===n?void 0:n.label,s=null===(r=e.metadata)||void 0===r?void 0:r.country,c=null===(a=e.metadata)||void 0===a?void 0:a.expirationDate,u=null===(i=e.metadata)||void 0===i?void 0:i.noticePeriod;return"national_id_card"===o&&(!s||"fr"===s)&&!!c&&!!u||!1},w=function(e){var t,n,r=null===(t=e.metadata)||void 0===t?void 0:t.expirationDate,a=null===(n=e.metadata)||void 0===n?void 0:n.noticePeriod;return!!r&&!!a||!1},k=function(e){var t,n,r,a=null===(t=e.metadata)||void 0===t?void 0:null===(n=t.qualification)||void 0===n?void 0:n.label,i=null===(r=e.metadata)||void 0===r?void 0:r.referencedDate,o=e.created_at;return"personal_sporting_licence"===a&&(!!i||!!o)||!1};t.isExpiring=function(e){return!!(b(e)||w(e)||k(e))||!1};var x=function(e){if(b(e)||w(e)){var t;return new Date(null===(t=e.metadata)||void 0===t?void 0:t.expirationDate)}if(k(e)){var n,r=null===(n=e.metadata)||void 0===n?void 0:n.referencedDate,a=e.created_at;return(0,i.default)(new Date(null!=r?r:a),{days:365})}return null};t.computeExpirationDate=x;var O=function(e){if(b(e)||w(e)){var t;return parseInt(null===(t=e.metadata)||void 0===t?void 0:t.noticePeriod,10)}return k(e)?15:null},C=function(e){var t=x(e);if(null==t)return null;var n=O(e);return null==n?null:(0,o.default)(t,{days:n})};t.computeExpirationNoticeDate=C;t.computeExpirationNoticeLink=function(e){var t,n,r=null===(t=e.metadata)||void 0===t?void 0:null===(n=t.qualification)||void 0===n?void 0:n.label;return r&&h[r]||null};t.isExpired=function(e){var t=new Date,n=x(e);return null!=n&&n<=t};t.isExpiringSoon=function(e){var t=new Date,n=x(e),r=C(e);return null!=n&&null!=r&&r<=t&&t<n};var S=function(e){var t=e.metadata,n=e.knownMetadataPath,r=e.value||(0,f.default)(t,n,null)||null;return Object.keys(t).some(function(e){return n.startsWith(e)})||"contact"===n?{name:n,value:r}:null};t.makeMetadataQualification=S;t.formatMetadataQualification=function(e){var t=v.map(function(t){return S({metadata:e,knownMetadataPath:t})}).filter(Boolean).filter(function(e,t,n){return n.length>1?"datetime"!==e.name:e}),n=m.map(function(t){return S({metadata:e,knownMetadataPath:t})}).filter(Boolean),r=y.map(function(t){var n,r="qualification"===t?null===(n=e[t])||void 0===n?void 0:n.label:e[t];return S({metadata:e,knownMetadataPath:t,value:r})}).filter(Boolean);return[].concat((0,a.default)(t),(0,a.default)(n),(0,a.default)(r))};t.getMetadataQualificationType=function(e){if(v.includes(e))return"date";if(m.includes(e))return"information";if(y.includes(e))return"contact"===e?"contact":"other";return g.includes(e)?"bills":null};t.getTranslatedNameForDateMetadata=function(e,t){var n=t.lang;return(0,u.getLocalizer)(n)("Scan.qualification.date.title.".concat(e))};t.formatDateMetadataValue=function(e,t){var n=t.lang,r=t.f,a=(0,u.getLocalizer)(n);return e?"en"===n?r(e,"LL/dd/yyyy"):r(e,"dd/LL/yyyy"):a("Scan.qualification.noInfo")};t.getTranslatedNameForInformationMetadata=function(e,t){var n=t.lang,r=t.qualificationLabel,a=(0,u.getLocalizer)(n);return"number"===e?a("Scan.qualification.information.title.".concat(r,".").concat(e)):a("Scan.qualification.information.title.".concat(e))};t.formatInformationMetadataValue=function(e,t){var n=t.lang,r=t.name,a=t.qualificationLabel,i=(0,u.getLocalizer)(n),o=(0,l.getLocalizer)(n).t;return"number"==typeof e||e?"noticePeriod"===r?"".concat(e," ").concat(i("Scan.qualification.information.day",{smart_count:e})):"contractType"===r?i("Scan.attributes.contractType.".concat(e),{_:e}):"refTaxIncome"===r||"netSocialAmount"===r||"amount"===r||"number"===r&&"pay_sheet"===a?"".concat(e," €"):"country"===r&&(0,p.isValidCountryCodeTranslation)(n,e)?o("countries.".concat(e)):e:i("Scan.qualification.noInfo")};t.getTranslatedNameForOtherMetadata=function(e,t){var n=t.lang;return(0,u.getLocalizer)(n)("Scan.qualification.".concat(e))};t.formatOtherMetadataValue=function(e,t){var n=t.lang,r=t.name,a=(0,u.getLocalizer)(n);return"qualification"===r?a("Scan.items.".concat(e),{smart_count:1}):a("Scan.qualification.".concat(e))};t.getTranslatedNameForContact=function(e){var t=e.lang;return(0,u.getLocalizer)(t)("Scan.qualification.contact")};t.formatContactValue=function(e){return e&&e.length>0?e.map(function(e){return"".concat((0,d.getDisplayName)(e))}).join(", "):""};t.makeExpiredMessage=function(e){var t=e.lang;return(0,u.getLocalizer)(t)("Scan.expiration.expired")};t.makeExpiresInMessage=function(e,t){var n=t.lang;return(0,u.getLocalizer)(n)("Scan.expiration.expiresIn",{duration:(0,s.default)(new Date(e),{locale:"fr"===n?c.default:void 0})})};t.makeExpirationDescription=function(e,t){var n=t.lang;return(0,u.getLocalizer)(n)("Scan.expiration.description",{duration:(0,s.default)(new Date(e),{locale:"fr"===n?c.default:void 0})})};t.isForeignPaper=function(e){var t;return null!==(t=e.metadata)&&void 0!==t&&!!t.country&&"fr"!==e.metadata.country.toLowerCase()}},13001:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isReadOnly=m,t.fetchOwn=y,t.isForType=b,t.isDocumentReadOnly=function(e){return k.apply(this,arguments)},t.isShortcutCreatedOnTheRecipientCozy=void 0;var a=r(n(59713)),i=r(n(87757)),o=r(n(48926)),s=r(n(319)),c=r(n(25325)),u=r(n(27361));r(n(18621));var l=n(71450),d=n(67348),f=n(87941),p=r(n(22853));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.writability;return e.verbs&&e.verbs.length>0&&0===(0,c.default)(e.verbs,["ALL"].concat((0,s.default)(void 0===n?["PATCH","POST","PUT","DELETE"]:n))).length}function y(e){return g.apply(this,arguments)}function g(){return(g=(0,o.default)(i.default.mark(function e(t){var n,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collection("io.cozy.permissions"),e.next=3,n.fetchOwnPermissions();case 3:if(r=e.sent,a=(0,u.default)(r,"data.attributes.permissions")){e.next=7;break}throw"Can't get self permissions";case 7:return e.abrupt("return",Object.values(a));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(e,t){return e.type===t||e.type+".*"===t}function w(){return(w=(0,o.default)(i.default.mark(function e(t){var n,r,a,s,c,u,p,h,m,g,w;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w=function(){return(w=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,s,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.doc,r=t.client,!(o=(a=t.perms).find(function(e){if(!e.values)return!0;var t=n[e.selector||"id"];return e.values.includes(t)}))){e.next=6;break}return e.abrupt("return",o);case 6:if(c!==f.DOCTYPE_FILES){e.next=16;break}if(s=(0,d.getParentFolderId)(n),e.t0=s,!e.t0){e.next=13;break}return e.next=12,h(s);case 12:e.t0=e.sent;case 13:if(!(u=e.t0)){e.next=16;break}return e.abrupt("return",g({doc:u,perms:a,client:r}));case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)},g=function(e){return w.apply(this,arguments)},m=function(){return(m=(0,o.default)(i.default.mark(function e(t){var n,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.Q)(f.DOCTYPE_FILES).getById(t),e.next=3,r.query(n);case 3:return a=e.sent,e.abrupt("return",a&&a.data);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)},h=function(e){return m.apply(this,arguments)},n=t.document,r=t.client,a=t.permissions,s=n._id||n.id,c=n._type||n.type,u=v(v({},n),{},{id:s,type:c}),!a){e.next=12;break}e.t0=a,e.next=15;break;case 12:return e.next=14,y(r);case 14:e.t0=e.sent;case 15:return p=e.t0.filter(function(e){return b(e,c)}),e.abrupt("return",g({doc:u,client:r,perms:p}));case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(){return(k=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,s,c;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.document,r=t.client,a=t.writability,void 0!==(o=t.permissions)){e.next=10;break}return e.next=7,y(r);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=o;case 11:if(!((s=e.t0).length<=1)){e.next=16;break}e.t1=s[0],e.next=19;break;case 16:return e.next=18,function(e){return w.apply(this,arguments)}({document:n,client:r,permissions:s});case 18:e.t1=e.sent;case 19:if(!(c=e.t1)){e.next=24;break}return e.abrupt("return",m(c,{writability:a}));case 24:return p.default.warn("can't find the document in current attached permissions"),e.abrupt("return",void 0);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.isShortcutCreatedOnTheRecipientCozy=function(e){if(!e.included)return!1;var t=e.included.find(function(e){return"io.cozy.sharings.members"===e.type});return!!t&&!!t.attributes.instance||!1}},32672:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingLink=void 0;var i=a(n(87757)),o=a(n(59713)),s=a(n(48926)),c=n(87941);a(n(18621));var u=n(72004);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=(r=(0,s.default)(i.default.mark(function e(t,n){var r,a,o,s,l,f,p,h,v,m,y=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=(o=y.length>2&&void 0!==y[2]?y[2]:{}).ttl,l=o.password,p=void 0===(f=o.verbs)?["GET"]:f,h=d(d({_type:c.DOCTYPE_PERMISSIONS,permissions:{files:{type:c.DOCTYPE_FILES,values:n,verbs:p}}},s&&{ttl:s}),l&&{password:l}),e.next=4,t.save(h);case 4:return v=e.sent.data,m=(0,u.generateWebLink)({cozyUrl:t.getStackClient().uri,searchParams:[["sharecode",null==v?void 0:null===(r=v.attributes)||void 0===r?void 0:null===(a=r.shortcodes)||void 0===a?void 0:a.code]],pathname:"/public",slug:"drive",subDomainType:t.capabilities.flat_subdomains?"flat":"nested"}),e.abrupt("return",m);case 8:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.makeSharingLink=f},48398:function(e,t,n){"use strict";var r,a,i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchTimeSeriesByIntervalAndSource=t.saveTimeSeries=void 0;var o=i(n(87757)),s=i(n(48926)),c=n(71450),u=function(e){if(!e.startDate||!e.endDate)throw Error("You must specify a startDate and endDate for the time serie");if(!Date.parse(e.startDate)||!Date.parse(e.endDate))throw Error("Invalid date format for the time serie");if(!e.dataType)throw Error("You must specify a dataType for the time serie");if(!e.series||!Array.isArray(e.series))throw Error("You must specify a series array for the time serie")};var l=(r=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,s,c,l,d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dataType,a=n.series,i=n.startDate,s=n.endDate,c=n.source,l=n.theme,u({dataType:r,series:a,startDate:i,endDate:s,source:c}),d={_type:"io.cozy.timeseries.".concat(r),startDate:i,endDate:s,source:c,theme:l,series:a},e.abrupt("return",t.save(d));case 5:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.saveTimeSeries=l;var d=(a=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,s,u,l,d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.startDate,a=n.endDate,i=n.dataType,s=n.source,u=n.limit,l="io.cozy.timeseries.".concat(i),d=(0,c.Q)(l).where({source:s,startDate:{$gte:r},endDate:{$lte:a}}).indexFields(["source","startDate","endDate"]).sortBy([{source:"desc"},{startDate:"desc"},{endDate:"desc"}]).limitBy(u||5),e.abrupt("return",t.query(d));case 4:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.fetchTimeSeriesByIntervalAndSource=d},20786:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.triggers=t.triggerStates=void 0;var a=r(n(59713)),i=n(94564),o=r(n(22853));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=["CHALLENGE_ASKED","DISK_QUOTA_EXCEEDED","TERMS_VERSION_MISMATCH","USER_ACTION_NEEDED","USER_ACTION_NEEDED.CHANGE_PASSWORD","USER_ACTION_NEEDED.ACCOUNT_REMOVED","USER_ACTION_NEEDED.WEBAUTH_REQUIRED","USER_ACTION_NEEDED.SCA_REQUIRED","LOGIN_FAILED"],l={getLastExecution:function(e){var t;return null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_execution},getLastSuccess:function(e){var t;return null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_success},getLastsuccess:function(e){var t;return o.default.warn("Deprecated, please use getLastSuccess instead of getLastsuccess"),null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_success},isErrored:function(e){var t;return(null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.status)==="errored"},getLastErrorType:function(e){var t;return null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_error}};t.triggerStates=l;var d={isKonnectorWorker:function(e){return"konnector"===e.worker},isKonnector:function(e){return"konnector"===e.worker||"client"===e.worker},getKonnector:function(e){return d.isKonnector(e)?e.message&&e.message.konnector?e.message.konnector:e.message&&e.message.Data?JSON.parse(atob(e.message.Data)).konnector:void 0:null},getAccountId:function(e){var t,n,r=null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.Data;return r?JSON.parse(atob(r)).account:null==e?void 0:null===(n=e.message)||void 0===n?void 0:n.account},isLatestErrorMuted:function(e,t){var n=l.getLastErrorType(e),r=l.getLastSuccess(e),a=r?new Date(r):new Date;return(0,i.getMutedErrors)(t).some(function(e){return e.type===n&&(!r||new Date(e.mutedAt)>a)})},hasActionableError:function(e){var t;return u.includes(null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_error)},buildTriggerAttributes:function(e){var t=e.account,n=e.cron,r=e.folder,a=e.konnector,i={account:t._id,konnector:a.slug};r&&(i.folder_to_save=r._id);var o=a.clientSide?{type:"@client"}:{type:"@cron",arguments:void 0===n?"0 0 0 * * 0":n};return c(c({},{worker:"konnector",message:i}),o)}};t.triggers=d},51398:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.hasPassword=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(5499),c=n(88842),u=n(47978);var l=(r=(0,o.default)(i.default.mark(function e(t){var n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.hasExtensionInstalledAttribute)(t);case 2:return n=e.sent,e.next=5,(0,s.hasPasswordDefinedAttribute)(t);case 5:return r=e.sent,e.abrupt("return",!((0,u.isMagicLink)(t)||(0,u.isOIDC)(t))||n||r);case 7:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.hasPassword=l},1028:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getFlagshipDownloadLink=t.getCreatedByApp=t.hasBeenUpdatedByApp=void 0;var a=r(n(27361)),i=n(25976),o=r(n(71400));t.hasBeenUpdatedByApp=function(e,t){var n=(0,a.default)(e,"cozyMetadata.updatedByApps");return!!(n&&n.find(function(e){return e.slug===t}))};t.getCreatedByApp=function(e){return(0,a.default)(e,"cozyMetadata.createdByApp")};t.getFlagshipDownloadLink=function(e){if((0,i.isAndroid)()){var t=(0,o.default)("flagship.playstore-id")||"io.cozy.flagship.mobile";return"https://play.google.com/store/apps/details?id=".concat(t,"&hl=").concat(e)}if((0,i.isIOS)()){var n=(0,o.default)("flagship.appstore-id")||"id1600636174";return"https://apps.apple.com/".concat(e,"/app/").concat(n)}return(0,o.default)("flagship.download-link")||"https://cozy.io/".concat(e,"/download")}},12196:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPerformanceApi=void 0;t.defaultPerformanceApi={measure:function(e){},mark:function(e){return e}}},86465:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.webPerformanceApi=void 0;var a=r(n(73955));t.webPerformanceApi={measure:function(e){var t=e.measureName,n=e.markName,r=e.category,a=e.color,i=null!=t?t:n;performance.measure(i,{start:n,detail:{devtools:{track:null!=r?r:"CozyClient",color:null!=a?a:"secondary"}}})},mark:function(e){var t="".concat((0,a.default)()," ").concat(e);return performance.mark(t),t}}},39268:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={olderThan:function(e){return function(t){return!t||!t.lastUpdate||Date.now()-t.lastUpdate>e}},noFetch:function(){return!1}}},25888:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=function(){var e;function t(){(0,o.default)(this,t),this.pending={}}return(0,s.default)(t,[{key:"exec",value:(e=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),(i=this.pending[r])?o=i:(o=t(),this.pending[r]=o),e.prev=3,e.next=6,o;case 6:return s=e.sent,e.abrupt("return",s);case 8:return e.prev=8,this.pending[r]=null,e.finish(8);case 11:case"end":return e.stop()}},e,this,[[3,,8,11]])})),function(t,n){return e.apply(this,arguments)})},{key:"get",value:function(e){var t=e(),n=this.pending[t];return n?n:null}}]),t}();t.default=c},71450:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.QueryDefinition=t.MutationTypes=t.Mutations=t.getDoctypeFromOperation=t.uploadFile=t.removeReferencedBy=t.addReferencedBy=t.removeReferencesTo=t.addReferencesTo=t.deleteDocument=t.updateDocuments=t.updateDocument=t.createDocument=t.isAGetByIdQuery=t.Q=void 0;var a=r(n(59713)),i=r(n(34575)),o=r(n(93913)),s=r(n(70894)),c=r(n(22853));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e),this.doctype=t.doctype,this.id=t.id,this.ids=t.ids,this.selector=t.selector,this.fields=t.fields,this.indexedFields=t.indexedFields,this.partialFilter=t.partialFilter,this.sort=t.sort,this.includes=t.includes,this.referenced=t.referenced,this.limit=t.limit,this.skip=t.skip,this.cursor=t.cursor,this.bookmark=t.bookmark}return(0,o.default)(e,[{key:"checkSortOrder",value:function(e){var t=e.sort,n=e.selector,r=e.indexedFields,a=this.sort||t,i=this.selector||n||{},o=this.indexedFields||r;if(!a)return;var s=o||Object.keys(i);if(!!s&&!(s.length<1)){if(a.length>s.length){c.default.warn("You should not sort on non-indexed fields.\n\n        Sort: ".concat(JSON.stringify(a),"\n\n        Indexed fields: ").concat(s));return}for(var u=0;u<a.length;u++)if(Object.keys(a[u])[0]!==s[u]){c.default.warn("The sort order should be the same than the indexed fields.\n\n          Sort: ".concat(JSON.stringify(a),"\n\n          Indexed fields: ").concat(s,"\n"));return}}}},{key:"checkSelector",value:function(e){(0,s.default)(e,["$exists",!1])&&c.default.warn('The "$exists: false" predicate should be defined as a partial index for better performance.\n\n        Selector: '.concat(JSON.stringify(e))),(0,s.default)(e,"$ne")&&c.default.info("The use of the $ne operator is more efficient with a partial index.\n\n        Selector: ".concat(JSON.stringify(e)));var t=(0,s.default)(e,function(e){return Array.isArray(e)});if(t&&!t.startsWith("$"))throw Error("You pass ".concat(JSON.stringify(e),", this is a valid mango operation, \n\n        but sift doesn't support it so CozyClient can not evaluate \n\n        the request in memory. You must use a MongoDB operator \n\n        like $in or $or operator instead, preferably in a partial index, \n\n        to avoid costly full-scan"))}},{key:"checkSelectFields",value:function(e){var t=e.fields,n=e.selector,r=e.partialFilter,a=this.fields||t,i=this.selector||n,o=this.partialFilter||r;if(!!a&&(!!i||!!o)){if(!Object.keys(l(l({},i),o)).every(function(e){return a.includes(e)}))throw Error("The .select should includes all the fields used in where or partialIndex.\n        Please fix this query: fields: ".concat(JSON.stringify(this.toDefinition())))}}},{key:"getById",value:function(t){if(!t)throw Error("getById called with undefined id");return new e(l(l({},this.toDefinition()),{},{id:t}))}},{key:"getByIds",value:function(t){return new e(l(l({},this.toDefinition()),{},{ids:t}))}},{key:"where",value:function(t){return this.checkSortOrder({selector:t}),this.checkSelector(t),this.checkSelectFields({selector:t}),new e(l(l({},this.toDefinition()),{},{selector:t}))}},{key:"select",value:function(t){return this.checkSelectFields({fields:t}),new e(l(l({},this.toDefinition()),{},{fields:t}))}},{key:"indexFields",value:function(t){return this.checkSortOrder({indexedFields:t}),new e(l(l({},this.toDefinition()),{},{indexedFields:t}))}},{key:"partialIndex",value:function(t){return this.checkSelectFields({partialFilter:t}),new e(l(l({},this.toDefinition()),{},{partialFilter:t}))}},{key:"sortBy",value:function(t){if(!Array.isArray(t))throw Error('Invalid sort, should be an array ([{ label: "desc"}, { name: "asc"}]), you passed '.concat(JSON.stringify(t),"."));return this.checkSortOrder({sort:t}),new e(l(l({},this.toDefinition()),{},{sort:t}))}},{key:"include",value:function(t){if(!Array.isArray(t))throw Error("include() takes an array of relationship names");return new e(l(l({},this.toDefinition()),{},{includes:t}))}},{key:"limitBy",value:function(t){return new e(l(l({},this.toDefinition()),{},{limit:t}))}},{key:"UNSAFE_noLimit",value:function(){return new e(l(l({},this.toDefinition()),{},{limit:null}))}},{key:"offset",value:function(t){return new e(l(l({},this.toDefinition()),{},{bookmark:void 0,cursor:void 0,skip:t}))}},{key:"offsetCursor",value:function(t){return new e(l(l({},this.toDefinition()),{},{bookmark:void 0,skip:void 0,cursor:t}))}},{key:"offsetBookmark",value:function(t){return new e(l(l({},this.toDefinition()),{},{skip:void 0,cursor:void 0,bookmark:t}))}},{key:"referencedBy",value:function(t){return new e(l(l({},this.toDefinition()),{},{referenced:t}))}},{key:"toDefinition",value:function(){return{doctype:this.doctype,id:this.id,ids:this.ids,selector:this.selector,fields:this.fields,indexedFields:this.indexedFields,partialFilter:this.partialFilter,sort:this.sort,includes:this.includes,referenced:this.referenced,limit:this.limit,skip:this.skip,cursor:this.cursor,bookmark:this.bookmark}}}]),e}();t.QueryDefinition=d;t.Q=function(e){return new d({doctype:e})};t.isAGetByIdQuery=function(e){if(!e)return!1;var t=Object.values(e);return 0!==t.length&&2===t.filter(function(e){return void 0!==e}).length&&void 0!==e.id};var f="CREATE_DOCUMENT",p="UPDATE_DOCUMENT",h="UPDATE_DOCUMENTS",v="DELETE_DOCUMENT",m="ADD_REFERENCES_TO",y="UPLOAD_FILE",g=function(e){return{mutationType:P.CREATE_DOCUMENT,document:e}};t.createDocument=g;var b=function(e){return{mutationType:P.UPDATE_DOCUMENT,document:e}};t.updateDocument=b;var w=function(e){return{mutationType:P.UPDATE_DOCUMENTS,documents:e}};t.updateDocuments=w;var k=function(e){return{mutationType:P.DELETE_DOCUMENT,document:e}};t.deleteDocument=k;var x=function(e,t){return{mutationType:P.ADD_REFERENCES_TO,referencedDocuments:t,document:e}};t.addReferencesTo=x;var O=function(e,t){return{mutationType:P.REMOVE_REFERENCES_TO,referencedDocuments:t,document:e}};t.removeReferencesTo=O;var C=function(e,t){return{mutationType:P.ADD_REFERENCED_BY,referencedDocuments:t,document:e}};t.addReferencedBy=C;var S=function(e,t){return{mutationType:P.REMOVE_REFERENCED_BY,referencedDocuments:t,document:e}};t.removeReferencedBy=S;var E=function(e,t){return{mutationType:P.UPLOAD_FILE,file:e,dirPath:t}};t.uploadFile=E;t.getDoctypeFromOperation=function(e){if(!e.mutationType)return e.doctype;var t=e.mutationType;switch(t){case f:case p:return e.document._type;case h:return e.documents[0]._type;case v:return e.document._type;case m:case y:throw Error("Not implemented");default:throw Error("Unknown mutationType ".concat(t))}};t.Mutations={createDocument:g,updateDocument:b,updateDocuments:w,deleteDocument:k,addReferencesTo:x,removeReferencesTo:O,addReferencedBy:C,removeReferencedBy:S,uploadFile:E};var P={CREATE_DOCUMENT:f,UPDATE_DOCUMENT:p,UPDATE_DOCUMENTS:h,DELETE_DOCUMENT:v,ADD_REFERENCES_TO:m,REMOVE_REFERENCES_TO:"REMOVE_REFERENCES_TO",ADD_REFERENCED_BY:"ADD_REFERENCED_BY",REMOVE_REFERENCED_BY:"REMOVE_REFERENCED_BY",UPLOAD_FILE:y};t.MutationTypes=P},20057:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(66604)),i=r(n(7739)),o=r(n(85564)),s=r(n(18446)),c=r(n(44908)),u=r(n(87185)),l=n(71450),d=function(e){var t=(0,i.default)(e,function(e){var t;return(t=e).id||t.ids?"idQueries":"others"}),n=t.idQueries,r=void 0===n?[]:n,a=t.others,d=r.length>0?new l.QueryDefinition({doctype:e[0].doctype,ids:(0,c.default)((0,o.default)(r.map(function(e){return e.id||e.ids})))}):[];return(0,u.default)(void 0===a?[]:a,s.default).concat(d)};t.default=function(e){var t=(0,i.default)(e,function(e){return e.doctype});return(0,o.default)(Object.values((0,a.default)(t,d)))}},10513:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.registryEndpoint=t.transformRegistryFormatToStackFormat=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(59713)),u=r(n(27361));n(35449);var l=r(n(47064)),d=n(20538);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.transformRegistryFormatToStackFormat=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:(0,u.default)(e,"latest_version.manifest.source"),attributes:(0,u.default)(e,"latest_version.manifest")},e)};t.registryEndpoint="/registry/";var p=function(e){var t=new URLSearchParams(e).toString();return t?"?".concat(t):""},h=function(e){var t=e.type,n=t===d.APP_TYPE.KONNECTOR||"node"===t?"konnectors":"apps";return"/".concat(n)},v=function(){var e,t,n;function r(e){if((0,o.default)(this,r),!e.client)throw Error("Need to pass a client to instantiate a Registry API.");this.client=e.client}return(0,s.default)(r,[{key:"installApp",value:(e=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s,c,u,d;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.slug,i=t.terms,o={},(s=t.installed)&&(o.PermissionsAcked=s),n&&(o.Source=n),c=p(o),!i){e.next=9;break}return e.next=9,l.default.save(this.client,i);case 9:return u=t.installed?"PUT":"POST",d=h(t),e.abrupt("return",this.client.stackClient.fetchJSON(u,"".concat(d,"/").concat(r).concat(c)));case 12:case"end":return e.stop()}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"uninstallApp",value:(t=(0,i.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.slug,r=h(t),e.abrupt("return",this.client.stackClient.fetchJSON("DELETE","".concat(r,"/").concat(n)));case 3:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"fetchApps",value:(n=(0,i.default)(a.default.mark(function e(t){var n,r,i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.channel,r=t.type,o=new URLSearchParams({limit:void 0===(i=t.limit)?"200":i,versionsChannel:n,latestChannelVersion:n}).toString(),r&&(o+="&filter[type]=".concat(r)),e.next=6,this.client.stackClient.fetchJSON("GET","/registry?".concat(o));case 6:return s=e.sent.data,e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"fetchAppsInMaintenance",value:function(){return this.client.stackClient.fetchJSON("GET","/registry/maintenance")}},{key:"fetchApp",value:function(e){return this.client.stackClient.fetchJSON("GET","/registry/".concat(e))}},{key:"fetchAppVersion",value:function(e){if(!e.slug)throw Error("Need to pass a slug to use fetchAppVersion");var t=e.slug,n=e.channel,r=e.version,a=n||r&&"latest"!==r?n:"stable",i="/registry/".concat(t,"/");return a?i+="".concat(a,"/").concat(r||"latest"):i+="".concat(r),this.client.stackClient.fetchJSON("GET",i)}}]),r}();t.default=v},94158:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndMergeDocument=t.getCollectionFromSlice=t.getDocumentFromSlice=t.default=t.mergeDocumentsWithRelationships=void 0;var a=r(n(59713)),i=r(n(24350)),o=r(n(27361)),s=r(n(18446)),c=r(n(57557)),u=r(n(82492)),l=r(n(22853)),d=n(76305),f=n(71450),p=n(22249),h=n(98829);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e,t){var n=t._type;if(!n)throw Error("Document without _type");if(!(0,h.properId)(t))throw Error("Document without id");var r=(0,o.default)(e,[n,(0,h.properId)(t)]);return(0,s.default)(r,t)?e:m(m({},e),{},(0,a.default)({},n,m(m({},e[n]),{},(0,a.default)({},(0,h.properId)(t),g(r,t)))))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=m(m({},e),t);return(e.relationships||t.relationships)&&(n.relationships=m(m({},e.relationships),t.relationships)),n};t.mergeDocumentsWithRelationships=g;t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!(0,d.isReceivingData)(t)&&!(0,p.isReceivingMutationResult)(t))return e;if(t&&t.definition&&t.definition.mutationType===f.MutationTypes.DELETE_DOCUMENT){var n=t.definition.document._id,r=t.definition.document._type;return m(m({},e),{},(0,a.default)({},r,(0,c.default)(e[r],n)))}var i=t.response,o=i.data,s=i.included;if(!o||Array.isArray(o)&&0===o.length)return e;var u=s?s.reduce(y,e):e;return Array.isArray(o)?b(o,u):y(u,o)};t.getDocumentFromSlice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(!t)throw Error("getDocumentFromSlice: Cannot retrieve document with undefined doctype");if(!n)throw Error("getDocumentFromSlice: Cannot retrieve document with undefined id");return e[t]?e[t][n]?e[t][n]:null:null};t.getCollectionFromSlice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t)throw Error("getDocumentFromSlice: Cannot retrieve document with undefined doctype");return e[t]?Object.values(e[t]):null};var b=function(e,t){var n=e[0]._type;if(!n)throw l.default.info("Document without _type",e[0]),Error("Document without _type");var r=(0,i.default)(e,h.properId),a=Object.assign({},t);return a[n]=Object.assign({},t[n]),Object.values(r).map(function(e){var t=(0,h.properId)(e);a[n][t]?a[n][t]=(0,u.default)({},a[n][t],e):a[n][t]=e}),a};t.extractAndMergeDocument=b},98829:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.properId=void 0;t.properId=function(e){return e.id||e._id}},65972:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"initQuery",{enumerable:!0,get:function(){return f.initQuery}}),Object.defineProperty(t,"loadQuery",{enumerable:!0,get:function(){return f.loadQuery}}),Object.defineProperty(t,"resetQuery",{enumerable:!0,get:function(){return f.resetQuery}}),Object.defineProperty(t,"receiveQueryResult",{enumerable:!0,get:function(){return f.receiveQueryResult}}),Object.defineProperty(t,"receiveQueryError",{enumerable:!0,get:function(){return f.receiveQueryError}}),Object.defineProperty(t,"executeQueryFromState",{enumerable:!0,get:function(){return f.executeQueryFromState}}),Object.defineProperty(t,"initMutation",{enumerable:!0,get:function(){return p.initMutation}}),Object.defineProperty(t,"receiveMutationResult",{enumerable:!0,get:function(){return p.receiveMutationResult}}),Object.defineProperty(t,"receiveMutationError",{enumerable:!0,get:function(){return p.receiveMutationError}}),Object.defineProperty(t,"getStateRoot",{enumerable:!0,get:function(){return h.getStateRoot}}),Object.defineProperty(t,"getCollectionFromState",{enumerable:!0,get:function(){return h.getCollectionFromState}}),Object.defineProperty(t,"getDocumentFromState",{enumerable:!0,get:function(){return h.getDocumentFromState}}),Object.defineProperty(t,"getQueryFromStore",{enumerable:!0,get:function(){return h.getQueryFromStore}}),Object.defineProperty(t,"getQueryFromState",{enumerable:!0,get:function(){return h.getQueryFromState}}),Object.defineProperty(t,"getRawQueryFromState",{enumerable:!0,get:function(){return h.getRawQueryFromState}}),Object.defineProperty(t,"isQueryExisting",{enumerable:!0,get:function(){return h.isQueryExisting}}),Object.defineProperty(t,"dispatchCreate",{enumerable:!0,get:function(){return v.dispatchCreate}}),Object.defineProperty(t,"dispatchUpdate",{enumerable:!0,get:function(){return v.dispatchUpdate}}),Object.defineProperty(t,"dispatchDelete",{enumerable:!0,get:function(){return v.dispatchDelete}}),t.resetState=t.createStore=t.default=t.StoreProxy=void 0;var i=a(n(59713)),o=a(n(34575)),s=a(n(93913)),c=a(n(71400)),u=n(70980),l=a(n(53894)),d=a(n(94158)),f=r(n(76305)),p=n(22249),h=n(76790),v=n(45330);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g="COZY_CLIENT.RESET_STATE";t.resetState=function(){return{type:g}};var b=function(){function e(t){(0,o.default)(this,e),this.state=t}return(0,s.default)(e,[{key:"readDocument",value:function(e,t){return this.state.documents[e][t]}},{key:"writeDocument",value:function(e){this.setState(function(t){return y(y({},t),{},{documents:y(y({},t.documents),{},(0,i.default)({},e._type,y(y({},t.documents[e._type]),{},(0,i.default)({},e._id,e))))})})}},{key:"setState",value:function(e){this.state=e(this.state)}},{key:"getState",value:function(){return this.state}}]),e}();t.StoreProxy=b;var w={documents:{},queries:{}},k=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments.length>1?arguments[1]:void 0,r=e.mark("combinedReducer");if(n.type==g)return e.measure({markName:r,measureName:"".concat(r," reset"),category:"CozyClientStore"}),w;if(!(0,f.isQueryAction)(n)&&!(0,p.isMutationAction)(n))return e.measure({markName:r,measureName:"".concat(r," no query nor mutate action"),category:"CozyClientStore"}),t;if(n.update){var a=new b(t);n.update(a,n.response);var i={documents:a.getState().documents,queries:(0,f.default)(e,a.getState().queries,n,a.getState().documents)};return e.measure({markName:r,measureName:"".concat(r," update action"),category:"CozyClientStore"}),i}var o=(0,d.default)(t.documents,n),s=o!==t.documents,c={documents:o,queries:(0,f.default)(e,t.queries,n,o,s)};return e.measure({markName:r,measureName:"".concat(r," queries"),category:"CozyClientStore"}),c}};t.default=k;var x=(0,c.default)("debug")&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.compose;t.createStore=function(e){return(0,u.createStore)((0,u.combineReducers)({cozy:k(e)}),x((0,u.applyMiddleware)(l.default)))}},22249:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.receiveMutationError=t.receiveMutationResult=t.initMutation=t.isReceivingMutationResult=t.isMutationAction=void 0;var a=r(n(59713));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s="INIT_MUTATION",c="RECEIVE_MUTATION_RESULT",u="RECEIVE_MUTATION_ERROR";t.isMutationAction=function(e){return -1!==[s,c,u].indexOf(e.type)};t.isReceivingMutationResult=function(e){return e.type===c};t.initMutation=function(e,t){return{type:s,mutationId:e,definition:t}};t.receiveMutationResult=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o(o({type:c,mutationId:e,response:t},n),{},{definition:r})};t.receiveMutationError=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:u,mutationId:e,error:t,definition:n}}},76305:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.QueryIDGenerator=t.getQueryFromSlice=t.resetQuery=t.receiveQueryError=t.receiveQueryResult=t.loadQuery=t.initQuery=t.default=t.updateData=t.makeSorterFromDefinition=t.executeQueryFromState=t.mergeSelectorAndPartialIndex=t.convert$gtNullSelectors=t.sortAndLimitDocsIds=t.isReceivingData=t.isQueryAction=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(63038)),s=r(n(59713)),c=r(n(319)),u=r(n(66604)),l=r(n(7739)),d=r(n(91966)),f=r(n(25325)),p=r(n(57043)),h=r(n(68630)),v=r(n(44908)),m=r(n(75472)),y=r(n(47037)),g=r(n(27361)),b=r(n(14328)),w=r(n(71400)),k=n(94158),x=n(22249),O=n(98829),C=n(71450),S=r(n(22853)),E=n(76790);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A="INIT_QUERY",R="LOAD_QUERY",D="RECEIVE_QUERY_RESULT",M="RECEIVE_QUERY_ERROR",T="RESET_QUERY",j=(0,w.default)("debug"),N=function(e){return -1!==[A,R,D,M,T].indexOf(e.type)};t.isQueryAction=N;t.isReceivingData=function(e){return e.type===D};var I={id:null,definition:null,fetchStatus:"pending",isFetching:null,lastFetch:null,lastUpdate:null,lastErrorUpdate:null,lastError:null,hasMore:!1,count:0,fetchedPagesCount:0,data:[],bookmark:null},L=function(e,t,n,r){var a,i=r.count,o=r.fetchedPagesCount,s=(0,c.default)(n);if(e.definition.sort&&t){var u=W(e.definition),l=t[e.definition.doctype];s=u(l?s.map(function(e){return l[e]}).filter(Boolean):[]).map(O.properId)}var d=e.definition.limit;return d&&(a=i<d?o>1?d*(o-1)+i:i:d*o,s=s.slice(0,a)),s};t.sortAndLimitDocsIds=L;var z=function(e,t,n,r){var a=r.count,i=r.fetchedPagesCount,o=(0,v.default)([].concat((0,c.default)(e.data),(0,c.default)(t.data.map(O.properId))));return L(e,n,o,{count:a,fetchedPagesCount:i})},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;switch(n.type){case A:if(t.lastUpdate&&t.id===n.queryId&&t.definition===n.queryDefinition)return t;return _(_({},t),{},{id:n.queryId,definition:n.queryDefinition,options:n.options,fetchStatus:t.lastUpdate?t.fetchStatus:"pending"});case R:if("loading"===t.fetchStatus)return t;if("loaded"===t.fetchStatus&&n.backgroundFetching)return _(_({},t),{},{fetchStatus:"loaded",isFetching:!0});return _(_({},t),{},{fetchStatus:"loading"});case D:var a=e.mark("RECEIVE_QUERY_RESULT"),i=n.response;if(!i.data)return e.measure({markName:a,measureName:"".concat(a," with no data"),category:"CozyClientStore"}),_(_({},t),{},{fetchStatus:"loaded",isFetching:!n.backgroundFetching&&null,lastFetch:Date.now(),lastUpdate:Date.now()});var o=_({fetchStatus:"loaded",isFetching:!n.backgroundFetching&&null,lastFetch:Date.now(),lastUpdate:Date.now()},j&&{execution_stats:i.execution_stats});if(!Array.isArray(i.data))return e.measure({markName:a,measureName:"".concat(a," with object"),category:"CozyClientStore"}),_(_(_({},t),o),{},{hasMore:!1,count:1,data:[(0,O.properId)(i.data)]});var s=i.meta&&i.meta.count?i.meta.count:i.data.length;if(n.backgroundFetching)return e.measure({markName:a,measureName:"".concat(a," with background fetching"),category:"CozyClientStore"}),_(_(_({},t),o),{},{bookmark:i.bookmark||null,hasMore:void 0!==i.next?i.next:t.hasMore,count:s,data:i.data.map(O.properId)});var c=t.fetchedPagesCount+1,u=z(t,i,r,{count:s,fetchedPagesCount:c});return e.measure({markName:a,measureName:"".concat(a," default"),category:"CozyClientStore"}),_(_(_({},t),o),{},{bookmark:i.bookmark||null,hasMore:void 0!==i.next?i.next:t.hasMore,count:s,fetchedPagesCount:c,data:u});case M:return _(_({},t),{},{id:n.queryId,fetchStatus:"failed",isFetching:!n.backgroundFetching&&null,lastError:n.error,lastErrorUpdate:Date.now()});case T:return _(_({},I),{},{id:n.queryId,definition:t.definition,options:t.options});default:return t}},B=function e(t){for(var n={},r=0,a=Object.entries(t);r<a.length;r++){var i=(0,o.default)(a[r],2),s=i[0],c=i[1],u=(0,h.default)(c)?e(c):c;n["$gt"===s&&null===u?"$gtnull":s]=u}return n};t.convert$gtNullSelectors=B;var F=function(e){return _(_({},(0,g.default)(e,"selector")),(0,g.default)(e,"partialFilter"))};t.mergeSelectorAndPartialIndex=F;var U=function(e){if(e.selector||e.partialFilter){var t=F(e);return b.default.use({$gtnull:function(e,t){return!!t}}),(0,b.default)(B(t))}if(e.id){var n={_id:e.id};return(0,b.default)(n)}if(!e.ids)return null;else{var r={_id:{$in:e.ids}};return(0,b.default)(r)}};t.executeQueryFromState=function(e,t){var n=(0,E.getCollectionFromState)(e,t.doctype),r=!!t.id;if(!n)return{data:r?null:[]};var a=n.filter(V(t));return r?{data:a.length>0?a[0]:null}:{data:W(t)(a)}};var V=function(e){var t=e.doctype,n=U(e);return function(e){return e._type===t&&!e._deleted&&(!n||!!n(e))}},H=function(e){return function(t){var n=(0,g.default)(t,e);return(0,y.default)(n)?n.toLowerCase():n}},W=function(e){var t=e.sort;if(!t)return function(e){return e};if(!Array.isArray(e.sort))return S.default.warn("Correct update of queries with a sort that is not an array is not supported. Use an array as argument of QueryDefinition::sort"),function(e){return e};var n=t.map(function(e){return Object.entries(e)[0]}),r=n.map(function(e){return e[0]}).map(H),a=n.map(function(e){return e[1]});return function(e){return(0,m.default)(e,r,a)}};t.makeSorterFromDefinition=W;var q=function(e,t,n){var r=V(e.definition),a=(0,u.default)((0,l.default)(t,r),function(e){return e.map(O.properId)}),i=a.true,o=void 0===i?[]:i,s=a.false,c=e.data,h=e.options&&e.options.autoUpdate,v=!h||!1!==h.remove,m=!h||!1!==h.add,y=!h||!1!==h.update,g=v?(0,f.default)(c,void 0===s?[]:s):[],b=m?(0,d.default)(o,c):[],w=y?(0,f.default)(c,o):[],k=g.length||b.length||w.length,x=(0,d.default)((0,p.default)(c,b),g),C=e.fetchedPagesCount,S=L(e,n,x,{count:x.length,fetchedPagesCount:C});return _(_({},e),{},{data:S,count:S.length,fetchedPagesCount:C,lastUpdate:k?Date.now():e.lastUpdate})};t.updateData=q;var G=function(e,t){return function(n){var r=(0,g.default)(e,"response.data")||(0,g.default)(e,"definition.document");return r?(!Array.isArray(r)&&(r=[r]),r.length&&n.definition.doctype===r[0]._type)?q(n,r,t):n:n}};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=!(arguments.length>4)||void 0===arguments[4]||arguments[4];if(n.type==A){var i=Z(e,t[n.queryId],n,r);return i===t[n.queryId]?t:_(_({},t),{},(0,s.default)({},n.queryId,i))}if(N(n)){var o=G(n,r);return(0,u.default)(t,function(t){return t.id==n.queryId?Z(e,t,n,r):a?o(t):t})}if((0,x.isReceivingMutationResult)(n)){var c,l,d=n.updateQueries?(c=n,l=r,function(e){var t=c.updateQueries,n=c.response,r=t[e.id];if(!r)return e;var a=r(K(l,e.definition.doctype,e.data),n).map(O.properId);return _(_({},e),{},{data:a,count:a.length,lastUpdate:Date.now()})}):G(n,r);return(0,u.default)(t,d)}return t};t.initQuery=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t.doctype)throw Error("Cannot init query with no doctype");return{type:A,queryId:e,queryDefinition:t,options:n}};t.loadQuery=function(e,t){return _({type:R,queryId:e},t)};t.receiveQueryResult=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _({type:D,queryId:e,response:t},n)};t.receiveQueryError=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _({type:M,queryId:e,error:t},n)};t.resetQuery=function(e){return{type:T,queryId:e}};var K=function(e,t,n){return n.map(function(n){return(0,k.getDocumentFromSlice)(e,t,n)})};t.getQueryFromSlice=function(e,t,n){if(!e||!e[t])return _(_({},I),{},{id:t,data:null});var r=e[t];return n?_(_({},r),{},{data:K(n,r.definition.doctype,r.data)}):r};var Q=function(){function e(){(0,a.default)(this,e),this.idCounter=1}return(0,i.default)(e,[{key:"generateRandomId",value:function(){var e=this.idCounter;return this.idCounter++,e.toString()}},{key:"generateId",value:function(e){if(!(0,C.isAGetByIdQuery)(e))return this.generateRandomId();var t=e.id,n=e.doctype;return"".concat(n,"/").concat(t)}}]),e}();t.QueryIDGenerator=Q,Q.UNNAMED="unnamed"},45330:function(e,t,n){"use strict";var r,a,i,o,s=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchDelete=t.dispatchUpdate=t.dispatchCreate=void 0;var c=s(n(87757)),u=s(n(48926)),l=s(n(59713)),d=n(71450),f=n(22249);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(e,t){return h({id:e._id,_type:t},e)};var m=(r=(0,u.default)(c.default.mark(function e(t,n){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof n.enhanceDocFn){e.next=4;break}return e.next=3,n.enhanceDocFn(t,{client:n.client});case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)}),y=function(e,t,n){e.dispatch((0,f.receiveMutationResult)(e.generateRandomId(),{data:t},{},n(t)))};var g=(a=(0,u.default)(c.default.mark(function e(t,n,r){var a,i,o=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},i=v(r,n),e.next=4,m(i,{client:t,enhanceDocFn:null==a?void 0:a.enhanceDocFn});case 4:y(t,e.sent,d.Mutations.createDocument);case 6:case"end":return e.stop()}},e)})),function(e,t,n){return a.apply(this,arguments)});t.dispatchCreate=g;var b=(i=(0,u.default)(c.default.mark(function e(t,n,r){var a,i,o=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},i=v(r,n),e.next=4,m(i,{client:t,enhanceDocFn:null==a?void 0:a.enhanceDocFn});case 4:y(t,e.sent,d.Mutations.updateDocument);case 6:case"end":return e.stop()}},e)})),function(e,t,n){return i.apply(this,arguments)});t.dispatchUpdate=b;var w=(o=(0,u.default)(c.default.mark(function e(t,n,r){var a,i,o=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},i=v(h(h({},r),{},{_deleted:!0}),n),e.next=4,m(i,{client:t,enhanceDocFn:null==a?void 0:a.enhanceDocFn});case 4:y(t,e.sent,d.Mutations.deleteDocument);case 6:case"end":return e.stop()}},e)})),function(e,t,n){return o.apply(this,arguments)});t.dispatchDelete=w},76790:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQueryExisting=t.getRawQueryFromState=t.getQueryFromState=t.getQueryFromStore=t.getDocumentFromState=t.getCollectionFromState=t.getStateRoot=void 0;var r=n(94158),a=n(76305),i=function(e){return e.cozy||{}};t.getStateRoot=i;t.getCollectionFromState=function(e,t){return(0,r.getCollectionFromSlice)(i(e).documents,t)};t.getDocumentFromState=function(e,t,n){return(0,r.getDocumentFromSlice)(i(e).documents,t,n)};t.getQueryFromStore=function(e,t){return o(e.getState(),t)};var o=function(e,t){return(0,a.getQueryFromSlice)(i(e).queries,t,i(e).documents)};t.getQueryFromState=o;t.getRawQueryFromState=function(e,t){return(0,a.getQueryFromSlice)(i(e).queries,t)};t.isQueryExisting=function(e,t){return void 0!==i(e).queries[t]}},47064:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(59713)),o=r(n(6479)),s=r(n(48926));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l="io.cozy.terms";function d(){return(d=(0,s.default)(a.default.mark(function e(t,n){var r,i,s,c,d,f;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=(0,o.default)(n,["id"]),e.next=3,t.query({doctype:l,selector:{termsId:r,version:i.version},limit:1});case 3:if(!((s=e.sent.data)&&s.length)){e.next=13;break}if(!((c=s[0]).termsId==r&&c.version==i.version&&c.url!=i.url)){e.next=11;break}return d=u(u({_type:l},c),{},{url:i.url}),e.next=11,t.save(d);case 11:e.next=16;break;case 13:return f=u(u({_type:l},i),{},{termsId:r,accepted:!0,acceptedAt:new Date}),e.next=16,t.save(f);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.default={save:function(e,t){return d.apply(this,arguments)}}},325:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CozyClient=void 0;var a=r(n(2205)),i=r(n(78585)),o=r(n(29754)),s=r(n(34575)),c=function(e){(0,a.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,o.default)(t);return e=n?Reflect.construct(r,arguments,(0,o.default)(this).constructor):r.apply(this,arguments),(0,i.default)(this,e)});function c(){return(0,s.default)(this,c),r.apply(this,arguments)}return c}(function e(t){(0,s.default)(this,e),Object.assign(this,t)});t.CozyClient=c},41315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(71450);t.default={}},88930:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isReactNativeOfflineError=t.hasQueriesBeenLoaded=t.isQueriesLoading=t.hasQueryBeenLoaded=t.isQueryLoading=t.cancelable=void 0;var a=r(n(22853));t.cancelable=function(e){var t,n=new Promise(function(n,r){t=r,e.then(n),e.catch(r)});return n.cancel=function(){t({canceled:!0})},n};var i=function(e){return e?"loading"===e.fetchStatus||"pending"===e.fetchStatus:(a.default.warn("isQueryLoading called on falsy value."),!1)};t.isQueryLoading=i;var o=function(e){return e.lastFetch};t.hasQueryBeenLoaded=o;t.isQueriesLoading=function(e){return Object.values(e).some(function(e){return i(e)})};t.hasQueriesBeenLoaded=function(e){return Object.values(e).some(function(e){return o(e)})};t.isReactNativeOfflineError=function(e){return"Network request failed"===e.message}},43592:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(67154)),o=a(n(34575)),s=a(n(93913)),c=a(n(81506)),u=a(n(2205)),l=a(n(78585)),d=a(n(29754)),f=a(n(59713)),p=r(n(67294)),h=a(n(45697));t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.displayName||n.name||"Component",a=function(a){(0,u.default)(y,a);var h,v,m=(h=y,v=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,d.default)(h);return e=v?Reflect.construct(t,arguments,(0,d.default)(this).constructor):t.apply(this,arguments),(0,l.default)(this,e)});function y(n,a){var i;if((0,o.default)(this,y),i=m.call(this,n,a),(0,f.default)((0,c.default)(i),"mutate",function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return i.client.mutate(e.apply(null,r),t)}),i.client=n.client||a.client,!i.client)throw Error('Could not find "client" in either the context or props of '.concat(r));return i}return(0,s.default)(y,[{key:"render",value:function(){var e=(0,f.default)({},t.name||"mutate",this.mutate);return p.default.createElement(n,(0,i.default)({},e,this.props))}}]),y}(p.Component);return(0,f.default)(a,"contextTypes",{client:h.default.object}),a.displayName="WithMutation(".concat(r,")"),a}}},18428:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(67154)),o=a(n(34575)),s=a(n(93913)),c=a(n(2205)),u=a(n(78585)),l=a(n(29754)),d=a(n(59713)),f=a(n(319)),p=a(n(82492)),h=r(n(67294)),v=a(n(45697)),m=a(n(22853));function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=e.displayName||e.name||"Component",r=function(r){(0,c.default)(b,r);var a,v,g=(a=b,v=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,l.default)(a);return e=v?Reflect.construct(t,arguments,(0,l.default)(this).constructor):t.apply(this,arguments),(0,u.default)(this,e)});function b(e,r){(0,o.default)(this,b),c=g.call(this,e,r);var a,i,s,c,u=e.client||r.client;if(m.default.warn("Deprecation: withMutations will be removed in the near future, prefer to use withClient to access the client. See https://github.com/cozy/cozy-client/pull/638 for more information."),!u)throw Error('Could not find "client" in either the context or props of '.concat(n));return c.mutations=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,d.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({createDocument:u.create.bind(u),saveDocument:u.save.bind(u),deleteDocument:u.destroy.bind(u)},(a=t,i=u,s=e,p.default.apply(void 0,(0,f.default)(a.map(function(e){return"function"==typeof e?e(i,s):e}))))),c}return(0,s.default)(b,[{key:"render",value:function(){return h.default.createElement(e,(0,i.default)({},this.mutations,this.props))}}]),b}(h.Component);return(0,d.default)(r,"contextTypes",{client:v.default.object}),r.displayName="WithMutations(".concat(n,")"),r}}},51223:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=function(){function e(t){(0,a.default)(this,e);var n=t;"string"==typeof n&&(n=JSON.parse(n)),this.tokenType=n.token_type||n.tokenType,this.accessToken=n.access_token||n.accessToken,this.refreshToken=n.refresh_token||n.refreshToken,this.scope=n.scope}return(0,i.default)(e,[{key:"toAuthHeader",value:function(){return"Bearer "+this.accessToken}},{key:"toBasicAuth",value:function(){return"user:".concat(this.accessToken,"@")}},{key:"toJSON",value:function(){return{tokenType:this.tokenType,accessToken:this.accessToken,refreshToken:this.refreshToken,scope:this.scope}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"getAccessToken",value:function(){return this.accessToken}}]),e}();t.default=o},10518:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.normalizeApp=t.APPS_DOCTYPE=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(2205)),u=r(n(78585)),l=r(n(29754)),d=r(n(59713)),f=r(n(27361)),p=n(10513),h=r(n(17647)),v=r(n(7843)),m=n(29460);n(89941);var y=r(n(58861));function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,d.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k="io.cozy.apps";t.APPS_DOCTYPE=k;var x=function(e,t){return w(w({},(0,m.normalizeDoctypeJsonApi)(t)(e)),{},{id:e.id})};t.normalizeApp=x;var O=function(e){(0,c.default)(O,e);var t,n,r,d,v,m,b,w=(t=O,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);return e=n?Reflect.construct(r,arguments,(0,l.default)(this).constructor):r.apply(this,arguments),(0,u.default)(this,e)});function O(e){var t;return(0,o.default)(this,O),(t=w.call(this,k,e)).endpoint="/apps/",t}return(0,s.default)(O,[{key:"get",value:(r=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s,c,u,l,d,v=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.indexOf("/")>-1?r=t.split("/")[1]:(y.default.warn("Deprecated: in next versions of cozy-client, it will not be possible to query apps/konnectors only with id, please use the form ".concat(this.doctype,"/").concat(t,"\n\n- Q('io.cozy.apps').getById('banks')\n+ Q('io.cozy.apps').getById('io.cozy.apps/banks')")),r=t),!(n&&n.sources&&(!Array.isArray(n.sources)||0===n.sources.length))){e.next=3;break}throw Error('Invalid "sources" attribute passed in query, please use an array with at least one element.');case 3:i=(0,f.default)(n,"sources",["stack"]),o={stack:function(){return h.default.get(v.stackClient,"".concat(v.endpoint).concat(encodeURIComponent(r)),{normalize:function(e){return x(e,v.doctype)}})},registry:function(){return v.stackClient.fetchJSON("GET",p.registryEndpoint+r)}},s=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}}}(i),e.prev=6,s.s();case 8:if((c=s.n()).done){e.next=27;break}return u=c.value,e.prev=10,e.next=13,o[u]();case 13:if(l=e.sent,!("registry"!==u)){e.next=16;break}return e.abrupt("return",l);case 16:return y.default.warn("The use of source registry is deprecated since it can polute the io.cozy.apps slice. For exemple, if we request data from the registry, than the app will be present in the io.cozy.apps slice and then the isInstalled() will return true.\n\n            Use Q('io.cozy.apps_registry) instead"),d=(0,p.transformRegistryFormatToStackFormat)(l),e.abrupt("return",{data:x(d,this.doctype)});case 21:if(e.prev=21,e.t0=e.catch(10),u!==i[i.length-1]){e.next=25;break}throw e.t0;case 25:e.next=8;break;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(6),s.e(e.t1);case 32:return e.prev=32,s.f(),e.finish(32);case 35:case"end":return e.stop()}},e,this,[[6,29,32,35],[10,21]])})),function(e,t){return r.apply(this,arguments)})},{key:"all",value:(d=(0,i.default)(a.default.mark(function e(){var t,n=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",this.endpoint);case 2:return t=e.sent,e.abrupt("return",{data:t.data.map(function(e){return x(e,n.doctype)}),meta:{count:t.meta.count},skip:0,next:!1});case 4:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"create",value:(v=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("create() method is not available for applications");case 1:case"end":return e.stop()}},e)})),function(){return v.apply(this,arguments)})},{key:"update",value:(m=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("update() method is not available for applications");case 1:case"end":return e.stop()}},e)})),function(){return m.apply(this,arguments)})},{key:"destroy",value:(b=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("destroy() method is not available for applications");case 1:case"end":return e.stop()}},e)})),function(){return b.apply(this,arguments)})}]),O}(v.default);O.normalizeDoctype=m.normalizeDoctypeJsonApi;t.default=O},31545:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=function(){function e(t){(0,a.default)(this,e),this.token=t||""}return(0,i.default)(e,[{key:"toAuthHeader",value:function(){return"Bearer "+this.token}},{key:"toBasicAuth",value:function(){return"user:".concat(this.token,"@")}},{key:"getAccessToken",value:function(){return this.token}}]),e}();t.default=o},78553:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.normalizeAppFromRegistry=t.APPS_REGISTRY_DOCTYPE=void 0;var i=a(n(34575)),o=a(n(93913)),s=a(n(2205)),c=a(n(78585)),u=a(n(29754)),l=a(n(87757)),d=a(n(48926)),f=a(n(59713)),p=a(n(7843)),h=n(29460);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y="io.cozy.apps_registry";t.APPS_REGISTRY_DOCTYPE=y;var g=function(e,t){var n,r="".concat("webapp"===e.type?"io.cozy.apps":"io.cozy.konnectors","/").concat(e.slug),a=m(m({},e.attributes),null===(n=e.latest_version)||void 0===n?void 0:n.manifest);return m({},(0,h.normalizeDoc)(m(m({},e),{},{attributes:a,id:r,_id:r}),t))};t.normalizeAppFromRegistry=g;var b=(r=(0,d.default)(l.default.mark(function e(t,n,r){var a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fetchJSON("GET","/registry?versionsChannel=".concat(t,"&filter[type]=konnector&limit=500"));case 2:return a=e.sent,e.abrupt("return",{data:a.data.map(function(e){return g(e,n)})});case 4:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)}),w=function(e){(0,s.default)(h,e);var t,n,r,a,f,p=(t=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function h(e){var t;return(0,i.default)(this,h),(t=p.call(this,y,e)).endpoint="/registry/",t}return(0,o.default)(h,[{key:"get",value:(r=(0,d.default)(l.default.mark(function e(t){var n,r,a=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.startsWith("konnectors/")){e.next=3;break}return n=t.split("/")[1],e.abrupt("return",b(n,this.doctype,this.stackClient));case 3:return e.next=5,this.stackClient.fetchJSON("GET","".concat(this.endpoint).concat(t));case 5:if(r=e.sent,"maintenance"!==t){e.next=8;break}return e.abrupt("return",{data:r.map(function(e){return g(e,a.doctype)})});case 8:return e.abrupt("return",{data:g(r,this.doctype)});case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"create",value:(a=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("create() method is not available for AppsRegistryCollection");case 1:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)})},{key:"destroy",value:(f=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("destroy() method is not available for AppsRegistryCollection");case 1:case"end":return e.stop()}},e)})),function(){return f.apply(this,arguments)})}]),h}(p.default);t.default=w},17647:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Collection=t.isDocumentUpdateConflict=t.isTimeoutError=t.isNoUsableIndexError=t.isIndexNotUsedWarning=t.isIndexConflictError=t.isIndexNotFoundError=t.dontThrowNotFoundError=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913));n(15155);var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.message.match(/not_found/))return Array.isArray(t)?{data:t,meta:{count:0},skip:0,next:!1}:{data:t};throw e};t.dontThrowNotFoundError=c;t.isIndexNotFoundError=function(e){return e.message.match(/no_index/)};t.isIndexConflictError=function(e){return e.message.match(/error_saving_ddoc/)};t.isIndexNotUsedWarning=function(e){return e.match(/was not used because it does not contain a valid index for this query/)};t.isNoUsableIndexError=function(e){return e.message.match(/no_usable_index/)};t.isTimeoutError=function(e){return e.message.match(/context deadline exceeded/)};t.isDocumentUpdateConflict=function(e){return e.message.match(/Document update conflict/)};var u=function(){var e;function t(){(0,o.default)(this,t)}return(0,s.default)(t,null,[{key:"get",value:(e=(0,i.default)(a.default.mark(function e(t,n,r){var i,o,s,u,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0===(i=r.normalize)?function(e,t){return e}:i,u=void 0===(s=r.method)?"GET":s,e.prev=1,e.next=4,t.fetchJSON(u,n);case 4:return l=e.sent,e.abrupt("return",{data:o(l.data,l)});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",c(e.t0,null));case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(t,n,r){return e.apply(this,arguments)})}]),t}();t.Collection=u;t.default=u},43200:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CONTACTS_DOCTYPE=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(16525)),u=r(n(2205)),l=r(n(78585)),d=r(n(29754)),f=r(n(59713)),p=r(n(7843)),h=n(29460);n(41315);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y="io.cozy.contacts";t.CONTACTS_DOCTYPE=y;var g=(0,h.normalizeDoctypeJsonApi)(y),b=function(e){var t;return m(m({},g(e)),{},{_rev:null==e?void 0:null===(t=e.meta)||void 0===t?void 0:t.rev})},w=function(e){(0,u.default)(v,e);var t,n,r,f,p,h=(t=v,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);return e=n?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function v(){return(0,o.default)(this,v),h.apply(this,arguments)}return(0,s.default)(v,[{key:"find",value:(r=(0,i.default)(a.default.mark(function e(t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0!==t&&1===Object.values(t).length&&!0==t.me)){e.next=4;break}return e.abrupt("return",this.findMyself());case 4:return e.abrupt("return",(0,c.default)((0,d.default)(v.prototype),"find",this).call(this,t,n));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"findMyself",value:(f=(0,i.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST","/contacts/myself");case 2:return t={data:[b(e.sent.data)],next:!1,meta:null,bookmark:!1},e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)})),function(){return f.apply(this,arguments)})},{key:"destroy",value:(p=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys((null==t?void 0:null===(n=t.cozyMetadata)||void 0===n?void 0:n.sync)||{}).length>0)){e.next=6;break}return e.abrupt("return",(0,c.default)((0,d.default)(v.prototype),"update",this).call(this,m(m({},t),{},{trashed:!0})));case 6:return e.abrupt("return",(0,c.default)((0,d.default)(v.prototype),"destroy",this).call(this,t));case 7:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})}]),v}(p.default);t.default=w},73554:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(59713)),c=a(n(34575)),u=a(n(93913)),l=a(n(50361)),d=r(n(10518)),f=a(n(31545));a(n(51223));var p=a(n(7843)),h=a(n(77880)),v=r(n(59942)),m=r(n(8852)),y=a(n(20870)),g=a(n(81391)),b=r(n(83499)),w=r(n(15757)),k=r(n(70918)),x=r(n(23385)),O=r(n(54033)),C=r(n(43200)),S=r(n(78553)),E=a(n(9843)),P=a(n(12499)),_=n(81989),A=a(n(37203)),R=r(n(89941)),D=a(n(58861)),M=a(n(68786)),T=n(88560);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=function(e){var t=e;if(null===t)return null;for(;"/"===t[t.length-1];)t=t.slice(0,-1);return t},L=function(){var e,t,r,a;function s(e){(0,c.default)(this,s);var t=N({},e),n=t.token,r=t.uri;this.options=t,this.setUri(void 0===r?"":r),this.setToken(n),this.konnectors=new m.default(this),this.jobs=new v.default(this),this._promiseCache=new M.default}return(0,u.default)(s,[{key:"isRevocationError",value:function(e){return(null==e?!!void 0:!!e.message)&&(!!(R.default.CLIENT_NOT_FOUND.test(e.message)||R.default.UNREGISTERED_CLIENT.test(e.message))||void 0)}},{key:"collection",value:function(e){if(!e)throw Error("CozyStackClient.collection() called without a doctype");switch(e){case d.APPS_DOCTYPE:return new d.default(this);case m.KONNECTORS_DOCTYPE:return new m.default(this);case"io.cozy.files":return new h.default(e,this);case"io.cozy.sharings":return new y.default(e,this);case"io.cozy.permissions":return new g.default(e,this);case C.CONTACTS_DOCTYPE:return new C.default(e,this);case b.TRIGGERS_DOCTYPE:return new b.default(this);case v.JOBS_DOCTYPE:return new v.default(this);case w.SETTINGS_DOCTYPE:return new w.default(this);case k.NOTES_DOCTYPE:return new k.default(this);case x.OAUTH_CLIENTS_DOCTYPE:return new x.default(this);case O.SHORTCUTS_DOCTYPE:return new O.default(this);case S.APPS_REGISTRY_DOCTYPE:return new S.default(this);case T.NEXTCLOUD_FILES_DOCTYPE:return new T.NextcloudFilesCollection(this);default:return new p.default(e,this)}}},{key:"fetch",value:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=(0,o.default)(i.default.mark(function e(t,n,r){var a,o,s,c,u,l,d=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(o=N({},a=d.length>3&&void 0!==d[3]?d[3]:{})).method=t,s=o.headers=N({},a.headers),"GET"!==t&&"HEAD"!==t&&void 0!==r&&s["Content-Type"]&&(o.body=r),!s.Authorization&&(s.Authorization=this.getAuthorizationHeader()),o.credentials=o.credentials||"include",c=this.fullpath(n),u=(0,_.shouldXMLHTTPRequestBeUsed)(t,n,o)?_.fetchWithXMLHttpRequest:fetch,e.prev=9,e.next=12,u(c,o);case 12:return!(l=e.sent).ok&&this.emit("error",new R.FetchError(l,"".concat(l.status," ").concat(l.statusText))),e.abrupt("return",l);case 17:throw e.prev=17,e.t0=e.catch(9),this.isRevocationError(e.t0)&&this.onRevocationChange(!0),e.t0;case 21:case"end":return e.stop()}},e,this,[[9,17]])})),function(t,n,r){return e.apply(this,arguments)}))},{key:"onTokenRefresh",value:function(e){this.options&&this.options.onTokenRefresh&&this.options.onTokenRefresh(e)}},{key:"onRevocationChange",value:function(e){this.options&&this.options.onRevocationChange&&this.options.onRevocationChange(e)}},{key:"refreshToken",value:(t=(0,o.default)(i.default.mark(function e(){var t,r,a,o,s,c,u,l;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.token){e.next=2;break}throw Error("Cannot refresh an empty token");case 2:if(t={method:"GET",credentials:"include"},n.g.document){e.next=5;break}throw Error("Not in a web context, cannot refresh token");case 5:return e.next=7,fetch("/?refreshToken",t);case 7:if((r=e.sent).ok){e.next=10;break}throw Error("couldn't fetch a new token - response "+r.statusCode);case 10:return e.next=12,r.text();case 12:if(a=e.sent,o=new DOMParser().parseFromString(a,"text/html")){e.next=17;break}throw Error("couldn't fetch a new token - doc is not html");case 17:if(s=o.querySelector('div[role="application"]')){e.next=20;break}throw Error("couldn't fetch a new token - no div[role=application]");case 20:if((u=(c=s.dataset.cozy?JSON.parse(s.dataset.cozy):N({},s.dataset)).token)&&(u=u||c.cozyToken),u){e.next=25;break}throw Error("couldn't fetch a new token -- missing data-cozy or data-cozy-token attribute");case 25:return l=new f.default(u),this.setToken(l),this.onTokenRefresh(l),e.abrupt("return",l);case 29:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"fetchJSON",value:(r=(0,o.default)(i.default.mark(function e(t,n,r){var a=this,o,s=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>3&&void 0!==s[3]?s[3]:{},e.prev=1,e.next=4,this.fetchJSONWithCurrentToken(t,n,r,o);case 4:case 20:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!(R.default.EXPIRED_TOKEN.test(e.t0.message)||R.default.INVALID_TOKEN.test(e.t0.message)||R.default.INVALID_TOKEN_ALT.test(e.t0.message))){e.next=23;break}return e.prev=10,e.next=13,this._promiseCache.exec(function(){return a.refreshToken()},function(){return"refreshToken"});case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(10),e.t0;case 18:return e.next=20,this.fetchJSONWithCurrentToken(t,n,r,o);case 23:throw e.t0;case 24:case"end":return e.stop()}},e,this,[[1,7],[10,15]])})),function(e,t,n){return r.apply(this,arguments)})},{key:"fetchJSONWithCurrentToken",value:(a=(0,o.default)(i.default.mark(function e(t,n,r){var a,o,s,c,u,d,f,p,h=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:{},(s=(o=(0,l.default)(a)).headers=o.headers||{}).Accept="application/json",c=r,"GET"!==t&&"HEAD"!==t&&void 0!==c&&!s["Content-Type"]&&(s["Content-Type"]="application/json",c=JSON.stringify(c)),e.next=8,this.fetch(t,n,c,o);case 8:return f=(d=(u=e.sent).headers.get("content-type"))&&d.indexOf("json")>=0,e.next=13,f?u.json():u.text();case 13:if(p=e.sent,!u.ok){e.next=16;break}return e.abrupt("return",p);case 16:throw new R.FetchError(u,p);case 17:case"end":return e.stop()}},e,this)})),function(e,t,n){return a.apply(this,arguments)})},{key:"fullpath",value:function(e){return e.startsWith("http")?e:this.uri+e}},{key:"getAuthorizationHeader",value:function(){return this.token?this.token.toAuthHeader():null}},{key:"setCredentials",value:function(e){return(0,P.default)("CozyStackClient::setCredentials is deprecated, use CozyStackClient::setToken"),this.setToken(e)}},{key:"getCredentials",value:function(){return(0,P.default)("CozyStackClient::getCredentials is deprecated, use CozyStackClient::getAuthorizationHeader"),this.getAuthorizationHeader()}},{key:"setToken",value:function(e){if(e){if(e.toAuthHeader)this.token=e;else if("string"==typeof e)this.token=new f.default(e);else throw D.default.warn("Cozy-Client: Unknown token format",e),Error("Cozy-Client: Unknown token format");this.onRevocationChange(!1)}else this.token=null}},{key:"getAccessToken",value:function(){return this.token&&this.token.getAccessToken()}},{key:"setUri",value:function(e){this.uri=I(e)}},{key:"getIconURL",value:function(e){return(0,E.default)(this,e)}}]),s}();A.default.mixin(L);t.default=L},7843:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(6479)),o=a(n(319)),s=a(n(59713)),c=a(n(87757)),u=a(n(28655)),l=a(n(48926)),d=a(n(34575)),f=a(n(93913)),p=a(n(71400)),h=n(39713),v=a(n(44908)),m=a(n(57557)),y=a(n(91175)),g=a(n(82492)),b=a(n(10240)),w=a(n(80129)),k=n(89998),x=n(29460),O=r(n(17647)),C=r(n(5798));n(89941);var S=a(n(58861));function E(){var e=(0,u.default)(["/data/","/_design/","/copy?rev=",""]);return E=function(){return e},e}function P(){var e=(0,u.default)(["/data/","/_design/","?rev=",""]);return P=function(){return e},e}function _(){var e=(0,u.default)(["/data/","/_design_docs?include_docs=true"]);return _=function(){return e},e}function A(){var e=(0,u.default)(["/data/","/_index"]);return A=function(){return e},e}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D(){var e=(0,u.default)(["/data/","/","?rev=",""]);return D=function(){return e},e}function M(){var e=(0,u.default)(["/data/","/",""]);return M=function(){return e},e}function T(){var e=(0,u.default)(["/data/","/",""]);return T=function(){return e},e}function j(){var e=(0,u.default)(["/data/","/_all_docs?include_docs=true"]);return j=function(){return e},e}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function L(){var e=(0,u.default)(["/data/","/_find"]);return L=function(){return e},e}function z(){var e=(0,u.default)(["/data/","/",""]);return z=function(){return e},e}var Z=function(e){return Object.assign({},(0,m.default)(e,"_type"),{_deleted:!0})},B=function(){var e,t,n,r,a,u,N,B,F,U,V,H,W,q,G,K,Q,Y,J,$,X,ee;function et(e,t){(0,d.default)(this,et),this.doctype=e,this.stackClient=t,this.indexes={},this.endpoint="/data/".concat(this.doctype,"/")}return(0,f.default)(et,[{key:"all",value:(e=(0,l.default)(c.default.mark(function e(){var t=this,n,r,a,i,o,s,u,l,d,f,p,v,m,y,g,w=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(n=w.length>0&&void 0!==w[0]?w[0]:{}).limit)?100:r,o=void 0===(i=n.skip)?0:i,s=n.bookmark,d=(l=!!(u=n.keys)||null===a)?"_all_docs":"_normal_docs",f=(0,h.uri)(z(),this.doctype,d),p={include_docs:!0,limit:a,skip:o,keys:u,bookmark:s},v=C.buildURL(f,p),e.prev=6,e.next=9,this.stackClient.fetchJSON("GET",v);case 9:m=e.sent,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(6),e.abrupt("return",(0,O.dontThrowNotFoundError)(e.t0));case 15:return y=l?m.rows.filter(function(e){return e&&null!==e.doc&&!e.error&&!(0,b.default)(e.id,"_design")}).map(function(e){return(0,x.normalizeDoc)(e.doc,t.doctype)}):m.rows.map(function(e){return(0,x.normalizeDoc)(e,t.doctype)}),g=s?m.rows.length>=a:o+m.rows.length<m.total_rows,e.abrupt("return",{data:y,meta:{count:l?y.length:m.total_rows},skip:o,bookmark:m.bookmark,next:g});case 18:case"end":return e.stop()}},e,this,[[6,12]])})),function(){return e.apply(this,arguments)})},{key:"fetchDocumentsWithMango",value:(t=(0,l.default)(c.default.mark(function e(t,n){var r,a=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",this.stackClient.fetchJSON("POST",t,this.toMangoOptions(n,r)));case 2:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"migrateIndex",value:(n=(0,l.default)(c.default.mark(function e(t,n){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.copyIndex(t,n);case 3:return e.next=5,this.destroyIndex(t);case 5:e.next=16;break;case 7:if(e.prev=7,e.t0=e.catch(0),(0,O.isDocumentUpdateConflict)(e.t0)){e.next=11;break}throw e.t0;case 11:return(0,h.sleep)(1e3),e.next=14,this.copyIndex(t,n);case 14:return e.next=16,this.destroyIndex(t);case 16:case"end":return e.stop()}},e,this,[[0,7]])})),function(e,t){return n.apply(this,arguments)})},{key:"handleMissingIndex",value:(r=(0,l.default)(c.default.mark(function e(t,n){var r,a,i,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.indexedFields,a=n.partialFilter,!r&&(r=(0,k.getIndexFields)({sort:n.sort,selector:t})),i=(0,k.getIndexNameFromFields)(r,a),e.next=5,this.findExistingIndex(t,n);case 5:if(o=e.sent){e.next=11;break}return e.next=9,this.createIndex(r,{partialFilter:a,indexName:i});case 9:case 14:e.next=17;break;case 11:if(!(o._id!=="_design/".concat(i))){e.next=16;break}return e.next=14,this.migrateIndex(o,i);case 16:throw Error("Index unusable for query, index used: ".concat(i));case 17:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"findWithMango",value:(a=(0,l.default)(c.default.mark(function e(t,n){var r,a,i,o,s=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{},e.prev=1,e.next=4,this.fetchDocumentsWithMango(t,n,r);case 4:if(!((o=(a=e.sent).warning||(null===(i=a.meta)||void 0===i?void 0:i.warning))&&r.partialFilter&&(0,O.isIndexNotUsedWarning)(o))){e.next=8;break}throw Error("no_index");case 8:e.next=21;break;case 10:if(e.prev=10,e.t0=e.catch(1),!((0,O.isIndexNotFoundError)(e.t0)||(0,O.isNoUsableIndexError)(e.t0)||(0,O.isTimeoutError)(e.t0))){e.next=20;break}return e.next=15,this.handleMissingIndex(n,r);case 15:return e.next=17,this.fetchDocumentsWithMango(t,n,r);case 17:a=e.sent,e.next=21;break;case 20:throw e.t0;case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}},e,this,[[1,10]])})),function(e,t){return a.apply(this,arguments)})},{key:"find",value:(u=(0,l.default)(c.default.mark(function e(t){var n=this,r,a,i,o,s,u=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0===(a=(r=u.length>1&&void 0!==u[1]?u[1]:{}).skip)?0:a,e.prev=2,s=(0,h.uri)(L(),this.doctype),e.next=6,this.findWithMango(s,t,r);case 6:o=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",(0,O.dontThrowNotFoundError)(e.t0));case 12:return e.abrupt("return",{data:o.docs.map(function(e){return(0,x.normalizeDoc)(e,n.doctype)}),next:o.next,skip:i,bookmark:o.bookmark,execution_stats:o.execution_stats});case 13:case"end":return e.stop()}},e,this,[[2,9]])})),function(e){return u.apply(this,arguments)})},{key:"findAll",value:(N=(0,l.default)(c.default.mark(function e(t){var n,r,a,i,s,u=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=u.length>1&&void 0!==u[1]?u[1]:{},r=!0,a=[],i=n.bookmark||void 0;case 4:if(!r){e.next=13;break}return e.next=7,this.find(t,I(I({},n),{},{bookmark:i}));case 7:s=e.sent,a.push.apply(a,(0,o.default)(s.data)),i=s.bookmark,r=s.next,e.next=4;break;case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e,this)})),function(e){return N.apply(this,arguments)})},{key:"get",value:(B=(0,l.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.default.get(this.stackClient,"".concat(this.endpoint).concat(encodeURIComponent(t)),{normalize:this.constructor.normalizeDoctype(this.doctype)}));case 1:case"end":return e.stop()}},e,this)})),function(e){return B.apply(this,arguments)})},{key:"getAll",value:(F=(0,l.default)(c.default.mark(function e(t){var n,r,a=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stackClient.fetchJSON("POST",(0,h.uri)(j(),this.doctype),{keys:t});case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(0,O.dontThrowNotFoundError)(e.t0));case 9:return r=n.rows.filter(function(e){return e.doc}),e.abrupt("return",{data:r.map(function(e){return(0,x.normalizeDoc)(e.doc,a.doctype)}),meta:{count:r.length}});case 11:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return F.apply(this,arguments)})},{key:"create",value:(U=(0,l.default)(c.default.mark(function e(t){var n,r,a,o,s,u,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,t._type,a=(0,i.default)(t,["_id","_type"]),s=(o=!!n)?"PUT":"POST",u=(0,h.uri)(T(),this.doctype,o?n:""),e.next=6,this.stackClient.fetchJSON(s,u,a);case 6:return l=e.sent,e.abrupt("return",{data:(0,x.normalizeDoc)(l.data,this.doctype)});case 8:case"end":return e.stop()}},e,this)})),function(e){return U.apply(this,arguments)})},{key:"update",value:(V=(0,l.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("PUT",(0,h.uri)(M(),this.doctype,t._id),t);case 2:return n=e.sent,e.abrupt("return",{data:(0,x.normalizeDoc)(n.data,this.doctype)});case 4:case"end":return e.stop()}},e,this)})),function(e){return V.apply(this,arguments)})},{key:"destroy",value:(H=(0,l.default)(c.default.mark(function e(t){var n,r,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,r=t._rev,a=(0,i.default)(t,["_id","_rev"]),e.next=3,this.stackClient.fetchJSON("DELETE",(0,h.uri)(D(),this.doctype,n,r));case 3:return o=e.sent,e.abrupt("return",{data:(0,x.normalizeDoc)(I(I({},a),{},{_id:n,_rev:o.rev,_deleted:!0}),this.doctype)});case 5:case"end":return e.stop()}},e,this)})),function(e){return H.apply(this,arguments)})},{key:"updateAll",value:(W=(0,l.default)(c.default.mark(function e(t){var n,r,a,i,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.stackClient,!(!(r=t?t.map(function(e){return(0,m.default)(e,"_type")}):t)||!r.length)){e.next=4;break}return e.abrupt("return",Promise.resolve([]));case 4:return e.prev=4,e.next=7,n.fetchJSON("POST","/data/".concat(this.doctype,"/_bulk_docs"),{docs:r});case 7:return a=e.sent,e.abrupt("return",a);case 11:if(e.prev=11,e.t0=e.catch(4),!(e.t0.reason&&e.t0.reason.reason&&"Database does not exist."===e.t0.reason.reason)){e.next=24;break}return e.next=16,this.create(r[0]);case 16:return i=e.sent,e.next=19,this.updateAll(r.slice(1));case 19:return(o=e.sent).unshift({ok:!0,id:i._id,rev:i._rev}),e.abrupt("return",o);case 24:throw e.t0;case 25:case"end":return e.stop()}},e,this,[[4,11]])})),function(e){return W.apply(this,arguments)})},{key:"destroyAll",value:function(e){return this.updateAll(e.map(Z))}},{key:"toMangoOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sort,r=t.indexedFields,a=t.partialFilter,i=t.fields,c=t.skip,u=t.limit,l=t.bookmark;n=(0,k.transformSort)(n),!r&&e&&S.default.warn("Selector fields should be manually indexed to prevent unexpected behaviour"),r=r||(0,k.getIndexFields)({sort:n,selector:e});var d=t.indexId||"_design/".concat((0,k.getIndexNameFromFields)(r,a));if(n){var f=(0,v.default)(n.map(function(e){return(0,y.default)(Object.values(e))}));if(f.length>1)throw Error("Mango sort can only use a single order (asc or desc).");var h,m=f.length>0?(0,y.default)(f):"asc",b=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}}}(r);try{for(b.s();!(h=b.n()).done;)!function(){var e=h.value;!n.find(function(t){return(0,y.default)(Object.keys(t))===e})&&n.push((0,s.default)({},e,m))}()}catch(e){b.e(e)}finally{b.f()}}return{selector:a?(0,g.default)(I({},e),a):e,use_index:d,fields:i?[].concat((0,o.default)(i),["_id","_rev"]):void 0,limit:u,skip:void 0===c?0:c,bookmark:t.bookmark||l,sort:n,execution_stats:!!(0,p.default)("debug")||void 0}}},{key:"checkUniquenessOf",value:(q=(0,l.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUniqueIndexId(t);case 2:return r=e.sent,e.next=5,this.find((0,s.default)({},t,n),{indexId:r,fields:["_id"]});case 5:return a=e.sent,e.abrupt("return",0===a.data.length);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return q.apply(this,arguments)})},{key:"getUniqueIndexId",value:function(e){return this.getIndexId([e],{indexName:"".concat(this.doctype,"/").concat(e)})}},{key:"getIndexId",value:(G=(0,l.default)(c.default.mark(function e(t,n){var r,a,i,o,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0===(r=n.partialFilter)?"":r,o=void 0===(i=n.indexName)?(0,k.getIndexNameFromFields)(t):i,this.indexes[o]){e.next=20;break}return e.prev=2,e.next=5,this.createIndex(t,{partialFilter:a});case 5:s=e.sent,e.next=19;break;case 8:if(e.prev=8,e.t0=e.catch(2),(0,O.isIndexConflictError)(e.t0)){e.next=14;break}throw e.t0;case 14:return e.next=16,(0,h.sleep)(1e3);case 16:return e.next=18,this.createIndex(t,{partialFilter:a});case 18:s=e.sent;case 19:this.indexes[o]=s;case 20:return e.abrupt("return",this.indexes[o].id);case 21:case"end":return e.stop()}},e,this,[[2,8]])})),function(e,t){return G.apply(this,arguments)})},{key:"createIndex",value:(K=(0,l.default)(c.default.mark(function e(t){var n,r,a,i,o,s,u,l,d=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=d.length>1&&void 0!==d[1]?d[1]:{}).partialFilter,a=n.indexName,i={index:{fields:t}},a&&(i.ddoc=a),r&&(i.index.partial_filter_selector=r),e.prev=4,e.next=7,this.stackClient.fetchJSON("POST",(0,h.uri)(A(),this.doctype),i);case 7:o=e.sent,e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(4),(0,O.isIndexConflictError)(e.t0)){e.next=16;break}throw e.t0;case 16:return e.abrupt("return");case 17:if(s={id:o.id,fields:t},"exists"!==o.result){e.next=20;break}return e.abrupt("return",s);case 20:return u={},t.forEach(function(e){return u[e]={$gt:null}}),l={indexId:s.id,limit:1,partialFilterFields:r?(0,k.getIndexFields)({partialFilter:r}):null},e.next=25,(0,h.attempt)(this.find(u,l));case 25:if(!e.sent){e.next=27;break}return e.abrupt("return",s);case 27:return e.next=29,(0,h.sleep)(1e3);case 29:return e.next=31,(0,h.attempt)(this.find(u,l));case 31:if(!e.sent){e.next=33;break}return e.abrupt("return",s);case 33:return e.next=35,(0,h.sleep)(500);case 35:return e.abrupt("return",s);case 36:case"end":return e.stop()}},e,this,[[4,10]])})),function(e){return K.apply(this,arguments)})},{key:"fetchAllMangoIndexes",value:(Q=(0,l.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,h.uri)(_(),this.doctype),e.next=3,this.stackClient.fetchJSON("GET",t);case 3:return n=e.sent,e.abrupt("return",n.rows.filter(function(e){return"query"===e.doc.language}).map(function(e){return(0,k.normalizeDesignDoc)(e)}));case 5:case"end":return e.stop()}},e,this)})),function(){return Q.apply(this,arguments)})},{key:"destroyIndex",value:(Y=(0,l.default)(c.default.mark(function e(t){var n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id.split("/")[1],r=t._rev,a=(0,h.uri)(P(),this.doctype,n,r),e.abrupt("return",this.stackClient.fetchJSON("DELETE",a));case 4:case"end":return e.stop()}},e,this)})),function(e){return Y.apply(this,arguments)})},{key:"copyIndex",value:(J=(0,l.default)(c.default.mark(function e(t,n){var r,a,i,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id.split("/")[1],a=t._rev,i=(0,h.uri)(E(),this.doctype,r,a),o={headers:{Destination:"_design/".concat(n)}},e.abrupt("return",this.stackClient.fetchJSON("POST",i,null,o));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return J.apply(this,arguments)})},{key:"findExistingIndex",value:($=(0,l.default)(c.default.mark(function e(t,n){var r,a,i,o,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.sort,a=n.indexedFields,i=n.partialFilter,e.next=3,this.fetchAllMangoIndexes();case 3:if(!((o=e.sent).length<1)){e.next=6;break}return e.abrupt("return",null);case 6:return r=(0,k.transformSort)(r),s=a||(0,k.getIndexFields)({sort:r,selector:t}),u=o.find(function(e){return(0,k.isMatchingIndex)(e,s,i)}),e.abrupt("return",u);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return $.apply(this,arguments)})},{key:"fetchChangesRaw",value:(X=(0,l.default)(c.default.mark(function e(t){var n,r,a,i,o,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.doc_ids&&t.doc_ids.length>0,r="?".concat([w.default.stringify(I(I({},(0,m.default)(t,["doc_ids","includeDocs"])),{},{include_docs:t.includeDocs})),n&&void 0===t.filter?"filter=_doc_ids":void 0].filter(Boolean).join("&")),a=n?"POST":"GET",i="/data/".concat(this.doctype,"/_changes").concat(r),o=n?{doc_ids:t.doc_ids}:void 0,e.next=7,this.stackClient.fetchJSON(a,i,o);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)})),function(e){return X.apply(this,arguments)})},{key:"fetchChanges",value:(ee=(0,l.default)(c.default.mark(function e(){var t=this,n,r,a,i,o,s,u=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>0&&void 0!==u[0]?u[0]:{},r=u.length>1&&void 0!==u[1]?u[1]:{},a={includeDocs:!0},"object"!=typeof n?(a.since=n,S.default.warn('fetchChanges use couchOptions as Object not a string, since is deprecated, please use fetchChanges({since: "'.concat(n,'"}).'))):Object.keys(n).length>0&&Object.assign(a,n),e.next=6,this.fetchChangesRaw(a);case 6:return o=(i=e.sent).last_seq,s=i.results.map(function(e){return e.doc}).filter(Boolean),!r.includeDesign&&(s=s.filter(function(e){return 0!==e._id.indexOf("_design")})),!r.includeDeleted&&(s=s.filter(function(e){return!e._deleted})),e.abrupt("return",{newLastSeq:o,documents:s.map(function(e){return(0,x.normalizeDoc)(e,t.doctype)})});case 12:case"end":return e.stop()}},e,this)})),function(){return ee.apply(this,arguments)})}],[{key:"normalizeDoctype",value:function(e){return(0,x.normalizeDoctypeRawApi)(e)}}]),et}();t.default=B},77880:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isDirectory=t.isFile=void 0;var i=a(n(6479)),o=a(n(87757)),s=a(n(28655)),c=a(n(48926)),u=a(n(34575)),l=a(n(93913)),d=a(n(81506)),f=a(n(2205)),p=a(n(78585)),h=a(n(29754)),v=a(n(59713)),m=a(n(12109)),y=a(n(18721)),g=a(n(27361)),b=a(n(57557)),w=a(n(78718));n(89998);var k=a(n(7843)),x=n(29460),O=n(39713);n(89941);var C=n(17647),S=n(14565),E=r(n(5798)),P=a(n(58861));function _(){var e=(0,s.default)(["/files/_changes"]);return _=function(){return e},e}function A(){var e=(0,s.default)(["/data/","/","/relationships/not_synchronizing"]);return A=function(){return e},e}function R(){var e=(0,s.default)(["/data/","/","/relationships/not_synchronizing"]);return R=function(){return e},e}function D(){var e=(0,s.default)(["/data/","/","/relationships/not_synchronizing"]);return D=function(){return e},e}function M(){var e=(0,s.default)(["/files/","/versions"]);return M=function(){return e},e}function T(){var e=(0,s.default)(["/files/upload/metadata"]);return T=function(){return e},e}function j(){var e=(0,s.default)(["/files/",""]);return j=function(){return e},e}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function I(){var e=(0,s.default)(["/files/","?Name=","&Type=directory&MetadataID=",""]);return I=function(){return e},e}function L(){var e=(0,s.default)(["/files/metadata?Path=",""]);return L=function(){return e},e}function z(){var e=(0,s.default)(["/files/",""]);return z=function(){return e},e}function Z(){var e=(0,s.default)(["/files/downloads?Path=",""]);return Z=function(){return e},e}function B(){var e=(0,s.default)(["/files/downloads?VersionId=","&Filename=",""]);return B=function(){return e},e}function F(){var e=(0,s.default)(["/files/downloads?Id=","&Filename=",""]);return F=function(){return e},e}function U(){var e=(0,s.default)(["/files/","?Name=","&Type=file&Executable=","&Encrypted=",""]);return U=function(){return e},e}function V(){var e=(0,s.default)(["/files/","?Name=","&Type=file&Executable=","&Encrypted=","&MetadataID=","&Size=","&SourceAccount=","&SourceAccountIdentifier=",""]);return V=function(){return e},e}function H(){var e=(0,s.default)(["/files/",""]);return H=function(){return e},e}function W(){var e=(0,s.default)(["/files/","/copy"]);return W=function(){return e},e}function q(){var e=(0,s.default)(["/files/trash/",""]);return q=function(){return e},e}function G(){var e=(0,s.default)(["/files/",""]);return G=function(){return e},e}function K(){var e=(0,s.default)(["/data/","/","/relationships/references"]);return K=function(){return e},e}function Q(){var e=(0,s.default)(["/data/","/","/relationships/references"]);return Q=function(){return e},e}function Y(){var e=(0,s.default)(["/files/","/relationships/referenced_by"]);return Y=function(){return e},e}function J(){var e=(0,s.default)(["/files/","/relationships/referenced_by"]);return J=function(){return e},e}function $(){var e=(0,s.default)(["/data/","/","/relationships/references"]);return $=function(){return e},e}function X(){var e=(0,s.default)(["/files/_all_docs?include_docs=true"]);return X=function(){return e},e}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach(function(t){(0,v.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var en="io.cozy.files.root-dir",er=(0,x.normalizeDoctypeJsonApi)("io.cozy.files"),ea=function(e){var t;return et(et({},er(e)),{},{_rev:null==e?void 0:null===(t=e.meta)||void 0===t?void 0:t.rev})},ei=function(e){return e?e.map(function(e){return{_type:e.type,_id:e.id}}):[]},eo=function(e){return e&&e.trim()},es=function(e){var t=eo(e);if("string"!=typeof t||""===t)throw Error("Missing name argument");if("."===e||".."===e)throw Error("Invalid filename: ".concat(e));var n=(0,S.getIllegalCharacters)(t);if(n.length)throw Error("Invalid filename containing illegal character(s): ".concat(n));return t};t.isFile=function(e){var t=e._type,n=e.type;return"io.cozy.files"===t||"directory"===n||"file"===n};t.isDirectory=function(e){return"directory"===e.type};var ec=function(e,t){return new Promise(function(n){e.forEach(function(e){return e.then(function(e){t(e)&&n(!0)})}),Promise.all(e).then(function(){return n(!1)})})},eu=function(e){var t=e.lastIndexOf("/");return e.substring(0,t)},el=function(e){(0,f.default)(eZ,e);var t,n,r,a,s,k,x,S,ee,er,el,ed,ef,ep,eh,ev,em,ey,eg,eb,ew,ek,ex,eO,eC,eS,eE,eP,e_,eA,eR,eD,eM,eT,ej,eN,eI,eL,ez=(t=eZ,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,h.default)(t);return e=n?Reflect.construct(r,arguments,(0,h.default)(this).constructor):r.apply(this,arguments),(0,p.default)(this,e)});function eZ(e,t){var n;return(0,u.default)(this,eZ),n=ez.call(this,e,t),(0,v.default)((0,d.default)(n),"extractResponseLinkRelated",function(e){var t=e.links&&e.links.related;if(!t)throw Error("No related link in server response");return n.stackClient.fullpath(t)}),(0,v.default)((0,d.default)(n),"forceFileDownload",function(e,t){(0,O.forceDownload)(e,t)}),n.specialDirectories={},n}return(0,l.default)(eZ,[{key:"get",value:function(e){return this.statById(e)}},{key:"getAll",value:(r=(0,c.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stackClient.fetchJSON("POST",(0,O.uri)(X()),{keys:t});case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(0,C.dontThrowNotFoundError)(e.t0));case 9:return e.abrupt("return",{data:n.data.map(function(e){return ea(e)}),meta:{count:n.data.length},execution_stats:n.execution_stats});case 10:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return r.apply(this,arguments)})},{key:"fetchFindFiles",value:(a=(0,c.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stackClient.fetchJSON("POST","/files/_find",this.toMangoOptions(t,n)));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"find",value:(s=(0,c.default)(o.default.mark(function e(t){var n,r,a,i,s,c,u,l=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(n=l.length>1&&void 0!==l[1]?l[1]:{}).skip)?0:r,e.prev=2,s="/files/_find",e.next=6,this.findWithMango(s,t,n);case 6:i=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",(0,C.dontThrowNotFoundError)(e.t0));case 12:return c=(0,g.default)(i,"links.next",""),u=new URL("".concat(this.stackClient.uri).concat(c)).searchParams.get("page[cursor]"),e.abrupt("return",{data:i.data.map(function(e){return ea(e)}),meta:i.meta,next:i.meta.count>a+i.data.length,skip:a,bookmark:u||void 0,execution_stats:i.meta.execution_stats});case 16:case"end":return e.stop()}},e,this,[[2,9]])})),function(e){return s.apply(this,arguments)})},{key:"findReferencedBy",value:(k=(0,c.default)(o.default.mark(function e(t){var n,r,a,i,s,c,u,l,d=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(n=d.length>1&&void 0!==d[1]?d[1]:{}).skip)?0:r,i=n.limit,s={include:"files","page[limit]":i,"page[cursor]":n.cursor,sort:"datetime"},c=(0,O.uri)($(),t._type,t._id),u=E.buildURL(c,s),e.next=6,this.stackClient.fetchJSON("GET",u);case 6:return l=e.sent,e.abrupt("return",{data:ei(l.data),included:l.included?l.included.map(function(e){return ea(e)}):[],next:(0,y.default)(l,"links.next"),meta:l.meta,skip:a});case 8:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)})},{key:"addReferencedBy",value:(x=(0,c.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map(function(e){return{id:e._id,type:e._type}}),e.next=3,this.stackClient.fetchJSON("POST",(0,O.uri)(J(),t._id),{data:r});case 3:return a=e.sent,e.abrupt("return",{data:ei(a.data),meta:a.meta});case 5:case"end":return e.stop()}},e,this)})),function(e,t){return x.apply(this,arguments)})},{key:"removeReferencedBy",value:(S=(0,c.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map(function(e){return{id:e._id||e.id,type:e._type||e.type}}),e.next=3,this.stackClient.fetchJSON("DELETE",(0,O.uri)(Y(),t._id||t.id),{data:r});case 3:return a=e.sent,e.abrupt("return",{data:ei(a.data),meta:a.meta});case 5:case"end":return e.stop()}},e,this)})),function(e,t){return S.apply(this,arguments)})},{key:"addReferencesTo",value:(ee=(0,c.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map(function(e){return{id:e._id,type:"io.cozy.files"}}),e.abrupt("return",this.stackClient.fetchJSON("POST",(0,O.uri)(Q(),t._type,t._id),{data:r}));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return ee.apply(this,arguments)})},{key:"removeReferencesTo",value:(er=(0,c.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map(function(e){return{id:e._id,type:"io.cozy.files"}}),e.abrupt("return",this.stackClient.fetchJSON("DELETE",(0,O.uri)(K(),t._type,t._id),{data:r}));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return er.apply(this,arguments)})},{key:"destroy",value:(el=(0,c.default)(o.default.mark(function e(t){var n,r,a,i,s,c,u=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(u.length>1&&void 0!==u[1]?u[1]:{}).ifMatch)?"":n,a=t._id,i=t.relationships,e.next=4,this.stackClient.fetchJSON("DELETE",(0,O.uri)(G(),a),void 0,{headers:{"If-Match":r}});case 4:if(s=e.sent,!Array.isArray(c=(0,g.default)(i,"referenced_by.data",t.referenced_by))){e.next=9;break}return e.next=9,this.removeReferencedBy(t,c);case 9:return e.abrupt("return",{data:ea(s.data)});case 10:case"end":return e.stop()}},e,this)})),function(e){return el.apply(this,arguments)})},{key:"emptyTrash",value:function(){return this.stackClient.fetchJSON("DELETE","/files/trash")}},{key:"restore",value:function(e){return this.stackClient.fetchJSON("POST",(0,O.uri)(q(),e))}},{key:"copy",value:(ed=(0,c.default)(o.default.mark(function e(t,n,r){var a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:void 0===n?void 0:es(n),DirID:r},i=(0,O.uri)(W(),t),s=E.buildURL(i,a),e.next=5,this.stackClient.fetchJSON("POST",s);case 5:return c=e.sent,e.abrupt("return",{data:ea(c.data)});case 7:case"end":return e.stop()}},e,this)})),function(e,t,n){return ed.apply(this,arguments)})},{key:"deleteFilePermanently",value:(ef=(0,c.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("PATCH",(0,O.uri)(H(),t),{data:{type:"io.cozy.files",id:t,attributes:{permanent_delete:!0}}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)})),function(e){return ef.apply(this,arguments)})},{key:"upload",value:(ep=(0,c.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureDirectoryExists(n);case 2:return r=e.sent,e.abrupt("return",this.createFile(t,{dirId:r}));case 4:case"end":return e.stop()}},e,this)})),function(e,t){return ep.apply(this,arguments)})},{key:"create",value:(eh=(0,c.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("directory"!==t.type){e.next=4;break}return e.abrupt("return",this.createDirectory(t));case 4:return n=t.data,r=(0,i.default)(t,["data"]),e.abrupt("return",this.createFile(n,r));case 6:case"end":return e.stop()}},e,this)})),function(e){return eh.apply(this,arguments)})},{key:"update",value:(ev=(0,c.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,r=(0,i.default)(t,["data"]),a=t.id||t._id,!n){e.next=7;break}if("directory"!==t.type){e.next=5;break}throw Error("You cannot pass a data object for a directory");case 5:return r.fileId=a,e.abrupt("return",this.updateFile(n,r));case 7:return e.abrupt("return",this.updateAttributes(a,t));case 8:case"end":return e.stop()}},e,this)})),function(e){return ev.apply(this,arguments)})},{key:"createFile",value:(em=(0,c.default)(o.default.mark(function e(t){var n,r,a,s,c,u,l,d,f,p,h,v,m,y,g,b,w,k,x=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=x.length>1&&void 0!==x[1]?x[1]:{}).name,s=void 0===(a=n.dirId)?"":a,u=void 0!==(c=n.executable)&&c,d=void 0!==(l=n.encrypted)&&l,f=n.metadata,h=void 0===(p=n.sourceAccount)?"":p,m=void 0===(v=n.sourceAccountIdentifier)?"":v,y=(0,i.default)(n,["name","dirId","executable","encrypted","metadata","sourceAccount","sourceAccountIdentifier"]),!(g=r)&&"string"==typeof t.name&&(g=t.name),g=es(g),b="",!f){e.next=11;break}return e.next=9,this.createFileMetadata(f);case 9:b=e.sent.data.id;case 11:return w="",y.contentLength&&(w=String(y.contentLength)),k=(0,O.uri)(V(),s,g,u,d,b,w,h,m),e.abrupt("return",this.doUpload(t,k,y));case 15:case"end":return e.stop()}},e,this)})),function(e){return em.apply(this,arguments)})},{key:"updateFile",value:(ey=(0,c.default)(o.default.mark(function e(t){var n,r,a,s,c,u,l,d,f,p,h,v,m,y,g,b=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0!==(r=(n=b.length>1&&void 0!==b[1]?b[1]:{}).executable)&&r,c=void 0!==(s=n.encrypted)&&s,u=n.fileId,d=void 0===(l=n.name)?"":l,f=n.metadata,p=(0,i.default)(n,["executable","encrypted","fileId","name","metadata"]),!(!u||"string"!=typeof u)){e.next=4;break}throw Error("missing fileId argument");case 4:if(!(!(h=d||t.name)||"string"!=typeof h)){e.next=7;break}throw Error("missing name in data argument");case 7:if(v=es(h),y=(0,O.uri)(U(),u,v,a,c),!f){e.next=15;break}return e.next=12,this.createFileMetadata(f);case 12:m=e.sent.data.id,y+="&MetadataID=".concat(m);case 15:return g="",p.contentLength&&(g=String(p.contentLength),y+="&Size=".concat(g)),e.abrupt("return",this.doUpload(t,y,p,"PUT"));case 18:case"end":return e.stop()}},e,this)})),function(e){return ey.apply(this,arguments)})},{key:"getDownloadLinkById",value:function(e,t){return this.stackClient.fetchJSON("POST",(0,O.uri)(F(),e,encodeURIComponent(t))).then(this.extractResponseLinkRelated)}},{key:"getDownloadLinkByRevision",value:function(e,t){return this.stackClient.fetchJSON("POST",(0,O.uri)(B(),e,encodeURIComponent(t))).then(this.extractResponseLinkRelated)}},{key:"getDownloadLinkByPath",value:function(e){return this.stackClient.fetchJSON("POST",(0,O.uri)(Z(),e)).then(this.extractResponseLinkRelated)}},{key:"download",value:(eg=(0,c.default)(o.default.mark(function e(t){var n,r,a,i,s=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:null,i=(r=s.length>2&&void 0!==s[2]?s[2]:void 0)||t.name,n){e.next=9;break}return e.next=6,this.getDownloadLinkById(t._id,i);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,this.getDownloadLinkByRevision(n,i);case 11:a=e.sent;case 12:this.forceFileDownload("".concat(a,"?Dl=1"),i);case 13:case"end":return e.stop()}},e,this)})),function(e){return eg.apply(this,arguments)})},{key:"fetchFileContent",value:(eb=(0,c.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P.default.warn("FileCollection.fetchFileContent() is deprecated. Use FileCollection.fetchFileContentById() instead"),e.abrupt("return",this.fetchFileContentById(t));case 2:case"end":return e.stop()}},e,this)})),function(e){return eb.apply(this,arguments)})},{key:"fetchFileContentById",value:(ew=(0,c.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stackClient.fetch("GET","/files/download/".concat(t)));case 1:case"end":return e.stop()}},e,this)})),function(e){return ew.apply(this,arguments)})},{key:"getBeautifulSize",value:function(e,t){return(0,O.formatBytes)(parseInt(e.size),t)}},{key:"downloadArchive",value:(ek=(0,c.default)(o.default.mark(function e(t,n){var r,a,i,s,c=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(c.length>2&&void 0!==c[2]?c[2]:{}).pages,a=n?(0,O.slugify)(n):"files",e.next=4,this.createArchiveLinkByIds({ids:t,name:a,pages:r});case 4:i=e.sent,s=this.stackClient.fullpath(i),this.forceFileDownload(s,a+".zip");case 7:case"end":return e.stop()}},e,this)})),function(e,t){return ek.apply(this,arguments)})},{key:"getArchiveLinkByIds",value:(ex=(0,c.default)(o.default.mark(function e(t){var n,r,a=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"files",P.default.warn("CozyClient FileCollection getArchiveLinkByIds method is deprecated. Use createArchiveLinkByIds instead"),e.next=4,this.stackClient.fetchJSON("POST","/files/archive",{data:{type:"io.cozy.archives",attributes:{name:n,ids:t}}});case 4:return r=e.sent,e.abrupt("return",r.links.related);case 6:case"end":return e.stop()}},e,this)})),function(e){return ex.apply(this,arguments)})},{key:"createArchiveLinkByIds",value:(eO=(0,c.default)(o.default.mark(function e(t){var n,r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ids,a=void 0===(r=t.name)?"files":r,i=t.pages,e.next=3,this.stackClient.fetchJSON("POST","/files/archive",{data:{type:"io.cozy.archives",attributes:et({name:a,ids:n},i&&{pages:i})}});case 3:return s=e.sent,e.abrupt("return",s.links.related);case 5:case"end":return e.stop()}},e,this)})),function(e){return eO.apply(this,arguments)})},{key:"isChildOf",value:(eC=(0,c.default)(o.default.mark(function e(t,n){var r,a,i,s,c,u,l,d,f,p=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(r="object"==typeof t?t:{_id:t})._id,i=r.dirID,s=r.path,c=("object"==typeof n?n:{_id:n})._id,!(a===c||i===c)){e.next=4;break}return e.abrupt("return",!0);case 4:if(s){e.next=10;break}return e.next=7,this.statById(a);case 7:s=(u=e.sent).data.path,i=u.data.dirID;case 10:for(l=s,d=[s];""!=l;)""!=(f=eu(l))&&d.push(f),l=f;return d.reverse(),e.abrupt("return",ec(d.map(function(e){return p.statByPath(e)}),function(e){return e.data._id==c}));case 15:case"end":return e.stop()}},e,this)})),function(e,t){return eC.apply(this,arguments)})},{key:"statById",value:(eS=(0,c.default)(o.default.mark(function e(t){var n,r,a,i,s,c=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},r=(0,w.default)(n,["page[limit]","page[skip]","page[cursor]"]),a=(0,O.uri)(z(),t),i=E.buildURL(a,r),e.next=6,this.stackClient.fetchJSON("GET",i);case 6:return s=e.sent,e.abrupt("return",{data:ea(s.data),included:s.included&&s.included.map(function(e){return ea(e)}),links:s.links});case 8:case"end":return e.stop()}},e,this)})),function(e){return eS.apply(this,arguments)})},{key:"statByPath",value:(eE=(0,c.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,O.uri)(L(),t));case 2:return n=e.sent,e.abrupt("return",{data:ea(n.data),included:n.included&&n.included.map(function(e){return ea(e)})});case 4:case"end":return e.stop()}},e,this)})),function(e){return eE.apply(this,arguments)})},{key:"createDirectory",value:(eP=(0,c.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u,l,d=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=d.length>0&&void 0!==d[0]?d[0]:{}).name,r=t.dirId,a=t.lastModifiedDate,i=t.metadata,s="",!i){e.next=8;break}return e.next=6,this.createFileMetadata(i);case 6:s=e.sent.data.id;case 8:return c=es(n),u=a&&("string"==typeof a?new Date(a):a),e.next=12,this.stackClient.fetchJSON("POST",(0,O.uri)(I(),r,c,s),void 0,{headers:{Date:u?u.toGMTString():""}});case 12:return l=e.sent,e.abrupt("return",{data:ea(l.data)});case 14:case"end":return e.stop()}},e,this)})),function(){return eP.apply(this,arguments)})},{key:"ensureDirectoryExists",value:(e_=(0,c.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.specialDirectories[t]){e.next=5;break}return e.next=3,this.createDirectoryByPath(t);case 3:n=e.sent,this.specialDirectories[t]=n.data._id;case 5:return e.abrupt("return",this.specialDirectories[t]);case 6:case"end":return e.stop()}},e,this)})),function(e){return e_.apply(this,arguments)})},{key:"getDirectoryOrCreate",value:(eA=(0,c.default)(o.default.mark(function e(t,n){var r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&!n.attributes)){e.next=2;break}throw Error("Malformed parent directory");case 2:return r=eo(t),a="".concat(n._id===en?"":n.attributes.path,"/").concat(r),e.prev=4,e.next=7,this.statByPath(a||"/");case 7:return i=e.sent,e.abrupt("return",i);case 11:if(e.prev=11,e.t0=e.catch(4),!((s=JSON.parse(e.t0.message).errors)&&s.length&&"404"===s[0].status)){e.next=17;break}return e.abrupt("return",this.createDirectory({name:r,dirId:n&&n._id}));case 17:throw s;case 18:case"end":return e.stop()}},e,this,[[4,11]])})),function(e,t){return eA.apply(this,arguments)})},{key:"createDirectoryByPath",value:(eR=(0,c.default)(o.default.mark(function e(t){var n,r,a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split("/").filter(function(e){return""!==e}),e.next=3,this.statById(en);case 3:if(r=e.sent,n.length){e.next=6;break}return e.abrupt("return",r);case 6:a=r,i=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}}}(n),e.prev=8,i.s();case 10:if((s=i.n()).done){e.next=17;break}return c=s.value,e.next=14,this.getDirectoryOrCreate(c,a.data);case 14:a=e.sent;case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:return e.abrupt("return",a);case 26:case"end":return e.stop()}},e,this,[[8,19,22,25]])})),function(e){return eR.apply(this,arguments)})},{key:"updateAttributes",value:(eD=(0,c.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=et({},n),n.name&&(r.name=es(n.name)),e.next=4,this.stackClient.fetchJSON("PATCH",(0,O.uri)(j(),t),{data:{type:"io.cozy.files",id:t,attributes:r}});case 4:return a=e.sent,e.abrupt("return",{data:ea(a.data)});case 6:case"end":return e.stop()}},e,this)})),function(e,t){return eD.apply(this,arguments)})},{key:"updateFileMetadata",value:(eM=(0,c.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P.default.warn("CozyClient FileCollection updateFileMetadata method is deprecated. Use updateAttributes instead"),e.abrupt("return",this.updateAttributes(t,n));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return eM.apply(this,arguments)})},{key:"createFileMetadata",value:(eT=(0,c.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST",(0,O.uri)(T()),{data:{type:"io.cozy.files.metadata",attributes:t}});case 2:return n=e.sent,e.abrupt("return",{data:n.data});case 4:case"end":return e.stop()}},e,this)})),function(e){return eT.apply(this,arguments)})},{key:"updateMetadataAttribute",value:(ej=(0,c.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST",(0,O.uri)(M(),t),{data:{type:"io.cozy.files.metadata",attributes:n}});case 2:return r=e.sent,e.abrupt("return",{data:r.data});case 4:case"end":return e.stop()}},e,this)})),function(e,t){return ej.apply(this,arguments)})},{key:"getFileTypeFromName",value:function(e){return m.default.getType(e)||"application/octet-stream"}},{key:"doUpload",value:(eN=(0,c.default)(o.default.mark(function e(t,n,r){var a,i,s,c,u,l,d,f,p,h,v,m,y,g,b,w,k,x,O,C=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=C.length>3&&void 0!==C[3]?C[3]:"POST",i=n,s=t){e.next=5;break}throw Error("missing data argument");case 5:if(s.buffer&&s.buffer instanceof ArrayBuffer&&(s=s.buffer),c="undefined"!=typeof ArrayBuffer&&s instanceof ArrayBuffer,u="undefined"!=typeof File&&s instanceof File,l="undefined"!=typeof Blob&&s instanceof Blob,d=!0===s.readable&&"function"==typeof s.pipe,f="string"==typeof s,!(!c&&!u&&!l&&!d&&!f)){e.next=13;break}throw Error("invalid data type");case 13:return h=(p=r||{}).contentType,v=p.contentLength,m=p.checksum,y=p.lastModifiedDate,g=p.ifMatch,!h&&("string"==typeof s?h="text/plain":s.type?h=s.type:(w=new URLSearchParams((b=i.split("?")).length>1?b[1]:"").get("Name"),h=this.getFileTypeFromName(w.toLowerCase()))),(y=y||s.lastModified)&&(y=new Date(y)),k={"Content-Type":h},v&&(k["Content-Length"]=String(v)),m&&(k["Content-MD5"]=m),y&&(x=y.toISOString(),i="".concat(i,"&UpdatedAt=").concat(x,"&CreatedAt=").concat(x)),g&&(k["If-Match"]=g),e.next=24,this.stackClient.fetchJSON(a,i,s,{headers:k,onUploadProgress:r.onUploadProgress});case 24:return O=e.sent,e.abrupt("return",{data:ea(O.data)});case 26:case"end":return e.stop()}},e,this)})),function(e,t,n){return eN.apply(this,arguments)})},{key:"findNotSynchronizedDirectories",value:(eI=(0,c.default)(o.default.mark(function e(t){var n,r,a,i,s,c,u,l,d,f,p=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(n=p.length>1&&void 0!==p[1]?p[1]:{}).skip)?0:r,i=n.limit,s=n.cursor,u={include:void 0!==(c=n.includeFiles)&&c?"files":void 0,"page[limit]":i,"page[cursor]":s,sort:"id"},l=(0,O.uri)(D(),t._type,t._id),d=E.buildURL(l,u),e.next=6,this.stackClient.fetchJSON("GET",d);case 6:return f=e.sent,e.abrupt("return",{data:f.data.map(function(e){return ea(e)}),included:f.included?f.included.map(function(e){return ea(e)}):[],next:(0,y.default)(f,"links.next"),meta:f.meta,skip:a});case 8:case"end":return e.stop()}},e,this)})),function(e){return eI.apply(this,arguments)})},{key:"addNotSynchronizedDirectories",value:function(e,t){var n=t.map(function(e){return{id:e._id,type:e._type}});return this.stackClient.fetchJSON("POST",(0,O.uri)(R(),e._type,e._id),{data:n})}},{key:"removeNotSynchronizedDirectories",value:function(e,t){var n=t.map(function(e){return{id:e._id,type:e._type}});return this.stackClient.fetchJSON("DELETE",(0,O.uri)(A(),e._type,e._id),{data:n})}},{key:"fetchChanges",value:(eL=(0,c.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u,l,d,f=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},n=f.length>1&&void 0!==f[1]?f[1]:{},r={},"object"!=typeof t?(r.since=t,P.default.warn('fetchChanges use couchOptions as Object not a string, since is deprecated, please use fetchChanges({since: "'.concat(t,'"}).'))):Object.keys(t).length>0&&Object.assign(r,t),Object.keys(n).length>0&&(Object.assign(r,n),(n.skipTrashed||n.includeFilePath)&&(r.includeDocs=!0)),a=et(et({},(0,b.default)(r,["fields","includeDocs","includeFilePath","skipDeleted","skipTrashed"])),{},{fields:r.fields?r.fields.join(","):null,include_docs:r.includeDocs,include_file_path:r.includeFilePath,skip_deleted:r.skipDeleted,skip_trashed:r.skipTrashed}),i=(0,O.uri)(_()),s=E.buildURL(i,a),e.next=10,this.stackClient.fetchJSON("GET",s);case 10:return u=(c=e.sent).last_seq,l=c.pending,d=c.results,e.abrupt("return",{newLastSeq:u,pending:l,results:d});case 15:case"end":return e.stop()}},e,this)})),function(){return eL.apply(this,arguments)})}]),eZ}(k.default);t.default=el},59942:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.hasJobFinished=t.normalizeJob=t.JOBS_DOCTYPE=void 0;var a=r(n(87757)),i=r(n(28655)),o=r(n(48926)),s=r(n(34575)),c=r(n(93913)),u=r(n(2205)),l=r(n(78585)),d=r(n(29754)),f=r(n(17647)),p=r(n(7843)),h=n(39713),v=n(29460);function m(){var e=(0,i.default)(["/jobs/",""]);return m=function(){return e},e}var y="io.cozy.jobs";t.JOBS_DOCTYPE=y;var g=function(e){return new Promise(function(t){return setTimeout(t,e)})},b=(0,v.normalizeDoctypeJsonApi)(y);t.normalizeJob=b;var w=function(e){return"done"===e.state||"errored"===e.state};t.hasJobFinished=w;var k=function(e){(0,u.default)(k,e);var t,n,r,i,p,v=(t=k,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);return e=n?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function k(e){return(0,s.default)(this,k),v.call(this,y,e)}return(0,c.default)(k,[{key:"queued",value:function(e){return this.stackClient.fetchJSON("GET","/jobs/queue/".concat(e))}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.stackClient.fetchJSON("POST","/jobs/queue/".concat(e),{data:{type:y,attributes:{arguments:t,options:n,manual:r}}})}},{key:"get",value:(r=(0,o.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.default.get(this.stackClient,(0,h.uri)(m(),t),{normalize:b}));case 1:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"update",value:(i=(0,o.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("client"!==t.worker)){e.next=2;break}throw Error("JobCollection.update only works for client workers. ".concat(t.worker," given"));case 2:return e.next=4,this.stackClient.fetchJSON("PATCH","/jobs/".concat(t._id),{data:{type:y,id:t._id,attributes:{state:t.attributes.state,error:t.attributes.error}}});case 4:return n=e.sent,e.abrupt("return",b(n.data));case 6:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"waitFor",value:(p=(0,o.default)(a.default.mark(function e(t){var n,r,i,o,s,c,u,l,d,f,p,h,v=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0===(r=(n=v.length>1&&void 0!==v[1]?v[1]:{}).onUpdate)?null:r,s=void 0===(o=n.until)?w:o,u=void 0===(c=n.delay)?5e3:c,d=void 0===(l=n.timeout)?3e5:l,f=Date.now(),e.next=4,this.get(t);case 4:p=e.sent.data.attributes;case 5:if(!(!p||!s(p))){e.next=17;break}return e.next=8,g(u);case 8:return e.next=10,this.get(t);case 10:if(p=e.sent.data.attributes,i&&i(p),h=Date.now(),!(f-h>d)){e.next=15;break}throw Error("Timeout for JobCollection::waitFor");case 15:e.next=5;break;case 17:return e.abrupt("return",p);case 18:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})}]),k}(p.default);t.default=k},8852:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.KONNECTORS_DOCTYPE=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(34575)),c=a(n(93913)),u=a(n(2205)),l=a(n(78585)),d=a(n(29754)),f=a(n(78718)),p=a(n(10518)),h=r(n(83499)),v=n(29460),m="io.cozy.konnectors";t.KONNECTORS_DOCTYPE=m;var y=function(e){(0,u.default)(w,e);var t,n,r,a,p,y,g,b=(t=w,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);return e=n?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function w(e){var t;return(0,s.default)(this,w),(t=b.call(this,e)).doctype=m,t.endpoint="/konnectors/",t}return(0,c.default)(w,[{key:"create",value:(r=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("create() method is not available for konnectors");case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"destroy",value:(a=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("destroy() method is not available for konnectors");case 1:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)})},{key:"findTriggersBySlug",value:(p=(0,o.default)(i.default.mark(function e(t){var n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new h.default(this.stackClient),e.next=3,n.all({limit:null});case 3:return r=e.sent.data,e.abrupt("return",r.map(function(e){return e.attributes}).filter(function(e){return(0,h.isForKonnector)(e,t)}));case 6:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"launch",value:(y=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,s,c=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},r=new h.default(this.stackClient),e.next=4,this.findTriggersBySlug(t);case 4:if(a=e.sent,1!==(o=n.accountId?a.filter(function(e){return(0,h.isForAccount)(e,n.accountId)}):a).length){e.next=10;break}return e.abrupt("return",r.launch(a[0]));case 10:if(s=JSON.stringify((0,f.default)({slug:t,accountId:n.accountId})),0!==o.length){e.next=15;break}throw Error("No trigger found for ".concat(s));case 15:if(!(o.length>1)){e.next=17;break}throw Error("More than 1 trigger found for ".concat(s));case 17:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"update",value:(g=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,s=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:{},t){e.next=3;break}throw Error("Cannot call update with no slug");case 3:return r=n.source||null,a=n.sync?{headers:{Accept:"text/event-stream"}}:{},e.next=8,this.stackClient.fetchJSON("PUT","/konnectors/".concat(t)+(r?"?Source=".concat(r):""),a);case 8:return o=e.sent,e.abrupt("return",(0,v.normalizeDoc)(o));case 10:case"end":return e.stop()}},e,this)})),function(e){return g.apply(this,arguments)})}]),w}(p.default);t.default=y},88560:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.NEXTCLOUD_FILES_DOCTYPE=t.NextcloudFilesCollection=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(2205)),u=r(n(78585)),l=r(n(29754)),d=r(n(59713)),f=r(n(7843)),p=n(39713),h=n(89941),v=n(29460);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,d.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b="io.cozy.remote.nextcloud.files";t.NEXTCLOUD_FILES_DOCTYPE=b;var w=(0,v.normalizeDoctypeJsonApi)(b),k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.fromTrash,a=void 0!==r&&r;return function(n){var r=w(n);return g(g({},r),{},{parentPath:t,path:a?r.path:(0,p.joinPath)(t,r.name),cozyMetadata:g(g({},r.cozyMetadata),{},{sourceAccount:e})})}},x=function(e){(0,c.default)(P,e);var t,n,r,d,f,v,y,g,w,x,O,C,S,E=(t=P,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);return e=n?Reflect.construct(r,arguments,(0,l.default)(this).constructor):r.apply(this,arguments),(0,u.default)(this,e)});function P(e){return(0,o.default)(this,P),E.call(this,b,e)}return(0,s.default)(P,[{key:"find",value:(r=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t["cozyMetadata.sourceAccount"]&&t.parentPath)){e.next=5;break}return e.next=3,this.stackClient.fetchJSON("GET","/remote/nextcloud/".concat(t["cozyMetadata.sourceAccount"]).concat((0,p.encodePath)(t.parentPath)));case 3:return n=e.sent,e.abrupt("return",{data:n.data.map(k(t["cozyMetadata.sourceAccount"],t.parentPath,{fromTrash:t.trashed}))});case 5:throw Error("Not implemented");case 6:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"destroy",value:(d=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("DELETE","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount).concat((0,p.encodePath)(t.path)));case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new h.FetchError(n,n.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"destroyAll",value:(f=(0,i.default)(a.default.mark(function e(t){var n,r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}}}(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,this.destroy(i);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})),function(e){return f.apply(this,arguments)})},{key:"download",value:(v=(0,i.default)(a.default.mark(function e(t){var n,r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("GET","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount).concat((0,p.encodePath)(t.path),"?Dl=1"));case 2:return n=e.sent,e.next=5,n.blob();case 5:r=e.sent,i=URL.createObjectURL(r),o=t.path.split("/").pop(),(0,p.forceDownload)(i,o);case 9:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"move",value:(y=(0,i.default)(a.default.mark(function e(t,n){var r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,p.joinPath)(n.path,t.name),e.next=3,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/move").concat((0,p.encodePath)(t.path),"?To=").concat((0,p.encodePath)(r)));case 3:if(204!==(i=e.sent).status){e.next=6;break}return e.abrupt("return",i);case 6:throw new h.FetchError(i,i.json());case 7:case"end":return e.stop()}},e,this)})),function(e,t){return y.apply(this,arguments)})},{key:"moveToCozy",value:(g=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0!==(r=(s.length>2&&void 0!==s[2]?s[2]:{}).copy)&&r,e.next=3,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/downstream").concat((0,p.encodePath)(t.path),"?To=").concat(n._id).concat(i?"&Copy=true":""));case 3:if(201!==(o=e.sent).status){e.next=6;break}return e.abrupt("return",o);case 6:throw new h.FetchError(o,o.json());case 7:case"end":return e.stop()}},e,this)})),function(e,t){return g.apply(this,arguments)})},{key:"moveFromCozy",value:(w=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s,c=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0!==(r=(c.length>2&&void 0!==c[2]?c[2]:{}).copy)&&r,o=(0,p.joinPath)(t.path,n.name),e.next=4,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/upstream").concat((0,p.encodePath)(o),"?From=").concat(n._id).concat(i?"&Copy=true":""));case 4:if(204!==(s=e.sent).status){e.next=7;break}return e.abrupt("return",s);case 7:throw new h.FetchError(s,s.json());case 8:case"end":return e.stop()}},e,this)})),function(e,t){return w.apply(this,arguments)})},{key:"restore",value:(x=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/restore").concat((0,p.encodePath)(t.path)));case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new h.FetchError(n,n.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})},{key:"emptyTrash",value:(O=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("DELETE","/remote/nextcloud/".concat(t,"/trash"));case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new h.FetchError(n,n.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return O.apply(this,arguments)})},{key:"deletePermanently",value:(C=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("DELETE","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount).concat((0,p.encodePath)(t.path)));case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new h.FetchError(n,n.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return C.apply(this,arguments)})},{key:"copy",value:(S=(0,i.default)(a.default.mark(function e(t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/copy/").concat(t.path).concat(n?"?Path=".concat(n.path,"/").concat(t.name):""));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return S.apply(this,arguments)})}]),P}(f.default);t.NextcloudFilesCollection=x},70918:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NOTES_URL_DOCTYPE=t.NOTES_DOCTYPE=void 0;var a=r(n(28655)),i=r(n(59713)),o=r(n(87757)),s=r(n(48926)),c=r(n(34575)),u=r(n(93913)),l=r(n(2205)),d=r(n(78585)),f=r(n(29754)),p=r(n(7843)),h=n(29460),v=n(39713),m=n(31904);function y(){var e=(0,a.default)(["/notes/","/open"]);return y=function(){return e},e}function g(){var e=(0,a.default)(["/files/",""]);return g=function(){return e},e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k="io.cozy.notes";t.NOTES_DOCTYPE=k;var x="io.cozy.notes.url";t.NOTES_URL_DOCTYPE=x;var O=(0,h.normalizeDoctypeJsonApi)(k),C=(0,h.normalizeDoctypeJsonApi)(x),S=function(e){(0,l.default)(x,e);var t,n,r,a,i,p,h,b=(t=x,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,f.default)(t);return e=n?Reflect.construct(r,arguments,(0,f.default)(this).constructor):r.apply(this,arguments),(0,d.default)(this,e)});function x(e){return(0,c.default)(this,x),b.call(this,k,e)}return(0,u.default)(x,[{key:"get",value:(r=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/notes/".concat(t));case 2:return n=e.sent,e.abrupt("return",{data:O(n.data)});case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"all",value:(a=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/notes");case 2:return t=e.sent,e.abrupt("return",w(w({},t),{},{data:t.data.map(O)}));case 4:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"destroy",value:(i=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.next=3,this.stackClient.fetchJSON("DELETE",(0,v.uri)(g(),n));case 3:return r=e.sent,e.abrupt("return",{data:w(w({},O(r.data)),{},{_deleted:!0})});case 5:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"create",value:(p=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dir_id,e.next=3,this.stackClient.fetchJSON("POST","/notes",{data:{type:"io.cozy.notes.documents",attributes:{title:"",schema:(0,m.getDefaultSchema)(),dir_id:n}}});case 3:return r=e.sent,e.abrupt("return",w(w({},r),{},{data:O(r.data)}));case 5:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"fetchURL",value:(h=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.next=3,this.stackClient.fetchJSON("GET",(0,v.uri)(y(),n));case 3:return r=e.sent,e.abrupt("return",{data:C(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"getDefaultSchema",value:function(){return(0,m.getDefaultSchema)()}}]),x}(p.default);S.normalizeDoctype=h.normalizeDoctypeJsonApi;t.default=S},31904:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultSchema=t.marks=t.nodes=void 0;var n=[["doc",{content:"(block)+",marks:"link"}],["paragraph",{content:"inline*",group:"block",marks:"strong code em link strike subsup textColor typeAheadQuery underline",parseDOM:[{tag:"p"}]}],["text",{group:"inline"}],["bulletList",{group:"block",content:"listItem+",parseDOM:[{tag:"ul"}]}],["orderedList",{group:"block",content:"listItem+",parseDOM:[{tag:"ol"}]}],["listItem",{content:"(paragraph ) (paragraph | bulletList | orderedList )*",defining:!0,parseDOM:[{tag:"li"}]}],["heading",{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}]}],["blockquote",{content:"paragraph+",group:"block",defining:!0,selectable:!1,parseDOM:[{tag:"blockquote"}]}],["rule",{group:"block",parseDOM:[{tag:"hr"}]}],["panel",{group:"block",content:"(paragraph | heading | bulletList | orderedList)+",attrs:{panelType:{default:"info"}},parseDOM:[{tag:"div[data-panel-type]"}]}],["confluenceUnsupportedBlock",{group:"block",attrs:{cxhtml:{default:null}},parseDOM:[{tag:'div[data-node-type="confluenceUnsupportedBlock"]'}]}],["confluenceUnsupportedInline",{group:"inline",inline:!0,atom:!0,attrs:{cxhtml:{default:null}},parseDOM:[{tag:'div[data-node-type="confluenceUnsupportedInline"]'}]}],["unsupportedBlock",{inline:!1,group:"block",atom:!0,selectable:!0,attrs:{originalValue:{default:{}}},parseDOM:[{tag:'[data-node-type="unsupportedBlock"]'}]}],["unsupportedInline",{inline:!0,group:"inline",selectable:!0,attrs:{originalValue:{default:{}}},parseDOM:[{tag:'[data-node-type="unsupportedInline"]'}]}],["hardBreak",{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}]}],["table",{content:"tableRow+",attrs:{isNumberColumnEnabled:{default:!1},layout:{default:"default"},__autoSize:{default:!1}},tableRole:"table",isolating:!0,selectable:!1,group:"block",parseDOM:[{tag:"table"}]}],["tableHeader",{content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading )+",attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null}},tableRole:"header_cell",isolating:!0,marks:"",parseDOM:[{tag:"th"}]}],["tableRow",{content:"(tableCell | tableHeader)+",tableRole:"row",parseDOM:[{tag:"tr"}]}],["tableCell",{content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | unsupportedBlock)+",attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null}},tableRole:"cell",marks:"",isolating:!0,parseDOM:[{tag:".ak-renderer-table-number-column",ignore:!0},{tag:"td"}]}]];t.nodes=n;var r=[["link",{excludes:"color",group:"link",attrs:{href:{},__confluenceMetadata:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]"}]}],["em",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}]}],["strong",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"strong"},{tag:"b"},{style:"font-weight"}]}],["textColor",{attrs:{color:{}},inclusive:!0,group:"color",parseDOM:[{style:"color"}]}],["strike",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"strike"},{tag:"s"},{tag:"del"},{style:"text-decoration"}]}],["subsup",{inclusive:!0,group:"fontStyle",attrs:{type:{default:"sub"}},parseDOM:[{tag:"sub",attrs:{type:"sub"}},{tag:"sup",attrs:{type:"sup"}}]}],["underline",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"u"},{style:"text-decoration"}]}],["code",{excludes:"fontStyle link searchQuery color",inclusive:!0,parseDOM:[{tag:"span.code",preserveWhitespace:!0},{tag:"code",preserveWhitespace:!0},{tag:"tt",preserveWhitespace:!0},{tag:"span",preserveWhitespace:!0}]}],["typeAheadQuery",{excludes:"searchQuery",inclusive:!0,group:"searchQuery",parseDOM:[{tag:"span[data-type-ahead-query]"}],attrs:{trigger:{default:""}}}]];t.marks=r;t.getDefaultSchema=function(){return{nodes:n,marks:r}}},88441:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65957)),i=r(n(87757)),o=r(n(48926)),s=r(n(59713)),c=r(n(6479)),u=r(n(34575)),l=r(n(93913)),d=r(n(2205)),f=r(n(78585)),p=r(n(29754)),h=r(n(73554)),v=r(n(51223)),m=r(n(12499)),y=r(n(89941)),g=r(n(58861));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);return n=t?Reflect.construct(r,arguments,(0,p.default)(this).constructor):r.apply(this,arguments),(0,f.default)(this,n)}}var x={clientID:"",clientName:"",clientKind:"",clientSecret:"",clientURI:"",registrationAccessToken:"",redirectURI:"",softwareID:"",softwareVersion:"",logoURI:"",policyURI:"",notificationPlatform:"",notificationDeviceToken:""},O=function(e){(0,d.default)(P,e);var t,n,r,a,s,f,p,h,b,O,S,E=k(P);function P(e){var t,n=e.oauth,r=e.scope,a=e.onTokenRefresh,i=(0,c.default)(e,["oauth","scope","onTokenRefresh"]);return(0,u.default)(this,P),(t=E.call(this,i)).setOAuthOptions(w(w({},x),n)),n.token&&t.setToken(n.token),t.scope=void 0===r?[]:r,t.onTokenRefresh=a,t}return(0,l.default)(P,[{key:"isRegistered",value:function(){return""!==this.oauthOptions.clientID}},{key:"snakeCaseOAuthData",value:function(e){var t={softwareID:"software_id",softwareVersion:"software_version",clientID:"client_id",clientName:"client_name",clientKind:"client_kind",clientURI:"client_uri",logoURI:"logo_uri",policyURI:"policy_uri",notificationPlatform:"notification_platform",notificationDeviceToken:"notification_device_token",redirectURI:"redirect_uris"},n={};return Object.keys(e).forEach(function(r){var a=t[r]||r,i=e[r];n[a]=i}),n.redirect_uris&&n.redirect_uris instanceof Array==!1&&(n.redirect_uris=[n.redirect_uris]),n}},{key:"camelCaseOAuthData",value:function(e){var t={client_id:"clientID",client_name:"clientName",client_secret:"clientSecret",registration_access_token:"registrationAccessToken",software_id:"softwareID",redirect_uris:"redirectURI"},n={};return Object.keys(e).forEach(function(r){var a=t[r]||r,i=e[r];n[a]=i}),n}},{key:"doRegistration",value:function(){return this.fetchJSON("POST","/auth/register",this.snakeCaseOAuthData({redirectURI:this.oauthOptions.redirectURI,clientName:this.oauthOptions.clientName,softwareID:this.oauthOptions.softwareID,clientKind:this.oauthOptions.clientKind,clientURI:this.oauthOptions.clientURI,logoURI:this.oauthOptions.logoURI,policyURI:this.oauthOptions.policyURI,softwareVersion:this.oauthOptions.softwareVersion,notificationPlatform:this.oauthOptions.notificationPlatform,notificationDeviceToken:this.oauthOptions.notificationDeviceToken}))}},{key:"register",value:(t=(0,o.default)(i.default.mark(function e(){var t,n,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isRegistered()){e.next=2;break}throw Error("Client already registered");case 2:if(t=["redirectURI"],n=Object.keys(this.oauthOptions),!((r=t.filter(function(e){return n[e]})).length>0)){e.next=7;break}throw Error("Can't register client : missing ".concat(r," fields"));case 7:return e.next=9,this.doRegistration();case 9:return a=e.sent,this.setOAuthOptions(w(w({},this.oauthOptions),{},{client_id:a.client_id,client_name:a.client_name,client_secret:a.client_secret,registration_access_token:a.registration_access_token,software_id:a.software_id})),e.abrupt("return",this.oauthOptions);case 12:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"unregister",value:(n=(0,o.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new C;case 2:return t=this.oauthOptions.clientID,this.oauthOptions.clientID="",e.abrupt("return",this.fetchJSON("DELETE","/auth/register/".concat(t),null,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}}));case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"fetchInformation",value:(r=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new C;case 2:return e.abrupt("return",this.fetchJSON("GET","/auth/register/".concat(this.oauthOptions.clientID),null,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}}));case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"updateInformation",value:(a=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,s=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]&&s[1],this.isRegistered()){e.next=3;break}throw new C;case 3:return r={clientID:this.oauthOptions.clientID,clientName:this.oauthOptions.clientName,redirectURI:this.oauthOptions.redirectURI,softwareID:this.oauthOptions.softwareID},a=this.snakeCaseOAuthData(w(w({},r),t)),n&&(a.client_secret=this.oauthOptions.clientSecret),e.next=8,this.fetchJSON("PUT","/auth/register/".concat(this.oauthOptions.clientID),a,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}});case 8:return o=e.sent,this.setOAuthOptions(w(w({},a),o)),e.abrupt("return",this.oauthOptions);case 11:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"generateStateCode",value:function(){var e;if("undefined"!=typeof window&&void 0!==window.crypto&&"function"==typeof window.crypto.getRandomValues)e=new Uint8Array(16),window.crypto.getRandomValues(e);else{e=Array(16);for(var t=0;t<e.length;t++)e[t]=Math.floor(255*Math.random())}return btoa(String.fromCharCode.apply(null,e)).replace(/=+$/,"").replace(/\//g,"_").replace(/\+/g,"-")}},{key:"getAuthCodeURL",value:function(e){var t=e.stateCode,n=e.scopes,r=void 0===n?this.scope:n,a=e.sessionCode,i=void 0===a?void 0:a,o=e.codeChallenge,s=void 0===o?void 0:o;if(!this.isRegistered())throw new C;var c={client_id:this.oauthOptions.clientID,redirect_uri:this.oauthOptions.redirectURI,state:t,response_type:"code",scope:r.join(" ")};return this.oauthOptions.registerToken&&(c=w(w({},c),{},{registerToken:this.oauthOptions.registerToken})),i&&(c=w(w({},c),{},{session_code:i})),s&&(c=w(w({},c),{},{code_challenge:s,code_challenge_method:"S256"})),"".concat(this.uri,"/auth/authorize?").concat(this.dataToQueryString(c))}},{key:"dataToQueryString",value:function(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}},{key:"getAccessCodeFromURL",value:function(e,t){if(!t)throw Error("Missing state code");var n=new URL(e).searchParams,r=n.get("state"),a=n.get("access_code");if(t!==r)throw Error("Given state does not match url query state");return a}},{key:"fetchAccessToken",value:(s=(0,o.default)(i.default.mark(function e(t,n,r,a){var o,s,c;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.isRegistered()&&!n)){e.next=2;break}throw new C;case 2:return s={grant_type:"authorization_code",code:t,client_id:(o=n||this.oauthOptions).clientID,client_secret:o.clientSecret},a&&(s=w(w({},s),{},{code_verifier:a})),e.next=7,this.fetchJSON("POST",(r||"")+"/auth/access_token",this.dataToQueryString(s),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 7:return c=e.sent,e.abrupt("return",new v.default(c));case 9:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return s.apply(this,arguments)})},{key:"fetchKonnectorToken",value:(f=(0,o.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchJSON("POST","/auth/tokens/konnectors/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),Error('oAuthClient.fetchKonnectorToken(): Could not create a token for the konnector with slug "'.concat(t,'". \n\n').concat(e.t0));case 9:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return f.apply(this,arguments)})},{key:"fetchSessionCode",value:(p=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetchJSON("POST","/auth/session_code"));case 1:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"fetchSessionCodeWithPassword",value:(h=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.passwordHash,a=void 0===(r=t.twoFactorToken)?void 0:r,s=void 0===(o=t.twoFactorPasscode)?void 0:o,e.abrupt("return",this.fetchJSON("POST","/auth/session_code",{passphrase:n,two_factor_token:a,two_factor_passcode:s}));case 2:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"loginFlagship",value:(b=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,s,c,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=t.emailVerifiedCode)?void 0:n,a=t.passwordHash,s=void 0===(o=t.twoFactorToken)?void 0:o,u=void 0===(c=t.twoFactorPasscode)?void 0:c,e.abrupt("return",this.fetchJSON("POST","/auth/login/flagship",{client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret,email_verified_code:r,passphrase:a,two_factor_token:s,two_factor_passcode:u}));case 2:case"end":return e.stop()}},e,this)})),function(e){return b.apply(this,arguments)})},{key:"refreshToken",value:(O=(0,o.default)(i.default.mark(function e(){var t,n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new C;case 2:if(this.token){e.next=4;break}throw Error("No token to refresh");case 4:return t={grant_type:"refresh_token",refresh_token:this.token.refreshToken,client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret},e.prev=5,e.next=8,this.fetchJSONWithCurrentToken("POST","/auth/access_token",this.dataToQueryString(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 8:return n=e.sent,r=new v.default(w({refresh_token:this.token.refreshToken},n)),this.setToken(r),this.onTokenRefresh&&"function"==typeof this.onTokenRefresh&&this.onTokenRefresh(r),e.abrupt("return",r);case 15:if(e.prev=15,e.t0=e.catch(5),!this.isRevocationError(e.t0)){e.next=21;break}throw this.onRevocationChange(!0),g.default.warn("Client has been revoked. Please authenticate again."),e.t0;case 21:if(!(y.default.EXPIRED_TOKEN.test(e.t0.message)||y.default.INVALID_TOKEN.test(e.t0.message)||y.default.INVALID_TOKEN_ALT.test(e.t0.message))){e.next=28;break}return e.next=24,this.checkForRevocation();case 24:if(!e.sent){e.next=28;break}throw g.default.warn("Client has been revoked. Please authenticate again."),e.t0;case 28:throw e.t0;case 29:case"end":return e.stop()}},e,this,[[5,15]])})),function(){return O.apply(this,arguments)})},{key:"exchangeOAuthSecret",value:function(e,t){return this.fetchJSON("POST",e+"/auth/secret_exchange",{secret:t})}},{key:"setToken",value:function(e){e?this.token=e instanceof v.default?e:new v.default(e):this.token=null}},{key:"setCredentials",value:function(e){return(0,m.default)("setCredentials is deprecated, please replace by setToken"),this.setToken(e)}},{key:"setOAuthOptions",value:function(e){this.oauthOptions=this.camelCaseOAuthData(e)}},{key:"resetClientId",value:function(){this.oauthOptions.clientID=""}},{key:"resetClient",value:function(){this.resetClientId(),this.setUri(null),this.setToken(null)}},{key:"registrationAccessTokenToAuthHeader",value:function(){if(!this.oauthOptions.registrationAccessToken)throw Error("No registration access token");return"Bearer "+this.oauthOptions.registrationAccessToken}},{key:"setPassphraseFlagship",value:function(e){var t=e.registerToken,n=e.passwordHash,r=e.hint,a=e.key,i=e.publicKey,o=e.privateKey,s=e.iterations;return this.fetchJSON("POST","/settings/passphrase/flagship",{register_token:t,passphrase:n,hint:r,key:a,public_key:i,private_key:o,iterations:s,client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret},{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}})}},{key:"checkForRevocation",value:(S=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchInformation();case 3:case 11:return e.abrupt("return",!1);case 6:if(e.prev=6,e.t0=e.catch(0),!this.isRevocationError(e.t0)){e.next=11;break}return this.onRevocationChange(!0),e.abrupt("return",!0);case 12:case"end":return e.stop()}},e,this,[[0,6]])})),function(){return S.apply(this,arguments)})}]),P}(h.default),C=function(e){(0,d.default)(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Client not registered or missing OAuth information";return(0,u.default)(this,n),(e=t.call(this,r)).message=r,e.name="NotRegisteredException",e}return n}((0,a.default)(Error));t.default=O},23385:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OAUTH_CLIENTS_DOCTYPE=void 0;var i=a(n(87757)),o=a(n(59713)),s=a(n(28655)),c=a(n(48926)),u=a(n(34575)),l=a(n(93913)),d=a(n(2205)),f=a(n(78585)),p=a(n(29754)),h=a(n(27361)),v=a(n(7843)),m=n(29460),y=n(39713),g=r(n(5798)),b=n(17647),w=n(89941);function k(){var e=(0,s.default)(["/settings/clients/",""]);return k=function(){return e},e}function x(){var e=(0,s.default)(["/settings/clients/",""]);return x=function(){return e},e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(){var e=(0,s.default)(["/settings/clients"]);return S=function(){return e},e}var E="io.cozy.oauth.clients";t.OAUTH_CLIENTS_DOCTYPE=E;var P=(0,m.normalizeDoctypeJsonApi)(E),_=function(e){(0,d.default)(v,e);var t,n,r,a,o,s=(t=v,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,p.default)(t);return e=n?Reflect.construct(r,arguments,(0,p.default)(this).constructor):r.apply(this,arguments),(0,f.default)(this,e)});function v(e){return(0,u.default)(this,v),s.call(this,E,e)}return(0,l.default)(v,[{key:"all",value:(r=(0,c.default)(i.default.mark(function e(){var t,n,r,a,o,s,c,u,l,d,f,p,v,m,w=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(t=w.length>0&&void 0!==w[0]?w[0]:{}).limit)?100:n,a=t.bookmark,o=t.keys,s={"page[limit]":r,"page[cursor]":a},c=(0,y.uri)(S()),u=g.buildURL(c,s),e.prev=5,e.next=8,this.stackClient.fetchJSON("GET",u);case 8:l=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",(0,b.dontThrowNotFoundError)(e.t0));case 14:if(d=(0,h.default)(l,"links.next",""),p=void 0!==(f=new URL("".concat(this.stackClient.uri).concat(d)).searchParams.get("page[cursor]")||void 0),!o){e.next=24;break}return v=l.data.filter(function(e){return o.includes(e.id)}).map(function(e){return P(e)}),m=C(C({},l.meta),{},{count:v.length}),e.abrupt("return",{data:v,meta:m,next:o.length>v.length&&p,bookmark:f});case 24:return e.abrupt("return",{data:l.data.map(function(e){return P(e)}),meta:l.meta,next:p,bookmark:f});case 25:case"end":return e.stop()}},e,this,[[5,11]])})),function(){return r.apply(this,arguments)})},{key:"get",value:(a=(0,c.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all({keys:[t]});case 2:n=e.sent;case 3:if(!n.next){e.next=9;break}return e.next=6,this.all({keys:[t],bookmark:n.bookmark});case 6:n=e.sent,e.next=3;break;case 9:if(!n.data.length){e.next=13;break}return e.abrupt("return",{data:P(n.data[0])});case 13:throw n.url=(0,y.uri)(x(),t),n.status="404",new w.FetchError(n,"Not Found");case 16:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"destroy",value:(o=(0,c.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.next=3,this.stackClient.fetchJSON("DELETE",(0,y.uri)(k(),n));case 3:return e.abrupt("return",{data:C(C({},P(t)),{},{_deleted:!0})});case 4:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})}]),v}(v.default);_.normalizeDoctype=m.normalizeDoctypeJsonApi;t.default=_},81391:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getPermissionsFor=void 0;var a=r(n(319)),i=r(n(59713)),o=r(n(6479)),s=r(n(87757)),c=r(n(28655)),u=r(n(48926)),l=r(n(34575)),d=r(n(93913)),f=r(n(2205)),p=r(n(78585)),h=r(n(29754)),v=r(n(7843)),m=n(29460),y=n(77880),g=n(39713),b=r(n(58861));function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function k(){var e=(0,c.default)(["/permissions/doctype/","/shared-by-link"]);return k=function(){return e},e}function x(){var e=(0,c.default)(["/permissions/",""]);return x=function(){return e},e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(){var e=(0,c.default)(["/permissions/",""]);return S=function(){return e},e}var E=function(e){return(0,m.normalizeDoc)(e,"io.cozy.permissions")},P=function(e){(0,f.default)(j,e);var t,n,r,i,c,v,m,y,O,P,R,D,M,T=(t=j,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,h.default)(t);return e=n?Reflect.construct(r,arguments,(0,h.default)(this).constructor):r.apply(this,arguments),(0,p.default)(this,e)});function j(){return(0,l.default)(this,j),T.apply(this,arguments)}return(0,d.default)(j,[{key:"get",value:(r=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,g.uri)(S(),t));case 2:return n=e.sent,e.abrupt("return",{data:E(n.data)});case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"create",value:(i=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,c,u,l,d,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._id,t._type,i=void 0===(a=t.codes)?"code":a,c=t.ttl,u=t.tiny,l=(0,o.default)(t,["_id","_type","codes","ttl","tiny"]),(d=new URLSearchParams).append("codes",i),c&&d.append("ttl",c),u&&d.append("tiny",!0),e.next=7,this.stackClient.fetchJSON("POST","/permissions?".concat(d),{data:{type:"io.cozy.permissions",attributes:l}});case 7:return f=e.sent,e.abrupt("return",{data:E(f.data)});case 9:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"add",value:(c=(0,u.default)(s.default.mark(function e(t,n){var r,a,i,o,c,u,l,d=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>2&&void 0!==d[2]?d[2]:{},e.t0=t._type,e.next="io.cozy.apps"===e.t0?4:"io.cozy.konnectors"===e.t0?6:"io.cozy.permissions"===e.t0?8:10;break;case 4:return a="/permissions/apps/".concat(t.slug),e.abrupt("break",11);case 6:return a="/permissions/konnectors/".concat(t.slug),e.abrupt("break",11);case 8:return a="/permissions/".concat(t._id),e.abrupt("break",11);case 10:throw Error("Permissions can only be added on existing permissions, apps and konnectors.");case 11:return i=r.expiresAt,c=(o=r.password)||""===o,u=i||""===i,e.next=16,this.stackClient.fetchJSON("PATCH",a,{data:{type:"io.cozy.permissions",attributes:C(C({permissions:n},c&&{password:o}),u&&{expires_at:i})}});case 16:return l=e.sent,e.abrupt("return",{data:E(l.data)});case 18:case"end":return e.stop()}},e,this)})),function(e,t){return c.apply(this,arguments)})},{key:"destroy",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,g.uri)(x(),e.id))}},{key:"findLinksByDoctype",value:(v=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,g.uri)(k(),t));case 2:return n=e.sent,e.abrupt("return",C(C({},n),{},{data:n.data.map(E)}));case 4:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"findApps",value:(m=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.default.warn("PermissionCollection.findApps will be removed in next version of cozy-client. \n\n      You can use AppCollection.all() instead \n\n      or even better client.query(Q('io.cozy.apps'), {as: 'io.cozy.apps'})"),e.next=3,this.stackClient.fetchJSON("GET","/apps/");case 3:return t=e.sent,e.abrupt("return",C(C({},t),{},{data:t.data.map(function(e){return C({_id:e.id},e)})}));case 5:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"createSharingLink",value:(y=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,o,c,u,l,d,f=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=f.length>1&&void 0!==f[1]?f[1]:{}).ttl,a=n.password,i=n.verbs,o=n.tiny,u=void 0===(c=n.codes)?"code":c,(l=new URLSearchParams).append("codes",u),r&&l.append("ttl",r),o&&l.append("tiny",!0),e.next=8,this.stackClient.fetchJSON("POST","/permissions?".concat(l),{data:{type:"io.cozy.permissions",attributes:C({permissions:_(t,!0,i?{verbs:i}:{})},a&&{password:a})}});case 8:return d=e.sent,e.abrupt("return",{data:E(d.data)});case 10:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"fetchPermissionsByLink",value:(O=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.links&&t.links.next)){e.next=5;break}return e.next=3,this.stackClient.fetchJSON("GET",t.links.next);case 3:return n=e.sent,e.abrupt("return",C(C({},n),{},{data:n.data.map(E)}));case 5:case"end":return e.stop()}},e,this)})),function(e){return O.apply(this,arguments)})},{key:"fetchAllLinks",value:(P=(0,u.default)(s.default.mark(function e(t){var n,r,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findLinksByDoctype(t._type);case 2:r=n=e.sent;case 4:if(!(r.links&&r.links.next)){e.next=11;break}return e.next=7,this.fetchPermissionsByLink(r);case 7:r=e.sent,(i=n.data).push.apply(i,(0,a.default)(r.data)),e.next=4;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,this)})),function(e){return P.apply(this,arguments)})},{key:"revokeSharingLink",value:(R=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllLinks(t);case 2:n=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}}}(e.sent.data.filter(function(e){return A(e,t)})),e.prev=5,n.s();case 7:if((r=n.n()).done){e.next=13;break}return a=r.value,e.next=11,this.destroy(a);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:case"end":return e.stop()}},e,this,[[5,15,18,21]])})),function(e){return R.apply(this,arguments)})},{key:"getOwnPermissions",value:(D=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.default.warn("getOwnPermissions is deprecated, please use fetchOwnPermissions instead"),e.abrupt("return",this.fetchOwnPermissions());case 2:case"end":return e.stop()}},e,this)})),function(){return D.apply(this,arguments)})},{key:"fetchOwnPermissions",value:(M=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/permissions/self");case 2:return t=e.sent,e.abrupt("return",{data:E(t.data),included:t.included?t.included.map(E):[]});case 4:case"end":return e.stop()}},e,this)})),function(){return M.apply(this,arguments)})}]),j}(v.default),_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e._id,a=e._type,i=n.verbs?n.verbs:t?["GET"]:["ALL"];return(0,y.isFile)(e)?{files:{type:"io.cozy.files",verbs:i,values:[r]}}:{collection:{type:a,verbs:i,values:[r]},files:{type:"io.cozy.files",verbs:i,values:["".concat(a,"/").concat(r)],selector:"referenced_by"}}};t.getPermissionsFor=_;var A=function(e,t){var n=t._id;return(0,y.isFile)(t)?-1!==e.attributes.permissions.files.values.indexOf(n):-1!==e.attributes.permissions.collection.values.indexOf(n)};t.default=P},15757:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.normalizeSettings=t.SETTINGS_DOCTYPE=void 0;var a=r(n(28655)),i=r(n(87757)),o=r(n(59713)),s=r(n(48926)),c=r(n(34575)),u=r(n(93913)),l=r(n(2205)),d=r(n(78585)),f=r(n(29754)),p=r(n(7843)),h=r(n(58861)),v=n(39713),m=n(29460);function y(){var e=(0,a.default)(["/data/","/",""]);return y=function(){return e},e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var b="io.cozy.settings";t.SETTINGS_DOCTYPE=b;var w=(0,m.normalizeDoctypeJsonApi)(b);t.normalizeSettings=w;var k=function(e){(0,l.default)(m,e);var t,n,r,a,p=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,f.default)(t);return e=n?Reflect.construct(r,arguments,(0,f.default)(this).constructor):r.apply(this,arguments),(0,d.default)(this,e)});function m(e){return(0,c.default)(this,m),p.call(this,b,e)}return(0,u.default)(m,[{key:"get",value:(r=(0,s.default)(i.default.mark(function e(t){var n,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("io.cozy.settings.bitwarden"!==t){e.next=5;break}return e.next=3,this.stackClient.fetchJSON("GET","/data/io.cozy.settings/io.cozy.settings.bitwarden");case 3:return n=e.sent,e.abrupt("return",{data:w(n)});case 5:return t.startsWith("io.cozy.settings.")?r=t.substring(17):(h.default.warn("Deprecated: in next versions of cozy-client, it will not be possible to query settings with an incomplete id\n\n- Q('io.cozy.settings').getById('instance')\n+ Q('io.cozy.settings').getById('io.cozy.settings.instance')"),r=t),e.next=8,this.stackClient.fetchJSON("GET","/settings/".concat(r));case 8:return a=e.sent,e.abrupt("return",{data:w(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:"/settings/".concat(r)},a.data))});case 10:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"update",value:(a=(0,s.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("io.cozy.settings.instance"!==t._id){e.next=6;break}return e.next=3,this.stackClient.fetchJSON("PUT","/settings/instance",{data:t});case 3:n=e.sent,e.next=9;break;case 6:return e.next=8,this.stackClient.fetchJSON("PUT",(0,v.uri)(y(),this.doctype,t._id),t);case 8:n=e.sent;case 9:return e.abrupt("return",{data:w(n.data)});case 10:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})}]),m}(p.default);k.normalizeDoctype=m.normalizeDoctypeJsonApi;t.default=k},20870:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getSharingRules=t.BITWARDEN_CIPHERS_DOCTYPE=t.BITWARDEN_ORGANIZATIONS_DOCTYPE=t.SHARING_DOCTYPE=void 0;var a=r(n(87757)),i=r(n(59713)),o=r(n(28655)),s=r(n(48926)),c=r(n(34575)),u=r(n(93913)),l=r(n(2205)),d=r(n(78585)),f=r(n(29754)),p=r(n(7843)),h=n(29460),v=n(77880),m=n(39713),y=r(n(58861));function g(){var e=(0,o.default)(["/sharings/","/recipients"]);return g=function(){return e},e}function b(){var e=(0,o.default)(["/sharings/","/recipients/self"]);return b=function(){return e},e}function w(){var e=(0,o.default)(["/sharings/","/groups/",""]);return w=function(){return e},e}function k(){var e=(0,o.default)(["/sharings/","/recipients/",""]);return k=function(){return e},e}function x(){var e=(0,o.default)(["/sharings/","/recipients"]);return x=function(){return e},e}function O(){var e=(0,o.default)(["/sharings/",""]);return O=function(){return e},e}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(){var e=(0,o.default)(["/sharings/doctype/",""]);return E=function(){return e},e}var P="io.cozy.sharings";t.SHARING_DOCTYPE=P;var _="com.bitwarden.organizations";t.BITWARDEN_ORGANIZATIONS_DOCTYPE=_;var A="com.bitwarden.ciphers";t.BITWARDEN_CIPHERS_DOCTYPE=A;var R=(0,h.normalizeDoctypeJsonApi)(P),D=function(e){(0,l.default)(C,e);var t,n,r,i,o,p,h,v=(t=C,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,f.default)(t);return e=n?Reflect.construct(r,arguments,(0,f.default)(this).constructor):r.apply(this,arguments),(0,d.default)(this,e)});function C(){return(0,c.default)(this,C),v.apply(this,arguments)}return(0,u.default)(C,[{key:"findByDoctype",value:(r=(0,s.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,m.uri)(E(),t));case 2:return n=e.sent,e.abrupt("return",S(S({},n),{},{data:n.data.map(R)}));case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"get",value:(i=(0,s.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,m.uri)(O(),t),e.next=3,this.stackClient.fetchJSON("GET",n);case 3:return r=e.sent,e.abrupt("return",{data:R(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"create",value:(o=(0,s.default)(a.default.mark(function e(t){var n,r,i,o,s,c,u,l,d,f,p,h,v;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.document,r=t.description,i=t.previewPath,o=t.rules,c=void 0===(s=t.recipients)?[]:s,l=void 0===(u=t.readOnlyRecipients)?[]:u,d=t.openSharing,f=t.appSlug,p={description:r,preview_path:i,open_sharing:d,rules:o||T(n)},h={},f&&(h={app_slug:f}),e.next=6,this.stackClient.fetchJSON("POST","/sharings/",{data:{type:"io.cozy.sharings",attributes:S(S({},p),h),relationships:S(S({},c.length>0&&{recipients:{data:c.map(B)}}),l.length>0&&{read_only_recipients:{data:l.map(B)}})}});case 6:return v=e.sent,e.abrupt("return",{data:R(v.data)});case 8:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"share",value:(p=(0,s.default)(a.default.mark(function e(t,n,r,i){var o,s,c=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>4&&void 0!==c[4]?c[4]:null,y.default.warn("SharingCollection.share is deprecated, use SharingCollection.create instead"),s="two-way"===r?{recipients:n}:{readOnlyRecipients:n},e.abrupt("return",this.create(S(S({document:t},s),{},{description:i,previewPath:o,openSharing:"two-way"===r,rules:T(t,r)})));case 4:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return p.apply(this,arguments)})},{key:"getDiscoveryLink",value:function(e,t,n){var r=(n||{}).shortcut,a=new URLSearchParams;return a.append("sharecode",t),r&&a.append("shortcut",!0),this.stackClient.fullpath("/sharings/".concat(e,"/discovery?").concat(a))}},{key:"addRecipients",value:(h=(0,s.default)(a.default.mark(function e(t){var n,r,i,o,s,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.document,i=void 0===(r=t.recipients)?[]:r,s=void 0===(o=t.readOnlyRecipients)?[]:o,e.next=3,this.stackClient.fetchJSON("POST",(0,m.uri)(x(),n._id),{data:{type:"io.cozy.sharings",id:n._id,relationships:S(S({},i.length>0&&{recipients:{data:i.map(B)}}),s.length>0&&{read_only_recipients:{data:s.map(B)}})}});case 3:return c=e.sent,e.abrupt("return",{data:R(c.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"revokeRecipient",value:function(e,t){return this.stackClient.fetchJSON("DELETE",(0,m.uri)(k(),e._id,t))}},{key:"revokeGroup",value:function(e,t){return this.stackClient.fetchJSON("DELETE",(0,m.uri)(w(),e._id,t))}},{key:"revokeSelf",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,m.uri)(b(),e._id))}},{key:"revokeAllRecipients",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,m.uri)(g(),e._id))}}]),C}(p.default);D.normalizeDoctype=h.normalizeDoctypeJsonApi;var M=function(e,t){return(0,v.isFile)(e)?L(e,t):e._type===_?Z(e):j(e,t)},T=function(e,t){return t&&y.default.warn("sharingType is deprecated and will be removed. We now set this default rules: ".concat(M(e),"} \n\n      If this default rules do not fill your need, please set custom rules\n      by using the 'rules' object of the SharingCollection.create() method")),M(e,t)};t.getSharingRules=T;var j=function(e,t){var n=e._id,r=e._type;return[S({title:"collection",doctype:r,values:[n]},I(t)),S({title:"items",doctype:"io.cozy.files",values:["".concat(r,"/").concat(n)],selector:"referenced_by"},N(t))]},N=function(e){return"two-way"===e?{add:"sync",update:"sync",remove:"sync"}:{add:"push",update:"none",remove:"push"}},I=function(e){return e?"two-way"===e?{update:"sync",remove:"revoke"}:{update:"push",remove:"revoke"}:{update:"sync",remove:"revoke"}},L=function(e,t){var n=e._id;return[S({title:e.name,doctype:"io.cozy.files",values:[n]},z(e,t))]},z=function(e,t){if((0,v.isDirectory)(e))return t?"two-way"===t?{add:"sync",update:"sync",remove:"sync"}:{add:"push",update:"push",remove:"push"}:{add:"sync",update:"sync",remove:"sync"};return t?"two-way"===t?{update:"sync",remove:"revoke"}:{update:"push",remove:"revoke"}:{update:"sync",remove:"revoke"}},Z=function(e){var t=e._id;return[{title:e.name,doctype:_,values:[t],add:"sync",update:"sync",remove:"revoke"},{title:"Ciphers",doctype:A,values:[t],add:"sync",update:"sync",remove:"sync",selector:"organization_id"}]},B=function(e){return{id:e._id,type:e._type}};t.default=D},54033:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SHORTCUTS_DOCTYPE=void 0;var a=r(n(87757)),i=r(n(28655)),o=r(n(48926)),s=r(n(34575)),c=r(n(93913)),u=r(n(2205)),l=r(n(78585)),d=r(n(29754)),f=r(n(59713)),p=r(n(7843)),h=n(29460),v=n(39713),m=n(14565);function y(){var e=(0,i.default)(["/shortcuts/",""]);return y=function(){return e},e}function g(){var e=(0,i.default)(["/shortcuts"]);return g=function(){return e},e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k="io.cozy.files.shortcuts";t.SHORTCUTS_DOCTYPE=k;var x=(0,h.normalizeDoctypeJsonApi)(k),O=function(e){return w(w({},x(e)),{},{_id:e._id})},C=function(e){(0,u.default)(p,e);var t,n,r,i,f=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);return e=n?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function p(e){return(0,s.default)(this,p),f.call(this,k,e)}return(0,c.default)(p,[{key:"create",value:(r=(0,o.default)(a.default.mark(function e(t){var n,r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.type&&(t.type=k),!(!t.name||!t.name.trim()||!t.url||!t.dir_id)){e.next=3;break}throw Error("you need at least a name, an url and a dir_id attributes to create a shortcut");case 3:if(!("."===(n=t.name.trim())||".."===n)){e.next=6;break}throw Error("Invalid filename: ".concat(n));case 6:if(!(r=(0,m.getIllegalCharacters)(n)).length){e.next=9;break}throw Error("Invalid filename containing illegal character(s): ".concat(r));case 9:return i=(0,v.uri)(g()),e.next=12,this.stackClient.fetchJSON("POST",i,{data:{attributes:t,type:"io.cozy.files.shortcuts"}});case 12:return o=e.sent,e.abrupt("return",{data:O(o.data)});case 14:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"get",value:(i=(0,o.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,v.uri)(y(),t),e.next=3,this.stackClient.fetchJSON("GET",n);case 3:return r=e.sent,e.abrupt("return",{data:O(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})}]),p}(p.default);C.normalizeDoctype=h.normalizeDoctypeJsonApi;t.default=C},83499:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isForAccount=t.isForKonnector=t.normalizeTrigger=t.TRIGGERS_DOCTYPE=t.JOBS_DOCTYPE=void 0;var i=a(n(6479)),o=a(n(59713)),s=a(n(28655)),c=a(n(87757)),u=a(n(48926)),l=a(n(34575)),d=a(n(93913)),f=a(n(16525)),p=a(n(2205)),h=a(n(78585)),v=a(n(29754)),m=r(n(17647)),y=n(29460),g=n(59942),b=n(39713),w=a(n(7843));function k(){var e=(0,s.default)(["/jobs/triggers/","/launch"]);return k=function(){return e},e}function x(){var e=(0,s.default)(["/jobs/triggers/",""]);return x=function(){return e},e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(){var e=(0,s.default)(["/jobs/triggers/",""]);return S=function(){return e},e}function E(){var e=(0,s.default)(["/jobs/triggers"]);return E=function(){return e},e}n(89941);t.JOBS_DOCTYPE="io.cozy.jobs";var P="io.cozy.triggers";t.TRIGGERS_DOCTYPE=P;var _=(0,y.normalizeDoctypeJsonApi)(P);t.normalizeTrigger=_;t.isForKonnector=function(e,t){return"konnector"===e.worker&&e.message.konnector==t};t.isForAccount=function(e,t){return e.message.account==t};var A=function(e,t){var n=new URLSearchParams;return e&&(Array.isArray(e.$in)?n.set("Worker",e.$in.join(",")):n.set("Worker",e)),t&&(Array.isArray(t.$in)?n.set("Type",t.$in.join(",")):n.set("Type",t)),n.toString()},R=function(e){(0,p.default)(D,e);var t,n,r,a,o,s,y,w,O,R=(t=D,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,v.default)(t);return e=n?Reflect.construct(r,arguments,(0,v.default)(this).constructor):r.apply(this,arguments),(0,h.default)(this,e)});function D(e){return(0,l.default)(this,D),R.call(this,P,e)}return(0,d.default)(D,[{key:"all",value:(r=(0,u.default)(c.default.mark(function e(){var t,n,r=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]&&r[0],e.prev=1,e.next=4,this.stackClient.fetchJSON("GET","/jobs/triggers");case 4:return n=e.sent,e.abrupt("return",{data:n.data.map(function(e){return _(e)}),meta:{count:n.data.length},next:!1,skip:0});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",(0,m.dontThrowNotFoundError)(e.t0));case 11:case"end":return e.stop()}},e,this,[[1,8]])})),function(){return r.apply(this,arguments)})},{key:"create",value:(a=(0,u.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,b.uri)(E()),e.next=3,this.stackClient.fetchJSON("POST",n,{data:{attributes:t}});case 3:return r=e.sent,e.abrupt("return",{data:_(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"destroy",value:(o=(0,u.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t._id){e.next=3;break}throw Error("TriggerCollection.destroy needs a document with an _id");case 3:return e.next=5,this.stackClient.fetchJSON("DELETE",(0,b.uri)(S(),n));case 5:return e.abrupt("return",{data:_(C(C({},t),{},{_deleted:!0}))});case 6:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"find",value:(s=(0,u.default)(c.default.mark(function e(){var t,n,r,a,o,s,u=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},n=u.length>1&&void 0!==u[1]?u[1]:{},r=t.worker,a=t.type,!(0===Object.keys((0,i.default)(t,["worker","type"])).length&&!n.partialFilter)){e.next=18;break}return o="/jobs/triggers?".concat(A(r,a)),e.prev=6,e.next=9,this.stackClient.fetchJSON("GET",o);case 9:return s=e.sent,e.abrupt("return",{data:s.data.map(function(e){return _(e)}),meta:{count:s.data.length},next:!1,skip:0});case 13:return e.prev=13,e.t0=e.catch(6),e.abrupt("return",(0,m.dontThrowNotFoundError)(e.t0));case 16:e.next=19;break;case 18:return e.abrupt("return",(0,f.default)((0,v.default)(D.prototype),"find",this).call(this,t,n));case 19:case"end":return e.stop()}},e,this,[[6,13]])})),function(){return s.apply(this,arguments)})},{key:"get",value:(y=(0,u.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.default.get(this.stackClient,(0,b.uri)(x(),t),{normalize:_}));case 1:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"launch",value:(w=(0,u.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,b.uri)(k(),t._id),e.next=3,this.stackClient.fetchJSON("POST",n);case 3:return r=e.sent,e.abrupt("return",{data:(0,g.normalizeJob)(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return w.apply(this,arguments)})},{key:"update",value:(O=(0,u.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=c.default.keys(t);case 1:if((e.t1=e.t0()).done){e.next=7;break}if(["_id","_rev","_type","arguments","message","cozyMetadata"].includes(e.t1.value)){e.next=5;break}throw Error("TriggerCollection.update only works for 'arguments', and 'message' attributes.");case 5:e.next=1;break;case 7:return n=C(C({},t.arguments?{arguments:t.arguments}:{}),t.message?{message:t.message}:{}),e.next=10,this.stackClient.fetchJSON("PATCH","/jobs/triggers/".concat(t._id),{data:{attributes:n}});case 10:return r=e.sent,e.abrupt("return",{data:_(r.data)});case 12:case"end":return e.stop()}},e,this)})),function(e){return O.apply(this,arguments)})}]),D}(w.default);R.normalizeDoctype=y.normalizeDoctypeJsonApi;t.default=R},89941:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.FetchError=t.default=void 0;var a=r(n(34575)),i=r(n(81506)),o=r(n(2205)),s=r(n(78585)),c=r(n(29754)),u=r(n(65957)),l=/the client must be registered/;t.default={EXPIRED_TOKEN:/Expired token/,CLIENT_NOT_FOUND:/Client not found/,INVALID_TOKEN:/Invalid JWT token/,INVALID_TOKEN_ALT:/Invalid token/,UNREGISTERED_CLIENT:l};var d=/invalid_token/,f=/access_token_expired/,p=function(e){var t,n=null===(t=e.headers)||void 0===t?void 0:t.get("www-authenticate");if(n){if(f.test(n))return"Expired token";if(d.test(n))return"Invalid token"}},h=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);return e=n?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function u(e,t){if((0,a.default)(this,u),c=r.call(this),null===(s=Error.captureStackTrace)||void 0===s||s.call(Error,(0,i.default)(c),c.constructor),c.name="FetchError",c.response=e,c.url=e.url,c.status=e.status,c.reason=t,null===t)throw Error("FetchError received a ".concat(e.status," error without a Response Body when calling ").concat(e.url));var n,o,s,c,d=p(e);return Object.defineProperty((0,i.default)(c),"message",{value:(n=t,o=d,("string"==typeof n.error&&l.test(n.error)?n.error:void 0)||n.message||o||("string"==typeof n?n:JSON.stringify(n)))}),c}return u}((0,u.default)(Error));t.FetchError=h},9843:function(e,t,n){"use strict";var r,a,i=n(20862),o=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getIconURL=t.default=t._getIconURL=void 0;var s=o(n(87757)),c=o(n(48926));n(15155);var u=i(n(95692));function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e,t,n,r){if(!n)throw Error("Cannot fetch icon: missing domain");var a=f(e,t,n,r);if(!a)throw Error("Cannot get icon source for app ".concat(e.name));return a},f=function(e,t,n,r){var a=e&&e.links&&e.links.icon||p(e,t);return a?"".concat(r,"//").concat(n).concat(a):null},p=function(e,t){return t?"/registry/".concat(t,"/icon"):e&&e.latest_version&&e.latest_version.version&&"/registry/".concat(e.slug,"/").concat(e.latest_version.version,"/icon")},h={gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},v=function(e){if(!e.icon)throw Error("".concat(e.name,": Cannot detect icon mime type since app has no icon"));var t=e.icon.split(".").pop();if(!t)throw Error("".concat(e.name,": Unable to detect icon mime type from extension (").concat(e.icon,")"));return t};var m=(r=(0,c.default)(s.default.mark(function e(t,n){var r,a,i,o,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}}}(t),e.prev=1,a.s();case 3:if((i=a.n()).done){e.next=18;break}return o=i.value,e.prev=5,e.next=8,o();case 8:return c=e.sent,n&&n(c),e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(5),r=e.t0;case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(1),a.e(e.t1);case 23:return e.prev=23,a.f(),e.finish(23);case 26:throw r;case 27:case"end":return e.stop()}},e,null,[[1,20,23,26],[5,13]])})),function(e,t){return r.apply(this,arguments)});var y=(a=(0,c.default)(s.default.mark(function e(t,n){var r,a,i,o,c,u,l,f,p,y,g,b,w,k;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.type,a=n.slug,i=n.appData,c=void 0===(o=n.priority)?"stack":o,!t.oauthOptions){e.next=29;break}return u=[function(){return t.fetch("GET","/".concat(r,"s/").concat(a,"/icon"))},function(){return t.fetch("GET","/registry/".concat(a,"/icon"))}],"registry"===c&&u.reverse(),e.next=6,m(u,function(e){if(!e.ok)throw Error("Error while fetching icon ".concat(e.statusText))});case 6:return l=e.sent,e.next=9,l.blob();case 9:if((f=e.sent).type){e.next=26;break}if(y=[function(){var e,n,i;return e=t,n=r,i=a,e.fetchJSON("GET","/".concat(n,"s/").concat(i)).then(function(e){return e.data.attributes})},function(){var e,n,r;return e=t,n=0,r=a,e.fetchJSON("GET","/registry/".concat(r)).then(function(e){return e.latest_version.manifest})}],"registry"===c&&y.reverse(),e.t1=i,e.t1){e.next=18;break}return e.next=17,m(y);case 17:e.t1=e.sent;case 18:if(e.t0=e.t1,e.t0){e.next=21;break}e.t0={};case 21:if(h[g=v(p=e.t0)]){e.next=25;break}throw Error('Unknown image extension "'.concat(g,'" for app ').concat(p.name));case 25:f=new Blob([f],{type:h[g]});case 26:return e.abrupt("return",URL.createObjectURL(f));case 29:return e.prev=29,w=(b=new URL(t.uri)).host,k=b.protocol,e.abrupt("return",d(i,a,w,k));case 34:throw e.prev=34,e.t2=e.catch(29),Error("Cannot fetch icon: invalid stackClient.uri: ".concat(e.t2.message));case 37:case"end":return e.stop()}},e,null,[[29,34]])})),function(e,t){return a.apply(this,arguments)});t._getIconURL=y;var g=function(){return y.apply(this,arguments).catch(function(){return new u.ErrorReturned})};t.getIconURL=g;var b=(0,u.default)(g,{maxDuration:3e5,key:function(e,t){var n=t.type,r=t.slug,a=t.priority;return e.uri+NaN+n+":"+r+":"+a}});t.default=b},14565:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIllegalCharacters=void 0;t.getIllegalCharacters=function(e){var t=e.match(/\/|\x00|\n|\r/g);return t?t.join(" "):""}},80419:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"OAuthClient",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"errors",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"FetchError",{enumerable:!0,get:function(){return s.FetchError}}),Object.defineProperty(t,"normalizeDoc",{enumerable:!0,get:function(){return c.normalizeDoc}});var i=a(n(73554)),o=a(n(88441)),s=r(n(89941)),c=n(29460)},12499:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(58861));t.default=function(){a.default.warn.apply(a.default,arguments)}},58861:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(60732)),i=(0,a.default)("cozy-stack-client");a.default.suggest.deny("cozy-stack-client","info");t.default=i},89998:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.makeOperatorsExplicit=t.isMatchingIndex=t.getIndexFields=t.transformSort=t.getIndexNameFromFields=t.makeKeyFromPartialFilter=t.normalizeDesignDoc=void 0;var a=r(n(319)),i=r(n(63038)),o=r(n(59713)),s=r(n(91175)),c=r(n(27361)),u=r(n(18446)),l=r(n(13218));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.normalizeDesignDoc=function(e){var t=e._id||e.id;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:t,_id:t},e.doc)};var f=function e(t){return"object"!=typeof t||null===t?String(t):Object.entries(t).map(function(t){var n=(0,i.default)(t,2),r=n[0],a=n[1];if(Array.isArray(a)&&a.every(function(e){return"string"==typeof e}))return"".concat(r,"_(").concat(a.join("_"),")");if(Array.isArray(a))return"(".concat(a.map(function(t){return"".concat(e(t))}).join(")_".concat(r,"_(")),")");if("object"==typeof a)return"".concat(r,"_").concat(e(a));else return"".concat(r,"_").concat(a)}).join(")_and_(")};t.makeKeyFromPartialFilter=f;t.getIndexNameFromFields=function(e,t){var n="by_".concat(e.join("_and_"));return t?"".concat(n,"_filter_(").concat(f(t),")"):n};t.transformSort=function(e){if(!e||Array.isArray(e))return e;throw Error('Passing an object to the "sort" is not supported')};t.getIndexFields=function(e){var t=e.selector,n=e.partialFilter,r=e.sort;return Array.from(new Set([].concat((0,a.default)((void 0===r?[]:r).map(function(e){return(0,s.default)(Object.keys(e))})),(0,a.default)(t?Object.keys(t):[]),(0,a.default)(n?Object.keys(n):[]))))};t.isMatchingIndex=function(e,t,n){var r=Object.keys((0,c.default)(e,"views"))[0],a=Object.keys((0,c.default)(e,"views.".concat(r,".map.fields")));if((0,u.default)(a,t)){var i=(0,c.default)(e,"views.".concat(r,".map.partial_filter_selector"));if(!n&&!i)return!0;var o=p(null!=n?n:{});if((0,u.default)(o,i))return!0}return!1};var p=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object.entries(t).reduce(function(t,r){var a,s=(0,i.default)(r,2),c=s[0],u=s[1];if("$nor"===c)t.$and=u.map(function(e){return Object.entries(e).reduce(function(e,t){var n=(0,i.default)(t,2),r=n[0],a=n[1];return"string"==typeof a?e[r]={$ne:a}:e[r]=p(a,!0),e},{})}).sort(h);else null!==(a=u.$or)&&void 0!==a&&a.every(function(e){return"string"==typeof e})?t.$or=u.$or.map(function(t){return e((0,o.default)({},c,t),n)}).sort(h):Array.isArray(u)&&u.every(l.default)?t[c]=u.map(function(t){return e(t,n)}).sort(h):(0,l.default)(u)&&!Array.isArray(u)?t[c]=e(u,n):n&&"$eq"===c?t.$ne=u:c.startsWith("$")?t[c]=u:t[c]={$eq:u};return t},{}),a=Object.keys(r).sort();return 1===a.length?r:{$and:a.map(function(e){return(0,o.default)({},e,r[e])})}};t.makeOperatorsExplicit=p;var h=function(e,t){var n=Object.keys(e)[0],r=Object.keys(t)[0];return n.localeCompare(r)}},95692:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorReturned=t.default=void 0;var a=r(n(34575)),i=r(n(2205)),o=r(n(78585)),s=r(n(29754)),c=r(n(65957)),u=function(e){(0,i.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);return e=n?Reflect.construct(r,arguments,(0,s.default)(this).constructor):r.apply(this,arguments),(0,o.default)(this,e)});function c(){return(0,a.default)(this,c),r.apply(this,arguments)}return c}((0,c.default)(String));t.ErrorReturned=u;var l=function(e,t){for(var n=Date.now(),r=0,a=Object.keys(e);r<a.length;r++){var i=a[r];n-e[i].date>t&&delete e[i]}};t.default=function(e,t){var n={};return function(){var r,a=t.key.apply(null,arguments);l(n,t.maxDuration);var i=n[a];if(i)return i.result;var o=e.apply(this,arguments);if(n[a]={result:o,date:Date.now()},"object"==typeof(r=o)&&"function"==typeof r.then)o.then(function(e){e instanceof u&&delete n[a]}).catch(function(e){delete n[a]});return o}}},29460:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeDoc=s,t.normalizeDoctypeJsonApi=function(e){return function(t,n){var r=s(t,e);return o(o({},r),r.attributes||{})}},t.normalizeDoctypeRawApi=function(e){return function(t,n){var r=s(n,e);return o(o({},r),r.attributes||{})}};var a=r(n(59713));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e._id||e.id;return o({id:n,_id:n,_type:t},e)}},68786:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=function(){var e;function t(){(0,o.default)(this,t),this.pending={}}return(0,s.default)(t,[{key:"exec",value:(e=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),(i=this.pending[r])?o=i:(o=t(),this.pending[r]=o),e.prev=3,e.next=6,o;case 6:return s=e.sent,e.abrupt("return",s);case 8:return e.prev=8,this.pending[r]=null,e.finish(8);case 11:case"end":return e.stop()}},e,this,[[3,,8,11]])})),function(t,n){return e.apply(this,arguments)})},{key:"get",value:function(e){var t=e(),n=this.pending[t];return n?n:null}}]),t}();t.default=c},5798:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.buildURL=t.encode=void 0;var a=r(n(63038)),i=r(n(35937)),o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(t)?"["+t.map(function(t){return e(t,!0)}).join(",")+"]":n?encodeURIComponent('"'.concat(t,'"')):encodeURIComponent(t)},s=function(e){return Object.entries(e).map(function(e){var t=(0,a.default)(e,2),n=t[0],r=o(t[1]);return"".concat(n,"=").concat(r)}).join("&")};t.encode=s;t.buildURL=function(e,t){var n=s((0,i.default)(t));return n?"".concat(e,"?").concat(n):e}},15155:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={}},39713:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinPath=function(e,t){return"".concat(e).concat(e.endsWith("/")?"":"/").concat(t)},t.encodePath=t.forceDownload=t.formatBytes=t.slugify=t.sleep=t.attempt=t.uri=void 0;t.uri=function(e){for(var t=[e[0]],n=0;n<(arguments.length<=1?0:arguments.length-1);n++)t.push(encodeURIComponent(n+1<1||arguments.length<=n+1?void 0:arguments[n+1])+e[n+1]);return t.join("")};t.attempt=function(e){return e.then(function(){return!0}).catch(function(){return!1})};t.sleep=function(e,t){return new Promise(function(n){setTimeout(n,e,t)})};t.slugify=function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")};t.formatBytes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(t<0?0:t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]};t.forceDownload=function(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)};t.encodePath=function(e){return e.split("/").map(function(e){return encodeURIComponent(e).replace(/\(/g,"%28").replace(/\)/g,"%29")}).join("/")}},81989:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.shouldXMLHTTPRequestBeUsed=t.fetchWithXMLHttpRequest=void 0;var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),c=a(n(88306));var u=(r=(0,s.default)(i.default.mark(function e(t,n){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,r){var a=new XMLHttpRequest;n.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",n.onUploadProgress,!1),a.onload=function(){4==this.readyState?e(this):r(this)},a.onerror=function(e){r(e)},a.open(n.method,t,!0),a.withCredentials=!0;for(var i=0,s=Object.entries(n.headers);i<s.length;i++){var c=(0,o.default)(s[i],2),u=c[0],l=c[1];a.setRequestHeader(u,l)}a.send(n.body)});case 2:return r=e.sent,e.abrupt("return",{headers:new Headers(r.getAllResponseHeaders().split("\r\n").map(function(e){return e.split(":",2)}).filter(function(e){return 2==e.length})),ok:r.status>=200&&r.status<300,text:function(){var e=(0,s.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.responseText);case 1:case"end":return e.stop()}},e)}));return function t(){return e.apply(this,arguments)}}(),json:function(){var e=(0,s.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(r.responseText));case 1:case"end":return e.stop()}},e)}));return function t(){return e.apply(this,arguments)}}(),status:r.status,statusText:r.statusText});case 4:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.fetchWithXMLHttpRequest=u;var l=(0,c.default)(function(){var e=new XMLHttpRequest;return"onload"in e&&"onprogress"in e});t.shouldXMLHTTPRequestBeUsed=function(e,t,n){return!!n.onUploadProgress&&l()}},39854:function(e,t,n){"use strict";function r(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:function(){return r}})},94346:function(e,t,n){"use strict";function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{Z:function(){return r}})},86802:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(25993),a=n(13065),i=n(74826),o=n(39854),s=n(94346);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if((0,o.Z)(2,arguments),!t||"object"!==c(t))return new Date(NaN);var n=t.years?(0,s.Z)(t.years):0,u=t.months?(0,s.Z)(t.months):0,l=t.weeks?(0,s.Z)(t.weeks):0,d=t.days?(0,s.Z)(t.days):0,f=t.hours?(0,s.Z)(t.hours):0,p=t.minutes?(0,s.Z)(t.minutes):0,h=t.seconds?(0,s.Z)(t.seconds):0,v=(0,i.Z)(e),m=u||n?(0,a.Z)(v,u+12*n):v,y=d||l?(0,r.Z)(m,d+7*l):m;return new Date(y.getTime()+1e3*(h+60*(p+60*f)))}},25993:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(94346),a=n(74826),i=n(39854);function o(e,t){(0,i.Z)(2,arguments);var n=(0,a.Z)(e),o=(0,r.Z)(t);return isNaN(o)?new Date(NaN):o?(n.setDate(n.getDate()+o),n):n}},13065:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(94346),a=n(74826),i=n(39854);function o(e,t){(0,i.Z)(2,arguments);var n=(0,a.Z)(e),o=(0,r.Z)(t);if(isNaN(o))return new Date(NaN);if(!o)return n;var s=n.getDate(),c=new Date(n.getTime());return(c.setMonth(n.getMonth()+o+1,0),s>=c.getDate())?c:(n.setFullYear(c.getFullYear(),c.getMonth(),s),n)}},95110:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>w});var r={};function a(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var i=n("74826"),o=n("39854");function s(e,t){if(null==e)throw TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}var c={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},u=n("99316"),l={date:(0,u.Z)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,u.Z)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,u.Z)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},d={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},f=n("84618"),p={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,f.Z)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,f.Z)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,f.Z)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,f.Z)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,f.Z)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},h=n("42669"),v=n("795"),m={ordinalNumber:(0,v.Z)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,h.Z)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,h.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,h.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,h.Z)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,h.Z)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};let y={code:"en-US",formatDistance:function(e,t,n){var r,a=c[e];if(r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix)return n.comparison&&n.comparison>0?"in "+r:r+" ago";return r},formatLong:l,formatRelative:function(e,t,n,r){return d[e]},localize:p,match:m,options:{weekStartsOn:0,firstWeekContainsDate:1}};var g=43200,b=525600;function w(e,t){return(0,o.Z)(1,arguments),function(e,t,n){(0,o.Z)(2,arguments);var c,u,l,d,f,p,h,v=null!==(c=null!==(u=null==n?void 0:n.locale)&&void 0!==u?u:r.locale)&&void 0!==c?c:y;if(!v.formatDistance)throw RangeError("locale must contain localize.formatDistance property");var m=function(e,t){(0,o.Z)(2,arguments);var n=(0,i.Z)(e),r=(0,i.Z)(t),a=n.getTime()-r.getTime();return a<0?-1:a>0?1:a}(e,t);if(isNaN(m))throw RangeError("Invalid time value");var w=s(s({},n),{addSuffix:!!(null==n?void 0:n.addSuffix),comparison:m});m>0?(d=(0,i.Z)(t),f=(0,i.Z)(e)):(d=(0,i.Z)(e),f=(0,i.Z)(t));var k=String(null!==(l=null==n?void 0:n.roundingMethod)&&void 0!==l?l:"round");if("floor"===k)p=Math.floor;else if("ceil"===k)p=Math.ceil;else if("round"===k)p=Math.round;else throw RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");var x=f.getTime()-d.getTime(),O=x/6e4,C=(x-(a(f)-a(d)))/6e4,S=null==n?void 0:n.unit;if("second"===(h=S?String(S):O<1?"second":O<60?"minute":O<1440?"hour":C<g?"day":C<b?"month":"year")){var E=p(x/1e3);return v.formatDistance("xSeconds",E,w)}if("minute"===h){var P=p(O);return v.formatDistance("xMinutes",P,w)}if("hour"===h){var _=p(O/60);return v.formatDistance("xHours",_,w)}else if("day"===h){var A=p(C/1440);return v.formatDistance("xDays",A,w)}else if("month"===h){var R=p(C/g);return 12===R&&"month"!==S?v.formatDistance("xYears",1,w):v.formatDistance("xMonths",R,w)}else if("year"===h){var D=p(C/b);return v.formatDistance("xYears",D,w)}throw RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}(e,Date.now(),t)}},99316:function(e,t,n){"use strict";function r(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}n.d(t,{Z:function(){return r}})},84618:function(e,t,n){"use strict";function r(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,i=null!=n&&n.width?String(n.width):a;r=e.formattingValues[i]||e.formattingValues[a]}else{var o=e.defaultWidth,s=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(t):t]}}n.d(t,{Z:function(){return r}})},42669:function(e,t,n){"use strict";function r(e){return function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.width,i=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var s=o[0],c=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(c)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(c,function(e){return e.test(s)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(c,function(e){return e.test(s)});return n=e.valueCallback?e.valueCallback(u):u,{value:n=r.valueCallback?r.valueCallback(n):n,rest:t.slice(s.length)}}}n.d(t,{Z:function(){return r}})},795:function(e,t,n){"use strict";function r(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var a=r[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];return{value:o=n.valueCallback?n.valueCallback(o):o,rest:t.slice(a.length)}}}n.d(t,{Z:function(){return r}})},12102:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>f});var r={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},a=n("99316"),i={date:(0,a.Z)({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,a.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,a.Z)({formats:{full:"{{date}} '\xe0' {{time}}",long:"{{date}} '\xe0' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},o={lastWeek:"eeee 'dernier \xe0' p",yesterday:"'hier \xe0' p",today:"'aujourd’hui \xe0' p",tomorrow:"'demain \xe0' p'",nextWeek:"eeee 'prochain \xe0' p",other:"P"},s=n("84618"),c={ordinalNumber:function(e,t){var n,r=Number(e),a=null==t?void 0:t.unit;return 0===r?"0":(n=1===r?a&&["year","week","hour","minute","second"].includes(a)?"\xe8re":"er":"\xe8me",r+n)},era:(0,s.Z)({values:{narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]},defaultWidth:"wide"}),quarter:(0,s.Z)({values:{narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2\xe8me trim.","3\xe8me trim.","4\xe8me trim."],wide:["1er trimestre","2\xe8me trimestre","3\xe8me trimestre","4\xe8me trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,s.Z)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],wide:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]},defaultWidth:"wide"}),day:(0,s.Z)({values:{narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},defaultWidth:"wide"}),dayPeriod:(0,s.Z)({values:{narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"apr\xe8s-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’apr\xe8s-midi",evening:"du soir",night:"du matin"}},defaultWidth:"wide"})},u=n("42669"),l=n("795"),d={ordinalNumber:(0,l.Z)({matchPattern:/^(\d+)(ième|ère|ème|er|e)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e)}}),era:(0,u.Z)({matchPatterns:{narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^av/i,/^ap/i]},defaultParseWidth:"any"}),quarter:(0,u.Z)({matchPatterns:{narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,u.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,u.Z)({matchPatterns:{narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,u.Z)({matchPatterns:{narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},defaultParseWidth:"any"})};let f={code:"fr",formatDistance:function(e,t,n){var a,i=r[e];if(a="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",String(t)),null!=n&&n.addSuffix)return n.comparison&&n.comparison>0?"dans "+a:"il y a "+a;return a},formatLong:i,formatRelative:function(e,t,n,r){return o[e]},localize:c,match:d,options:{weekStartsOn:1,firstWeekContainsDate:4}}},83386:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>c});var r=n("25993"),a=n("39854"),i=n("94346"),o=n("13065");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if((0,a.Z)(2,arguments),!t||"object"!==s(t))return new Date(NaN);var n=t.years?(0,i.Z)(t.years):0,c=t.months?(0,i.Z)(t.months):0,u=t.weeks?(0,i.Z)(t.weeks):0,l=t.days?(0,i.Z)(t.days):0,d=t.hours?(0,i.Z)(t.hours):0,f=t.minutes?(0,i.Z)(t.minutes):0,p=t.seconds?(0,i.Z)(t.seconds):0,h=function(e,t){(0,a.Z)(2,arguments);var n=(0,i.Z)(t);return(0,r.Z)(e,-n)}(function(e,t){(0,a.Z)(2,arguments);var n=(0,i.Z)(t);return(0,o.Z)(e,-n)}(e,c+12*n),l+7*u);return new Date(h.getTime()-1e3*(p+60*(f+60*d)))}},74826:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(39854);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){(0,r.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===a(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},67577:function(e,t,n){"use strict";n.r(t),n.d(t,{useStore:()=>X,useDispatch:()=>et,createStoreHook:()=>$,Provider:()=>w,shallowEqual:()=>I,batch:()=>ei.unstable_batchedUpdates,useSelector:()=>ea,createDispatchHook:()=>ee,createSelectorHook:()=>er,connect:()=>Y,connectAdvanced:()=>j,ReactReduxContext:()=>m});var r,a,i,o,s,c,u,l,d,f,p,h,v=n("67294"),m=v.createContext(null),y=function(e){e()},g={notify:function(){}},b=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=g,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return!!this.unsubscribe},t.trySubscribe=function(){if(!this.unsubscribe){var e,t,n;this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=(e=y,t=null,n=null,{clear:function(){t=null,n=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,a=n={callback:e,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){r&&null!==t&&(r=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}})}},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=g)},e}();let w=function(e){var t=e.store,n=e.context,r=e.children,a=(0,v.useMemo)(function(){var e=new b(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}},[t]),i=(0,v.useMemo)(function(){return t.getState()},[t]);(0,v.useEffect)(function(){var e=a.subscription;return e.trySubscribe(),i!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[a,i]);var o=n||m;return v.createElement(o.Provider,{value:a},r)};var k=n("16019"),x=n("70443"),O=n("8679"),C=n.n(O),S=n("59864"),E="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?v.useLayoutEffect:v.useEffect,P=[],_=[null,null];function A(e,t){var n=e[1];return[t.payload,n+1]}function R(e,t,n){E(function(){return e.apply(void 0,t)},n)}function D(e,t,n,r,a,i,o){e.current=r,t.current=a,n.current=!1,i.current&&(i.current=null,o())}function M(e,t,n,r,a,i,o,s,c,u){if(e){var l=!1,d=null,f=function(){if(!l){var e,n,f=t.getState();try{e=r(f,a.current)}catch(e){n=e,d=e}!n&&(d=null),e===i.current?!o.current&&c():(i.current=e,s.current=e,o.current=!0,u({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=f,n.trySubscribe(),f(),function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var T=function(){return[null,0]};function j(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,a=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,i=n.methodName,o=void 0===i?"connectAdvanced":i,s=n.renderCountProp,c=void 0===s?void 0:s,u=n.shouldHandleStateChanges,l=void 0===u||u,d=n.storeKey,f=void 0===d?"store":d,p=(n.withRef,n.forwardRef),h=void 0!==p&&p,y=n.context,g=void 0===y?m:y,w=(0,x.Z)(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);return function(t){var n=t.displayName||t.name||"Component",r=a(n),i=(0,k.Z)({},w,{getDisplayName:a,methodName:o,renderCountProp:c,shouldHandleStateChanges:l,storeKey:f,displayName:r,wrappedComponentName:n,WrappedComponent:t}),s=w.pure,u=s?v.useMemo:function(e){return e()};function d(n){var r=(0,v.useMemo)(function(){var e=n.reactReduxForwardedRef,t=(0,x.Z)(n,["reactReduxForwardedRef"]);return[n.context,e,t]},[n]),a=r[0],o=r[1],s=r[2],c=(0,v.useMemo)(function(){return a&&a.Consumer&&(0,S.isContextConsumer)(v.createElement(a.Consumer,null))?a:g},[a,g]),d=(0,v.useContext)(c),f=!!n.store&&!!n.store.getState&&!!n.store.dispatch;d&&d.store;var p=f?n.store:d.store,h=(0,v.useMemo)(function(){return e(p.dispatch,i)},[p]),m=(0,v.useMemo)(function(){if(!l)return _;var e=new b(p,f?null:d.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[p,f,d]),y=m[0],w=m[1],O=(0,v.useMemo)(function(){return f?d:(0,k.Z)({},d,{subscription:y})},[f,d,y]),C=(0,v.useReducer)(A,P,T),E=C[0][0],j=C[1];if(E&&E.error)throw E.error;var N=(0,v.useRef)(),I=(0,v.useRef)(s),L=(0,v.useRef)(),z=(0,v.useRef)(!1),Z=u(function(){return L.current&&s===I.current?L.current:h(p.getState(),s)},[p,E,s]);R(D,[I,N,z,s,Z,L,w]),R(M,[l,p,y,h,I,N,z,L,w,j],[p,y,h]);var B=(0,v.useMemo)(function(){return v.createElement(t,(0,k.Z)({},Z,{ref:o}))},[o,t,Z]);return(0,v.useMemo)(function(){return l?v.createElement(c.Provider,{value:O},B):B},[c,B,O])}var p=s?v.memo(d):d;if(p.WrappedComponent=t,p.displayName=r,h){var m=v.forwardRef(function(e,t){return v.createElement(p,(0,k.Z)({},e,{reactReduxForwardedRef:t}))});return m.displayName=r,m.WrappedComponent=t,C()(m,t)}return C()(p,t)}}function N(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function I(e,t){if(N(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!N(e[n[a]],t[n[a]]))return!1;return!0}var L=n("70980");function z(e){return function(t,n){var r=e(t,n);function a(){return r}return a.dependsOnOwnProps=!1,a}}function Z(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?!!e.dependsOnOwnProps:1!==e.length}function B(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Z(e);var a=r(t,n);return"function"==typeof a&&(r.mapToProps=a,r.dependsOnOwnProps=Z(a),a=r(t,n)),a},r}}let F=[function(e){return"function"==typeof e?B(e,"mapDispatchToProps"):void 0},function(e){return e?void 0:z(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?z(function(t){return(0,L.bindActionCreators)(e,t)}):void 0}],U=[function(e){return"function"==typeof e?B(e,"mapStateToProps"):void 0},function(e){return e?void 0:z(function(){return{}})}];function V(e,t,n){return(0,k.Z)({},n,{},e,{},t)}let H=[function(e){var t;return"function"==typeof e?(t=e,function(e,n){n.displayName;var r,a=n.pure,i=n.areMergedPropsEqual,o=!1;return function(e,n,s){var c=t(e,n,s);return o?(!a||!i(c,r))&&(r=c):(o=!0,r=c),r}}):void 0},function(e){return e?void 0:function(){return V}}];function W(e,t,n,r){return function(a,i){return n(e(a,i),t(r,i),i)}}function q(e,t,n,r,a){var i,o,s,c,u,l=a.areStatesEqual,d=a.areOwnPropsEqual,f=a.areStatePropsEqual,p=!1;return function(a,h){var v,m;return p?function(a,p){var h,v,m=!d(p,o),y=!l(a,i);if(i=a,o=p,m&&y)return s=e(i,o),t.dependsOnOwnProps&&(c=t(r,o)),u=n(s,c,o);if(m)return e.dependsOnOwnProps&&(s=e(i,o)),t.dependsOnOwnProps&&(c=t(r,o)),u=n(s,c,o);if(y){;return v=!f(h=e(i,o),s),s=h,v&&(u=n(s,c,o)),u}return u}(a,h):(v=a,m=h,s=e(i=v,o=m),c=t(r,o),u=n(s,c,o),p=!0,u)}}function G(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,a=t.initMergeProps,i=(0,x.Z)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),o=n(e,i),s=r(e,i),c=a(e,i);return(i.pure?q:W)(o,s,c,e,i)}function K(e,t,n){for(var r=t.length-1;r>=0;r--){var a=t[r](e);if(a)return a}return function(t,r){throw Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function Q(e,t){return e===t}let Y=(o=void 0===(i=(a={}).connectHOC)?j:i,c=void 0===(s=a.mapStateToPropsFactories)?U:s,l=void 0===(u=a.mapDispatchToPropsFactories)?F:u,f=void 0===(d=a.mergePropsFactories)?H:d,h=void 0===(p=a.selectorFactory)?G:p,function(e,t,n,r){void 0===r&&(r={});var a=r,i=a.pure,s=a.areStatesEqual,u=a.areOwnPropsEqual,d=void 0===u?I:u,p=a.areStatePropsEqual,v=void 0===p?I:p,m=a.areMergedPropsEqual,y=void 0===m?I:m,g=(0,x.Z)(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),b=K(e,c,"mapStateToProps"),w=K(t,l,"mapDispatchToProps"),O=K(n,f,"mergeProps");return o(h,(0,k.Z)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:!!e,initMapStateToProps:b,initMapDispatchToProps:w,initMergeProps:O,pure:void 0===i||i,areStatesEqual:void 0===s?Q:s,areOwnPropsEqual:d,areStatePropsEqual:v,areMergedPropsEqual:y},g))});function J(){var e=(0,v.useContext)(m);return e}function $(e){void 0===e&&(e=m);var t=e===m?J:function(){return(0,v.useContext)(e)};return function(){return t().store}}var X=$();function ee(e){void 0===e&&(e=m);var t=e===m?X:$(e);return function(){return t().dispatch}}var et=ee(),en=function(e,t){return e===t};function er(e){void 0===e&&(e=m);var t=e===m?J:function(){return(0,v.useContext)(e)};return function(e,n){void 0===n&&(n=en);var r=t(),a=function(e,t,n,r){var a,i=(0,v.useReducer)(function(e){return e+1},0)[1],o=(0,v.useMemo)(function(){return new b(n,r)},[n,r]),s=(0,v.useRef)(),c=(0,v.useRef)(),u=(0,v.useRef)(),l=(0,v.useRef)(),d=n.getState();try{a=e!==c.current||d!==u.current||s.current?e(d):l.current}catch(e){throw s.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+s.current.stack+"\n\n"),e}return E(function(){c.current=e,u.current=d,l.current=a,s.current=void 0}),E(function(){function e(){try{var e=c.current(n.getState());if(t(e,l.current))return;l.current=e}catch(e){s.current=e}i()}return o.onStateChange=e,o.trySubscribe(),e(),function(){return o.tryUnsubscribe()}},[n,o]),a}(e,n,r.store,r.subscription);return(0,v.useDebugValue)(a),a}}var ea=er(),ei=n("73935");y=ei.unstable_batchedUpdates},70980:function(e,t,n){"use strict";n.r(t),n.d(t,{__DO_NOT_USE__ActionTypes:function(){return i},applyMiddleware:function(){return f},bindActionCreators:function(){return u},combineReducers:function(){return s},compose:function(){return d},createStore:function(){return o}});var r=n(16235),a=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+a(),REPLACE:"@@redux/REPLACE"+a(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+a()}};function o(e,t,n){if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(o)(e,t)}if("function"!=typeof e)throw Error("Expected the reducer to be a function.");var a,s=e,c=t,u=[],l=u,d=!1;function f(){l===u&&(l=u.slice())}function p(){if(d)throw Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function h(e){if("function"!=typeof e)throw Error("Expected the listener to be a function.");if(d)throw Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return f(),l.push(e),function(){if(!!t){if(d)throw Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,f();var n=l.indexOf(e);l.splice(n,1),u=null}}}function v(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw Error("Reducers may not dispatch actions.");try{d=!0,c=s(c,e)}finally{d=!1}for(var t=u=l,n=0;n<t.length;n++)(0,t[n])();return e}return v({type:i.INIT}),(a={dispatch:v,subscribe:h,getState:p,replaceReducer:function(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");s=e,v({type:i.REPLACE})}})[r.Z]=function(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw TypeError("Expected the observer to be an object.");function t(){e.next&&e.next(p())}return t(),{unsubscribe:h(t)}}})[r.Z]=function(){return this},e},a}function s(e){for(var t,n=Object.keys(e),r={},a=0;a<n.length;a++){var o=n[a];"function"==typeof e[o]&&(r[o]=e[o])}var s=Object.keys(r);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:i.INIT}))throw Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+i.INIT)+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(r)}catch(e){t=e}return function(e,n){if(void 0===e&&(e={}),t)throw t;for(var a=!1,i={},o=0;o<s.length;o++){var c=s[o],u=r[c],l=e[c],d=u(l,n);if(void 0===d)throw Error(function(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}(c,n));i[c]=d,a=a||d!==l}return(a=a||s.length!==Object.keys(e).length)?i:e}}function c(e,t){return function(){return t(e.apply(this,arguments))}}function u(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var a=e[r];"function"==typeof a&&(n[r]=c(a,t))}return n}function l(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function d(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function f(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},a={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map(function(e){return e(a)});return r=d.apply(void 0,i)(n.dispatch),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){var r,a,i;r=e,a=t,i=n[t],a in r?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{dispatch:r})}}}},8969:function(e,t,n){"use strict";var r,a,i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.startApp=t.default=t.checkApp=void 0;var o=i(n(87757)),s=i(n(48926)),c=n(54878),u=function(){return window.startApp},l=function(e){var t=e.appId,n=e.uri;return(0,c.isAndroidApp)()?{package:t}:n},d={};var f=d.startApp=(r=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.startApp,e.next=3,d.checkApp(t);case 3:if(!e.sent){e.next=9;break}return r=l(t),e.abrupt("return",new Promise(function(e,t){if(!u()){t(Error("Cordova plugin 'com.lampa.startapp' is not installed. This plugin is needed to start a native app. Required by cozy-bar"));return}n.set(r).start(e,t)}));case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.startApp=f;var p=d.checkApp=(a=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.startApp,r=l(t),e.abrupt("return",new Promise(function(e,t){if(!u()){t(Error("Cordova plugin 'com.lampa.startapp' is not installed."));return}n.set(r).check(function(t){return e("OK"===t||t)},function(n){!1===n||0===n.indexOf("NameNotFoundException")?e(!1):t(n)})}));case 3:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});t.checkApp=p;t.default=d},31555:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCordova=void 0;t.isCordova=function(){return"undefined"!=typeof window&&void 0!==window.cordova}},34586:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openDeeplinkOrRedirect=void 0;var n=function(e,t,n){var r=document.createElement("iframe");return r.src=t,r.id="hiddenIframe_".concat(n),r.style.display="none",e.appendChild(r),r},r=function(e,t){var r=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);window.addEventListener("blur",o);var a=n(document.body,"about:blank",r),i=setTimeout(function(){t(),window.removeEventListener("blur",o),a.parentElement.removeChild(a)},500);function o(){clearTimeout(i),window.removeEventListener("blur",o),a.parentElement.removeChild(a)}a.contentWindow.location.href=e},a=function(e,t){for(var n=setTimeout(function(){t(),r.removeEventListener("blur",a)},500),r=window;r!=r.parent;)r=r.parent;function a(){clearTimeout(n),r.removeEventListener("blur",a)}r.addEventListener("blur",a),window.location=e},i=function(e,t){navigator.msLaunchUri(e,void 0,t)},o=function(){var e=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t=navigator.userAgent.toLowerCase(),n=t.includes("safari")&&!t.includes("chrome")||Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,r=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,a=r&&(t.includes("os 12_2")||t.includes("os 12_3"));return{isOpera:e,isFirefox:void 0!==window.InstallTrigger,isSafari:n,isChrome:!!window.chrome&&!e,isIOS122:a,isIOS:r}};t.openDeeplinkOrRedirect=function(e,t){if(navigator.msLaunchUri)i(e,t);else{var n=o();n.isChrome||n.isIOS&&!n.isIOS122?a(e,t):n.isSafari&&!n.isIOS122||n.isFirefox?r(e,t):t()}}},26082:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceName=void 0;var a=r(n(48403)),i=n(31555),o=n(28715),s=n(54878),c="Device",u=function(e){for(var t=0,n=["iPhone","iPad","Watch","AppleTV"];t<n.length;t++){var r=n[t];if(e.match(new RegExp(r)))return r}return c};t.getDeviceName=function(){if(!(0,o.hasDevicePlugin)())return(0,i.isCordova)()&&console.warn("You should install `cordova-plugin-device`."),c;var e=window.device,t=e.manufacturer,n=e.model,r=(0,s.isIOSApp)()?u(n):n;return"".concat((0,a.default)(t)," ").concat(r)}},70574:function(e,t,n){"use strict";var r,a,i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isFlagshipOfflineSupported=t.isFlagshipApp=t.getFlagshipMetadata=t.FlagshipRoutes=void 0;var o=i(n(33918));t.FlagshipRoutes=a,(r=a||(t.FlagshipRoutes=a={})).Home="home",r.Cozyapp="cozyapp",r.Authenticate="authenticate",r.Onboarding="onboarding",r.Stack="stack";var s=function(){return"undefined"!=typeof window?window:void(0,o.default)("error",'"window" is not defined. This means that getGlobalWindow() shouldn\'t have been called and investigation should be done to prevent this call')};t.getFlagshipMetadata=function(){var e,t,n;return null!==(e=null===(t=s())||void 0===t?void 0:null===(n=t.cozy)||void 0===n?void 0:n.flagship)&&void 0!==e?e:{}};t.isFlagshipApp=function(){var e,t;return(null===(e=s())||void 0===e?void 0:null===(t=e.cozy)||void 0===t?void 0:t.flagship)!==void 0};t.isFlagshipOfflineSupported=function(){var e,t,n;return null===(e=s())||void 0===e?void 0:null===(t=e.cozy)||void 0===t?void 0:null===(n=t.flagship)||void 0===n?void 0:n.offline_available}},25976:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"checkApp",{enumerable:!0,get:function(){return i.checkApp}}),Object.defineProperty(t,"getDeviceName",{enumerable:!0,get:function(){return a.getDeviceName}}),Object.defineProperty(t,"getFlagshipMetadata",{enumerable:!0,get:function(){return l.getFlagshipMetadata}}),Object.defineProperty(t,"getPlatform",{enumerable:!0,get:function(){return r.getPlatform}}),Object.defineProperty(t,"hasDevicePlugin",{enumerable:!0,get:function(){return o.hasDevicePlugin}}),Object.defineProperty(t,"hasInAppBrowserPlugin",{enumerable:!0,get:function(){return o.hasInAppBrowserPlugin}}),Object.defineProperty(t,"hasNetworkInformationPlugin",{enumerable:!0,get:function(){return o.hasNetworkInformationPlugin}}),Object.defineProperty(t,"hasSafariPlugin",{enumerable:!0,get:function(){return o.hasSafariPlugin}}),Object.defineProperty(t,"isAndroid",{enumerable:!0,get:function(){return r.isAndroid}}),Object.defineProperty(t,"isAndroidApp",{enumerable:!0,get:function(){return r.isAndroidApp}}),Object.defineProperty(t,"isCordova",{enumerable:!0,get:function(){return s.isCordova}}),Object.defineProperty(t,"isFlagshipApp",{enumerable:!0,get:function(){return l.isFlagshipApp}}),Object.defineProperty(t,"isFlagshipOfflineSupported",{enumerable:!0,get:function(){return l.isFlagshipOfflineSupported}}),Object.defineProperty(t,"isIOS",{enumerable:!0,get:function(){return r.isIOS}}),Object.defineProperty(t,"isIOSApp",{enumerable:!0,get:function(){return r.isIOSApp}}),Object.defineProperty(t,"isMobile",{enumerable:!0,get:function(){return r.isMobile}}),Object.defineProperty(t,"isMobileApp",{enumerable:!0,get:function(){return r.isMobileApp}}),Object.defineProperty(t,"isWebApp",{enumerable:!0,get:function(){return r.isWebApp}}),Object.defineProperty(t,"nativeLinkOpen",{enumerable:!0,get:function(){return c.nativeLinkOpen}}),Object.defineProperty(t,"openDeeplinkOrRedirect",{enumerable:!0,get:function(){return u.openDeeplinkOrRedirect}}),Object.defineProperty(t,"startApp",{enumerable:!0,get:function(){return i.startApp}});var r=n(54878),a=n(26082),i=n(8969),o=n(28715),s=n(31555),c=n(9526),u=n(34586),l=n(70574)},9526:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.nativeLinkOpen=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(28715);var c=(r=(0,o.default)(i.default.mark(function e(t){var n,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,(0,s.hasSafariPlugin)();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}e.t0=window.SafariViewController;case 6:if(!e.t0){e.next=10;break}window.SafariViewController.show({url:n,transition:"curl"},function(e){"closed"===e.event&&window.SafariViewController.hide()},function(){window.SafariViewController.hide()}),e.next=11;break;case 10:(0,s.hasInAppBrowserPlugin)()?(r="_blank",a="clearcache=yes,zoom=no",window.cordova.InAppBrowser.open(n,r,a)):window.location=n;case 11:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.nativeLinkOpen=c},54878:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebApp=t.isMobileApp=t.isMobile=t.isIOSApp=t.isIOS=t.isAndroidApp=t.isAndroid=t.getPlatform=void 0;var r=n(31555),a=function(){return(0,r.isCordova)()?window.cordova.platformId:"web"};t.getPlatform=a;var i=function(e){return a()===e};t.isIOSApp=function(){return i("ios")};t.isAndroidApp=function(){return i("android")};t.isWebApp=function(){return i("web")};t.isMobileApp=function(){return(0,r.isCordova)()};var o=function(){return window.navigator.userAgent&&window.navigator.userAgent.indexOf("Android")>=0};t.isAndroid=o;var s=function(){return window.navigator.userAgent&&/iPad|iPhone|iPod/.test(window.navigator.userAgent)};t.isIOS=s;t.isMobile=function(){return o()||s()}},28715:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasSafariPlugin=t.hasNetworkInformationPlugin=t.hasInAppBrowserPlugin=t.hasDevicePlugin=void 0;var r=n(31555);t.hasDevicePlugin=function(){return(0,r.isCordova)()&&void 0!==window.device};t.hasInAppBrowserPlugin=function(){return(0,r.isCordova)()&&void 0!==window.cordova.InAppBrowser};t.hasSafariPlugin=function(){return new Promise(function(e){if(!(0,r.isCordova)()||void 0===window.SafariViewController){e(!1);return}window.SafariViewController.isAvailable(function(t){return e(t)})})};t.hasNetworkInformationPlugin=function(){return(0,r.isCordova)()&&void 0!==window.navigator.connection}},10797:function(e,t,n){"use strict";var r=n(95318),a=r(n(59713)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),c=r(n(78585)),u=r(n(29754));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var p=n(84775),h=n(35937),v=n(27361),m="io.cozy.accounts",y=["login","identifier","new_identifier","email"],g=function(e){(0,s.default)(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function l(){return(0,i.default)(this,l),r.apply(this,arguments)}return(0,o.default)(l,null,[{key:"getAccountName",value:function(e){return e?e.auth&&(e.auth.accountName||this.getAccountLogin(e))||e._id:null}},{key:"getAccountLogin",value:function(e){if(e&&e.auth){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(y);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.auth[r])return e.auth[r]}}catch(e){n.e(e)}finally{n.f()}}}},{key:"fromCipher",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=d({identifierProperty:"login"},n),i=(v(e,"fields")||[]).reduce(function(e,t){return e[t.name]=t.value,e},{}),o={auth:h(d((t={},(0,a.default)(t,r.identifierProperty,v(e,"login.username","")),(0,a.default)(t,"password",v(e,"login.password","")),t),i),function(e){return!!e})};return e&&(o.relationships={vaultCipher:{_id:e.id,_type:"com.bitwarden.ciphers",_protocol:"bitwarden"}}),o}}]),l}(p);g.schema={doctype:m,attributes:{},relationships:{master:{type:"has-one",doctype:m}}},g.probableLoginFieldNames=y,e.exports=g},13539:function(e,t,n){"use strict";var r=n(95318),a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(78585)),c=r(n(29754)),u=n(84775),l="io.cozy.apps",d=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);return e=n?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function u(){return(0,a.default)(this,u),r.apply(this,arguments)}return(0,i.default)(u,null,[{key:"getStoreInstallationURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.slug)throw Error("Expected app / konnector with the defined slug");var n=this.isInstalled(e,{slug:"store"});if(!n)return null;var r=n.links&&n.links.related;return r?"".concat(r,"#/discover/").concat(t.slug,"/install"):null}},{key:"isInstalled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.find(function(e){return e.attributes&&e.attributes.slug===t.slug})}},{key:"getUrl",value:function(e){return e.links&&e.links.related}}]),u}(u);d.schema={doctype:l,attributes:{}},d.doctype=l,e.exports=d},84775:function(e,t,n){"use strict";var r,a=n(95318),i=a(n(319)),o=a(n(6479)),s=a(n(87757)),c=a(n(59713)),u=a(n(48926)),l=a(n(2205)),d=a(n(78585)),f=a(n(29754)),p=a(n(34575)),h=a(n(93913)),v=["concurrency","logProgress"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=n(57557),w=n(78718),k=n(84238),x=n(14176),O=n(52353),C=n(17204),S=n(35937),E=n(94654),P=n(7739),_=n(89734),A=n(27361),R=n(42582).parallelMap,D=n(18621).default,M=n(71450).Q,T=n(33918).namespace("Document"),j=n(87735),N={},I=["shortLabel"];function L(e){return e.startsWith("\\")?e.slice(1):e}var z=function(e){return x(e,O)},Z=function(e){return Object.assign({},e,{_deleted:!0})},B=function(e){var t=e.cozyMetadata&&e.cozyMetadata.updatedAt;return t?new Date(t):null},F=function(e){var t=B(e);return t?-t:0},U=function(){var e,t,n,r,a,c,m,x,O,B,U,V,H,W;function q(){(0,p.default)(this,q)}return(0,h.default)(q,null,[{key:"registerClient",value:function(e){if(this.cozyClient)throw console.warn("Document already has been registered, this is not possible to re-register as the client is shared globally between all classes. This is to prevent concurrency bugs."),Error("Document cannot be re-registered to a client.");this.cozyClient=e}},{key:"copyWithClient",value:function(e){var t=function(e){(0,l.default)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,f.default)(t);return e=n?Reflect.construct(r,arguments,(0,f.default)(this).constructor):r.apply(this,arguments),(0,d.default)(this,e)});function a(){return(0,p.default)(this,a),r.apply(this,arguments)}return(0,h.default)(a)}(this);return t.cozyClient=null,t.registerClient(e),t}},{key:"usesCozyClient",value:function(){return this.cozyClient instanceof D}},{key:"getIndex",value:function(e,t){if(this.usesCozyClient())throw Error("This method is not implemented yet with CozyClient");return this.getIndexViaOldClient(e,t)}},{key:"getIndexViaOldClient",value:function(e,t){var n="".concat(e,":").concat(t.slice().join(","));return!N[n]&&(N[n]=this.cozyClient.data.defineIndex(e,t).then(function(e){return N[n]=e,e})),Promise.resolve(N[n])}},{key:"addCozyMetadata",value:function(e){return!e.cozyMetadata&&(e.cozyMetadata={}),e.cozyMetadata.updatedAt=new Date,!e.cozyMetadata.createdByApp&&this.createdByApp&&(e.cozyMetadata.createdByApp=this.createdByApp),this.createdByApp&&!function(e,t){!e.updatedByApps&&(e.updatedByApps=[]);var n=new Date,r,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(e.updatedByApps);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.slug===t){i.date=n;return}}}catch(e){a.e(e)}finally{a.f()}e.updatedByApps.push({slug:t,date:n})}(e.cozyMetadata,this.createdByApp),e}},{key:"get",value:(e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.usesCozyClient()){e.next=2;break}throw Error("This method is not implemented with cozy-client-js");case 2:if(this.doctype){e.next=4;break}throw Error("doctype is not defined");case 4:return e.next=6,this.cozyClient.collection(this.doctype).get(t);case 6:return n=e.sent,e.abrupt("return",n.data);case 8:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"createOrUpdate",value:(t=(0,u.default)(s.default.mark(function e(t){var n,r=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:{},!this.usesCozyClient()){e.next=3;break}return e.abrupt("return",this.createOrUpdateViaNewClient(t,n));case 3:return e.abrupt("return",this.createOrUpdateViaOldClient(t,n));case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"applyUpdateIfDifferent",value:function(e,t){return!this.checkAttributes||function(e,t){if(0===Object.keys(e).length)return!0;for(var n in e)if(e[n]!==t[n])return!0;return!1}(w(e,this.checkAttributes),w(t,this.checkAttributes))?(delete t.dateImport,this.addCozyMetadata(y(y({},e),t))):(T("debug","[updateIfDifferent] No need to update ".concat(t._id," because its `checkedAttributes` (").concat(this.checkAttributes,") didn't change.")),e)}},{key:"getHandleDuplicateStrategy",value:function(e){if(q.duplicateHandlingStrategies[e])return q.duplicateHandlingStrategies[e];throw Error("".concat(e," is not a know duplication handling strategy. Known strategies are ").concat(Object.keys(q.duplicateHandlingStrategies)))}},{key:"handleDuplicates",value:(n=(0,u.default)(s.default.mark(function e(t,n,r){var a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof(a=t||this.defaultDuplicateHandling)?this.getHandleDuplicateStrategy(a):a,e.next=4,i.call(this,n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"createOrUpdateViaNewClient",value:(r=(0,u.default)(s.default.mark(function e(t,n){var r,a,i,o,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=C(this.idAttributes.map(function(e){return[e,A(t,L(e))]})),a=[],k(z(r))!==this.idAttributes.length){e.next=7;break}return e.next=6,this.queryAll(r);case 6:a=e.sent;case 7:if(0!==a.length){e.next=11;break}return e.abrupt("return",this.create(this.addCozyMetadata(t)));case 11:if(!((a=_(a,F)).length>1)){e.next=15;break}return e.next=15,this.handleDuplicates(n.handleDuplicates,a,r);case 15:if(i=a[0],o=b(t,I),!((c=this.applyUpdateIfDifferent(i,o))!==i)){e.next=22;break}return e.abrupt("return",this.cozyClient.save(c));case 22:return e.abrupt("return",c);case 23:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"createOrUpdateViaOldClient",value:(a=(0,u.default)(s.default.mark(function e(t,n){var r,a,i,o,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=C(this.idAttributes.map(function(e){return[e,A(t,L(e))]})),a=[],k(z(r))!==this.idAttributes.length){e.next=10;break}return e.next=6,this.getIndex(this.doctype,this.idAttributes);case 6:return i=e.sent,e.next=9,this.cozyClient.data.query(i,{selector:r});case 9:a=e.sent;case 10:if(0!==a.length){e.next=14;break}return e.abrupt("return",this.cozyClient.data.create(this.doctype,this.addCozyMetadata(t)));case 14:if(!((a=_(a,F)).length>1)){e.next=18;break}return e.next=18,this.handleDuplicates(n.handleDuplicates,a,r);case 18:if(o=a[0],c=b(t,I),!((u=this.applyUpdateIfDifferent(o,c))!==o)){e.next=25;break}return e.abrupt("return",this.cozyClient.data.updateAttributes(this.doctype,u._id,u));case 25:return e.abrupt("return",o);case 26:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"create",value:function(e){return this.usesCozyClient()?this.createViaNewClient(e):this.createViaOldClient(e)}},{key:"createViaNewClient",value:function(e){return this.cozyClient.create(this.doctype,e)}},{key:"createViaOldClient",value:function(e){return this.cozyClient.data.create(this.doctype,e)}},{key:"bulkSave",value:function(e,t,n){(n||"object"!=typeof t)&&T("warn","Second argument of bulkSave is now an object, please use bulkSave(documents, { logProgress, concurrency })");var r={};return"number"==typeof t&&(r.concurrency=t),"function"==typeof n&&(r.logProgress=n),"object"==typeof t&&Object.assign(r,t),this._bulkSave(e,r)}},{key:"_bulkSave",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.concurrency,i=r.logProgress,c=(0,o.default)(r,v);return R(e,(t=(0,u.default)(s.default.mark(function e(t){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i&&i(t),e.prev=1,e.next=4,n.createOrUpdate(t,c);case 4:return a=e.sent,e.abrupt("return",a);case 8:if(e.prev=8,e.t0=e.catch(1),!r.onCreateOrUpdateError){e.next=14;break}return e.abrupt("return",r.onCreateOrUpdateError(e.t0,t));case 14:throw e.t0;case 15:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return t.apply(this,arguments)}),void 0===a?30:a)}},{key:"query",value:function(e,t){if(this.usesCozyClient())throw Error("This method is not implemented yet with CozyClient");return this.queryViaOldClient(e,t)}},{key:"queryViaOldClient",value:function(e,t){return this.cozyClient.data.query(e,t)}},{key:"fetchAll",value:(c=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.usesCozyClient()?this.cozyClient.stackClient:this.cozyClient,e.prev=1,e.next=4,t.fetchJSON("GET","/data/".concat(this.doctype,"/_all_docs?include_docs=true"));case 4:return n=e.sent,e.abrupt("return",n.rows.filter(function(e){return 0!==e.id.indexOf("_design")&&e.doc}).map(function(e){return e.doc}));case 8:if(e.prev=8,e.t0=e.catch(1),!(e.t0&&e.t0.response&&e.t0.response.status&&404===e.t0.response.status)){e.next=14;break}return e.abrupt("return",[]);case 14:return e.abrupt("return",[]);case 15:case"end":return e.stop()}},e,this,[[1,8]])})),function(){return c.apply(this,arguments)})},{key:"updateAll",value:(m=(0,u.default)(s.default.mark(function e(t){var n,r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.usesCozyClient()?this.cozyClient.stackClient:this.cozyClient,!(!t||!t.length)){e.next=3;break}return e.abrupt("return",Promise.resolve([]));case 3:return e.prev=3,e.next=6,n.fetchJSON("POST","/data/".concat(this.doctype,"/_bulk_docs"),{docs:t});case 6:return r=e.sent,e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(3),!(e.t0.reason&&e.t0.reason.reason&&"Database does not exist."==e.t0.reason.reason)){e.next=23;break}return e.next=15,this.create(t[0]);case 15:return a=e.sent,e.next=18,this.updateAll(t.slice(1));case 18:return(i=e.sent).unshift({ok:!0,id:a._id,rev:a._rev}),e.abrupt("return",i);case 23:throw e.t0;case 24:case"end":return e.stop()}},e,this,[[3,10]])})),function(e){return m.apply(this,arguments)})},{key:"deleteAll",value:(x=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.updateAll(t.map(Z)));case 1:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})},{key:"findDuplicates",value:function(e){var t=this.idAttributes;return E(S(P(e,function(e){return t.map(function(t){return A(e,t)}).join("#$$$$#")}),function(e){return e.length>1}),function(e){return e.slice(1)})}},{key:"deleteDuplicates",value:(O=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAll();case 2:return n=e.sent,t&&(n=_(n,t)),r=this.findDuplicates(n),e.abrupt("return",this.deleteAll(r));case 6:case"end":return e.stop()}},e,this)})),function(e){return O.apply(this,arguments)})},{key:"fetchChanges",value:(B=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,o,c,u=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=this.usesCozyClient()?this.cozyClient.stackClient:this.cozyClient,a={since:t,include_docs:"true"},n.params&&Object.assign(a,n.params),e.next=6,r.fetchJSON("GET","/data/".concat(this.doctype,"/_changes?").concat(j.stringify(a)));case 6:return o=(i=e.sent).last_seq,c=i.results.map(function(e){return e.doc}).filter(Boolean),!n.includeDesign&&(c=c.filter(function(e){return 0!==e._id.indexOf("_design")})),!n.includeDeleted&&(c=c.filter(function(e){return!e._deleted})),e.abrupt("return",{newLastSeq:o,documents:c});case 12:case"end":return e.stop()}},e,this)})),function(e){return B.apply(this,arguments)})},{key:"queryAll",value:(U=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.usesCozyClient()){e.next=2;break}return e.abrupt("return",this.queryAllViaNewClient(t));case 2:return e.abrupt("return",this.queryAllViaOldClient(t,n));case 3:case"end":return e.stop()}},e,this)})),function(e,t){return U.apply(this,arguments)})},{key:"queryAllViaNewClient",value:(V=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",this.fetchAll());case 2:return n=void 0!==M?M(this.doctype).where(t):this.cozyClient.find(this.doctype).where(t),e.next=5,this.cozyClient.query(n);case 5:a=(r=e.sent).data;case 7:if(!(r&&r.next)){e.next=20;break}if(!(r.bookmark&&n.offsetBookmark)){e.next=14;break}return e.next=11,this.cozyClient.query(n.offsetBookmark(r.bookmark));case 11:r=e.sent,e.next=17;break;case 14:return e.next=16,this.cozyClient.query(n.offset(a.length));case 16:r=e.sent;case 17:a.push.apply(a,(0,i.default)(r.data)),e.next=7;break;case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}},e,this)})),function(e){return V.apply(this,arguments)})},{key:"queryAllViaOldClient",value:(H=(0,u.default)(s.default.mark(function e(t,n){var r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,this.fetchAll();case 3:return e.abrupt("return",e.sent);case 4:if(r=n){e.next=9;break}return e.next=8,this.cozyClient.data.defineIndex(this.doctype,Object.keys(t));case 8:r=e.sent;case 9:a=[],o={next:!0};case 11:if(!(o&&o.next)){e.next=18;break}return e.next=14,this.cozyClient.data.query(r,{selector:t,wholeResponse:!0,skip:a.length});case 14:o=e.sent,a.push.apply(a,(0,i.default)(o.docs)),e.next=11;break;case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}},e,this)})),function(e,t){return H.apply(this,arguments)})},{key:"getAll",value:(W=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.usesCozyClient()?this.cozyClient.stackClient:this.cozyClient,e.prev=1,e.next=4,n.fetchJSON("POST","/data/".concat(this.doctype,"/_all_docs?include_docs=true"),{keys:t});case 4:r=e.sent,e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(1),!e.t0.message.match(/not_found/)){e.next=11;break}return e.abrupt("return",[]);case 11:throw e.t0;case 12:return a=r.rows.filter(function(e){return e.doc}),e.abrupt("return",a.map(function(e){return e.doc}));case 14:case"end":return e.stop()}},e,this,[[1,7]])})),function(e){return W.apply(this,arguments)})}]),q}();U.defaultDuplicateHandling="throw",U.duplicateHandlingStrategies={throw:function(e,t){throw Error("Create or update with selectors that returns more than 1 result\n"+JSON.stringify(t)+"\n"+JSON.stringify(e))},remove:(r=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.slice(1)).length>0)){e.next=5;break}return T("warn","Cleaning duplicates for doctype ".concat(this.doctype," (kept: ").concat(t[0]._id,", removed: ").concat(n.map(function(e){return e._id}),")")),e.next=5,this.deleteAll(n);case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},e.exports=U},15773:function(e,t,n){"use strict";var r=n(95318),a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(2205)),u=r(n(78585)),l=r(n(29754)),d=n(10691),f=n(84775),p=/(.+)(\..*)$/,h=function(e){(0,c.default)(g,e);var t,n,r,f,h,v,m,y=(t=g,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);return e=n?Reflect.construct(r,arguments,(0,l.default)(this).constructor):r.apply(this,arguments),(0,u.default)(this,e)});function g(){return(0,o.default)(this,g),y.apply(this,arguments)}return(0,s.default)(g,null,[{key:"getFullpath",value:(r=(0,i.default)(a.default.mark(function e(t,n){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("You must provide a dirId");case 2:return e.next=4,this.get(t);case 4:return r=d(e.sent.path,"/"),e.abrupt("return","".concat(r,"/").concat(n));case 7:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"move",value:(f=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s,c,u,l,d,f,p=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],i=n.folderId,o=n.path,s=this.cozyClient.collection("io.cozy.files"),e.prev=3,e.next=6,s.updateFileMetadata(t,{dir_id:i});case 6:return c=e.sent,e.abrupt("return",{moved:c.data,deleted:null});case 10:if(e.prev=10,e.t0=e.catch(3),!(409===e.t0.status&&r)){e.next=35;break}if(!o){e.next=17;break}u=o,e.next=24;break;case 17:return e.next=19,this.get(t);case 19:return l=e.sent.name,e.next=23,this.getFullpath(i,l);case 23:u=e.sent;case 24:return e.next=26,s.statByPath(u);case 26:return d=e.sent,e.next=29,s.destroy(d.data);case 29:return e.next=31,s.updateFileMetadata(t,{dir_id:i});case 31:return f=e.sent,e.abrupt("return",{moved:f.data,deleted:d.data.id});case 35:throw e.t0;case 36:case"end":return e.stop()}},e,this,[[3,10]])})),function(e,t){return f.apply(this,arguments)})},{key:"splitFilename",value:function(e){if(!e.name)throw Error("file should have a name property ");if("file"===e.type){var t=e.name.match(p);if(t)return{filename:t[1],extension:t[2]}}return{filename:e.name,extension:""}}},{key:"overrideFileForPath",value:(h=(0,i.default)(a.default.mark(function e(t,n,r){var i,o,s,c,u,l,d,f;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return!(i=t).endsWith("/")&&(i+="/"),o=this.cozyClient.collection("io.cozy.files"),e.prev=3,e.next=6,o.statByPath(i+n.name);case 6:return c=(s=e.sent.data).id,u=s.dir_id,e.next=10,o.updateFile(n,{dirId:u,fileId:c,metadata:r});case 10:return l=e.sent,e.abrupt("return",l);case 14:if(e.prev=14,e.t0=e.catch(3),!/Not Found/.test(e.t0)){e.next=24;break}return e.next=19,o.ensureDirectoryExists(i);case 19:return d=e.sent,e.next=22,o.createFile(n,{dirId:d,metadata:r});case 22:return f=e.sent,e.abrupt("return",f);case 24:throw e.t0;case 25:case"end":return e.stop()}},e,this,[[3,14]])})),function(e,t,n){return h.apply(this,arguments)})},{key:"generateNewFileNameOnConflict",value:function(e){var t=e.match(/(_)([0-9]+)$/);if(!t)return"".concat(e,"_1");var n=parseInt(t[2]);return n++,e.replace(/(_)([0-9]+)$/,"_".concat(n))}},{key:"generateFileNameForRevision",value:function(e,t,n){var r=g.splitFilename({name:e.name,type:"file"}),a=r.filename,i=r.extension;return"".concat(a,"_").concat(n(t.updated_at,"DD MMMM - HH[h]mm")).concat(i)}},{key:"uploadFileWithConflictStrategy",value:(v=(0,i.default)(a.default.mark(function e(t,n,r,i,o,s){var c,u,l,d,f,p,h,v;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=this.cozyClient.collection("io.cozy.files"),e.prev=1,e.next=4,g.getFullpath(r,t);case 4:return u=e.sent,e.next=7,c.statByPath(u);case 7:if(l=e.sent.data.id,"erase"!==i){e.next=16;break}return e.next=12,c.updateFile(n,{dirId:r,fileId:l,name:t,metadata:o,contentType:s});case 12:return d=e.sent,e.abrupt("return",d);case 16:return p=(f=g.splitFilename({name:t,type:"file"})).filename,h=f.extension,v=g.generateNewFileNameOnConflict(p)+h,e.abrupt("return",g.uploadFileWithConflictStrategy(v,n,r,i,o,s));case 19:e.next=28;break;case 21:if(e.prev=21,e.t0=e.catch(1),!/Not Found/.test(e.t0.message)){e.next=27;break}return e.next=26,g.upload(t,n,r,o,s);case 26:return e.abrupt("return",e.sent);case 27:throw e.t0;case 28:case"end":return e.stop()}},e,this,[[1,21]])})),function(e,t,n,r,a,i){return v.apply(this,arguments)})},{key:"upload",value:(m=(0,i.default)(a.default.mark(function e(t,n,r,i){var o,s=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:"image/jpeg",e.abrupt("return",this.cozyClient.collection("io.cozy.files").createFile(n,{name:t,dirId:r,contentType:o,lastModifiedDate:new Date,metadata:i}));case 2:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return m.apply(this,arguments)})}]),g}(f);h.doctype="io.cozy.files",e.exports=h},98652:function(e,t,n){"use strict";var r=n(95318),a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(2205)),u=r(n(78585)),l=r(n(29754)),d=n(13539),f=n(15773),p=function(e){(0,c.default)(y,e);var t,n,r,p,h,v,m=(t=y,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);return e=n?Reflect.construct(r,arguments,(0,l.default)(this).constructor):r.apply(this,arguments),(0,u.default)(this,e)});function y(){return(0,o.default)(this,y),m.apply(this,arguments)}return(0,s.default)(y,null,[{key:"createFolderWithReference",value:(r=(0,i.default)(a.default.mark(function e(t,n){var r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.cozyClient.collection(f.doctype),e.next=3,r.ensureDirectoryExists(t);case 3:return i=e.sent,e.next=6,r.addReferencesTo(n,[{_id:i}]);case 6:return e.next=8,r.get(i);case 8:return o=e.sent.data,e.abrupt("return",o);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"ensureMagicFolder",value:(p=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={_type:d.doctype,_id:t},e.next=3,this.getReferencedFolders(r);case 3:if(!(o=(i=e.sent).length?i[0]:null)){e.next=7;break}return e.abrupt("return",o);case 7:if((s=Object.values(this.magicFolders)).includes(t)){e.next=10;break}throw Error("Cannot create Magic folder with id ".concat(t,". Allowed values are ").concat(s.join(", "),"."));case 10:if(n){e.next=12;break}throw Error("Magic folder default path must be defined");case 12:return e.abrupt("return",this.createFolderWithReference(n,r));case 13:case"end":return e.stop()}},e,this)})),function(e,t){return p.apply(this,arguments)})},{key:"getReferencedFolders",value:(h=(0,i.default)(a.default.mark(function e(t){var n,r=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cozyClient.collection(f.doctype).findReferencedBy(t);case 2:return n=e.sent.included,e.abrupt("return",n.filter(function(e){return!r.isTrashed(e)}));case 5:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"ensureFolderWithReference",value:(v=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getReferencedFolders(n);case 2:if(!(r=e.sent).length){e.next=5;break}return e.abrupt("return",r[0]);case 5:return i=this.cozyClient.collection(f.doctype),e.next=8,i.ensureDirectoryExists(t);case 8:return o=e.sent,e.next=11,i.addReferencesTo(n,[{_id:o}]);case 11:return e.next=13,i.get(o);case 13:return s=e.sent.data,e.abrupt("return",s);case 16:case"end":return e.stop()}},e,this)})),function(e,t){return v.apply(this,arguments)})},{key:"isTrashed",value:function(e){return/^\/\.cozy_trash/.test(e.attributes.path)}}]),y}(f);p.magicFolders={ADMINISTRATIVE:"".concat(d.doctype,"/administrative"),PHOTOS:"".concat(d.doctype,"/photos"),PHOTOS_BACKUP:"".concat(d.doctype,"/photos/mobile"),PHOTOS_UPLOAD:"".concat(d.doctype,"/photos/upload"),NOTES_FOLDER:"".concat(d.doctype,"/notes")},e.exports=p},64142:function(e,t,n){"use strict";var r=n(95318),a=r(n(93913)),i=r(n(34575)),o=r(n(2205)),s=r(n(78585)),c=r(n(29754)),u=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);return e=n?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function u(){return(0,i.default)(this,u),r.apply(this,arguments)}return(0,a.default)(u)}(n(84775));u.schema={doctype:"io.cozy.permissions",attributes:{}},e.exports=u},78641:function(e,t,n){"use strict";var r=n(95318),a=r(n(87757)),i=r(n(59713)),o=r(n(48926)),s=r(n(34575)),c=r(n(93913)),u=r(n(2205)),l=r(n(78585)),d=r(n(29754));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var p=n(27361),h=n(85564),v=n(96335),m=function(e){(0,u.default)(y,e);var t,n,r,m=(t=y,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);return e=n?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function y(){return(0,s.default)(this,y),m.apply(this,arguments)}return(0,c.default)(y,null,[{key:"getPersonalData",value:function(e,t){var n={firstname:{path:"name.givenName"},lastname:{path:"name.familyName"},address:{getter:v.getPrimaryAddress},email:{getter:v.getPrimaryEmail},phone:{getter:v.getPrimaryPhone}},r={};return t.forEach(function(t){var a,i=p(n,t,t);if(i.getter)a=i.getter(e);else{var o=p(i,"path",t);a=p(e,o)}void 0!==a&&(r[t]=a)}),r}},{key:"getFilesByRules",value:(r=(0,o.default)(a.default.mark(function e(t){var n,r,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rules,r=t.count,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({trashed:!1,type:"file"},n),e.next=4,this.cozyClient.collection("io.cozy.files").createIndex(["metadata.datetime","metadata.qualification"]);case 4:return e.next=6,this.cozyClient.collection("io.cozy.files").find(o,{indexedFields:["metadata.datetime","metadata.qualification"],sort:[{"metadata.datetime":"desc"},{"metadata.qualification":"desc"}],limit:r||1});case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"create",value:function(e,t){var n=e.documentsData,r=e.personalData,a=e.procedureData,i=Object.keys(n).map(function(e){return n[e].files.map(function(t){if(t)return{_id:t.id,_type:"io.cozy.files",templateDocumentId:e}})});return{personalData:r,procedureData:a,submissionDate:new Date,templateId:t.type,templateVersion:t.version,relationships:{files:{data:h(i)}}}}},{key:"createJson",value:function(e){return JSON.stringify(e)}}]),y}(n(84775));m.doctype="io.cozy.procedures.administratives",e.exports=m},50579:function(e,t,n){"use strict";var r=n(95318),a=r(n(87757)),i=r(n(63038)),o=r(n(48926)),s=r(n(34575)),c=r(n(93913)),u=r(n(2205)),l=r(n(78585)),d=r(n(29754)),f=n(84775),p=n(10661),h=function(e){(0,u.default)(v,e);var t,n,r,h=(t=v,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);return e=n?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function v(){return(0,s.default)(this,v),h.apply(this,arguments)}return(0,c.default)(v,null,[{key:"getByYearAndAccount",value:(r=(0,o.default)(a.default.mark(function e(t,n){var r,o,s,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getIndex(this.doctype,this.idAttributes);case 2:return r=e.sent,o={selector:{year:t,"relationships.account.data._id":n},limit:1},e.next=6,f.query(r,o);case 6:if(s=e.sent,!(c=(0,i.default)(s,1)[0])){e.next=11;break}return e.abrupt("return",c);case 11:return e.abrupt("return",this.getEmptyDocument(t,n));case 12:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"getEmptyDocument",value:function(e,t){return{year:e,balances:{},metadata:{version:this.version},relationships:{account:{data:{_id:t,_type:p.doctype}}}}}}]),v}(f);h.doctype="io.cozy.bank.balancehistories",h.idAttributes=["year","relationships.account.data._id"],h.version=1,h.checkedAttributes=["balances"],e.exports=h},10661:function(e,t,n){"use strict";var r=n(95318),a=r(n(63038)),i=r(n(59713)),o=r(n(34575)),s=r(n(93913)),c=r(n(2205)),u=r(n(78585)),l=r(n(29754));function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=n(7739),m=n(27361),y=n(82492),g=n(84775),b=n(43663),w=n(98010).getSlugFromInstitutionLabel,k=n(33918).namespace("BankAccount"),x=function(e){(0,c.default)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);return e=n?Reflect.construct(r,arguments,(0,l.default)(this).constructor):r.apply(this,arguments),(0,u.default)(this,e)});function i(){return(0,o.default)(this,i),r.apply(this,arguments)}return(0,s.default)(i,null,[{key:"reconciliate",value:function(e,t){return b.matchAccounts(e,t).map(function(e){return k("info",e.match?"".concat(e.account.label," matched with ").concat(e.match.label," via ").concat(e.method):"".concat(e.account.label," did not match with an existing account")),h(h({},e.account),{},{relationships:y({},e.match?e.match.relationships:null,e.account.relationships),_id:e.match?e.match._id:void 0})})}},{key:"findDuplicateAccountsWithNoOperations",value:function(e,t){var n=v(t,function(e){return e.account}),r=Object.entries(v(e,function(e){return e.institutionLabel+" > "+e.label})).map(function(e){return(0,a.default)(e,2)[1]}).filter(function(e){return e.length>1}),i=[],o,s=d(r);try{for(s.s();!(o=s.n()).done;){var c,u=o.value,l=d(u);try{for(l.s();!(c=l.n()).done;){var f=c.value,p=n[f._id]||[];0===p.length&&i.push(f)}}catch(e){l.e(e)}finally{l.f()}}}catch(e){s.e(e)}finally{s.f()}return i}},{key:"hasIncoherentCreatedByApp",value:function(e){var t=w(e.institutionLabel),n=e.cozyMetadata&&e.cozyMetadata.createdByApp;return!!(t&&n&&t!==n)}},{key:"getUpdatedAt",value:function(e){var t=m(e,"metadata.updatedAt");if(t)return t;var n=m(e,"cozyMetadata.updatedAt");return n?n:null}}]),i}(g);x.normalizeAccountNumber=b.normalizeAccountNumber,x.doctype="io.cozy.bank.accounts",x.idAttributes=["_id"],x.version=1,x.checkedAttributes=null,x.vendorIdAttr="vendorId",e.exports=x},20106:function(e,t,n){"use strict";var r=n(95318),a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(78585)),c=r(n(29754));function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=n(84775),d=n(73303),f=function(e){(0,o.default)(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);return e=n?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function l(){return(0,a.default)(this,l),r.apply(this,arguments)}return(0,i.default)(l,null,[{key:"checkCurrencies",value:function(e){var t=e[0].currency,n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(e);try{for(r.s();!(n=r.n()).done;)if(n.value.currency!==t)return!1}catch(e){r.e(e)}finally{r.f()}return!0}},{key:"sum",value:function(e){if(0===e.length)throw Error("You must give at least one stats object");if(!this.checkCurrencies(e))throw Error("Currency of all stats object must be the same.");var t=["income","additionalIncome","mortgage","loans","fixedCharges"].reduce(function(t,n){return t[n]=d(e,function(e){return e[n]||0}),t},{});return t.currency=e[0].currency,t}}]),l}(l);f.doctype="io.cozy.bank.accounts.stats",f.idAttributes=["_id"],f.version=1,f.checkedAttributes=null,e.exports=f},7076:function(e,t,n){"use strict";var r=n(95318),a=r(n(87757)),i=r(n(59713)),o=r(n(319)),s=r(n(48926)),c=r(n(34575)),u=r(n(93913)),l=r(n(16525)),d=r(n(2205)),f=r(n(78585)),p=r(n(29754));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var v=n(24350),m=n(7739),y=n(84753),g=n(56797),b=n(81683),w=n(84775),k=n(2153),x=n(10661),O=n(99528).matchTransactions,C=n(50361),S=n(71400).default,E=function(e,t){var n=y(e,t);return n?t(n):null},P=function(e){return(e.realisationDate||e.date).slice(0,10)},_=function(e){var t=new Date;return E(e.filter(function(e){return!b(P(e),t)}),P)},A=function(e){return e instanceof Date?e.toISOString():e},R=function(e){(0,d.default)(M,e);var t,n,r,y,R,D=(t=M,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,p.default)(t);return e=n?Reflect.construct(r,arguments,(0,p.default)(this).constructor):r.apply(this,arguments),(0,f.default)(this,e)});function M(){return(0,c.default)(this,M),D.apply(this,arguments)}return(0,u.default)(M,[{key:"isAfter",value:function(e){if(!e)return!0;var t=A(this.date).slice(0,10);return"NaN"!==t?t>e:(k("warn","transaction date could not be parsed. transaction: "+JSON.stringify(this)),!1)}},{key:"isBeforeOrSame",value:function(e){if(!e)return!0;var t=A(this.date).slice(0,10);return"NaN"!==t?t<=e:(k("warn","transaction date could not be parsed. transaction: "+JSON.stringify(this)),!1)}},{key:"getIdentifier",value:function(){return"".concat(this.amount,"-").concat(this.originalBankLabel,"-").concat(this.date)}},{key:"getVendorAccountId",value:function(){return this[this.constructor.vendorAccountIdAttr]}}],[{key:"deleteAll",value:(r=(0,s.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S("banking.warn-on-delete")&&k("warn","OPERATION_DELETE: removing operations with _id : ".concat(JSON.stringify(t.map(function(e){return e._id})))),e.abrupt("return",(0,l.default)((0,p.default)(M),"deleteAll",this).call(this,t));case 2:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"getDate",value:function(e){return e}},{key:"getMissedTransactions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=g(E(t,P),-7),a=Array.from(O(e.filter(function(e){return b(P(e),r)}),t)).filter(function(e){return!e.match}).map(function(e){return e.transaction}),i=n.trackEvent;if("function"==typeof i)try{var o=a.length,s=t.length;i({e_a:"ReconciliateMissing",e_n:"MissedTransactionPct",e_v:parseFloat((o/s).toFixed(2),10)}),i({e_a:"ReconciliateMissing",e_n:"MissedTransactionAbs",e_v:o})}catch(e){k("warn","Could not send MissedTransaction event: ".concat(e.message))}return a}},{key:"reconciliate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=C(n);!1!==r.useSplitDate&&(r.useSplitDate=!0);var a=m(e,function(e){var n;return(n=e,t.find(function(e){return e.vendorId===n.vendorId}))?"updatedTransactions":"newTransactions"}),i=a.newTransactions||[],s=a.updatedTransactions||[],c=!!r.useSplitDate&&_(t);if(c){"function"==typeof r.trackEvent&&r.trackEvent({e_a:"ReconciliateSplitDate"});var u=i.filter(function(e){return M.prototype.isAfter.call(e,c)});u.length>0?k("info","Found ".concat(u.length," transactions after ").concat(c)):k("info","No transaction after ".concat(c));var l=i.filter(function(e){return M.prototype.isBeforeOrSame.call(e,c)});k("info","Found ".concat(l.length," transactions before ").concat(c));var d=M.getMissedTransactions(l,t,r);d.length>0?k("info","Found ".concat(d.length," missed transactions before ").concat(c)):k("info","No missed transactions before ".concat(c)),i=[].concat((0,o.default)(u),(0,o.default)(d))}else k("info","Can't find a split date, saving all new transactions");return k("info","Transaction reconciliation: new ".concat(i.length,", updated ").concat(s.length,", split date ").concat(c," ")),[].concat(i).concat(s)}},{key:"getMostRecentForAccounts",value:(y=(0,s.default)(a.default.mark(function e(t){var n,r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k("debug","Transaction.getLast"),e.next=4,w.getIndex(this.doctype,["date","account"]);case 4:return n=e.sent,r={selector:{date:{$gte:null},account:{$in:t}},sort:[{date:"desc"}]},e.next=8,w.query(n,r);case 8:return k("info","last transactions length: "+(i=e.sent).length),e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(0),k("error",e.t0),e.abrupt("return",[]);case 17:case"end":return e.stop()}},e,this,[[0,13]])})),function(e){return y.apply(this,arguments)})},{key:"deleteOrphans",value:(R=(0,s.default)(a.default.mark(function e(){var t,n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k("info","Deleting up orphan operations"),e.t0=v,e.next=4,x.fetchAll();case 4:return e.t1=e.sent,t=(0,e.t0)(e.t1,"_id"),e.next=8,this.fetchAll();case 8:if(r=(n=e.sent).filter(function(e){return!t[e.account]}),k("info","Total number of operations: ".concat(n.length)),k("info","Total number of orphan operations: ".concat(r.length)),k("info","Deleting ".concat(r.length," orphan operations...")),!(r.length>0)){e.next=16;break}return k(S("banking.warn-on-delete")?"warn":"info","OPERATION_DELETE: removing ".concat(r.length," orphan operations")),e.abrupt("return",this.deleteAll(r));case 16:case"end":return e.stop()}},e,this)})),function(){return R.apply(this,arguments)})},{key:"getCategoryId",value:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({localModelOverride:!1,localModelUsageThreshold:this.LOCAL_MODEL_USAGE_THRESHOLD,globalModelUsageThreshold:this.GLOBAL_MODEL_USAGE_THRESHOLD},t);return e.manualCategoryId?e.manualCategoryId:n.localModelOverride&&e.localCategoryId&&e.localCategoryProba&&e.localCategoryProba>n.localModelUsageThreshold?e.localCategoryId:e.cozyCategoryId&&e.cozyCategoryProba&&e.cozyCategoryProba>n.globalModelUsageThreshold?e.cozyCategoryId:e.localCategoryId||e.cozyCategoryId?e.automaticCategoryId:null}}]),M}(w);R.doctype="io.cozy.bank.operations",R.version=1,R.vendorAccountIdAttr="vendorAccountId",R.vendorIdAttr="vendorId",R.idAttributes=["vendorId"],R.checkedAttributes=["label","originalBankLabel","automaticCategoryId","account"],R.LOCAL_MODEL_USAGE_THRESHOLD=.8,R.GLOBAL_MODEL_USAGE_THRESHOLD=.15,R.getSplitDate=_,e.exports=R},25569:function(e,t,n){"use strict";var r=n(95318),a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=n(17204),u=n(33918).namespace("BankingReconciliator"),l=function(){var e,t;function n(e){(0,o.default)(this,n),this.options=e}return(0,s.default)(n,[{key:"saveAccounts",value:(e=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.options.BankAccount,e.next=3,r.fetchAll();case 3:return i=e.sent,o=r.reconciliate(t,i),u("info","Saving accounts..."),e.next=8,r.bulkSave(o,{handleDuplicates:"remove"});case 8:return s=e.sent,n.onAccountsSaved&&n.onAccountsSaved(s),e.abrupt("return",{savedAccounts:s,reconciliatedAccounts:o});case 11:case"end":return e.stop()}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"save",value:(t=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s,l,d,f,p,h,v,m,y,g,b,w=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.length>2&&void 0!==w[2]?w[2]:{},o=(i=this.options).BankAccount,s=i.BankTransaction,e.next=4,this.saveAccounts(t,r);case 4:return d=(l=e.sent).reconciliatedAccounts,p=c((f=l.savedAccounts).map(function(e){return[e[o.vendorIdAttr],e._id]})),u("info","Linking transactions to accounts..."),u("info",JSON.stringify(p)),n.forEach(function(e){if(e.account=p[e[s.vendorAccountIdAttr]],void 0===e.account)throw u("warn","Transaction without account, vendorAccountIdAttr: ".concat(s.vendorAccountIdAttr)),u("warn","transaction: "+JSON.stringify(e)),Error("Transaction without account.")}),h=new Set(d.filter(function(e){return e._id}).map(function(e){return e._id})),e.next=14,s.fetchAll();case 14:return v=e.sent.filter(function(e){return h.has(e.account)}),m=s.reconciliate(n,v,r),u("info","Saving transactions..."),y=1,g=function(e){u("debug","[bulkSave] ".concat(y++," Saving ").concat(e.date," ").concat(e.label))},e.next=21,s.bulkSave(m,{concurrency:30,logProgress:void 0!==r.logProgress?r.logProgress:g,handleDuplicates:"remove"});case 21:return b=e.sent,e.abrupt("return",{accounts:f,transactions:b});case 23:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})}]),n}();e.exports=l},88379:function(e){"use strict";e.exports={"AXA Banque":"axabanque102","/Banque Populaire.*/":"banquepopulaire",BforBank:"bforbank97","BNP Paribas":"bnpparibas82",BNPP:"bnpparibas82","/Boursorama.*/":"boursorama83",casden:"casden173","/Hello bank!.*/":"hellobank145",Bred:"bred",CA:"caatlantica3","Carrefour Banque":"carrefour159","/Caisse d'\xc9pargne.*/":"caissedepargne1","Compte Nickel":"comptenickel168","/^CIC.*/":"cic63","Cr\xe9dit Agricole":"caatlantica3","Cr\xe9dit Coop\xe9ratif":"creditcooperatif148","/Cr\xe9dit du Nord.*/":"cdngroup88","/Cr\xe9dit Maritime.*/":"creditmaritime","/Cr\xe9dit Mutuel.*/":"cic45","/Linxea/":"linxea",Fortuneo:"fortuneo84","Hello bank!":"hellobank145","HSBC France":"hsbc119",HSBC:"hsbc119","/^ING.*/":"ingdirect95","/La Banque Postale.*/":"labanquepostale44","/LCL.*/":"lcl-linxo",Milleis:"barclays136",Monabanq:"monabanq96","Soci\xe9t\xe9 G\xe9n\xe9rale":"societegenerale","Soci\xe9t\xe9 marseillaise de cr\xe9dit":"cdngroup109"}},43663:function(e,t,n){"use strict";var r=n(95318),a=r(n(319)),i=r(n(59713));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=n(89734),d=n(27361),f=n(42380).eitherIncludes,p=n(98010).getSlugFromInstitutionLabel,h=function(e,t,n){var r=n.filter(function(n){return n[e]===t[e]});return 1===r.length?{match:r[0],method:e+"-exact"}:r.length>1?{matches:r,method:e+"-exact"}:null},v=/^(?:[A-Za-z]+)?-?([0-9]+)-?(?:[A-Za-z]+)?$/,m=/[x*]{4}[ -]?[x*]{4}[ -]?[x*]{4}[ -]?(\d{4})/,y=function(e,t){var n,r=t&&t.replace(/\s/g,""),a=e&&!e.match(m)?e.replace(/\s/g,""):e;if(r&&27==r.length)return r.substr(14,11);if(!a)return a;if(23==a.length)return a.substr(10,11);if(16==a.length)return a.substr(5,11);if(a.length>11&&(n=a.match(v)))return n[1];else return a},g=function(e,t){return t.number&&e.number&&(11===t.number.length||11===e.number.length)&&f(t.number,e.number)&&Math.min(t.number.length,e.number.length)>=4},b=function(e,t){if("CreditCard"!==e.type&&"CreditCard"!==t.type)return!1;for(var n,r,a=0,i=[e,t];a<i.length;a++){var o=i[a],s=o&&o.number&&o.number.match(m);s&&(n=o,r=s[1])}var c=n===e?t:e;return!!c&&!!c.number&&c.number.slice(-4)===r||!1},w=[{rule:function(e,t){var n=p(e.institutionLabel),r=p(t.institutionLabel);return!n||!r||n===r},bonus:0,malus:-1e3},{rule:g,bonus:50,malus:-50,name:"approx-number"},{rule:function(e,t){var n=e.number||String(e.id),r=t.number||String(t.id);return(!e.number||!t.number)&&f(n,r)},bonus:10,malus:-10,name:"no-number-attr"},{rule:function(e,t){return e.type===t.type},bonus:50,malus:0,name:"same-type"},{rule:b,bonus:150,malus:0,name:"credit-card-number"},{rule:function(e,t){return!!e.currency&&(t.rawNumber&&t.rawNumber.includes(e.currency)||t.label&&t.label.includes(e.currency)||t.originalBankLabel&&t.originalBankLabel.includes(e.currency))},bonus:50,malus:0,name:"currency"}],k=function(e,t){var n=[],r={account:t,methods:n},a=0,i,o=c(w);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.rule,l=s.bonus,d=s.malus,f=s.name,p=u(e,t);p&&l&&(a+=l),!p&&d&&(a+=d),f&&p&&n.push(f)}}catch(e){o.e(e)}finally{o.f()}return r.points=a,r},x=function(e){var t=y(e.number,e.iban);return s(s({},e),{},{rawNumber:e.number,number:t})},O=["iban","number"],C=function(e,t){return e&&e===t},S=function(e,t){var n,r=c(O);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(e[a]){var i=h(a,e,t);if(i&&i.match)return i}}}catch(e){r.e(e)}finally{r.f()}var o=t.find(function(t){return C(e.originalNumber,t.number)||C(e.number,t.originalNumber)});if(o)return{match:o,method:"originalNumber-exact"};var s=t.find(function(t){return(C(e.rawNumber,t.number)||C(e.number,t.rawNumber))&&t.type==e.type&&t.currency==e.currency});if(s)return{match:s,method:"rawNumber-exact-currency-type"};var u=l(t.map(function(t){return k(e,t)}),function(e){return-e.points}).filter(function(e){return e.points>0});if(u.length>0)return{match:u[0].account,method:u[0].methods.join("-")}};e.exports={matchAccounts:function(e,t){var n=e.map(x),r=(0,a.default)(t).map(x),i=[],o,u=c(n);try{for(u.s();!(o=u.n()).done;){var l=o.value,f=S(l,r);if(f){var p=r.indexOf(f.match);r.splice(p,1),(!d(l,"metadata.disabledAt")||!d(f,"metadata.disabledAt"))&&i.push(s({account:l},f))}else!d(l,"metadata.disabledAt")&&i.push({account:l})}}catch(e){u.e(e)}finally{u.f()}return i},normalizeAccountNumber:y,score:k,creditCardMatch:b,approxNumberMatch:g}},42380:function(e){"use strict";e.exports={eitherIncludes:function(e,t){return!!(e&&t&&(e.includes(t)||t.includes(e)))}}},99528:function(e,t,n){"use strict";var r,a=n(95318),i=a(n(319)),o=a(n(63038)),s=a(n(28655)),c=a(n(87757));function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=n(7739),f=n(89734),p=n(42380).eitherIncludes,h=function(e){return e.date.substr(0,10)},v=c.default.mark(function e(t,n){var r,a,i,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=u(Object.keys((r=t.map(function(e){return d(e,n)}))[0]).sort()),e.prev=2,o=c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.value,n=r.map(function(e){return e[t]||[]}),e.next=4,[t,n];case 4:case"end":return e.stop()}},e)}),a.s();case 5:if((i=a.n()).done){e.next=9;break}return e.delegateYield(o(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),a.e(e.t1);case 14:return e.prev=14,a.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[2,11,14,17]])}),m=function(e,t){var n=RegExp(String.raw(r||(r=(0,s.default)(["","{2,}"])),t),"gi");return e&&e.replace(n,t)},y=/\b[0-9X]+\b/gi,g=/\b\d{2}\/\d{2}\/\d{4}\b/g,b=function(e){return e&&e.replace(y,"")},w=function(e){return e&&e.replace(g,"")},k=function(e){return e&&e.replace(/\s/g,"").replace(/-/g,"")},x=function(e,t){if(m(t.originalBankLabel," ")===m(e.originalBankLabel," "))return[200,"originalBankLabel"];if(k(t.originalBankLabel)===k(e.originalBankLabel))return[120,"originalBankLabelCompacted"];if(w(t.originalBankLabel)===w(e.originalBankLabel))return[150,"originalBankLabelWithoutDate"];else if(t.label===e.label)return[100,"label"];else if(p(t.label.toLowerCase(),e.label.toLowerCase()))return[70,"eitherIncludes"];else if(p(b(t.label.toLowerCase()),b(e.label.toLowerCase())))return[50,"fuzzy-eitherIncludes"];else return[-1e3,"label-penalty"]},O=function(e,t){var n=new Date(e.date.substr(0,10)),r=new Date(t.date.substr(0,10)),a=Math.abs(r-n);return e.realisationDate?Math.min(a,Math.abs(r-new Date(e.realisationDate.substr(0,10)))):a},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],a={op:t,methods:r};if(n.maxDateDelta){if(O(e,t)>n.maxDateDelta)return a.points=-1e3,a;r.push("approx-date")}var i=x(e,t),s=(0,o.default)(i,2),c=s[0],u=s[1];r.push(u);var l=0===Math.abs(t.amount-e.amount)?r.push("amount")&&100:-1e3;return a.points=l+c,a},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.find(function(t){return t.vendorId&&e.vendorId&&t.vendorId===e.vendorId});if(r)return{match:r,method:"vendorId"};var a=f(t.map(function(t){return C(e,t,n)}),function(e){return-e.points}).filter(function(e){return e.points>0});return a.length>0?{match:a[0].op,method:a[0].methods.join("-")}:{candidates:a}},E=c.default.mark(function e(t,n){var r,a,o,s,l,d,f,p,h=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=h.length>2&&void 0!==h[2]?h[2]:{},a=Array.isArray(n)?(0,i.default)(n):[],o=u(t),e.prev=3,o.s();case 5:if((s=o.n()).done){e.next=14;break}return d={transaction:l=s.value},(f=a.length>0?S(l,a,r):null)&&(Object.assign(d,f),(p=a.indexOf(f.match))>-1&&a.splice(p,1)),e.next=12,d;case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),o.e(e.t0);case 19:return e.prev=19,o.f(),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[3,16,19,22]])}),P=c.default.mark(function e(t,n){var r,a,i,s,l,d,f,p,m,y,g,b,w,k,x,O,C,S;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=new Set(t),a=new Set(n),i=u(v([t,n],h)),e.prev=3,i.s();case 5:if((s=i.n()).done){e.next=29;break}(l=(0,o.default)(s.value,2))[0],p=(f=(0,o.default)(l[1],2))[0],m=u(E(p,f[1])),e.prev=8,m.s();case 10:if((y=m.n()).done){e.next=19;break}if(!(g=y.value).match){e.next=17;break}return a.delete(g.match),r.delete(g.transaction),e.next=17,g;case 17:e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),m.e(e.t0);case 24:return e.prev=24,m.f(),e.finish(24);case 27:e.next=5;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(3),i.e(e.t1);case 34:return e.prev=34,i.f(),e.finish(34);case 37:w=0,k=b=[3,4,5];case 39:if(!(w<k.length)){e.next=64;break}x=k[w],O=u(E(Array.from(r),Array.from(a),{maxDateDelta:864e5*x})),e.prev=42,O.s();case 44:if((C=O.n()).done){e.next=53;break}if((S=C.value).method&&(S.method+="-delta".concat(x)),S.match&&(a.delete(S.match),r.delete(S.transaction)),!(S.match||x===b[b.length-1])){e.next=51;break}return e.next=51,S;case 51:e.next=44;break;case 53:e.next=58;break;case 55:e.prev=55,e.t2=e.catch(42),O.e(e.t2);case 58:return e.prev=58,O.f(),e.finish(58);case 61:w++,e.next=39;break;case 64:case"end":return e.stop()}},e,null,[[3,31,34,37],[8,21,24,27],[42,55,58,61]])});e.exports={matchTransactions:P,scoreMatching:C}},98010:function(e,t,n){"use strict";var r=n(95318)(n(63038));function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=n(33918).namespace("slug-account"),o=Object.entries(n(88379)).map(function(e){var t=(0,r.default)(e,2),n=t[0],a=t[1];return"/"===n[0]&&"/"===n[n.length-1]?[RegExp(n.substr(1,n.length-2),"i"),a]:[n,a]});e.exports={getSlugFromInstitutionLabel:function(e){if(!e){i("warn","No institution label, cannot compute slug");return}var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{!s&&null!=n.return&&n.return()}finally{if(c)throw o}}}}(o);try{for(n.s();!(t=n.n()).done;){var s=(0,r.default)(t.value,2),c=s[0],u=s[1];if(c instanceof RegExp){if(e.match(c))return u}else if(c.toLowerCase()===e.toLowerCase())return u}}catch(e){n.e(e)}finally{n.f()}i("warn","Could not compute slug for ".concat(e))}}},96335:function(e,t,n){"use strict";var r=n(95318),a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(78585)),c=r(n(29754)),u=n(45697),l=n(27361),d=n(2153),f=n(84775),p=function(e){return function(t){return t[e]&&0!==t[e].length?t[e].find(function(e){return e.primary})||t[e][0]:""}},h=function(e){return d("warn","".concat(e," from cozy-doctypes contact is deprecated, use cozy-client/models/contacts/").concat(e," instead"))},v=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);return e=n?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function u(){return(0,a.default)(this,u),r.apply(this,arguments)}return(0,i.default)(u,null,[{key:"isContact",value:function(e){return e._type===u.doctype}},{key:"getInitials",value:function(e){if(h("getInitials"),"string"==typeof e)return d("warn","Passing a string to Contact.getInitials will be deprecated soon."),e[0].toUpperCase();if(e.name)return["givenName","familyName"].map(function(t){return l(e,["name",t,0],"")}).join("").toUpperCase();var t=u.getPrimaryEmail(e);return t?t[0].toUpperCase():(d("warn","Contact has no name and no email."),"")}},{key:"getPrimaryEmail",value:function(e){return h("getPrimaryEmail"),Array.isArray(e.email)?p("email")(e).address:e.email}},{key:"getPrimaryCozy",value:function(e){return h("getPrimaryCozy"),Array.isArray(e.cozy)?p("cozy")(e).url:e.url}},{key:"getPrimaryPhone",value:function(e){return h("getPrimaryPhone"),p("phone")(e).number}},{key:"getPrimaryAddress",value:function(e){return h("getPrimaryAddress"),p("address")(e).formattedAddress}},{key:"getFullname",value:function(e){return(h("getFullname"),e.fullname)?e.fullname:e.name?["namePrefix","givenName","additionalName","familyName","nameSuffix"].map(function(t){return e.name[t]}).filter(function(e){return void 0!==e}).join(" ").trim():void 0}},{key:"getDisplayName",value:function(e){return h("getDisplayName"),u.getFullname(e)||u.getPrimaryEmail(e)}}]),u}(f),m=u.shape({_id:u.string.isRequired,_type:u.string.isRequired,fullname:u.string,name:u.shape({givenName:u.string,familyName:u.string,additionalName:u.string,namePrefix:u.string,nameSuffix:u.string}),birthday:u.string,note:u.string,email:u.arrayOf(u.shape({address:u.string.isRequired,label:u.string,type:u.string,primary:u.bool})),address:u.arrayOf(u.shape({street:u.string,pobox:u.string,city:u.string,region:u.string,postcode:u.string,country:u.string,type:u.string,primary:u.bool,label:u.string,formattedAddress:u.string})),phone:u.arrayOf(u.shape({number:u.string.isRequired,type:u.string,label:u.string,primary:u.bool})),cozy:u.arrayOf(u.shape({url:u.string.isRequired,label:u.string,primary:u.bool})),company:u.string,jobTitle:u.string,trashed:u.bool,me:u.bool,relationships:u.shape({accounts:u.shape({data:u.arrayOf(u.shape({_id:u.string.isRequired,_type:u.string.isRequired}))}),groups:u.shape({data:u.arrayOf(u.shape({_id:u.string.isRequired,_type:u.string.isRequired}))})})});v.doctype="io.cozy.contacts",v.propType=m,e.exports=v},97689:function(e,t,n){"use strict";var r=n(95318),a=r(n(93913)),i=r(n(34575)),o=r(n(2205)),s=r(n(78585)),c=r(n(29754)),u=n(45697),l=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);return e=n?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function u(){return(0,i.default)(this,u),r.apply(this,arguments)}return(0,a.default)(u)}(n(84775)),d=u.shape({_id:u.string.isRequired,_type:u.string.isRequired,name:u.string.isRequired,trashed:u.bool});l.doctype="io.cozy.contacts.groups",l.propType=d,e.exports=l},38653:function(e,t,n){"use strict";var r=n(10797),a=n(78641),i=n(13539),o=n(84775),s=n(50579),c=n(10661),u=n(25569),l=n(7076),d=n(20106),f=n(96335),p=n(15773),h=n(98652),v=n(97689),m=n(64142);e.exports={Account:r,AdministrativeProcedure:a,Application:i,Document:o,BalanceHistory:s,BankAccount:c,BankingReconciliator:u,BankTransaction:l,BankAccountStats:d,Contact:f,CozyFile:p,CozyFolder:h,Group:v,registerClient:o.registerClient,Permission:m}},2153:function(e,t,n){"use strict";var r=n(33918).namespace("doctypes");e.exports=r},42582:function(e,t,n){"use strict";var r=n(95318)(n(87757));function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=n(60321);e.exports={parallelMap:function(e,t,n){var o=[];return new i(r.default.mark(function n(){var i,s,c;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{!s&&null!=n.return&&n.return()}finally{if(c)throw o}}}}(e),n.prev=1,i.s();case 3:if((s=i.n()).done){n.next=9;break}return c=s.value,n.next=7,t(c).then(function(e){return o.push(e)});case 7:n.next=3;break;case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),i.e(n.t0);case 14:return n.prev=14,i.f(),n.finish(14);case 17:case"end":return n.stop()}},n,null,[[1,11,14,17]])}),n||30).start().then(function(){return o})}}},68873:function(e){e.exports=function(e){var t=new Date(e.getTime()),n=t.getTimezoneOffset();return t.setSeconds(0,0),6e4*n+t.getTime()%6e4}},56797:function(e,t,n){var r=n(46373);e.exports=function(e,t){var n=r(e),a=Number(t);return n.setDate(n.getDate()+a),n}},81683:function(e,t,n){var r=n(46373);e.exports=function(e,t){var n=r(e),a=r(t);return n.getTime()>a.getTime()}},11127:function(e){e.exports=function(e){return e instanceof Date}},46373:function(e,t,n){var r=n(68873),a=n(11127),i=/[T ]/,o=/:/,s=/^(\d{2})$/,c=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],u=/^(\d{4})/,l=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],d=/^-(\d{2})$/,f=/^-?(\d{3})$/,p=/^-?(\d{2})-?(\d{2})$/,h=/^-?W(\d{2})$/,v=/^-?W(\d{2})-?(\d{1})$/,m=/^(\d{2}([.,]\d*)?)$/,y=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,g=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,b=/([Z+-].*)$/,w=/^(Z)$/,k=/^([+-])(\d{2})$/,x=/^([+-])(\d{2}):?(\d{2})$/;function O(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var a=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+a),r}e.exports=function(e,t){if(a(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var n=(t||{}).additionalDigits;n=null==n?2:Number(n);var C=function(e){var t,n={},r=e.split(i);if(o.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1]),t){var a=b.exec(t);a?(n.time=t.replace(a[1],""),n.timezone=a[1]):n.time=t}return n}(e),S=function(e,t){var n,r=c[t],a=l[t];if(n=u.exec(e)||a.exec(e)){var i=n[1];return{year:parseInt(i,10),restDateString:e.slice(i.length)}}if(n=s.exec(e)||r.exec(e)){var o=n[1];return{year:100*parseInt(o,10),restDateString:e.slice(o.length)}}return{year:null}}(C.date,n),E=S.year,P=function(e,t){if(null===t)return null;if(0===e.length)return(r=new Date(0)).setUTCFullYear(t),r;if(n=d.exec(e))return r=new Date(0),a=parseInt(n[1],10)-1,r.setUTCFullYear(t,a),r;if(n=f.exec(e)){r=new Date(0);var n,r,a,i,o=parseInt(n[1],10);return r.setUTCFullYear(t,0,o),r}if(n=p.exec(e)){r=new Date(0),a=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return r.setUTCFullYear(t,a,s),r}return(n=h.exec(e))?O(t,i=parseInt(n[1],10)-1):(n=v.exec(e))?O(t,i=parseInt(n[1],10)-1,parseInt(n[2],10)-1):null}(S.restDateString,E);if(!P)return new Date(e);var _,A=P.getTime(),R=0;if(C.time&&(R=function(e){if(t=m.exec(e))return(n=parseFloat(t[1].replace(",",".")))%24*36e5;if(t=y.exec(e))return n=parseInt(t[1],10),n%24*36e5+6e4*(r=parseFloat(t[2].replace(",",".")));if(t=g.exec(e)){var t,n,r;return n=parseInt(t[1],10),n%24*36e5+6e4*(r=parseInt(t[2],10))+1e3*parseFloat(t[3].replace(",","."))}return null}(C.time)),C.timezone)_=6e4*function(e){var t,n;return(t=w.exec(e))?0:(t=k.exec(e))?(n=60*parseInt(t[2],10),"+"===t[1]?-n:n):(t=x.exec(e))?(n=60*parseInt(t[2],10)+parseInt(t[3],10),"+"===t[1]?-n:n):0}(C.timezone);else{var D=A+R,M=new Date(D);_=r(M);var T=new Date(D);T.setDate(M.getDate()+1);var j=r(T)-r(M);j>0&&(_+=j)}return new Date(A+R+_)}},73221:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(78585)),c=r(n(29754)),u=r(n(67294)),l=r(n(36049)),d=r(n(24394)),f=function(e){var t=e.name,n=e.onChange;return u.default.createElement("input",{type:"checkbox",checked:(0,d.default)(t),onChange:function(e){return(0,d.default)(t,JSON.parse(e.target.checked))&&n&&n()}})},p=function(e){var t=e.children,n=e.onClick;return u.default.createElement("button",{type:"button",onClick:n,style:{position:"absolute",top:"100%",left:"0"}},t)},h=(0,l.default)(function(){var e=d.default.list();return u.default.createElement("div",null,e.map(function(e){return u.default.createElement("div",{key:e},e.replace(/[a-z][A-Z]/g,function(e){return e[0]+" "+e[1].toLowerCase()})," : ",u.default.createElement(f,{onChange:function(){},name:e}))}))}),v=function(e){(0,o.default)(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);return e=n?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function l(e){var t;return(0,a.default)(this,l),(t=r.call(this,e)).state={folded:!0},t}return(0,i.default)(l,[{key:"render",value:function(){var e,t=this;return(0,d.default)("switcher")&&u.default.createElement("div",{className:"flag-switcher",style:(e=this.state,{borderBottomLeftRadius:".5rem",padding:".5rem",position:"absolute",zIndex:1e3,color:"white",background:"rgba(74,68,90,0.85)",top:0,right:0,transform:"translateY(".concat(e.folded?"-100%":"0",")")})},u.default.createElement(p,{onClick:function(){return t.setState(function(e){return{folded:!e.folded}})}},this.state.folded?"Show":"Hide"," flags"),u.default.createElement("button",{onClick:function(){return t.setState({date:Date.now()})}},"refresh"),"\xa0",u.default.createElement("button",{onClick:function(){return d.default.reset()&&(0,d.default)("switcher",!0)&&t.forceUpdate()}},"reset"),u.default.createElement(h,null))}}]),l}(u.default.Component);t.default=v,v.List=h},36049:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(81506)),s=r(n(2205)),c=r(n(78585)),u=r(n(29754)),l=r(n(59713)),d=r(n(67294)),f=r(n(24394)),p=f.default.store;t.default=function(e){var t,n=function(t){(0,s.default)(h,t);var n,r,f=(n=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,u.default)(n);return e=r?Reflect.construct(t,arguments,(0,u.default)(this).constructor):t.apply(this,arguments),(0,c.default)(this,e)});function h(){var e;(0,a.default)(this,h);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=f.call.apply(f,[this].concat(n)),(0,l.default)((0,o.default)(e),"handleChange",function(){e.forceUpdate()}),e}return(0,i.default)(h,[{key:"componentDidMount",value:function(){p.on("change",this.handleChange)}},{key:"componentWillUnmount",value:function(){p.removeListener("change",this.handleChange)}},{key:"render",value:function(){return d.default.createElement(e,this.props)}}]),h}(d.default.Component);return(0,l.default)(n,"displayName",void 0),n.displayName="withFlags(".concat(null!==(t=e.displayName)&&void 0!==t?t:e.name,")"),n}},24394:function(e,t,n){"use strict";var r,a,i,o=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.resetFlags=t.listFlags=t.initializeFromRemote=t.initializeFromDOM=t.initialize=t.getTemplateData=t.enable=t.default=void 0;var s=o(n(87757)),c=o(n(34575)),u=o(n(93913)),l=o(n(48926)),d=o(n(63038)),f=n(71450),p=o(n(10916));function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v=new p.default,m=function(e,t){return 1==arguments.length?v.get(e):(v.set(e,t),t)},y=function(){return v.keys().sort()};t.listFlags=y;var g=function(){y().forEach(function(e){return v.remove(e)})};t.resetFlags=g;var b=function(e){if(Array.isArray(e)){if(0===e.length)return;console.log("flags.enable: Deprecation warning: prefer to use an object { flag1: true, flag2: true } instead of an array when using flags.enable"),t=e.map(function(e){return[e,!0]})}else"object"==typeof e&&(t=Object.entries(e));if(!!t){var t,n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(t);try{for(r.s();!(n=r.n()).done;){var a=(0,d.default)(n.value,2),i=a[0],o=a[1];m(i,o)}}catch(e){r.e(e)}finally{r.f()}}};t.enable=b;var w=(r=(0,l.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,f.Q)("io.cozy.settings").getById("io.cozy.settings.flags"));case 2:b(e.sent.data.attributes);case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.initializeFromRemote=w;var k=function(e){if("undefined"==typeof document)return null;var t,n=document.querySelector("[data-cozy]"),r=document.querySelector("[data-cozy-".concat(e,"]"));try{if(n)return JSON.parse(n.dataset.cozy)[e];if(!r)return null;else{;return console.warn('Prefer to use [data-cozy] to store template data. <div data-cozy="{{.CozyData}}></div>. "'),JSON.parse(r.dataset["cozy".concat((t=e)[0].toUpperCase()+t.slice(1))])}}catch(e){return null}};t.getTemplateData=k;var x=(a=(0,l.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=k("flags")){e.next=3;break}return e.abrupt("return",!1);case 3:return b(t),e.abrupt("return",!0);case 5:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)});t.initializeFromDOM=x;var O=(i=(0,l.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:if(!1!=e.sent){e.next=6;break}return e.next=6,w(t);case 6:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)});t.initialize=O;var C=function(){var e,t,n;function r(e){(0,c.default)(this,r),this.client=e,this.handleLogin=this.handleLogin.bind(this),this.handleLogout=this.handleLogout.bind(this),this.client.on("login",this.handleLogin),this.client.on("logout",this.handleLogout),this.setupInitializing(),e.isLogged&&this.handleLogin()}return(0,u.default)(r,[{key:"refresh",value:(e=(0,l.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.initializeFromRemote(this.client);case 2:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"setupInitializing",value:function(){var e=this;this.initializing=new Promise(function(t){e.resolveInitializing=t})}},{key:"handleLogin",value:(t=(0,l.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.initialize(this.client);case 2:this.resolveInitializing(),this.client.emit("plugin:flag:login");case 4:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"handleLogout",value:(n=(0,l.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.reset(),this.setupInitializing(),this.client.emit("plugin:flag:logout");case 3:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),r}();C.pluginName="flags",m.store=v,m.list=y,m.reset=g,m.enable=b,m.initializeFromRemote=w,m.initializeFromDOM=x,m.initialize=O,m.plugin=C;t.default=m},71400:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(73221)),i=r(n(36049)),o=r(n(24394)),s=r(n(99975));o.default.connect=i.default,o.default.FlagSwitcher=a.default,o.default.useFlag=s.default,"undefined"!=typeof __ENABLED_FLAGS__&&o.default.enable(__ENABLED_FLAGS__);var c=o.default;t.default=c},6465:function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{!s&&null!=n.return&&n.return()}finally{if(c)throw o}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.prefix=t.getKey=t.default=void 0;function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a="flag__";t.prefix=a;var i=function(e){return a+e};t.getKey=i;var o=function(){return Object.keys(localStorage).filter(function(e){return 0===e.indexOf(a)}).map(function(e){return e.replace(a,"")})},s=function(e){var t=localStorage.getItem(i(e));return t?JSON.parse(t):t},c=function(e){return localStorage.removeItem(i(e))};t.default={getAll:function(){var e={},t,r=n(o());try{for(r.s();!(t=r.n()).done;){var a=t.value;e[a]=s(a)}}catch(e){r.e(e)}finally{r.f()}return e},getItem:s,setItem:function(e,t){var n=JSON.stringify(t);return localStorage.setItem(i(e),n)},clearAll:function(){var e,t=n(o());try{for(t.s();!(e=t.n()).done;){var r=e.value;c(r)}}catch(e){t.e(e)}finally{t.f()}},removeItem:c}},10916:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(63038)),i=r(n(34575)),o=r(n(93913)),s=r(n(37203)),c=r(n(6465)),u=function(){function e(){(0,i.default)(this,e),this.store={},"undefined"!=typeof localStorage&&(this.longtermStore=c.default),this.restore()}return(0,o.default)(e,[{key:"restore",value:function(){if(!!this.longtermStore)for(var e=this.longtermStore.getAll(),t=0,n=Object.entries(e);t<n.length;t++){var r=(0,a.default)(n[t],2),i=r[0],o=r[1];this.store[i]=o,this.emit("change",i)}}},{key:"keys",value:function(){return Object.keys(this.store)}},{key:"get",value:function(e){if(this.store.hasOwnProperty(e))return this.store[e];if("string"==typeof e){for(var t=e.split("."),n=t.length,r=n-1;r>0;r--){var a=t.slice(0,r).join(".");if(this.store.hasOwnProperty(a))return t.slice(r,n).reduce(function(e,t){return e&&e.hasOwnProperty(t)?e[t]:null},this.store[a])}}return null}},{key:"set",value:function(e,t){this.longtermStore&&this.longtermStore.setItem(e,t),this.store[e]=t,this.emit("change",e)}},{key:"remove",value:function(e){delete this.store[e],this.longtermStore&&this.longtermStore.removeItem(e),this.emit("change",e)}}]),e}();s.default.mixin(u);t.default=u},99975:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.useState)((0,o.default)(e)),n=(0,a.default)(t,2),r=n[0],s=n[1];return(0,i.useEffect)(function(){var t=function(t){t===e&&s((0,o.default)(e))};return o.default.store.on("change",t),function(){o.default.store.removeListener("change",t)}},[s,e]),r};var a=r(n(63038)),i=n(67294),o=r(n(24394))},10505:function(e,t,n){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function a(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)})}}n.r(t),n.d(t,{default:()=>tg});function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s,c,u,l,d,f,p=n("73461"),h=n.n(p),v=n("69172"),m=n.n(v),y=n("27361"),g=n.n(y),b=n("45697"),w=n.n(b),k=n("67294"),x=n("16396"),O=n.n(x),C=n("11954"),S=n("46932"),E=n("89526"),P=n("64222"),_=n("26238"),A=n("11998"),R=n("28446"),D=n("17508"),M=n("87757"),T=n.n(M),j=n("94184"),N=n.n(j),I={FILE:"file"},L={SHORTCUT:"shortcut"},z=function(e){return!!e&&e.type===I.FILE&&e.class===L.SHORTCUT},Z=n("32419"),B=n("16019"),F=n("77354"),U=["iconRef"];let V=function(e){var t=e.iconRef,n=(0,F.Z)(e,U);return k.createElement("svg",(0,B.Z)({viewBox:"0 0 16 16"},n,{ref:t}),k.createElement("path",{d:"M1 11.009V5.5c0-.55.39-.773.872-.498l5.256 3.003c.476.272.872.944.872 1.495v5.508c0 .549-.39.772-.872.497l-5.256-3.003C1.396 12.231 1 11.56 1 11.01zm15 0c0 .55-.396 1.222-.872 1.494l-5.256 3.003c-.481.275-.872.052-.872-.497V9.5c0-.55.396-1.223.872-1.495l5.256-3.003c.481-.275.872-.052.872.498v5.508zM9.35 6.982c-.47.288-1.237.284-1.7 0l-4.8-2.954c-.47-.29-.463-.732.027-.995L7.623.477c.485-.261 1.264-.264 1.754 0l4.746 2.556c.485.26.49.71.027.995l-4.8 2.954z"}))};var H=n("63293"),W=n("32692"),q=["children","className","tag","isSecondary"],G="styles__Tile___2SqRi",K="styles__Tile-secondary___2zYdn",Q="styles__Tile-icon-wrapper___24AzZ",Y="styles__Tile-title___3gbq-",J="styles__Tile-status___33VkE",$="styles__Tile-title-multiline___17HPx",X="styles__Tile-status-accent___an9au",ee=function(e){var t=e.children,n=e.className,r=e.tag,a=e.isSecondary,i=(0,F.Z)(e,q);return k.createElement(r,(0,B.Z)({className:N()(G,(0,D.Z)({},K,a),n)},i),t)},et=function(e){var t=e.children,n=e.className,r=e.isMultiline;return k.createElement(W.default,{variant:"h6",className:N()(Y,(0,D.Z)({},$,r),n)},t)},en=function(e){var t=e.children,n=e.className,r=e.isAccent;return k.createElement(W.default,{variant:"caption",className:N()(J,(0,D.Z)({},X,r),n)},t)},er=function(e){var t=e.children;return k.createElement("div",{className:Q},t)};et.propTypes={className:w().string,isMultiline:w().bool},et.defaultProps={isMultiline:!1},en.propTypes={className:w().string,isAccent:w().bool},en.defaultProps={isAccent:!1},ee.propTypes={className:w().string,isSecondary:w().bool,tag:w().string},ee.defaultProps={isSecondary:!1,tag:"div"};var ea=n("41120"),ei={"AppTile-icon":"styles__AppTile-icon___1f0c0"},eo=(0,ea.Z)({letter:{color:"white",margin:"auto"},letterWrapper:{backgroundColor:function(e){var t=e.name;return(0,H.g)(t)}}}),es=function(e){var t,n,r,a,i=e.file,o=eo({name:i.name}),s=null===(t=i.attributes)||void 0===t?void 0:null===(n=t.metadata)||void 0===n?void 0:n.icon,c=null===(r=i.attributes)||void 0===r?void 0:null===(a=r.metadata)||void 0===a?void 0:a.iconMimeType;return s?k.createElement(er,null,k.createElement("img",{className:ei["AppTile-icon"],src:c?"data:".concat(c,";base64,").concat(s):"data:image/svg+xml;base64,".concat(window.btoa(s)),width:48,height:48,alt:i.name})):k.createElement(er,null,k.createElement("div",{className:o.letterWrapper},k.createElement(W.default,{className:o.letter,variant:"h2",align:"center"},i.name[0].toUpperCase())))},ec=n("85718"),eu=n.n(ec),el=n("24770"),ed={"c-loading-placeholder":"styles__c-loading-placeholder___3L6Gz","c-app-icon":"styles__c-app-icon___2_O40","c-app-icon-default":"styles__c-app-icon-default___3CEmt"},ef="done",ep="errored",eh="fetching",ev=function(e){(0,_.Z)(i,e);var t,n,r,a=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,R.Z)(t);return e=n?Reflect.construct(r,arguments,(0,R.Z)(this).constructor):r.apply(this,arguments),(0,A.Z)(this,e)});function i(e,t){var n;return(0,S.Z)(this,i),n=a.call(this,e,t),(0,D.Z)((0,P.Z)(n),"state",{error:null,icon:null,status:n.props.client?eh:ep}),n.isUnmounting=!1,n.handleError=n.handleError.bind((0,P.Z)(n)),n.fetchIcon=n.fetchIcon.bind((0,P.Z)(n)),n}return(0,E.Z)(i,[{key:"componentWillUnmount",value:function(){this.isUnmounting=!0}},{key:"componentDidMount",value:function(){this.isUnmounting=!1,this.load()}},{key:"componentDidUpdate",value:function(e){this.props.fetchIcon!==e.fetchIcon&&this.load()}},{key:"fetchIcon",value:function(){var e=this.props,t=e.app,n=e.type,r=e.priority,a=e.client;if(!z(t))return a.getStackClient().getIconURL({type:n,slug:t.slug||t,appData:t,priority:r})}},{key:"handleError",value:function(){this.setState({status:ep})}},{key:"load",value:(r=(0,C.Z)(T().mark(function e(){var t,n,r,a,i,o,s,c,u,l,d;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=this.props).app,r=t.fetchIcon,a=t.onReady,i=t.client,o=r||this.fetchIcon,e.prev=2,i&&(u=(d=new URL(i.getStackClient().uri)).host,l="https:"===d.protocol),e.next=6,o(n,u,l);case 6:s=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),c=e.t0;case 12:!this.isUnmounting&&(this.setState({error:c,icon:s,status:c?ep:ef}),"function"==typeof a&&a());case 13:case"end":return e.stop()}},e,this,[[2,9]])})),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.alt,n=e.className,r=e.fallbackIcon,a=this.state,i=a.icon,o=a.status;if(z(this.props.app))return k.createElement(es,{file:this.props.app});switch(o){case eh:return k.createElement("div",{role:"progressbar",className:N()(ed["c-loading-placeholder"],ed["c-app-icon"],n)});case ef:return k.createElement("img",{alt:t,className:N()(ed["c-app-icon"],n),onError:this.handleError,ref:this.props.iconRef,src:i});default:return k.createElement(Z.default,{className:N()(ed["c-app-icon"],ed["c-app-icon-default"],n),height:"100%",icon:r||V,width:"100%",color:eu().coolGrey,iconRef:this.props.iconRef})}}}]),i}(k.Component);ev.propTypes={alt:w().string,app:w().oneOfType([el.AppDoctype,w().string]),fallbackIcon:Z.iconPropType,fetchIcon:w().func,client:w().object.isRequired,className:w().string,onReady:w().func,type:w().oneOf(["app","konnector"]),priority:w().oneOf(["stack","registry"])},ev.defaultProps={type:"app",priority:"stack"};let em=(0,x.withClient)(ev);var ey=n("20958"),eg=n("20240"),eb=n("73905"),ew=n("24546"),ek=n("10059"),ex=n("96105"),eO=n("11075"),eC=n("88495"),eS=n("62125"),eE=n("30724"),eP=n.n(eE),e_=n("25750"),eA=["source","linkProps"],eR=function(e){var t=e.linkProps;return{paragraph:function(e){return k.createElement("span",{className:"u-db u-mv-0"},e.children)},link:function(e){return k.createElement(e_.default,r({href:e.href,rel:"noreferrer",target:"_blank"},t),e.children)}}};let eD=function(e){var t=e.source,n=e.linkProps,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,eA);return k.createElement(eP(),r({},a,{source:t,linkTarget:"_blank",renderers:eR({linkProps:n})}))};var eM=n("34378");function eT(e){return(eT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ej(e){var t=function(e,t){if("object"!=eT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eT(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eT(t)?t:t+""}function eN(e,t,n){return(t=ej(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ej(r.key),r)}}function eL(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ez(e,t){return(ez=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eZ(e){return(eZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eB=function(){return!!e})()}function eF(e){var t="function"==typeof Map?new Map:void 0;return(eF=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(eB())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var a=new(e.bind.apply(e,r));return n&&ez(a,n.prototype),a}(e,arguments,eZ(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ez(n,e)})(e)}function eU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eU(Object(n),!0).forEach(function(t){eN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n("18721"),n("92742");var eH="CHALLENGE_ASKED",eW="DISK_QUOTA_EXCEEDED",eq="LOGIN_FAILED",eG="NOT_EXISTING_DIRECTORY",eK="TERMS_VERSION_MISMATCH",eQ="USER_ACTION_NEEDED",eY=[eH,eW,eq,"MAINTENANCE",eG,eK,eQ,"VENDOR_DOWN","ACCOUNT_WITH_SAME_IDENTIFIER_ALREADY_DEFINED"],eJ=[eH,eW,eq,eG,eQ],e$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ez(e,t)}(s,e);var t,n,r,a,i,o=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=eZ(t);return e=n?Reflect.construct(r,arguments,eZ(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==eT(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eL(e)}(this,e)});function s(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,s);for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e=o.call.apply(o,[this].concat(n)),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(eL(e),s),e.code=e.message;var a=e.code.split(".")[0];return e.type=eY.includes(a)?a:"UNKNOWN_ERROR",e}return r=s,a=[{key:"isLoginError",value:function(){return this.type===eq}},{key:"isUserError",value:function(){return eJ.includes(this.type)}},{key:"isTermsVersionMismatchError",value:function(){return this.type===eK}},{key:"isSolvableViaReconnect",value:function(){return this.type===eq||this.type===eH||"USER_ACTION_NEEDED.SCA_REQUIRED"===this.code||"USER_ACTION_NEEDED.WEBAUTH_REQUIRED"===this.code||"USER_ACTION_NEEDED.OAUTH_OUTDATED"===this.code||"USER_ACTION_NEEDED.CHANGE_PASSWORD"===this.code||"VENDOR_DOWN"===this.code||"VENDOR_DOWN.BANK_DOWN"===this.code||"VENDOR_DOWN.LINXO_DOWN"===this.code}}],eI(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),s}(eF(Error)),eX=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"claude@cozycloud.cc",i="error.job.UNKNOWN_ERROR",o={name:t.name||"",link:t.vendor_link||"",supportMail:a};if(!(e instanceof e$)){var s=n("".concat(i,".").concat(r),o);return"description"===r?e.message?"".concat(s," (").concat(e.message,")"):s:n("".concat(i,".").concat(r),o)}return n("error.job.".concat(e.code,".").concat(r),eV(eV({},o),{},{_:n("error.job.".concat(e.type,".").concat(r),eV(eV({},o),{},{_:n("".concat(i,".").concat(r),o)}))}))},e0=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!e.available_version},e1=function(e){var t=!!e&&!!e.current_state&&e.current_state.last_success;return t?new Date(t):null},e2=function(e){var t,n,r,a=e.t,i=e.konnector,o=e.trigger,s=e.isRunning,c=e1(o);if(s)return a("card.launchTrigger.lastSync.syncing");if(c){;return(t=c,Date.now()-new Date(t).getTime()<3e5)?a("card.launchTrigger.lastSync.justNow"):a("card.launchTrigger.lastSync.afterSomeTimes",{times:(0,eM.NQ)(c)})}return(n=i,r=o,n&&!r)?a("card.launchTrigger.lastSync.disconnected"):a("card.launchTrigger.lastSync.unknown")},e4=n("69311");eS.default.childContextTypes;let e3=(0,e4.default)(function(e){return n(60291)("./".concat(e,".json"))});var e5=n("45955"),e6=n("20786"),e9=n("81623"),e8=O().fetchPolicies.olderThan(6e5),e7=function(e){var t={definition:function(){return(0,x.Q)("io.cozy.konnectors").getById("io.cozy.konnectors/".concat(e))},options:{as:"io.cozy.konnectors/".concat(e),fetchPolicy:e8}};return{definition:t.definition(),options:t.options}},te=function(e){var t={definition:function(){return(0,x.Q)("io.cozy.apps_registry").getById("".concat(e))},options:{as:"io.cozy.apps_registry/".concat(e),fetchPolicy:e8}};return{definition:t.definition(),options:t.options}},tt=function(e){var t=e.slug,n=e.sourceAccountIdentifier;return{definition:(0,x.Q)("io.cozy.accounts").where({account_type:t,"cozyMetadata.sourceAccountIdentifier":n}),options:{as:"io.cozy.accounts/account_type/".concat(t,"/sourceAccountIdentifier/").concat(n),fetchPolicy:e8}}};var tn=(s=i(h().mark(function e(t,n){var r;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection("io.cozy.triggers").get(n);case 2:return r=e.sent.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)}),tr=n("60732"),ta=n.n(tr),ti=("undefined"!=typeof window&&window.minilog||ta())("harvest");function to(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?to(Object(n),!0).forEach(function(t){eN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):to(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tc=function(e){var t=e.client,n=e.konnector,r=e.universalLink,a=e.iconStatus,i=e.message,o=(0,e9.hk)({cozyUrl:t.getStackClient().uri,slug:r.slug,subDomainType:t.getInstanceOptions().cozySubdomainType,nativePath:r.nativePath});return{name:n.name,link:o,vendorLink:n.vendor_link&&{component:"a",href:n.vendor_link,target:"_blank"},iconStatus:a,message:i}};var tu=(c=i(h().mark(function e(t,n){var r;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.query(n.definition,n.options);case 3:return r=t.getQueryFromState(n.options.as).data,e.abrupt("return",r[0]);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t){return c.apply(this,arguments)});var tl=(u=i(h().mark(function e(t,n){var r;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tm.fetchKonnector(t,te(n));case 2:return r=e.sent,e.abrupt("return",g()(r,"maintenance_activated",!1));case 4:case"end":return e.stop()}},e)})),function(e,t){return u.apply(this,arguments)}),td=function(e){var t=e.t,n=e.slug,r=e.error,a=e.consoleMessage;return ti.error("konnectorBlock : ".concat(a)),ti.error(r),e5.n_({category:"konnector",message:"Slug: ".concat(n),level:"info"}),{fatalError:t("konnectorBlock.fatalError",{name:"support@cozycloud.cc",link:"mailto:support@cozycloud.cc"})}},tf={noAccountConnected:function(e){var t=e.client,n=e.konnector,r=e.slug,a=e.t;return tc({client:t,konnector:n.attributes,universalLink:{slug:"home",nativePath:"connected/".concat(r,"/new")},iconStatus:"disabled",message:{text:a("konnectorBlock.disconnected")}})},inMaintenance:function(e){var t=e.client,n=e.konnector,r=e.slug,a=e.t;return tc({client:t,konnector:n.attributes,universalLink:{slug:"home",nativePath:"connected/".concat(r)},iconStatus:"disabled",message:{text:a("konnectorBlock.inMaintenance")}})},inError:function(e){var t=e.client,n=e.konnector,r=e.slug,a=e.t,i=e.error,o=i.isActionable||e0(n)?"error":"textSecondary";return tc({client:t,konnector:n.attributes,universalLink:{slug:"home",nativePath:"connected/".concat(r)},iconStatus:"disabled",message:{text:eX(i,n,a,"title"),color:o}})},hasNewVersionAvailable:function(e){var t=e.client,n=e.konnector,r=e.slug,a=e.t;return tc({client:t,konnector:n.attributes,universalLink:{slug:"home",nativePath:"connected/".concat(r)},message:{text:a("konnectorBlock.hasNewVersionAvailable"),color:"primary"}})},default:function(e){var t=e.client,n=e.konnector,r=e.slug,a=e.sourceAccount;return tc({client:t,konnector:n.attributes,universalLink:{slug:"home",nativePath:"connected/".concat(r,"/accounts/").concat(a)}})},stackNotFound:function(e){var t=e.client,n=e.konnector,r=e.slug;return tc({client:t,konnector:n.attributes,universalLink:{slug:"store",nativePath:"discover/".concat(r)},iconStatus:"disabled"})},stackErrorOtherThan404:function(e){return td({t:e.t,slug:e.slug,error:e.error,consoleMessage:"This is a stack error other than 404"})},registryError:function(e){return td({t:e.t,slug:e.slug,error:e.error,consoleMessage:"This is a registry error"})}};var tp=(l=i(h().mark(function e(t){var n,r,a,i,o,s,c,u;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.konnector,a=t.slug,i=tt({sourceAccountIdentifier:t.sourceAccountIdentifier,slug:a}),e.next=4,tu(n,i);case 4:var l,d;return l=(o=e.sent)._id,d=r,s={definition:(0,x.Q)("io.cozy.triggers").where({type:d.clientSide?"@client":"@cron","message.account":l,"message.konnector":d.slug}),options:{as:"triggers-".concat(d.slug,"-").concat(l),fetchPolicy:e8}},e.next=8,tu(n,s);case 8:return c=e.sent,e.next=11,tn(n,c._id);case 11:return u=e.sent,e.abrupt("return",{account:o,trigger:u});case 13:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)});var th=(d=i(h().mark(function e(t){var n,r,a,i,o,s,c,u,l,d,f,p;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.slug,a=t.sourceAccountIdentifier,e.prev=1,e.next=4,tm.fetchKonnector(n,e7(r));case 4:return i=e.sent,e.next=7,tm.fetchAccountAndTrigger({client:n,konnector:i,slug:r,sourceAccountIdentifier:a});case 7:if(s=(o=e.sent).account,c=o.trigger,l=(u=tm.isAccountConnected(s)).accountConnected,d=u.sourceAccount,l){e.next=13;break}return e.abrupt("return",{konnector:i,trigger:c,status:"noAccountConnected"});case 13:return e.next=15,tm.isInMaintenance(n,r);case 15:if(!e.sent){e.next=18;break}return e.abrupt("return",{konnector:i,trigger:c,status:"inMaintenance"});case 18:return e.next=20,tm.isInError(c);case 20:if(!(f=e.sent.error)){e.next=24;break}return e.abrupt("return",{konnector:i,trigger:c,status:"inError",error:f});case 24:if(!e0(i)){e.next=26;break}return e.abrupt("return",{konnector:i,trigger:c,status:"hasNewVersionAvailable"});case 26:return e.abrupt("return",{konnector:i,trigger:c,status:"default",sourceAccount:d});case 29:if(e.prev=29,e.t0=e.catch(1),404!==e.t0.status){e.next=42;break}return e.prev=32,e.next=35,tm.fetchKonnector(n,te(r));case 35:return p=e.sent,e.abrupt("return",{konnector:p,status:"stackNotFound"});case 39:return e.prev=39,e.t1=e.catch(32),e.abrupt("return",{status:"registryError",error:e.t1});case 42:return e.abrupt("return",{status:"stackErrorOtherThan404",error:e.t0});case 43:case"end":return e.stop()}},e,null,[[1,29],[32,39]])})),function(e){return d.apply(this,arguments)});var tv=(f=i(h().mark(function e(t){var n,r,a,i,o,s,c,u,l,d;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.t,a=t.slug,i=t.sourceAccountIdentifier,e.next=3,th({client:n,slug:a,sourceAccountIdentifier:i});case 3:return s=(o=e.sent).konnector,c=o.trigger,u=o.status,l=o.error,d=o.sourceAccount,e.abrupt("return",ts(ts({},tf[u]({client:n,konnector:s,slug:a,t:r,sourceAccount:d,error:l})),{},{trigger:c}));case 10:case"end":return e.stop()}},e)})),function(e){return f.apply(this,arguments)}),tm={fetchKonnector:function(e,t){return tu(e,t)},fetchAccountAndTrigger:tp,isAccountConnected:function(e){return{accountConnected:!!e,sourceAccount:e._id}},isInError:function(e){return"errored"!==g()(e,"current_state.status")?{error:null}:{error:{message:g()(e,"current_state.last_error"),isActionable:e6.triggers.hasActionableError(e)}}},isInMaintenance:tl},ty=function(e){var t,n,a=e.file;var s=(n=2,function(e){if(Array.isArray(e))return e}(t=(0,k.useState)())||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(t,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1],l=(0,x.useClient)(),d=(0,eS.useI18n)().t,f=g()(a,"cozyMetadata.createdByApp"),p=g()(a,"cozyMetadata.sourceAccountIdentifier"),v=(0,x.generateWebLink)({slug:"store",cozyUrl:l.getStackClient().uri,subDomainType:l.getInstanceOptions().subdomain,pathname:"/",hash:"/discover/".concat(f)});if((0,k.useEffect)(function(){var e;(e=i(h().mark(function e(t){var n,r,a,i;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.t,a=t.slug,i=t.sourceAccountIdentifier,e.next=3,tv({client:n,t:r,slug:a,sourceAccountIdentifier:i});case 3:u(e.sent);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})({client:l,t:d,slug:f,sourceAccountIdentifier:p})},[l,d,f,p]),!c)return k.createElement("div",{"data-testid":"KonnectorBlock-spinner"},k.createElement(eC.default,{className:"u-flex u-flex-justify-center u-p-2",size:"large"}));var y=c.name,b=c.link,w=c.vendorLink,O=c.iconStatus,C=c.message,S=c.trigger,E=c.fatalError;if(E)return k.createElement(W.default,{className:"u-pv-1-half u-ph-2",variant:"body1"},k.createElement(eD,{source:E}));var P=e2({t:d,konnector:c,trigger:S,isRunning:"running"===S.current_state.status});return k.createElement(k.Fragment,null,k.createElement(ek.default,{size:"large",button:!0,divider:!0,component:"a",href:b,target:"_blank"},k.createElement(ex.default,null,k.createElement(em,{app:f,type:"konnector",priority:"registry",className:m()({"u-filter-gray-100 u-o-50":"disabled"===O})})),k.createElement(eO.default,{primary:y,primaryTypographyProps:{variant:"h6"},secondary:g()(C,"text",P),secondaryTypographyProps:g()(C,"color")&&{color:C.color}}),k.createElement(ex.default,null,k.createElement(Z.default,{icon:eb.default}))),k.createElement(ew.default,null,k.createElement(ek.default,{button:!0,component:"a",href:v,target:"_blank"},k.createElement(ex.default,null,k.createElement(em,{app:"store",className:"u-w-1 u-h-1"})),k.createElement(eO.default,{primary:d("konnectorBlock.store.primary"),secondary:d("konnectorBlock.store.secondary")})),k.createElement(ey.default,{component:"li",variant:"inset"}),k.createElement(ek.default,r({button:!0},w),k.createElement(ex.default,null,k.createElement(Z.default,{icon:eg.default})),k.createElement(eO.default,{primary:d("konnectorBlock.open"),secondary:g()(w,"href")}))))};ty.propTypes={file:w().object.isRequired};let tg=e3(ty)},69172:function(e){!function(){"use strict";var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var a=arguments[r];if(a){var i=typeof a;if("string"===i||"number"===i)e.push(a);else if(Array.isArray(a)){if(a.length){var o=n.apply(null,a);o&&e.push(o)}}else if("object"===i){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){e.push(a.toString());continue}for(var s in a)t.call(a,s)&&a[s]&&e.push(s)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return n}):window.classNames=n}()},96762:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numbers=void 0;t.numbers={maxAttempts:20}},51496:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.strings=void 0;t.strings={flagshipButNoRNAPI:"<WebviewIntentProvider /> can not instantiate its service. The application was detected as running in a Flagship webview but has no access to `window.ReactNativeWebView`, which is contradictory.",noListenerFound:"Could not handle event, this `NativeMessenger` instance does not have a listener.",noWebviewFound:'error: no WebView was found when trying to post message. This might mean we exited a CozyApp without waiting the call("backToHome") response.',postMeSignature:"@post-me",webviewIsRendered:"webviewIsRendered",errorRegisterWebview:"Cannot register webview. A webview is already registered into cozy-intent with the uri: ${uri}",errorUnregisterWebview:"Cannot unregister webview. No webview is registered into cozy-intent with the uri: ${uri}",errorEmitMessage:"Cannot emit message. No webview is registered with uri: ${webviewUri}",errorCozyBarAPIMissing:"Cozy-bar was detected by WebviewIntentProvider but the required setWebviewContext() API was not found. Cozy-bar webview intents will not work. Your cozy-bar version is most likely outdated.",errorParentHandshake:'Handshake failed for uri: "${uri}". ConcreteConnection will not be available for this uri\'s messenger, but messages should still work. Error was: "${errorMessage}".',errorNoMessengerToInit:'Could not initialise messenger for uri: "${uri}. No WebView has been registered from react-native with this uri. Please use NativeService.registerWebview(WebviewRef).',logging:{registering:function(e){return'- REGISTERING ▶️ "'.concat(e,'"')},registered:function(e){return'- REGISTERED ▶️ "'.concat(e,'"')},unregistering:function(e){return'- UNREGISTERING ▶️ "'.concat(e,'"')},unregistered:function(e){return'- UNREGISTERED ▶️ "'.concat(e,'"')}}}},55260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(96762);Object.keys(r).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==r[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var a=n(51496);Object.keys(a).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==a[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=n(53060);Object.keys(i).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==i[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(81334);Object.keys(o).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==o[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var s=n(69855);Object.keys(s).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==s[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var c=n(54675);Object.keys(c).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==c[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var u=n(45566);Object.keys(u).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==u[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var l=n(59761);Object.keys(l).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==l[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var d=n(3463);Object.keys(d).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==d[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}})});var f=n(81519);Object.keys(f).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==f[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}})});var p=n(81712);Object.keys(p).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==p[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}})})},53060:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFlagshipUI=void 0;t.isFlagshipUI=function(e){return"object"==typeof e&&null!==e&&("bottomBackground"in e||"bottomOverlay"in e||"bottomTheme"in e||"topBackground"in e||"topOverlay"in e||"topTheme"in e)}},81334:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebviewSourceBaseUrl=function(e){return!!e.html}},69855:function(){},54675:function(){},45566:function(){},59761:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.NativeMessenger=t.DebugNativeMessenger=void 0;var a=r(n(93913)),i=r(n(34575)),o=r(n(59713)),s=n(97627),c=r(n(74450)),u=n(55260),l=(0,c.default)("cozy-intent");t.logger=l;var d=(0,s.debug)("NativeMessenger"),f=(0,a.default)(function e(t){var n,r=this;(0,i.default)(this,e),(0,o.default)(this,"injectJavaScript",void 0),(0,o.default)(this,"listener",void 0),(0,o.default)(this,"webviewUri",void 0),(0,o.default)(this,"postMessage",function(e){if(e.error){var t;l.warn("Error during intent to ".concat(null!==(t=r.webviewUri)&&void 0!==t?t:"undefined webview"," : "),JSON.stringify(e.error))}try{var n,a="window.postMessage(".concat(JSON.stringify(e),")");null===(n=r.injectJavaScript)||void 0===n||n.call(r,a)}catch(e){d(u.strings.noWebviewFound)}}),(0,o.default)(this,"addMessageListener",function(e){return r.listener=e,function(){return r.listener=void 0}}),(0,o.default)(this,"onMessage",function(e){if(!r.listener)return d(u.strings.noListenerFound);r.listener({data:e})}),this.injectJavaScript=t.injectJavaScript,this.webviewUri=null!==(n=t.props.source.uri)&&void 0!==n?n:t.props.source.baseUrl});t.NativeMessenger=f;t.DebugNativeMessenger=function(e){return{postMessage:function(t){"response"!==t.action&&d("- OUT",t),e.postMessage(t)},addMessageListener:function(t){return e.addMessageListener(t)},onMessage:function(t){d("- IN",t),e.onMessage(t)}}}},3463:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.NativeService=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(59713)),u=n(97627),l=n(55260),d=n(46311);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=(0,u.debug)("NativeService"),v=function(){function e(t){var n,r,s,f=this,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.NativeMessenger;(0,o.default)(this,e),(0,c.default)(this,"messengerService",void 0),(0,c.default)(this,"localMethods",void 0),(0,c.default)(this,"messengerRegister",{}),(0,c.default)(this,"updateLocalMethods",function(e){f.localMethods=e}),(0,c.default)(this,"getUri",function(e){return new URL(e.nativeEvent.url).hostname.toLowerCase()}),(0,c.default)(this,"parseNativeEvent",function(e){return JSON.parse(e.nativeEvent.data)}),(0,c.default)(this,"isPostMeMessage",function(e){return e.type===l.strings.postMeSignature}),(0,c.default)(this,"isInitMessage",function(e){return e.message===l.strings.webviewIsRendered}),(0,c.default)(this,"registerWebview",function(e,t,n){if(h(l.strings.logging.registering(e)),f.messengerRegister[e])return h((0,d.interpolate)(l.strings.errorRegisterWebview,{uri:e}));var r=new f.messengerService(n);f.messengerRegister=p(p({},f.messengerRegister),{},(0,c.default)({},e,{messenger:(0,d.isNativeDevMode)()?(0,l.DebugNativeMessenger)(r):r,slug:t})),h(l.strings.logging.registered(e))}),(0,c.default)(this,"unregisterWebview",function(e){if(h(l.strings.logging.unregistering(e)),!f.messengerRegister[e])return h((0,d.interpolate)(l.strings.errorUnregisterWebview,{uri:e}));delete f.messengerRegister[e],h(l.strings.logging.unregistered(e))}),(0,c.default)(this,"initWebview",(n=(0,i.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.ParentHandshake)(t,f.localMethods,l.numbers.maxAttempts);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})),(0,c.default)(this,"tryEmit",(r=(0,i.default)(a.default.mark(function e(t,n){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f.isNativeEvent(t)){e.next=2;break}return e.abrupt("return");case 2:if("setFlagshipUI"===(r=f.parseNativeEvent(t)).methodName&&(0,d.isFlagshipUiArgsArray)(r.args)&&(r.args[0].componentId=n),"setTheme"===r.methodName&&Array.isArray(r.args)&&(0,d.isThemeArg)(r.args[0])&&(r.args[0]={homeTheme:r.args[0],componentId:n}),!f.isInitMessage(r)){e.next=9;break}return e.next=8,f.tryInit(t);case 8:return e.abrupt("return",e.sent);case 9:f.isPostMeMessage(r)&&f.tryOnMessage(t,r);case 10:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})),(0,c.default)(this,"tryInit",(s=(0,i.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.getUri(t),r=f.messengerRegister[n],e.prev=2,r){e.next=5;break}throw Error((0,d.interpolate)(l.strings.errorNoMessengerToInit,{uri:n}));case 5:return e.next=7,f.initWebview(r.messenger);case 7:r.connection=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),h((0,d.interpolate)(l.strings.errorParentHandshake,{uri:n,errorMessage:(0,d.getErrorMessage)(e.t0)}));case 13:case"end":return e.stop()}},e,null,[[2,10]])})),function(e){return s.apply(this,arguments)})),(0,c.default)(this,"tryOnMessage",function(e,t){var n,r=f.getUri(e),a=f.messengerRegister[r];if(void 0===a)return h((0,d.interpolate)(l.strings.errorEmitMessage,{webviewUri:r}));null===(n=t.args)||void 0===n||n.unshift({slug:a.slug}),a.messenger.onMessage(t)}),(0,c.default)(this,"getHostname",function(e){try{return new URL(e).hostname.toLowerCase()}catch(t){return e}}),(0,c.default)(this,"call",function(e,t){for(var n,r,a,i=arguments.length,o=Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];return null===(n=f.messengerRegister[f.getHostname(e)])||void 0===n?void 0:null===(r=n.connection)||void 0===r?void 0:(a=r.remoteHandle()).call.apply(a,[t].concat(o))}),this.messengerService=v,this.localMethods=t}return(0,s.default)(e,[{key:"isNativeEvent",value:function(e){return void 0!==e.nativeEvent.data}}]),e}();t.NativeService=v},81519:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewMessenger=t.DebugWebviewMessenger=void 0;var a=r(n(93913)),i=r(n(34575)),o=r(n(59713)),s=n(97627),c=(0,a.default)(function e(t){var n=this;(0,i.default)(this,e),(0,o.default)(this,"windowRef",void 0),(0,o.default)(this,"postMessage",function(e){var t;return null===(t=n.windowRef)||void 0===t?void 0:t.ReactNativeWebView.postMessage(JSON.stringify(e))}),(0,o.default)(this,"addMessageListener",function(e){var t,r=function(t){return e(t)};return null===(t=n.windowRef)||void 0===t||t.addEventListener("message",r),function(){var e;return null===(e=n.windowRef)||void 0===e?void 0:e.removeEventListener("message",r)}}),this.windowRef=t});t.WebviewMessenger=c;t.DebugWebviewMessenger=function(e){var t=(0,s.debug)("WebviewMessenger");return{postMessage:function(n){"response"!==n.action&&t("- OUT",n),e.postMessage(n)},addMessageListener:function(t){return e.addMessageListener(t)}}}},81712:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewService=void 0;var a=r(n(93913)),i=r(n(34575)),o=r(n(59713)),s=(0,a.default)(function e(t){var n=this;(0,i.default)(this,e),(0,o.default)(this,"close",void 0),(0,o.default)(this,"remoteHandle",void 0),(0,o.default)(this,"call",function(e){for(var t,r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return(t=n.remoteHandle).call.apply(t,[e].concat(a))}),(0,o.default)(this,"closeMessenger",function(){return n.close()}),this.remoteHandle=t.remoteHandle(),this.close=function(){return t.close()}});t.WebviewService=s},22960:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(55260);Object.keys(r).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==r[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var a=n(46311);Object.keys(a).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==a[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=n(17955);Object.keys(i).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==i[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},46311:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isWebDevMode=t.isThemeArg=t.isNativeDevMode=t.isFlagshipUiArgsArray=t.interpolate=t.getErrorMessage=void 0;var a=r(n(69100)),i=n(55260);t.interpolate=function(e,t){if(!t)return e;var n=Object.keys(t),r=Object.values(t),i=(0,a.default)(Function,n.concat(["return `".concat(e,"`;")]));try{return i.apply(void 0,r)}catch(t){return e}};t.isNativeDevMode=function(){try{return!!__DEV__}catch(e){return!1}};t.isWebDevMode=function(){try{return!!__DEVELOPMENT__}catch(e){return!1}};t.getErrorMessage=function(e){return e instanceof Error?e.message:String(e)};t.isFlagshipUiArgsArray=function(e){return Array.isArray(e)&&(0,i.isFlagshipUI)(e[0])};t.isThemeArg=function(e){return"string"==typeof e}},40003:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNativeIntentService=t.NativeIntentProvider=void 0;var r,a=n(97627),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=n(55260),s=n(17955);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var u=(0,a.debug)("NativeIntentProvider");t.getNativeIntentService=function(){if(!r)throw Error("nativeIntentService has not been instantiated in a NativeIntentProvider");return r};var l=function(e){r=e};t.NativeIntentProvider=function(e){var t=e.children,n=e.localMethods,r=(0,i.useRef)(null);return null===r.current&&(r.current=new o.NativeService(n),l(r.current)),(0,i.useEffect)(function(){var e;u("Updating localMethods on nativeIntentService"),null===(e=r.current)||void 0===e||e.updateLocalMethods(n)},[n]),i.default.createElement(s.NativeContext.Provider,{value:r.current},t)}},55319:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewIntentProvider=void 0;var i=a(n(87757)),o=a(n(63038)),s=a(n(48926)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),u=n(97627),l=n(55260),d=n(17955),f=n(46311);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var h=(0,u.debug)("WebviewIntentProvider"),v=window,m=function(){try{if(cozy.bar&&void 0===cozy.bar.setWebviewContext)return h(l.strings.errorCozyBarAPIMissing);return cozy.bar.setWebviewContext}catch(e){return}};var y=(r=(0,s.default)(i.default.mark(function e(t,n){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:var a;return a=l.strings.webviewIsRendered,v.ReactNativeWebView.postMessage(JSON.stringify({type:l.strings.postMeSignature,message:a})),r=new l.WebviewMessenger(v),e.next=4,(0,u.ChildHandshake)((0,f.isWebDevMode)()?(0,l.DebugWebviewMessenger)(r):r,n);case 4:t(e.sent);case 6:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)}),g=function(){var e;if(!(null===(e=v.cozy)||void 0===e?void 0:e.flagship))return!1;return void 0!==window.ReactNativeWebView||(h(l.strings.flagshipButNoRNAPI),!1)};t.WebviewIntentProvider=function(e){var t=e.children,n=e.methods,r=e.setBarContext,a=e.webviewService,i=(0,c.useState)(),s=(0,o.default)(i,2),u=s[0],f=s[1],p=(0,c.useState)(a),v=(0,o.default)(p,2),b=v[0],w=v[1],k=r||m();return(0,c.useEffect)(function(){!u&&!a&&g()&&y(f,n).catch(h)},[u,a,n]),(0,c.useEffect)(function(){!b&&u&&w(new l.WebviewService(u))},[b,u]),(0,c.useEffect)(function(){k&&b&&k(b)},[k,b]),c.default.createElement(d.WebviewContext.Provider,{value:b},t)}},84476:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.NativeContext=void 0;var a=r(n(67294)).default.createContext(void 0);t.NativeContext=a},50108:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewContext=void 0;var a=r(n(67294)).default.createContext(void 0);t.WebviewContext=a},74625:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useIsAvailable=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(63038)),s=n(67294),c=n(83224),u=n(46311);t.useIsAvailable=function(e){var t=(0,c.useWebviewIntent)(),n=(0,s.useState)(null),r=(0,o.default)(n,2),l=r[0],d=r[1],f=(0,s.useState)(void 0),p=(0,o.default)(f,2),h=p[0],v=p[1];return(0,s.useEffect)(function(){if(t){var n;(n=(0,i.default)(a.default.mark(function n(){var r;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.call("isAvailable",e);case 3:if(!("boolean"!=typeof(r=n.sent))){n.next=6;break}throw Error("Invalid result from isAvailable method: ".concat(r));case 6:v(void 0),d(r),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),v((0,u.getErrorMessage)(n.t0)),d(!1);case 14:case"end":return n.stop()}},n,null,[[0,10]])})),function(){return n.apply(this,arguments)})()}},[t,e]),{isAvailable:l,error:h}}},55093:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useNativeIntent=void 0;var r=n(67294),a=n(17955);t.useNativeIntent=function(){return(0,r.useContext)(a.NativeContext)}},83224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useWebviewIntent=void 0;var r=n(67294),a=n(17955);t.useWebviewIntent=function(){return(0,r.useContext)(a.WebviewContext)}},17955:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(40003);Object.keys(r).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==r[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var a=n(55319);Object.keys(a).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==a[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=n(84476);Object.keys(i).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==i[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(50108);Object.keys(o).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==o[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var s=n(55093);Object.keys(s).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==s[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var c=n(83224);Object.keys(c).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==c[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var u=n(74625);Object.keys(u).forEach(function(e){if("default"!==e&&"__esModule"!==e)(!(e in t)||t[e]!==u[e])&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})})},78043:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.start=function e(t,n,r,o){var l,d,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},h=function(){d&&s.remove(d),l&&l.stopListening()},v=function(){h()},m=new Promise(function(h,m){var y,g=(0,c.pickService)(n,p.filterServices);d=s.insertIntentIframe(n,r,g.href,p.onReadyCallback);var b=g.href.split("/",3).join("/");(l=new u.default({intentId:n.id,origin:b,onReady:function(e){e.source.postMessage(o,e.origin)},onDone:function(e){h(e.data.document),v()},onCancel:function(){h(null),v()},onError:function(e){m(e instanceof Event?c.errorSerializer.deserialize(e.data.error):e),v()},onResize:function(e){var t=e.data,n=t.transition,a=t.dimensions;s.applyStyle(r,f({transition:n},a))},onExposeFrameRemoval:function(e){h({document:e.data.document,removeIntentIframe:function(){return s.remove(d)}})},onCompose:(y=(0,i.default)(a.default.mark(function n(i){var o,c,u,l,p,h,v,m;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c=(o=i.data).action,u=o.doctype,l=o.data,p=i.source,h=i.origin,n.next=4,t(c,u,l);case 4:return v=n.sent,s.hide(d),n.prev=6,n.next=9,e(t,v,r,f(f({},l),{},{exposeIntentFrameRemoval:!1}));case 9:m=n.sent,p.postMessage(m,h);case 11:return n.prev=11,s.show(d),n.finish(11);case 14:case"end":return n.stop()}},n,null,[[6,,11,14]])})),function(e){return y.apply(this,arguments)}),onHideCross:function(){p.onHideCross&&p.onHideCross()},onShowCross:function(){p.onShowCross&&p.onShowCross()}})).listen()});return m.destroy=h,m};var a=r(n(87757)),i=r(n(48926)),o=r(n(59713)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(69564)),c=n(75813),u=r(n(93326));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},69564:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertOKForIntentIframe=t.applyStyle=void 0,t.hide=function(e){e.style.display="none"},t.iframeFromIntent=i,t.insertIntentIframe=function(e,t,n,r){a(t);var o=i(e,t,n);return"function"==typeof r&&(o.onload=r),t.appendChild(o),o.focus(),o},t.remove=function(e){if(!!e.parentNode)e.parentNode.removeChild(e)},t.show=function(e){e.style.display="block"};var n=function(e){return e+"px"},r={width:n,height:n,maxWidth:n,maxHeight:n};t.applyStyle=function(e,t){Object.keys(t).forEach(function(n){var a=t[n];e.style[n]="".concat(r[n]?r[n](a):a)})};var a=function(e){var t=e.ownerDocument;if(!t)throw console.warn("assertProperForIframe: bad node",e),Error("Cannot retrieve document object from given node");if(!t.defaultView)throw console.warn("assertProperForIframe: bad document",t),Error("Cannot retrieve window object from document")};function i(e,t,n){var r=t.ownerDocument;if(!r)throw Error("Cannot retrieve document object from given node");var a=r.createElement("iframe");return a.setAttribute("id","intent-".concat(e.id)),a.setAttribute("src",n),a.classList.add("coz-intent"),a}t.assertOKForIntentIframe=a},75813:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeQueryString=t.pickService=t.errorSerializer=t.buildRedirectionURL=void 0;var n,r=(n=function(e,t){var n=Object.assign(t,e);return["name","message"].reduce(function(n,r){return e[r]&&(t[r]=e[r]),n},n)},{serialize:function(e){return n(e,{})},deserialize:function(e){return n(e,Error(e.message))}});t.errorSerializer=r;t.pickService=function(e,t){var n=e.attributes.services||[],r=t?n.find(t):n[0];if(!r)throw Error("Unable to find a service");return r};t.buildRedirectionURL=function(e,t){var n=Object.keys(t).filter(function(e){return!["object","function"].includes(typeof t[e])}).map(function(e){return"".concat(e,"=").concat(t[e])});return n.length?"".concat(e,"?").concat(n.join("&")):e};t.removeQueryString=function(e){return e.replace(/\?[^/#]*/,"")}},9420:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=a(n(3633))},3633:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=p(n(78043)),u=n(75813),l=r(n(98395)),d=p(n(7295));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}var h=function(){var e,t;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.client;(0,o.default)(this,n),this.request=new l.default(t),this.create=this.create.bind(this)}return(0,s.default)(n,[{key:"create",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e)throw Error('Misformed intent, "action" property must be provided');if(!t)throw Error('Misformed intent, "type" property must be provided');var i=this.request.post(e,t,r,a);return i.start=function(e,t,a,o){var s,u={filteredServices:r.filteredServices,onReadyCallback:t,onHideCross:a,onShowCross:o};delete r.filteredServices;var l=i.then(function(t){return s=c.start(n.create,t,e,r,u)});return l.stop=function(){s&&s.destroy()},l},i}},{key:"createService",value:function(e,t){return d.start(this.request)(e,t)}},{key:"getRedirectionURL",value:(e=(0,i.default)(a.default.mark(function e(t,n){var r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t&&!n)){e.next=2;break}throw Error("Cannot retrieve redirection, at least type or doc must be provided");case 2:return e.next=4,this.create("REDIRECT",t,n);case 4:return r=e.sent,i=(0,u.pickService)(r),o=(0,u.removeQueryString)(i.href),e.abrupt("return",n?(0,u.buildRedirectionURL)(o,n):o);case 8:case"end":return e.stop()}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"redirect",value:(t=(0,i.default)(a.default.mark(function e(t,n,r){var i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window){e.next=2;break}throw Error("redirect() method can only be called in a browser");case 2:return e.next=4,this.getRedirectionURL(t,n);case 4:if(i=e.sent,!(r&&"function"==typeof r)){e.next=7;break}return e.abrupt("return",r(i));case 7:window.location.href=i;case 8:case"end":return e.stop()}},e,this)})),function(e,n,r){return t.apply(this,arguments)})}]),n}();t.default=h},93326:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=/intent-(.*):(.*)/,s=function(){function e(t){(0,a.default)(this,e),this.state={handshaken:!1},this.options=t,this.handleMessageWrapper=this.handleMessageWrapper.bind(this)}return(0,i.default)(e,[{key:"handleMessage",value:function(e){if(e.origin===this.options.origin){var t=e.data.type;if("load"===t){console.warn&&console.warn("Cozy Client ignored MessageEvent having data.type `load`.");return}var n=o.exec(t);if(!n){console.warn("intents: Message type ".concat(t," not matching intent format"));return}var r=n[1];c(r==this.options.intentId,"Invalid event id","eventId: ".concat(r," != listener eventId ").concat(this.options.intentId));var a=n[2];"ready"!==a?c(this.state.handshaken,"Unexpected handshake message from intent service"):this.state.handshaken=!0;var i=this.options["on"+u(a)];if(i)return i(e);console.warn("intents: Unhandled event ".concat(a))}}},{key:"handleMessageWrapper",value:function(e){try{this.handleMessage(e)}catch(e){this.options.onError(e)}}},{key:"listen",value:function(){window.addEventListener("message",this.handleMessageWrapper)}},{key:"stopListening",value:function(){window.removeEventListener("message",this.handleMessageWrapper)}}]),e}();t.default=s;var c=function(e,t,n){if(!e)throw n&&console.warn(n),Error(t)},u=function(e){return e[0].toUpperCase()+e.slice(1)}},98395:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=function(){function e(t){(0,a.default)(this,e),this.stackClient=t.stackClient}return(0,i.default)(e,[{key:"get",value:function(e){return this.stackClient.fetchJSON("GET","/intents/".concat(e)).then(function(e){var t=e.data;return!t._id&&(t._id=t.id),t})}},{key:"post",value:function(e,t,n,r){return this.stackClient.fetchJSON("POST","/intents",{data:{type:"io.cozy.intents",attributes:{action:e,type:t,data:n,permissions:r}}}).then(function(e){return e.data})}}]),e}();t.default=o},7295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=void 0;var r=n(75813);function a(e){e&&e.style&&(e.style.height="100%")}t.start=function(e){return function(t,n){var i=n||"undefined"!=typeof window&&window;if(!i||!i.document)return Promise.reject(Error("Intent service should be used in browser"));i.addEventListener("load",function(){var e=i.document;[e.documentElement,e.body].forEach(a)});var o=t||i.location.search.split("=")[1];return o?e.get(o).then(function(e){var t,n,a=!1,o=function(t){if(a)throw Error("Intent service has already been terminated");i.parent.postMessage(t,e.attributes.client)},s=function(t,n,r){return new Promise(function(a){i.addEventListener("message",function t(n){if(n.origin===e.attributes.client)return i.removeEventListener("message",t),a(n.data)}),o({type:"intent-".concat(e._id,":compose"),action:t,doctype:n,data:r})})},c=function(e){o(e),a=!0},u=function(t,n){if(a)throw Error("Intent service has been terminated");o({type:"intent-".concat(e._id,":resize"),dimensions:t.element?Object.assign({},t,{maxHeight:t.element.clientHeight,maxWidth:t.element.clientWidth}):t,transition:n})},l=function(){o({type:"intent-".concat(e._id,":hideCross")})},d=function(){o({type:"intent-".concat(e._id,":showCross")})},f=function(){c({type:"intent-".concat(e._id,":cancel")})};return i.addEventListener("unload",function(){!a&&f()}),(t=e,n=i,new Promise(function(e){n.addEventListener("message",function r(a){a.origin===t.attributes.client&&(n.removeEventListener("message",r),e(a.data))}),n.parent.postMessage({type:"intent-".concat(t._id,":ready")},t.attributes.client)})).then(function(t){return{compose:s,getData:function(){return t},getIntent:function(){return e},terminate:function(n){var r=t&&t.exposeIntentFrameRemoval?"exposeFrameRemoval":"done";return c({type:"intent-".concat(e._id,":").concat(r),document:n})},throw:function(t){return c({type:"intent-".concat(e._id,":error"),error:r.errorSerializer.serialize(t)})},resizeClient:u,cancel:f,hideCross:l,showCross:d}})}):Promise.reject(Error("Cannot retrieve intent from URL"))}}},587:function(e,t,n){"use strict";n.d(t,{I4:()=>iK,Ew:()=>iG,fH:()=>ie,nc:()=>it});var r,a,i,o,s,c,u,l,d,f,p,h,v,m,y,g,b,w,k,x,O,C,S,E,P,_,A={};n.r(A),n.d(A,{EEFLongWordList:()=>rV,default:()=>rH});var R=n("17508"),D=n("25002"),M=n("11954"),T=n("46932"),j=n("89526"),N=n("87757"),I=n.n(N),L=n("37203"),z=n.n(L),Z=n("77813"),B=n.n(Z),F=n("27361"),U=n.n(F),V=n("75472"),H=n.n(V),W=n("7739"),q=n.n(W),G=n("74423"),K=n(34155),Q=n(48764).Buffer,Y="undefined"==typeof window?n(8575):null,J=function(){function e(){(0,T.Z)(this,e)}return(0,j.Z)(e,null,[{key:"init",value:function(){if(!e.inited)e.inited=!0,e.isNode=void 0!==K&&null!=K.release&&"node"===K.release.name,e.isBrowser="undefined"!=typeof window,e.isNativeScript=!e.isNode&&!e.isBrowser,e.isMobileBrowser=e.isBrowser&&this.isMobile(window),e.isAppleMobileBrowser=e.isBrowser&&this.isAppleMobile(window),e.global=e.isNativeScript?n.g:e.isNode&&!e.isBrowser?n.g:window}},{key:"fromB64ToArray",value:function(t){if(e.isNode||e.isNativeScript)return new Uint8Array(Q.from(t,"base64"));for(var n=window.atob(t),r=new Uint8Array(n.length),a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}},{key:"fromUrlB64ToArray",value:function(t){return e.fromB64ToArray(e.fromUrlB64ToB64(t))}},{key:"fromHexToArray",value:function(t){if(e.isNode||e.isNativeScript)return new Uint8Array(Q.from(t,"hex"));for(var n=new Uint8Array(t.length/2),r=0;r<t.length;r+=2)n[r/2]=parseInt(t.substr(r,2),16);return n}},{key:"fromUtf8ToArray",value:function(t){if(e.isNode||e.isNativeScript)return new Uint8Array(Q.from(t,"utf8"));for(var n=unescape(encodeURIComponent(t)),r=new Uint8Array(n.length),a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}},{key:"fromByteStringToArray",value:function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}},{key:"fromBufferToB64",value:function(t){if(e.isNode||e.isNativeScript)return Q.from(t).toString("base64");for(var n="",r=new Uint8Array(t),a=0;a<r.byteLength;a++)n+=String.fromCharCode(r[a]);return window.btoa(n)}},{key:"fromBufferToUrlB64",value:function(t){return e.fromB64toUrlB64(e.fromBufferToB64(t))}},{key:"fromB64toUrlB64",value:function(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},{key:"fromBufferToUtf8",value:function(t){if(e.isNode||e.isNativeScript)return Q.from(t).toString("utf8");var n=new Uint8Array(t);return decodeURIComponent(escape(String.fromCharCode.apply(null,n)))}},{key:"fromBufferToByteString",value:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"fromBufferToHex",value:function(t){if(e.isNode||e.isNativeScript)return Q.from(t).toString("hex");var n=new Uint8Array(t);return Array.prototype.map.call(n,function(e){return("00"+e.toString(16)).slice(-2)}).join("")}},{key:"fromUrlB64ToB64",value:function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("Illegal base64url string!")}return t}},{key:"fromUrlB64ToUtf8",value:function(t){return e.fromB64ToUtf8(e.fromUrlB64ToB64(t))}},{key:"fromB64ToUtf8",value:function(t){return e.isNode||e.isNativeScript?Q.from(t,"base64").toString("utf8"):decodeURIComponent(escape(window.atob(t)))}},{key:"newGuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},{key:"isGuid",value:function(e){return RegExp(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/,"i").test(e)}},{key:"getHostname",value:function(t){var n=e.getUrl(t);try{return null!=n&&""!==n.hostname?n.hostname:null}catch(e){return null}}},{key:"getHost",value:function(t){var n=e.getUrl(t);try{return null!=n&&""!==n.host?n.host:null}catch(e){return null}}},{key:"getDomain",value:function(t){if(null==t||""===(t=t.trim())||t.startsWith("data:"))return null;var n=t.startsWith("http://")||t.startsWith("https://");if(!n&&0>t.indexOf("://")&&e.tldEndingRegex.test(t)&&(t="http://"+t,n=!0),n)try{var r=e.getUrlObject(t);if("localhost"===r.hostname||e.validIpAddress(r.hostname))return r.hostname;var a=null!=G&&null!=G.getDomain?G.getDomain(r.hostname):null;return null!=a?a:r.hostname}catch(e){}try{var i=null!=G&&null!=G.getDomain?G.getDomain(t):null;if(null!=i)return i}catch(e){}return null}},{key:"getQueryParams",value:function(t){var n=e.getUrl(t);if(null==n||null==n.search||""===n.search)return null;var r=new Map;return("?"===n.search[0]?n.search.substr(1):n.search).split("&").forEach(function(e){var t=e.split("=");if(!(t.length<1))r.set(decodeURIComponent(t[0]).toLowerCase(),null==t[1]?"":decodeURIComponent(t[1]))}),r}},{key:"getSortFunction",value:function(e,t){return function(n,r){return null==n[t]&&null!=r[t]?-1:null!=n[t]&&null==r[t]?1:null==n[t]&&null==r[t]?0:e.collator?e.collator.compare(n[t],r[t]):n[t].localeCompare(r[t])}}},{key:"isNullOrWhitespace",value:function(e){return null==e||"string"!=typeof e||""===e.trim()}},{key:"validIpAddress",value:function(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}},{key:"isMobile",value:function(e){var t,n=!1;return t=e.navigator.userAgent||e.navigator.vendor||e.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(n=!0),n||null!=e.navigator.userAgent.match(/iPad/i)}},{key:"isAppleMobile",value:function(e){return null!=e.navigator.userAgent.match(/iPhone/i)||null!=e.navigator.userAgent.match(/iPad/i)}},{key:"getUrl",value:function(t){if(null==t||""===(t=t.trim()))return null;var n=e.getUrlObject(t);return null==n&&!(0===t.indexOf("http://")||0===t.indexOf("https://"))&&t.indexOf(".")>-1&&(n=e.getUrlObject("http://"+t)),n}},{key:"getUrlObject",value:function(e){try{if(null!=Y)return Y.URL?new Y.URL(e):Y.parse(e);if("function"==typeof URL)return new URL(e);else if(null!=window){var t=e.indexOf("://")>-1;if(!t&&e.indexOf(".")>-1)e="http://"+e;else if(!t)return null;var n=window.document.createElement("a");return n.href=e,n}}catch(e){}return null}}]),e}();J.inited=!1,J.isNativeScript=!1,J.isNode=!1,J.isBrowser=!0,J.isMobileBrowser=!1,J.isAppleMobileBrowser=!1,J.global=null,J.tldEndingRegex=/.*\.(com|net|org|edu|uk|gov|ca|de|jp|fr|au|ru|ch|io|es|us|co|xyz|info|ly|mil)$/,J.init(),(r=m||(m={}))[r.Android=0]="Android",r[r.iOS=1]="iOS",r[r.ChromeExtension=2]="ChromeExtension",r[r.FirefoxExtension=3]="FirefoxExtension",r[r.OperaExtension=4]="OperaExtension",r[r.EdgeExtension=5]="EdgeExtension",r[r.WindowsDesktop=6]="WindowsDesktop",r[r.MacOsDesktop=7]="MacOsDesktop",r[r.LinuxDesktop=8]="LinuxDesktop",r[r.ChromeBrowser=9]="ChromeBrowser",r[r.FirefoxBrowser=10]="FirefoxBrowser",r[r.OperaBrowser=11]="OperaBrowser",r[r.EdgeBrowser=12]="EdgeBrowser",r[r.IEBrowser=13]="IEBrowser",r[r.UnknownBrowser=14]="UnknownBrowser",r[r.AndroidAmazon=15]="AndroidAmazon",r[r.UWP=16]="UWP",r[r.SafariBrowser=17]="SafariBrowser",r[r.VivaldiBrowser=18]="VivaldiBrowser",r[r.VivaldiExtension=19]="VivaldiExtension",r[r.SafariExtension=20]="SafariExtension";var $=n("26238"),X=n("11998"),ee=n("28446"),et=function(){function e(t){(0,T.Z)(this,e),this.response=t}return(0,j.Z)(e,[{key:"getResponseProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||""===e)throw Error("propertyName must not be null/empty.");if(null==t&&null!=this.response&&(t=this.response),null==t)return null;if(!n&&void 0===t[e]){var r=null;r=e.charAt(0)===e.charAt(0).toUpperCase()?e.charAt(0).toLowerCase():e.charAt(0).toUpperCase(),e.length>1&&(r+=e.slice(1)),void 0===t[e=r]&&(e=e.toLowerCase()),void 0===t[e]&&(e=e.toUpperCase())}return t[e]}}]),e}(),en=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).apiKey=t.getResponseProperty("ApiKey"),t}return(0,j.Z)(a)}(et);function er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,ee.Z)(e);return n=t?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,n)}}var ea=function(e){(0,$.Z)(n,e);var t=er(n);function n(e){(0,T.Z)(this,n),(r=t.call(this,e)).invoices=[],r.transactions=[],r.balance=r.getResponseProperty("Balance");var r,a=r.getResponseProperty("PaymentSource"),i=r.getResponseProperty("Transactions"),o=r.getResponseProperty("Invoices");return r.paymentSource=null==a?null:new ei(a),null!=i&&(r.transactions=i.map(function(e){return new es(e)})),null!=o&&(r.invoices=o.map(function(e){return new eo(e)})),r}return(0,j.Z)(n)}(et),ei=function(e){(0,$.Z)(n,e);var t=er(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).type=r.getResponseProperty("Type"),r.cardBrand=r.getResponseProperty("CardBrand"),r.description=r.getResponseProperty("Description"),r.needsVerification=r.getResponseProperty("NeedsVerification"),r}return(0,j.Z)(n)}(et),eo=function(e){(0,$.Z)(n,e);var t=er(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).url=r.getResponseProperty("Url"),r.pdfUrl=r.getResponseProperty("PdfUrl"),r.number=r.getResponseProperty("Number"),r.paid=r.getResponseProperty("Paid"),r.date=r.getResponseProperty("Date"),r.amount=r.getResponseProperty("Amount"),r}return(0,j.Z)(n)}(et),es=function(e){(0,$.Z)(n,e);var t=er(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).createdDate=r.getResponseProperty("CreatedDate"),r.amount=r.getResponseProperty("Amount"),r.refunded=r.getResponseProperty("Refunded"),r.partiallyRefunded=r.getResponseProperty("PartiallyRefunded"),r.refundedAmount=r.getResponseProperty("RefundedAmount"),r.type=r.getResponseProperty("Type"),r.paymentMethodType=r.getResponseProperty("PaymentMethodType"),r.details=r.getResponseProperty("Details"),r}return(0,j.Z)(n)}(et),ec=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).addedDate=t.getResponseProperty("AddedDate"),t.breachDate=t.getResponseProperty("BreachDate"),t.dataClasses=t.getResponseProperty("DataClasses"),t.description=t.getResponseProperty("Description"),t.domain=t.getResponseProperty("Domain"),t.isActive=t.getResponseProperty("IsActive"),t.isVerified=t.getResponseProperty("IsVerified"),t.logoPath=t.getResponseProperty("LogoPath"),t.modifiedDate=t.getResponseProperty("ModifiedDate"),t.name=t.getResponseProperty("Name"),t.pwnCount=t.getResponseProperty("PwnCount"),t.title=t.getResponseProperty("Title"),t}return(0,j.Z)(a)}(et),eu=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).id=t.getResponseProperty("Id"),t.url=t.getResponseProperty("Url"),t.fileName=t.getResponseProperty("FileName"),t.key=t.getResponseProperty("Key"),t.size=t.getResponseProperty("Size"),t.sizeName=t.getResponseProperty("SizeName"),t}return(0,j.Z)(a)}(et),el=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).password=t.getResponseProperty("Password"),t.lastUsedDate=t.getResponseProperty("LastUsedDate"),t}return(0,j.Z)(a)}(et),ed=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return((0,T.Z)(this,a),e=r.call(this,t),null==t)?(0,X.Z)(e):(e.cardholderName=e.getResponseProperty("CardholderName"),e.brand=e.getResponseProperty("Brand"),e.number=e.getResponseProperty("Number"),e.expMonth=e.getResponseProperty("ExpMonth"),e.expYear=e.getResponseProperty("ExpYear"),e.code=e.getResponseProperty("Code"),e)}return(0,j.Z)(a)}(et),ef=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return((0,T.Z)(this,a),e=r.call(this,t),null==t)?(0,X.Z)(e):(e.type=e.getResponseProperty("Type"),e.name=e.getResponseProperty("Name"),e.value=e.getResponseProperty("Value"),e)}return(0,j.Z)(a)}(et),ep=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return((0,T.Z)(this,a),e=r.call(this,t),null==t)?(0,X.Z)(e):(e.title=e.getResponseProperty("Title"),e.firstName=e.getResponseProperty("FirstName"),e.middleName=e.getResponseProperty("MiddleName"),e.lastName=e.getResponseProperty("LastName"),e.address1=e.getResponseProperty("Address1"),e.address2=e.getResponseProperty("Address2"),e.address3=e.getResponseProperty("Address3"),e.city=e.getResponseProperty("City"),e.state=e.getResponseProperty("State"),e.postalCode=e.getResponseProperty("PostalCode"),e.country=e.getResponseProperty("Country"),e.company=e.getResponseProperty("Company"),e.email=e.getResponseProperty("Email"),e.phone=e.getResponseProperty("Phone"),e.ssn=e.getResponseProperty("SSN"),e.username=e.getResponseProperty("Username"),e.passportNumber=e.getResponseProperty("PassportNumber"),e.licenseNumber=e.getResponseProperty("LicenseNumber"),e)}return(0,j.Z)(a)}(et),eh=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,T.Z)(this,a),(e=r.call(this,t)).match=null,null==t)return(0,X.Z)(e);e.uri=e.getResponseProperty("Uri");var n=e.getResponseProperty("Match");return e.match=null!=n?n:null,e}return(0,j.Z)(a)}(et),ev=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,T.Z)(this,a),e=r.call(this,t),null==t)return(0,X.Z)(e);e.username=e.getResponseProperty("Username"),e.password=e.getResponseProperty("Password"),e.passwordRevisionDate=e.getResponseProperty("PasswordRevisionDate"),e.totp=e.getResponseProperty("Totp");var n=e.getResponseProperty("Uris");return null!=n&&(e.uris=n.map(function(e){return new eh(e)})),e}return(0,j.Z)(a)}(et),em=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return((0,T.Z)(this,a),e=r.call(this,t),null==t)?(0,X.Z)(e):(e.type=e.getResponseProperty("Type"),e)}return(0,j.Z)(a)}(et),ey=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){(0,T.Z)(this,a),(t=r.call(this,e)).id=t.getResponseProperty("Id"),t.organizationId=t.getResponseProperty("OrganizationId"),t.folderId=t.getResponseProperty("FolderId")||null,t.type=t.getResponseProperty("Type"),t.name=t.getResponseProperty("Name"),t.notes=t.getResponseProperty("Notes"),t.favorite=t.getResponseProperty("Favorite")||!1,t.edit=!!t.getResponseProperty("Edit"),null==t.getResponseProperty("ViewPassword")?t.viewPassword=!0:t.viewPassword=t.getResponseProperty("ViewPassword"),t.organizationUseTotp=t.getResponseProperty("OrganizationUseTotp"),t.revisionDate=t.getResponseProperty("RevisionDate"),t.collectionIds=t.getResponseProperty("CollectionIds"),t.deletedDate=t.getResponseProperty("DeletedDate");var t,n=t.getResponseProperty("Login");null!=n&&(t.login=new ev(n));var i=t.getResponseProperty("Card");null!=i&&(t.card=new ed(i));var o=t.getResponseProperty("Identity");null!=o&&(t.identity=new ep(o));var s=t.getResponseProperty("SecureNote");null!=s&&(t.secureNote=new em(s));var c=t.getResponseProperty("Fields");null!=c&&(t.fields=c.map(function(e){return new ef(e)}));var u=t.getResponseProperty("Attachments");null!=u&&(t.attachments=u.map(function(e){return new eu(e)}));var l=t.getResponseProperty("PasswordHistory");return null!=l&&(t.passwordHistory=l.map(function(e){return new el(e)})),t}return(0,j.Z)(a)}(et),eg=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).id=t.getResponseProperty("Id"),t.readOnly=t.getResponseProperty("ReadOnly"),t.hidePasswords=t.getResponseProperty("HidePasswords"),t}return(0,j.Z)(a)}(et);function eb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,ee.Z)(e);return n=t?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,n)}}var ew=function(e){(0,$.Z)(n,e);var t=eb(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).id=r.getResponseProperty("Id"),r.organizationId=r.getResponseProperty("OrganizationId"),r.name=r.getResponseProperty("Name"),r.externalId=r.getResponseProperty("ExternalId"),r}return(0,j.Z)(n)}(et),ek=function(e){(0,$.Z)(n,e);var t=eb(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).readOnly=r.getResponseProperty("ReadOnly")||!1,r}return(0,j.Z)(n)}(ew),ex=function(e){(0,$.Z)(n,e);var t=eb(n);function n(e){(0,T.Z)(this,n),(r=t.call(this,e)).groups=[];var r,a=r.getResponseProperty("Groups");return null!=a&&(r.groups=a.map(function(e){return new eg(e)})),r}return(0,j.Z)(n)}(ew),eO=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).type=t.getResponseProperty("Type"),t.domains=t.getResponseProperty("Domains"),t.excluded=t.getResponseProperty("Excluded"),t}return(0,j.Z)(a)}(et),eC=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){(0,T.Z)(this,a),(t=r.call(this,e)).globalEquivalentDomains=[],t.equivalentDomains=t.getResponseProperty("EquivalentDomains");var t,n=t.getResponseProperty("GlobalEquivalentDomains");return null!=n?t.globalEquivalentDomains=n.map(function(e){return new eO(e)}):t.globalEquivalentDomains=[],t}return(0,j.Z)(a)}(et),eS=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e,t,n){(0,T.Z)(this,a),i=r.call(this,e);var i,o=null;if(null!=e){var s=i.getResponseProperty("ErrorModel");o=s&&n?s:e}return o?(i.message=i.getResponseProperty("Message",o),i.validationErrors=i.getResponseProperty("ValidationErrors",o)):429===t&&(i.message="Rate limit exceeded. Try again later."),i.statusCode=t,i}return(0,j.Z)(a,[{key:"getSingleMessage",value:function(){if(null==this.validationErrors)return this.message;for(var e in this.validationErrors){if(!!this.validationErrors.hasOwnProperty(e)){if(this.validationErrors[e].length)return this.validationErrors[e][0]}}return this.message}},{key:"getAllMessages",value:function(){var e=this,t=[];if(null==this.validationErrors)return t;var n=function(n){if(!e.validationErrors.hasOwnProperty(n))return"continue";e.validationErrors[n].forEach(function(e){var r="";if(n.indexOf("[")>-1&&n.indexOf("]")>-1){var a=n.lastIndexOf(".");r=n.substr(0,a>-1?a:n.length)+": "}t.push(r+e)})};for(var r in this.validationErrors)if("continue"===n(r))continue;return t}}]),a}(et),eE=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).type=t.getResponseProperty("Type"),t.userId=t.getResponseProperty("UserId"),t.organizationId=t.getResponseProperty("OrganizationId"),t.cipherId=t.getResponseProperty("CipherId"),t.collectionId=t.getResponseProperty("CollectionId"),t.groupId=t.getResponseProperty("GroupId"),t.organizationUserId=t.getResponseProperty("OrganizationUserId"),t.actingUserId=t.getResponseProperty("ActingUserId"),t.date=t.getResponseProperty("Date"),t.deviceType=t.getResponseProperty("DeviceType"),t.ipAddress=t.getResponseProperty("IpAddress"),t}return(0,j.Z)(a)}(et),eP=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).id=t.getResponseProperty("Id"),t.name=t.getResponseProperty("Name"),t.revisionDate=t.getResponseProperty("RevisionDate"),t}return(0,j.Z)(a)}(et);function e_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,ee.Z)(e);return n=t?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,n)}}var eA=function(e){(0,$.Z)(n,e);var t=e_(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).id=r.getResponseProperty("Id"),r.organizationId=r.getResponseProperty("OrganizationId"),r.name=r.getResponseProperty("Name"),r.accessAll=r.getResponseProperty("AccessAll"),r.externalId=r.getResponseProperty("ExternalId"),r}return(0,j.Z)(n)}(et),eR=function(e){(0,$.Z)(n,e);var t=e_(n);function n(e){(0,T.Z)(this,n),(r=t.call(this,e)).collections=[];var r,a=r.getResponseProperty("Collections");return null!=a&&(r.collections=a.map(function(e){return new eg(e)})),r}return(0,j.Z)(n)}(eA),eD=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).accessToken=e.access_token,t.expiresIn=e.expires_in,t.refreshToken=e.refresh_token,t.tokenType=e.token_type,t.resetMasterPassword=t.getResponseProperty("ResetMasterPassword"),t.privateKey=t.getResponseProperty("PrivateKey"),t.key=t.getResponseProperty("Key"),t.twoFactorToken=t.getResponseProperty("TwoFactorToken"),t.kdf=t.getResponseProperty("Kdf"),t.kdfIterations=t.getResponseProperty("KdfIterations"),t}return(0,j.Z)(a)}(et),eM=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){(0,T.Z)(this,a),(t=r.call(this,e)).twoFactorProviders2=new Map,t.twoFactorProviders=t.getResponseProperty("TwoFactorProviders");var t,n=t.getResponseProperty("TwoFactorProviders2");if(null!=n)for(var i in n)n.hasOwnProperty(i)&&t.twoFactorProviders2.set(parseInt(i,null),n[i]);return t}return(0,j.Z)(a)}(et),eT=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e,t){(0,T.Z)(this,a);var n,i=(n=r.call(this,e)).getResponseProperty("Data");return n.data=null==i?[]:i.map(function(e){return new t(e)}),n.continuationToken=n.getResponseProperty("ContinuationToken"),n}return(0,j.Z)(a)}(et),ej=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).type=t.getResponseProperty("Type"),t.product=t.getResponseProperty("Product"),t.name=t.getResponseProperty("Name"),t.isAnnual=t.getResponseProperty("IsAnnual"),t.nameLocalizationKey=t.getResponseProperty("NameLocalizationKey"),t.descriptionLocalizationKey=t.getResponseProperty("DescriptionLocalizationKey"),t.canBeUsedByBusiness=t.getResponseProperty("CanBeUsedByBusiness"),t.baseSeats=t.getResponseProperty("BaseSeats"),t.baseStorageGb=t.getResponseProperty("BaseStorageGb"),t.maxCollections=t.getResponseProperty("MaxCollections"),t.maxUsers=t.getResponseProperty("MaxUsers"),t.hasAdditionalSeatsOption=t.getResponseProperty("HasAdditionalSeatsOption"),t.maxAdditionalSeats=t.getResponseProperty("MaxAdditionalSeats"),t.hasAdditionalStorageOption=t.getResponseProperty("HasAdditionalStorageOption"),t.maxAdditionalStorage=t.getResponseProperty("MaxAdditionalStorage"),t.hasPremiumAccessOption=t.getResponseProperty("HasPremiumAccessOption"),t.trialPeriodDays=t.getResponseProperty("TrialPeriodDays"),t.hasSelfHost=t.getResponseProperty("HasSelfHost"),t.hasPolicies=t.getResponseProperty("HasPolicies"),t.hasGroups=t.getResponseProperty("HasGroups"),t.hasDirectory=t.getResponseProperty("HasDirectory"),t.hasEvents=t.getResponseProperty("HasEvents"),t.hasTotp=t.getResponseProperty("HasTotp"),t.has2fa=t.getResponseProperty("Has2fa"),t.hasApi=t.getResponseProperty("HasApi"),t.hasSso=t.getResponseProperty("HasSso"),t.usersGetPremium=t.getResponseProperty("UsersGetPremium"),t.upgradeSortOrder=t.getResponseProperty("UpgradeSortOrder"),t.displaySortOrder=t.getResponseProperty("SortOrder"),t.legacyYear=t.getResponseProperty("LegacyYear"),t.disabled=t.getResponseProperty("Disabled"),t.stripePlanId=t.getResponseProperty("StripePlanId"),t.stripeSeatPlanId=t.getResponseProperty("StripeSeatPlanId"),t.stripeStoragePlanId=t.getResponseProperty("StripeStoragePlanId"),t.stripePremiumAccessPlanId=t.getResponseProperty("StripePremiumAccessPlanId"),t.basePrice=t.getResponseProperty("BasePrice"),t.seatPrice=t.getResponseProperty("SeatPrice"),t.additionalStoragePricePerGb=t.getResponseProperty("AdditionalStoragePricePerGb"),t.premiumAccessOptionPrice=t.getResponseProperty("PremiumAccessOptionPrice"),t}return(0,j.Z)(a)}(et),eN=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){(0,T.Z)(this,a),(t=r.call(this,e)).id=t.getResponseProperty("Id"),t.identifier=t.getResponseProperty("Identifier"),t.name=t.getResponseProperty("Name"),t.businessName=t.getResponseProperty("BusinessName"),t.businessAddress1=t.getResponseProperty("BusinessAddress1"),t.businessAddress2=t.getResponseProperty("BusinessAddress2"),t.businessAddress3=t.getResponseProperty("BusinessAddress3"),t.businessCountry=t.getResponseProperty("BusinessCountry"),t.businessTaxNumber=t.getResponseProperty("BusinessTaxNumber"),t.billingEmail=t.getResponseProperty("BillingEmail");var t,n=t.getResponseProperty("Plan");return t.plan=null==n?null:new ej(n),t.planType=t.getResponseProperty("PlanType"),t.seats=t.getResponseProperty("Seats"),t.maxCollections=t.getResponseProperty("MaxCollections"),t.maxStorageGb=t.getResponseProperty("MaxStorageGb"),t.useGroups=t.getResponseProperty("UseGroups"),t.useDirectory=t.getResponseProperty("UseDirectory"),t.useEvents=t.getResponseProperty("UseEvents"),t.useTotp=t.getResponseProperty("UseTotp"),t.use2fa=t.getResponseProperty("Use2fa"),t.useApi=t.getResponseProperty("UseApi"),t}return(0,j.Z)(a)}(et);function eI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,ee.Z)(e);return n=t?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,n)}}var eL=function(e){(0,$.Z)(n,e);var t=eI(n);function n(e){(0,T.Z)(this,n),(r=t.call(this,e)).storageName=r.getResponseProperty("StorageName"),r.storageGb=r.getResponseProperty("StorageGb"),r.maxStorageGb=r.getResponseProperty("MaxStorageGb"),r.license=r.getResponseProperty("License"),r.expiration=r.getResponseProperty("Expiration"),r.usingInAppPurchase=r.getResponseProperty("UsingInAppPurchase");var r,a=r.getResponseProperty("Subscription"),i=r.getResponseProperty("UpcomingInvoice");return r.subscription=null==a?null:new ez(a),r.upcomingInvoice=null==i?null:new eB(i),r}return(0,j.Z)(n)}(et),ez=function(e){(0,$.Z)(n,e);var t=eI(n);function n(e){(0,T.Z)(this,n),(r=t.call(this,e)).items=[],r.trialEndDate=r.getResponseProperty("TrialStartDate"),r.trialEndDate=r.getResponseProperty("TrialEndDate"),r.periodStartDate=r.getResponseProperty("PeriodStartDate"),r.periodEndDate=r.getResponseProperty("PeriodEndDate"),r.cancelledDate=r.getResponseProperty("CancelledDate"),r.cancelAtEndDate=r.getResponseProperty("CancelAtEndDate"),r.status=r.getResponseProperty("Status"),r.cancelled=r.getResponseProperty("Cancelled");var r,a=r.getResponseProperty("Items");return null!=a&&(r.items=a.map(function(e){return new eZ(e)})),r}return(0,j.Z)(n)}(et),eZ=function(e){(0,$.Z)(n,e);var t=eI(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).name=r.getResponseProperty("Name"),r.amount=r.getResponseProperty("Amount"),r.quantity=r.getResponseProperty("Quantity"),r.interval=r.getResponseProperty("Interval"),r}return(0,j.Z)(n)}(et),eB=function(e){(0,$.Z)(n,e);var t=eI(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).date=r.getResponseProperty("Date"),r.amount=r.getResponseProperty("Amount"),r}return(0,j.Z)(n)}(et),eF=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){(0,T.Z)(this,a),(t=r.call(this,e)).storageName=t.getResponseProperty("StorageName"),t.storageGb=t.getResponseProperty("StorageGb");var t,n=t.getResponseProperty("Subscription");t.subscription=null==n?null:new ez(n);var i=t.getResponseProperty("UpcomingInvoice");return t.upcomingInvoice=null==i?null:new eB(i),t.expiration=t.getResponseProperty("Expiration"),t}return(0,j.Z)(a)}(eN);function eU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,ee.Z)(e);return n=t?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,n)}}var eV=function(e){(0,$.Z)(n,e);var t=eU(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).id=r.getResponseProperty("Id"),r.userId=r.getResponseProperty("UserId"),r.type=r.getResponseProperty("Type"),r.status=r.getResponseProperty("Status"),r.accessAll=r.getResponseProperty("AccessAll"),r}return(0,j.Z)(n)}(et),eH=function(e){(0,$.Z)(n,e);var t=eU(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).name=r.getResponseProperty("Name"),r.email=r.getResponseProperty("Email"),r.twoFactorEnabled=r.getResponseProperty("TwoFactorEnabled"),r}return(0,j.Z)(n)}(eV),eW=function(e){(0,$.Z)(n,e);var t=eU(n);function n(e){(0,T.Z)(this,n),(r=t.call(this,e)).collections=[];var r,a=r.getResponseProperty("Collections");return null!=a&&(r.collections=a.map(function(e){return new eg(e)})),r}return(0,j.Z)(n)}(eV),eq=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).id=t.getResponseProperty("Id"),t.name=t.getResponseProperty("Name"),t.usePolicies=t.getResponseProperty("UsePolicies"),t.useGroups=t.getResponseProperty("UseGroups"),t.useDirectory=t.getResponseProperty("UseDirectory"),t.useEvents=t.getResponseProperty("UseEvents"),t.useTotp=t.getResponseProperty("UseTotp"),t.use2fa=t.getResponseProperty("Use2fa"),t.useApi=t.getResponseProperty("UseApi"),t.useBusinessPortal=t.getResponseProperty("UseBusinessPortal"),t.useSso=t.getResponseProperty("UseSso"),t.selfHost=t.getResponseProperty("SelfHost"),t.usersGetPremium=t.getResponseProperty("UsersGetPremium"),t.seats=t.getResponseProperty("Seats"),t.maxCollections=t.getResponseProperty("MaxCollections"),t.maxStorageGb=t.getResponseProperty("MaxStorageGb"),t.key=t.getResponseProperty("Key"),t.status=t.getResponseProperty("Status"),t.type=t.getResponseProperty("Type"),t.enabled=t.getResponseProperty("Enabled"),t.ssoBound=t.getResponseProperty("SsoBound"),t.identifier=t.getResponseProperty("Identifier"),t}return(0,j.Z)(a)}(et),eG=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){(0,T.Z)(this,a),(t=r.call(this,e)).organizations=[],t.id=t.getResponseProperty("Id"),t.name=t.getResponseProperty("Name"),t.email=t.getResponseProperty("Email"),t.emailVerified=t.getResponseProperty("EmailVerified"),t.masterPasswordHint=t.getResponseProperty("MasterPasswordHint"),t.premium=t.getResponseProperty("Premium"),t.culture=t.getResponseProperty("Culture"),t.twoFactorEnabled=t.getResponseProperty("TwoFactorEnabled"),t.key=t.getResponseProperty("Key"),t.privateKey=t.getResponseProperty("PrivateKey"),t.securityStamp=t.getResponseProperty("SecurityStamp");var t,n=t.getResponseProperty("Organizations");return null!=n&&(t.organizations=n.map(function(e){return new eq(e)})),t}return(0,j.Z)(a)}(et),eK=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){(0,T.Z)(this,a);var t,n=(t=r.call(this,e)).getResponseProperty("UserProfile");return null!=n&&(t.userProfile=new eG(n)),t.paymentIntentClientSecret=t.getResponseProperty("PaymentIntentClientSecret"),t.success=t.getResponseProperty("Success"),t}return(0,j.Z)(a)}(et),eQ=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).id=t.getResponseProperty("Id"),t.organizationId=t.getResponseProperty("OrganizationId"),t.type=t.getResponseProperty("Type"),t.data=t.getResponseProperty("Data"),t.enabled=t.getResponseProperty("Enabled"),t}return(0,j.Z)(a)}(et),eY=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).kdf=t.getResponseProperty("Kdf"),t.kdfIterations=t.getResponseProperty("KdfIterations"),t}return(0,j.Z)(a)}(et),eJ=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return((0,T.Z)(this,a),e=r.call(this,t),null==t)?(0,X.Z)(e):(e.id=e.getResponseProperty("Id"),e.url=e.getResponseProperty("Url"),e.fileName=e.getResponseProperty("FileName"),e.key=e.getResponseProperty("Key"),e.size=e.getResponseProperty("Size"),e.sizeName=e.getResponseProperty("SizeName"),e)}return(0,j.Z)(a)}(et),e$=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return((0,T.Z)(this,a),e=r.call(this,t),null==t)?(0,X.Z)(e):(e.text=e.getResponseProperty("Text"),e.hidden=e.getResponseProperty("Hidden")||!1,e)}return(0,j.Z)(a)}(et),eX=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){(0,T.Z)(this,a),(t=r.call(this,e)).id=t.getResponseProperty("Id"),t.type=t.getResponseProperty("Type"),t.name=t.getResponseProperty("Name");var t,n=t.getResponseProperty("Text");null!=n&&(t.text=new e$(n));var i=t.getResponseProperty("File");return null!=i&&(t.file=new eJ(i)),t}return(0,j.Z)(a)}(et),e0=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){(0,T.Z)(this,a),(t=r.call(this,e)).id=t.getResponseProperty("Id"),t.accessId=t.getResponseProperty("AccessId"),t.type=t.getResponseProperty("Type"),t.name=t.getResponseProperty("Name"),t.notes=t.getResponseProperty("Notes"),t.key=t.getResponseProperty("Key"),t.maxAccessCount=t.getResponseProperty("MaxAccessCount"),t.accessCount=t.getResponseProperty("AccessCount"),t.revisionDate=t.getResponseProperty("RevisionDate"),t.expirationDate=t.getResponseProperty("ExpirationDate"),t.deletionDate=t.getResponseProperty("DeletionDate"),t.password=t.getResponseProperty("Password"),t.disable=t.getResponseProperty("Disabled")||!1;var t,n=t.getResponseProperty("Text");null!=n&&(t.text=new e$(n));var i=t.getResponseProperty("File");return null!=i&&(t.file=new eJ(i)),t}return(0,j.Z)(a)}(et),e1=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){(0,T.Z)(this,a),(t=r.call(this,e)).folders=[],t.collections=[],t.ciphers=[],t.policies=[],t.sends=[];var t,n=t.getResponseProperty("Profile");null!=n&&(t.profile=new eG(n));var i=t.getResponseProperty("Folders");null!=i&&(t.folders=i.map(function(e){return new eP(e)}));var o=t.getResponseProperty("Collections");null!=o&&(t.collections=o.map(function(e){return new ek(e)}));var s=t.getResponseProperty("Ciphers");null!=s&&(t.ciphers=s.map(function(e){return new ey(e)}));var c=t.getResponseProperty("Domains");null!=c&&(t.domains=new eC(c));var u=t.getResponseProperty("Policies");null!=u&&(t.policies=u.map(function(e){return new eQ(e)}));var l=t.getResponseProperty("Sends");return null!=l&&(t.sends=l.map(function(e){return new e0(e)})),t}return(0,j.Z)(a)}(et),e2=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).taxId=t.getResponseProperty("TaxIdNumber"),t.taxIdType=t.getResponseProperty("TaxIdType"),t.line1=t.getResponseProperty("Line1"),t.line2=t.getResponseProperty("Line2"),t.city=t.getResponseProperty("City"),t.state=t.getResponseProperty("State"),t.postalCode=t.getResponseProperty("PostalCode"),t.country=t.getResponseProperty("Country"),t}return(0,j.Z)(a)}(et),e4=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).enabled=t.getResponseProperty("Enabled"),t.key=t.getResponseProperty("Key"),t}return(0,j.Z)(a)}(et),e3=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).enabled=t.getResponseProperty("Enabled"),t.host=t.getResponseProperty("Host"),t.secretKey=t.getResponseProperty("SecretKey"),t.integrationKey=t.getResponseProperty("IntegrationKey"),t}return(0,j.Z)(a)}(et),e5=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).enabled=t.getResponseProperty("Enabled"),t.email=t.getResponseProperty("Email"),t}return(0,j.Z)(a)}(et),e6=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).enabled=t.getResponseProperty("Enabled"),t.type=t.getResponseProperty("Type"),t}return(0,j.Z)(a)}(et),e9=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).code=t.getResponseProperty("Code"),t}return(0,j.Z)(a)}(et);function e8(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,ee.Z)(e);return n=t?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,n)}}var e7=function(e){(0,$.Z)(n,e);var t=e8(n);function n(e){(0,T.Z)(this,n),(r=t.call(this,e)).enabled=r.getResponseProperty("Enabled");var r,a=r.getResponseProperty("Keys");return r.keys=null==a?null:a.map(function(e){return new te(e)}),r}return(0,j.Z)(n)}(et),te=function(e){(0,$.Z)(n,e);var t=e8(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).name=r.getResponseProperty("Name"),r.id=r.getResponseProperty("Id"),r.compromised=r.getResponseProperty("Compromised"),r}return(0,j.Z)(n)}(et),tt=function(e){(0,$.Z)(n,e);var t=e8(n);function n(e){var r;return(0,T.Z)(this,n),(r=t.call(this,e)).userId=r.getResponseProperty("UserId"),r.appId=r.getResponseProperty("AppId"),r.challenge=r.getResponseProperty("Challenge"),r.version=r.getResponseProperty("Version"),r}return(0,j.Z)(n)}(et),tn=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).enabled=t.getResponseProperty("Enabled"),t.key1=t.getResponseProperty("Key1"),t.key2=t.getResponseProperty("Key2"),t.key3=t.getResponseProperty("Key3"),t.key4=t.getResponseProperty("Key4"),t.key5=t.getResponseProperty("Key5"),t.nfc=t.getResponseProperty("Nfc"),t}return(0,j.Z)(a)}(et),tr=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).userId=t.getResponseProperty("UserId"),t.publicKey=t.getResponseProperty("PublicKey"),t}return(0,j.Z)(a)}(et),ta=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},ti=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,T.Z)(this,e),this.tokenService=t,this.platformUtilsService=n,this.logoutCallback=r,this.customUserAgent=a,this.urlsSet=!1,this.isWebClient=!1,this.isDesktopClient=!1,this.usingBaseUrl=!1,this.device=n.getDevice(),this.deviceType=this.device.toString(),this.isWebClient=this.device===m.IEBrowser||this.device===m.ChromeBrowser||this.device===m.EdgeBrowser||this.device===m.FirefoxBrowser||this.device===m.OperaBrowser||this.device===m.SafariBrowser||this.device===m.UnknownBrowser||this.device===m.VivaldiBrowser,this.isDesktopClient=this.device===m.WindowsDesktop||this.device===m.MacOsDesktop||this.device===m.LinuxDesktop}return(0,j.Z)(e,[{key:"setUrls",value:function(e){if(this.urlsSet=!0,null!=e.base){this.usingBaseUrl=!0,this.apiBaseUrl=e.base+"/api",this.identityBaseUrl=e.base+"/identity",this.eventsBaseUrl=e.base+"/events";return}this.apiBaseUrl=e.api,this.identityBaseUrl=e.identity,this.eventsBaseUrl=e.events,null==this.apiBaseUrl&&(this.apiBaseUrl="https://api.bitwarden.com"),null==this.identityBaseUrl&&(this.identityBaseUrl="https://identity.bitwarden.com"),null==this.eventsBaseUrl&&(this.eventsBaseUrl="https://events.bitwarden.com")}},{key:"postIdentityToken",value:function(e){var t;return ta(this,void 0,void 0,I().mark(function n(){var r,a,i;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Accept:"application/json","Device-Type":this.deviceType}),null!=this.customUserAgent&&r.set("User-Agent",this.customUserAgent),n.next=4,this.fetch(new Request(this.identityBaseUrl+"/connect/token",{body:this.qsStringify(e.toIdentityToken(null!==(t=e.clientId)&&void 0!==t?t:this.platformUtilsService.identityClientId)),credentials:this.getCredentials(),cache:"no-store",headers:r,method:"POST"}));case 4:if(a=n.sent,i=null,!this.isJsonResponse(a)){n.next=10;break}return n.next=9,a.json();case 9:i=n.sent;case 10:if(!(null!=i)){n.next=19;break}if(200!==a.status){n.next=15;break}return n.abrupt("return",new eD(i));case 15:if(!(400===a.status&&i.TwoFactorProviders2&&Object.keys(i.TwoFactorProviders2).length)){n.next=19;break}return n.next=18,this.tokenService.clearTwoFactorToken(e.email);case 18:return n.abrupt("return",new eM(i));case 19:return n.abrupt("return",Promise.reject(new eS(i,a.status,!0)));case 20:case"end":return n.stop()}},n,this)}))}},{key:"refreshIdentityToken",value:function(){return ta(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.doRefreshToken();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",Promise.reject(null));case 8:case"end":return e.stop()}},e,this,[[0,5]])}))}},{key:"getProfile",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("GET","/accounts/profile",null,!0,!0);case 2:return t=e.sent,e.abrupt("return",new eG(t));case 4:case"end":return e.stop()}},e,this)}))}},{key:"getUserBilling",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("GET","/accounts/billing",null,!0,!0);case 2:return t=e.sent,e.abrupt("return",new ea(t));case 4:case"end":return e.stop()}},e,this)}))}},{key:"getUserSubscription",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("GET","/accounts/subscription",null,!0,!0);case 2:return t=e.sent,e.abrupt("return",new eL(t));case 4:case"end":return e.stop()}},e,this)}))}},{key:"getTaxInfo",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("GET","/accounts/tax",null,!0,!0);case 2:return t=e.sent,e.abrupt("return",new e2(t));case 4:case"end":return e.stop()}},e,this)}))}},{key:"putProfile",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("PUT","/accounts/profile",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eG(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"putTaxInfo",value:function(e){return this.send("PUT","/accounts/tax",e,!0,!1)}},{key:"postPrelogin",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/accounts/prelogin",e,!1,!0);case 2:return n=t.sent,t.abrupt("return",new eY(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postEmailToken",value:function(e){return this.send("POST","/accounts/email-token",e,!0,!1)}},{key:"postEmail",value:function(e){return this.send("POST","/accounts/email",e,!0,!1)}},{key:"postPassword",value:function(e){return this.send("POST","/accounts/password",e,!0,!1)}},{key:"setPassword",value:function(e){return this.send("POST","/accounts/set-password",e,!0,!1)}},{key:"postSecurityStamp",value:function(e){return this.send("POST","/accounts/security-stamp",e,!0,!1)}},{key:"deleteAccount",value:function(e){return this.send("DELETE","/accounts",e,!0,!1)}},{key:"getAccountRevisionDate",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("GET","/accounts/revision-date",null,!0,!0);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))}},{key:"postPasswordHint",value:function(e){return this.send("POST","/accounts/password-hint",e,!1,!1)}},{key:"postRegister",value:function(e){return this.send("POST","/accounts/register",e,!1,!1)}},{key:"postPremium",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/accounts/premium",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eK(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postIapCheck",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.send("POST","/accounts/iap-check",e,!0,!1));case 1:case"end":return t.stop()}},t,this)}))}},{key:"postReinstatePremium",value:function(){return this.send("POST","/accounts/reinstate-premium",null,!0,!1)}},{key:"postCancelPremium",value:function(){return this.send("POST","/accounts/cancel-premium",null,!0,!1)}},{key:"postAccountStorage",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/accounts/storage",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eK(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postAccountPayment",value:function(e){return this.send("POST","/accounts/payment",e,!0,!1)}},{key:"postAccountLicense",value:function(e){return this.send("POST","/accounts/license",e,!0,!1)}},{key:"postAccountKeys",value:function(e){return this.send("POST","/accounts/keys",e,!0,!1)}},{key:"postAccountKey",value:function(e){return this.send("POST","/accounts/key",e,!0,!1)}},{key:"postAccountVerifyEmail",value:function(){return this.send("POST","/accounts/verify-email",null,!0,!1)}},{key:"postAccountVerifyEmailToken",value:function(e){return this.send("POST","/accounts/verify-email-token",e,!1,!1)}},{key:"postAccountVerifyPassword",value:function(e){return this.send("POST","/accounts/verify-password",e,!0,!1)}},{key:"postAccountRecoverDelete",value:function(e){return this.send("POST","/accounts/delete-recover",e,!1,!1)}},{key:"postAccountRecoverDeleteToken",value:function(e){return this.send("POST","/accounts/delete-recover-token",e,!1,!1)}},{key:"postAccountKdf",value:function(e){return this.send("POST","/accounts/kdf",e,!0,!1)}},{key:"getEnterprisePortalSignInToken",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("GET","/accounts/enterprise-portal-signin-token",null,!0,!0);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))}},{key:"deleteSsoUser",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.send("DELETE","/accounts/sso/"+e,null,!0,!1));case 1:case"end":return t.stop()}},t,this)}))}},{key:"getSsoUserIdentifier",value:function(){return ta(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.send("GET","/accounts/sso/user-identifier",null,!0,!0));case 1:case"end":return e.stop()}},e,this)}))}},{key:"postUserApiKey",value:function(e,t){return ta(this,void 0,void 0,I().mark(function e(){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("POST","/accounts/api-key",t,!0,!0);case 2:return n=e.sent,e.abrupt("return",new en(n));case 4:case"end":return e.stop()}},e,this)}))}},{key:"postUserRotateApiKey",value:function(e,t){return ta(this,void 0,void 0,I().mark(function e(){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("POST","/accounts/rotate-api-key",t,!0,!0);case 2:return n=e.sent,e.abrupt("return",new en(n));case 4:case"end":return e.stop()}},e,this)}))}},{key:"getFolder",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/folders/"+e,null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eP(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postFolder",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/folders",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eP(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"putFolder",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("PUT","/folders/"+e,t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new eP(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"deleteFolder",value:function(e){return this.send("DELETE","/folders/"+e,null,!0,!1)}},{key:"getSend",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/sends/"+e,null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e0(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postSendAccess",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("POST","/sends/access/"+e,t,!1,!0);case 2:return r=n.sent,n.abrupt("return",new eX(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"getSends",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("GET","/sends",null,!0,!0);case 2:return t=e.sent,e.abrupt("return",new eT(t,e0));case 4:case"end":return e.stop()}},e,this)}))}},{key:"postSend",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/sends",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e0(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postSendFile",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/sends/file",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e0(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"putSend",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("PUT","/sends/"+e,t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new e0(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"putSendRemovePassword",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("PUT","/sends/"+e+"/remove-password",null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e0(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"deleteSend",value:function(e){return this.send("DELETE","/sends/"+e,null,!0,!1)}},{key:"getCipher",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/ciphers/"+e,null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new ey(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getCipherAdmin",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/ciphers/"+e+"/admin",null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new ey(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getCiphersOrganization",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/ciphers/organization-details?organizationId="+e,null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eT(n,ey));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postCipher",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/ciphers",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new ey(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postCipherCreate",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/ciphers/create",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new ey(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postCipherAdmin",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/ciphers/admin",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new ey(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"putCipher",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("PUT","/ciphers/"+e,t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new ey(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"putCipherAdmin",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("PUT","/ciphers/"+e+"/admin",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new ey(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"deleteCipher",value:function(e){return this.send("DELETE","/ciphers/"+e,null,!0,!1)}},{key:"deleteCipherAdmin",value:function(e){return this.send("DELETE","/ciphers/"+e+"/admin",null,!0,!1)}},{key:"deleteManyCiphers",value:function(e){return this.send("DELETE","/ciphers",e,!0,!1)}},{key:"deleteManyCiphersAdmin",value:function(e){return this.send("DELETE","/ciphers/admin",e,!0,!1)}},{key:"putMoveCiphers",value:function(e){return this.send("PUT","/ciphers/move",e,!0,!1)}},{key:"putShareCipher",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("PUT","/ciphers/"+e+"/share",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new ey(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"putShareCiphers",value:function(e){return this.send("PUT","/ciphers/share",e,!0,!1)}},{key:"putCipherCollections",value:function(e,t){return this.send("PUT","/ciphers/"+e+"/collections",t,!0,!1)}},{key:"putCipherCollectionsAdmin",value:function(e,t){return this.send("PUT","/ciphers/"+e+"/collections-admin",t,!0,!1)}},{key:"postPurgeCiphers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="/ciphers/purge";return null!=t&&(n+="?organizationId="+t),this.send("POST",n,e,!0,!1)}},{key:"postImportCiphers",value:function(e){return this.send("POST","/ciphers/import",e,!0,!1)}},{key:"postImportOrganizationCiphers",value:function(e,t){return this.send("POST","/ciphers/import-organization?organizationId="+e,t,!0,!1)}},{key:"putDeleteCipher",value:function(e){return this.send("PUT","/ciphers/"+e+"/delete",null,!0,!1)}},{key:"putDeleteCipherAdmin",value:function(e){return this.send("PUT","/ciphers/"+e+"/delete-admin",null,!0,!1)}},{key:"putDeleteManyCiphers",value:function(e){return this.send("PUT","/ciphers/delete",e,!0,!1)}},{key:"putDeleteManyCiphersAdmin",value:function(e){return this.send("PUT","/ciphers/delete-admin",e,!0,!1)}},{key:"putRestoreCipher",value:function(e){return this.send("PUT","/ciphers/"+e+"/restore",null,!0,!1)}},{key:"putRestoreCipherAdmin",value:function(e){return this.send("PUT","/ciphers/"+e+"/restore-admin",null,!0,!1)}},{key:"putRestoreManyCiphers",value:function(e){return this.send("PUT","/ciphers/restore",e,!0,!1)}},{key:"postCipherAttachment",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("POST","/ciphers/"+e+"/attachment",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new ey(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"postCipherAttachmentAdmin",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("POST","/ciphers/"+e+"/attachment-admin",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new ey(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"deleteCipherAttachment",value:function(e,t){return this.send("DELETE","/ciphers/"+e+"/attachment/"+t,null,!0,!1)}},{key:"deleteCipherAttachmentAdmin",value:function(e,t){return this.send("DELETE","/ciphers/"+e+"/attachment/"+t+"/admin",null,!0,!1)}},{key:"postShareCipherAttachment",value:function(e,t,n,r){return this.send("POST","/ciphers/"+e+"/attachment/"+t+"/share?organizationId="+r,n,!0,!1)}},{key:"getCollectionDetails",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("GET","/organizations/"+e+"/collections/"+t+"/details",null,!0,!0);case 2:return r=n.sent,n.abrupt("return",new ex(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"getUserCollections",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("GET","/collections",null,!0,!0);case 2:return t=e.sent,e.abrupt("return",new eT(t,ew));case 4:case"end":return e.stop()}},e,this)}))}},{key:"getCollections",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/organizations/"+e+"/collections",null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eT(n,ew));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getCollectionUsers",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("GET","/organizations/"+e+"/collections/"+t+"/users",null,!0,!0);case 2:return r=n.sent,n.abrupt("return",r.map(function(e){return new eg(e)}));case 4:case"end":return n.stop()}},n,this)}))}},{key:"postCollection",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("POST","/organizations/"+e+"/collections",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new ew(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"putCollection",value:function(e,t,n){return ta(this,void 0,void 0,I().mark(function r(){var a;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send("PUT","/organizations/"+e+"/collections/"+t,n,!0,!0);case 2:return a=r.sent,r.abrupt("return",new ew(a));case 4:case"end":return r.stop()}},r,this)}))}},{key:"putCollectionUsers",value:function(e,t,n){return ta(this,void 0,void 0,I().mark(function r(){return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send("PUT","/organizations/"+e+"/collections/"+t+"/users",n,!0,!1);case 2:case"end":return r.stop()}},r,this)}))}},{key:"deleteCollection",value:function(e,t){return this.send("DELETE","/organizations/"+e+"/collections/"+t,null,!0,!1)}},{key:"deleteCollectionUser",value:function(e,t,n){return this.send("DELETE","/organizations/"+e+"/collections/"+t+"/user/"+n,null,!0,!1)}},{key:"getGroupDetails",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("GET","/organizations/"+e+"/groups/"+t+"/details",null,!0,!0);case 2:return r=n.sent,n.abrupt("return",new eR(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"getGroups",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/organizations/"+e+"/groups",null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eT(n,eA));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getGroupUsers",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("GET","/organizations/"+e+"/groups/"+t+"/users",null,!0,!0);case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}},n,this)}))}},{key:"postGroup",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("POST","/organizations/"+e+"/groups",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new eA(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"putGroup",value:function(e,t,n){return ta(this,void 0,void 0,I().mark(function r(){var a;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send("PUT","/organizations/"+e+"/groups/"+t,n,!0,!0);case 2:return a=r.sent,r.abrupt("return",new eA(a));case 4:case"end":return r.stop()}},r,this)}))}},{key:"putGroupUsers",value:function(e,t,n){return ta(this,void 0,void 0,I().mark(function r(){return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send("PUT","/organizations/"+e+"/groups/"+t+"/users",n,!0,!1);case 2:case"end":return r.stop()}},r,this)}))}},{key:"deleteGroup",value:function(e,t){return this.send("DELETE","/organizations/"+e+"/groups/"+t,null,!0,!1)}},{key:"deleteGroupUser",value:function(e,t,n){return this.send("DELETE","/organizations/"+e+"/groups/"+t+"/user/"+n,null,!0,!1)}},{key:"getPolicy",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("GET","/organizations/"+e+"/policies/"+t,null,!0,!0);case 2:return r=n.sent,n.abrupt("return",new eQ(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"getPolicies",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/organizations/"+e+"/policies",null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eT(n,eQ));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getPoliciesByToken",value:function(e,t,n,r){return ta(this,void 0,void 0,I().mark(function a(){var i;return I().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.send("GET","/organizations/"+e+"/policies/token?token="+encodeURIComponent(t)+"&email="+encodeURIComponent(n)+"&organizationUserId="+r,null,!1,!0);case 2:return i=a.sent,a.abrupt("return",new eT(i,eQ));case 4:case"end":return a.stop()}},a,this)}))}},{key:"putPolicy",value:function(e,t,n){return ta(this,void 0,void 0,I().mark(function r(){var a;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send("PUT","/organizations/"+e+"/policies/"+t,n,!0,!0);case 2:return a=r.sent,r.abrupt("return",new eQ(a));case 4:case"end":return r.stop()}},r,this)}))}},{key:"getOrganizationUser",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("GET","/organizations/"+e+"/users/"+t,null,!0,!0);case 2:return r=n.sent,n.abrupt("return",new eW(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"getOrganizationUserGroups",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("GET","/organizations/"+e+"/users/"+t+"/groups",null,!0,!0);case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}},n,this)}))}},{key:"getOrganizationUsers",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/organizations/"+e+"/users",null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eT(n,eH));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postOrganizationUserInvite",value:function(e,t){return this.send("POST","/organizations/"+e+"/users/invite",t,!0,!1)}},{key:"postOrganizationUserReinvite",value:function(e,t){return this.send("POST","/organizations/"+e+"/users/"+t+"/reinvite",null,!0,!1)}},{key:"postOrganizationUserAccept",value:function(e,t,n){return this.send("POST","/organizations/"+e+"/users/"+t+"/accept",n,!0,!1)}},{key:"postOrganizationUserConfirm",value:function(e,t,n){return this.send("POST","/organizations/"+e+"/users/"+t+"/confirm",n,!0,!1)}},{key:"putOrganizationUser",value:function(e,t,n){return this.send("PUT","/organizations/"+e+"/users/"+t,n,!0,!1)}},{key:"putOrganizationUserGroups",value:function(e,t,n){return this.send("PUT","/organizations/"+e+"/users/"+t+"/groups",n,!0,!1)}},{key:"deleteOrganizationUser",value:function(e,t){return this.send("DELETE","/organizations/"+e+"/users/"+t,null,!0,!1)}},{key:"getPlans",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("GET","/plans/",null,!0,!0);case 2:return t=e.sent,e.abrupt("return",new eT(t,ej));case 4:case"end":return e.stop()}},e,this)}))}},{key:"postImportDirectory",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.send("POST","/organizations/"+e+"/import",t,!0,!1));case 1:case"end":return n.stop()}},n,this)}))}},{key:"getSettingsDomains",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("GET","/settings/domains",null,!0,!0);case 2:return t=e.sent,e.abrupt("return",new eC(t));case 4:case"end":return e.stop()}},e,this)}))}},{key:"putSettingsDomains",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("PUT","/settings/domains",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eC(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getSync",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.isDesktopClient||this.isWebClient?"/sync?excludeDomains=true":"/sync",e.next=3,this.send("GET",t,null,!0,!0);case 3:return n=e.sent,e.abrupt("return",new e1(n));case 5:case"end":return e.stop()}},e,this)}))}},{key:"getTwoFactorProviders",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("GET","/two-factor",null,!0,!0);case 2:return t=e.sent,e.abrupt("return",new eT(t,e6));case 4:case"end":return e.stop()}},e,this)}))}},{key:"getTwoFactorOrganizationProviders",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/organizations/"+e+"/two-factor",null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eT(n,e6));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getTwoFactorAuthenticator",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/two-factor/get-authenticator",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e4(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getTwoFactorEmail",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/two-factor/get-email",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e5(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getTwoFactorDuo",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/two-factor/get-duo",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e3(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getTwoFactorOrganizationDuo",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("POST","/organizations/"+e+"/two-factor/get-duo",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new e3(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"getTwoFactorYubiKey",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/two-factor/get-yubikey",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new tn(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getTwoFactorU2f",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/two-factor/get-u2f",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e7(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getTwoFactorU2fChallenge",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/two-factor/get-u2f-challenge",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new tt(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getTwoFactorRecover",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/two-factor/get-recover",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e9(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"putTwoFactorAuthenticator",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("PUT","/two-factor/authenticator",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e4(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"putTwoFactorEmail",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("PUT","/two-factor/email",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e5(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"putTwoFactorDuo",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("PUT","/two-factor/duo",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e3(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"putTwoFactorOrganizationDuo",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("PUT","/organizations/"+e+"/two-factor/duo",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new e3(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"putTwoFactorYubiKey",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("PUT","/two-factor/yubikey",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new tn(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"putTwoFactorU2f",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("PUT","/two-factor/u2f",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e7(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"deleteTwoFactorU2f",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("DELETE","/two-factor/u2f",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e7(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"putTwoFactorDisable",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("PUT","/two-factor/disable",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e6(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"putTwoFactorOrganizationDisable",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("PUT","/organizations/"+e+"/two-factor/disable",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new e6(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"postTwoFactorRecover",value:function(e){return this.send("POST","/two-factor/recover",e,!1,!1)}},{key:"postTwoFactorEmailSetup",value:function(e){return this.send("POST","/two-factor/send-email",e,!0,!1)}},{key:"postTwoFactorEmail",value:function(e){return this.send("POST","/two-factor/send-email-login",e,!1,!1)}},{key:"getOrganization",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/organizations/"+e,null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eN(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getOrganizationBilling",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/organizations/"+e+"/billing",null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new ea(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getOrganizationSubscription",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/organizations/"+e+"/subscription",null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eF(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getOrganizationLicense",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.send("GET","/organizations/"+e+"/license?installationId="+t,null,!0,!0));case 1:case"end":return n.stop()}},n,this)}))}},{key:"getOrganizationTaxInfo",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/organizations/"+e+"/tax",null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new e2(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postOrganization",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/organizations",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eN(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"putOrganization",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("PUT","/organizations/"+e,t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new eN(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"putOrganizationTaxInfo",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.send("PUT","/organizations/"+e+"/tax",t,!0,!1));case 1:case"end":return n.stop()}},n,this)}))}},{key:"postLeaveOrganization",value:function(e){return this.send("POST","/organizations/"+e+"/leave",null,!0,!1)}},{key:"postOrganizationLicense",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/organizations/license",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",new eN(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postOrganizationLicenseUpdate",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.send("POST","/organizations/"+e+"/license",t,!0,!1));case 1:case"end":return n.stop()}},n,this)}))}},{key:"postOrganizationApiKey",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("POST","/organizations/"+e+"/api-key",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new en(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"postOrganizationRotateApiKey",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("POST","/organizations/"+e+"/rotate-api-key",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new en(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"postOrganizationUpgrade",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("POST","/organizations/"+e+"/upgrade",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new eK(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"postOrganizationSeat",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("POST","/organizations/"+e+"/seat",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new eK(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"postOrganizationStorage",value:function(e,t){return ta(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.send("POST","/organizations/"+e+"/storage",t,!0,!0);case 2:return r=n.sent,n.abrupt("return",new eK(r));case 4:case"end":return n.stop()}},n,this)}))}},{key:"postOrganizationPayment",value:function(e,t){return this.send("POST","/organizations/"+e+"/payment",t,!0,!1)}},{key:"postOrganizationVerifyBank",value:function(e,t){return this.send("POST","/organizations/"+e+"/verify-bank",t,!0,!1)}},{key:"postOrganizationCancel",value:function(e){return this.send("POST","/organizations/"+e+"/cancel",null,!0,!1)}},{key:"postOrganizationReinstate",value:function(e){return this.send("POST","/organizations/"+e+"/reinstate",null,!0,!1)}},{key:"deleteOrganization",value:function(e,t){return this.send("DELETE","/organizations/"+e,t,!0,!1)}},{key:"getEvents",value:function(e,t,n){return ta(this,void 0,void 0,I().mark(function r(){var a;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send("GET",this.addEventParameters("/events",e,t,n),null,!0,!0);case 2:return a=r.sent,r.abrupt("return",new eT(a,eE));case 4:case"end":return r.stop()}},r,this)}))}},{key:"getEventsCipher",value:function(e,t,n,r){return ta(this,void 0,void 0,I().mark(function a(){var i;return I().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.send("GET",this.addEventParameters("/ciphers/"+e+"/events",t,n,r),null,!0,!0);case 2:return i=a.sent,a.abrupt("return",new eT(i,eE));case 4:case"end":return a.stop()}},a,this)}))}},{key:"getEventsOrganization",value:function(e,t,n,r){return ta(this,void 0,void 0,I().mark(function a(){var i;return I().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.send("GET",this.addEventParameters("/organizations/"+e+"/events",t,n,r),null,!0,!0);case 2:return i=a.sent,a.abrupt("return",new eT(i,eE));case 4:case"end":return a.stop()}},a,this)}))}},{key:"getEventsOrganizationUser",value:function(e,t,n,r,a){return ta(this,void 0,void 0,I().mark(function i(){var o;return I().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.send("GET",this.addEventParameters("/organizations/"+e+"/users/"+t+"/events",n,r,a),null,!0,!0);case 2:return o=i.sent,i.abrupt("return",new eT(o,eE));case 4:case"end":return i.stop()}},i,this)}))}},{key:"postEventsCollect",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getActiveBearerToken();case 2:return n=t.sent,r=new Headers({"Device-Type":this.deviceType,Authorization:"Bearer "+n,"Content-Type":"application/json; charset=utf-8"}),null!=this.customUserAgent&&r.set("User-Agent",this.customUserAgent),t.next=7,this.fetch(new Request(this.eventsBaseUrl+"/collect",{cache:"no-store",credentials:this.getCredentials(),method:"POST",body:JSON.stringify(e),headers:r}));case 7:if(!(200!==t.sent.status)){t.next=10;break}return t.abrupt("return",Promise.reject("Event post failed."));case 10:case"end":return t.stop()}},t,this)}))}},{key:"getUserPublicKey",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/users/"+e+"/public-key",null,!0,!0);case 2:return n=t.sent,t.abrupt("return",new tr(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getHibpBreach",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("GET","/hibp/breach?username="+e,null,!0,!0);case 2:return n=t.sent,t.abrupt("return",n.map(function(e){return new ec(e)}));case 4:case"end":return t.stop()}},t,this)}))}},{key:"postBitPayInvoice",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send("POST","/bitpay-invoice",e,!0,!0);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t,this)}))}},{key:"postSetupPayment",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("POST","/setup-payment",null,!0,!0);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))}},{key:"getActiveBearerToken",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenService.getToken();case 2:if(t=e.sent,!this.tokenService.tokenNeedsRefresh()){e.next=8;break}return e.next=6,this.doRefreshToken();case 6:t=e.sent.accessToken;case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}},e,this)}))}},{key:"fetch",value:function(e){return"GET"===e.method&&(e.headers.set("Cache-Control","no-store"),e.headers.set("Pragma","no-cache")),this.nativeFetch(e)}},{key:"nativeFetch",value:function(e){return fetch(e)}},{key:"preValidateSso",value:function(e){return ta(this,void 0,void 0,I().mark(function t(){var n,r,a,i;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==e||""===e)){t.next=2;break}throw Error("Organization Identifier was not provided.");case 2:return n=new Headers({Accept:"application/json","Device-Type":this.deviceType}),null!=this.customUserAgent&&n.set("User-Agent",this.customUserAgent),r="/account/prevalidate?domainHint=".concat(encodeURIComponent(e)),t.next=7,this.fetch(new Request(this.identityBaseUrl+r,{cache:"no-store",credentials:this.getCredentials(),headers:n,method:"GET"}));case 7:if(200!==(a=t.sent).status){t.next=12;break}return t.abrupt("return",!0);case 12:return t.next=14,this.handleError(a,!1,!0);case 14:return i=t.sent,t.abrupt("return",Promise.reject(i));case 16:case"end":return t.stop()}},t,this)}))}},{key:"send",value:function(e,t,n,r,a){return ta(this,void 0,void 0,I().mark(function i(){var o,s,c,u,l,d;return I().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(o=new Headers({"Device-Type":this.deviceType}),null!=this.customUserAgent&&o.set("User-Agent",this.customUserAgent),s={cache:"no-store",credentials:this.getCredentials(),method:e},!r){i.next=8;break}return i.next=6,this.getActiveBearerToken();case 6:c=i.sent,o.set("Authorization","Bearer "+c);case 8:return null!=n&&("string"==typeof n?(s.body=n,o.set("Content-Type","application/x-www-form-urlencoded; charset=utf-8")):"object"==typeof n&&(n instanceof FormData?s.body=n:(o.set("Content-Type","application/json; charset=utf-8"),s.body=JSON.stringify(n)))),a&&o.set("Accept","application/json"),s.headers=o,i.next=13,this.fetch(new Request(this.apiBaseUrl+t,s));case 13:if(u=i.sent,!(a&&200===u.status)){i.next=21;break}return i.next=17,u.json();case 17:return l=i.sent,i.abrupt("return",l);case 21:if(!(200!==u.status)){i.next=26;break}return i.next=24,this.handleError(u,!1,r);case 24:return d=i.sent,i.abrupt("return",Promise.reject(d));case 26:case"end":return i.stop()}},i,this)}))}},{key:"handleError",value:function(e,t,n){return ta(this,void 0,void 0,I().mark(function r(){var a;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n&&(t&&400===e.status||401===e.status||403===e.status))){r.next=4;break}return r.next=3,this.logoutCallback(!0);case 3:return r.abrupt("return",null);case 4:if(a=null,!this.isJsonResponse(e)){r.next=9;break}return r.next=8,e.json();case 8:a=r.sent;case 9:return r.abrupt("return",new eS(a,e.status,t));case 10:case"end":return r.stop()}},r,this)}))}},{key:"doRefreshToken",value:function(){return ta(this,void 0,void 0,I().mark(function e(){var t,n,r,a,i,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenService.getRefreshToken();case 2:if(!(null==(t=e.sent)||""===t)){e.next=5;break}throw Error();case 5:return n=new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Accept:"application/json","Device-Type":this.deviceType}),null!=this.customUserAgent&&n.set("User-Agent",this.customUserAgent),r=this.tokenService.decodeToken(),e.next=10,this.fetch(new Request(this.identityBaseUrl+"/connect/token",{body:this.qsStringify({grant_type:"refresh_token",client_id:r.client_id,refresh_token:t}),cache:"no-store",credentials:this.getCredentials(),headers:n,method:"POST"}));case 10:if(200!==(a=e.sent).status){e.next=21;break}return e.next=14,a.json();case 14:return i=new eD(e.sent),e.next=18,this.tokenService.setTokens(i.accessToken,i.refreshToken);case 18:return e.abrupt("return",i);case 21:return e.next=23,this.handleError(a,!0,!0);case 23:return o=e.sent,e.abrupt("return",Promise.reject(o));case 25:case"end":return e.stop()}},e,this)}))}},{key:"qsStringify",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"getCredentials",value:function(){if(this.device!==m.SafariExtension&&(!this.isWebClient||this.usingBaseUrl))return"include"}},{key:"addEventParameters",value:function(e,t,n,r){return null!=t&&(e+="?start="+t),null!=n&&(e+=(e.indexOf("?")>-1?"&":"?")+("end="+n)),null!=r&&(e+=(e.indexOf("?")>-1?"&":"?")+("continuationToken="+r)),e}},{key:"isJsonResponse",value:function(e){var t=e.headers.get("content-type");return null!=t&&t.indexOf("application/json")>-1}}]),e}(),to=function(){function e(t){(0,T.Z)(this,e),this.storageService=t}return(0,j.Z)(e,[{key:"getAppId",value:function(){return this.makeAndGetAppId("appId")}},{key:"getAnonymousAppId",value:function(){return this.makeAndGetAppId("anonymousAppId")}},{key:"makeAndGetAppId",value:function(e){var t,n,r,a;return t=this,n=void 0,r=void 0,a=I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.get(e);case 2:if(!(null!=(n=t.sent))){t.next=5;break}return t.abrupt("return",n);case 5:return r=J.newGuid(),t.next=8,this.storageService.save(e,r);case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}},t,this)}),new(r||(r=Promise))(function(e,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(o,s)}c((a=a.apply(t,n||[])).next())})}}]),e}();(a=y||(y={}))[a.Authenticator=0]="Authenticator",a[a.Email=1]="Email",a[a.Duo=2]="Duo",a[a.Yubikey=3]="Yubikey",a[a.U2f=4]="U2f",a[a.Remember=5]="Remember",a[a.OrganizationDuo=6]="OrganizationDuo";var ts=(0,j.Z)(function e(){(0,T.Z)(this,e),this.twoFactor=!1,this.resetMasterPassword=!1,this.twoFactorProviders=null}),tc=(0,j.Z)(function e(t,n){(0,T.Z)(this,e),this.type=n.getDevice(),this.name=n.getDeviceString(),this.identifier=t,this.pushToken=null}),tu=(0,j.Z)(function e(t,n){(0,T.Z)(this,e),this.publicKey=t,this.encryptedPrivateKey=n}),tl=(0,j.Z)(function e(t){(0,T.Z)(this,e),this.email=t}),td=function(){function e(t,n,r,a,i,o,s){(0,T.Z)(this,e),null!=t&&t.length>1?(this.email=t[0],this.masterPasswordHash=t[1]):null!=n&&n.length>2?(this.code=n[0],this.codeVerifier=n[1],this.redirectUri=n[2]):null!=r&&r.length>1&&(this.clientId=r[0],this.clientSecret=r[1]),this.token=i,this.provider=a,this.remember=o,this.device=null!=s?s:null}return(0,j.Z)(e,[{key:"toIdentityToken",value:function(e){var t={scope:"api offline_access",client_id:e};if(null!=this.clientSecret)t.scope="api",t.grant_type="client_credentials",t.client_secret=this.clientSecret;else if(null!=this.masterPasswordHash&&null!=this.email)t.grant_type="password",t.username=this.email,t.password=this.masterPasswordHash;else if(null!=this.code&&null!=this.codeVerifier&&null!=this.redirectUri)t.grant_type="authorization_code",t.code=this.code,t.code_verifier=this.codeVerifier,t.redirect_uri=this.redirectUri;else throw Error("must provide credentials or codes");return this.device&&(t.deviceType=this.device.type,t.deviceIdentifier=this.device.identifier,t.deviceName=this.device.name),this.token&&null!=this.provider&&(t.twoFactorToken=this.token,t.twoFactorProvider=this.provider,t.twoFactorRemember=this.remember?"1":"0"),t}}]),e}(),tf=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},tp=(g={},(0,R.Z)(g,y.Authenticator,{type:y.Authenticator,name:null,description:null,priority:1,sort:1,premium:!1}),(0,R.Z)(g,y.Yubikey,{type:y.Yubikey,name:null,description:null,priority:3,sort:2,premium:!0}),(0,R.Z)(g,y.Duo,{type:y.Duo,name:"Duo",description:null,priority:2,sort:3,premium:!0}),(0,R.Z)(g,y.OrganizationDuo,{type:y.OrganizationDuo,name:"Duo (Organization)",description:null,priority:10,sort:4,premium:!1}),(0,R.Z)(g,y.U2f,{type:y.U2f,name:null,description:null,priority:4,sort:5,premium:!0}),(0,R.Z)(g,y.Email,{type:y.Email,name:null,description:null,priority:0,sort:6,premium:!1}),g),th=function(){function e(t,n,r,a,i,o,s,c,u){var l=!(arguments.length>9)||void 0===arguments[9]||arguments[9];(0,T.Z)(this,e),this.cryptoService=t,this.apiService=n,this.userService=r,this.tokenService=a,this.appIdService=i,this.i18nService=o,this.platformUtilsService=s,this.messagingService=c,this.vaultTimeoutService=u,this.setCryptoKeys=l,this.selectedTwoFactorProviderType=null}return(0,j.Z)(e,[{key:"init",value:function(){tp[y.Email].name=this.i18nService.t("emailTitle"),tp[y.Email].description=this.i18nService.t("emailDesc"),tp[y.Authenticator].name=this.i18nService.t("authenticatorAppTitle"),tp[y.Authenticator].description=this.i18nService.t("authenticatorAppDesc"),tp[y.Duo].description=this.i18nService.t("duoDesc"),tp[y.OrganizationDuo].name="Duo ("+this.i18nService.t("organization")+")",tp[y.OrganizationDuo].description=this.i18nService.t("duoOrganizationDesc"),tp[y.U2f].name=this.i18nService.t("u2fTitle"),tp[y.U2f].description=this.i18nService.t("u2fDesc"),tp[y.Yubikey].name=this.i18nService.t("yubiKeyTitle"),tp[y.Yubikey].description=this.i18nService.t("yubiKeyDesc")}},{key:"logIn",value:function(e,t){return tf(this,void 0,void 0,I().mark(function n(){var r,a;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.selectedTwoFactorProviderType=null,n.next=3,this.makePreloginKey(t,e);case 3:return r=n.sent,n.next=6,this.cryptoService.hashPassword(t,r);case 6:return a=n.sent,n.next=9,this.logInHelper(e,a,null,null,null,null,null,r,null,null,null);case 9:return n.abrupt("return",n.sent);case 10:case"end":return n.stop()}},n,this)}))}},{key:"logInSso",value:function(e,t,n){return tf(this,void 0,void 0,I().mark(function r(){return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return this.selectedTwoFactorProviderType=null,r.next=3,this.logInHelper(null,null,e,t,n,null,null,null,null,null,null);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}},r,this)}))}},{key:"logInApiKey",value:function(e,t){return tf(this,void 0,void 0,I().mark(function n(){return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.selectedTwoFactorProviderType=null,n.next=3,this.logInHelper(null,null,null,null,null,e,t,null,null,null,null);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},n,this)}))}},{key:"logInTwoFactor",value:function(e,t,n){return tf(this,void 0,void 0,I().mark(function r(){return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.logInHelper(this.email,this.masterPasswordHash,this.code,this.codeVerifier,this.ssoRedirectUrl,this.clientId,this.clientSecret,this.key,e,t,n);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},r,this)}))}},{key:"logInComplete",value:function(e,t,n,r,a){return tf(this,void 0,void 0,I().mark(function i(){var o,s;return I().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return this.selectedTwoFactorProviderType=null,i.next=3,this.makePreloginKey(t,e);case 3:return o=i.sent,i.next=6,this.cryptoService.hashPassword(t,o);case 6:return s=i.sent,i.next=9,this.logInHelper(e,s,null,null,null,null,null,o,n,r,a);case 9:return i.abrupt("return",i.sent);case 10:case"end":return i.stop()}},i,this)}))}},{key:"logInSsoComplete",value:function(e,t,n,r,a,i){return tf(this,void 0,void 0,I().mark(function o(){return I().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.selectedTwoFactorProviderType=null,o.next=3,this.logInHelper(null,null,e,t,n,null,null,null,r,a,i);case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},o,this)}))}},{key:"logInApiKeyComplete",value:function(e,t,n,r,a){return tf(this,void 0,void 0,I().mark(function i(){return I().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return this.selectedTwoFactorProviderType=null,i.next=3,this.logInHelper(null,null,null,null,null,e,t,null,n,r,a);case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},i,this)}))}},{key:"logOut",value:function(e){e(),this.messagingService.send("loggedOut")}},{key:"getSupportedTwoFactorProviders",value:function(e){var t=[];return null==this.twoFactorProvidersData?t:(this.twoFactorProvidersData.has(y.OrganizationDuo)&&this.platformUtilsService.supportsDuo()&&t.push(tp[y.OrganizationDuo]),this.twoFactorProvidersData.has(y.Authenticator)&&t.push(tp[y.Authenticator]),this.twoFactorProvidersData.has(y.Yubikey)&&t.push(tp[y.Yubikey]),this.twoFactorProvidersData.has(y.Duo)&&this.platformUtilsService.supportsDuo()&&t.push(tp[y.Duo]),this.twoFactorProvidersData.has(y.U2f)&&this.platformUtilsService.supportsU2f(e)&&t.push(tp[y.U2f]),this.twoFactorProvidersData.has(y.Email)&&t.push(tp[y.Email]),t)}},{key:"getDefaultTwoFactorProvider",value:function(e){if(null==this.twoFactorProvidersData)return null;if(null!=this.selectedTwoFactorProviderType&&this.twoFactorProvidersData.has(this.selectedTwoFactorProviderType))return this.selectedTwoFactorProviderType;var t=null,n=-1;return this.twoFactorProvidersData.forEach(function(r,a){var i=tp[a];if(null!=i&&i.priority>n){if(a===y.U2f&&!e)return;t=a,n=i.priority}}),t}},{key:"makePreloginKey",value:function(e,t){return tf(this,void 0,void 0,I().mark(function n(){var r,a,i;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=t.trim().toLowerCase(),r=null,a=null,n.prev=3,n.next=6,this.apiService.postPrelogin(new tl(t));case 6:null!=(i=n.sent)&&(r=i.kdf,a=i.kdfIterations),n.next=14;break;case 10:if(n.prev=10,n.t0=n.catch(3),!(null==n.t0||404!==n.t0.statusCode)){n.next=14;break}throw n.t0;case 14:return n.abrupt("return",this.cryptoService.makeKey(e,t,r,a));case 15:case"end":return n.stop()}},n,this,[[3,10]])}))}},{key:"authingWithApiKey",value:function(){return null!=this.clientId&&null!=this.clientSecret}},{key:"authingWithSso",value:function(){return null!=this.code&&null!=this.codeVerifier&&null!=this.ssoRedirectUrl}},{key:"authingWithPassword",value:function(){return null!=this.email&&null!=this.masterPasswordHash}},{key:"logInHelper",value:function(e,t,n,r,a,i,o,s,c,u,l){return tf(this,void 0,void 0,I().mark(function d(){var f,p,h,v,m,g,b,w,k,x,O;return I().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.tokenService.getTwoFactorToken(e);case 2:return f=d.sent,d.next=5,this.appIdService.getAppId();case 5:return p=new tc(d.sent,this.platformUtilsService),h=[],v=[],m=[],h=null!=e&&null!=t?[e,t]:null,v=null!=n&&null!=r&&null!=a?[n,r,a]:null,m=null!=i&&null!=o?[i,o]:null,g=null!=u&&null!=c?new td(h,v,m,c,u,l,p):null!=f?new td(h,v,m,y.Remember,f,!1,p):new td(h,v,m,null,null,!1,p),d.next=16,this.apiService.postIdentityToken(g);case 16:if(b=d.sent,this.clearState(),(w=new ts).twoFactor=!b.accessToken,!w.twoFactor){d.next=33;break}return k=b,this.email=e,this.masterPasswordHash=t,this.code=n,this.codeVerifier=r,this.ssoRedirectUrl=a,this.clientId=i,this.clientSecret=o,this.key=this.setCryptoKeys?s:null,this.twoFactorProvidersData=k.twoFactorProviders2,w.twoFactorProviders=k.twoFactorProviders2,d.abrupt("return",w);case 33:if(x=b,w.resetMasterPassword=x.resetMasterPassword,!(null!=x.twoFactorToken)){d.next=38;break}return d.next=38,this.tokenService.setTwoFactorToken(x.twoFactorToken,e);case 38:return d.next=40,this.tokenService.setTokens(x.accessToken,x.refreshToken);case 40:return d.next=42,this.userService.setInformation(this.tokenService.getUserId(),this.tokenService.getEmail(),x.kdf,x.kdfIterations);case 42:if(!this.setCryptoKeys){d.next=67;break}if(!(null!=s)){d.next=46;break}return d.next=46,this.cryptoService.setKey(s);case 46:if(!(null!=t)){d.next=49;break}return d.next=49,this.cryptoService.setKeyHash(t);case 49:if(!(null==n||null!=x.key)){d.next=67;break}return d.next=52,this.cryptoService.setEncKey(x.key);case 52:if(null!=x.privateKey){d.next=65;break}return d.prev=53,d.next=56,this.cryptoService.makeKeyPair();case 56:return O=d.sent,d.next=59,this.apiService.postAccountKeys(new tu(O[0],O[1].encryptedString));case 59:x.privateKey=O[1].encryptedString,d.next=65;break;case 62:d.prev=62,d.t0=d.catch(53),console.error(d.t0);case 65:return d.next=67,this.cryptoService.setEncPrivateKey(x.privateKey);case 67:return null!=this.vaultTimeoutService&&(this.vaultTimeoutService.biometricLocked=!1),this.messagingService.send("loggedIn"),d.abrupt("return",w);case 70:case"end":return d.stop()}},d,this,[[53,62]])}))}},{key:"clearState",value:function(){this.key=null,this.email=null,this.masterPasswordHash=null,this.code=null,this.codeVerifier=null,this.ssoRedirectUrl=null,this.clientId=null,this.clientSecret=null,this.twoFactorProvidersData=null,this.selectedTwoFactorProviderType=null}}]),e}();(i=b||(b={}))[i.Login=1]="Login",i[i.SecureNote=2]="SecureNote",i[i.Card=3]="Card",i[i.Identity=4]="Identity",(o=w||(w={}))[o.Text=0]="Text",o[o.Hidden=1]="Hidden",o[o.Boolean=2]="Boolean",(s=k||(k={}))[s.Domain=0]="Domain",s[s.Host=1]="Host",s[s.StartsWith=2]="StartsWith",s[s.Exact=3]="Exact",s[s.RegularExpression=4]="RegularExpression",s[s.Never=5]="Never";var tv=(0,j.Z)(function e(t){if((0,T.Z)(this,e),null!=t)this.id=t.id,this.url=t.url,this.fileName=t.fileName,this.key=t.key,this.size=t.size,this.sizeName=t.sizeName}),tm=(0,j.Z)(function e(t){if((0,T.Z)(this,e),null!=t)this.cardholderName=t.cardholderName,this.brand=t.brand,this.number=t.number,this.expMonth=t.expMonth,this.expYear=t.expYear,this.code=t.code}),ty=(0,j.Z)(function e(t){if((0,T.Z)(this,e),null!=t)this.type=t.type,this.name=t.name,this.value=t.value}),tg=(0,j.Z)(function e(t){if((0,T.Z)(this,e),null!=t)this.title=t.title,this.firstName=t.firstName,this.middleName=t.middleName,this.lastName=t.lastName,this.address1=t.address1,this.address2=t.address2,this.address3=t.address3,this.city=t.city,this.state=t.state,this.postalCode=t.postalCode,this.country=t.country,this.company=t.company,this.email=t.email,this.phone=t.phone,this.ssn=t.ssn,this.username=t.username,this.passportNumber=t.passportNumber,this.licenseNumber=t.licenseNumber}),tb=(0,j.Z)(function e(t){if((0,T.Z)(this,e),this.match=null,null!=t)this.uri=t.uri,this.match=t.match}),tw=(0,j.Z)(function e(t){if((0,T.Z)(this,e),null!=t)this.username=t.username,this.password=t.password,this.passwordRevisionDate=t.passwordRevisionDate,this.totp=t.totp,t.uris&&(this.uris=t.uris.map(function(e){return new tb(e)}))}),tk=(0,j.Z)(function e(t){if((0,T.Z)(this,e),null!=t)this.password=t.password,this.lastUsedDate=t.lastUsedDate}),tx=(0,j.Z)(function e(t){if((0,T.Z)(this,e),null!=t)this.type=t.type}),tO=(0,j.Z)(function e(t,n,r){if((0,T.Z)(this,e),null!=t){switch(this.id=t.id,this.organizationId=t.organizationId,this.folderId=t.folderId,this.userId=n,this.edit=t.edit,this.viewPassword=t.viewPassword,this.organizationUseTotp=t.organizationUseTotp,this.favorite=t.favorite,this.revisionDate=t.revisionDate,this.type=t.type,this.name=t.name,this.notes=t.notes,this.collectionIds=null!=r?r:t.collectionIds,this.deletedDate=t.deletedDate,this.type){case b.Login:this.login=new tw(t.login);break;case b.SecureNote:this.secureNote=new tx(t.secureNote);break;case b.Card:this.card=new tm(t.card);break;case b.Identity:this.identity=new tg(t.identity)}null!=t.fields&&(this.fields=t.fields.map(function(e){return new ty(e)})),null!=t.attachments&&(this.attachments=t.attachments.map(function(e){return new tv(e)})),null!=t.passwordHistory&&(this.passwordHistory=t.passwordHistory.map(function(e){return new tk(e)}))}}),tC=n("64222"),tS=function(){function e(t){if((0,T.Z)(this,e),this.id=null,this.url=null,this.size=null,this.sizeName=null,this.fileName=null,this.key=null,!!t)this.id=t.id,this.url=t.url,this.size=t.size,this.sizeName=t.sizeName}return(0,j.Z)(e,[{key:"fileSize",get:function(){try{if(null!=this.size)return parseInt(this.size,null)}catch(e){}return 0}}]),e}();(c=x||(x={}))[c.AesCbc256_B64=0]="AesCbc256_B64",c[c.AesCbc128_HmacSha256_B64=1]="AesCbc128_HmacSha256_B64",c[c.AesCbc256_HmacSha256_B64=2]="AesCbc256_HmacSha256_B64",c[c.Rsa2048_OaepSha256_B64=3]="Rsa2048_OaepSha256_B64",c[c.Rsa2048_OaepSha1_B64=4]="Rsa2048_OaepSha1_B64",c[c.Rsa2048_OaepSha256_HmacSha256_B64=5]="Rsa2048_OaepSha256_HmacSha256_B64",c[c.Rsa2048_OaepSha1_HmacSha256_B64=6]="Rsa2048_OaepSha1_HmacSha256_B64";var tE=function(){function e(t,n,r,a){if((0,T.Z)(this,e),null!=n){null!=r?this.encryptedString=t+"."+r+"|"+n:this.encryptedString=t+"."+n,null!=a&&(this.encryptedString+="|"+a),this.encryptionType=t,this.data=n,this.iv=r,this.mac=a;return}if(this.encryptedString=t,!!this.encryptedString){var i=this.encryptedString.split("."),o=null;if(2===i.length)try{this.encryptionType=parseInt(i[0],null),o=i[1].split("|")}catch(e){return}else o=this.encryptedString.split("|"),this.encryptionType=3===o.length?x.AesCbc128_HmacSha256_B64:x.AesCbc256_B64;switch(this.encryptionType){case x.AesCbc128_HmacSha256_B64:case x.AesCbc256_HmacSha256_B64:if(3!==o.length)return;this.iv=o[0],this.data=o[1],this.mac=o[2];break;case x.AesCbc256_B64:if(2!==o.length)return;this.iv=o[0],this.data=o[1];break;case x.Rsa2048_OaepSha256_B64:case x.Rsa2048_OaepSha1_B64:if(1!==o.length)return;this.data=o[0];break;default:return}}}return(0,j.Z)(e,[{key:"decrypt",value:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=this,n=void 0,r=void 0,a=I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null!=this.decryptedValue)){t.next=2;break}return t.abrupt("return",this.decryptedValue);case 2:if(!(r=J.global.bitwardenContainerService)){t.next=7;break}n=r.getCryptoService(),t.next=8;break;case 7:throw Error("global bitwardenContainerService not initialized.");case 8:if(t.prev=8,null!=i){t.next=13;break}return t.next=12,n.getOrgKey(e);case 12:i=t.sent;case 13:return t.next=15,n.decryptToUtf8(this,i);case 15:this.decryptedValue=t.sent,t.next=21;break;case 18:t.prev=18,t.t0=t.catch(8),this.decryptedValue="[error: cannot decrypt]";case 21:return t.abrupt("return",this.decryptedValue);case 22:case"end":return t.stop()}},t,this,[[8,18]])}),new(r||(r=Promise))(function(e,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(o,s)}c((a=a.apply(t,n||[])).next())})}}]),e}(),tP=function(){function e(){(0,T.Z)(this,e)}return(0,j.Z)(e,[{key:"buildDomainModel",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];for(var i in n){if(!!n.hasOwnProperty(i)){var o=t[n[i]||i];!0===r||a.indexOf(i)>-1?e[i]=o||null:e[i]=o?new tE(o):null}}}},{key:"buildDataModel",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];for(var a in n){if(!!n.hasOwnProperty(a)){var i=e[n[a]||a];r.indexOf(a)>-1?t[a]=null!=i?i:null:t[a]=null!=i?i.encryptedString:null}}}},{key:"decryptObj",value:function(e,t,n){var r,a,i,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return r=this,a=void 0,i=void 0,o=I().mark(function r(){var a,i,o;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:a=[],i=this,r.t0=I().keys(t);case 3:if((r.t1=r.t0()).done){r.next=10;break}if(o=r.t1.value,t.hasOwnProperty(o)){r.next=7;break}return r.abrupt("continue",3);case 7:!function(r){var o=Promise.resolve().then(function(){var e=t[r]||r;return i[e]?i[e].decrypt(n,s):null}).then(function(t){e[r]=t});a.push(o)}(o),r.next=3;break;case 10:return r.next=12,Promise.all(a);case 12:return r.abrupt("return",e);case 13:case"end":return r.stop()}},r,this)}),new(i||(i=Promise))(function(e,t){function n(e){try{c(o.next(e))}catch(e){t(e)}}function s(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):((r=t.value)instanceof i?r:new i(function(e){e(r)})).then(n,s)}c((o=o.apply(r,a||[])).next())})}}]),e}(),t_=(0,j.Z)(function e(t,n){if((0,T.Z)(this,e),null==t)throw Error("Must provide key");if(null==n){if(32===t.byteLength)n=x.AesCbc256_B64;else if(64===t.byteLength)n=x.AesCbc256_HmacSha256_B64;else throw Error("Unable to determine encType.")}if(this.key=t,this.encType=n,n===x.AesCbc256_B64&&32===t.byteLength)this.encKey=t,this.macKey=null;else if(n===x.AesCbc128_HmacSha256_B64&&32===t.byteLength)this.encKey=t.slice(0,16),this.macKey=t.slice(16,32);else if(n===x.AesCbc256_HmacSha256_B64&&64===t.byteLength)this.encKey=t.slice(0,32),this.macKey=t.slice(32,64);else throw Error("Unsupported encType/key length.");null!=this.key&&(this.keyB64=J.fromBufferToB64(this.key)),null!=this.encKey&&(this.encKeyB64=J.fromBufferToB64(this.encKey)),null!=this.macKey&&(this.macKeyB64=J.fromBufferToB64(this.macKey))}),tA=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return((0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.size=e.size,t.buildDomainModel((0,tC.Z)(t),e,{id:null,url:null,sizeName:null,fileName:null,key:null},n,["id","url","sizeName"]),t)}return(0,j.Z)(a,[{key:"decrypt",value:function(e){var t,n,r,a;return t=this,n=void 0,r=void 0,a=I().mark(function t(){var n,r,a,i,o;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.decryptObj(new tS(this),{fileName:null},e);case 2:if(n=t.sent,!(null!=this.key)){t.next=22;break}if(!(a=J.global.bitwardenContainerService)){t.next=9;break}r=a.getCryptoService(),t.next=10;break;case 9:throw Error("global bitwardenContainerService not initialized.");case 10:return t.prev=10,t.next=13,r.getOrgKey(e);case 13:return i=t.sent,t.next=16,r.decryptToBytes(this.key,i);case 16:o=t.sent,n.key=new t_(o),t.next=22;break;case 20:t.prev=20,t.t0=t.catch(10);case 22:return t.abrupt("return",n);case 23:case"end":return t.stop()}},t,this,[[10,20]])}),new(r||(r=Promise))(function(e,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(o,s)}c((a=a.apply(t,n||[])).next())})}},{key:"toAttachmentData",value:function(){var e=new tv;return e.size=this.size,this.buildDataModel(this,e,{id:null,url:null,sizeName:null,fileName:null,key:null},["id","url","sizeName"]),e}}]),a}(tP),tR=function(){function e(t){(0,T.Z)(this,e),this.cardholderName=null,this.expMonth=null,this.expYear=null,this.code=null,this._brand=null,this._number=null,this._subTitle=null}return(0,j.Z)(e,[{key:"maskedCode",get:function(){return null!=this.code?"•".repeat(this.code.length):null}},{key:"brand",get:function(){return this._brand},set:function(e){this._brand=e,this._subTitle=null}},{key:"number",get:function(){return this._number},set:function(e){this._number=e,this._subTitle=null}},{key:"subTitle",get:function(){if(null==this._subTitle&&(this._subTitle=this.brand,null!=this.number&&this.number.length>=4)){null!=this._subTitle&&""!==this._subTitle?this._subTitle+=", ":this._subTitle="";var e=this.number.length>=5&&null!=this.number.match(RegExp("^3[47]"))?5:4;this._subTitle+="*"+this.number.substr(this.number.length-e)}return this._subTitle}},{key:"expiration",get:function(){if(!this.expMonth&&!this.expYear)return null;var e=null!=this.expMonth?("0"+this.expMonth).slice(-2):"__";return e+=" / "+(null!=this.expYear?this.formatYear(this.expYear):"____")}},{key:"formatYear",value:function(e){return 2===e.length?"20"+e:e}}]),e}(),tD=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return((0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.buildDomainModel((0,tC.Z)(t),e,{cardholderName:null,brand:null,number:null,expMonth:null,expYear:null,code:null},n,[]),t)}return(0,j.Z)(a,[{key:"decrypt",value:function(e){return this.decryptObj(new tR(this),{cardholderName:null,brand:null,number:null,expMonth:null,expYear:null,code:null},e)}},{key:"toCardData",value:function(){var e=new tm;return this.buildDataModel(this,e,{cardholderName:null,brand:null,number:null,expMonth:null,expYear:null,code:null}),e}}]),a}(tP),tM=function(){function e(t){(0,T.Z)(this,e),this.title=null,this.middleName=null,this.address1=null,this.address2=null,this.address3=null,this.city=null,this.state=null,this.postalCode=null,this.country=null,this.company=null,this.email=null,this.phone=null,this.ssn=null,this.username=null,this.passportNumber=null,this.licenseNumber=null,this._firstName=null,this._lastName=null,this._subTitle=null}return(0,j.Z)(e,[{key:"firstName",get:function(){return this._firstName},set:function(e){this._firstName=e,this._subTitle=null}},{key:"lastName",get:function(){return this._lastName},set:function(e){this._lastName=e,this._subTitle=null}},{key:"subTitle",get:function(){return null==this._subTitle&&(null!=this.firstName||null!=this.lastName)&&(this._subTitle="",null!=this.firstName&&(this._subTitle=this.firstName),null!=this.lastName&&(""!==this._subTitle&&(this._subTitle+=" "),this._subTitle+=this.lastName)),this._subTitle}},{key:"fullName",get:function(){if(null!=this.title||null!=this.firstName||null!=this.middleName||null!=this.lastName){var e="";return null!=this.title&&(e+=this.title+" "),null!=this.firstName&&(e+=this.firstName+" "),null!=this.middleName&&(e+=this.middleName+" "),null!=this.lastName&&(e+=this.lastName),e.trim()}return null}},{key:"fullAddress",get:function(){var e=this.address1;return!J.isNullOrWhitespace(this.address2)&&(!J.isNullOrWhitespace(e)&&(e+=", "),e+=this.address2),!J.isNullOrWhitespace(this.address3)&&(!J.isNullOrWhitespace(e)&&(e+=", "),e+=this.address3),e}},{key:"fullAddressPart2",get:function(){if(null==this.city&&null==this.state&&null==this.postalCode)return null;var e=this.city||"-",t=this.state,n=this.postalCode||"-",r=e;return!J.isNullOrWhitespace(t)&&(r+=", "+t),r+=", "+n}}]),e}(),tT=function(){function e(t){if((0,T.Z)(this,e),this.username=null,this.password=null,this.passwordRevisionDate=null,this.totp=null,this.uris=null,!!t)this.passwordRevisionDate=t.passwordRevisionDate}return(0,j.Z)(e,[{key:"uri",get:function(){return this.hasUris?this.uris[0].uri:null}},{key:"maskedPassword",get:function(){return null!=this.password?"••••••••":null}},{key:"subTitle",get:function(){return this.username}},{key:"canLaunch",get:function(){return this.hasUris&&this.uris.some(function(e){return e.canLaunch})}},{key:"launchUri",get:function(){if(this.hasUris){var e=this.uris.find(function(e){return e.canLaunch});if(null!=e)return e.launchUri}return null}},{key:"hasUris",get:function(){return null!=this.uris&&this.uris.length>0}}]),e}(),tj=function(){function e(t){if((0,T.Z)(this,e),this.type=null,!!t)this.type=t.type}return(0,j.Z)(e,[{key:"subTitle",get:function(){return null}}]),e}(),tN=function(){function e(t){if((0,T.Z)(this,e),this.id=null,this.organizationId=null,this.folderId=null,this.name=null,this.notes=null,this.type=null,this.favorite=!1,this.organizationUseTotp=!1,this.edit=!1,this.viewPassword=!0,this.login=new tT,this.identity=new tM,this.card=new tR,this.secureNote=new tj,this.attachments=null,this.fields=null,this.passwordHistory=null,this.collectionIds=null,this.revisionDate=null,this.deletedDate=null,!!t)this.id=t.id,this.organizationId=t.organizationId,this.folderId=t.folderId,this.favorite=t.favorite,this.organizationUseTotp=t.organizationUseTotp,this.edit=t.edit,this.viewPassword=t.viewPassword,this.type=t.type,this.localData=t.localData,this.collectionIds=t.collectionIds,this.revisionDate=t.revisionDate,this.deletedDate=t.deletedDate}return(0,j.Z)(e,[{key:"subTitle",get:function(){switch(this.type){case b.Login:return this.login.subTitle;case b.SecureNote:return this.secureNote.subTitle;case b.Card:return this.card.subTitle;case b.Identity:return this.identity.subTitle}return null}},{key:"hasPasswordHistory",get:function(){return this.passwordHistory&&this.passwordHistory.length>0}},{key:"hasAttachments",get:function(){return this.attachments&&this.attachments.length>0}},{key:"hasOldAttachments",get:function(){if(this.hasAttachments){for(var e=0;e<this.attachments.length;e++)if(null==this.attachments[e].key)return!0}return!1}},{key:"hasFields",get:function(){return this.fields&&this.fields.length>0}},{key:"passwordRevisionDisplayDate",get:function(){return this.type!==b.Login||null==this.login?null:null==this.login.password||""===this.login.password?null:this.login.passwordRevisionDate}},{key:"isDeleted",get:function(){return null!=this.deletedDate}}]),e}(),tI=function(){function e(t){if((0,T.Z)(this,e),this.name=null,this.value=null,this.type=null,this.newField=!1,this.showValue=!1,!!t)this.type=t.type}return(0,j.Z)(e,[{key:"maskedValue",get:function(){return null!=this.value?"••••••••":null}}]),e}(),tL=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return((0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.type=e.type,t.buildDomainModel((0,tC.Z)(t),e,{name:null,value:null},n,[]),t)}return(0,j.Z)(a,[{key:"decrypt",value:function(e){return this.decryptObj(new tI(this),{name:null,value:null},e)}},{key:"toFieldData",value:function(){var e=new ty;return this.buildDataModel(this,e,{name:null,value:null,type:null},["type"]),e}}]),a}(tP),tz=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return((0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.buildDomainModel((0,tC.Z)(t),e,{title:null,firstName:null,middleName:null,lastName:null,address1:null,address2:null,address3:null,city:null,state:null,postalCode:null,country:null,company:null,email:null,phone:null,ssn:null,username:null,passportNumber:null,licenseNumber:null},n,[]),t)}return(0,j.Z)(a,[{key:"decrypt",value:function(e){return this.decryptObj(new tM(this),{title:null,firstName:null,middleName:null,lastName:null,address1:null,address2:null,address3:null,city:null,state:null,postalCode:null,country:null,company:null,email:null,phone:null,ssn:null,username:null,passportNumber:null,licenseNumber:null},e)}},{key:"toIdentityData",value:function(){var e=new tg;return this.buildDataModel(this,e,{title:null,firstName:null,middleName:null,lastName:null,address1:null,address2:null,address3:null,city:null,state:null,postalCode:null,country:null,company:null,email:null,phone:null,ssn:null,username:null,passportNumber:null,licenseNumber:null}),e}}]),a}(tP),tZ=["https://","http://","ssh://","ftp://","sftp://","irc://","vnc://","rdp://","ms-rd:","chrome://","iosapp://","androidapp://"],tB=function(){function e(t){if((0,T.Z)(this,e),this.match=null,this._uri=null,this._domain=null,this._hostname=null,this._host=null,this._canLaunch=null,!!t)this.match=t.match}return(0,j.Z)(e,[{key:"uri",get:function(){return this._uri},set:function(e){this._uri=e,this._domain=null,this._canLaunch=null}},{key:"domain",get:function(){return null==this._domain&&null!=this.uri&&(this._domain=J.getDomain(this.uri),""===this._domain&&(this._domain=null)),this._domain}},{key:"hostname",get:function(){return this.match===k.RegularExpression?null:(null==this._hostname&&null!=this.uri&&(this._hostname=J.getHostname(this.uri),""===this._hostname&&(this._hostname=null)),this._hostname)}},{key:"host",get:function(){return this.match===k.RegularExpression?null:(null==this._host&&null!=this.uri&&(this._host=J.getHost(this.uri),""===this._host&&(this._host=null)),this._host)}},{key:"hostnameOrUri",get:function(){return null!=this.hostname?this.hostname:this.uri}},{key:"hostOrUri",get:function(){return null!=this.host?this.host:this.uri}},{key:"isWebsite",get:function(){return null!=this.uri&&(0===this.uri.indexOf("http://")||0===this.uri.indexOf("https://")||0>this.uri.indexOf("://")&&J.tldEndingRegex.test(this.uri))}},{key:"canLaunch",get:function(){if(null!=this._canLaunch)return this._canLaunch;if(null!=this.uri&&this.match!==k.RegularExpression){for(var e=this.launchUri,t=0;t<tZ.length;t++)if(0===e.indexOf(tZ[t]))return this._canLaunch=!0,this._canLaunch}return this._canLaunch=!1,this._canLaunch}},{key:"launchUri",get:function(){return 0>this.uri.indexOf("://")&&J.tldEndingRegex.test(this.uri)?"http://"+this.uri:this.uri}}]),e}(),tF=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return((0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.match=e.match,t.buildDomainModel((0,tC.Z)(t),e,{uri:null},n,[]),t)}return(0,j.Z)(a,[{key:"decrypt",value:function(e){return this.decryptObj(new tB(this),{uri:null},e)}},{key:"toLoginUriData",value:function(){var e=new tb;return this.buildDataModel(this,e,{uri:null},["match"]),e}}]),a}(tP),tU=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return((0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.passwordRevisionDate=null!=e.passwordRevisionDate?new Date(e.passwordRevisionDate):null,t.buildDomainModel((0,tC.Z)(t),e,{username:null,password:null,totp:null},n,[]),e.uris&&(t.uris=[],e.uris.forEach(function(e){t.uris.push(new tF(e,n))})),t)}return(0,j.Z)(a,[{key:"decrypt",value:function(e){var t,n,r,a;return t=this,n=void 0,r=void 0,a=I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.decryptObj(new tT(this),{username:null,password:null,totp:null},e);case 2:if(n=t.sent,!(null!=this.uris)){t.next=14;break}n.uris=[],r=0;case 6:if(!(r<this.uris.length)){t.next=14;break}return t.next=9,this.uris[r].decrypt(e);case 9:a=t.sent,n.uris.push(a);case 11:r++,t.next=6;break;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}},t,this)}),new(r||(r=Promise))(function(e,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(o,s)}c((a=a.apply(t,n||[])).next())})}},{key:"toLoginData",value:function(){var e=new tw;return e.passwordRevisionDate=null!=this.passwordRevisionDate?this.passwordRevisionDate.toISOString():null,this.buildDataModel(this,e,{username:null,password:null,totp:null}),null!=this.uris&&this.uris.length>0&&(e.uris=[],this.uris.forEach(function(t){e.uris.push(t.toLoginUriData())})),e}}]),a}(tP),tV=(0,j.Z)(function e(t){if((0,T.Z)(this,e),this.password=null,this.lastUsedDate=null,!!t)this.lastUsedDate=t.lastUsedDate}),tH=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return((0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.buildDomainModel((0,tC.Z)(t),e,{password:null},n),t.lastUsedDate=new Date(e.lastUsedDate),t)}return(0,j.Z)(a,[{key:"decrypt",value:function(e){return this.decryptObj(new tV(this),{password:null},e)}},{key:"toPasswordHistoryData",value:function(){var e=new tk;return e.lastUsedDate=this.lastUsedDate.toISOString(),this.buildDataModel(this,e,{password:null}),e}}]),a}(tP),tW=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(arguments.length>1&&void 0!==arguments[1]&&arguments[1],(0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.type=e.type,t)}return(0,j.Z)(a,[{key:"decrypt",value:function(e){return Promise.resolve(new tj(this))}},{key:"toSecureNoteData",value:function(){var e=new tx;return e.type=this.type,e}}]),a}(tP),tq=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if((0,T.Z)(this,a),t=r.call(this),null==e)return(0,X.Z)(t);switch(t.buildDomainModel((0,tC.Z)(t),e,{id:null,userId:null,organizationId:null,folderId:null,name:null,notes:null},n,["id","userId","organizationId","folderId"]),t.type=e.type,t.favorite=e.favorite,t.organizationUseTotp=e.organizationUseTotp,t.edit=e.edit,null!=e.viewPassword?t.viewPassword=e.viewPassword:t.viewPassword=!0,t.revisionDate=null!=e.revisionDate?new Date(e.revisionDate):null,t.collectionIds=e.collectionIds,t.localData=i,t.deletedDate=null!=e.deletedDate?new Date(e.deletedDate):null,t.type){case b.Login:t.login=new tU(e.login,n);break;case b.SecureNote:t.secureNote=new tW(e.secureNote,n);break;case b.Card:t.card=new tD(e.card,n);break;case b.Identity:t.identity=new tz(e.identity,n)}return null!=e.attachments?t.attachments=e.attachments.map(function(e){return new tA(e,n)}):t.attachments=null,null!=e.fields?t.fields=e.fields.map(function(e){return new tL(e,n)}):t.fields=null,null!=e.passwordHistory?t.passwordHistory=e.passwordHistory.map(function(e){return new tH(e,n)}):t.passwordHistory=null,t}return(0,j.Z)(a,[{key:"decrypt",value:function(){var e,t,n,r;return e=this,t=void 0,n=void 0,r=I().mark(function e(){var t,n,r,a,i;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new tN(this),e.next=3,this.decryptObj(t,{name:null,notes:null},this.organizationId);case 3:e.t0=this.type,e.next=e.t0===b.Login?6:e.t0===b.SecureNote?10:e.t0===b.Card?14:e.t0===b.Identity?18:22;break;case 6:return e.next=8,this.login.decrypt(this.organizationId);case 8:return t.login=e.sent,e.abrupt("break",23);case 10:return e.next=12,this.secureNote.decrypt(this.organizationId);case 12:return t.secureNote=e.sent,e.abrupt("break",23);case 14:return e.next=16,this.card.decrypt(this.organizationId);case 16:return t.card=e.sent,e.abrupt("break",23);case 18:return e.next=20,this.identity.decrypt(this.organizationId);case 20:return t.identity=e.sent,e.abrupt("break",23);case 22:return e.abrupt("break",23);case 23:if(n=this.organizationId,!(null!=this.attachments&&this.attachments.length>0)){e.next=29;break}return r=[],e.next=28,this.attachments.reduce(function(e,t){return e.then(function(){return t.decrypt(n)}).then(function(e){r.push(e)})},Promise.resolve());case 28:t.attachments=r;case 29:if(!(null!=this.fields&&this.fields.length>0)){e.next=34;break}return a=[],e.next=33,this.fields.reduce(function(e,t){return e.then(function(){return t.decrypt(n)}).then(function(e){a.push(e)})},Promise.resolve());case 33:t.fields=a;case 34:if(!(null!=this.passwordHistory&&this.passwordHistory.length>0)){e.next=39;break}return i=[],e.next=38,this.passwordHistory.reduce(function(e,t){return e.then(function(){return t.decrypt(n)}).then(function(e){i.push(e)})},Promise.resolve());case 38:t.passwordHistory=i;case 39:return e.abrupt("return",t);case 40:case"end":return e.stop()}},e,this)}),new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})}},{key:"toCipherData",value:function(e){var t=new tO;switch(t.id=this.id,t.organizationId=this.organizationId,t.folderId=this.folderId,t.userId=null!=this.organizationId?e:null,t.edit=this.edit,t.viewPassword=this.viewPassword,t.organizationUseTotp=this.organizationUseTotp,t.favorite=this.favorite,t.revisionDate=null!=this.revisionDate?this.revisionDate.toISOString():null,t.type=this.type,t.collectionIds=this.collectionIds,t.deletedDate=null!=this.deletedDate?this.deletedDate.toISOString():null,this.buildDataModel(this,t,{name:null,notes:null}),t.type){case b.Login:t.login=this.login.toLoginData();break;case b.SecureNote:t.secureNote=this.secureNote.toSecureNoteData();break;case b.Card:t.card=this.card.toCardData();break;case b.Identity:t.identity=this.identity.toIdentityData()}return null!=this.fields&&(t.fields=this.fields.map(function(e){return e.toFieldData()})),null!=this.attachments&&(t.attachments=this.attachments.map(function(e){return e.toAttachmentData()})),null!=this.passwordHistory&&(t.passwordHistory=this.passwordHistory.map(function(e){return e.toPasswordHistoryData()})),t}}]),a}(tP),tG=(0,j.Z)(function e(t,n){(0,T.Z)(this,e),this.ids=null==t?[]:t,this.organizationId=n}),tK=(0,j.Z)(function e(t,n){(0,T.Z)(this,e),this.ids=null==t?[]:t,this.folderId=n}),tQ=(0,j.Z)(function e(t){(0,T.Z)(this,e),this.ids=null==t?[]:t}),tY=(0,j.Z)(function e(){(0,T.Z)(this,e)}),tJ=(0,j.Z)(function e(t){var n=this;switch((0,T.Z)(this,e),this.type=t.type,this.folderId=t.folderId,this.organizationId=t.organizationId,this.name=t.name?t.name.encryptedString:null,this.notes=t.notes?t.notes.encryptedString:null,this.favorite=t.favorite,this.lastKnownRevisionDate=t.revisionDate,this.type){case b.Login:this.login=new ev,this.login.uris=null,this.login.username=t.login.username?t.login.username.encryptedString:null,this.login.password=t.login.password?t.login.password.encryptedString:null,this.login.passwordRevisionDate=null!=t.login.passwordRevisionDate?t.login.passwordRevisionDate.toISOString():null,this.login.totp=t.login.totp?t.login.totp.encryptedString:null,null!=t.login.uris&&(this.login.uris=t.login.uris.map(function(e){var t=new eh;return t.uri=null!=e.uri?e.uri.encryptedString:null,t.match=null!=e.match?e.match:null,t}));break;case b.SecureNote:this.secureNote=new em,this.secureNote.type=t.secureNote.type;break;case b.Card:this.card=new ed,this.card.cardholderName=null!=t.card.cardholderName?t.card.cardholderName.encryptedString:null,this.card.brand=null!=t.card.brand?t.card.brand.encryptedString:null,this.card.number=null!=t.card.number?t.card.number.encryptedString:null,this.card.expMonth=null!=t.card.expMonth?t.card.expMonth.encryptedString:null,this.card.expYear=null!=t.card.expYear?t.card.expYear.encryptedString:null,this.card.code=null!=t.card.code?t.card.code.encryptedString:null;break;case b.Identity:this.identity=new ep,this.identity.title=null!=t.identity.title?t.identity.title.encryptedString:null,this.identity.firstName=null!=t.identity.firstName?t.identity.firstName.encryptedString:null,this.identity.middleName=null!=t.identity.middleName?t.identity.middleName.encryptedString:null,this.identity.lastName=null!=t.identity.lastName?t.identity.lastName.encryptedString:null,this.identity.address1=null!=t.identity.address1?t.identity.address1.encryptedString:null,this.identity.address2=null!=t.identity.address2?t.identity.address2.encryptedString:null,this.identity.address3=null!=t.identity.address3?t.identity.address3.encryptedString:null,this.identity.city=null!=t.identity.city?t.identity.city.encryptedString:null,this.identity.state=null!=t.identity.state?t.identity.state.encryptedString:null,this.identity.postalCode=null!=t.identity.postalCode?t.identity.postalCode.encryptedString:null,this.identity.country=null!=t.identity.country?t.identity.country.encryptedString:null,this.identity.company=null!=t.identity.company?t.identity.company.encryptedString:null,this.identity.email=null!=t.identity.email?t.identity.email.encryptedString:null,this.identity.phone=null!=t.identity.phone?t.identity.phone.encryptedString:null,this.identity.ssn=null!=t.identity.ssn?t.identity.ssn.encryptedString:null,this.identity.username=null!=t.identity.username?t.identity.username.encryptedString:null,this.identity.passportNumber=null!=t.identity.passportNumber?t.identity.passportNumber.encryptedString:null,this.identity.licenseNumber=null!=t.identity.licenseNumber?t.identity.licenseNumber.encryptedString:null}null!=t.fields&&(this.fields=t.fields.map(function(e){var t=new ef;return t.type=e.type,t.name=e.name?e.name.encryptedString:null,t.value=e.value?e.value.encryptedString:null,t})),null!=t.passwordHistory&&(this.passwordHistory=[],t.passwordHistory.forEach(function(e){n.passwordHistory.push({lastUsedDate:e.lastUsedDate,password:e.password?e.password.encryptedString:null})})),null!=t.attachments&&(this.attachments={},this.attachments2={},t.attachments.forEach(function(e){var t=e.fileName?e.fileName.encryptedString:null;n.attachments[e.id]=t;var r=new tY;r.fileName=t,null!=e.key&&(r.key=e.key.encryptedString),n.attachments2[e.id]=r}))}),t$=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return(0,T.Z)(this,a),(t=r.call(this,e)).id=e.id,t}return(0,j.Z)(a)}(tJ),tX=(0,j.Z)(function e(t,n){var r=this;(0,T.Z)(this,e),null!=t&&(this.ciphers=[],t.forEach(function(e){r.ciphers.push(new t$(e))})),this.collectionIds=n}),t0=(0,j.Z)(function e(t){(0,T.Z)(this,e),this.collectionIds=null==t?[]:t}),t1=(0,j.Z)(function e(t){(0,T.Z)(this,e),this.cipher=new tJ(t),this.collectionIds=t.collectionIds}),t2=(0,j.Z)(function e(t){(0,T.Z)(this,e),this.cipher=new tJ(t),this.collectionIds=t.collectionIds}),t4=function(){function e(t){(0,T.Z)(this,e),this.comparator=t,this.sortedCiphersByUrl=new Map,this.timeouts=new Map}return(0,j.Z)(e,[{key:"isCached",value:function(e){return this.sortedCiphersByUrl.has(e)}},{key:"addCiphers",value:function(e,t){t.sort(this.comparator),this.sortedCiphersByUrl.set(e,new t3(t)),this.resetTimer(e)}},{key:"getLastUsed",value:function(e){return this.resetTimer(e),this.isCached(e)?this.sortedCiphersByUrl.get(e).getLastUsed():null}},{key:"getLastLaunched",value:function(e){return this.isCached(e)?this.sortedCiphersByUrl.get(e).getLastLaunched():null}},{key:"getNext",value:function(e){return this.resetTimer(e),this.isCached(e)?this.sortedCiphersByUrl.get(e).getNext():null}},{key:"updateLastUsedIndex",value:function(e){this.isCached(e)&&this.sortedCiphersByUrl.get(e).updateLastUsedIndex()}},{key:"clear",value:function(){this.sortedCiphersByUrl.clear(),this.timeouts.clear()}},{key:"resetTimer",value:function(e){var t=this;clearTimeout(this.timeouts.get(e)),this.timeouts.set(e,setTimeout(function(){t.sortedCiphersByUrl.delete(e),t.timeouts.delete(e)},3e3))}}]),e}(),t3=function(){function e(t){(0,T.Z)(this,e),this.ciphers=t,this.lastUsedIndex=-1}return(0,j.Z)(e,[{key:"getLastUsed",value:function(){return this.lastUsedIndex=Math.max(this.lastUsedIndex,0),this.ciphers[this.lastUsedIndex]}},{key:"getLastLaunched",value:function(){return this.ciphers.filter(function(e){var t;return null===(t=e.localData)||void 0===t?void 0:t.lastLaunched}).sort(function(e,t){return t.localData.lastLaunched.valueOf()-e.localData.lastLaunched.valueOf()})[0]}},{key:"getNextIndex",value:function(){return(this.lastUsedIndex+1)%this.ciphers.length}},{key:"getNext",value:function(){return this.ciphers[this.getNextIndex()]}},{key:"updateLastUsedIndex",value:function(){this.lastUsedIndex=this.getNextIndex()}}]),e}(),t5=(0,j.Z)(function e(){(0,T.Z)(this,e),this.environmentUrlsKey=e.environmentUrlsKey,this.disableGaKey=e.disableGaKey,this.disableAddLoginNotificationKey=e.disableAddLoginNotificationKey,this.disableContextMenuItemKey=e.disableContextMenuItemKey,this.disableFaviconKey=e.disableFaviconKey,this.disableAutoTotpCopyKey=e.disableAutoTotpCopyKey,this.enableAutoFillOnPageLoadKey=e.enableAutoFillOnPageLoadKey,this.vaultTimeoutKey=e.vaultTimeoutKey,this.vaultTimeoutActionKey=e.vaultTimeoutActionKey,this.lastActiveKey=e.lastActiveKey,this.neverDomainsKey=e.neverDomainsKey,this.installedVersionKey=e.installedVersionKey,this.localeKey=e.localeKey,this.themeKey=e.themeKey,this.collapsedGroupingsKey=e.collapsedGroupingsKey,this.autoConfirmFingerprints=e.autoConfirmFingerprints,this.dontShowCardsCurrentTab=e.dontShowCardsCurrentTab,this.dontShowIdentitiesCurrentTab=e.dontShowIdentitiesCurrentTab,this.defaultUriMatch=e.defaultUriMatch,this.pinProtectedKey=e.pinProtectedKey,this.protectedPin=e.protectedPin,this.clearClipboardKey=e.clearClipboardKey,this.eventCollectionKey=e.eventCollectionKey,this.ssoCodeVerifierKey=e.ssoCodeVerifierKey,this.ssoStateKey=e.ssoStateKey,this.biometricUnlockKey=e.biometricUnlockKey,this.biometricText=e.biometricText,this.biometricAwaitingAcceptance=e.biometricAwaitingAcceptance});function t6(e){return function(t,n,r){var a=r.value,i=new Map,o=function(e){var t=i.get(e);return null!=t?t:(t=new Map,i.set(e,t),t)};return{value:function(){for(var t=this,n=o(this),r=arguments.length,s=Array(r),c=0;c<r;c++)s[c]=arguments[c];var u=e(s),l=n.get(u);if(null!=l)return l;var d=function(){n.delete(u),0===n.size&&i.delete(t)};return l=a.apply(this,s).then(function(e){return d(),e}).catch(function(e){throw d(),e}),n.set(u,l),l}}}}t5.environmentUrlsKey="environmentUrls",t5.disableGaKey="disableGa",t5.disableAddLoginNotificationKey="disableAddLoginNotification",t5.disableChangedPasswordNotificationKey="disableChangedPasswordNotification",t5.disableContextMenuItemKey="disableContextMenuItem",t5.disableFaviconKey="disableFavicon",t5.disableAutoTotpCopyKey="disableAutoTotpCopy",t5.enableAutoFillOnPageLoadKey="enableAutoFillOnPageLoad",t5.vaultTimeoutKey="lockOption",t5.vaultTimeoutActionKey="vaultTimeoutAction",t5.lastActiveKey="lastActive",t5.neverDomainsKey="neverDomains",t5.installedVersionKey="installedVersion",t5.localeKey="locale",t5.themeKey="theme",t5.collapsedGroupingsKey="collapsedGroupings",t5.autoConfirmFingerprints="autoConfirmFingerprints",t5.dontShowCardsCurrentTab="dontShowCardsCurrentTab",t5.dontShowIdentitiesCurrentTab="dontShowIdentitiesCurrentTab",t5.defaultUriMatch="defaultUriMatch",t5.pinProtectedKey="pinProtectedKey",t5.protectedPin="protectedPin",t5.clearClipboardKey="clearClipboardKey",t5.eventCollectionKey="eventCollection",t5.ssoCodeVerifierKey="ssoCodeVerifier",t5.ssoStateKey="ssoState",t5.biometricUnlockKey="biometric",t5.biometricText="biometricText",t5.biometricAwaitingAcceptance="biometricAwaitingAcceptance";var t9=n(48764).Buffer;function t8(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var t7=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ne=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},nt={ciphersPrefix:"ciphers_",localData:"sitesLocalData",neverDomains:"neverDomains"},nn=new Map([["google.com",new Set(["script.google.com"])]]),nr=function(){function e(t,n,r,a,i,o,s){(0,T.Z)(this,e),this.cryptoService=t,this.userService=n,this.settingsService=r,this.apiService=a,this.storageService=i,this.i18nService=o,this.searchService=s,this.sortedCiphersCache=new t4(this.sortCiphersByLastUsed)}return(0,j.Z)(e,[{key:"decryptedCipherCache",get:function(){return this._decryptedCipherCache},set:function(e){this._decryptedCipherCache=e,null!=this.searchService&&(null==e?this.searchService().clearIndex():this.searchService().indexCiphers())}},{key:"clearCache",value:function(){this.decryptedCipherCache=null,this.sortedCiphersCache.clear()}},{key:"encrypt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ne(this,void 0,void 0,I().mark(function r(){var a,i,o,s,c;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(null!=e.id)){r.next=13;break}if(null!=n){r.next=5;break}return r.next=4,this.get(e.id);case 4:n=r.sent;case 5:if(!(null!=n)){r.next=12;break}return r.next=8,n.decrypt();case 8:a=r.sent,e.passwordHistory=a.passwordHistory||[],e.type===b.Login&&a.type===b.Login&&(null!=a.login.password&&""!==a.login.password&&a.login.password!==e.login.password?((i=new tV).password=a.login.password,i.lastUsedDate=e.login.passwordRevisionDate=new Date,e.passwordHistory.splice(0,0,i)):e.login.passwordRevisionDate=a.login.passwordRevisionDate),a.hasFields&&(o=a.fields.filter(function(e){return e.type===w.Hidden&&null!=e.name&&""!==e.name&&null!=e.value&&""!==e.value}),s=null==e.fields?[]:e.fields.filter(function(e){return e.type===w.Hidden&&null!=e.name&&""!==e.name}),o.forEach(function(t){var n=s.find(function(e){return e.name===t.name});if(null==n||n.value!==t.value){var r=new tV;r.password=t.name+": "+t.value,r.lastUsedDate=new Date,e.passwordHistory.splice(0,0,r)}}));case 12:null!=e.passwordHistory&&0===e.passwordHistory.length?e.passwordHistory=null:null!=e.passwordHistory&&e.passwordHistory.length>5&&(e.passwordHistory=e.passwordHistory.slice(0,5));case 13:if((c=new tq).id=e.id,c.folderId=e.folderId,c.favorite=e.favorite,c.organizationId=e.organizationId,c.type=e.type,c.collectionIds=e.collectionIds,c.revisionDate=e.revisionDate,!(null==t&&null!=c.organizationId)){r.next=27;break}return r.next=24,this.cryptoService.getOrgKey(c.organizationId);case 24:if(null!=(t=r.sent)){r.next=27;break}throw Error("Cannot encrypt cipher for organization. No key.");case 27:return r.next=29,Promise.all([this.encryptObjProperty(e,c,{name:null,notes:null},t),this.encryptCipherData(c,e,t),this.encryptFields(e.fields,t).then(function(e){c.fields=e}),this.encryptPasswordHistories(e.passwordHistory,t).then(function(e){c.passwordHistory=e}),this.encryptAttachments(e.attachments,t).then(function(e){c.attachments=e})]);case 29:return r.abrupt("return",c);case 30:case"end":return r.stop()}},r,this)}))}},{key:"encryptAttachments",value:function(e,t){return ne(this,void 0,void 0,I().mark(function n(){var r,a,i=this;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null==e||0===e.length)){n.next=2;break}return n.abrupt("return",null);case 2:return r=[],a=[],e.forEach(function(e){return ne(i,void 0,void 0,I().mark(function n(){var i,o,s=this;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(i=new tA).id=e.id,i.size=e.size,i.sizeName=e.sizeName,i.url=e.url,o=this.encryptObjProperty(e,i,{fileName:null},t).then(function(){return ne(s,void 0,void 0,I().mark(function n(){return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null!=e.key)){n.next=4;break}return n.next=3,this.cryptoService.encrypt(e.key.key,t);case 3:i.key=n.sent;case 4:a.push(i);case 5:case"end":return n.stop()}},n,this)}))}),r.push(o);case 7:case"end":return n.stop()}},n,this)}))}),n.next=7,Promise.all(r);case 7:return n.abrupt("return",a);case 8:case"end":return n.stop()}},n)}))}},{key:"encryptFields",value:function(e,t){return ne(this,void 0,void 0,I().mark(function n(){var r,a;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!e||!e.length)){n.next=2;break}return n.abrupt("return",null);case 2:return r=this,a=[],n.next=6,e.reduce(function(e,n){return e.then(function(){return r.encryptField(n,t)}).then(function(e){a.push(e)})},Promise.resolve());case 6:return n.abrupt("return",a);case 7:case"end":return n.stop()}},n,this)}))}},{key:"encryptField",value:function(e,t){return ne(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new tL).type=e.type,e.type===w.Boolean&&"true"!==e.value&&(e.value="false"),n.next=5,this.encryptObjProperty(e,r,{name:null,value:null},t);case 5:return n.abrupt("return",r);case 6:case"end":return n.stop()}},n,this)}))}},{key:"encryptPasswordHistories",value:function(e,t){return ne(this,void 0,void 0,I().mark(function n(){var r,a;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!e||!e.length)){n.next=2;break}return n.abrupt("return",null);case 2:return r=this,a=[],n.next=6,e.reduce(function(e,n){return e.then(function(){return r.encryptPasswordHistory(n,t)}).then(function(e){a.push(e)})},Promise.resolve());case 6:return n.abrupt("return",a);case 7:case"end":return n.stop()}},n,this)}))}},{key:"encryptPasswordHistory",value:function(e,t){return ne(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new tH).lastUsedDate=e.lastUsedDate,n.next=4,this.encryptObjProperty(e,r,{password:null},t);case 4:return n.abrupt("return",r);case 5:case"end":return n.stop()}},n,this)}))}},{key:"get",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(nt.localData);case 5:return r=t.sent,t.next=8,this.storageService.get(nt.ciphersPrefix+n);case 8:if(!(null==(a=t.sent)||!a.hasOwnProperty(e))){t.next=11;break}return t.abrupt("return",null);case 11:return t.abrupt("return",new tq(a[e],!1,r?r[e]:null));case 12:case"end":return t.stop()}},t,this)}))}},{key:"getAll",value:function(){return ne(this,void 0,void 0,I().mark(function e(){var t,n,r,a,i;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.getUserId();case 2:return t=e.sent,e.next=5,this.storageService.get(nt.localData);case 5:return n=e.sent,e.next=8,this.storageService.get(nt.ciphersPrefix+t);case 8:for(i in r=e.sent,a=[],r)r.hasOwnProperty(i)&&a.push(new tq(r[i],!1,n?n[i]:null));return e.abrupt("return",a);case 12:case"end":return e.stop()}},e,this)}))}},{key:"getAllDecrypted",value:function(){return ne(this,void 0,void 0,I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=this.decryptedCipherCache)){e.next=2;break}return e.abrupt("return",this.decryptedCipherCache);case 2:return t=[],e.next=5,this.cryptoService.hasKey();case 5:if(e.sent){e.next=8;break}throw Error("No key.");case 8:return n=[],e.next=11,this.getAll();case 11:return e.sent.forEach(function(e){n.push(e.decrypt().then(function(e){return t.push(e)}))}),e.next=15,Promise.all(n);case 15:return t.sort(this.getLocaleSortingFunction()),this.decryptedCipherCache=t,e.abrupt("return",this.decryptedCipherCache);case 18:case"end":return e.stop()}},e,this)}))}},{key:"getAllDecryptedForGrouping",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return ne(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getAllDecrypted();case 2:return r=n.sent,n.abrupt("return",r.filter(function(n){return!n.isDeleted&&(!!t&&n.folderId===e||!!(!t&&null!=n.collectionIds&&n.collectionIds.indexOf(e)>-1)||!1)}));case 4:case"end":return n.stop()}},n,this)}))}},{key:"getAllDecryptedForUrl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ne(this,void 0,void 0,I().mark(function r(){var a,i,o,s,c;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(null==e&&null==t)){r.next=2;break}return r.abrupt("return",Promise.resolve([]));case 2:return i=null==(a=J.getDomain(e))?Promise.resolve([]):this.settingsService.getEquivalentDomains().then(function(e){var t=[];return e.forEach(function(e){e.length&&e.indexOf(a)>=0&&(t=t.concat(e))}),!t.length&&t.push(a),t}),r.next=6,Promise.all([i,this.getAllDecrypted()]);case 6:if(s=(o=r.sent)[0],c=o[1],null!=n){r.next=14;break}return r.next=12,this.storageService.get(t5.defaultUriMatch);case 12:null==(n=r.sent)&&(n=k.Domain);case 14:return r.abrupt("return",c.filter(function(r){if(null!=r.deletedDate)return!1;if(null!=t&&t.indexOf(r.type)>-1)return!0;if(null!=e&&r.type===b.Login&&null!=r.login.uris)for(var i=0;i<r.login.uris.length;i++){var o=r.login.uris[i];if(null!=o.uri)switch(null==o.match?n:o.match){case k.Domain:if(null!=a&&null!=o.domain&&s.indexOf(o.domain)>-1){if(!nn.has(o.domain))return!0;var c=J.getHost(e);if(!nn.get(o.domain).has(c))return!0}break;case k.Host:var u=J.getHost(e);if(null!=u&&u===J.getHost(o.uri))return!0;break;case k.Exact:if(e===o.uri)return!0;break;case k.StartsWith:if(e.startsWith(o.uri))return!0;break;case k.RegularExpression:try{if(RegExp(o.uri,"i").test(e))return!0}catch(e){}case k.Never:}}return!1}));case 15:case"end":return r.stop()}},r,this)}))}},{key:"getAllFromApiForOrganization",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiService.getCiphersOrganization(e);case 2:if(!(null!=(n=t.sent)&&null!=n.data&&n.data.length)){t.next=13;break}return r=[],a=[],n.data.forEach(function(e){var t=new tq(new tO(e));a.push(t.decrypt().then(function(e){return r.push(e)}))}),t.next=9,Promise.all(a);case 9:return r.sort(this.getLocaleSortingFunction()),t.abrupt("return",r);case 13:return t.abrupt("return",[]);case 14:case"end":return t.stop()}},t,this)}))}},{key:"getLastUsedForUrl",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getCipherForUrl(e,!0,!1));case 1:case"end":return t.stop()}},t,this)}))}},{key:"getLastLaunchedForUrl",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getCipherForUrl(e,!1,!0));case 1:case"end":return t.stop()}},t,this)}))}},{key:"getNextCipherForUrl",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getCipherForUrl(e,!1,!1));case 1:case"end":return t.stop()}},t,this)}))}},{key:"updateLastUsedIndexForUrl",value:function(e){this.sortedCiphersCache.updateLastUsedIndex(e)}},{key:"updateLastUsedDate",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.get(nt.localData);case 2:return!(n=t.sent)&&(n={}),n[e]?n[e].lastUsedDate=new Date().getTime():n[e]={lastUsedDate:new Date().getTime()},t.next=7,this.storageService.save(nt.localData,n);case 7:if(null!=this.decryptedCipherCache){t.next=9;break}return t.abrupt("return");case 9:r=0;case 10:if(!(r<this.decryptedCipherCache.length)){t.next=18;break}if((a=this.decryptedCipherCache[r]).id!==e){t.next=15;break}return a.localData=n[e],t.abrupt("break",18);case 15:r++,t.next=10;break;case 18:case"end":return t.stop()}},t,this)}))}},{key:"updateLastLaunchedDate",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.get(nt.localData);case 2:return!(n=t.sent)&&(n={}),n[e]?n[e].lastLaunched=new Date().getTime():n[e]={lastUsedDate:new Date().getTime()},t.next=7,this.storageService.save(nt.localData,n);case 7:if(null!=this.decryptedCipherCache){t.next=9;break}return t.abrupt("return");case 9:r=0;case 10:if(!(r<this.decryptedCipherCache.length)){t.next=18;break}if((a=this.decryptedCipherCache[r]).id!==e){t.next=15;break}return a.localData=n[e],t.abrupt("break",18);case 15:r++,t.next=10;break;case 18:case"end":return t.stop()}},t,this)}))}},{key:"saveNeverDomain",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.storageService.get(nt.neverDomains);case 4:return!(n=t.sent)&&(n={}),n[e]=null,t.next=9,this.storageService.save(nt.neverDomains,n);case 9:case"end":return t.stop()}},t,this)}))}},{key:"saveWithServer",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){var n,r,a,i,o,s;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.id){t.next=15;break}if(!(null!=e.collectionIds)){t.next=8;break}return r=new t1(e),t.next=5,this.apiService.postCipherCreate(r);case 5:n=t.sent,t.next=12;break;case 8:return a=new tJ(e),t.next=11,this.apiService.postCipher(a);case 11:n=t.sent;case 12:e.id=n.id,t.next=19;break;case 15:return i=new tJ(e),t.next=18,this.apiService.putCipher(e.id,i);case 18:n=t.sent;case 19:return t.next=21,this.userService.getUserId();case 21:return o=t.sent,s=new tO(n,o,e.collectionIds),t.next=25,this.upsert(s);case 25:case"end":return t.stop()}},t,this)}))}},{key:"shareWithServer",value:function(e,t,n){return ne(this,void 0,void 0,I().mark(function r(){var a,i,o,s,c,u=this;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=[],null!=e.attachments&&e.attachments.forEach(function(n){null==n.key&&a.push(u.shareAttachmentWithServer(n,e.id,t))}),r.next=4,Promise.all(a);case 4:return e.organizationId=t,e.collectionIds=n,r.next=8,this.encrypt(e);case 8:return i=new t2(r.sent),r.next=12,this.apiService.putShareCipher(e.id,i);case 12:return o=r.sent,r.next=15,this.userService.getUserId();case 15:return s=r.sent,c=new tO(o,s,n),r.next=19,this.upsert(c);case 19:case"end":return r.stop()}},r,this)}))}},{key:"shareManyWithServer",value:function(e,t,n){return ne(this,void 0,void 0,I().mark(function r(){var a,i,o,s,c,u,l;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:a=[],i=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return t8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t8(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(e);try{for(o.s();!(s=o.n()).done;)(c=s.value).organizationId=t,c.collectionIds=n,a.push(this.encrypt(c).then(function(e){i.push(e)}))}catch(e){o.e(e)}finally{o.f()}return r.next=6,Promise.all(a);case 6:return u=new tX(i,n),r.next=9,this.apiService.putShareCiphers(u);case 9:return r.next=11,this.userService.getUserId();case 11:return l=r.sent,r.next=14,this.upsert(i.map(function(e){return e.toCipherData(l)}));case 14:case"end":return r.stop()}},r,this)}))}},{key:"saveAttachmentWithServer",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(a,i){var o=new FileReader;o.readAsArrayBuffer(t),o.onload=function(o){return ne(n,void 0,void 0,I().mark(function n(){return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.saveAttachmentRawWithServer(e,t.name,o.target.result,r);case 3:a(n.sent),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),i(n.t0);case 10:case"end":return n.stop()}},n,this,[[0,7]])}))},o.onerror=function(e){i("Error reading file.")}})}},{key:"saveAttachmentRawWithServer",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ne(this,void 0,void 0,I().mark(function a(){var i,o,s,c,u,l,d,f,p;return I().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.cryptoService.getOrgKey(e.organizationId);case 2:return i=a.sent,a.next=5,this.cryptoService.encrypt(t,i);case 5:return o=a.sent,a.next=8,this.cryptoService.makeEncKey(i);case 8:return s=a.sent,a.next=11,this.cryptoService.encryptToBytes(n,s[0]);case 11:c=a.sent,u=new FormData,a.prev=13,l=new Blob([c],{type:"application/octet-stream"}),u.append("key",s[1].encryptedString),u.append("data",l,o.encryptedString),a.next=27;break;case 19:if(a.prev=19,a.t0=a.catch(13),!(J.isNode&&!J.isBrowser)){a.next=26;break}u.append("key",s[1].encryptedString),u.append("data",t9.from(c),{filepath:o.encryptedString,contentType:"application/octet-stream"}),a.next=27;break;case 26:throw a.t0;case 27:if(a.prev=27,!r){a.next=34;break}return a.next=31,this.apiService.postCipherAttachmentAdmin(e.id,u);case 31:d=a.sent,a.next=37;break;case 34:return a.next=36,this.apiService.postCipherAttachment(e.id,u);case 36:d=a.sent;case 37:a.next=42;break;case 39:throw a.prev=39,a.t1=a.catch(27),Error(a.t1.getSingleMessage());case 42:return a.next=44,this.userService.getUserId();case 44:if(f=a.sent,p=new tO(d,f,e.collectionIds),r){a.next=49;break}return a.next=49,this.upsert(p);case 49:return a.abrupt("return",new tq(p));case 50:case"end":return a.stop()}},a,this,[[13,19],[27,39]])}))}},{key:"saveCollectionsWithServer",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new t0(e.collectionIds),t.next=3,this.apiService.putCipherCollections(e.id,n);case 3:return t.next=5,this.userService.getUserId();case 5:return r=t.sent,a=e.toCipherData(r),t.next=9,this.upsert(a);case 9:case"end":return t.stop()}},t,this)}))}},{key:"upsert",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(nt.ciphersPrefix+n);case 5:return null==(r=t.sent)&&(r={}),e instanceof tO?r[(a=e).id]=a:e.forEach(function(e){r[e.id]=e}),t.next=10,this.storageService.save(nt.ciphersPrefix+n,r);case 10:this.decryptedCipherCache=null;case 11:case"end":return t.stop()}},t,this)}))}},{key:"replace",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.save(nt.ciphersPrefix+n,e);case 5:this.decryptedCipherCache=null;case 6:case"end":return t.stop()}},t,this)}))}},{key:"clear",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.remove(nt.ciphersPrefix+e);case 2:this.clearCache();case 3:case"end":return t.stop()}},t,this)}))}},{key:"moveManyWithServer",value:function(e,t){return ne(this,void 0,void 0,I().mark(function n(){var r,a;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.apiService.putMoveCiphers(new tK(e,t));case 2:return n.next=4,this.userService.getUserId();case 4:return r=n.sent,n.next=7,this.storageService.get(nt.ciphersPrefix+r);case 7:return null==(a=n.sent)&&(a={}),e.forEach(function(e){a.hasOwnProperty(e)&&(a[e].folderId=t)}),n.next=12,this.storageService.save(nt.ciphersPrefix+r,a);case 12:this.decryptedCipherCache=null;case 13:case"end":return n.stop()}},n,this)}))}},{key:"delete",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(nt.ciphersPrefix+n);case 5:if(null!=(r=t.sent)){t.next=8;break}return t.abrupt("return");case 8:if("string"!=typeof e){t.next=14;break}if(null!=r[e]){t.next=11;break}return t.abrupt("return");case 11:delete r[e],t.next=15;break;case 14:e.forEach(function(e){delete r[e]});case 15:return t.next=17,this.storageService.save(nt.ciphersPrefix+n,r);case 17:this.decryptedCipherCache=null;case 18:case"end":return t.stop()}},t,this)}))}},{key:"deleteWithServer",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiService.deleteCipher(e);case 2:return t.next=4,this.delete(e);case 4:case"end":return t.stop()}},t,this)}))}},{key:"deleteManyWithServer",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiService.deleteManyCiphers(new tG(e));case 2:return t.next=4,this.delete(e);case 4:case"end":return t.stop()}},t,this)}))}},{key:"deleteAttachment",value:function(e,t){return ne(this,void 0,void 0,I().mark(function n(){var r,a,i;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.userService.getUserId();case 2:return r=n.sent,n.next=5,this.storageService.get(nt.ciphersPrefix+r);case 5:if(!(null==(a=n.sent)||!a.hasOwnProperty(e)||null==a[e].attachments)){n.next=8;break}return n.abrupt("return");case 8:for(i=0;i<a[e].attachments.length;i++)a[e].attachments[i].id===t&&a[e].attachments.splice(i,1);return n.next=11,this.storageService.save(nt.ciphersPrefix+r,a);case 11:this.decryptedCipherCache=null;case 12:case"end":return n.stop()}},n,this)}))}},{key:"deleteAttachmentWithServer",value:function(e,t){return ne(this,void 0,void 0,I().mark(function n(){return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.apiService.deleteCipherAttachment(e,t);case 3:n.next=8;break;case 5:return n.prev=5,n.t0=n.catch(0),n.abrupt("return",Promise.reject(n.t0.getSingleMessage()));case 8:return n.next=10,this.deleteAttachment(e,t);case 10:case"end":return n.stop()}},n,this,[[0,5]])}))}},{key:"sortCiphersByLastUsed",value:function(e,t){var n=e.localData&&e.localData.lastUsedDate?e.localData.lastUsedDate:null,r=t.localData&&t.localData.lastUsedDate?t.localData.lastUsedDate:null,a=null!=n&&null!=r;return a&&n<r?1:null!=n&&null==r||a&&n>r?-1:null!=r&&null==n?1:0}},{key:"sortCiphersByLastUsedThenName",value:function(e,t){var n=this.sortCiphersByLastUsed(e,t);return 0!==n?n:this.getLocaleSortingFunction()(e,t)}},{key:"getLocaleSortingFunction",value:function(){var e=this;return function(t,n){var r=t.name,a=n.name;if(null==r&&null!=a)return -1;if(null!=r&&null==a)return 1;if(null==r&&null==a)return 0;var i=e.i18nService.collator?e.i18nService.collator.compare(r,a):r.localeCompare(a);return 0!==i||t.type!==b.Login||n.type!==b.Login?i:(null!=t.login.username&&(r+=t.login.username),null!=n.login.username&&(a+=n.login.username),e.i18nService.collator?e.i18nService.collator.compare(r,a):r.localeCompare(a))}}},{key:"softDelete",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(nt.ciphersPrefix+n);case 5:if(null!=(r=t.sent)){t.next=8;break}return t.abrupt("return");case 8:return a=function(e){if(null!=r[e])r[e].deletedDate=new Date().toISOString()},"string"==typeof e?a(e):e.forEach(a),t.next=12,this.storageService.save(nt.ciphersPrefix+n,r);case 12:this.decryptedCipherCache=null;case 13:case"end":return t.stop()}},t,this)}))}},{key:"softDeleteWithServer",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiService.putDeleteCipher(e);case 2:return t.next=4,this.softDelete(e);case 4:case"end":return t.stop()}},t,this)}))}},{key:"softDeleteManyWithServer",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiService.putDeleteManyCiphers(new tG(e));case 2:return t.next=4,this.softDelete(e);case 4:case"end":return t.stop()}},t,this)}))}},{key:"restore",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(nt.ciphersPrefix+n);case 5:if(null!=(r=t.sent)){t.next=8;break}return t.abrupt("return");case 8:return a=function(e){if(null!=r[e])r[e].deletedDate=null},"string"==typeof e?a(e):e.forEach(a),t.next=12,this.storageService.save(nt.ciphersPrefix+n,r);case 12:this.decryptedCipherCache=null;case 13:case"end":return t.stop()}},t,this)}))}},{key:"restoreWithServer",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiService.putRestoreCipher(e);case 2:return t.next=4,this.restore(e);case 4:case"end":return t.stop()}},t,this)}))}},{key:"restoreManyWithServer",value:function(e){return ne(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiService.putRestoreManyCiphers(new tQ(e));case 2:return t.next=4,this.restore(e);case 4:case"end":return t.stop()}},t,this)}))}},{key:"shareAttachmentWithServer",value:function(e,t,n){return ne(this,void 0,void 0,I().mark(function r(){var a,i,o,s,c,u,l,d,f;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.apiService.nativeFetch(new Request(e.url,{cache:"no-store"}));case 2:if(!(200!==(a=r.sent).status)){r.next=5;break}throw Error("Failed to download attachment: "+a.status.toString());case 5:return r.next=7,a.arrayBuffer();case 7:return i=r.sent,r.next=10,this.cryptoService.decryptFromBytes(i,null);case 10:return o=r.sent,r.next=13,this.cryptoService.getOrgKey(n);case 13:return s=r.sent,r.next=16,this.cryptoService.encrypt(e.fileName,s);case 16:return c=r.sent,r.next=19,this.cryptoService.makeEncKey(s);case 19:return u=r.sent,r.next=22,this.cryptoService.encryptToBytes(o,u[0]);case 22:l=r.sent,d=new FormData,r.prev=24,f=new Blob([l],{type:"application/octet-stream"}),d.append("key",u[1].encryptedString),d.append("data",f,c.encryptedString),r.next=38;break;case 30:if(r.prev=30,r.t0=r.catch(24),!(J.isNode&&!J.isBrowser)){r.next=37;break}d.append("key",u[1].encryptedString),d.append("data",t9.from(l),{filepath:c.encryptedString,contentType:"application/octet-stream"}),r.next=38;break;case 37:throw r.t0;case 38:return r.prev=38,r.next=41,this.apiService.postShareCipherAttachment(t,e.id,d,n);case 41:r.next=46;break;case 43:throw r.prev=43,r.t1=r.catch(38),Error(r.t1.getSingleMessage());case 46:case"end":return r.stop()}},r,this,[[24,30],[38,43]])}))}},{key:"encryptObjProperty",value:function(e,t,n,r){return ne(this,void 0,void 0,I().mark(function a(){var i,o,s;return I().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:i=[],o=this,a.t0=I().keys(n);case 3:if((a.t1=a.t0()).done){a.next=10;break}if(s=a.t1.value,n.hasOwnProperty(s)){a.next=7;break}return a.abrupt("continue",3);case 7:!function(t,a){var s=Promise.resolve().then(function(){var a=e[n[t]||t];return a&&""!==a?o.cryptoService.encrypt(a,r):null}).then(function(e){a[t]=e});i.push(s)}(s,t),a.next=3;break;case 10:return a.next=12,Promise.all(i);case 12:case"end":return a.stop()}},a,this)}))}},{key:"encryptCipherData",value:function(e,t,n){return ne(this,void 0,void 0,I().mark(function r(){var a,i;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e.type,r.next=r.t0===b.Login?3:r.t0===b.SecureNote?20:r.t0===b.Card?23:r.t0===b.Identity?27:31;break;case 3:return e.login=new tU,e.login.passwordRevisionDate=t.login.passwordRevisionDate,r.next=7,this.encryptObjProperty(t.login,e.login,{username:null,password:null,totp:null},n);case 7:if(!(null!=t.login.uris)){r.next=19;break}e.login.uris=[],a=0;case 10:if(!(a<t.login.uris.length)){r.next=19;break}return(i=new tF).match=t.login.uris[a].match,r.next=15,this.encryptObjProperty(t.login.uris[a],i,{uri:null},n);case 15:e.login.uris.push(i);case 16:a++,r.next=10;break;case 19:case 26:case 30:return r.abrupt("return");case 20:return e.secureNote=new tW,e.secureNote.type=t.secureNote.type,r.abrupt("return");case 23:return e.card=new tD,r.next=26,this.encryptObjProperty(t.card,e.card,{cardholderName:null,brand:null,number:null,expMonth:null,expYear:null,code:null},n);case 27:return e.identity=new tz,r.next=30,this.encryptObjProperty(t.identity,e.identity,{title:null,firstName:null,middleName:null,lastName:null,address1:null,address2:null,address3:null,city:null,state:null,postalCode:null,country:null,company:null,email:null,phone:null,ssn:null,username:null,passportNumber:null,licenseNumber:null},n);case 31:throw Error("Unknown cipher type.");case 32:case"end":return r.stop()}},r,this)}))}},{key:"getCipherForUrl",value:function(e,t,n){return ne(this,void 0,void 0,I().mark(function r(){var a;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.sortedCiphersCache.isCached(e)){r.next=7;break}return r.next=3,this.getAllDecryptedForUrl(e);case 3:if(a=r.sent){r.next=6;break}return r.abrupt("return",null);case 6:this.sortedCiphersCache.addCiphers(e,a);case 7:if(!n){r.next=11;break}return r.abrupt("return",this.sortedCiphersCache.getLastLaunched(e));case 11:if(!t){r.next=15;break}return r.abrupt("return",this.sortedCiphersCache.getLastUsed(e));case 15:return r.abrupt("return",this.sortedCiphersCache.getNext(e));case 16:case"end":return r.stop()}},r,this)}))}}]),e}();!function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);i>3&&o&&Object.defineProperty(t,n,o)}([t6(function(){return"getAllDecrypted"}),t7("design:type",Function),t7("design:paramtypes",[]),t7("design:returntype",Promise)],nr.prototype,"getAllDecrypted",null);var na=(0,j.Z)(function e(t){(0,T.Z)(this,e),this.id=t.id,this.organizationId=t.organizationId,this.name=t.name,this.externalId=t.externalId,this.readOnly=t.readOnly}),ni=(0,j.Z)(function e(t){if((0,T.Z)(this,e),this.id=null,this.organizationId=null,this.name=null,this.externalId=null,this.readOnly=null,this.hidePasswords=null,!!t)this.id=t.id,this.organizationId=t.organizationId,this.externalId=t.externalId,t instanceof no&&(this.readOnly=t.readOnly,this.hidePasswords=t.hidePasswords)}),no=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return((0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.buildDomainModel((0,tC.Z)(t),e,{id:null,organizationId:null,name:null,externalId:null,readOnly:null,hidePasswords:null},n,["id","organizationId","externalId","readOnly","hidePasswords"]),t)}return(0,j.Z)(a,[{key:"decrypt",value:function(){return this.decryptObj(new ni(this),{name:null},this.organizationId)}}]),a}(tP),ns=n("98477"),nc=(0,j.Z)(function e(t,n,r){(0,T.Z)(this,e),this.children=[],this.parent=r,this.node=t,this.node.name=n}),nu=function(){function e(){(0,T.Z)(this,e)}return(0,j.Z)(e,null,[{key:"nestedTraverse",value:function(t,n,r,a,i,o){if(!(r.length<=n)){for(var s=n===r.length-1,c=r[n],u=0;u<t.length;u++){if(t[u].node.name===r[n]){if(s&&t[u].node.id!==a.id){t.push(new nc(a,c,i));return}e.nestedTraverse(t[u].children,n+1,r,a,t[u].node,o);return}}if(0===t.filter(function(e){return e.node.name===c}).length){if(s){t.push(new nc(a,c,i));return}var l=r[n]+o+r[n+1];e.nestedTraverse(t,0,[l].concat((0,ns.Z)(r.slice(n+2))),a,i,o)}}}},{key:"getTreeNodeObject",value:function(t,n){for(var r=0;r<t.length;r++){if(t[r].node.id===n)return t[r];if(null!=t[r].children){var a=e.getTreeNodeObject(t[r].children,n);if(null!==a)return a}}return null}}]),e}(),nl=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},nd={collectionsPrefix:"collections_"},nf=function(){function e(t,n,r,a){(0,T.Z)(this,e),this.cryptoService=t,this.userService=n,this.storageService=r,this.i18nService=a}return(0,j.Z)(e,[{key:"clearCache",value:function(){this.decryptedCollectionCache=null}},{key:"encrypt",value:function(e){return nl(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.organizationId){t.next=2;break}throw Error("Collection has no organization id.");case 2:return t.next=4,this.cryptoService.getOrgKey(e.organizationId);case 4:if(null!=(n=t.sent)){t.next=7;break}throw Error("No key for this collection's organization.");case 7:return(r=new no).id=e.id,r.organizationId=e.organizationId,r.readOnly=e.readOnly,t.next=13,this.cryptoService.encrypt(e.name,n);case 13:return r.name=t.sent,t.abrupt("return",r);case 15:case"end":return t.stop()}},t,this)}))}},{key:"decryptMany",value:function(e){return nl(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return",[]);case 2:return n=[],r=[],e.forEach(function(e){r.push(e.decrypt().then(function(e){return n.push(e)}))}),t.next=7,Promise.all(r);case 7:return t.abrupt("return",n.sort(J.getSortFunction(this.i18nService,"name")));case 8:case"end":return t.stop()}},t,this)}))}},{key:"get",value:function(e){return nl(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(nd.collectionsPrefix+n);case 5:if(!(null==(r=t.sent)||!r.hasOwnProperty(e))){t.next=8;break}return t.abrupt("return",null);case 8:return t.abrupt("return",new no(r[e]));case 9:case"end":return t.stop()}},t,this)}))}},{key:"getAll",value:function(){return nl(this,void 0,void 0,I().mark(function e(){var t,n,r,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.getUserId();case 2:return t=e.sent,e.next=5,this.storageService.get(nd.collectionsPrefix+t);case 5:for(a in n=e.sent,r=[],n)n.hasOwnProperty(a)&&r.push(new no(n[a]));return e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}))}},{key:"getAllDecrypted",value:function(){return nl(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=this.decryptedCollectionCache)){e.next=2;break}return e.abrupt("return",this.decryptedCollectionCache);case 2:return e.next=4,this.cryptoService.hasKey();case 4:if(e.sent){e.next=7;break}throw Error("No key.");case 7:return e.next=9,this.getAll();case 9:return t=e.sent,e.next=12,this.decryptMany(t);case 12:return this.decryptedCollectionCache=e.sent,e.abrupt("return",this.decryptedCollectionCache);case 14:case"end":return e.stop()}},e,this)}))}},{key:"getAllNested",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return nl(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=4;break}return t.next=3,this.getAllDecrypted();case 3:e=t.sent;case 4:return n=[],e.forEach(function(e){var t=new ni;t.id=e.id,t.organizationId=e.organizationId;var r=null!=e.name?e.name.replace(/^\/+|\/+$/g,"").split("/"):[];nu.nestedTraverse(n,0,r,t,null,"/")}),t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}))}},{key:"getNested",value:function(e){return nl(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAllNested();case 2:return n=t.sent,t.abrupt("return",nu.getTreeNodeObject(n,e));case 4:case"end":return t.stop()}},t,this)}))}},{key:"upsert",value:function(e){return nl(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(nd.collectionsPrefix+n);case 5:return null==(r=t.sent)&&(r={}),e instanceof na?r[(a=e).id]=a:e.forEach(function(e){r[e.id]=e}),t.next=10,this.storageService.save(nd.collectionsPrefix+n,r);case 10:this.decryptedCollectionCache=null;case 11:case"end":return t.stop()}},t,this)}))}},{key:"replace",value:function(e){return nl(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.save(nd.collectionsPrefix+n,e);case 5:this.decryptedCollectionCache=null;case 6:case"end":return t.stop()}},t,this)}))}},{key:"clear",value:function(e){return nl(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.remove(nd.collectionsPrefix+e);case 2:this.decryptedCollectionCache=null;case 3:case"end":return t.stop()}},t,this)}))}},{key:"delete",value:function(e){return nl(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(nd.collectionsPrefix+n);case 5:if(null!=(r=t.sent)){t.next=8;break}return t.abrupt("return");case 8:return"string"==typeof e?delete r[e]:e.forEach(function(e){delete r[e]}),t.next=11,this.storageService.save(nd.collectionsPrefix+n,r);case 11:this.decryptedCollectionCache=null;case 12:case"end":return t.stop()}},t,this)}))}}]),e}(),np=function(){function e(t){(0,T.Z)(this,e),this.cryptoService=t}return(0,j.Z)(e,[{key:"attachToWindow",value:function(e){this.attachToGlobal(e)}},{key:"attachToGlobal",value:function(e){!e.bitwardenContainerService&&(e.bitwardenContainerService=this)}},{key:"getCryptoService",value:function(){return this.cryptoService}}]),e}(),nh=(0,j.Z)(function e(){(0,T.Z)(this,e)}),nv=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},nm=function(){function e(t,n,r){(0,T.Z)(this,e),this.apiService=t,this.storageService=n,this.notificationsService=r}return(0,j.Z)(e,[{key:"getWebVaultUrl",value:function(){return null!=this.webVaultUrl?this.webVaultUrl:this.baseUrl?this.baseUrl:null}},{key:"setUrlsFromStorage",value:function(){return nv(this,void 0,void 0,I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageService.get(t5.environmentUrlsKey);case 2:if(t=e.sent||{base:null,api:null,identity:null,icons:null,notifications:null,events:null,webVault:null,enterprise:null},n=new nh,!t.base){e.next=9;break}return this.baseUrl=n.base=t.base,this.apiService.setUrls(n),e.abrupt("return");case 9:this.webVaultUrl=t.webVault,this.apiUrl=n.api=t.api,this.identityUrl=n.identity=t.identity,this.iconsUrl=t.icons,this.notificationsUrl=t.notifications,this.eventsUrl=n.events=t.events,this.enterpriseUrl=t.enterprise,this.apiService.setUrls(n);case 17:case"end":return e.stop()}},e,this)}))}},{key:"setUrls",value:function(e){return nv(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.base=this.formatUrl(e.base),e.webVault=this.formatUrl(e.webVault),e.api=this.formatUrl(e.api),e.identity=this.formatUrl(e.identity),e.icons=this.formatUrl(e.icons),e.notifications=this.formatUrl(e.notifications),e.events=this.formatUrl(e.events),e.enterprise=this.formatUrl(e.enterprise),t.next=10,this.storageService.save(t5.environmentUrlsKey,{base:e.base,api:e.api,identity:e.identity,webVault:e.webVault,icons:e.icons,notifications:e.notifications,events:e.events,enterprise:e.enterprise});case 10:return this.baseUrl=e.base,this.webVaultUrl=e.webVault,this.apiUrl=e.api,this.identityUrl=e.identity,this.iconsUrl=e.icons,this.notificationsUrl=e.notifications,this.eventsUrl=e.events,this.enterpriseUrl=e.enterprise,n=new nh,this.baseUrl?n.base=this.baseUrl:(n.api=this.apiUrl,n.identity=this.identityUrl,n.events=this.eventsUrl),this.apiService.setUrls(n),null!=this.notificationsService&&this.notificationsService.init(this),t.abrupt("return",e);case 23:case"end":return t.stop()}},t,this)}))}},{key:"formatUrl",value:function(e){return null==e||""===e?null:(!(e=e.replace(/\/+$/g,"")).startsWith("http://")&&!e.startsWith("https://")&&(e="https://"+e),e.trim())}}]),e}(),ny=(0,j.Z)(function e(t,n){(0,T.Z)(this,e),this.userId=n,this.name=t.name,this.id=t.id,this.revisionDate=t.revisionDate}),ng=(0,j.Z)(function e(t){if((0,T.Z)(this,e),this.id=null,this.name=null,this.revisionDate=null,!!t)this.id=t.id,this.revisionDate=t.revisionDate}),nb=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return((0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.buildDomainModel((0,tC.Z)(t),e,{id:null,name:null},n,["id"]),t.revisionDate=null!=e.revisionDate?new Date(e.revisionDate):null,t)}return(0,j.Z)(a,[{key:"decrypt",value:function(){return this.decryptObj(new ng(this),{name:null},null)}}]),a}(tP),nw=(0,j.Z)(function e(t){(0,T.Z)(this,e),this.name=t.name?t.name.encryptedString:null}),nk=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},nx={foldersPrefix:"folders_",ciphersPrefix:"ciphers_"},nO=function(){function e(t,n,r,a,i,o){(0,T.Z)(this,e),this.cryptoService=t,this.userService=n,this.apiService=r,this.storageService=a,this.i18nService=i,this.cipherService=o}return(0,j.Z)(e,[{key:"clearCache",value:function(){this.decryptedFolderCache=null}},{key:"encrypt",value:function(e,t){return nk(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new nb).id=e.id,n.next=4,this.cryptoService.encrypt(e.name,t);case 4:return r.name=n.sent,n.abrupt("return",r);case 6:case"end":return n.stop()}},n,this)}))}},{key:"get",value:function(e){return nk(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(nx.foldersPrefix+n);case 5:if(!(null==(r=t.sent)||!r.hasOwnProperty(e))){t.next=8;break}return t.abrupt("return",null);case 8:return t.abrupt("return",new nb(r[e]));case 9:case"end":return t.stop()}},t,this)}))}},{key:"getAll",value:function(){return nk(this,void 0,void 0,I().mark(function e(){var t,n,r,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.getUserId();case 2:return t=e.sent,e.next=5,this.storageService.get(nx.foldersPrefix+t);case 5:for(a in n=e.sent,r=[],n)n.hasOwnProperty(a)&&r.push(new nb(n[a]));return e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}))}},{key:"getAllDecrypted",value:function(){return nk(this,void 0,void 0,I().mark(function e(){var t,n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=this.decryptedFolderCache)){e.next=2;break}return e.abrupt("return",this.decryptedFolderCache);case 2:return e.next=4,this.cryptoService.hasKey();case 4:if(e.sent){e.next=7;break}throw Error("No key.");case 7:return t=[],n=[],e.next=11,this.getAll();case 11:return e.sent.forEach(function(e){n.push(e.decrypt().then(function(e){return t.push(e)}))}),e.next=15,Promise.all(n);case 15:return t.sort(J.getSortFunction(this.i18nService,"name")),(r=new ng).name=this.i18nService.t("noneFolder"),t.push(r),this.decryptedFolderCache=t,e.abrupt("return",this.decryptedFolderCache);case 21:case"end":return e.stop()}},e,this)}))}},{key:"getAllNested",value:function(){return nk(this,void 0,void 0,I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllDecrypted();case 2:return t=e.sent,n=[],t.forEach(function(e){var t=new ng;t.id=e.id,t.revisionDate=e.revisionDate;var r=null!=e.name?e.name.replace(/^\/+|\/+$/g,"").split("/"):[];nu.nestedTraverse(n,0,r,t,null,"/")}),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}))}},{key:"getNested",value:function(e){return nk(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAllNested();case 2:return n=t.sent,t.abrupt("return",nu.getTreeNodeObject(n,e));case 4:case"end":return t.stop()}},t,this)}))}},{key:"saveWithServer",value:function(e){return nk(this,void 0,void 0,I().mark(function t(){var n,r,a,i;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new nw(e),null!=e.id){t.next=8;break}return t.next=4,this.apiService.postFolder(n);case 4:r=t.sent,e.id=r.id,t.next=11;break;case 8:return t.next=10,this.apiService.putFolder(e.id,n);case 10:r=t.sent;case 11:return t.next=13,this.userService.getUserId();case 13:return a=t.sent,i=new ny(r,a),t.next=17,this.upsert(i);case 17:case"end":return t.stop()}},t,this)}))}},{key:"upsert",value:function(e){return nk(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(nx.foldersPrefix+n);case 5:return null==(r=t.sent)&&(r={}),e instanceof ny?r[(a=e).id]=a:e.forEach(function(e){r[e.id]=e}),t.next=10,this.storageService.save(nx.foldersPrefix+n,r);case 10:this.decryptedFolderCache=null;case 11:case"end":return t.stop()}},t,this)}))}},{key:"replace",value:function(e){return nk(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.save(nx.foldersPrefix+n,e);case 5:this.decryptedFolderCache=null;case 6:case"end":return t.stop()}},t,this)}))}},{key:"clear",value:function(e){return nk(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.remove(nx.foldersPrefix+e);case 2:this.decryptedFolderCache=null;case 3:case"end":return t.stop()}},t,this)}))}},{key:"delete",value:function(e){return nk(this,void 0,void 0,I().mark(function t(){var n,r,a,i,o;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(nx.foldersPrefix+n);case 5:if(null!=(r=t.sent)){t.next=8;break}return t.abrupt("return");case 8:if("string"!=typeof e){t.next=14;break}if(null!=r[e]){t.next=11;break}return t.abrupt("return");case 11:delete r[e],t.next=15;break;case 14:e.forEach(function(e){delete r[e]});case 15:return t.next=17,this.storageService.save(nx.foldersPrefix+n,r);case 17:return this.decryptedFolderCache=null,t.next=20,this.storageService.get(nx.ciphersPrefix+n);case 20:if(null!=(a=t.sent)){for(o in i=[],a)a[o].folderId===e&&(a[o].folderId=null,i.push(a[o]));i.length>0&&this.cipherService.upsert(i)}case 22:case"end":return t.stop()}},t,this)}))}},{key:"deleteWithServer",value:function(e){return nk(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiService.deleteFolder(e);case 2:return t.next=4,this.delete(e);case 4:case"end":return t.stop()}},t,this)}))}}]),e}(),nC=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},nS=function(){function e(t,n,r){(0,T.Z)(this,e),this.systemLanguage=t,this.localesDirectory=n,this.getLocalesJson=r,this.supportedTranslationLocales=["en"],this.localeNames=new Map([["af","Afrikaans"],["be","Беларуская"],["bg","български"],["ca","catal\xe0"],["cs","čeština"],["da","dansk"],["de","Deutsch"],["el","Ελληνικά"],["en","English"],["en-GB","English (British)"],["eo","Esperanto"],["es","espa\xf1ol"],["et","eesti"],["fa","فارسی"],["fi","suomi"],["fr","fran\xe7ais"],["he","עברית"],["hi","हिन्दी"],["hr","hrvatski"],["hu","magyar"],["id","Bahasa Indonesia"],["it","italiano"],["ja","日本語"],["ko","한국어"],["lv","Latvietis"],["ml","മലയാളം"],["nb","norsk (bokm\xe5l)"],["nl","Nederlands"],["pl","polski"],["pt-BR","portugu\xeas do Brasil"],["pt-PT","portugu\xeas"],["ro","rom\xe2nă"],["ru","русский"],["sk","slovenčina"],["sr","Српски"],["sv","svenska"],["th","ไทย"],["tr","T\xfcrk\xe7e"],["uk","українська"],["vi","Tiếng Việt"],["zh-CN","中文（中国大陆）"],["zh-TW","中文（台灣）"]]),this.defaultMessages={},this.localeMessages={},this.systemLanguage=t.replace("_","-")}return(0,j.Z)(e,[{key:"init",value:function(e){return nC(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited){t.next=2;break}throw Error("i18n already initialized.");case 2:if(!(null==this.supportedTranslationLocales||0===this.supportedTranslationLocales.length)){t.next=4;break}throw Error("supportedTranslationLocales not set.");case 4:this.inited=!0,this.locale=this.translationLocale=null!=e?e:this.systemLanguage;try{this.collator=new Intl.Collator(this.locale,{numeric:!0,sensitivity:"base"})}catch(e){this.collator=null}if(-1===this.supportedTranslationLocales.indexOf(this.translationLocale)&&(this.translationLocale=this.translationLocale.slice(0,2),-1===this.supportedTranslationLocales.indexOf(this.translationLocale)&&(this.translationLocale=this.supportedTranslationLocales[0])),!(null!=this.localesDirectory)){t.next=14;break}return t.next=11,this.loadMessages(this.translationLocale,this.localeMessages);case 11:if(!(this.translationLocale!==this.supportedTranslationLocales[0])){t.next=14;break}return t.next=14,this.loadMessages(this.supportedTranslationLocales[0],this.defaultMessages);case 14:case"end":return t.stop()}},t,this)}))}},{key:"t",value:function(e,t,n,r){return this.translate(e,t,n,r)}},{key:"translate",value:function(e,t,n,r){var a;return""!==(a=this.localeMessages.hasOwnProperty(e)&&this.localeMessages[e]?this.localeMessages[e]:this.defaultMessages.hasOwnProperty(e)&&this.defaultMessages[e]?this.defaultMessages[e]:"")&&(null!=t&&(a=a.split("__$1__").join(t)),null!=n&&(a=a.split("__$2__").join(n)),null!=r&&(a=a.split("__$3__").join(r))),a}},{key:"loadMessages",value:function(e,t){return nC(this,void 0,void 0,I().mark(function n(){var r,a,i,o,s,c;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.replace("-","_"),n.next=3,this.getLocalesJson(r);case 3:a=n.sent,n.t0=I().keys(a);case 5:if((n.t1=n.t0()).done){n.next=24;break}if(i=n.t1.value,a.hasOwnProperty(i)){n.next=9;break}return n.abrupt("continue",5);case 9:if(t[i]=a[i].message,!a[i].placeholders){n.next=22;break}n.t2=I().keys(a[i].placeholders);case 12:if((n.t3=n.t2()).done){n.next=22;break}if(o=n.t3.value,!(!a[i].placeholders.hasOwnProperty(o)||!a[i].placeholders[o].content)){n.next=16;break}return n.abrupt("continue",12);case 16:s="\\$"+o.toUpperCase()+"\\$",("$1"===(c=a[i].placeholders[o].content)||"$2"===c||"$3"===c)&&(c="__$"+c+"__"),t[i]=t[i].replace(RegExp(s,"g"),c),n.next=12;break;case 22:n.next=5;break;case 24:case"end":return n.stop()}},n,this)}))}}]),e}(),nE=(0,j.Z)(function e(t){if((0,T.Z)(this,e),this.groups=[],null!=t)this.name=t.name?t.name.encryptedString:null,this.externalId=t.externalId}),nP=(0,j.Z)(function e(){(0,T.Z)(this,e),this.ciphers=[],this.folders=[],this.folderRelationships=[]}),n_=(0,j.Z)(function e(){(0,T.Z)(this,e),this.ciphers=[],this.collections=[],this.collectionRelationships=[]}),nA=(0,j.Z)(function e(t,n){(0,T.Z)(this,e),this.key=t,this.value=n}),nR=n("57460");(u=O||(O={}))[u.Generic=0]="Generic";var nD=function(){function e(){(0,T.Z)(this,e),this.organization=!1,this.newLineRegex=/(?:\r\n|\r|\n)/,this.passwordFieldNames=["password","pass word","passphrase","pass phrase","pass","code","code word","codeword","secret","secret word","personpwd","key","keyword","key word","keyphrase","key phrase","form_pw","wppassword","pin","pwd","pw","pword","passwd","p","serial","serial#","license key","reg #","passwort"],this.usernameFieldNames=["user","name","user name","username","login name","email","e-mail","id","userid","user id","login","form_loginname","wpname","mail","loginid","login id","log","personlogin","first name","last name","card#","account #","member","member #","nom","benutzername"],this.notesFieldNames=["note","notes","comment","comments","memo","description","free form","freeform","free text","freetext","free","kommentar"],this.uriFieldNames=["url","hyper link","hyperlink","link","host","hostname","host name","server","address","hyper ref","href","web","website","web site","site","web-site","uri","ort","adresse"]}return(0,j.Z)(e,[{key:"parseXml",value:function(e){var t=new DOMParser().parseFromString(e,"application/xml");return null!=t&&null==t.querySelector("parsererror")?t:null}},{key:"parseCsv",value:function(e,t){e=this.splitNewLine(e).join("\n").trim();var n=nR.parse(e,{header:t,encoding:"UTF-8",skipEmptyLines:!1});return null!=n.errors&&n.errors.length>0&&n.errors.forEach(function(e){null!=e.row&&console.warn("Error parsing row "+e.row+": "+e.message)}),n.data&&n.data.length>0?n.data:null}},{key:"parseSingleRowCsv",value:function(e){if(this.isNullOrWhitespace(e))return null;var t=this.parseCsv(e,!1);return null!=t&&t.length>0&&t[0].length>0?t[0]:null}},{key:"makeUriArray",value:function(e){var t=this;if(null==e)return null;if("string"==typeof e){var n=new tB;return(n.uri=this.fixUri(e),this.isNullOrWhitespace(n.uri))?null:(n.match=null,[n])}if(e.length>0){var r=[];return e.forEach(function(e){var n=new tB;if(n.uri=t.fixUri(e),!t.isNullOrWhitespace(n.uri))n.match=null,r.push(n)}),0===r.length?null:r}return null}},{key:"fixUri",value:function(e){return null==e?null:(-1===(e=e.trim()).indexOf("://")&&e.indexOf(".")>=0&&(e="http://"+e),e.length>1e3)?e.substring(0,1e3):e}},{key:"nameFromUrl",value:function(e){var t=J.getHostname(e);return this.isNullOrWhitespace(t)?null:t.startsWith("www.")?t.replace("www.",""):t}},{key:"isNullOrWhitespace",value:function(e){return J.isNullOrWhitespace(e)}},{key:"getValueOrDefault",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.isNullOrWhitespace(e)?t:e}},{key:"splitNewLine",value:function(e){return e.split(this.newLineRegex)}},{key:"getCardBrand",value:function(e){if(this.isNullOrWhitespace(e))return null;var t=RegExp("^4");return null!=e.match(t)?"Visa":/^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/.test(e)?"Mastercard":(t=RegExp("^3[47]"),null!=e.match(t))?"Amex":(t=RegExp("^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)"),null!=e.match(t))?"Discover":(t=RegExp("^36"),null!=e.match(t))?"Diners Club":(t=RegExp("^30[0-5]"),null!=e.match(t))?"Diners Club":(t=RegExp("^35(2[89]|[3-8][0-9])"),null!=e.match(t))?"JCB":(t=RegExp("^(4026|417500|4508|4844|491(3|7))"),null!=e.match(t))?"Visa":null}},{key:"setCardExpiration",value:function(e,t){if(!this.isNullOrWhitespace(t)){var n=t.split("/");if(2===n.length){var r=null,a=null;if((1===n[0].length||2===n[0].length)&&2===(r=n[0]).length&&"0"===r[0]&&(r=r.substr(1,1)),(2===n[1].length||4===n[1].length)&&(a=2===r.length?"20"+n[1]:n[1]),null!=r&&null!=a)return e.card.expMonth=r,e.card.expYear=a,!0}}return!1}},{key:"moveFoldersToCollections",value:function(e){e.folderRelationships.forEach(function(t){return e.collectionRelationships.push(t)}),e.collections=e.folders.map(function(e){var t=new ni;return t.name=e.name,t}),e.folderRelationships=[],e.folders=[]}},{key:"querySelectorDirectChild",value:function(e,t){var n=this.querySelectorAllDirectChild(e,t);return 0===n.length?null:n[0]}},{key:"querySelectorAllDirectChild",value:function(e,t){return Array.from(e.querySelectorAll(t)).filter(function(t){return t.parentNode===e})}},{key:"initLoginCipher",value:function(){var e=new tN;return e.favorite=!1,e.notes="",e.fields=[],e.login=new tT,e.type=b.Login,e}},{key:"cleanupCipher",value:function(e){if(null!=e)e.type!==b.Login&&(e.login=null),this.isNullOrWhitespace(e.name)&&(e.name="--"),this.isNullOrWhitespace(e.notes)?e.notes=null:e.notes=e.notes.trim(),null!=e.fields&&0===e.fields.length&&(e.fields=null)}},{key:"processKvp",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w.Text;if(!this.isNullOrWhitespace(n))if(this.isNullOrWhitespace(t)&&(t=""),n.length>200||n.trim().search(this.newLineRegex)>-1)null==e.notes&&(e.notes=""),e.notes+=t+": "+this.splitNewLine(n).join("\n")+"\n";else{null==e.fields&&(e.fields=[]);var a=new tI;a.type=r,a.name=t,a.value=n,e.fields.push(a)}}},{key:"processFolder",value:function(e,t){var n=e.folders.length,r=!this.isNullOrWhitespace(t),a=r;if(r){for(var i=0;i<e.folders.length;i++)if(e.folders[i].name===t){a=!1,n=i;break}}if(a){var o=new ng;o.name=t,e.folders.push(o)}r&&e.folderRelationships.push([e.ciphers.length,n])}},{key:"convertToNoteIfNeeded",value:function(e){e.type===b.Login&&this.isNullOrWhitespace(e.login.username)&&this.isNullOrWhitespace(e.login.password)&&(null==e.login.uris||0===e.login.uris.length)&&(e.type=b.SecureNote,e.secureNote=new tj,e.secureNote.type=O.Generic)}}]),e}(),nM=(0,j.Z)(function e(){(0,T.Z)(this,e),this.success=!1,this.ciphers=[],this.folders=[],this.folderRelationships=[],this.collections=[],this.collectionRelationships=[]}),nT=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!1);return null==r?(n.success=!1,n):(r.forEach(function(e){if(!(e.length<2)){var r=t.initLoginCipher();if(r.notes=t.getValueOrDefault(e[e.length-1]),r.name=t.getValueOrDefault(e[0],"--"),e.length>2&&e.length%2==0)for(var a=0;a<e.length-2;a+=2){var i=e[a+2],o=e[a+1];if(!(t.isNullOrWhitespace(i)||t.isNullOrWhitespace(o))){var s=o.toLowerCase();null==r.login.password&&t.passwordFieldNames.indexOf(s)>-1?r.login.password=t.getValueOrDefault(i):null==r.login.username&&t.usernameFieldNames.indexOf(s)>-1?r.login.username=t.getValueOrDefault(i):(null==r.login.uris||0===r.login.uris.length)&&t.uriFieldNames.indexOf(s)>-1?r.login.uris=t.makeUriArray(i):t.processKvp(r,o,i)}}t.convertToNoteIfNeeded(r),t.cleanupCipher(r),n.ciphers.push(r)}}),n.success=!0,n)}}]),a}(nD),nj=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){var r=t.initLoginCipher();r.name=t.getValueOrDefault(e.name),r.login.uris=t.makeUriArray(e.web),r.login.password=t.getValueOrDefault(e.password),r.login.username=t.getValueOrDefault(e.login),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),nN=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=JSON.parse(e);return null==r?(n.success=!1,n):(null!=r.logins&&r.logins.forEach(function(e){var r=t.initLoginCipher();r.name=t.getValueOrDefault(e.custName),r.notes=t.getValueOrDefault(e.note),r.login.uris=t.makeUriArray(e.url),r.login.password=t.getValueOrDefault(e.pwd),r.login.username=t.getValueOrDefault(e.loginName),t.cleanupCipher(r),n.ciphers.push(r)}),null!=r.notes&&r.notes.forEach(function(e){var r=t.initLoginCipher();r.type=b.SecureNote,r.secureNote.type=O.Generic,r.name=t.getValueOrDefault(e.label),r.notes=t.getValueOrDefault(e.text),t.cleanupCipher(r),n.ciphers.push(r)}),null!=r.cards&&r.cards.forEach(function(e){var r=t.initLoginCipher();r.type=b.Card,r.name=t.getValueOrDefault(e.custName),r.notes=t.getValueOrDefault(e.note),r.card.cardholderName=t.getValueOrDefault(e.holderName),r.card.number=t.getValueOrDefault(e.cardNumber),r.card.code=t.getValueOrDefault(e.cvv),r.card.brand=t.getCardBrand(r.card.number),null!=e.expirationDate&&(null!=e.expirationDate.month&&(r.card.expMonth=e.expirationDate.month+""),null!=e.expirationDate.year&&(r.card.expYear=e.expirationDate.year+"")),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),nI=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){var r=t.initLoginCipher();r.name=t.getValueOrDefault(e.name,t.getValueOrDefault(t.nameFromUrl(e.website),"--")),r.login.uris=t.makeUriArray(e.website),r.login.password=t.getValueOrDefault(e.password),t.isNullOrWhitespace(e.username)&&!t.isNullOrWhitespace(e.secondary_username)?r.login.username=e.secondary_username:(r.login.username=t.getValueOrDefault(e.username),r.notes=t.getValueOrDefault(e.secondary_username)),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),nL=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){t.organization&&!t.isNullOrWhitespace(e.collections)?e.collections.split(",").forEach(function(e){for(var t=!0,r=n.collections.length,a=0;a<n.collections.length;a++)if(n.collections[a].name===e){t=!1,r=a;break}if(t){var i=new ni;i.name=e,n.collections.push(i)}n.collectionRelationships.push([n.ciphers.length,r])}):!t.organization&&t.processFolder(n,e.folder);var r=new tN;if(r.favorite=!t.organization&&"0"!==t.getValueOrDefault(e.favorite,"0"),r.type=b.Login,r.notes=t.getValueOrDefault(e.notes),r.name=t.getValueOrDefault(e.name,"--"),!t.isNullOrWhitespace(e.fields)){for(var a=t.splitNewLine(e.fields),i=0;i<a.length;i++){if(t.isNullOrWhitespace(a[i]))continue;var o=a[i].lastIndexOf(": ");if(-1!==o){null==r.fields&&(r.fields=[]);var s=new tI;s.name=a[i].substr(0,o),s.value=null,s.type=w.Text,a[i].length>o+2&&(s.value=a[i].substr(o+2)),r.fields.push(s)}}}if((null!=e.type?e.type.toLowerCase():null)==="note")r.type=b.SecureNote,r.secureNote=new tj,r.secureNote.type=O.Generic;else{r.type=b.Login,r.login=new tT,r.login.totp=t.getValueOrDefault(e.login_totp||e.totp),r.login.username=t.getValueOrDefault(e.login_username||e.username),r.login.password=t.getValueOrDefault(e.login_password||e.password);var c=t.parseSingleRowCsv(e.login_uri||e.uri);r.login.uris=t.makeUriArray(c)}n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),nz=n("84892"),nZ=function(){function e(t){var n,r,a,i,o,s;if((0,T.Z)(this,e),null!=t)t instanceof tR?(this.cardholderName=t.cardholderName,this.brand=t.brand,this.number=t.number,this.expMonth=t.expMonth,this.expYear=t.expYear,this.code=t.code):(this.cardholderName=null===(n=t.cardholderName)||void 0===n?void 0:n.encryptedString,this.brand=null===(r=t.brand)||void 0===r?void 0:r.encryptedString,this.number=null===(a=t.number)||void 0===a?void 0:a.encryptedString,this.expMonth=null===(i=t.expMonth)||void 0===i?void 0:i.encryptedString,this.expYear=null===(o=t.expYear)||void 0===o?void 0:o.encryptedString,this.code=null===(s=t.code)||void 0===s?void 0:s.encryptedString)}return(0,j.Z)(e,null,[{key:"template",value:function(){var t=new e;return t.cardholderName="John Doe",t.brand="visa",t.number="4242424242424242",t.expMonth="04",t.expYear="2023",t.code="123",t}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tR;return t.cardholderName=e.cardholderName,t.brand=e.brand,t.number=e.number,t.expMonth=e.expMonth,t.expYear=e.expYear,t.code=e.code,t}}]),e}(),nB=function(){function e(t){var n,r;if((0,T.Z)(this,e),null!=t)t instanceof tI?(this.name=t.name,this.value=t.value):(this.name=null===(n=t.name)||void 0===n?void 0:n.encryptedString,this.value=null===(r=t.value)||void 0===r?void 0:r.encryptedString),this.type=t.type}return(0,j.Z)(e,null,[{key:"template",value:function(){var t=new e;return t.name="Field name",t.value="Some value",t.type=w.Text,t}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tI;return t.type=e.type,t.value=e.value,t.name=e.name,t}}]),e}(),nF=function(){function e(t){var n,r,a,i,o,s,c,u,l,d,f,p,h,v,m,y,g,b;if((0,T.Z)(this,e),null!=t)t instanceof tM?(this.title=t.title,this.firstName=t.firstName,this.middleName=t.middleName,this.lastName=t.lastName,this.address1=t.address1,this.address2=t.address2,this.address3=t.address3,this.city=t.city,this.state=t.state,this.postalCode=t.postalCode,this.country=t.country,this.company=t.company,this.email=t.email,this.phone=t.phone,this.ssn=t.ssn,this.username=t.username,this.passportNumber=t.passportNumber,this.licenseNumber=t.licenseNumber):(this.title=null===(n=t.title)||void 0===n?void 0:n.encryptedString,this.firstName=null===(r=t.firstName)||void 0===r?void 0:r.encryptedString,this.middleName=null===(a=t.middleName)||void 0===a?void 0:a.encryptedString,this.lastName=null===(i=t.lastName)||void 0===i?void 0:i.encryptedString,this.address1=null===(o=t.address1)||void 0===o?void 0:o.encryptedString,this.address2=null===(s=t.address2)||void 0===s?void 0:s.encryptedString,this.address3=null===(c=t.address3)||void 0===c?void 0:c.encryptedString,this.city=null===(u=t.city)||void 0===u?void 0:u.encryptedString,this.state=null===(l=t.state)||void 0===l?void 0:l.encryptedString,this.postalCode=null===(d=t.postalCode)||void 0===d?void 0:d.encryptedString,this.country=null===(f=t.country)||void 0===f?void 0:f.encryptedString,this.company=null===(p=t.company)||void 0===p?void 0:p.encryptedString,this.email=null===(h=t.email)||void 0===h?void 0:h.encryptedString,this.phone=null===(v=t.phone)||void 0===v?void 0:v.encryptedString,this.ssn=null===(m=t.ssn)||void 0===m?void 0:m.encryptedString,this.username=null===(y=t.username)||void 0===y?void 0:y.encryptedString,this.passportNumber=null===(g=t.passportNumber)||void 0===g?void 0:g.encryptedString,this.licenseNumber=null===(b=t.licenseNumber)||void 0===b?void 0:b.encryptedString)}return(0,j.Z)(e,null,[{key:"template",value:function(){var t=new e;return t.title="Mr",t.firstName="John",t.middleName="William",t.lastName="Doe",t.address1="123 Any St",t.address2="Apt #123",t.address3=null,t.city="New York",t.state="NY",t.postalCode="10001",t.country="US",t.company="Acme Inc.",t.email="john@company.com",t.phone="5555551234",t.ssn="000-123-4567",t.username="jdoe",t.passportNumber="US-123456789",t.licenseNumber="D123-12-123-12333",t}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tM;return t.title=e.title,t.firstName=e.firstName,t.middleName=e.middleName,t.lastName=e.lastName,t.address1=e.address1,t.address2=e.address2,t.address3=e.address3,t.city=e.city,t.state=e.state,t.postalCode=e.postalCode,t.country=e.country,t.company=e.company,t.email=e.email,t.phone=e.phone,t.ssn=e.ssn,t.username=e.username,t.passportNumber=e.passportNumber,t.licenseNumber=e.licenseNumber,t}}]),e}(),nU=function(){function e(t){var n;if((0,T.Z)(this,e),this.match=null,null!=t)t instanceof tB?this.uri=t.uri:this.uri=null===(n=t.uri)||void 0===n?void 0:n.encryptedString,this.match=t.match}return(0,j.Z)(e,null,[{key:"template",value:function(){var t=new e;return t.uri="https://google.com",t.match=null,t}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tB;return t.uri=e.uri,t.match=e.match,t}}]),e}(),nV=function(){function e(t){var n,r,a;if((0,T.Z)(this,e),null!=t)null!=t.uris&&(t instanceof tT?this.uris=t.uris.map(function(e){return new nU(e)}):this.uris=t.uris.map(function(e){return new nU(e)})),t instanceof tT?(this.username=t.username,this.password=t.password,this.totp=t.totp):(this.username=null===(n=t.username)||void 0===n?void 0:n.encryptedString,this.password=null===(r=t.password)||void 0===r?void 0:r.encryptedString,this.totp=null===(a=t.totp)||void 0===a?void 0:a.encryptedString)}return(0,j.Z)(e,null,[{key:"template",value:function(){var t=new e;return t.uris=[],t.username="jdoe",t.password="myp@ssword123",t.totp="JBSWY3DPEHPK3PXP",t}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tT;return null!=e.uris&&(t.uris=e.uris.map(function(e){return nU.toView(e)})),t.username=e.username,t.password=e.password,t.totp=e.totp,t}}]),e}(),nH=function(){function e(t){if((0,T.Z)(this,e),null!=t)this.type=t.type}return(0,j.Z)(e,null,[{key:"template",value:function(){var t=new e;return t.type=O.Generic,t}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tj;return t.type=e.type,t}}]),e}(),nW=function(){function e(){(0,T.Z)(this,e)}return(0,j.Z)(e,[{key:"build",value:function(e){var t,n;switch(this.organizationId=e.organizationId,this.folderId=e.folderId,this.type=e.type,e instanceof tN?(this.name=e.name,this.notes=e.notes):(this.name=null===(t=e.name)||void 0===t?void 0:t.encryptedString,this.notes=null===(n=e.notes)||void 0===n?void 0:n.encryptedString),this.favorite=e.favorite,null!=e.fields&&(e instanceof tN?this.fields=e.fields.map(function(e){return new nB(e)}):this.fields=e.fields.map(function(e){return new nB(e)})),e.type){case b.Login:this.login=new nV(e.login);break;case b.SecureNote:this.secureNote=new nH(e.secureNote);break;case b.Card:this.card=new nZ(e.card);break;case b.Identity:this.identity=new nF(e.identity)}}}],[{key:"template",value:function(){var t=new e;return t.organizationId=null,t.folderId=null,t.type=b.Login,t.name="Item name",t.notes="Some notes about this item.",t.favorite=!1,t.fields=[],t.login=null,t.secureNote=null,t.card=null,t.identity=null,t}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tN;switch(t.type=e.type,t.folderId=e.folderId,null==t.organizationId&&(t.organizationId=e.organizationId),t.name=e.name,t.notes=e.notes,t.favorite=e.favorite,null!=e.fields&&(t.fields=e.fields.map(function(e){return nB.toView(e)})),e.type){case b.Login:t.login=nV.toView(e.login);break;case b.SecureNote:t.secureNote=nH.toView(e.secureNote);break;case b.Card:t.card=nZ.toView(e.card);break;case b.Identity:t.identity=nF.toView(e.identity)}return t}}]),e}(),nq=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"build",value:function(e){this.id=e.id,(0,nz.Z)((0,ee.Z)(a.prototype),"build",this).call(this,e),this.collectionIds=e.collectionIds}}]),a}(nW),nG=function(){function e(){(0,T.Z)(this,e)}return(0,j.Z)(e,[{key:"build",value:function(e){var t;this.organizationId=e.organizationId,e instanceof ni?this.name=e.name:this.name=null===(t=e.name)||void 0===t?void 0:t.encryptedString,this.externalId=e.externalId}}],[{key:"template",value:function(){var t=new e;return t.organizationId="00000000-0000-0000-0000-000000000000",t.name="Collection name",t.externalId=null,t}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ni;return t.name=e.name,t.externalId=e.externalId,null==t.organizationId&&(t.organizationId=e.organizationId),t}}]),e}(),nK=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"build",value:function(e){this.id=e.id,(0,nz.Z)((0,ee.Z)(a.prototype),"build",this).call(this,e)}}]),a}(nG),nQ=function(){function e(){(0,T.Z)(this,e)}return(0,j.Z)(e,[{key:"build",value:function(e){var t;e instanceof ng?this.name=e.name:this.name=null===(t=e.name)||void 0===t?void 0:t.encryptedString}}],[{key:"template",value:function(){var t=new e;return t.name="Folder name",t}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ng;return t.name=e.name,t}}]),e}(),nY=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"build",value:function(e){this.id=e.id,(0,nz.Z)((0,ee.Z)(a.prototype),"build",this).call(this,e)}}]),a}(nQ),nJ=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=JSON.parse(e);if(null==r||null==r.items||0===r.items.length)return n.success=!1,n;var a=new Map;return this.organization&&null!=r.collections?r.collections.forEach(function(e){var t=nK.toView(e);null!=t&&(t.id=null,t.organizationId=null,a.set(e.id,n.collections.length),n.collections.push(t))}):!this.organization&&null!=r.folders&&r.folders.forEach(function(e){var t=nY.toView(e);null!=t&&(t.id=null,a.set(e.id,n.folders.length),n.folders.push(t))}),r.items.forEach(function(e){var r=nq.toView(e);r.id=null,r.folderId=null,r.organizationId=null,r.collectionIds=null,null!=r.passwordHistory&&r.passwordHistory.length>5&&(r.passwordHistory=r.passwordHistory.slice(0,5)),!t.organization&&null!=e.folderId&&a.has(e.folderId)?n.folderRelationships.push([n.ciphers.length,a.get(e.folderId)]):t.organization&&null!=e.collectionIds&&e.collectionIds.forEach(function(e){a.has(e)&&n.collectionRelationships.push([n.ciphers.length,a.get(e)])}),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n}}]),a}(nD),n$=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){if("list"!==e.grouping){var r=t.initLoginCipher();r.favorite="1"===e.fav,r.name=t.getValueOrDefault(e.name),r.notes=t.getValueOrDefault(e.extra),"note"!==e.grouping&&(r.login.uris=t.makeUriArray(e.url),r.login.password=t.getValueOrDefault(e.password),r.login.username=t.getValueOrDefault(e.username)),t.convertToNoteIfNeeded(r),t.cleanupCipher(r),n.ciphers.push(r)}}),n.success=!0,n)}}]),a}(nD),nX=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){"null"===e.label&&(e.label=null);var r=t.initLoginCipher();r.name=t.getValueOrDefault(e.label,t.getValueOrDefault(t.nameFromUrl(e.domain),"--")),r.login.uris=t.makeUriArray(e.domain),r.login.password=t.getValueOrDefault(e.password),t.isNullOrWhitespace(e.email)&&!t.isNullOrWhitespace(e.username)?r.login.username=e.username:(r.login.username=t.getValueOrDefault(e.email),r.notes=t.getValueOrDefault(e.username)),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),n0=["!group_id","!group_name","title","username","password","URL","id"],n1=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){t.processFolder(n,t.getValueOrDefault(e["!group_name"]));var r=t.initLoginCipher();r.name=t.getValueOrDefault(e.title,"--"),r.login.username=t.getValueOrDefault(e.username),r.login.password=t.getValueOrDefault(e.password),r.login.uris=t.makeUriArray(e.URL);var a=!1;for(var i in e)e.hasOwnProperty(i)&&(!a&&-1===n0.indexOf(i)&&(a=!0),a&&t.processKvp(r,i,e[i]));t.cleanupCipher(r),n.ciphers.push(r)}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}}]),a}(nD),n2=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){var r=t.initLoginCipher();r.name=t.getValueOrDefault(e.name,"--"),r.login.username=t.getValueOrDefault(e.username),r.login.password=t.getValueOrDefault(e.password),r.login.uris=t.makeUriArray(e.url),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),n4=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseXml(e);if(null==r)return n.success=!1,n;var a=r.querySelector("textarea");return null==a||this.isNullOrWhitespace(a.textContent)?(n.errorMessage="Missing textarea.",n.success=!1,n):(JSON.parse(a.textContent).forEach(function(e){var r=t.initLoginCipher();if(!t.isNullOrWhitespace(e.label)&&(r.name=e.label.split(" ")[0]),null!=e.data&&!t.isNullOrWhitespace(e.data.notes)&&(r.notes=e.data.notes.split("\\n").join("\n")),null!=e.currentVersion&&null!=e.currentVersion.fields)for(var a in e.currentVersion.fields){if(!!e.currentVersion.fields.hasOwnProperty(a)){var i=e.currentVersion.fields[a];switch(null!=i.actionType?i.actionType.toLowerCase():null){case"password":r.login.password=t.getValueOrDefault(i.value);break;case"email":case"username":case"user":case"name":r.login.username=t.getValueOrDefault(i.value);break;case"url":r.login.uris=t.makeUriArray(i.value);break;default:var o=null!=i.label?i.label.toLowerCase():null;null==r.login.password&&t.passwordFieldNames.indexOf(o)>-1?r.login.password=t.getValueOrDefault(i.value):null==r.login.username&&t.usernameFieldNames.indexOf(o)>-1?r.login.username=t.getValueOrDefault(i.value):(null==r.login.uris||0===r.login.uris.length)&&t.uriFieldNames.indexOf(o)>-1?r.login.uris=t.makeUriArray(i.value):t.processKvp(r,i.label,i.value)}}}t.convertToNoteIfNeeded(r),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),n3=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){t.processFolder(n,t.getValueOrDefault(e.Category));var r=t.initLoginCipher();r.favorite="True"===t.getValueOrDefault(e.Favorite),r.name=t.getValueOrDefault(e.Entry,"--"),r.notes=t.getValueOrDefault(e.Note),r.login.username=t.getValueOrDefault(e.Username,e.Email),r.login.password=t.getValueOrDefault(e.Password),r.login.totp=t.getValueOrDefault(e.TOTP),r.login.uris=t.makeUriArray(e.Website),!t.isNullOrWhitespace(e.Username)&&t.processKvp(r,"Email",e.Email),t.processKvp(r,"Phone",e.Phone),t.processKvp(r,"PIN",e.PIN),t.processKvp(r,"Account",e.Account),t.processKvp(r,"Date",e.Date),t.convertToNoteIfNeeded(r),t.cleanupCipher(r),n.ciphers.push(r)}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}}]),a}(nD),n5=new Set(["ADDRESS","AUTHENTIFIANT","BANKSTATEMENT","IDCARD","IDENTITY","PAYMENTMEANS_CREDITCARD","PAYMENTMEAN_PAYPAL","EMAIL"]),n6=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){this.result=new nM;var t=JSON.parse(e);if(null==t||0===t.length)return this.result.success=!1,this.result;for(var n in null!=t.ADDRESS&&this.processAddress(t.ADDRESS),null!=t.AUTHENTIFIANT&&this.processAuth(t.AUTHENTIFIANT),null!=t.BANKSTATEMENT&&this.processNote(t.BANKSTATEMENT,"BankAccountName"),null!=t.IDCARD&&this.processNote(t.IDCARD,"Fullname"),null!=t.PAYMENTMEANS_CREDITCARD&&this.processCard(t.PAYMENTMEANS_CREDITCARD),null!=t.IDENTITY&&this.processIdentity(t.IDENTITY),t)t.hasOwnProperty(n)&&!n5.has(n)&&this.processNote(t[n],null,"Generic Note");return this.result.success=!0,this.result}},{key:"processAuth",value:function(e){var t=this;e.forEach(function(e){var n=t.initLoginCipher();n.name=t.getValueOrDefault(e.title),n.login.username=t.getValueOrDefault(e.login,t.getValueOrDefault(e.secondaryLogin)),t.isNullOrWhitespace(n.login.username)?n.login.username=t.getValueOrDefault(e.email):!t.isNullOrWhitespace(e.email)&&(n.notes="Email: "+e.email+"\n"),n.login.password=t.getValueOrDefault(e.password),n.login.uris=t.makeUriArray(e.domain),n.notes+=t.getValueOrDefault(e.note,""),t.convertToNoteIfNeeded(n),t.cleanupCipher(n),t.result.ciphers.push(n)})}},{key:"processIdentity",value:function(e){var t=this;e.forEach(function(e){var n=new tN;n.identity=new tM,n.type=b.Identity,n.name=t.getValueOrDefault(e.fullName,"");var r=n.name.split(" ");r.length>0&&(n.identity.firstName=t.getValueOrDefault(r[0])),2===r.length?n.identity.lastName=t.getValueOrDefault(r[1]):3===r.length&&(n.identity.middleName=t.getValueOrDefault(r[1]),n.identity.lastName=t.getValueOrDefault(r[2])),n.identity.username=t.getValueOrDefault(e.pseudo),t.cleanupCipher(n),t.result.ciphers.push(n)})}},{key:"processAddress",value:function(e){var t=this;e.forEach(function(e){var n=new tN;n.identity=new tM,n.type=b.Identity,n.name=t.getValueOrDefault(e.addressName),n.identity.address1=t.getValueOrDefault(e.addressFull),n.identity.city=t.getValueOrDefault(e.city),n.identity.state=t.getValueOrDefault(e.state),n.identity.postalCode=t.getValueOrDefault(e.zipcode),n.identity.country=t.getValueOrDefault(e.country),null!=n.identity.country&&(n.identity.country=n.identity.country.toUpperCase()),t.cleanupCipher(n),t.result.ciphers.push(n)})}},{key:"processCard",value:function(e){var t=this;e.forEach(function(e){var n=new tN;n.card=new tR,n.type=b.Card,n.name=t.getValueOrDefault(e.bank),n.card.number=t.getValueOrDefault(e.cardNumber),n.card.brand=t.getCardBrand(n.card.number),n.card.cardholderName=t.getValueOrDefault(e.owner),!t.isNullOrWhitespace(n.card.brand)&&(t.isNullOrWhitespace(n.name)?n.name=n.card.brand:n.name+=" - "+n.card.brand),t.cleanupCipher(n),t.result.ciphers.push(n)})}},{key:"processNote",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.forEach(function(e){var a=new tN;for(var i in a.secureNote=new tj,a.type=b.SecureNote,a.secureNote.type=O.Generic,null!=r?a.name=r:a.name=n.getValueOrDefault(e[t]),e)e.hasOwnProperty(i)&&i!==t&&n.processKvp(a,i,e[i].toString());n.cleanupCipher(a),n.result.ciphers.push(a)})}}]),a}(nD),n9=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){var r=t.initLoginCipher();r.name=t.getValueOrDefault(e.Label,"--"),r.notes=t.getValueOrDefault(e.Notes);var a=t.getValueOrDefault(e.Text);!t.isNullOrWhitespace(a)&&(t.isNullOrWhitespace(r.notes)?r.notes=a:r.notes+="\n\n"+a);var i=e["Entry Type"];if("Password"===i)r.login.username=t.getValueOrDefault(e.Username),r.login.password=t.getValueOrDefault(e.Password),r.login.uris=t.makeUriArray(e["Site URL"]);else if("Credit Card"===i){r.type=b.Card,r.card=new tR,r.card.cardholderName=t.getValueOrDefault(e["Name on card"]),r.card.number=t.getValueOrDefault(e["Card Number"]),r.card.brand=t.getCardBrand(r.card.number),r.card.code=t.getValueOrDefault(e.CVV);var o=t.getValueOrDefault(e.Expiry);if(!t.isNullOrWhitespace(o)){var s=o.split("/");s.length>1&&(r.card.expMonth=parseInt(s[0],null).toString(),r.card.expYear=(2e3+parseInt(s[1],null)).toString())}}t.convertToNoteIfNeeded(r),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),n8=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!1);if(null==r)return n.success=!1,n;var a=!0;return r.forEach(function(e){if(e.length<2||a&&("Title"===e[0]||"title"===e[0])){a=!1;return}var r=t.initLoginCipher();if(r.notes=t.getValueOrDefault(e[e.length-1]),r.name=t.getValueOrDefault(e[0],"--"),(2===e.length||!t.containsField(e,"username")&&!t.containsField(e,"password")&&!t.containsField(e,"email")&&!t.containsField(e,"url"))&&(r.type=b.SecureNote,r.secureNote=new tj,r.secureNote.type=O.Generic),t.containsField(e,"cardholder")&&t.containsField(e,"number")&&t.containsField(e,"expiry date")&&(r.type=b.Card,r.card=new tR),e.length>2&&e.length%2==0)for(var i=0;i<e.length-2;i+=2){var o=e[i+2];if(!t.isNullOrWhitespace(o)){var s=e[i+1],c=s.toLowerCase();if(r.type===b.Login){if("url"===c&&(null==r.login.uris||0===r.login.uris.length)){r.login.uris=t.makeUriArray(o);continue}if(("username"===c||"email"===c)&&t.isNullOrWhitespace(r.login.username)){r.login.username=o;continue}else if("password"===c&&t.isNullOrWhitespace(r.login.password)){r.login.password=o;continue}else if("totp"===c&&t.isNullOrWhitespace(r.login.totp)){r.login.totp=o;continue}}else if(r.type===b.Card){if("cardholder"===c&&t.isNullOrWhitespace(r.card.cardholderName)){r.card.cardholderName=o;continue}if("number"===c&&t.isNullOrWhitespace(r.card.number)){r.card.number=o,r.card.brand=t.getCardBrand(o);continue}else if("cvc"===c&&t.isNullOrWhitespace(r.card.code)){r.card.code=o;continue}else if("expiry date"===c&&t.isNullOrWhitespace(r.card.expMonth)&&t.isNullOrWhitespace(r.card.expYear)){if(t.setCardExpiration(r,o))continue}else if("type"===c)continue}t.processKvp(r,s,o)}}t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n}},{key:"containsField",value:function(e,t){var n=this;return null!=e&&null!=t&&e.filter(function(e){return!n.isNullOrWhitespace(e)&&e.toLowerCase()===t.toLowerCase()}).length>0}}]),a}(nD),n7=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=JSON.parse(e);if(null==r||null==r.items||0===r.items.length)return n.success=!1,n;var a=new Map,i=new Map,o=this.buildFolderTree(r.folders);return this.flattenFolderTree(null,o,a),a.forEach(function(e,t){i.set(t,n.folders.length);var r=new ng;r.name=e,n.folders.push(r)}),r.items.forEach(function(e){null!=e.folders&&e.folders.length>0&&i.has(e.folders[0])&&n.folderRelationships.push([n.ciphers.length,i.get(e.folders[0])]);var r=t.initLoginCipher();r.name=t.getValueOrDefault(e.title),r.favorite=e.favorite>0,null!=e.template_type&&null!=e.fields&&e.fields.length>0&&(0===e.template_type.indexOf("login.")||0===e.template_type.indexOf("password.")?t.processLogin(r,e.fields):0===e.template_type.indexOf("creditcard.")?t.processCard(r,e.fields):0>e.template_type.indexOf("identity.")&&e.fields.some(function(e){return"password"===e.type&&!t.isNullOrWhitespace(e.value)})?t.processLogin(r,e.fields):t.processNote(r,e.fields)),r.notes+="\n"+t.getValueOrDefault(e.note,""),t.convertToNoteIfNeeded(r),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n}},{key:"processLogin",value:function(e,t){var n=this,r=[];t.forEach(function(t){if(!n.isNullOrWhitespace(t.value)&&"section"!==t.type)("username"===t.type||"email"===t.type)&&n.isNullOrWhitespace(e.login.username)?e.login.username=t.value:"password"===t.type&&n.isNullOrWhitespace(e.login.password)?e.login.password=t.value:"totp"===t.type&&n.isNullOrWhitespace(e.login.totp)?e.login.totp=t.value:"url"===t.type?r.push(t.value):n.processKvp(e,t.label,t.value,1===t.sensitive?w.Hidden:w.Text)}),e.login.uris=this.makeUriArray(r)}},{key:"processCard",value:function(e,t){var n=this;e.card=new tR,e.type=b.Card,t.forEach(function(t){if(!n.isNullOrWhitespace(t.value)&&"section"!==t.type&&"ccType"!==t.type)"ccName"===t.type&&n.isNullOrWhitespace(e.card.cardholderName)?e.card.cardholderName=t.value:"ccNumber"===t.type&&n.isNullOrWhitespace(e.card.number)?(e.card.number=t.value,e.card.brand=n.getCardBrand(e.card.number)):"ccCvc"===t.type&&n.isNullOrWhitespace(e.card.code)?e.card.code=t.value:"ccExpiry"===t.type&&n.isNullOrWhitespace(e.card.expYear)?!n.setCardExpiration(e,t.value)&&n.processKvp(e,t.label,t.value,1===t.sensitive?w.Hidden:w.Text):n.processKvp(e,t.label,t.value,1===t.sensitive?w.Hidden:w.Text)})}},{key:"processNote",value:function(e,t){var n=this;t.forEach(function(t){if(!n.isNullOrWhitespace(t.value)&&"section"!==t.type)n.processKvp(e,t.label,t.value,1===t.sensitive?w.Hidden:w.Text)})}},{key:"buildFolderTree",value:function(e){if(null==e)return[];var t=[],n=new Map([]);return e.forEach(function(e){n.set(e.uuid,e),e.children=[]}),e.forEach(function(e){null!=e.parent_uuid&&""!==e.parent_uuid&&n.has(e.parent_uuid)?n.get(e.parent_uuid).children.push(e):t.push(e)}),t}},{key:"flattenFolderTree",value:function(e,t,n){var r=this;if(null!=t)t.forEach(function(t){if(null!=t.title&&""!==t.title.trim()){var a=t.title.trim();null!=e&&""!==e.trim()&&(a=e+"/"+a),n.set(t.uuid,a),null!=t.children&&0!==t.children.length&&r.flattenFolderTree(a,t.children,n)}})}}]),a}(nD),re=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){var r=t.initLoginCipher(),a=t.getValueOrDefault(e.url,t.getValueOrDefault(e.hostname));r.name=t.getValueOrDefault(t.nameFromUrl(a),"--"),r.login.username=t.getValueOrDefault(e.username),r.login.password=t.getValueOrDefault(e.password),r.login.uris=t.makeUriArray(a),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),rt=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=new nM,n=JSON.parse(e);if(null==n||null==n.data)return t.success=!1,t;for(var r in n.data){if(!!n.data.hasOwnProperty(r)){var a=n.data[r],i=this.initLoginCipher();if(i.name=this.getValueOrDefault(a.service),i.notes=this.getValueOrDefault(a.notes),"website"===a.style)i.login.username=this.getValueOrDefault(a.username),i.login.password=this.getValueOrDefault(a.password),i.login.uris=this.makeUriArray(a.url);else{if("creditcard"!==a.style)continue;i.type=b.Card,i.card=new tR,i.card.cardholderName=this.getValueOrDefault(a.username),i.card.number=this.getValueOrDefault(a.creditNumber),i.card.brand=this.getCardBrand(i.card.number),i.card.code=this.getValueOrDefault(a.creditCvv),!this.isNullOrWhitespace(a.creditExpiry)&&!this.setCardExpiration(i,a.creditExpiry)&&this.processKvp(i,"Expiration",a.creditExpiry),!this.isNullOrWhitespace(a.password)&&this.processKvp(i,"PIN",a.password)}this.convertToNoteIfNeeded(i),this.cleanupCipher(i),t.ciphers.push(i)}}return t.success=!0,t}}]),a}(nD),rn=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=JSON.parse(e);if(null==r||0===Object.keys(r).length)return n.success=!1,n;var a=function(e){if(!r.hasOwnProperty(e)||t.isNullOrWhitespace(e)||0===r[e].length)return"continue";r[e].forEach(function(r){if(!t.isNullOrWhitespace(r.display_name)&&0===r.display_name.indexOf("http")){t.processFolder(n,e);var a=t.initLoginCipher();if(a.name=r.display_name.replace("http://","").replace("https://",""),a.name.length>30&&(a.name=a.name.substring(0,30)),a.login.password=t.getValueOrDefault(r.secret),a.login.uris=t.makeUriArray(r.display_name),null!=r.attributes)for(var i in a.login.username=null!=r.attributes?t.getValueOrDefault(r.attributes.username_value):null,r.attributes){if(!!r.attributes.hasOwnProperty(i)&&"username_value"!==i&&"xdg:schema"!==i)t.processKvp(a,i,r.attributes[i])}t.convertToNoteIfNeeded(a),t.cleanupCipher(a),n.ciphers.push(a)}})};for(var i in r)if("continue"===a(i))continue;return this.organization&&this.moveFoldersToCollections(n),n.success=!0,n}}]),a}(nD),rr="Notes\n\n",ra="Applications\n\n",ri="Websites\n\n",ro="\n---\n",rs=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t,n,r,a=this,i=new nM,o=this.splitNewLine(e).join("\n");if(-1!==o.indexOf(rr)){var s=o.split(rr);s.length>1&&(o=s[0],t=s[1])}if(-1!==o.indexOf(ra)){var c=o.split(ra);c.length>1&&(o=c[0],n=c[1])}if(0===o.indexOf(ri)){var u=o.split(ri);u.length>1&&(o=u[0],r=u[1])}var l=this.parseDataCategory(t),d=this.parseDataCategory(n),f=this.parseDataCategory(r);return l.forEach(function(e){var t=a.initLoginCipher();t.name=a.getValueOrDefault(e.get("Name")),t.notes=a.getValueOrDefault(e.get("Text")),a.cleanupCipher(t),i.ciphers.push(t)}),f.concat(d).forEach(function(e){var t=a.initLoginCipher(),n=e.has("Website name")?"Website name":"Application";t.name=a.getValueOrDefault(e.get(n),""),!a.isNullOrWhitespace(e.get("Login name"))&&(!a.isNullOrWhitespace(t.name)&&(t.name+=": "),t.name+=e.get("Login name")),t.notes=a.getValueOrDefault(e.get("Comment")),e.has("Website URL")&&(t.login.uris=a.makeUriArray(e.get("Website URL"))),t.login.username=a.getValueOrDefault(e.get("Login")),t.login.password=a.getValueOrDefault(e.get("Password")),a.cleanupCipher(t),i.ciphers.push(t)}),i.success=!0,i}},{key:"parseDataCategory",value:function(e){if(this.isNullOrWhitespace(e)||-1===e.indexOf(ro))return[];var t=[];return e.split(ro).forEach(function(e){if(-1===e.indexOf("\n"))return;var n,r,a=new Map;if(e.split("\n").forEach(function(e){if(null!=n){n+="\n"+e;return}var t,i,o=e.indexOf(":");if(-1!==o){t=e.substring(0,o),e.length>o+1&&(i=e.substring(o+2));null!=t&&a.set(t,i),("Comment"===t||"Text"===t)&&(n=i,r=t)}}),null!=n&&null!=r&&a.set(r,n),0!==a.size)t.push(a)}),t}}]),a}(nD),rc=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e;return(0,T.Z)(this,a),e=r.apply(this,arguments),e.result=new nM,e}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this.parseXml(e);if(null==t)return this.result.success=!1,this.result;var n=t.querySelector("KeePassFile > Root > Group");return null==n?(this.result.errorMessage="Missing `KeePassFile > Root > Group` node.",this.result.success=!1,this.result):(this.traverse(n,!0,""),this.organization&&this.moveFoldersToCollections(this.result),this.result.success=!0,this.result)}},{key:"traverse",value:function(e,t,n){var r=this,a=this.result.folders.length,i=n;if(!t){""!==i&&(i+="/");var o=this.querySelectorDirectChild(e,"Name");i+=null==o?"-":o.textContent;var s=new ng;s.name=i,this.result.folders.push(s)}this.querySelectorAllDirectChild(e,"Entry").forEach(function(e){var n=r.result.ciphers.length,i=r.initLoginCipher();r.querySelectorAllDirectChild(e,"String").forEach(function(e){var t=r.querySelectorDirectChild(e,"Value"),n=null!=t?t.textContent:null;if(!r.isNullOrWhitespace(n)){var a=r.querySelectorDirectChild(e,"Key"),o=null!=a?a.textContent:null;if("URL"===o)i.login.uris=r.makeUriArray(n);else if("UserName"===o)i.login.username=n;else if("Password"===o)i.login.password=n;else if("otp"===o)i.login.totp=n.replace("key=","");else if("Title"===o)i.name=n;else if("Notes"===o)i.notes+=n+"\n";else{var s=w.Text,c=t.attributes;c.length>0&&null!=c.ProtectInMemory&&"True"===c.ProtectInMemory.value&&(s=w.Hidden),r.processKvp(i,o,n,s)}}}),r.cleanupCipher(i),r.result.ciphers.push(i),!t&&r.result.folderRelationships.push([n,a])}),this.querySelectorAllDirectChild(e,"Group").forEach(function(e){r.traverse(e,!1,i)})}}]),a}(nD),ru=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){if(!t.isNullOrWhitespace(e.Title)){e.Group=!t.isNullOrWhitespace(e.Group)&&e.Group.startsWith("Root/")?e.Group.replace("Root/",""):e.Group;var r=t.isNullOrWhitespace(e.Group)?null:e.Group;t.processFolder(n,r);var a=t.initLoginCipher();a.notes=t.getValueOrDefault(e.Notes),a.name=t.getValueOrDefault(e.Title,"--"),a.login.username=t.getValueOrDefault(e.Username),a.login.password=t.getValueOrDefault(e.Password),a.login.uris=t.makeUriArray(e.URL),t.cleanupCipher(a),n.ciphers.push(a)}}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}}]),a}(nD),rl=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!1);return null==r?(n.success=!1,n):(r.forEach(function(e){if(!(e.length<6)){t.processFolder(n,e[0]);var r=t.initLoginCipher();if(r.notes=t.getValueOrDefault(e[5])+"\n",r.name=t.getValueOrDefault(e[1],"--"),r.login.username=t.getValueOrDefault(e[2]),r.login.password=t.getValueOrDefault(e[3]),r.login.uris=t.makeUriArray(e[4]),e.length>7)for(var a=7;a<e.length;a+=2)t.processKvp(r,e[a],e[a+1]);t.cleanupCipher(r),n.ciphers.push(r)}}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}}]),a}(nD),rd=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e,r){var a=n.ciphers.length,i=n.folders.length,o=e.grouping;null!=o&&(o=o.replace(/\\/g,"/").replace(/[\x00-\x1F\x7F-\x9F]/g,""));var s="(none)"!==t.getValueOrDefault(o,"(none)"),c=s;if(s){for(var u=0;u<n.folders.length;u++)if(n.folders[u].name===o){c=!1,i=u;break}}var l=t.buildBaseCipher(e);if(l.type===b.Login)l.notes=t.getValueOrDefault(e.extra),l.login=new tT,l.login.uris=t.makeUriArray(e.url),l.login.username=t.getValueOrDefault(e.username),l.login.password=t.getValueOrDefault(e.password);else if(l.type===b.SecureNote)t.parseSecureNote(e,l);else if(l.type===b.Card)l.card=t.parseCard(e),l.notes=t.getValueOrDefault(e.notes);else if(l.type===b.Identity&&(l.identity=t.parseIdentity(e),l.notes=t.getValueOrDefault(e.notes),!t.isNullOrWhitespace(e.ccnum))){var d=t.buildBaseCipher(e);d.identity=null,d.type=b.Card,d.card=t.parseCard(e),n.ciphers.push(d)}if(n.ciphers.push(l),c){var f=new ng;f.name=o,n.folders.push(f)}s&&n.folderRelationships.push([a,i])}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}},{key:"buildBaseCipher",value:function(e){var t=new tN;return e.hasOwnProperty("profilename")&&e.hasOwnProperty("profilelanguage")?(t.favorite=!1,t.name=this.getValueOrDefault(e.profilename,"--"),t.type=b.Card,(!this.isNullOrWhitespace(e.title)||!this.isNullOrWhitespace(e.firstname)||!this.isNullOrWhitespace(e.lastname)||!this.isNullOrWhitespace(e.address1)||!this.isNullOrWhitespace(e.phone)||!this.isNullOrWhitespace(e.username)||!this.isNullOrWhitespace(e.email))&&(t.type=b.Identity)):(t.favorite=!this.organization&&"1"===this.getValueOrDefault(e.fav,"0"),t.name=this.getValueOrDefault(e.name,"--"),t.type="http://sn"===e.url?b.SecureNote:b.Login),t}},{key:"parseCard",value:function(e){var t=new tR;if(t.cardholderName=this.getValueOrDefault(e.ccname),t.number=this.getValueOrDefault(e.ccnum),t.code=this.getValueOrDefault(e.cccsc),t.brand=this.getCardBrand(e.ccnum),!this.isNullOrWhitespace(e.ccexp)&&e.ccexp.indexOf("-")>-1){var n=e.ccexp.split("-");n.length>1&&(t.expYear=n[0],t.expMonth=n[1],2===t.expMonth.length&&"0"===t.expMonth[0]&&(t.expMonth=t.expMonth[1]))}return t}},{key:"parseIdentity",value:function(e){var t=new tM;return t.title=this.getValueOrDefault(e.title),t.firstName=this.getValueOrDefault(e.firstname),t.middleName=this.getValueOrDefault(e.middlename),t.lastName=this.getValueOrDefault(e.lastname),t.username=this.getValueOrDefault(e.username),t.company=this.getValueOrDefault(e.company),t.ssn=this.getValueOrDefault(e.ssn),t.address1=this.getValueOrDefault(e.address1),t.address2=this.getValueOrDefault(e.address2),t.address3=this.getValueOrDefault(e.address3),t.city=this.getValueOrDefault(e.city),t.state=this.getValueOrDefault(e.state),t.postalCode=this.getValueOrDefault(e.zip),t.country=this.getValueOrDefault(e.country),t.email=this.getValueOrDefault(e.email),t.phone=this.getValueOrDefault(e.phone),!this.isNullOrWhitespace(t.title)&&(t.title=t.title.charAt(0).toUpperCase()+t.title.slice(1)),t}},{key:"parseSecureNote",value:function(e,t){var n=this.splitNewLine(e.extra),r=!1;if(n.length){var a=n[0].split(":");if(a.length>1&&"NoteType"===a[0]&&("Credit Card"===a[1]||"Address"===a[1])){if("Credit Card"===a[1]){var i=this.parseSecureNoteMapping(t,n,{Number:"number","Name on Card":"cardholderName","Security Code":"code","Expiration Date":"expMonth"});if(this.isNullOrWhitespace(i.expMonth)||","===i.expMonth)i.expMonth=void 0;else{var o=i.expMonth.split(","),s=(0,D.Z)(o,2),c=s[0],u=s[1];if(this.isNullOrWhitespace(c))i.expMonth=void 0;else{var l=new Date(Date.parse(c.trim()+" 1, 2012")).getMonth()+1;isNaN(l)?i.expMonth=void 0:i.expMonth=l.toString()}!this.isNullOrWhitespace(u)&&(i.expYear=u)}t.type=b.Card,t.card=i}else if("Address"===a[1]){var d=this.parseSecureNoteMapping(t,n,{Title:"title","First Name":"firstName","Last Name":"lastName","Middle Name":"middleName",Company:"company","Address 1":"address1","Address 2":"address2","Address 3":"address3","City / Town":"city",State:"state","Zip / Postal Code":"postalCode",Country:"country","Email Address":"email",Username:"username"});t.type=b.Identity,t.identity=d}r=!0}}!r&&(t.secureNote=new tj,t.secureNote.type=O.Generic,t.notes=this.getValueOrDefault(e.extra))}},{key:"parseSecureNoteMapping",value:function(e,t,n){var r=this,a={},i=!1;return t.forEach(function(t){var o=null,s=null;if(!i){if(r.isNullOrWhitespace(t))return;var c=t.indexOf(":");if(-1===c?o=t:(o=t.substring(0,c),t.length>c&&(s=t.substring(c+1))),r.isNullOrWhitespace(o)||r.isNullOrWhitespace(s)||"NoteType"===o)return}i?e.notes+="\n"+t:"Notes"===o?(r.isNullOrWhitespace(e.notes)?e.notes=s:e.notes+="\n"+s,i=!0):n.hasOwnProperty(o)?a[n[o]]=s:r.processKvp(e,o,s)}),a}}]),a}(nD),rf=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!1);return null==r?(n.success=!1,n):(r.forEach(function(e){if(!(e.length<4)){var r=t.initLoginCipher();r.name=t.getValueOrDefault(e[0],"--"),r.login.username=t.getValueOrDefault(e[2]),r.login.password=t.getValueOrDefault(e[3]),r.login.uris=t.makeUriArray(e[1]),t.cleanupCipher(r),n.ciphers.push(r)}}),n.success=!0,n)}}]),a}(nD),rp=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){var r=t.initLoginCipher();r.name=t.getValueOrDefault(e.DisplayName,"--"),r.notes=t.getValueOrDefault(e.Notes),r.login.username=t.getValueOrDefault(e.UserName),r.login.password=t.getValueOrDefault(e.Password),r.login.uris=t.makeUriArray(e.Url),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),rh=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!1);return null==r?(n.success=!1,n):(r.forEach(function(e){if(!(e.length<3)){var r="Unassigned"!==t.getValueOrDefault(e[0],"Unassigned")?e[0]:null;t.processFolder(n,r);var a=t.initLoginCipher();if(a.name=t.getValueOrDefault(e[2],"--"),"Web Logins"===e[1]||"Login"===e[1])a.login.uris=t.makeUriArray(e[4]),a.login.username=t.getValueOrDefault(e[5]),a.login.password=t.getValueOrDefault(e[6]),a.notes=t.isNullOrWhitespace(e[3])?null:e[3].split("\\n").join("\n");else if(e.length>3){a.type=b.SecureNote,a.secureNote=new tj,a.secureNote.type=O.Generic;for(var i=3;i<e.length;i++)!t.isNullOrWhitespace(e[i])&&(a.notes+=e[i]+"\n")}!t.isNullOrWhitespace(e[1])&&a.type!==b.Login&&(a.name=e[1]+": "+a.name),t.cleanupCipher(a),n.ciphers.push(a)}}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}}]),a}(nD),rv=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){var r=t.initLoginCipher();if(r.name=t.getValueOrDefault(e.nickname,"--"),r.notes=t.getValueOrDefault(e.additionalInfo),void 0!==e.url)r.login.uris=t.makeUriArray(e.url),r.login.username=t.getValueOrDefault(e.username),r.login.password=t.getValueOrDefault(e.password),r.login.totp=t.getValueOrDefault(e.twoFactAuthToken);else if(void 0!==e.cardNumber)r.card=new tR,r.type=b.Card,r.card.cardholderName=t.getValueOrDefault(e.cardName),r.card.number=t.getValueOrDefault(e.cardNumber),r.card.brand=t.getCardBrand(r.card.number),r.card.expMonth=t.getValueOrDefault(e.exp_month),r.card.expYear=t.getValueOrDefault(e.exp_year),r.card.code=t.getValueOrDefault(e.cvv);else if(void 0!==e.firstName)r.identity=new tM,r.type=b.Identity,r.identity.title=t.getValueOrDefault(e.title),r.identity.firstName=t.getValueOrDefault(e.firstName),r.identity.middleName=t.getValueOrDefault(e.middleName),r.identity.lastName=t.getValueOrDefault(e.lastName),r.identity.phone=t.getValueOrDefault(e.number),r.identity.email=t.getValueOrDefault(e.email),r.identity.address1=t.getValueOrDefault(e.firstAddressLine),r.identity.address2=t.getValueOrDefault(e.secondAddressLine),r.identity.city=t.getValueOrDefault(e.city),r.identity.country=t.getValueOrDefault(e.country),r.identity.postalCode=t.getValueOrDefault(e.zipCode);else{if(void 0===e.content)return;r.secureNote=new tj,r.type=b.SecureNote,r.secureNote.type=O.Generic,r.name=t.getValueOrDefault(e.title,"--"),r.notes=t.getValueOrDefault(e.content)}t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),rm=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e;return(0,T.Z)(this,a),e=r.apply(this,arguments),e.result=new nM,e}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this;return e.split(this.newLineRegex).forEach(function(e){if(t.isNullOrWhitespace(e)||"{"!==e[0])return;var n=JSON.parse(e);if(!0!==n.trashed){var r=t.initLoginCipher();t.isNullOrWhitespace(n.hmac)?t.processStandardItem(n,r):t.processWinOpVaultItem(n,r),t.convertToNoteIfNeeded(r),t.cleanupCipher(r),t.result.ciphers.push(r)}}),this.result.success=!0,this.result}},{key:"processWinOpVaultItem",value:function(e,t){var n=this;if(null!=e.overview&&(t.name=this.getValueOrDefault(e.overview.title),null!=e.overview.URLs)){var r=[];e.overview.URLs.forEach(function(e){!n.isNullOrWhitespace(e.u)&&r.push(e.u)}),t.login.uris=this.makeUriArray(r)}null!=e.details&&(null!=e.details.passwordHistory&&this.parsePasswordHistory(e.details.passwordHistory,t),this.isNullOrWhitespace(e.details.ccnum)&&this.isNullOrWhitespace(e.details.cvv)?(!this.isNullOrWhitespace(e.details.firstname)||!this.isNullOrWhitespace(e.details.address1))&&(t.type=b.Identity,t.identity=new tM):(t.type=b.Card,t.card=new tR),t.type===b.Login&&!this.isNullOrWhitespace(e.details.password)&&(t.login.password=e.details.password),!this.isNullOrWhitespace(e.details.notesPlain)&&(t.notes=e.details.notesPlain.split(this.newLineRegex).join("\n")+"\n"),null!=e.details.fields&&this.parseFields(e.details.fields,t,"designation","value","name"),null!=e.details.sections&&e.details.sections.forEach(function(e){null!=e.fields&&n.parseFields(e.fields,t,"n","v","t")}))}},{key:"processStandardItem",value:function(e,t){var n=this;if(t.favorite=!!e.openContents&&!!e.openContents.faveIndex,t.name=this.getValueOrDefault(e.title),"securenotes.SecureNote"===e.typeName?(t.type=b.SecureNote,t.secureNote=new tj,t.secureNote.type=O.Generic):"wallet.financial.CreditCard"===e.typeName?(t.type=b.Card,t.card=new tR):"identities.Identity"===e.typeName?(t.type=b.Identity,t.identity=new tM):t.login.uris=this.makeUriArray(e.location),null!=e.secureContents){if(null!=e.secureContents.passwordHistory&&this.parsePasswordHistory(e.secureContents.passwordHistory,t),!this.isNullOrWhitespace(e.secureContents.notesPlain)&&(t.notes=e.secureContents.notesPlain.split(this.newLineRegex).join("\n")+"\n"),t.type===b.Login&&(!this.isNullOrWhitespace(e.secureContents.password)&&(t.login.password=e.secureContents.password),null!=e.secureContents.URLs)){var r=[];e.secureContents.URLs.forEach(function(e){!n.isNullOrWhitespace(e.url)&&r.push(e.url)}),r.length>0&&(t.login.uris=this.makeUriArray(r))}null!=e.secureContents.fields&&this.parseFields(e.secureContents.fields,t,"designation","value","name"),null!=e.secureContents.sections&&e.secureContents.sections.forEach(function(e){null!=e.fields&&n.parseFields(e.fields,t,"n","v","t")})}}},{key:"parsePasswordHistory",value:function(e,t){var n=this,r=e.length>5?5:e.length;t.passwordHistory=e.filter(function(e){return!n.isNullOrWhitespace(e.value)&&null!=e.time}).sort(function(e,t){return t.time-e.time}).slice(0,r).map(function(e){var t=new tV;return t.password=e.value,t.lastUsedDate=new Date((""+e.time).length>=13?e.time:1e3*e.time),t})}},{key:"parseFields",value:function(e,t,n,r,a){var i=this;e.forEach(function(e){if(null==e[r]||""===e[r].toString().trim())return;var o=e[r].toString(),s=null!=e[n]?e[n].toString():null;if(t.type===b.Login){if(i.isNullOrWhitespace(t.login.username)&&"username"===s){t.login.username=o;return}if(i.isNullOrWhitespace(t.login.password)&&"password"===s){t.login.password=o;return}else if(i.isNullOrWhitespace(t.login.totp)&&null!=s&&s.startsWith("TOTP_")){t.login.totp=o;return}}else if(t.type===b.Card){if(i.isNullOrWhitespace(t.card.number)&&"ccnum"===s){t.card.number=o,t.card.brand=i.getCardBrand(o);return}if(i.isNullOrWhitespace(t.card.code)&&"cvv"===s){t.card.code=o;return}else if(i.isNullOrWhitespace(t.card.cardholderName)&&"cardholder"===s){t.card.cardholderName=o;return}else if(i.isNullOrWhitespace(t.card.expiration)&&"expiry"===s&&6===o.length){t.card.expMonth=o.substr(4,2),"0"===t.card.expMonth[0]&&(t.card.expMonth=t.card.expMonth.substr(1,1)),t.card.expYear=o.substr(0,4);return}else if("type"===s)return}else if(t.type===b.Identity){var c=t.identity;if(i.isNullOrWhitespace(c.firstName)&&"firstname"===s){c.firstName=o;return}if(i.isNullOrWhitespace(c.lastName)&&"lastname"===s){c.lastName=o;return}else if(i.isNullOrWhitespace(c.middleName)&&"initial"===s){c.middleName=o;return}else if(i.isNullOrWhitespace(c.phone)&&"defphone"===s){c.phone=o;return}else if(i.isNullOrWhitespace(c.company)&&"company"===s){c.company=o;return}else if(i.isNullOrWhitespace(c.email)&&"email"===s){c.email=o;return}else if(i.isNullOrWhitespace(c.username)&&"username"===s){c.username=o;return}else if("address"===s){var u=e[r],l=u.street,d=u.city,f=u.country,p=u.zip;c.address1=i.getValueOrDefault(l),c.city=i.getValueOrDefault(d),!i.isNullOrWhitespace(f)&&(c.country=f.toUpperCase()),c.postalCode=i.getValueOrDefault(p);return}}var h=i.isNullOrWhitespace(e[a])?"no_name":e[a];if(!("password"===h&&null!=t.passwordHistory&&t.passwordHistory.some(function(e){return e.password===o}))){var v="concealed"===e.k?w.Hidden:w.Text;i.processKvp(t,h,o,v)}})}}]),a}(nD),ry=["ainfo","autosubmit","notesplain","ps","scope","tags","title","uuid"],rg=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){if(!t.isNullOrWhitespace(t.getProp(e,"title"))){var r=t.initLoginCipher();r.name=t.getValueOrDefault(t.getProp(e,"title"),"--"),r.notes=t.getValueOrDefault(t.getProp(e,"notesPlain"),"")+"\n",!t.isNullOrWhitespace(t.getProp(e,"number"))&&!t.isNullOrWhitespace(t.getProp(e,"expiry date"))&&(r.type=b.Card,r.card=new tR);var a=null;for(var i in e){if(!(!e.hasOwnProperty(i)||t.isNullOrWhitespace(e[i]))){var o=i.toLowerCase();if(r.type===b.Login){if(t.isNullOrWhitespace(r.login.password)&&"password"===o){r.login.password=e[i];continue}if(t.isNullOrWhitespace(r.login.username)&&"username"===o){r.login.username=e[i];continue}else if((null==r.login.uris||0===r.login.uri.length)&&"urls"===o){var s=e[i].split(t.newLineRegex);r.login.uris=t.makeUriArray(s);continue}}else if(r.type===b.Card){if(t.isNullOrWhitespace(r.card.number)&&"number"===o){r.card.number=e[i],r.card.brand=t.getCardBrand(t.getProp(e,"number"));continue}if(t.isNullOrWhitespace(r.card.code)&&"verification number"===o){r.card.code=e[i];continue}else if(t.isNullOrWhitespace(r.card.cardholderName)&&"cardholder name"===o){r.card.cardholderName=e[i];continue}else if(t.isNullOrWhitespace(r.card.expiration)&&"expiry date"===o&&6===e[i].length){r.card.expMonth=e[i].substr(4,2),"0"===r.card.expMonth[0]&&(r.card.expMonth=r.card.expMonth.substr(1,1)),r.card.expYear=e[i].substr(0,4);continue}else if("type"===o)continue}-1===ry.indexOf(o)&&!o.startsWith("section:")&&!o.startsWith("section ")&&(null==a&&"email"===o&&(a=e[i]),t.processKvp(r,i,e[i]))}}r.type===b.Login&&!t.isNullOrWhitespace(a)&&t.isNullOrWhitespace(r.login.username)&&-1===a.indexOf("://")&&(r.login.username=a),t.convertToNoteIfNeeded(r),t.cleanupCipher(r),n.ciphers.push(r)}}),n.success=!0,n)}},{key:"getProp",value:function(e,t){return e[t]||e[t.toUpperCase()]}}]),a}(nD),rb=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!1);if(null==r)return n.success=!1,n;var a=null;return r.forEach(function(e){if(null==a){a=e.map(function(e){return e});return}if(!(e.length<2)&&e.length===a.length){if(!t.isNullOrWhitespace(e[1])){if(t.organization)e[1].split(",").forEach(function(e){e=e.trim();for(var t=!0,r=n.collections.length,a=0;a<n.collections.length;a++)if(n.collections[a].name===e){t=!1,r=a;break}if(t){var i=new ni;i.name=e,n.collections.push(i)}n.collectionRelationships.push([n.ciphers.length,r])});else{var r=e[1].split(","),i=r.length>0?r[0].trim():null;t.processFolder(n,i)}}var o=t.initLoginCipher();o.name=t.getValueOrDefault(e[0],"--");for(var s=2;s<e.length;s++){var c=a[s].trim().toLowerCase();if(!(t.isNullOrWhitespace(e[s])||t.isNullOrWhitespace(c)))t.usernameFieldNames.indexOf(c)>-1?o.login.username=e[s]:t.passwordFieldNames.indexOf(c)>-1?o.login.password=e[s]:t.uriFieldNames.indexOf(c)>-1?o.login.uris=t.makeUriArray(e[s]):t.processKvp(o,a[s],e[s])}t.cleanupCipher(o),n.ciphers.push(o)}}),n.success=!0,n}}]),a}(nD),rw=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){t.processFolder(n,t.getValue("category",e));var r=t.initLoginCipher();r.notes=t.getValue("description",e),r.name=t.getValueOrDefault(t.getValue("title",e),"--"),r.login.username=t.getValue("username",e),r.login.password=t.getValue("password",e),r.login.uris=t.makeUriArray(t.getValue("site",e)),t.processKvp(r,"Password 2",t.getValue("password2",e)),t.cleanupCipher(r),n.ciphers.push(r)}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}},{key:"getValue",value:function(e,t){return this.getValueOrDefault(t[e],this.getValueOrDefault(t[" "+e]))}}]),a}(nD),rk=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=JSON.parse(e);return null==r||0===r.length?(n.success=!1,n):(r.forEach(function(e){if(null!=e.tags&&e.tags.length>0){var r=e.tags[0].text;t.processFolder(n,r)}var a=t.initLoginCipher();a.name=e.label,a.login.username=t.getValueOrDefault(e.username),t.isNullOrWhitespace(a.login.username)?a.login.username=t.getValueOrDefault(e.email):!t.isNullOrWhitespace(e.email)&&(a.notes="Email: "+e.email+"\n"),a.login.password=t.getValueOrDefault(e.password),a.login.uris=t.makeUriArray(e.url),a.notes+=t.getValueOrDefault(e.description,""),null!=e.otp&&(a.login.totp=t.getValueOrDefault(e.otp.secret)),null!=e.custom_fields&&e.custom_fields.forEach(function(e){switch(e.field_type){case"text":case"password":t.processKvp(a,e.label,e.value)}}),t.convertToNoteIfNeeded(a),t.cleanupCipher(a),n.ciphers.push(a)}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}}]),a}(nD),rx=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){var r=t.isNullOrWhitespace(e.Tags)?null:JSON.parse(e.Tags),a=null!=r&&null!=r.tags&&r.tags.length>0?r.tags.map(function(e){try{var n=JSON.parse(e);return t.getValueOrDefault(n.tag)}catch(e){}return null}).filter(function(e){return!t.isNullOrWhitespace(e)}):null;t.organization&&null!=a&&a.length>0?a.forEach(function(e){for(var t=!0,r=n.collections.length,a=0;a<n.collections.length;a++)if(n.collections[a].name===e){t=!1,r=a;break}if(t){var i=new ni;i.name=e,n.collections.push(i)}n.collectionRelationships.push([n.ciphers.length,r])}):!t.organization&&null!=a&&a.length>0&&t.processFolder(n,a[0]);var i=t.initLoginCipher();i.notes=t.getValueOrDefault(e.Notes,""),i.notes+="\n\n"+t.getValueOrDefault(e["Shared Notes"],"")+"\n",i.name=t.getValueOrDefault(e["Entry Name"],"--"),i.login.username=t.getValueOrDefault(e["User ID"]),i.login.password=t.getValueOrDefault(e.Password),i.login.uris=t.makeUriArray(e.URL),null!=e.__parsed_extra&&e.__parsed_extra.length>0&&e.__parsed_extra.forEach(function(e){!t.isNullOrWhitespace(e)&&(i.notes+="\n"+e)});var o=t.isNullOrWhitespace(e["Extra Fields"])?null:JSON.parse(e["Extra Fields"]),s=null!=o&&null!=o.extraFields&&o.extraFields.length>0?o.extraFields.map(function(e){try{return JSON.parse(e)}catch(e){}return null}):null;null!=s&&s.forEach(function(e){null!=e&&t.processKvp(i,e.name,e.data)}),t.cleanupCipher(i),n.ciphers.push(i)}),n.success=!0,n)}}]),a}(nD),rO=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!1);if(null==r)return n.success=!1,n;var a=!0;return r.forEach(function(e){if(5===e.length||!(e.length<9)){var r=10===e.length&&"0"===e[0],i=t.initLoginCipher();if(i.name=t.getValueOrDefault(e[r?1:0],"--"),i.login.username=t.getValueOrDefault(e[r?2:1]),i.login.password=t.getValueOrDefault(e[r?3:2]),5===e.length)a=!1,i.notes=t.getValueOrDefault(e[4]),i.login.uris=t.makeUriArray(e[3]);else{var o=t.getValueOrDefault(e[r?9:8],"(None)"),s="(None)"!==o?o.split("\\").join("/"):null;null!=s&&(s=o.split(" > ").join("/"),s=o.split(">").join("/")),t.processFolder(n,s),i.notes=t.getValueOrDefault(e[r?5:3]),i.login.uris=t.makeUriArray(e[4])}t.convertToNoteIfNeeded(i),t.cleanupCipher(i),n.ciphers.push(i)}}),a&&this.organization&&this.moveFoldersToCollections(n),n.success=!0,n}}]),a}(nD),rC=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=JSON.parse(e);if(null==r||null==r.items)return n.success=!1,n;var a=new Map;r.folders.forEach(function(e){a.set(e.id,e.name)});var i=new Map;return a.forEach(function(e,t){i.set(t,n.folders.length);var r=new ng;r.name=e,n.folders.push(r)}),r.items.forEach(function(e){var r=t.initLoginCipher();if(r.name=t.getValueOrDefault(e.name,"--"),r.login.uris=t.makeUriArray(e.login_url),null!=e.folder&&i.has(e.folder)&&n.folderRelationships.push([n.ciphers.length,i.get(e.folder)]),null!=e.identifiers){for(var a in!t.isNullOrWhitespace(e.identifiers.notes)&&(r.notes=e.identifiers.notes.split("\\r\\n").join("\n").split("\\n").join("\n")),"CreditCard"===e.type&&(r.card=new tR,r.type=b.Card),e.identifiers){if(!e.identifiers.hasOwnProperty(a))continue;var o=e.identifiers[a],s=null!=o?o.toString():null;if(!t.isNullOrWhitespace(s)&&"notes"!==a&&"ignoreItemInSecurityScore"!==a){if("custom_fields"===a){o.forEach(function(e){t.processKvp(r,e.name,e.value)});continue}if(r.type===b.Card){if("cardNumber"===a){r.card.number=s,r.card.brand=t.getCardBrand(s);continue}if("nameOnCard"===a){r.card.cardholderName=s;continue}else if("security_code"===a){r.card.code=s;continue}else if("expires"===a){try{var c=new Date(s);r.card.expYear=c.getFullYear().toString(),r.card.expMonth=(c.getMonth()+1).toString()}catch(e){}continue}else if("cardType"===a)continue}else{if(("username"===a||"email"===a)&&t.isNullOrWhitespace(r.login.username)){r.login.username=s;continue}if("password"===a){r.login.password=s;continue}else if("totp"===a){r.login.totp=s;continue}else if((null==r.login.uris||0===r.login.uris.length)&&t.uriFieldNames.indexOf(a)>-1){r.login.uris=t.makeUriArray(s);continue}}t.processKvp(r,a,s)}}t.convertToNoteIfNeeded(r),t.cleanupCipher(r),n.ciphers.push(r)}}),n.success=!0,n}}]),a}(nD),rS=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseXml(e);return null==r?(n.success=!1,n):(Array.from(r.querySelectorAll("PasswordManager > record")).forEach(function(e){var r=t.querySelectorDirectChild(e,"Category"),a=null==r||t.isNullOrWhitespace(r.textContent)||"Unfiled"===r.textContent?null:r.textContent;t.processFolder(n,a);var i=t.querySelectorDirectChild(e,"Account-Name"),o=t.querySelectorDirectChild(e,"User-Id"),s=t.querySelectorDirectChild(e,"Password"),c=t.querySelectorDirectChild(e,"URL"),u=t.querySelectorDirectChild(e,"Notes"),l=t.initLoginCipher();l.name=null!=i?t.getValueOrDefault(i.textContent,"--"):"--",l.notes=null!=u?t.getValueOrDefault(u.textContent):"",l.login.username=null!=o?t.getValueOrDefault(o.textContent):null,l.login.password=null!=s?t.getValueOrDefault(s.textContent):null,l.login.uris=null!=c?t.makeUriArray(c.textContent):null;for(var d=[],f=1;f<=10;f++)d.push("Attribute-"+f);t.querySelectorAllDirectChild(e,d.join(",")).forEach(function(e){if(!t.isNullOrWhitespace(e.textContent)&&"null"!==e.textContent)t.processKvp(l,e.tagName,e.textContent)}),t.cleanupCipher(l),n.ciphers.push(l)}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}}]),a}(nD),rE=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseXml(e);if(null==r)return n.success=!1,n;var a=r.querySelector("passwordsafe");if(null==a)return n.errorMessage="Missing `passwordsafe` node.",n.success=!1,n;var i=a.getAttribute("delimiter");return Array.from(r.querySelectorAll("passwordsafe > entry")).forEach(function(e){var r=t.querySelectorDirectChild(e,"group"),a=null==r||t.isNullOrWhitespace(r.textContent)?null:r.textContent.split(".").join("/");t.processFolder(n,a);var o=t.querySelectorDirectChild(e,"title"),s=t.querySelectorDirectChild(e,"username"),c=t.querySelectorDirectChild(e,"email"),u=t.querySelectorDirectChild(e,"password"),l=t.querySelectorDirectChild(e,"url"),d=t.querySelectorDirectChild(e,"notes"),f=t.initLoginCipher();f.name=null!=o?t.getValueOrDefault(o.textContent,"--"):"--",f.notes=null!=d?t.getValueOrDefault(d.textContent,"").split(i).join("\n"):null,f.login.username=null!=s?t.getValueOrDefault(s.textContent):null,f.login.password=null!=u?t.getValueOrDefault(u.textContent):null,f.login.uris=null!=l?t.makeUriArray(l.textContent):null,t.isNullOrWhitespace(f.login.username)&&null!=c?f.login.username=t.getValueOrDefault(c.textContent):null!=c&&!t.isNullOrWhitespace(c.textContent)&&(f.notes=t.isNullOrWhitespace(f.notes)?"Email: "+c.textContent:f.notes+"\nEmail: "+c.textContent),t.cleanupCipher(f),n.ciphers.push(f)}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n}}]),a}(nD),rP=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!1);return null==r?(n.success=!1,n):(r.forEach(function(e){if(!(e.length<1)){e.length>5&&t.processFolder(n,e[5]);var r=t.initLoginCipher();r.name=t.getValueOrDefault(e[0],"--"),e.length>4&&(r.notes=t.getValueOrDefault(e[4],"").split("\xac").join("\n")),e.length>2&&(r.login.username=t.getValueOrDefault(e[2])),e.length>3&&(r.login.password=t.getValueOrDefault(e[3])),e.length>1&&(r.login.uris=t.makeUriArray(e[1])),t.cleanupCipher(r),n.ciphers.push(r)}}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}}]),a}(nD),r_=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){if("true"!==e.trash){var r=t.initLoginCipher();if(r.name=t.getValueOrDefault(e.name),r.notes=t.getValueOrDefault(e.notes),"LoginItem"===e.type)r.login.uris=t.makeUriArray(e.website),r.login.password=t.getValueOrDefault(e.password),r.login.username=t.getValueOrDefault(e.username);else if("CreditCardItem"===e.type){r.type=b.Card,r.card=new tR,r.card.cardholderName=t.getValueOrDefault(e.cardholder),r.card.number=t.getValueOrDefault(e.number),r.card.brand=t.getCardBrand(r.card.number),r.card.code=t.getValueOrDefault(e.verification);try{var a=t.getValueOrDefault(e.expiryMonth);if(null!=a){var i=parseInt(a,null);null!=i&&i>=1&&i<=12&&(r.card.expMonth=i.toString())}}catch(e){}try{var o=t.getValueOrDefault(e.expiryYear);if(null!=o){var s=parseInt(o,null);null!=s&&(r.card.expYear=s.toString())}}catch(e){}var c=t.getValueOrDefault(e.pin);null!=c&&t.processKvp(r,"PIN",c);var u=t.getValueOrDefault(e.zipCode);null!=u&&t.processKvp(r,"Zip Code",u)}t.cleanupCipher(r),n.ciphers.push(r)}}),n.success=!0,n)}}]),a}(nD),rA=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);if(null==r)return n.success=!1,n;var a=1;return r.forEach(function(e){var i=!t.isNullOrWhitespace(e.Folder)&&e.Folder.startsWith("/")?e.Folder.replace("/",""):e.Folder,o=t.isNullOrWhitespace(i)?null:i;t.processFolder(n,o);var s=t.initLoginCipher();if(s.notes=t.getValueOrDefault(e.Note),s.name=t.getValueOrDefault(e.Name,"--"),s.login.username=t.getValueOrDefault(e.Login),s.login.password=t.getValueOrDefault(e.Pwd),s.login.uris=t.makeUriArray(e.Url),!t.isNullOrWhitespace(e.Rf_fields)){var c=[e.Rf_fields];null!=e.__parsed_extra&&e.__parsed_extra.length>0&&(c=c.concat(e.__parsed_extra)),c.forEach(function(e){var n=e.split(":");if(!(n.length<3)){var r="-no-name-"===n[0]?null:n[0],a=4===n.length&&"rck"===n[2]?n[1]:n[2];t.processKvp(s,r,a)}})}if(t.convertToNoteIfNeeded(s),t.cleanupCipher(s),!(a===r.length&&"--"===s.name&&t.isNullOrWhitespace(s.login.password)))n.ciphers.push(s),a++}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n}}]),a}(nD),rR=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseXml(e);if(null==r)return n.success=!1,n;if(null==r.querySelector("database"))return n.errorMessage="Missing `database` node.",n.success=!1,n;var a=new Map;return Array.from(r.querySelectorAll("database > label")).forEach(function(e){var r=e.getAttribute("name"),i=e.getAttribute("id");if(!t.isNullOrWhitespace(r)&&!t.isNullOrWhitespace(i)){a.set(i,n.folders.length);var o=new ng;o.name=r,n.folders.push(o)}}),Array.from(r.querySelectorAll("database > card")).forEach(function(e){if("true"!==e.getAttribute("template")){var r=t.querySelectorDirectChild(e,"label_id");if(null!=r){var i=r.textContent;!t.isNullOrWhitespace(i)&&a.has(i)&&n.folderRelationships.push([n.ciphers.length,a.get(i)])}var o=t.initLoginCipher();o.name=t.getValueOrDefault(e.getAttribute("title"),"--"),"note"===e.getAttribute("type")?(o.type=b.SecureNote,o.secureNote=new tj,o.secureNote.type=O.Generic):Array.from(t.querySelectorAllDirectChild(e,"field")).forEach(function(e){var n=e.textContent;if(!t.isNullOrWhitespace(n)){var r=e.getAttribute("name"),a=t.getValueOrDefault(e.getAttribute("type"),"").toLowerCase();"login"===a?o.login.username=n:"password"===a?o.login.password=n:"one_time_password"===a?o.login.totp=n:"notes"===a?o.notes+=n+"\n":"weblogin"===a||"website"===a?o.login.uris=t.makeUriArray(n):t.processKvp(o,r,n)}}),Array.from(t.querySelectorAllDirectChild(e,"notes")).forEach(function(e){o.notes+=e.textContent+"\n"}),t.cleanupCipher(o),n.ciphers.push(o)}}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n}}]),a}(nD),rD=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){var r=t.initLoginCipher();r.name=t.getValueOrDefault(t.nameFromUrl(e.url),"--"),r.notes=t.getValueOrDefault(e.notes),r.login.username=t.getValueOrDefault(e.username),r.login.password=t.getValueOrDefault(e.password),r.login.uris=t.makeUriArray(e.url),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),rM=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){var r=t.initLoginCipher();r.name=t.getValueOrDefault(e.Title),r.notes=t.getValueOrDefault(e.Comment),r.login.uris=t.makeUriArray(e.Url),r.login.password=t.getValueOrDefault(e.Password),r.login.username=t.getValueOrDefault(e.Username),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),rT=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!1);return null==r?(n.success=!1,n):(r.forEach(function(e){if(!(e.length<3)){t.processFolder(n,t.getValueOrDefault(e[e.length-1]));var r=t.initLoginCipher();r.notes=t.getValueOrDefault(e[e.length-2],""),r.name=t.getValueOrDefault(e[1],"--"),"Web Logins"===e[0]||"Servers"===e[0]||"Email Accounts"===e[0]?(r.login.username=t.getValueOrDefault(e[2]),r.login.password=t.getValueOrDefault(e[3]),r.login.uris=t.makeUriArray(e[4]),t.parseFieldsToNotes(r,5,e)):t.parseFieldsToNotes(r,2,e),t.convertToNoteIfNeeded(r),t.cleanupCipher(r),n.ciphers.push(r)}}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}},{key:"parseFieldsToNotes",value:function(e,t,n){for(var r=t;r<n.length-3;r++){if(!this.isNullOrWhitespace(n[r]))e.notes+=n[r]+"\n"}}}]),a}(nD),rj=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseXml(e);return null==r?(n.success=!1,n):(Array.from(r.querySelectorAll("root > Database > Logins > Login")).forEach(function(e){var a=e.getAttribute("ID");if(!t.isNullOrWhitespace(a)){var i=e.getAttribute("Name"),o=e.getAttribute("Password"),s=null,c=null,u=null,l=null,d=null,f=r.querySelector('root > Database > Accounts > Account > LoginLinks > Login[SourceLoginID="'+a+'"]');if(null!=f){var p=f.parentElement.parentElement;null!=p&&(s=p.getAttribute("Name"),c=p.getAttribute("Link"),l=p.getAttribute("ParentID"),u=p.getAttribute("Comments"),!t.isNullOrWhitespace(u)&&(u=u.split("/n").join("\n")))}!t.isNullOrWhitespace(l)&&(d=t.buildGroupText(r,l,""),t.processFolder(n,d));var h=t.initLoginCipher();h.name=t.getValueOrDefault(s,"--"),h.notes=t.getValueOrDefault(u),h.login.username=t.getValueOrDefault(i),h.login.password=t.getValueOrDefault(o),h.login.uris=t.makeUriArray(c),t.cleanupCipher(h),n.ciphers.push(h)}}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}},{key:"buildGroupText",value:function(e,t,n){var r=e.querySelector('root > Database > Groups > Group[ID="'+t+'"]');return null==r?n:(!this.isNullOrWhitespace(n)&&(n="/"+n),n=r.getAttribute("Name")+n,this.buildGroupText(e,r.getAttribute("ParentID"),n))}}]),a}(nD),rN=["kind","autologin","favorite","hexcolor","protectedwithpassword","subdomainonly","type","tk_export_version","note","title","document_content"],rI=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){var r=t.initLoginCipher();if(r.favorite="true"===t.getValueOrDefault(e.favorite,"").toLowerCase(),r.name=t.getValueOrDefault(e.name,"--"),r.notes=t.getValueOrDefault(e.memo,""),r.login.username=t.getValueOrDefault(e.login),r.login.password=t.getValueOrDefault(e.password),r.login.uris=t.makeUriArray(e.url),"login"!==e.kind&&(r.name=t.getValueOrDefault(e.title,"--"),r.notes=t.getValueOrDefault(e.note,"")),"cc"===e.kind){if(r.type=b.Card,r.card=new tR,r.card.cardholderName=t.getValueOrDefault(e.cardholder),r.card.number=t.getValueOrDefault(e.number),r.card.brand=t.getCardBrand(r.card.number),!t.isNullOrWhitespace(e.expiryDate))try{var a=new Date(e.expiryDate);r.card.expYear=a.getFullYear().toString(),r.card.expMonth=(a.getMonth()+1).toString()}catch(e){}}else if("login"!==e.kind)for(var i in r.type=b.SecureNote,r.secureNote=new tj,r.secureNote.type=O.Generic,!t.isNullOrWhitespace(r.notes)&&(r.notes=t.getValueOrDefault(e.document_content,"")),e)e.hasOwnProperty(i)&&0>rN.indexOf(i.toLowerCase())&&!t.isNullOrWhitespace(e[i])&&t.processKvp(r,i,e[i]);t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),rL=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!1);return null==r?(n.success=!1,n):(r.forEach(function(e){if(5===e.length){var r=t.initLoginCipher();r.name=t.getValueOrDefault(e[0],"--"),r.notes=t.getValueOrDefault(e[4]),r.login.username=t.getValueOrDefault(e[1]),r.login.password=t.getValueOrDefault(e[2]),r.login.uris=t.makeUriArray(e[3]),t.cleanupCipher(r),n.ciphers.push(r)}}),n.success=!0,n)}}]),a}(nD),rz=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){var r=t.initLoginCipher();r.name=t.getValueOrDefault(e.Name,"--"),r.login.username=t.getValueOrDefault(e["User name"]),r.login.password=t.getValueOrDefault(e.Password),r.login.uris=t.makeUriArray(e.URL),t.cleanupCipher(r),n.ciphers.push(r)}),n.success=!0,n)}}]),a}(nD),rZ=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a,[{key:"parse",value:function(e){var t=this,n=new nM,r=this.parseCsv(e,!0);return null==r?(n.success=!1,n):(r.forEach(function(e){if(!(t.isNullOrWhitespace(e["Password Name"])&&t.isNullOrWhitespace(e["Secret Name"]))){t.processFolder(n,t.getValueOrDefault(e.ChamberName));var r=t.initLoginCipher();r.favorite="1"===t.getValueOrDefault(e.Favorite,"0"),r.notes=t.getValueOrDefault(e.Notes),r.name=t.getValueOrDefault(e["Password Name"],t.getValueOrDefault(e["Secret Name"],"--")),r.login.uris=t.makeUriArray(t.getValueOrDefault(e["Password URL"],t.getValueOrDefault(e["Secret URL"]))),t.parseData(r,e.SecretData),t.parseData(r,e.CustomData),t.convertToNoteIfNeeded(r),t.cleanupCipher(r),n.ciphers.push(r)}}),this.organization&&this.moveFoldersToCollections(n),n.success=!0,n)}},{key:"parseData",value:function(e,t){var n=this;if(!this.isNullOrWhitespace(t))this.splitNewLine(t).forEach(function(t){var r=t.indexOf(":");if(r<0)return;var a=t.substring(0,r),i=t.length>r?t.substring(r+1):null;if(!(n.isNullOrWhitespace(a)||n.isNullOrWhitespace(i))&&"SecretType"!==a){var o=a.toLowerCase();null==e.login.username&&n.usernameFieldNames.indexOf(o)>-1?e.login.username=i:null==e.login.password&&n.passwordFieldNames.indexOf(o)>-1?e.login.password=i:n.processKvp(e,a,i)}})}}]),a}(nD),rB=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},rF=function(){function e(t,n,r,a,i){(0,T.Z)(this,e),this.cipherService=t,this.folderService=n,this.apiService=r,this.i18nService=a,this.collectionService=i,this.featuredImportOptions=[{id:"bitwardenjson",name:"Bitwarden (json)"},{id:"bitwardencsv",name:"Bitwarden (csv)"},{id:"lastpasscsv",name:"LastPass (csv)"},{id:"chromecsv",name:"Chrome (csv)"},{id:"firefoxcsv",name:"Firefox (csv)"},{id:"keepass2xml",name:"KeePass 2 (xml)"},{id:"1password1pif",name:"1Password (1pif)"},{id:"dashlanejson",name:"Dashlane (json)"}],this.regularImportOptions=[{id:"keepassxcsv",name:"KeePassX (csv)"},{id:"1passwordwincsv",name:"1Password 6 and 7 Windows (csv)"},{id:"roboformcsv",name:"RoboForm (csv)"},{id:"keepercsv",name:"Keeper (csv)"},{id:"enpasscsv",name:"Enpass (csv)"},{id:"enpassjson",name:"Enpass (json)"},{id:"safeincloudxml",name:"SafeInCloud (xml)"},{id:"pwsafexml",name:"Password Safe (xml)"},{id:"stickypasswordxml",name:"Sticky Password (xml)"},{id:"msecurecsv",name:"mSecure (csv)"},{id:"truekeycsv",name:"True Key (csv)"},{id:"passwordbossjson",name:"Password Boss (json)"},{id:"zohovaultcsv",name:"Zoho Vault (csv)"},{id:"splashidcsv",name:"SplashID (csv)"},{id:"passworddragonxml",name:"Password Dragon (xml)"},{id:"padlockcsv",name:"Padlock (csv)"},{id:"passboltcsv",name:"Passbolt (csv)"},{id:"clipperzhtml",name:"Clipperz (html)"},{id:"aviracsv",name:"Avira (csv)"},{id:"saferpasscsv",name:"SaferPass (csv)"},{id:"upmcsv",name:"Universal Password Manager (csv)"},{id:"ascendocsv",name:"Ascendo DataVault (csv)"},{id:"meldiumcsv",name:"Meldium (csv)"},{id:"passkeepcsv",name:"PassKeep (csv)"},{id:"operacsv",name:"Opera (csv)"},{id:"vivaldicsv",name:"Vivaldi (csv)"},{id:"gnomejson",name:"GNOME Passwords and Keys/Seahorse (json)"},{id:"blurcsv",name:"Blur (csv)"},{id:"passwordagentcsv",name:"Password Agent (csv)"},{id:"passpackcsv",name:"Passpack (csv)"},{id:"passmanjson",name:"Passman (json)"},{id:"avastcsv",name:"Avast Passwords (csv)"},{id:"avastjson",name:"Avast Passwords (json)"},{id:"fsecurefsk",name:"F-Secure KEY (fsk)"},{id:"kasperskytxt",name:"Kaspersky Password Manager (txt)"},{id:"remembearcsv",name:"RememBear (csv)"},{id:"passwordwallettxt",name:"PasswordWallet (txt)"},{id:"mykicsv",name:"Myki (csv)"},{id:"securesafecsv",name:"SecureSafe (csv)"},{id:"logmeoncecsv",name:"LogMeOnce (csv)"},{id:"blackberrycsv",name:"BlackBerry Password Keeper (csv)"},{id:"buttercupcsv",name:"Buttercup (csv)"},{id:"codebookcsv",name:"Codebook (csv)"},{id:"encryptrcsv",name:"Encryptr (csv)"},{id:"yoticsv",name:"Yoti (csv)"}]}return(0,j.Z)(e,[{key:"getImportOptions",value:function(){return this.featuredImportOptions.concat(this.regularImportOptions)}},{key:"import",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return rB(this,void 0,void 0,I().mark(function r(){var a,i,o;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.parse(t);case 2:if(!(a=r.sent).success){r.next=18;break}if(!(0===a.folders.length&&0===a.ciphers.length)){r.next=8;break}return r.abrupt("return",Error(this.i18nService.t("importNothingError")));case 8:if(!(a.ciphers.length>0)){r.next=13;break}if(i=Math.floor(a.ciphers.length/2),o=a.ciphers.length-1,!(this.badData(a.ciphers[0])&&this.badData(a.ciphers[i])&&this.badData(a.ciphers[o]))){r.next=13;break}return r.abrupt("return",Error(this.i18nService.t("importFormatError")));case 13:return r.next=15,this.postImport(a,n);case 15:return r.abrupt("return",null);case 18:return r.abrupt("return",Error(this.i18nService.t("importFormatError")));case 19:case"end":return r.stop()}},r,this)}))}},{key:"getImporter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getImporterInstance(e);return null==n?null:(n.organization=t,n)}},{key:"getImporterInstance",value:function(e){if(null==e||""===e)return null;switch(e){case"bitwardencsv":return new nL;case"bitwardenjson":return new nJ;case"lastpasscsv":case"passboltcsv":return new rd;case"keepassxcsv":return new ru;case"aviracsv":return new nI;case"blurcsv":return new nX;case"safeincloudxml":return new rR;case"padlockcsv":return new rb;case"keepass2xml":return new rc;case"chromecsv":case"operacsv":case"vivaldicsv":return new n2;case"firefoxcsv":return new re;case"upmcsv":return new rL;case"saferpasscsv":return new rD;case"meldiumcsv":return new rp;case"1password1pif":return new rm;case"1passwordwincsv":return new rg;case"keepercsv":return new rl;case"passworddragonxml":return new rS;case"enpasscsv":return new n8;case"enpassjson":return new n7;case"pwsafexml":return new rE;case"dashlanejson":return new n6;case"msecurecsv":return new rh;case"stickypasswordxml":return new rj;case"truekeycsv":return new rI;case"clipperzhtml":return new n4;case"roboformcsv":return new rA;case"ascendocsv":return new nT;case"passwordbossjson":return new rC;case"zohovaultcsv":return new rZ;case"splashidcsv":return new rT;case"passkeepcsv":return new rw;case"gnomejson":return new rn;case"passwordagentcsv":return new rO;case"passpackcsv":return new rx;case"passmanjson":return new rk;case"avastcsv":return new nj;case"avastjson":return new nN;case"fsecurefsk":return new rt;case"kasperskytxt":return new rs;case"remembearcsv":return new r_;case"passwordwallettxt":return new rP;case"mykicsv":return new rv;case"securesafecsv":return new rM;case"logmeoncecsv":return new rf;case"blackberrycsv":return new n$;case"buttercupcsv":return new n1;case"codebookcsv":return new n3;case"encryptrcsv":return new n9;case"yoticsv":return new rz;default:return null}}},{key:"postImport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return rB(this,void 0,void 0,I().mark(function n(){var r,a,i,o,s,c,u,l,d,f;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=t){n.next=27;break}r=new nP,a=0;case 3:if(!(a<e.ciphers.length)){n.next=11;break}return n.next=6,this.cipherService.encrypt(e.ciphers[a]);case 6:i=n.sent,r.ciphers.push(new tJ(i));case 8:a++,n.next=3;break;case 11:if(!(null!=e.folders)){n.next=21;break}o=0;case 13:if(!(o<e.folders.length)){n.next=21;break}return n.next=16,this.folderService.encrypt(e.folders[o]);case 16:s=n.sent,r.folders.push(new nw(s));case 18:o++,n.next=13;break;case 21:return null!=e.folderRelationships&&e.folderRelationships.forEach(function(e){return r.folderRelationships.push(new nA(e[0],e[1]))}),n.next=24,this.apiService.postImportCiphers(r);case 24:return n.abrupt("return",n.sent);case 27:c=new n_,u=0;case 29:if(!(u<e.ciphers.length)){n.next=38;break}return e.ciphers[u].organizationId=t,n.next=33,this.cipherService.encrypt(e.ciphers[u]);case 33:l=n.sent,c.ciphers.push(new tJ(l));case 35:u++,n.next=29;break;case 38:if(!(null!=e.collections)){n.next=49;break}d=0;case 40:if(!(d<e.collections.length)){n.next=49;break}return e.collections[d].organizationId=t,n.next=44,this.collectionService.encrypt(e.collections[d]);case 44:f=n.sent,c.collections.push(new nE(f));case 46:d++,n.next=40;break;case 49:return null!=e.collectionRelationships&&e.collectionRelationships.forEach(function(e){return c.collectionRelationships.push(new nA(e[0],e[1]))}),n.next=52,this.apiService.postImportOrganizationCiphers(t,c);case 52:return n.abrupt("return",n.sent);case 53:case"end":return n.stop()}},n,this)}))}},{key:"badData",value:function(e){return(null==e.name||"--"===e.name)&&e.type===b.Login&&null!=e.login&&J.isNullOrWhitespace(e.login.password)}}]),e}(),rU=function(){function e(){(0,T.Z)(this,e)}return(0,j.Z)(e,[{key:"send",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}]),e}(),rV=[];let rH=null;var rW=(0,j.Z)(function e(t,n){(0,T.Z)(this,e),this.password=t,this.date=n}),rq=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e;return(0,T.Z)(this,a),e=r.apply(this,arguments),e.defaultType="",e.minLength=0,e.useUppercase=!1,e.useLowercase=!1,e.useNumbers=!1,e.numberCount=0,e.useSpecial=!1,e.specialCount=0,e.minNumberWords=0,e.capitalize=!1,e.includeNumber=!1,e}return(0,j.Z)(a,[{key:"inEffect",value:function(){return""!==this.defaultType||this.minLength>0||this.numberCount>0||this.specialCount>0||this.useUppercase||this.useLowercase||this.useNumbers||this.useSpecial||this.minNumberWords>0||this.capitalize||this.includeNumber}}]),a}(tP);(l=C||(C={}))[l.TwoFactorAuthentication=0]="TwoFactorAuthentication",l[l.MasterPassword=1]="MasterPassword",l[l.PasswordGenerator=2]="PasswordGenerator",l[l.SingleOrg=3]="SingleOrg",l[l.RequireSso=4]="RequireSso";var rG=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},rK={length:14,ambiguous:!1,number:!0,minNumber:1,uppercase:!0,minUppercase:0,lowercase:!0,minLowercase:0,special:!1,minSpecial:1,type:"password",numWords:3,wordSeparator:"-",capitalize:!1,includeNumber:!1},rQ={options:"passwordGenerationOptions",history:"generatedPasswordHistory"},rY=function(){function e(t,n,r){(0,T.Z)(this,e),this.cryptoService=t,this.storageService=n,this.policyService=r}return(0,j.Z)(e,[{key:"generatePassword",value:function(e){return rG(this,void 0,void 0,I().mark(function t(){var n,r,a,i,o,s,c,u,l,d,f,p,h,v,m,y;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("passphrase"!==(n=Object.assign({},rK,e)).type){t.next=3;break}return t.abrupt("return",this.generatePassphrase(e));case 3:if(this.sanitizePasswordLength(n,!0),r=n.minUppercase+n.minLowercase+n.minNumber+n.minSpecial,n.length<r&&(n.length=r),a=[],n.lowercase&&n.minLowercase>0)for(i=0;i<n.minLowercase;i++)a.push("l");if(n.uppercase&&n.minUppercase>0)for(o=0;o<n.minUppercase;o++)a.push("u");if(n.number&&n.minNumber>0)for(s=0;s<n.minNumber;s++)a.push("n");if(n.special&&n.minSpecial>0)for(c=0;c<n.minSpecial;c++)a.push("s");for(;a.length<n.length;)a.push("a");return t.next=14,this.shuffleArray(a);case 14:u="",l="abcdefghijkmnopqrstuvwxyz",n.ambiguous&&(l+="l"),n.lowercase&&(u+=l),d="ABCDEFGHJKLMNPQRSTUVWXYZ",n.ambiguous&&(d+="IO"),n.uppercase&&(u+=d),f="23456789",n.ambiguous&&(f+="01"),n.number&&(u+=f),p="!@#$%^&*",n.special&&(u+=p),h="",v=0;case 28:if(!(v<n.length)){t.next=51;break}m=void 0,t.t0=a[v],t.next="l"===t.t0?33:"u"===t.t0?35:"n"===t.t0?37:"s"===t.t0?39:"a"===t.t0?41:43;break;case 33:return m=l,t.abrupt("break",44);case 35:return m=d,t.abrupt("break",44);case 37:return m=f,t.abrupt("break",44);case 39:return m=p,t.abrupt("break",44);case 41:return m=u,t.abrupt("break",44);case 43:return t.abrupt("break",44);case 44:return t.next=46,this.cryptoService.randomNumber(0,m.length-1);case 46:y=t.sent,h+=m.charAt(y);case 48:v++,t.next=28;break;case 51:return t.abrupt("return",h);case 52:case"end":return t.stop()}},t,this)}))}},{key:"generatePassphrase",value:function(e){return rG(this,void 0,void 0,I().mark(function t(){var n,r,a,i,o;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(null==(n=Object.assign({},rK,e)).numWords||n.numWords<=2)&&(n.numWords=rK.numWords),(null==n.wordSeparator||0===n.wordSeparator.length||n.wordSeparator.length>1)&&(n.wordSeparator=" "),null==n.capitalize&&(n.capitalize=!1),null==n.includeNumber&&(n.includeNumber=!1),r=rV.length-1,a=Array(n.numWords),i=0;case 8:if(!(i<n.numWords)){t.next=16;break}return t.next=11,this.cryptoService.randomNumber(0,r);case 11:o=t.sent,n.capitalize?a[i]=this.capitalize(rV[o]):a[i]=rV[o];case 13:i++,t.next=8;break;case 16:if(!n.includeNumber){t.next=19;break}return t.next=19,this.appendRandomNumberToRandomWord(a);case 19:return t.abrupt("return",a.join(n.wordSeparator));case 20:case"end":return t.stop()}},t,this)}))}},{key:"getOptions",value:function(){return rG(this,void 0,void 0,I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.optionsCache){e.next=5;break}return e.next=3,this.storageService.get(rQ.options);case 3:null==(t=e.sent)?this.optionsCache=rK:this.optionsCache=Object.assign({},rK,t);case 5:return e.next=7,this.enforcePasswordGeneratorPoliciesOnOptions(this.optionsCache);case 7:return n=e.sent,this.optionsCache=n[0],e.abrupt("return",[this.optionsCache,n[1]]);case 10:case"end":return e.stop()}},e,this)}))}},{key:"enforcePasswordGeneratorPoliciesOnOptions",value:function(e){return rG(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPasswordGeneratorPolicyOptions();case 2:return null!=(n=t.sent)?(e.length<n.minLength&&(e.length=n.minLength),n.useUppercase&&(e.uppercase=!0),n.useLowercase&&(e.lowercase=!0),n.useNumbers&&(e.number=!0),e.minNumber<n.numberCount&&(e.minNumber=n.numberCount),n.useSpecial&&(e.special=!0),e.minSpecial<n.specialCount&&(e.minSpecial=n.specialCount),e.minSpecial+e.minNumber>e.length&&(e.minSpecial=e.length-e.minNumber),e.numWords<n.minNumberWords&&(e.numWords=n.minNumberWords),n.capitalize&&(e.capitalize=!0),n.includeNumber&&(e.includeNumber=!0),("password"===n.defaultType||"passphrase"===n.defaultType)&&(e.type=n.defaultType)):n=new rq,t.abrupt("return",[e,n]);case 5:case"end":return t.stop()}},t,this)}))}},{key:"getPasswordGeneratorPolicyOptions",value:function(){return rG(this,void 0,void 0,I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.policyService){e.next=4;break}e.t0=null,e.next=7;break;case 4:return e.next=6,this.policyService.getAll(C.PasswordGenerator);case 6:e.t0=e.sent;case 7:if(t=e.t0,n=null,!(null==t||0===t.length)){e.next=11;break}return e.abrupt("return",n);case 11:return t.forEach(function(e){if(!!e.enabled&&null!=e.data)null==n&&(n=new rq),null!=e.data.defaultType&&"password"!==n.defaultType&&(n.defaultType=e.data.defaultType),null!=e.data.minLength&&e.data.minLength>n.minLength&&(n.minLength=e.data.minLength),e.data.useUpper&&(n.useUppercase=!0),e.data.useLower&&(n.useLowercase=!0),e.data.useNumbers&&(n.useNumbers=!0),null!=e.data.minNumbers&&e.data.minNumbers>n.numberCount&&(n.numberCount=e.data.minNumbers),e.data.useSpecial&&(n.useSpecial=!0),null!=e.data.minSpecial&&e.data.minSpecial>n.specialCount&&(n.specialCount=e.data.minSpecial),null!=e.data.minNumberWords&&e.data.minNumberWords>n.minNumberWords&&(n.minNumberWords=e.data.minNumberWords),e.data.capitalize&&(n.capitalize=!0),e.data.includeNumber&&(n.includeNumber=!0)}),e.abrupt("return",n);case 13:case"end":return e.stop()}},e,this)}))}},{key:"saveOptions",value:function(e){return rG(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.save(rQ.options,e);case 2:this.optionsCache=e;case 3:case"end":return t.stop()}},t,this)}))}},{key:"getHistory",value:function(){return rG(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoService.hasKey();case 2:if(e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(this.history){e.next=12;break}return e.next=8,this.storageService.get(rQ.history);case 8:return t=e.sent,e.next=11,this.decryptHistory(t);case 11:this.history=e.sent;case 12:return e.abrupt("return",this.history||[]);case 13:case"end":return e.stop()}},e,this)}))}},{key:"addHistory",value:function(e){return rG(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cryptoService.hasKey();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,this.getHistory();case 7:if(n=t.sent,!this.matchesPrevious(e,n)){t.next=10;break}return t.abrupt("return");case 10:return n.unshift(new rW(e,Date.now())),n.length>100&&n.pop(),t.next=14,this.encryptHistory(n);case 14:return r=t.sent,t.next=17,this.storageService.save(rQ.history,r);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}},t,this)}))}},{key:"clear",value:function(){return rG(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.history=[],e.next=3,this.storageService.remove(rQ.history);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))}},{key:"passwordStrength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==e||0===e.length)return null;var n=["bitwarden","bit","warden"];return null!=t&&t.length>0&&(n=n.concat(t)),A(e,Array.from(new Set(n)))}},{key:"normalizeOptions",value:function(e,t){e.minLowercase=0,e.minUppercase=0,!e.length||e.length<5?e.length=5:e.length>128&&(e.length=128),e.length<t.minLength&&(e.length=t.minLength),e.minNumber?e.minNumber>e.length?e.minNumber=e.length:e.minNumber>9&&(e.minNumber=9):e.minNumber=0,e.minNumber<t.numberCount&&(e.minNumber=t.numberCount),e.minSpecial?e.minSpecial>e.length?e.minSpecial=e.length:e.minSpecial>9&&(e.minSpecial=9):e.minSpecial=0,e.minSpecial<t.specialCount&&(e.minSpecial=t.specialCount),e.minSpecial+e.minNumber>e.length&&(e.minSpecial=e.length-e.minNumber),null==e.numWords||e.length<3?e.numWords=3:e.numWords>20&&(e.numWords=20),e.numWords<t.minNumberWords&&(e.numWords=t.minNumberWords),null!=e.wordSeparator&&e.wordSeparator.length>1&&(e.wordSeparator=e.wordSeparator[0]),this.sanitizePasswordLength(e,!1)}},{key:"capitalize",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"appendRandomNumberToRandomWord",value:function(e){return rG(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==e||e.length<=0)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.cryptoService.randomNumber(0,e.length-1);case 4:return n=t.sent,t.next=7,this.cryptoService.randomNumber(0,9);case 7:r=t.sent,e[n]=e[n]+r;case 9:case"end":return t.stop()}},t,this)}))}},{key:"encryptHistory",value:function(e){return rG(this,void 0,void 0,I().mark(function t(){var n,r=this;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==e||0===e.length)){t.next=2;break}return t.abrupt("return",Promise.resolve([]));case 2:return n=e.map(function(e){return rG(r,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cryptoService.encrypt(e.password);case 2:return n=t.sent,t.abrupt("return",new rW(n.encryptedString,e.date));case 4:case"end":return t.stop()}},t,this)}))}),t.next=5,Promise.all(n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t)}))}},{key:"decryptHistory",value:function(e){return rG(this,void 0,void 0,I().mark(function t(){var n,r=this;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==e||0===e.length)){t.next=2;break}return t.abrupt("return",Promise.resolve([]));case 2:return n=e.map(function(e){return rG(r,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cryptoService.decryptToUtf8(new tE(e.password));case 2:return n=t.sent,t.abrupt("return",new rW(n,e.date));case 4:case"end":return t.stop()}},t,this)}))}),t.next=5,Promise.all(n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t)}))}},{key:"matchesPrevious",value:function(e,t){return null!=t&&0!==t.length&&t[t.length-1].password===e}},{key:"shuffleArray",value:function(e){return rG(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.length-1;case 1:if(!(n>0)){t.next=11;break}return t.next=4,this.cryptoService.randomNumber(0,n);case 4:a=[e[r=t.sent],e[n]],e[n]=a[0],e[r]=a[1];case 8:n--,t.next=1;break;case 11:case"end":return t.stop()}},t,this)}))}},{key:"sanitizePasswordLength",value:function(e,t){var n=0,r=0,a=e.minNumber,i=e.minSpecial;e.uppercase&&e.minUppercase<=0?n=1:!e.uppercase&&(n=0),e.lowercase&&e.minLowercase<=0?r=1:!e.lowercase&&(r=0),e.number&&e.minNumber<=0?a=1:!e.number&&(a=0),e.special&&e.minSpecial<=0?i=1:!e.special&&(i=0),(!e.length||e.length<1)&&(e.length=10);var o=n+r+a+i;e.length<o&&(e.length=o),t&&(e.minUppercase=n,e.minLowercase=r,e.minNumber=a,e.minSpecial=i)}}]),e}(),rJ=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e;return(0,T.Z)(this,a),e=r.apply(this,arguments),e.minComplexity=0,e.minLength=0,e.requireUpper=!1,e.requireLower=!1,e.requireNumbers=!1,e.requireSpecial=!1,e}return(0,j.Z)(a)}(tP),r$=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t;return((0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.id=e.id,t.organizationId=e.organizationId,t.type=e.type,t.data=e.data,t.enabled=e.enabled,t)}return(0,j.Z)(a)}(tP),rX=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},r0={policiesPrefix:"policies_"},r1=function(){function e(t,n){(0,T.Z)(this,e),this.userService=t,this.storageService=n}return(0,j.Z)(e,[{key:"clearCache",value:function(){this.policyCache=null}},{key:"getAll",value:function(e){return rX(this,void 0,void 0,I().mark(function t(){var n,r,a,i;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.policyCache){t.next=10;break}return t.next=3,this.userService.getUserId();case 3:return n=t.sent,t.next=6,this.storageService.get(r0.policiesPrefix+n);case 6:for(i in r=t.sent,a=[],r)r.hasOwnProperty(i)&&a.push(new r$(r[i]));this.policyCache=a;case 10:if(!(null!=e)){t.next=14;break}return t.abrupt("return",this.policyCache.filter(function(t){return t.type===e}));case 14:return t.abrupt("return",this.policyCache);case 15:case"end":return t.stop()}},t,this)}))}},{key:"replace",value:function(e){return rX(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.save(r0.policiesPrefix+n,e);case 5:this.policyCache=null;case 6:case"end":return t.stop()}},t,this)}))}},{key:"clear",value:function(e){return rX(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.remove(r0.policiesPrefix+e);case 2:this.policyCache=null;case 3:case"end":return t.stop()}},t,this)}))}},{key:"getMasterPasswordPolicyOptions",value:function(e){return rX(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,null!=e){t.next=7;break}return t.next=4,this.getAll(C.MasterPassword);case 4:e=t.sent,t.next=8;break;case 7:e=e.filter(function(e){return e.type===C.MasterPassword});case 8:if(!(null==e||0===e.length)){t.next=10;break}return t.abrupt("return",n);case 10:return e.forEach(function(e){if(!!e.enabled&&null!=e.data)null==n&&(n=new rJ),null!=e.data.minComplexity&&e.data.minComplexity>n.minComplexity&&(n.minComplexity=e.data.minComplexity),null!=e.data.minLength&&e.data.minLength>n.minLength&&(n.minLength=e.data.minLength),e.data.requireUpper&&(n.requireUpper=!0),e.data.requireLower&&(n.requireLower=!0),e.data.requireNumbers&&(n.requireNumbers=!0),e.data.requireSpecial&&(n.requireSpecial=!0)}),t.abrupt("return",n);case 12:case"end":return t.stop()}},t,this)}))}},{key:"evaluateMasterPassword",value:function(e,t,n){return null==n||(!(n.minComplexity>0)||!(n.minComplexity>e))&&(!(n.minLength>0)||!(n.minLength>t.length))&&(!n.requireUpper||t.toLocaleLowerCase()!==t)&&(!n.requireLower||t.toLocaleUpperCase()!==t)&&(!n.requireNumbers||!!/[0-9]/.test(t))&&(!n.requireSpecial||!!/[!@#$%\^&*]/g.test(t))&&!0}}]),e}(),r2=n("31336"),r4=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},r3=function(){function e(t){(0,T.Z)(this,e),this.cipherService=t,this.indexing=!1,this.index=null}return(0,j.Z)(e,[{key:"clearIndex",value:function(){this.index=null}},{key:"isSearchable",value:function(e){return!(null==e||null==this.index&&e.length<2||null!=this.index&&e.length<2&&0!==e.indexOf(">"))}},{key:"indexCiphers",value:function(){return r4(this,void 0,void 0,I().mark(function e(){var t,n=this;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.indexing){e.next=2;break}return e.abrupt("return");case 2:return console.time("search indexing"),this.indexing=!0,this.index=null,(t=new r2.Builder).ref("id"),t.field("shortid",{boost:100,extractor:function(e){return e.id.substr(0,8)}}),t.field("name",{boost:10}),t.field("subtitle",{boost:5,extractor:function(e){return null!=e.subTitle&&e.type===b.Card?e.subTitle.replace(/\*/g,""):e.subTitle}}),t.field("notes"),t.field("login.username",{extractor:function(e){return e.type===b.Login&&null!=e.login?e.login.username:null}}),t.field("login.uris",{boost:2,extractor:function(e){return n.uriExtractor(e)}}),t.field("fields",{extractor:function(e){return n.fieldExtractor(e,!1)}}),t.field("fields_joined",{extractor:function(e){return n.fieldExtractor(e,!0)}}),t.field("attachments",{extractor:function(e){return n.attachmentExtractor(e,!1)}}),t.field("attachments_joined",{extractor:function(e){return n.attachmentExtractor(e,!0)}}),t.field("organizationid",{extractor:function(e){return e.organizationId}}),e.next=20,this.cipherService.getAllDecrypted();case 20:e.sent.forEach(function(e){return t.add(e)}),this.index=t.build(),this.indexing=!1,console.timeEnd("search indexing");case 25:case"end":return e.stop()}},e,this)}))}},{key:"searchCiphers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r4(this,void 0,void 0,I().mark(function r(){var a,i,o,s,c;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=[],null!=e&&(e=e.trim().toLowerCase()),""===e&&(e=null),null!=n){r.next=7;break}return r.next=6,this.cipherService.getAllDecrypted();case 6:n=r.sent;case 7:if(null!=t&&Array.isArray(t)&&t.length>0?n=n.filter(function(e){return t.every(function(t){return null==t||t(e)})}):null!=t&&(n=n.filter(t)),this.isSearchable(e)){r.next=10;break}return r.abrupt("return",n);case 10:if(!this.indexing){r.next=16;break}return r.next=13,new Promise(function(e){return setTimeout(e,250)});case 13:if(!this.indexing){r.next=16;break}return r.next=16,new Promise(function(e){return setTimeout(e,500)});case 16:if(null!=(i=this.getIndexForSearch())){r.next=19;break}return r.abrupt("return",this.searchCiphersBasic(n,e));case 19:if(o=new Map,n.forEach(function(e){return o.set(e.id,e)}),s=null,null!=e&&e.length>1&&0===e.indexOf(">"))try{s=i.search(e.substr(1).trim())}catch(e){}else c=r2.Query.wildcard.LEADING|r2.Query.wildcard.TRAILING,s=i.query(function(t){r2.tokenizer(e).forEach(function(e){var n=e.toString();t.term(n,{fields:["name"],wildcard:c}),t.term(n,{fields:["subtitle"],wildcard:c}),t.term(n,{fields:["login.uris"],wildcard:c}),t.term(n,{})})});return null!=s&&s.forEach(function(e){o.has(e.ref)&&a.push(o.get(e.ref))}),r.abrupt("return",a);case 26:case"end":return r.stop()}},r,this)}))}},{key:"searchCiphersBasic",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=t.trim().toLowerCase(),e.filter(function(e){return n===e.isDeleted&&(!!(null!=e.name&&e.name.toLowerCase().indexOf(t)>-1||t.length>=8&&e.id.startsWith(t)||null!=e.subTitle&&e.subTitle.toLowerCase().indexOf(t)>-1||e.login&&null!=e.login.uri&&e.login.uri.toLowerCase().indexOf(t)>-1)||!1)})}},{key:"getIndexForSearch",value:function(){return this.index}},{key:"fieldExtractor",value:function(e,t){if(!e.hasFields)return null;var n=[];return(e.fields.forEach(function(e){null!=e.name&&n.push(e.name),e.type===w.Text&&null!=e.value&&n.push(e.value)}),0===(n=n.filter(function(e){return""!==e.trim()})).length)?null:t?n.join(" "):n}},{key:"attachmentExtractor",value:function(e,t){if(!e.hasAttachments)return null;var n=[];return(e.attachments.forEach(function(e){null!=e&&null!=e.fileName&&(t&&e.fileName.indexOf(".")>-1?n.push(e.fileName.substr(0,e.fileName.lastIndexOf("."))):n.push(e.fileName))}),0===(n=n.filter(function(e){return""!==e.trim()})).length)?null:t?n.join(" "):n}},{key:"uriExtractor",value:function(e){if(e.type!==b.Login||null==e.login||!e.login.hasUris)return null;var t=[];return e.login.uris.forEach(function(e){if(null!=e.uri&&""!==e.uri){if(null!=e.hostname){t.push(e.hostname);return}var n=e.uri;if(e.match!==k.RegularExpression){var r=n.indexOf("://");r>-1&&(n=n.substr(r+3));var a=n.search(/\?|&|#/);a>-1&&(n=n.substring(0,a))}t.push(n)}}),t.length>0?t:null}}]),e}();(d=S||(S={}))[d.Text=0]="Text",d[d.File=1]="File";var r5=(0,j.Z)(function e(t){if((0,T.Z)(this,e),null!=t)this.id=t.id,this.url=t.url,this.fileName=t.fileName,this.key=t.key,this.size=t.size,this.sizeName=t.sizeName}),r6=(0,j.Z)(function e(t){if((0,T.Z)(this,e),null!=t)this.text=t.text,this.hidden=t.hidden}),r9=(0,j.Z)(function e(t,n){if((0,T.Z)(this,e),null!=t)switch(this.id=t.id,this.accessId=t.accessId,this.userId=n,this.type=t.type,this.name=t.name,this.notes=t.notes,this.key=t.key,this.maxAccessCount=t.maxAccessCount,this.accessCount=t.accessCount,this.revisionDate=t.revisionDate,this.expirationDate=t.expirationDate,this.deletionDate=t.deletionDate,this.password=t.password,this.disabled=t.disable,this.type){case S.Text:this.text=new r6(t.text);break;case S.File:this.file=new r5(t.file)}}),r8=(0,j.Z)(function e(t){switch((0,T.Z)(this,e),this.type=t.type,this.name=t.name?t.name.encryptedString:null,this.notes=t.notes?t.notes.encryptedString:null,this.maxAccessCount=t.maxAccessCount,this.expirationDate=null!=t.expirationDate?t.expirationDate.toISOString():null,this.deletionDate=null!=t.deletionDate?t.deletionDate.toISOString():null,this.key=null!=t.key?t.key.encryptedString:null,this.password=t.password,this.disabled=t.disabled,this.type){case S.Text:this.text=new e$,this.text.text=null!=t.text.text?t.text.text.encryptedString:null,this.text.hidden=t.text.hidden;break;case S.File:this.file=new eJ,this.file.fileName=null!=t.file.fileName?t.file.fileName.encryptedString:null}}),r7=function(){function e(t){if((0,T.Z)(this,e),this.id=null,this.url=null,this.size=null,this.sizeName=null,this.fileName=null,!!t)this.id=t.id,this.url=t.url,this.size=t.size,this.sizeName=t.sizeName}return(0,j.Z)(e,[{key:"fileSize",get:function(){try{if(null!=this.size)return parseInt(this.size,null)}catch(e){}return 0}}]),e}(),ae=function(){function e(t){if((0,T.Z)(this,e),this.text=null,!!t)this.hidden=t.hidden}return(0,j.Z)(e,[{key:"maskedText",get:function(){return null!=this.text?"••••••••":null}}]),e}(),at=function(){function e(t){if((0,T.Z)(this,e),this.id=null,this.accessId=null,this.name=null,this.notes=null,this.type=null,this.text=new ae,this.file=new r7,this.maxAccessCount=null,this.accessCount=0,this.revisionDate=null,this.deletionDate=null,this.expirationDate=null,this.password=null,this.disabled=!1,!!t)this.id=t.id,this.accessId=t.accessId,this.type=t.type,this.maxAccessCount=t.maxAccessCount,this.accessCount=t.accessCount,this.revisionDate=t.revisionDate,this.deletionDate=t.deletionDate,this.expirationDate=t.expirationDate,this.disabled=t.disabled,this.password=t.password}return(0,j.Z)(e,[{key:"urlB64Key",get:function(){return J.fromBufferToUrlB64(this.key)}}]),e}(),an=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return((0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.size=e.size,t.buildDomainModel((0,tC.Z)(t),e,{id:null,url:null,sizeName:null,fileName:null},n,["id","url","sizeName"]),t)}return(0,j.Z)(a,[{key:"decrypt",value:function(e){var t,n,r,a;return t=this,n=void 0,r=void 0,a=I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.decryptObj(new r7(this),{fileName:null},null,e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t,this)}),new(r||(r=Promise))(function(e,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(o,s)}c((a=a.apply(t,n||[])).next())})}},{key:"toSendFileData",value:function(){var e=new r5;return e.size=this.size,this.buildDataModel(this,e,{id:null,url:null,sizeName:null,fileName:null},["id","url","sizeName"]),e}}]),a}(tP),ar=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return((0,T.Z)(this,a),t=r.call(this),null==e)?(0,X.Z)(t):(t.hidden=e.hidden,t.buildDomainModel((0,tC.Z)(t),e,{text:null},n,[]),t)}return(0,j.Z)(a,[{key:"decrypt",value:function(e){return this.decryptObj(new ae(this),{text:null},null,e)}},{key:"toSendTextData",value:function(){var e=new r6;return this.buildDataModel(this,e,{text:null,hidden:null},["hidden"]),e}}]),a}(tP),aa=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,T.Z)(this,a),t=r.call(this),null==e)return(0,X.Z)(t);switch(t.buildDomainModel((0,tC.Z)(t),e,{id:null,accessId:null,userId:null,name:null,notes:null,key:null},n,["id","accessId","userId"]),t.type=e.type,t.maxAccessCount=e.maxAccessCount,t.accessCount=e.accessCount,t.password=e.password,t.disabled=e.disabled,t.revisionDate=null!=e.revisionDate?new Date(e.revisionDate):null,t.deletionDate=null!=e.deletionDate?new Date(e.deletionDate):null,t.expirationDate=null!=e.expirationDate?new Date(e.expirationDate):null,t.type){case S.Text:t.text=new ar(e.text,n);break;case S.File:t.file=new an(e.file,n)}return t}return(0,j.Z)(a,[{key:"decrypt",value:function(){var e,t,n,r;return e=this,t=void 0,n=void 0,r=I().mark(function e(){var t,n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new at(this),!(r=J.global.bitwardenContainerService)){e.next=6;break}n=r.getCryptoService(),e.next=7;break;case 6:throw Error("global bitwardenContainerService not initialized.");case 7:return e.prev=7,e.next=10,n.decryptToBytes(this.key,null);case 10:return t.key=e.sent,e.next=13,n.makeSendKey(t.key);case 13:t.cryptoKey=e.sent,e.next=18;break;case 16:e.prev=16,e.t0=e.catch(7);case 18:return e.next=20,this.decryptObj(t,{name:null,notes:null},null,t.cryptoKey);case 20:e.t1=this.type,e.next=e.t1===S.File?23:e.t1===S.Text?27:31;break;case 23:return e.next=25,this.file.decrypt(t.cryptoKey);case 25:return t.file=e.sent,e.abrupt("break",32);case 27:return e.next=29,this.text.decrypt(t.cryptoKey);case 29:return t.text=e.sent,e.abrupt("break",32);case 31:return e.abrupt("break",32);case 32:return e.abrupt("return",t);case 33:case"end":return e.stop()}},e,this,[[7,16]])}),new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})}},{key:"toSendData",value:function(e){var t=new r9;switch(t.id=this.id,t.accessId=this.accessId,t.userId=e,t.maxAccessCount=this.maxAccessCount,t.accessCount=this.accessCount,t.disabled=this.disabled,t.password=this.password,t.revisionDate=null!=this.revisionDate?this.revisionDate.toISOString():null,t.deletionDate=null!=this.deletionDate?this.deletionDate.toISOString():null,t.expirationDate=null!=this.expirationDate?this.expirationDate.toISOString():null,t.type=this.type,this.buildDataModel(this,t,{name:null,notes:null,key:null}),t.type){case S.File:t.text=this.text.toSendTextData();break;case S.Text:t.file=this.file.toSendFileData()}return t}}]),a}(tP),ai=n(48764).Buffer,ao=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},as={sendsPrefix:"sends_"},ac=function(){function e(t,n,r,a,i,o){(0,T.Z)(this,e),this.cryptoService=t,this.userService=n,this.apiService=r,this.storageService=a,this.i18nService=i,this.cryptoFunctionService=o}return(0,j.Z)(e,[{key:"clearCache",value:function(){this.decryptedSendCache=null}},{key:"encrypt",value:function(e,t,n,r){return ao(this,void 0,void 0,I().mark(function a(){var i,o,s;return I().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i=null,(o=new aa).id=e.id,o.type=e.type,o.disabled=e.disabled,o.maxAccessCount=e.maxAccessCount,null!=e.key){a.next=13;break}return a.next=9,this.cryptoFunctionService.randomBytes(16);case 9:return e.key=a.sent,a.next=12,this.cryptoService.makeSendKey(e.key);case 12:e.cryptoKey=a.sent;case 13:if(!(null!=n)){a.next=18;break}return a.next=16,this.cryptoFunctionService.pbkdf2(n,e.key,"sha256",1e5);case 16:s=a.sent,o.password=J.fromBufferToB64(s);case 18:return a.next=20,this.cryptoService.encrypt(e.key,r);case 20:return o.key=a.sent,a.next=23,this.cryptoService.encrypt(e.name,e.cryptoKey);case 23:return o.name=a.sent,a.next=26,this.cryptoService.encrypt(e.notes,e.cryptoKey);case 26:if(o.notes=a.sent,o.type!==S.Text){a.next=35;break}return o.text=new ar,a.next=31,this.cryptoService.encrypt(e.text.text,e.cryptoKey);case 31:o.text.text=a.sent,o.text.hidden=e.text.hidden,a.next=41;break;case 35:if(o.type!==S.File){a.next=41;break}if(o.file=new an,!(null!=t)){a.next=41;break}return a.next=40,this.parseFile(o,t,e.cryptoKey);case 40:i=a.sent;case 41:return a.abrupt("return",[o,i]);case 42:case"end":return a.stop()}},a,this)}))}},{key:"get",value:function(e){return ao(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(as.sendsPrefix+n);case 5:if(!(null==(r=t.sent)||!r.hasOwnProperty(e))){t.next=8;break}return t.abrupt("return",null);case 8:return t.abrupt("return",new aa(r[e]));case 9:case"end":return t.stop()}},t,this)}))}},{key:"getAll",value:function(){return ao(this,void 0,void 0,I().mark(function e(){var t,n,r,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.getUserId();case 2:return t=e.sent,e.next=5,this.storageService.get(as.sendsPrefix+t);case 5:for(a in n=e.sent,r=[],n)n.hasOwnProperty(a)&&r.push(new aa(n[a]));return e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}))}},{key:"getAllDecrypted",value:function(){return ao(this,void 0,void 0,I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=this.decryptedSendCache)){e.next=2;break}return e.abrupt("return",this.decryptedSendCache);case 2:return e.next=4,this.cryptoService.hasKey();case 4:if(e.sent){e.next=7;break}throw Error("No key.");case 7:return t=[],n=[],e.next=11,this.getAll();case 11:return e.sent.forEach(function(e){n.push(e.decrypt().then(function(e){return t.push(e)}))}),e.next=15,Promise.all(n);case 15:return t.sort(J.getSortFunction(this.i18nService,"name")),this.decryptedSendCache=t,e.abrupt("return",this.decryptedSendCache);case 18:case"end":return e.stop()}},e,this)}))}},{key:"saveWithServer",value:function(e){return ao(this,void 0,void 0,I().mark(function t(){var n,r,a,i,o,s;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new r8(e[0]),null!=e[0].id){t.next=29;break}if(e[0].type!==S.Text){t.next=8;break}return t.next=5,this.apiService.postSend(n);case 5:r=t.sent,t.next=26;break;case 8:a=new FormData,t.prev=9,i=new Blob([e[1]],{type:"application/octet-stream"}),a.append("model",JSON.stringify(n)),a.append("data",i,e[0].file.fileName.encryptedString),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(9),!(J.isNode&&!J.isBrowser)){t.next=22;break}a.append("model",JSON.stringify(n)),a.append("data",ai.from(e[1]),{filepath:e[0].file.fileName.encryptedString,contentType:"application/octet-stream"}),t.next=23;break;case 22:throw t.t0;case 23:return t.next=25,this.apiService.postSendFile(a);case 25:r=t.sent;case 26:e[0].id=r.id,t.next=32;break;case 29:return t.next=31,this.apiService.putSend(e[0].id,n);case 31:r=t.sent;case 32:return t.next=34,this.userService.getUserId();case 34:return o=t.sent,s=new r9(r,o),t.next=38,this.upsert(s);case 38:case"end":return t.stop()}},t,this,[[9,15]])}))}},{key:"upsert",value:function(e){return ao(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(as.sendsPrefix+n);case 5:return null==(r=t.sent)&&(r={}),e instanceof r9?r[(a=e).id]=a:e.forEach(function(e){r[e.id]=e}),t.next=10,this.storageService.save(as.sendsPrefix+n,r);case 10:this.decryptedSendCache=null;case 11:case"end":return t.stop()}},t,this)}))}},{key:"replace",value:function(e){return ao(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.save(as.sendsPrefix+n,e);case 5:this.decryptedSendCache=null;case 6:case"end":return t.stop()}},t,this)}))}},{key:"clear",value:function(e){return ao(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.remove(as.sendsPrefix+e);case 2:this.decryptedSendCache=null;case 3:case"end":return t.stop()}},t,this)}))}},{key:"delete",value:function(e){return ao(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(as.sendsPrefix+n);case 5:if(null!=(r=t.sent)){t.next=8;break}return t.abrupt("return");case 8:if("string"!=typeof e){t.next=14;break}if(null!=r[e]){t.next=11;break}return t.abrupt("return");case 11:delete r[e],t.next=15;break;case 14:e.forEach(function(e){delete r[e]});case 15:return t.next=17,this.storageService.save(as.sendsPrefix+n,r);case 17:this.decryptedSendCache=null;case 18:case"end":return t.stop()}},t,this)}))}},{key:"deleteWithServer",value:function(e){return ao(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiService.deleteSend(e);case 2:return t.next=4,this.delete(e);case 4:case"end":return t.stop()}},t,this)}))}},{key:"parseFile",value:function(e,t,n){var r=this;return new Promise(function(a,i){var o=new FileReader;o.readAsArrayBuffer(t),o.onload=function(o){return ao(r,void 0,void 0,I().mark(function r(){return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.cryptoService.encrypt(t.name,n);case 3:return e.file.fileName=r.sent,r.next=6,this.cryptoService.encryptToBytes(o.target.result,n);case 6:a(r.sent),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),i(r.t0);case 13:case"end":return r.stop()}},r,this,[[0,10]])}))},o.onerror=function(e){i("Error reading file.")}})}}]),e}(),au=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},al={settingsPrefix:"settings_",equivalentDomains:"equivalentDomains"},ad=function(){function e(t,n){(0,T.Z)(this,e),this.userService=t,this.storageService=n}return(0,j.Z)(e,[{key:"clearCache",value:function(){this.settingsCache=null}},{key:"getEquivalentDomains",value:function(){return this.getSettingsKey(al.equivalentDomains)}},{key:"setEquivalentDomains",value:function(e){return au(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setSettingsKey(al.equivalentDomains,e);case 2:case"end":return t.stop()}},t,this)}))}},{key:"clear",value:function(e){return au(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.remove(al.settingsPrefix+e);case 2:this.clearCache();case 3:case"end":return t.stop()}},t,this)}))}},{key:"getSettings",value:function(){return au(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.settingsCache){e.next=5;break}return e.next=3,this.userService.getUserId();case 3:t=e.sent,this.settingsCache=this.storageService.get(al.settingsPrefix+t);case 5:return e.abrupt("return",this.settingsCache);case 6:case"end":return e.stop()}},e,this)}))}},{key:"getSettingsKey",value:function(e){return au(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSettings();case 2:if(!(null!=(n=t.sent)&&n[e])){t.next=5;break}return t.abrupt("return",n[e]);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}},t,this)}))}},{key:"setSettingsKey",value:function(e,t){return au(this,void 0,void 0,I().mark(function n(){var r,a;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.userService.getUserId();case 2:return r=n.sent,n.next=5,this.getSettings();case 5:return!(a=n.sent)&&(a={}),a[e]=t,n.next=10,this.storageService.save(al.settingsPrefix+r,a);case 10:this.settingsCache=a;case 11:case"end":return n.stop()}},n,this)}))}}]),e}(),af=(0,j.Z)(function e(t){(0,T.Z)(this,e),this.id=t.id,this.name=t.name,this.status=t.status,this.type=t.type,this.enabled=t.enabled,this.usePolicies=t.usePolicies,this.useGroups=t.useGroups,this.useDirectory=t.useDirectory,this.useEvents=t.useEvents,this.useTotp=t.useTotp,this.use2fa=t.use2fa,this.useApi=t.useApi,this.useBusinessPortal=t.useBusinessPortal,this.useSso=t.useSso,this.selfHost=t.selfHost,this.usersGetPremium=t.usersGetPremium,this.seats=t.seats,this.maxCollections=t.maxCollections,this.maxStorageGb=t.maxStorageGb,this.ssoBound=t.ssoBound,this.identifier=t.identifier}),ap=(0,j.Z)(function e(t){(0,T.Z)(this,e),this.id=t.id,this.organizationId=t.organizationId,this.type=t.type,this.data=t.data,this.enabled=t.enabled}),ah=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},av={lastSyncPrefix:"lastSync_"},am=function(){function e(t,n,r,a,i,o,s,c,u,l,d,f){(0,T.Z)(this,e),this.userService=t,this.apiService=n,this.settingsService=r,this.folderService=a,this.cipherService=i,this.cryptoService=o,this.collectionService=s,this.storageService=c,this.messagingService=u,this.policyService=l,this.sendService=d,this.logoutCallback=f,this.syncInProgress=!1}return(0,j.Z)(e,[{key:"getLastSync",value:function(){return ah(this,void 0,void 0,I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.getUserId();case 2:if(null!=(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.storageService.get(av.lastSyncPrefix+t);case 7:if(!(n=e.sent)){e.next=10;break}return e.abrupt("return",new Date(n));case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}},e,this)}))}},{key:"setLastSync",value:function(e){return ah(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getUserId();case 2:if(null!=(n=t.sent)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,this.storageService.save(av.lastSyncPrefix+n,e.toJSON());case 7:case"end":return t.stop()}},t,this)}))}},{key:"fullSync",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ah(this,void 0,void 0,I().mark(function n(){var r,a,i,o;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.syncStarted(),n.next=3,this.userService.isAuthenticated();case 3:if(n.sent){n.next=6;break}return n.abrupt("return",this.syncCompleted(!1));case 6:return r=new Date,a=!1,n.prev=8,n.next=11,this.needsSyncing(e);case 11:a=n.sent,n.next=18;break;case 14:if(n.prev=14,n.t0=n.catch(8),!t){n.next=18;break}throw n.t0;case 18:if(a){n.next=22;break}return n.next=21,this.setLastSync(r);case 21:case 54:return n.abrupt("return",this.syncCompleted(!1));case 22:return n.next=24,this.userService.getUserId();case 24:return i=n.sent,n.prev=25,n.next=28,this.apiService.getSync();case 28:return o=n.sent,n.next=31,this.syncProfile(o.profile);case 31:return n.next=33,this.syncFolders(i,o.folders);case 33:return n.next=35,this.syncCollections(o.collections);case 35:return n.next=37,this.syncCiphers(i,o.ciphers);case 37:return n.next=39,this.syncSends(i,o.sends);case 39:return n.next=41,this.syncSettings(i,o.domains);case 41:return n.next=43,this.syncPolicies(o.policies);case 43:return n.next=45,this.setLastSync(r);case 45:return n.abrupt("return",this.syncCompleted(!0));case 48:if(n.prev=48,n.t1=n.catch(25),!t){n.next=54;break}throw n.t1;case 55:case"end":return n.stop()}},n,this,[[8,14],[25,48]])}))}},{key:"syncUpsertFolder",value:function(e,t){return ah(this,void 0,void 0,I().mark(function n(){var r,a,i;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.syncStarted(),n.next=3,this.userService.isAuthenticated();case 3:if(!n.sent){n.next=24;break}return n.prev=4,n.next=7,this.folderService.get(e.id);case 7:if(r=n.sent,!(!t&&null==r||t&&null!=r&&r.revisionDate<e.revisionDate)){n.next=20;break}return n.next=11,this.apiService.getFolder(e.id);case 11:if(!(null!=(a=n.sent))){n.next=20;break}return n.next=15,this.userService.getUserId();case 15:return i=n.sent,n.next=18,this.folderService.upsert(new ny(a,i));case 18:return this.messagingService.send("syncedUpsertedFolder",{folderId:e.id}),n.abrupt("return",this.syncCompleted(!0));case 20:n.next=24;break;case 22:n.prev=22,n.t0=n.catch(4);case 24:return n.abrupt("return",this.syncCompleted(!1));case 25:case"end":return n.stop()}},n,this,[[4,22]])}))}},{key:"syncDeleteFolder",value:function(e){return ah(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.syncStarted(),t.next=3,this.userService.isAuthenticated();case 3:if(!t.sent){t.next=9;break}return t.next=6,this.folderService.delete(e.id);case 6:return this.messagingService.send("syncedDeletedFolder",{folderId:e.id}),this.syncCompleted(!0),t.abrupt("return",!0);case 9:return t.abrupt("return",this.syncCompleted(!1));case 10:case"end":return t.stop()}},t,this)}))}},{key:"syncUpsertCipher",value:function(e,t){return ah(this,void 0,void 0,I().mark(function n(){var r,a,i,o,s,c,u;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.syncStarted(),n.next=3,this.userService.isAuthenticated();case 3:if(!n.sent){n.next=46;break}return n.prev=4,r=!0,n.next=8,this.cipherService.get(e.id);case 8:if(null!=(a=n.sent)&&a.revisionDate>=e.revisionDate&&(r=!1),i=!1,r&&(t?(r=null!=a,i=!0):null==e.collectionIds||null==e.organizationId?r=null==a:(r=!1,i=!0)),!(!r&&i&&null!=e.organizationId&&null!=e.collectionIds&&e.collectionIds.length>0)){n.next=25;break}return n.next=15,this.collectionService.getAll();case 15:if(!(null!=(o=n.sent))){n.next=25;break}s=0;case 18:if(!(s<o.length)){n.next=25;break}if(!(e.collectionIds.indexOf(o[s].id)>-1)){n.next=22;break}return r=!0,n.abrupt("break",25);case 22:s++,n.next=18;break;case 25:if(!r){n.next=37;break}return n.next=28,this.apiService.getCipher(e.id);case 28:if(!(null!=(c=n.sent))){n.next=37;break}return n.next=32,this.userService.getUserId();case 32:return u=n.sent,n.next=35,this.cipherService.upsert(new tO(c,u));case 35:return this.messagingService.send("syncedUpsertedCipher",{cipherId:e.id}),n.abrupt("return",this.syncCompleted(!0));case 37:n.next=46;break;case 39:if(n.prev=39,n.t0=n.catch(4),!(null!=n.t0&&404===n.t0.statusCode&&t)){n.next=46;break}return n.next=44,this.cipherService.delete(e.id);case 44:return this.messagingService.send("syncedDeletedCipher",{cipherId:e.id}),n.abrupt("return",this.syncCompleted(!0));case 46:return n.abrupt("return",this.syncCompleted(!1));case 47:case"end":return n.stop()}},n,this,[[4,39]])}))}},{key:"syncDeleteCipher",value:function(e){return ah(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.syncStarted(),t.next=3,this.userService.isAuthenticated();case 3:if(!t.sent){t.next=8;break}return t.next=6,this.cipherService.delete(e.id);case 6:return this.messagingService.send("syncedDeletedCipher",{cipherId:e.id}),t.abrupt("return",this.syncCompleted(!0));case 8:return t.abrupt("return",this.syncCompleted(!1));case 9:case"end":return t.stop()}},t,this)}))}},{key:"syncStarted",value:function(){this.syncInProgress=!0,this.messagingService.send("syncStarted")}},{key:"syncCompleted",value:function(e){return this.syncInProgress=!1,this.messagingService.send("syncCompleted",{successfully:e}),e}},{key:"needsSyncing",value:function(e){return ah(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return",!0);case 2:return t.next=4,this.getLastSync();case 4:if(!(null==(n=t.sent)||0===n.getTime())){t.next=7;break}return t.abrupt("return",!0);case 7:return t.next=9,this.apiService.getAccountRevisionDate();case 9:if(!(new Date(t.sent)<=n)){t.next=12;break}return t.abrupt("return",!1);case 12:return t.abrupt("return",!0);case 13:case"end":return t.stop()}},t,this)}))}},{key:"syncProfile",value:function(e){return ah(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getSecurityStamp();case 2:if(!(null!=(n=t.sent)&&n!==e.securityStamp)){t.next=8;break}if(!(null!=this.logoutCallback)){t.next=7;break}return t.next=7,this.logoutCallback(!0);case 7:throw Error("Stamp has changed");case 8:return t.next=10,this.cryptoService.setEncKey(e.key);case 10:return t.next=12,this.cryptoService.setEncPrivateKey(e.privateKey);case 12:return t.next=14,this.cryptoService.setOrgKeys(e.organizations);case 14:return t.next=16,this.userService.setSecurityStamp(e.securityStamp);case 16:return r={},e.organizations.forEach(function(e){r[e.id]=new af(e)}),t.next=20,this.userService.replaceOrganizations(r);case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}},t,this)}))}},{key:"syncFolders",value:function(e,t){return ah(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r={},t.forEach(function(t){r[t.id]=new ny(t,e)}),n.next=4,this.folderService.replace(r);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}},n,this)}))}},{key:"syncCollections",value:function(e){return ah(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={},e.forEach(function(e){n[e.id]=new na(e)}),t.next=4,this.collectionService.replace(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}))}},{key:"syncCiphers",value:function(e,t){return ah(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r={},t.forEach(function(t){r[t.id]=new tO(t,e)}),n.next=4,this.cipherService.replace(r);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}},n,this)}))}},{key:"syncSends",value:function(e,t){return ah(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r={},t.forEach(function(t){r[t.id]=new r9(t,e)}),n.next=4,this.sendService.replace(r);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}},n,this)}))}},{key:"syncSettings",value:function(e,t){return ah(this,void 0,void 0,I().mark(function e(){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],null!=t&&null!=t.equivalentDomains&&(n=n.concat(t.equivalentDomains)),null!=t&&null!=t.globalEquivalentDomains&&t.globalEquivalentDomains.forEach(function(e){e.domains.length>0&&n.push(e.domains)}),e.abrupt("return",this.settingsService.setEquivalentDomains(n));case 4:case"end":return e.stop()}},e,this)}))}},{key:"syncPolicies",value:function(e){return ah(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={},null!=e&&e.forEach(function(e){n[e.id]=new ap(e)}),t.next=4,this.policyService.replace(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}))}}]),e}(),ay=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},ag={accessToken:"accessToken",refreshToken:"refreshToken",twoFactorTokenPrefix:"twoFactorToken_"},ab=function(){function e(t){(0,T.Z)(this,e),this.storageService=t}return(0,j.Z)(e,[{key:"setTokens",value:function(e,t){return Promise.all([this.setToken(e),this.setRefreshToken(t)])}},{key:"setToken",value:function(e){return ay(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.token=e,this.decodedToken=null,t.next=4,this.skipTokenStorage();case 4:if(!t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.abrupt("return",this.storageService.save(ag.accessToken,e));case 7:case"end":return t.stop()}},t,this)}))}},{key:"getToken",value:function(){return ay(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=this.token)){e.next=2;break}return e.abrupt("return",this.token);case 2:return e.next=4,this.storageService.get(ag.accessToken);case 4:return this.token=e.sent,e.abrupt("return",this.token);case 6:case"end":return e.stop()}},e,this)}))}},{key:"setRefreshToken",value:function(e){return ay(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.refreshToken=e,t.next=3,this.skipTokenStorage();case 3:if(!t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.abrupt("return",this.storageService.save(ag.refreshToken,e));case 6:case"end":return t.stop()}},t,this)}))}},{key:"getRefreshToken",value:function(){return ay(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=this.refreshToken)){e.next=2;break}return e.abrupt("return",this.refreshToken);case 2:return e.next=4,this.storageService.get(ag.refreshToken);case 4:return this.refreshToken=e.sent,e.abrupt("return",this.refreshToken);case 6:case"end":return e.stop()}},e,this)}))}},{key:"toggleTokens",value:function(){return ay(this,void 0,void 0,I().mark(function e(){var t,n,r,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:return t=e.sent,e.next=5,this.getRefreshToken();case 5:return n=e.sent,e.next=8,this.storageService.get(t5.vaultTimeoutKey);case 8:return r=e.sent,e.next=11,this.storageService.get(t5.vaultTimeoutActionKey);case 11:if(a=e.sent,!((null!=r||0===r)&&"logOut"===a)){e.next=18;break}return e.next=15,this.clearToken();case 15:return this.token=t,this.refreshToken=n,e.abrupt("return");case 18:return e.next=20,this.setToken(t);case 20:return e.next=22,this.setRefreshToken(n);case 22:case"end":return e.stop()}},e,this)}))}},{key:"setTwoFactorToken",value:function(e,t){return this.storageService.save(ag.twoFactorTokenPrefix+t,e)}},{key:"getTwoFactorToken",value:function(e){return this.storageService.get(ag.twoFactorTokenPrefix+e)}},{key:"clearTwoFactorToken",value:function(e){return this.storageService.remove(ag.twoFactorTokenPrefix+e)}},{key:"clearToken",value:function(){return this.token=null,this.decodedToken=null,this.refreshToken=null,Promise.all([this.storageService.remove(ag.accessToken),this.storageService.remove(ag.refreshToken)])}},{key:"decodeToken",value:function(){if(this.decodedToken)return this.decodedToken;if(null==this.token)throw Error("Token not found.");var e=this.token.split(".");if(3!==e.length)throw Error("JWT must have 3 parts");var t=J.fromUrlB64ToUtf8(e[1]);if(null==t)throw Error("Cannot decode the token");return this.decodedToken=JSON.parse(t),this.decodedToken}},{key:"getTokenExpirationDate",value:function(){var e=this.decodeToken();if(void 0===e.exp)return null;var t=new Date(0);return t.setUTCSeconds(e.exp),t}},{key:"tokenSecondsRemaining",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.getTokenExpirationDate();return null==t?0:Math.round((t.valueOf()-(new Date().valueOf()+1e3*e))/1e3)}},{key:"tokenNeedsRefresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return this.tokenSecondsRemaining()<60*e}},{key:"getUserId",value:function(){var e=this.decodeToken();if(void 0===e.sub)throw Error("No user id found");return e.sub}},{key:"getEmail",value:function(){var e=this.decodeToken();if(void 0===e.email)throw Error("No email found");return e.email}},{key:"getEmailVerified",value:function(){var e=this.decodeToken();if(void 0===e.email_verified)throw Error("No email verification found");return e.email_verified}},{key:"getName",value:function(){var e=this.decodeToken();return void 0===e.name?null:e.name}},{key:"getPremium",value:function(){var e=this.decodeToken();return void 0!==e.premium&&e.premium}},{key:"getIssuer",value:function(){var e=this.decodeToken();if(void 0===e.iss)throw Error("No issuer found");return e.iss}},{key:"skipTokenStorage",value:function(){return ay(this,void 0,void 0,I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageService.get(t5.vaultTimeoutKey);case 2:return t=e.sent,e.next=5,this.storageService.get(t5.vaultTimeoutActionKey);case 5:return n=e.sent,e.abrupt("return",null!=t&&"logOut"===n);case 7:case"end":return e.stop()}},e,this)}))}}]),e}();(f=E||(E={}))[f.Invited=0]="Invited",f[f.Accepted=1]="Accepted",f[f.Confirmed=2]="Confirmed",(p=P||(P={}))[p.Owner=0]="Owner",p[p.Admin=1]="Admin",p[p.User=2]="User",p[p.Manager=3]="Manager";var aw=function(){function e(t){if((0,T.Z)(this,e),null!=t)this.id=t.id,this.name=t.name,this.status=t.status,this.type=t.type,this.enabled=t.enabled,this.usePolicies=t.usePolicies,this.useGroups=t.useGroups,this.useDirectory=t.useDirectory,this.useEvents=t.useEvents,this.useTotp=t.useTotp,this.use2fa=t.use2fa,this.useApi=t.useApi,this.useBusinessPortal=t.useBusinessPortal,this.useSso=t.useSso,this.selfHost=t.selfHost,this.usersGetPremium=t.usersGetPremium,this.seats=t.seats,this.maxCollections=t.maxCollections,this.maxStorageGb=t.maxStorageGb,this.ssoBound=t.ssoBound,this.identifier=t.identifier}return(0,j.Z)(e,[{key:"canAccess",get:function(){return this.type===P.Owner||this.enabled&&this.status===E.Confirmed}},{key:"isManager",get:function(){return this.type===P.Manager||this.type===P.Owner||this.type===P.Admin}},{key:"isAdmin",get:function(){return this.type===P.Owner||this.type===P.Admin}},{key:"isOwner",get:function(){return this.type===P.Owner}}]),e}(),ak=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},ax={userId:"userId",userEmail:"userEmail",stamp:"securityStamp",kdf:"kdf",kdfIterations:"kdfIterations",organizationsPrefix:"organizations_"},aO=function(){function e(t,n){(0,T.Z)(this,e),this.tokenService=t,this.storageService=n}return(0,j.Z)(e,[{key:"setInformation",value:function(e,t,n,r){return this.email=t,this.userId=e,this.kdf=n,this.kdfIterations=r,Promise.all([this.storageService.save(ax.userEmail,t),this.storageService.save(ax.userId,e),this.storageService.save(ax.kdf,n),this.storageService.save(ax.kdfIterations,r)])}},{key:"setSecurityStamp",value:function(e){return this.stamp=e,this.storageService.save(ax.stamp,e)}},{key:"getUserId",value:function(){return ak(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.userId){e.next=4;break}return e.next=3,this.storageService.get(ax.userId);case 3:this.userId=e.sent;case 4:return e.abrupt("return",this.userId);case 5:case"end":return e.stop()}},e,this)}))}},{key:"getEmail",value:function(){return ak(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.email){e.next=4;break}return e.next=3,this.storageService.get(ax.userEmail);case 3:this.email=e.sent;case 4:return e.abrupt("return",this.email);case 5:case"end":return e.stop()}},e,this)}))}},{key:"getSecurityStamp",value:function(){return ak(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.stamp){e.next=4;break}return e.next=3,this.storageService.get(ax.stamp);case 3:this.stamp=e.sent;case 4:return e.abrupt("return",this.stamp);case 5:case"end":return e.stop()}},e,this)}))}},{key:"getKdf",value:function(){return ak(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.kdf){e.next=4;break}return e.next=3,this.storageService.get(ax.kdf);case 3:this.kdf=e.sent;case 4:return e.abrupt("return",this.kdf);case 5:case"end":return e.stop()}},e,this)}))}},{key:"getKdfIterations",value:function(){return ak(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.kdfIterations){e.next=4;break}return e.next=3,this.storageService.get(ax.kdfIterations);case 3:this.kdfIterations=e.sent;case 4:return e.abrupt("return",this.kdfIterations);case 5:case"end":return e.stop()}},e,this)}))}},{key:"clear",value:function(){return ak(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUserId();case 2:return t=e.sent,e.next=5,Promise.all([this.storageService.remove(ax.userId),this.storageService.remove(ax.userEmail),this.storageService.remove(ax.stamp),this.storageService.remove(ax.kdf),this.storageService.remove(ax.kdfIterations),this.clearOrganizations(t)]);case 5:this.userId=this.email=this.stamp=null,this.kdf=null,this.kdfIterations=null;case 8:case"end":return e.stop()}},e,this)}))}},{key:"isAuthenticated",value:function(){return ak(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tokenService.getToken();case 2:if(null!=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,this.getUserId();case 7:return t=e.sent,e.abrupt("return",null!=t);case 9:case"end":return e.stop()}},e,this)}))}},{key:"canAccessPremium",value:function(){return ak(this,void 0,void 0,I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isAuthenticated();case 2:if(e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:if(!this.tokenService.getPremium()){e.next=8;break}return e.abrupt("return",!0);case 8:return e.next=10,this.getAllOrganizations();case 10:t=e.sent,n=0;case 12:if(!(n<t.length)){e.next=18;break}if(!(t[n].usersGetPremium&&t[n].enabled)){e.next=15;break}return e.abrupt("return",!0);case 15:n++,e.next=12;break;case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,this)}))}},{key:"getOrganization",value:function(e){return ak(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.get(ax.organizationsPrefix+n);case 5:if(!(null==(r=t.sent)||!r.hasOwnProperty(e))){t.next=8;break}return t.abrupt("return",null);case 8:return t.abrupt("return",new aw(r[e]));case 9:case"end":return t.stop()}},t,this)}))}},{key:"getAllOrganizations",value:function(){return ak(this,void 0,void 0,I().mark(function e(){var t,n,r,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUserId();case 2:return t=e.sent,e.next=5,this.storageService.get(ax.organizationsPrefix+t);case 5:for(a in n=e.sent,r=[],n)n.hasOwnProperty(a)&&r.push(new aw(n[a]));return e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}))}},{key:"replaceOrganizations",value:function(e){return ak(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getUserId();case 2:return n=t.sent,t.next=5,this.storageService.save(ax.organizationsPrefix+n,e);case 5:case"end":return t.stop()}},t,this)}))}},{key:"clearOrganizations",value:function(e){return ak(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.remove(ax.organizationsPrefix+e);case 2:case"end":return t.stop()}},t,this)}))}}]),e}(),aC=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},aS=function(){function e(t,n,r,a,i,o,s,c,u,l){var d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null;(0,T.Z)(this,e),this.cipherService=t,this.folderService=n,this.collectionService=r,this.cryptoService=a,this.platformUtilsService=i,this.storageService=o,this.messagingService=s,this.searchService=c,this.userService=u,this.tokenService=l,this.lockedCallback=d,this.loggedOutCallback=f,this.pinProtectedKey=null,this.biometricLocked=!0,this.inited=!1}return(0,j.Z)(e,[{key:"init",value:function(e){var t=this;if(!this.inited)this.inited=!0,e&&(this.checkVaultTimeout(),setInterval(function(){return t.checkVaultTimeout()},1e4))}},{key:"isLocked",value:function(){return aC(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoService.hasKey();case 2:if(!(t=e.sent)){e.next=11;break}return e.next=6,this.isBiometricLockSet();case 6:if(e.t0=e.sent,!e.t0){e.next=9;break}e.t0=this.biometricLocked;case 9:if(!e.t0){e.next=11;break}return e.abrupt("return",!0);case 11:return e.abrupt("return",!t);case 12:case"end":return e.stop()}},e,this)}))}},{key:"checkVaultTimeout",value:function(){return aC(this,void 0,void 0,I().mark(function e(){var t,n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.platformUtilsService.isViewOpen();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.userService.isAuthenticated();case 6:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.isLocked();case 11:if(!e.sent){e.next=13;break}return e.abrupt("return");case 13:if(null!=(t=this.platformUtilsService.lockTimeout())){e.next=18;break}return e.next=17,this.storageService.get(t5.vaultTimeoutKey);case 17:t=e.sent;case 18:if(!(null==t||t<0)){e.next=20;break}return e.abrupt("return");case 20:return e.next=22,this.storageService.get(t5.lastActiveKey);case 22:if(null!=(n=e.sent)){e.next=25;break}return e.abrupt("return");case 25:if(r=60*t,!((new Date().getTime()-n)/1e3>=r)){e.next=38;break}return e.next=30,this.storageService.get(t5.vaultTimeoutActionKey);case 30:if("logOut"!==e.sent){e.next=36;break}return e.next=34,this.logOut();case 34:e.next=38;break;case 36:return e.next=38,this.lock(!0);case 38:case"end":return e.stop()}},e,this)}))}},{key:"lock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return aC(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.isAuthenticated();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:if(this.biometricLocked=!0,!e){t.next=16;break}return t.next=9,this.isBiometricLockSet();case 9:if(!(t.sent&&this.platformUtilsService.supportsSecureStorage())){t.next=16;break}if(this.messagingService.send("locked"),!(null!=this.lockedCallback)){t.next=15;break}return t.next=15,this.lockedCallback();case 15:return t.abrupt("return");case 16:return t.next=18,Promise.all([this.cryptoService.clearKey(),this.cryptoService.clearOrgKeys(!0),this.cryptoService.clearKeyPair(!0),this.cryptoService.clearEncKey(!0)]);case 18:if(this.folderService.clearCache(),this.cipherService.clearCache(),this.collectionService.clearCache(),this.searchService.clearIndex(),this.messagingService.send("locked"),!(null!=this.lockedCallback)){t.next=26;break}return t.next=26,this.lockedCallback();case 26:case"end":return t.stop()}},t,this)}))}},{key:"logOut",value:function(){return aC(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=this.loggedOutCallback)){e.next=3;break}return e.next=3,this.loggedOutCallback();case 3:case"end":return e.stop()}},e,this)}))}},{key:"setVaultTimeoutOptions",value:function(e,t){return aC(this,void 0,void 0,I().mark(function n(){return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.storageService.save(t5.vaultTimeoutKey,e);case 2:return n.next=4,this.storageService.save(t5.vaultTimeoutActionKey,t);case 4:return n.next=6,this.cryptoService.toggleKey();case 6:return n.next=8,this.tokenService.toggleTokens();case 8:case"end":return n.stop()}},n,this)}))}},{key:"isPinLockSet",value:function(){return aC(this,void 0,void 0,I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageService.get(t5.protectedPin);case 2:return t=e.sent,e.next=5,this.storageService.get(t5.pinProtectedKey);case 5:return n=e.sent,e.abrupt("return",[null!=t,null!=n]);case 7:case"end":return e.stop()}},e,this)}))}},{key:"isBiometricLockSet",value:function(){return aC(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageService.get(t5.biometricUnlockKey);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}},{key:"clear",value:function(){return this.pinProtectedKey=null,this.storageService.remove(t5.protectedPin)}}]),e}(),aE=n("51830"),aP=(0,j.Z)(function e(){(0,T.Z)(this,e)}),a_=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},aA=function(){function e(t,n){(0,T.Z)(this,e),this.win=t,this.platformUtilsService=n,this.crypto=void 0!==t.crypto?t.crypto:null,this.subtle=this.crypto&&void 0!==t.crypto.subtle?t.crypto.subtle:null,this.isIE=n.isIE();var r=t.navigator.userAgent;this.isOldSafari=n.isSafari()&&(r.indexOf(" Version/10.")>-1||r.indexOf(" Version/9.")>-1)}return(0,j.Z)(e,[{key:"pbkdf2",value:function(e,t,n,r){return a_(this,void 0,void 0,I().mark(function a(){var i,o,s,c,u,l,d,f;return I().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(this.isIE||this.isOldSafari)){a.next=6;break}return i="sha256"===n?32:64,o=this.toByteString(e),s=this.toByteString(t),c=aE.pbkdf2(o,s,r,i,n),a.abrupt("return",J.fromByteStringToArray(c).buffer);case 6:return u="sha256"===n?256:512,l=this.toBuf(e),d={name:"PBKDF2",salt:this.toBuf(t),iterations:r,hash:{name:this.toWebCryptoAlgorithm(n)}},a.next=12,this.subtle.importKey("raw",l,{name:"PBKDF2"},!1,["deriveBits"]);case 12:return f=a.sent,a.next=15,this.subtle.deriveBits(d,f,u);case 15:return a.abrupt("return",a.sent);case 16:case"end":return a.stop()}},a,this)}))}},{key:"hkdf",value:function(e,t,n,r,a){return a_(this,void 0,void 0,I().mark(function i(){var o,s,c;return I().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=this.toBuf(t),s={name:"HKDF",salt:o,info:this.toBuf(n),hash:{name:this.toWebCryptoAlgorithm(a)}},i.next=5,this.subtle.importKey("raw",e,{name:"HKDF"},!1,["deriveBits"]);case 5:return c=i.sent,i.next=8,this.subtle.deriveBits(s,c,8*r);case 8:return i.abrupt("return",i.sent);case 9:case"end":return i.stop()}},i,this)}))}},{key:"hkdfExpand",value:function(e,t,n,r){return a_(this,void 0,void 0,I().mark(function a(){var i,o,s,c,u,l,d,f;return I().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(n>255*(i="sha256"===r?32:64))){a.next=3;break}throw Error("outputByteSize is too large.");case 3:if(!(new Uint8Array(e).length<i)){a.next=6;break}throw Error("prk is too small.");case 6:o=new Uint8Array(this.toBuf(t)),s=0,c=new Uint8Array(0),l=new Uint8Array((u=Math.ceil(n/i))*i),d=0;case 13:if(!(d<u)){a.next=30;break}return(f=new Uint8Array(c.length+o.length+1)).set(c),f.set(o,c.length),f.set([d+1],f.length-1),a.t0=Uint8Array,a.next=21,this.hmac(f.buffer,e,r);case 21:if(a.t1=a.sent,c=new a.t0(a.t1),l.set(c,s),!((s+=c.length)>=n)){a.next=27;break}return a.abrupt("break",30);case 27:d++,a.next=13;break;case 30:return a.abrupt("return",l.slice(0,n).buffer);case 31:case"end":return a.stop()}},a,this)}))}},{key:"hash",value:function(e,t){return a_(this,void 0,void 0,I().mark(function n(){var r,a,i;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(this.isIE&&"sha1"===t||"md5"===t)){n.next=5;break}return r="md5"===t?aE.md.md5.create():aE.md.sha1.create(),a=this.toByteString(e),r.update(a,"raw"),n.abrupt("return",J.fromByteStringToArray(r.digest().data).buffer);case 5:return i=this.toBuf(e),n.next=8,this.subtle.digest({name:this.toWebCryptoAlgorithm(t)},i);case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}},n,this)}))}},{key:"hmac",value:function(e,t,n){return a_(this,void 0,void 0,I().mark(function r(){var a,i,o,s,c;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(this.isIE&&"sha512"===n)){r.next=7;break}return a=aE.hmac.create(),i=this.toByteString(t),o=this.toByteString(e),a.start(n,i),a.update(o,"raw"),r.abrupt("return",J.fromByteStringToArray(a.digest().data).buffer);case 7:return s={name:"HMAC",hash:{name:this.toWebCryptoAlgorithm(n)}},r.next=10,this.subtle.importKey("raw",t,s,!1,["sign"]);case 10:return c=r.sent,r.next=13,this.subtle.sign(s,c,e);case 13:return r.abrupt("return",r.sent);case 14:case"end":return r.stop()}},r,this)}))}},{key:"compare",value:function(e,t){return a_(this,void 0,void 0,I().mark(function n(){var r,a,i,o,s,c,u,l;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.randomBytes(32);case 2:return r=n.sent,a={name:"HMAC",hash:{name:"SHA-256"}},n.next=6,this.subtle.importKey("raw",r,a,!1,["sign"]);case 6:return i=n.sent,n.next=9,this.subtle.sign(a,i,e);case 9:return o=n.sent,n.next=12,this.subtle.sign(a,i,t);case 12:if(s=n.sent,!(o.byteLength!==s.byteLength)){n.next=15;break}return n.abrupt("return",!1);case 15:c=new Uint8Array(o),u=new Uint8Array(s),l=0;case 18:if(!(l<u.length)){n.next=24;break}if(!(c[l]!==u[l])){n.next=21;break}return n.abrupt("return",!1);case 21:l++,n.next=18;break;case 24:return n.abrupt("return",!0);case 25:case"end":return n.stop()}},n,this)}))}},{key:"hmacFast",value:function(e,t,n){var r=aE.hmac.create();return r.start(n,t),r.update(e),Promise.resolve(r.digest().getBytes())}},{key:"compareFast",value:function(e,t){return a_(this,void 0,void 0,I().mark(function n(){var r,a,i,o,s,c,u;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.randomBytes(32);case 2:for(i=0,r=new Uint32Array(n.sent),a=aE.util.createBuffer();i<r.length;i++)a.putInt32(r[i]);return o=a.getBytes(),(s=aE.hmac.create()).start("sha256",o),s.update(e),c=s.digest().getBytes(),s.start(null,null),s.update(t),u=c===s.digest().getBytes(),n.abrupt("return",u);case 16:case"end":return n.stop()}},n,this)}))}},{key:"aesEncrypt",value:function(e,t,n){return a_(this,void 0,void 0,I().mark(function r(){var a;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.subtle.importKey("raw",n,{name:"AES-CBC"},!1,["encrypt"]);case 2:return a=r.sent,r.next=5,this.subtle.encrypt({name:"AES-CBC",iv:t},a,e);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}},r,this)}))}},{key:"aesDecryptFastParameters",value:function(e,t,n,r){var a=new aP;return null!=r.meta&&(a.encKey=r.meta.encKeyByteString,a.macKey=r.meta.macKeyByteString),null==a.encKey&&(a.encKey=aE.util.decode64(r.encKeyB64)),a.data=aE.util.decode64(e),a.iv=aE.util.decode64(t),a.macData=a.iv+a.data,null==a.macKey&&null!=r.macKeyB64&&(a.macKey=aE.util.decode64(r.macKeyB64)),null!=n&&(a.mac=aE.util.decode64(n)),null==r.meta&&(r.meta={}),null==r.meta.encKeyByteString&&(r.meta.encKeyByteString=a.encKey),null!=a.macKey&&null==r.meta.macKeyByteString&&(r.meta.macKeyByteString=a.macKey),a}},{key:"aesDecryptFast",value:function(e){var t=aE.util.createBuffer(e.data),n=aE.cipher.createDecipher("AES-CBC",e.encKey);return n.start({iv:e.iv}),n.update(t),n.finish(),Promise.resolve(n.output.toString("utf8"))}},{key:"aesDecrypt",value:function(e,t,n){return a_(this,void 0,void 0,I().mark(function r(){var a;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.subtle.importKey("raw",n,{name:"AES-CBC"},!1,["decrypt"]);case 2:return a=r.sent,r.next=5,this.subtle.decrypt({name:"AES-CBC",iv:t},a,e);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}},r,this)}))}},{key:"rsaEncrypt",value:function(e,t,n){return a_(this,void 0,void 0,I().mark(function r(){var a,i;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a={name:"RSA-OAEP",hash:{name:this.toWebCryptoAlgorithm(n)}},r.next=3,this.subtle.importKey("spki",t,a,!1,["encrypt"]);case 3:return i=r.sent,r.next=6,this.subtle.encrypt(a,i,e);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}},r,this)}))}},{key:"rsaDecrypt",value:function(e,t,n){return a_(this,void 0,void 0,I().mark(function r(){var a,i;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a={name:"RSA-OAEP",hash:{name:this.toWebCryptoAlgorithm(n)}},r.next=3,this.subtle.importKey("pkcs8",t,a,!1,["decrypt"]);case 3:return i=r.sent,r.next=6,this.subtle.decrypt(a,i,e);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}},r,this)}))}},{key:"rsaExtractPublicKey",value:function(e){return a_(this,void 0,void 0,I().mark(function t(){var n,r,a,i,o;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:"RSA-OAEP",hash:{name:this.toWebCryptoAlgorithm("sha1")}},t.next=3,this.subtle.importKey("pkcs8",e,n,!0,["decrypt"]);case 3:return r=t.sent,t.next=6,this.subtle.exportKey("jwk",r);case 6:return i={kty:"RSA",e:(a=t.sent).e,n:a.n,alg:"RSA-OAEP",ext:!0},t.next=10,this.subtle.importKey("jwk",i,n,!0,["encrypt"]);case 10:return o=t.sent,t.next=13,this.subtle.exportKey("spki",o);case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}},t,this)}))}},{key:"rsaGenerateKeyPair",value:function(e){return a_(this,void 0,void 0,I().mark(function t(){var n,r,a,i;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:"RSA-OAEP",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:this.toWebCryptoAlgorithm("sha1")}},t.next=3,this.subtle.generateKey(n,!0,["encrypt","decrypt"]);case 3:return r=t.sent,t.next=6,this.subtle.exportKey("spki",r.publicKey);case 6:return a=t.sent,t.next=9,this.subtle.exportKey("pkcs8",r.privateKey);case 9:return i=t.sent,t.abrupt("return",[a,i]);case 11:case"end":return t.stop()}},t,this)}))}},{key:"randomBytes",value:function(e){var t=new Uint8Array(e);return this.crypto.getRandomValues(t),Promise.resolve(t.buffer)}},{key:"toBuf",value:function(e){var t;return t="string"==typeof e?J.fromUtf8ToArray(e).buffer:e}},{key:"toByteString",value:function(e){var t;return t="string"==typeof e?aE.util.encodeUtf8(e):J.fromBufferToByteString(e)}},{key:"toWebCryptoAlgorithm",value:function(e){if("md5"===e)throw Error("MD5 is not supported in WebCrypto.");return"sha1"===e?"SHA-1":"sha256"===e?"SHA-256":"SHA-512"}}]),e}();(h=_||(_={}))[h.PBKDF2_SHA256=0]="PBKDF2_SHA256";var aR=(0,j.Z)(function e(){(0,T.Z)(this,e)}),aD=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a)}(aR),aM=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){return(0,T.Z)(this,a),r.apply(this,arguments)}return(0,j.Z)(a)}(aD),aT="6.0.0",aj=function(){function e(){(0,T.Z)(this,e),this.identityClientId="web",this.browserCache=null}return(0,j.Z)(e,[{key:"getDevice",value:function(){return null!=this.browserCache?this.browserCache:(-1!==navigator.userAgent.indexOf(" Firefox/")||-1!==navigator.userAgent.indexOf(" Gecko/")?this.browserCache=m.FirefoxBrowser:navigator.userAgent.indexOf(" OPR/")>=0?this.browserCache=m.OperaBrowser:-1!==navigator.userAgent.indexOf(" Edge/")?this.browserCache=m.EdgeBrowser:-1!==navigator.userAgent.indexOf(" Vivaldi/")?this.browserCache=m.VivaldiBrowser:-1!==navigator.userAgent.indexOf(" Safari/")&&-1===navigator.userAgent.indexOf("Chrome")?this.browserCache=m.SafariBrowser:window.chrome&&-1!==navigator.userAgent.indexOf(" Chrome/")?this.browserCache=m.ChromeBrowser:-1!==navigator.userAgent.indexOf(" Trident/")?this.browserCache=m.IEBrowser:this.browserCache=m.UnknownBrowser,this.browserCache)}},{key:"getDeviceString",value:function(){return m[this.getDevice()].toLowerCase().replace("browser","")}},{key:"isFirefox",value:function(){return this.getDevice()===m.FirefoxBrowser}},{key:"isChrome",value:function(){return this.getDevice()===m.ChromeBrowser}},{key:"isEdge",value:function(){return this.getDevice()===m.EdgeBrowser}},{key:"isOpera",value:function(){return this.getDevice()===m.OperaBrowser}},{key:"isVivaldi",value:function(){return this.getDevice()===m.VivaldiBrowser}},{key:"isSafari",value:function(){return this.getDevice()===m.SafariBrowser}},{key:"isIE",value:function(){return this.getDevice()===m.IEBrowser}},{key:"isMacAppStore",value:function(){return!1}},{key:"isDev",value:function(){var e="production";return e&&e.match(/\bdevelopment\b/)}},{key:"isSelfHost",value:function(){return!0}}]),e}(),aN=function(e){(0,$.Z)(i,e);var t,n,r,a=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function i(e,t){var n;return(0,T.Z)(this,i),(n=a.call(this)).i18nService=e,n.messagingService=t,n}return(0,j.Z)(i,[{key:"analyticsId",value:function(){return console.warn("No analytics, please fix the caller"),""}},{key:"isViewOpen",value:function(){return!1}},{key:"lockTimeout",value:function(){return null}},{key:"launchUri",value:function(e){var t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noreferrer noopener",t.classList.add("d-none"),document.body.appendChild(t),t.click(),document.body.removeChild(t)}},{key:"saveFile",value:function(e,t,n,r){var a=null,i=null,o=r.toLowerCase(),s=!0;if(o.endsWith(".pdf")?(i="application/pdf",s=!1):o.endsWith(".xlsx")?i="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":o.endsWith(".docx")?i="application/vnd.openxmlformats-officedocument.wordprocessingml.document":o.endsWith(".pptx")?i="application/vnd.openxmlformats-officedocument.presentationml.presentation":o.endsWith(".csv")?i="text/csv":o.endsWith(".png")?i="image/png":o.endsWith(".jpg")||o.endsWith(".jpeg")?i="image/jpeg":o.endsWith(".gif")&&(i="image/gif"),null!=i&&null==(n=n||{}).type&&(n.type=i),a=null==n||this.isIE()?new Blob([t]):new Blob([t],n),navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,r);else{var c=e.document.createElement("a");s?c.download=r:c.target="_blank",c.href=e.URL.createObjectURL(a),c.style.position="fixed",e.document.body.appendChild(c),c.click(),e.document.body.removeChild(c)}}},{key:"getApplicationVersion",value:function(){return aT}},{key:"supportsU2f",value:function(e){return null!=e&&null!=e.u2f||this.isChrome()||(this.isOpera()||this.isVivaldi())&&!J.isMobileBrowser}},{key:"supportsDuo",value:function(){return!0}},{key:"showToast",value:function(e,t,n,r){this.messagingService.send("showToast",{text:n,title:t,type:e,options:r})}},{key:"showDialog",value:(r=(0,M.Z)(I().mark(function e(t,n,r,a,i){var o,s,c,u,l,d;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=[null==r?this.i18nService.t("ok"):r],null!=a&&o.unshift(a),s=document.createElement("div"),!(null!=i)){e.next=19;break}(c=document.createElement("i")).classList.add("swal-custom-icon"),e.t0=i,e.next="success"===e.t0?9:"warning"===e.t0?11:"error"===e.t0?13:"info"===e.t0?15:17;break;case 9:return c.classList.add("fa","fa-check","text-success"),e.abrupt("break",18);case 11:return c.classList.add("fa","fa-warning","text-warning"),e.abrupt("break",18);case 13:return c.classList.add("fa","fa-bolt","text-danger"),e.abrupt("break",18);case 15:return c.classList.add("fa","fa-info-circle","text-info"),e.abrupt("break",18);case 17:return e.abrupt("break",18);case 18:c.classList.contains("fa")&&s.appendChild(c);case 19:if(null!=n&&((u=document.createElement("div")).classList.add("swal-title"),u.appendChild(document.createTextNode(n)),s.appendChild(u)),null!=t&&((l=document.createElement("div")).classList.add("swal-text"),l.appendChild(document.createTextNode(t)),s.appendChild(l)),!(o.length>1)){e.next=27;break}return e.next=24,rH({content:{element:s},buttons:o});case 24:e.t1=e.sent,e.next=30;break;case 27:return e.next=29,rH({content:{element:s},button:o[0]});case 29:e.t1=e.sent;case 30:return d=e.t1,e.abrupt("return",d);case 32:case"end":return e.stop()}},e,this)})),function(e,t,n,a,i){return r.apply(this,arguments)})},{key:"eventTrack",value:function(e,t,n){this.messagingService.send("analyticsEventTrack",{action:e,label:t,options:n})}},{key:"isDev",value:function(){var e="production";return e&&e.match(/\bdevelopment\b/)}},{key:"isSelfHost",value:function(){return!0}},{key:"copyToClipboard",value:function(e,t){var n=window,r=window.document;if(t&&(t.window||t.win)?r=(n=t.window||t.win).document:t&&t.doc&&(r=t.doc),n.clipboardData&&n.clipboardData.setData)n.clipboardData.setData("Text",e);else if(r.queryCommandSupported&&r.queryCommandSupported("copy")){var a=r.createElement("textarea");a.textContent=e,a.style.position="fixed";var i=r.body;this.isFirefox()&&r.body.classList.contains("modal-open")&&(i=r.body.querySelector<HTMLElement>".modal"),i.appendChild(a),a.select();try{r.execCommand("copy")}catch(e){console.warn("Copy to clipboard failed.",e)}finally{i.removeChild(a)}}}},{key:"readFromClipboard",value:function(e){throw Error("Cannot read from clipboard on web.")}}]),i}(aj);function aI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var aL=function(){var e;function t(e){(0,T.Z)(this,t),(0,R.Z)(this,"localStorageKeys",new Set(["appId","anonymousAppId","rememberedEmail","passwordGenerationOptions",t5.disableFaviconKey,t5.lockOptionKey,"rememberEmail","enableGravatars",t5.localeKey,t5.lockOptionKey,t5.autoConfirmFingerprints])),(0,R.Z)(this,"localStorageStartsWithKeys",["twoFactorToken_",t5.collapsedGroupingsKey+"_"]),this.platformUtilsService=e}return(0,j.Z)(t,[{key:"init",value:(e=(0,M.Z)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(t5.lockOptionKey);case 2:if(!(null==e.sent&&!this.platformUtilsService.isDev())){e.next=6;break}return e.next=6,this.save(t5.lockOptionKey,15);case 6:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"get",value:function(e){var t=null;return null!=(t=this.isLocalStorage(e)?window.localStorage.getItem(e):window.sessionStorage.getItem(e))?Promise.resolve(JSON.parse(t)):Promise.resolve(null)}},{key:"save",value:function(e,t){if(null==t)return this.remove(e);var n=JSON.stringify(t);return this.isLocalStorage(e)?window.localStorage.setItem(e,n):window.sessionStorage.setItem(e,n),Promise.resolve()}},{key:"remove",value:function(e){return this.isLocalStorage(e)?window.localStorage.removeItem(e):window.sessionStorage.removeItem(e),Promise.resolve()}},{key:"isLocalStorage",value:function(e){if(this.localStorageKeys.has(e))return!0;var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aI(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(this.localStorageStartsWithKeys);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.startsWith(r))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}}]),t}(),az=function(){function e(){(0,T.Z)(this,e),this.store=new Map}return(0,j.Z)(e,[{key:"get",value:function(e){return this.store.has(e)?Promise.resolve(this.store.get(e)):Promise.resolve(null)}},{key:"save",value:function(e,t){return null==t?this.remove(e):(this.store.set(e,t),Promise.resolve())}},{key:"remove",value:function(e){return this.store.delete(e),Promise.resolve()}}]),e}(),aZ=n("24736"),aB=(0,j.Z)(function e(){(0,T.Z)(this,e)}),aF=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},aU=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},aV=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},aH={key:"key",encOrgKeys:"encOrgKeys",encPrivateKey:"encPrivateKey",encKey:"encKey",keyHash:"keyHash"},aW=function(){function e(t,n,r,a){(0,T.Z)(this,e),this.storageService=t,this.secureStorageService=n,this.cryptoFunctionService=r,this.platformUtilService=a}return(0,j.Z)(e,[{key:"setKey",value:function(e){return aV(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.key=e,t.next=3,this.storageService.get(t5.vaultTimeoutKey);case 3:return n=t.sent,t.next=6,this.storageService.get(t5.biometricUnlockKey);case 6:if(r=t.sent,!(null!=n&&!(r&&this.platformUtilService.supportsSecureStorage()))){t.next=9;break}return t.abrupt("return");case 9:return t.abrupt("return",this.secureStorageService.save(aH.key,e.keyB64));case 10:case"end":return t.stop()}},t,this)}))}},{key:"setKeyHash",value:function(e){return this.keyHash=e,this.storageService.save(aH.keyHash,e)}},{key:"setEncKey",value:function(e){return aV(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.storageService.save(aH.encKey,e);case 4:this.encKey=null;case 5:case"end":return t.stop()}},t,this)}))}},{key:"setEncPrivateKey",value:function(e){return aV(this,void 0,void 0,I().mark(function t(){return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.storageService.save(aH.encPrivateKey,e);case 4:this.privateKey=null;case 5:case"end":return t.stop()}},t,this)}))}},{key:"setOrgKeys",value:function(e){var t={};return e.forEach(function(e){t[e.id]=e.key}),this.orgKeys=null,this.storageService.save(aH.encOrgKeys,t)}},{key:"getKey",value:function(){return aV(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=this.key)){e.next=2;break}return e.abrupt("return",this.key);case 2:return e.next=4,this.secureStorageService.get(aH.key);case 4:return null!=(t=e.sent)&&(this.key=new t_(J.fromB64ToArray(t).buffer)),e.abrupt("return",null==t?null:this.key);case 7:case"end":return e.stop()}},e,this)}))}},{key:"getKeyHash",value:function(){return aV(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=this.keyHash)){e.next=2;break}return e.abrupt("return",this.keyHash);case 2:return e.next=4,this.storageService.get(aH.keyHash);case 4:return null!=(t=e.sent)&&(this.keyHash=t),e.abrupt("return",null==t?null:this.keyHash);case 7:case"end":return e.stop()}},e,this)}))}},{key:"getEncKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return aV(this,void 0,void 0,I().mark(function t(){var n,r,a,i;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null!=this.encKey)){t.next=2;break}return t.abrupt("return",this.encKey);case 2:return t.next=4,this.storageService.get(aH.encKey);case 4:if(null!=(n=t.sent)){t.next=7;break}return t.abrupt("return",null);case 7:if(null!=e){t.next=11;break}return t.next=10,this.getKey();case 10:e=t.sent;case 11:if(null!=e){t.next=13;break}return t.abrupt("return",null);case 13:if((a=new tE(n)).encryptionType!==x.AesCbc256_B64){t.next=20;break}return t.next=17,this.decryptToBytes(a,e);case 17:case 26:r=t.sent,t.next=30;break;case 20:if(a.encryptionType!==x.AesCbc256_HmacSha256_B64){t.next=29;break}return t.next=23,this.stretchKey(e);case 23:return i=t.sent,t.next=26,this.decryptToBytes(a,i);case 29:throw Error("Unsupported encKey type.");case 30:if(null!=r){t.next=32;break}return t.abrupt("return",null);case 32:return this.encKey=new t_(r),t.abrupt("return",this.encKey);case 34:case"end":return t.stop()}},t,this)}))}},{key:"getPublicKey",value:function(){return aV(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=this.publicKey)){e.next=2;break}return e.abrupt("return",this.publicKey);case 2:return e.next=4,this.getPrivateKey();case 4:if(null!=(t=e.sent)){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,this.cryptoFunctionService.rsaExtractPublicKey(t);case 9:return this.publicKey=e.sent,e.abrupt("return",this.publicKey);case 11:case"end":return e.stop()}},e,this)}))}},{key:"getPrivateKey",value:function(){return aV(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=this.privateKey)){e.next=2;break}return e.abrupt("return",this.privateKey);case 2:return e.next=4,this.storageService.get(aH.encPrivateKey);case 4:if(null!=(t=e.sent)){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,this.decryptToBytes(new tE(t),null);case 9:return this.privateKey=e.sent,e.abrupt("return",this.privateKey);case 11:case"end":return e.stop()}},e,this)}))}},{key:"getFingerprint",value:function(e,t){return aV(this,void 0,void 0,I().mark(function n(){var r,a;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=t){n.next=4;break}return n.next=3,this.getPublicKey();case 3:t=n.sent;case 4:if(null!==t){n.next=6;break}throw Error("No public key available.");case 6:return n.next=8,this.cryptoFunctionService.hash(t,"sha256");case 8:return r=n.sent,n.next=11,this.cryptoFunctionService.hkdfExpand(r,e,32,"sha256");case 11:return a=n.sent,n.abrupt("return",this.hashPhrase(a));case 13:case"end":return n.stop()}},n,this)}))}},{key:"getOrgKeys",value:function(){return aV(this,void 0,void 0,I().mark(function e(){var t,n,r,a,i;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=this.orgKeys&&this.orgKeys.size>0)){e.next=2;break}return e.abrupt("return",this.orgKeys);case 2:return e.next=4,this.storageService.get(aH.encOrgKeys);case 4:if(null!=(t=e.sent)){e.next=7;break}return e.abrupt("return",null);case 7:n=new Map,r=!1,e.t0=I().keys(t);case 10:if((e.t1=e.t0()).done){e.next=21;break}if(a=e.t1.value,t.hasOwnProperty(a)){e.next=14;break}return e.abrupt("continue",10);case 14:return e.next=16,this.rsaDecrypt(t[a]);case 16:i=e.sent,n.set(a,new t_(i)),r=!0,e.next=10;break;case 21:return r&&(this.orgKeys=n),e.abrupt("return",this.orgKeys);case 23:case"end":return e.stop()}},e,this)}))}},{key:"getOrgKey",value:function(e){return aV(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,this.getOrgKeys();case 4:if(!(null==(n=t.sent)||!n.has(e))){t.next=7;break}return t.abrupt("return",null);case 7:return t.abrupt("return",n.get(e));case 8:case"end":return t.stop()}},t,this)}))}},{key:"hasKey",value:function(){return aV(this,void 0,void 0,I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getKey();case 2:return e.t0=e.sent,e.abrupt("return",null!=e.t0);case 4:case"end":return e.stop()}},e,this)}))}},{key:"hasEncKey",value:function(){return aV(this,void 0,void 0,I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageService.get(aH.encKey);case 2:return t=e.sent,e.abrupt("return",null!=t);case 4:case"end":return e.stop()}},e,this)}))}},{key:"clearKey",value:function(){return this.key=this.legacyEtmKey=null,this.secureStorageService.remove(aH.key)}},{key:"clearKeyHash",value:function(){return this.keyHash=null,this.storageService.remove(aH.keyHash)}},{key:"clearEncKey",value:function(e){return(this.encKey=null,e)?Promise.resolve():this.storageService.remove(aH.encKey)}},{key:"clearKeyPair",value:function(e){return(this.privateKey=null,this.publicKey=null,e)?Promise.resolve():this.storageService.remove(aH.encPrivateKey)}},{key:"clearOrgKeys",value:function(e){return(this.orgKeys=null,e)?Promise.resolve():this.storageService.remove(aH.encOrgKeys)}},{key:"clearPinProtectedKey",value:function(){return this.storageService.remove(t5.pinProtectedKey)}},{key:"clearKeys",value:function(){return Promise.all([this.clearKey(),this.clearKeyHash(),this.clearOrgKeys(),this.clearEncKey(),this.clearKeyPair(),this.clearPinProtectedKey()])}},{key:"toggleKey",value:function(){return aV(this,void 0,void 0,I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getKey();case 2:return t=e.sent,e.next=5,this.storageService.get(t5.vaultTimeoutKey);case 5:return n=e.sent,e.next=8,this.storageService.get(t5.biometricUnlockKey);case 8:if(!(!e.sent&&this.platformUtilService.supportsSecureStorage()&&(null!=n||0===n))){e.next=14;break}return e.next=12,this.clearKey();case 12:return this.key=t,e.abrupt("return");case 14:return e.next=16,this.setKey(t);case 16:case"end":return e.stop()}},e,this)}))}},{key:"makeKey",value:function(e,t,n,r){return aV(this,void 0,void 0,I().mark(function a(){var i;return I().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i=null,!(null==n||n===_.PBKDF2_SHA256)){a.next=13;break}if(null!=r){a.next=6;break}r=5e3,a.next=8;break;case 6:if(!(r<5e3)){a.next=8;break}throw Error("PBKDF2 iteration minimum is 5000.");case 8:return a.next=10,this.cryptoFunctionService.pbkdf2(e,t,"sha256",r);case 10:i=a.sent,a.next=14;break;case 13:throw Error("Unknown Kdf.");case 14:return a.abrupt("return",new t_(i));case 15:case"end":return a.stop()}},a,this)}))}},{key:"makeKeyFromPin",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return aV(this,void 0,void 0,I().mark(function i(){var o,s,c;return I().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(null!=a){i.next=7;break}return i.next=3,this.storageService.get(t5.pinProtectedKey);case 3:if(null!=(o=i.sent)){i.next=6;break}throw Error("No PIN protected key found.");case 6:a=new tE(o);case 7:return i.next=9,this.makePinKey(e,t,n,r);case 9:return s=i.sent,i.next=12,this.decryptToBytes(a,s);case 12:return c=i.sent,i.abrupt("return",new t_(c));case 14:case"end":return i.stop()}},i,this)}))}},{key:"makeShareKey",value:function(){return aV(this,void 0,void 0,I().mark(function e(){var t,n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoFunctionService.randomBytes(64);case 2:return t=e.sent,e.next=5,this.getPublicKey();case 5:return n=e.sent,e.next=8,this.rsaEncrypt(t,n);case 8:return r=e.sent,e.abrupt("return",[r,new t_(t)]);case 10:case"end":return e.stop()}},e,this)}))}},{key:"makeKeyPair",value:function(e){return aV(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cryptoFunctionService.rsaGenerateKeyPair(2048);case 2:return n=t.sent,r=J.fromBufferToB64(n[0]),t.next=6,this.encrypt(n[1],e);case 6:return a=t.sent,t.abrupt("return",[r,a]);case 8:case"end":return t.stop()}},t,this)}))}},{key:"makePinKey",value:function(e,t,n,r){return aV(this,void 0,void 0,I().mark(function a(){var i;return I().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.makeKey(e,t,n,r);case 2:return i=a.sent,a.next=5,this.stretchKey(i);case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}},a,this)}))}},{key:"makeSendKey",value:function(e){return aV(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cryptoFunctionService.hkdf(e,"bitwarden-send","send",64,"sha256");case 2:return n=t.sent,t.abrupt("return",new t_(n));case 4:case"end":return t.stop()}},t,this)}))}},{key:"hashPassword",value:function(e,t){return aV(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=t){n.next=4;break}return n.next=3,this.getKey();case 3:t=n.sent;case 4:if(!(null==e||null==t)){n.next=6;break}throw Error("Invalid parameters.");case 6:return n.next=8,this.cryptoFunctionService.pbkdf2(t.key,e,"sha256",1);case 8:return r=n.sent,n.abrupt("return",J.fromBufferToB64(r));case 10:case"end":return n.stop()}},n,this)}))}},{key:"makeEncKey",value:function(e){return aV(this,void 0,void 0,I().mark(function t(){var n,r;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getKeyForEncryption(e);case 2:return n=t.sent,t.next=5,this.cryptoFunctionService.randomBytes(64);case 5:return r=t.sent,t.abrupt("return",this.buildEncKey(n,r));case 7:case"end":return t.stop()}},t,this)}))}},{key:"remakeEncKey",value:function(e){return aV(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getEncKey();case 2:return n=t.sent,t.abrupt("return",this.buildEncKey(e,n.key));case 4:case"end":return t.stop()}},t,this)}))}},{key:"encrypt",value:function(e,t){return aV(this,void 0,void 0,I().mark(function n(){var r,a,i,o,s;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=e){n.next=2;break}return n.abrupt("return",Promise.resolve(null));case 2:return r="string"==typeof e?J.fromUtf8ToArray(e).buffer:e,n.next=5,this.aesEncrypt(r,t);case 5:return a=n.sent,i=J.fromBufferToB64(a.iv),o=J.fromBufferToB64(a.data),s=null!=a.mac?J.fromBufferToB64(a.mac):null,n.abrupt("return",new tE(a.key.encType,o,i,s));case 10:case"end":return n.stop()}},n,this)}))}},{key:"encryptToBytes",value:function(e,t){return aV(this,void 0,void 0,I().mark(function n(){var r,a,i;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.aesEncrypt(e,t);case 2:return r=n.sent,a=0,null!=r.mac&&(a=r.mac.byteLength),(i=new Uint8Array(1+r.iv.byteLength+a+r.data.byteLength)).set([r.key.encType]),i.set(new Uint8Array(r.iv),1),null!=r.mac&&i.set(new Uint8Array(r.mac),1+r.iv.byteLength),i.set(new Uint8Array(r.data),1+r.iv.byteLength+a),n.abrupt("return",i.buffer);case 11:case"end":return n.stop()}},n,this)}))}},{key:"rsaEncrypt",value:function(e,t){return aV(this,void 0,void 0,I().mark(function n(){var r;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=t){n.next=4;break}return n.next=3,this.getPublicKey();case 3:t=n.sent;case 4:if(null!=t){n.next=6;break}throw Error("Public key unavailable.");case 6:return n.next=8,this.cryptoFunctionService.rsaEncrypt(e,t,"sha1");case 8:return r=n.sent,n.abrupt("return",new tE(x.Rsa2048_OaepSha1_B64,J.fromBufferToB64(r)));case 10:case"end":return n.stop()}},n,this)}))}},{key:"decryptToBytes",value:function(e,t){return aV(this,void 0,void 0,I().mark(function n(){var r,a,i,o;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=J.fromB64ToArray(e.iv).buffer,a=J.fromB64ToArray(e.data).buffer,i=e.mac?J.fromB64ToArray(e.mac).buffer:null,n.next=5,this.aesDecryptToBytes(e.encryptionType,a,r,i,t);case 5:if(null!=(o=n.sent)){n.next=8;break}return n.abrupt("return",null);case 8:return n.abrupt("return",o);case 9:case"end":return n.stop()}},n,this)}))}},{key:"decryptToUtf8",value:function(e,t){return aV(this,void 0,void 0,I().mark(function n(){return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.aesDecryptToUtf8(e.encryptionType,e.data,e.iv,e.mac,t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}))}},{key:"decryptFromBytes",value:function(e,t){return aV(this,void 0,void 0,I().mark(function n(){var r,a,i,o,s;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=e){n.next=2;break}throw Error("no encBuf.");case 2:a=(r=new Uint8Array(e))[0],i=null,o=null,s=null,n.t0=a,n.next=n.t0===x.AesCbc128_HmacSha256_B64?10:n.t0===x.AesCbc256_HmacSha256_B64?10:n.t0===x.AesCbc256_B64?16:21;break;case 10:if(!(r.length<=49)){n.next=12;break}return n.abrupt("return",null);case 12:return o=r.slice(1,17),s=r.slice(17,49),i=r.slice(49),n.abrupt("break",22);case 16:if(!(r.length<=17)){n.next=18;break}return n.abrupt("return",null);case 18:return o=r.slice(1,17),i=r.slice(17),n.abrupt("break",22);case 21:return n.abrupt("return",null);case 22:return n.next=24,this.aesDecryptToBytes(a,i.buffer,o.buffer,null!=s?s.buffer:null,t);case 24:return n.abrupt("return",n.sent);case 25:case"end":return n.stop()}},n,this)}))}},{key:"randomNumber",value:function(e,t){return aV(this,void 0,void 0,I().mark(function n(){var r,a,i,o,s,c,u,l;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=0,!((i=Math.ceil(Math.log2(a=t-e+1)))>53)){n.next=5;break}throw Error("We cannot generate numbers larger than 53 bits.");case 5:return o=Math.ceil(i/8),s=Math.pow(2,i)-1,n.t0=Uint8Array,n.next=10,this.cryptoFunctionService.randomBytes(o);case 10:for(l=0,n.t1=n.sent,c=new n.t0(n.t1),u=(o-1)*8;l<o;l++)r+=c[l]*Math.pow(2,u),u-=8;if(!((r&=s)>=a)){n.next=17;break}return n.abrupt("return",this.randomNumber(e,t));case 17:return n.abrupt("return",e+r);case 18:case"end":return n.stop()}},n,this)}))}},{key:"aesEncrypt",value:function(e,t){return aV(this,void 0,void 0,I().mark(function n(){var r,a;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=new aB,n.next=3,this.getKeyForEncryption(t);case 3:return r.key=n.sent,n.next=6,this.cryptoFunctionService.randomBytes(16);case 6:return r.iv=n.sent,n.next=9,this.cryptoFunctionService.aesEncrypt(e,r.iv,r.key.encKey);case 9:if(r.data=n.sent,!(null!=r.key.macKey)){n.next=17;break}return(a=new Uint8Array(r.iv.byteLength+r.data.byteLength)).set(new Uint8Array(r.iv),0),a.set(new Uint8Array(r.data),r.iv.byteLength),n.next=16,this.cryptoFunctionService.hmac(a.buffer,r.key.macKey,"sha256");case 16:r.mac=n.sent;case 17:return n.abrupt("return",r);case 18:case"end":return n.stop()}},n,this)}))}},{key:"aesDecryptToUtf8",value:function(e,t,n,r,a){return aV(this,void 0,void 0,I().mark(function i(){var o,s,c,u;return I().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getKeyForEncryption(a);case 2:if(o=i.sent,!(null!=(s=this.resolveLegacyKey(e,o)).macKey&&null==r)){i.next=7;break}return console.error("mac required."),i.abrupt("return",null);case 7:if(!(s.encType!==e)){i.next=10;break}return console.error("encType unavailable."),i.abrupt("return",null);case 10:if(!(null!=(c=this.cryptoFunctionService.aesDecryptFastParameters(t,n,r,s)).macKey&&null!=c.mac)){i.next=21;break}return i.next=14,this.cryptoFunctionService.hmacFast(c.macData,c.macKey,"sha256");case 14:return u=i.sent,i.next=17,this.cryptoFunctionService.compareFast(c.mac,u);case 17:if(i.sent){i.next=21;break}return console.error("mac failed."),i.abrupt("return",null);case 21:return i.abrupt("return",this.cryptoFunctionService.aesDecryptFast(c));case 22:case"end":return i.stop()}},i,this)}))}},{key:"aesDecryptToBytes",value:function(e,t,n,r,a){return aV(this,void 0,void 0,I().mark(function i(){var o,s,c,u;return I().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getKeyForEncryption(a);case 2:if(o=i.sent,!(null!=(s=this.resolveLegacyKey(e,o)).macKey&&null==r)){i.next=6;break}return i.abrupt("return",null);case 6:if(!(s.encType!==e)){i.next=8;break}return i.abrupt("return",null);case 8:if(!(null!=s.macKey&&null!=r)){i.next=23;break}return(c=new Uint8Array(n.byteLength+t.byteLength)).set(new Uint8Array(n),0),c.set(new Uint8Array(t),n.byteLength),i.next=14,this.cryptoFunctionService.hmac(c.buffer,s.macKey,"sha256");case 14:if(null!==(u=i.sent)){i.next=17;break}return i.abrupt("return",null);case 17:return i.next=19,this.cryptoFunctionService.compare(r,u);case 19:if(i.sent){i.next=23;break}return console.error("mac failed."),i.abrupt("return",null);case 23:return i.next=25,this.cryptoFunctionService.aesDecrypt(t,n,s.encKey);case 25:return i.abrupt("return",i.sent);case 26:case"end":return i.stop()}},i,this)}))}},{key:"rsaDecrypt",value:function(e){return aV(this,void 0,void 0,I().mark(function t(){var n,r,a,i,o,s;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.split("."),r=null,1===n.length)r=x.Rsa2048_OaepSha256_B64,a=[n[0]];else if(2===n.length)try{r=parseInt(n[0],null),a=n[1].split("|")}catch(e){}t.t0=r,t.next=t.t0===x.Rsa2048_OaepSha256_B64?6:t.t0===x.Rsa2048_OaepSha1_B64?6:t.t0===x.Rsa2048_OaepSha256_HmacSha256_B64?6:t.t0===x.Rsa2048_OaepSha1_HmacSha256_B64?6:7;break;case 6:return t.abrupt("break",8);case 7:case 23:throw Error("encType unavailable.");case 8:if(!(null==a||a.length<=0)){t.next=10;break}throw Error("encPieces unavailable.");case 10:return i=J.fromB64ToArray(a[0]).buffer,t.next=13,this.getPrivateKey();case 13:if(null!=(o=t.sent)){t.next=16;break}throw Error("No private key.");case 16:s="sha1",t.t1=r,t.next=t.t1===x.Rsa2048_OaepSha256_B64?20:t.t1===x.Rsa2048_OaepSha256_HmacSha256_B64?20:t.t1===x.Rsa2048_OaepSha1_B64?22:t.t1===x.Rsa2048_OaepSha1_HmacSha256_B64?22:23;break;case 20:return s="sha256",t.abrupt("break",24);case 22:return t.abrupt("break",24);case 24:return t.abrupt("return",this.cryptoFunctionService.rsaDecrypt(i,o,s));case 25:case"end":return t.stop()}},t,this)}))}},{key:"getKeyForEncryption",value:function(e){return aV(this,void 0,void 0,I().mark(function t(){var n;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null!=e)){t.next=2;break}return t.abrupt("return",e);case 2:return t.next=4,this.getEncKey();case 4:if(!(null!=(n=t.sent))){t.next=7;break}return t.abrupt("return",n);case 7:return t.next=9,this.getKey();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}},t,this)}))}},{key:"resolveLegacyKey",value:function(e,t){return e===x.AesCbc128_HmacSha256_B64&&t.encType===x.AesCbc256_B64?(null==this.legacyEtmKey&&(this.legacyEtmKey=new t_(t.key,x.AesCbc128_HmacSha256_B64)),this.legacyEtmKey):t}},{key:"stretchKey",value:function(e){return aV(this,void 0,void 0,I().mark(function t(){var n,r,a;return I().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Uint8Array(64),t.next=3,this.cryptoFunctionService.hkdfExpand(e.key,"enc",32,"sha256");case 3:return r=t.sent,t.next=6,this.cryptoFunctionService.hkdfExpand(e.key,"mac",32,"sha256");case 6:return a=t.sent,n.set(new Uint8Array(r)),n.set(new Uint8Array(a),32),t.abrupt("return",new t_(n.buffer));case 10:case"end":return t.stop()}},t,this)}))}},{key:"hashPhrase",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64;return aV(this,void 0,void 0,I().mark(function n(){var r,a,i,o,s,c,u;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=Math.ceil(t/(r=Math.log(rV.length)/Math.log(2))),o=4*(i=Array.from(new Uint8Array(e))).length,!(a*r>o)){n.next=6;break}throw Error("Output entropy of hash function is too small");case 6:for(s=[],c=aZ.fromArray(i,256);a--;)u=c.mod(rV.length),c=c.divide(rV.length),s.push(rV[u]);return n.abrupt("return",s);case 10:case"end":return n.stop()}},n)}))}},{key:"buildEncKey",value:function(e,t){return aV(this,void 0,void 0,I().mark(function n(){var r,a;return I().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=null,32!==e.key.byteLength){n.next=10;break}return n.next=4,this.stretchKey(e);case 4:return a=n.sent,n.next=7,this.encrypt(t,a);case 7:case 13:r=n.sent,n.next=17;break;case 10:if(64!==e.key.byteLength){n.next=16;break}return n.next=13,this.encrypt(t,e);case 16:throw Error("Invalid key size.");case 17:return n.abrupt("return",[new t_(t),r]);case 18:case"end":return n.stop()}},n,this)}))}}]),e}();aF([t6(function(){return"getEncKey"}),aU("design:type",Function),aU("design:paramtypes",[t_]),aU("design:returntype",Promise)],aW.prototype,"getEncKey",null),aF([t6(function(){return"getOrgKeys"}),aU("design:type",Function),aU("design:paramtypes",[]),aU("design:returntype",Promise)],aW.prototype,"getOrgKeys",null);var aq=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(e,t,n,i){return(0,T.Z)(this,a),r.call(this,e,t,n,i)}return(0,j.Z)(a,[{key:"setOrgKeys",value:function(e){var t=e.filter(function(e){return""!==e.key});return(0,nz.Z)((0,ee.Z)(a.prototype),"setOrgKeys",this).call(this,t)}}]),a}(aW);function aG(e){return e.match("@")}var aK=n("60732"),aQ=n.n(aK),aY="undefined"!=typeof window&&window.minilog?window.minilog:aQ(),aJ=aY("cozy-keys");aY.suggest.allow("cozy-keys","log"),aY.suggest.allow("cozy-keys","info");function a$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function aX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a$(Object(n),!0).forEach(function(t){(0,R.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a0(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a1(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}function a1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}J.init();var a2=function(){var e,t,n,r,a,i,o,s,c,u,l,d,f,p,h,v,m,y,g,w,k,x,O,C,S,E,P,A,R,N,L,z,Z,F,V,W,G,K,Q,Y;function $(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.urls,a=n.locale,i=n.unsafeStorage,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if((0,T.Z)(this,$),this.instance=e,this.email=aG(t=e)?t.toString():"me@"+new URL(t.toString().toLowerCase()).hostname,r)this.urls=r;else if(aG(e))this.urls={};else this.urls={base:"".concat(e,"/bitwarden")};this.locale=a||"en",this.init({unsafeStorage:i},o)}return(0,j.Z)($,[{key:"createServices",value:function(e){var t,n,r=new rU,a=new nS(this.locale,"./locales"),i=this.initPlatformUtilsService(a,r),o=this.initCryptoFunctionService(i),s=this.initStorageService(i),c=this.initSecureStorageService(),u=new aq(s,e?s:c,o),l=new ab(s),d=new to(s);var f=new ti(l,i,(t=(0,M.Z)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.send("logout",{expired:t}));case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),p=new aO(l,s),h=new r1(p,s),v=new ac(u,p,f,s,a,o),m=new ad(p,s),y=null,g=new nr(u,p,m,f,s,a,function(){return y}),b=new nO(u,p,f,s,a,g),w=new nf(u,p,s,a);y=new r3(g,i);var k=new aS(g,b,w,u,i,s,r,y,p,null);var x=new am(p,f,m,b,g,u,w,s,r,h,v,(n=(0,M.Z)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.send("logout",{expired:t}));case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})),O=new rY(u,s,h),C=new np(u),S=new th(u,f,p,l,d,a,i,r),E=new nm(f,s,null),P=new rF(g,b,f,a,w);return{apiService:f,environmentService:E,authService:S,syncService:x,cryptoService:u,cipherService:g,userService:p,collectionService:w,passwordGenerationService:O,containerService:C,vaultTimeoutService:k,importService:P,utils:J}}},{key:"init",value:function(e,t){var n=this,r=e.unsafeStorage;t=t||this.createServices(r),this.apiService=t.apiService,this.environmentService=t.environmentService,this.authService=t.authService,this.syncService=t.syncService,this.cryptoService=t.cryptoService,this.cipherService=t.cipherService,this.userService=t.userService,this.collectionService=t.collectionService,this.passwordGenerationService=t.passwordGenerationService,this.containerService=t.containerService,this.vaultTimeoutService=t.vaultTimeoutService,this.importService=t.importService,this.Utils=t.utils,this.attachToGlobal(),this.initFinished=this.environmentService.setUrls(this.urls),this.initFinished.then(function(){return n.emit("init",n)})}},{key:"initPlatformUtilsService",value:function(e,t){return new aN(e,t)}},{key:"initCryptoFunctionService",value:function(e){return new aA(window,e)}},{key:"initSecureStorageService",value:function(){return new az}},{key:"initStorageService",value:function(e){return new aL(e)}},{key:"attachToGlobal",value:function(){J.global.bitwardenContainerService=this.containerService}},{key:"isLocked",value:(e=(0,M.Z)(I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachToGlobal(),e.next=3,this.userService.isAuthenticated();case 3:return t=e.sent,n=this.vaultTimeoutService.isLocked(),e.abrupt("return",!t||n);case 6:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"lock",value:(t=(0,M.Z)(I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachToGlobal(),e.next=3,this.initFinished;case 3:return e.next=5,this.vaultTimeoutService.lock();case 5:return t=e.sent,this.emit("lock",this),e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"login",value:(n=(0,M.Z)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachToGlobal(),e.next=3,this.initFinished;case 3:return e.next=5,this.authService.logIn(this.email,t);case 5:return n=e.sent,e.next=8,this.sync();case 8:return this.emit("login",this),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"changePassword",value:(r=(0,M.Z)(I().mark(function e(t,n,r,a){var i,o,s,c,u,l;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.computeNewHashAndKeys(t,n,r,a);case 2:return o=(i=e.sent).kdf,s=i.kdfIterations,c=i.currentPasswordHash,u=i.newPasswordHash,l=i.newEncryptionKey,e.abrupt("return",this.bitwardenChangePassword(c,u,l,o,s));case 9:case"end":return e.stop()}},e,this)})),function(e,t,n,a){return r.apply(this,arguments)})},{key:"computeNewHashAndKeys",value:(a=(0,M.Z)(I().mark(function e(t,n,r,a){var i,o,s,c,u,l,d;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.computeHashedPassword(t);case 2:if(i=e.sent,e.t0=a,e.t0){e.next=8;break}return e.next=7,this.userService.getKdf();case 7:e.t0=e.sent;case 8:if(o=e.t0,e.t1=r,e.t1){e.next=14;break}return e.next=13,this.userService.getKdfIterations();case 13:e.t1=e.sent;case 14:return s=e.t1,e.next=17,this.computeMasterKey(n,s,o);case 17:return c=e.sent,e.next=20,this.computeHashedPassword(n,c);case 20:return u=e.sent,e.next=23,this.getEncryptionKey();case 23:return l=e.sent,e.next=26,this.encryptEncryptionKey(l,c);case 26:return d=e.sent,e.abrupt("return",{kdf:o,kdfIterations:s,currentPasswordHash:i,newPasswordHash:u,newEncryptionKey:d});case 28:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return a.apply(this,arguments)})},{key:"bitwardenChangePassword",value:(i=(0,M.Z)(I().mark(function e(t,n,r,a,i){var o,s;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new aM).kdf=a,o.kdfIterations=i,o.masterPasswordHash=t,o.newMasterPasswordHash=n,o.key=r.encryptedString,e.next=8,this.apiService.postAccountKdf(o);case 8:return(s=e.sent)&&this.emit("passwordChange",this),e.abrupt("return",s);case 11:case"end":return e.stop()}},e,this)})),function(e,t,n,r,a){return i.apply(this,arguments)})},{key:"computeMasterKey",value:(o=(0,M.Z)(I().mark(function e(t,n,r){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoService.makeKey(t,this.email,r||_.PBKDF2_SHA256,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t,n){return o.apply(this,arguments)})},{key:"computeHashedPassword",value:(s=(0,M.Z)(I().mark(function e(t,n){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoService.hashPassword(t,n||null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"getEncryptionKey",value:(c=(0,M.Z)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoService.getEncKey();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"getMasterKey",value:(u=(0,M.Z)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cryptoService.getKey();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"generateEncryptionKey",value:(l=(0,M.Z)(I().mark(function e(){var t,n,r,a,i;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEncryptionKey();case 2:if(t=e.sent){e.next=5;break}throw Error("NO_ENCRYPTION_KEY");case 5:return e.next=7,this.cryptoService.makeEncKey(t);case 7:return n=e.sent,a=(r=(0,D.Z)(n,2))[0],i=r[1],e.abrupt("return",{key:a,encryptedKey:i});case 12:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"encryptEncryptionKey",value:(d=(0,M.Z)(I().mark(function e(t,n){var r,a,i,o;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n,e.t0){e.next=5;break}return e.next=4,this.getMasterKey();case 4:e.t0=e.sent;case 5:return r=e.t0,a=t.key,e.next=9,this.cryptoService.buildEncKey(r,a);case 9:return i=e.sent,o=(0,D.Z)(i,2)[1],e.abrupt("return",o);case 13:case"end":return e.stop()}},e,this)})),function(e,t){return d.apply(this,arguments)})},{key:"unlock",value:(f=(0,M.Z)(I().mark(function e(t){var n,r,a,i,o,s;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initFinished;case 2:return e.next=4,this.userService.isAuthenticated();case 4:return n=e.sent,r=this.cryptoService.kdf,a=this.cryptoService.kdfIterations,e.next=9,this.cryptoService.getKeyHash();case 9:if(i=e.sent,!(!n||!r||!i)){e.next=15;break}return e.next=13,this.login(t);case 13:e.next=25;break;case 15:return e.next=17,this.cryptoService.makeKey(t,this.email,r,a);case 17:return o=e.sent,e.next=20,this.cryptoService.hashPassword(this.masterPassword,o);case 20:if(s=e.sent,i!=s){e.next=24;break}return e.next=24,this.cryptoService.setKey(o);case 24:this.emit("unlock_no_login",this);case 25:return this.sync(),this.emit("unlock",this),e.abrupt("return",!0);case 28:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"sync",value:(p=(0,M.Z)(I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initFinished;case 2:return e.next=4,this.syncService.fullSync();case 4:return t=e.sent,this.emit("sync",this),e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"getAll",value:(h=(0,M.Z)(I().mark(function e(){var t,n,r=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r.length>0&&void 0!==r[0]?r[0]:{}).type,e.next=3,this.cipherService.getAll();case 3:return n=e.sent,e.abrupt("return",t?n.filter(function(e){return e.type==t}):n);case 5:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)})},{key:"getAllLogins",value:(v=(0,M.Z)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAll({type:b.Login}));case 1:case"end":return e.stop()}},e,this)})),function(){return v.apply(this,arguments)})},{key:"getAllDecrypted",value:(m=(0,M.Z)(I().mark(function e(){var t=this,n,r,a,i,o,s=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=s.length>0&&void 0!==s[0]?s[0]:{}).type,a=n.uri,this.attachToGlobal(),!a){e.next=9;break}return e.next=5,this.cipherService.getAllDecryptedForUrl(a);case 5:return i=e.sent,e.abrupt("return",r?i.filter(function(e){return e.type==r}):i);case 9:return e.next=11,this.getAll({type:r});case 11:return o=e.sent,e.abrupt("return",Promise.all(o.map(function(e){return t.decrypt(e)})));case 13:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"getAllDecryptedLogins",value:(y=(0,M.Z)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllDecrypted({type:b.Login}));case 1:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})},{key:"getAllDecryptedFor",value:(g=(0,M.Z)(I().mark(function e(t){var n,r,a,i,o,s=this;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.type,r=t.uri,a=t.username,i=t.name,e.next=3,this.getAllDecrypted({type:n,uri:r});case 3:return o=e.sent,e.abrupt("return",o.filter(function(e){return!!((!a||e.login&&s.weakMatch(e.login.username,a))&&(!i||s.weakMatch(e.name,i)))||!1}));case 5:case"end":return e.stop()}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"getByIdOrSearch",value:(w=(0,M.Z)(I().mark(function e(t,n,r){var a,i,o,s,c;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,this.get(t);case 3:if(!(a=e.sent)){e.next=6;break}return e.abrupt("return",a);case 6:if(!n){e.next=18;break}return e.next=9,this.getAllDecryptedFor(n);case 9:if(i=e.sent,o=H()(i,r)[0],!(s=U()(o,"id"))){e.next=18;break}return e.next=15,this.get(s);case 15:if(!(c=e.sent)){e.next=18;break}return e.abrupt("return",c);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}},e,this)})),function(e,t,n){return w.apply(this,arguments)})},{key:"weakMatch",value:function(e,t){var n=this;return null===t||null!==e&&(t instanceof Array?t.find(function(t){return n.weakMatch(e,t)}):t instanceof RegExp?e.match(t):B()(e,t))}},{key:"get",value:(k=(0,M.Z)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cipherService.get(t));case 1:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)})},{key:"generatePassword",value:(x=(0,M.Z)(I().mark(function e(){var t,n=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.initFinished;case 3:return e.abrupt("return",this.passwordGenerationService.generatePassword(t));case 4:case"end":return e.stop()}},e,this)})),function(){return x.apply(this,arguments)})},{key:"encrypt",value:(O=(0,M.Z)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachToGlobal(),e.abrupt("return",this.cipherService.encrypt(t));case 2:case"end":return e.stop()}},e,this)})),function(e){return O.apply(this,arguments)})},{key:"decrypt",value:(C=(0,M.Z)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachToGlobal(),e.abrupt("return",t.decrypt());case 2:case"end":return e.stop()}},e,this)})),function(e){return C.apply(this,arguments)})},{key:"decryptEncryptionKey",value:(S=(0,M.Z)(I().mark(function e(t){var n,r,a;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEncryptionKey();case 2:if(n=e.sent){e.next=5;break}throw Error("NO_ENCRYPTION_KEY");case 5:return r=new tE(t),e.next=8,this.cryptoService.decryptToBytes(r,n);case 8:return a=e.sent,e.abrupt("return",new t_(a));case 10:case"end":return e.stop()}},e,this)})),function(e){return S.apply(this,arguments)})},{key:"encryptFile",value:(E=(0,M.Z)(I().mark(function e(t,n){var r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachToGlobal(),e.next=3,this.decryptEncryptionKey(n);case 3:return r=e.sent,e.abrupt("return",this.cryptoService.encryptToBytes(t,r));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return E.apply(this,arguments)})},{key:"decryptFile",value:(P=(0,M.Z)(I().mark(function e(t,n){var r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachToGlobal(),e.next=3,this.decryptEncryptionKey(n);case 3:return r=e.sent,e.abrupt("return",this.cryptoService.decryptFromBytes(t,r));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return P.apply(this,arguments)})},{key:"saveCipher",value:(A=(0,M.Z)(I().mark(function e(t){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cipherService.saveWithServer(t));case 1:case"end":return e.stop()}},e,this)})),function(e){return A.apply(this,arguments)})},{key:"postImportCiphers",value:(R=(0,M.Z)(I().mark(function e(t){var n,r,a,i,o,s,c,u,l;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0===(r=(n=q()(t,function(e){return!!e.id})).true)?[]:r,!((o=void 0===(i=n.false)?[]:i).length>0)){e.next=7;break}return aJ.info("Bulk import of ".concat(o.length," ciphers")),s=new nP,o.forEach(function(e){var t=new tJ(e);s.ciphers.push(t)}),e.next=7,this.apiService.postImportCiphers(s);case 7:if(!(a.length>0)){e.next=26;break}aJ.info("1 by 1 import of ".concat(a.length," ciphers")),c=a0(a),e.prev=10,c.s();case 12:if((u=c.n()).done){e.next=18;break}return l=u.value,e.next=16,this.saveCipher(l);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return e.abrupt("return",{nbNewCiphers:o.length,nbUpdatedCiphers:a.length});case 27:case"end":return e.stop()}},e,this,[[10,20,23,26]])})),function(e){return R.apply(this,arguments)})},{key:"deleteCipher",value:(N=(0,M.Z)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id?t.id:t,e.abrupt("return",this.cipherService.deleteWithServer(n));case 2:case"end":return e.stop()}},e,this)})),function(e){return N.apply(this,arguments)})},{key:"shareWithCozy",value:(L=(0,M.Z)(I().mark(function e(t){var n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.attachToGlobal(),e.next=3,this.getCozyOrg();case 3:if(n=e.sent,!(t.organizationId!=n.id)){e.next=12;break}return e.next=7,this.getCollectionsForOrg(n);case 7:return r=e.sent.map(function(e){return e.id}),e.abrupt("return",this.cipherService.shareWithServer(t,n.id,r));case 12:return e.abrupt("return",void 0);case 13:case"end":return e.stop()}},e,this)})),function(e){return L.apply(this,arguments)})},{key:"getCollectionsForOrg",value:(z=(0,M.Z)(I().mark(function e(t){var n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id?t.id:t,e.next=3,this.collectionService.getAll();case 3:return r=e.sent,e.abrupt("return",r.filter(function(e){return e.organizationId===n}));case 5:case"end":return e.stop()}},e,this)})),function(e){return z.apply(this,arguments)})},{key:"getCozyOrg",value:(Z=(0,M.Z)(I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.getAllOrganizations();case 2:return t=e.sent,e.abrupt("return",t.filter(function(e){return e.name.match(/^cozy\b/i)})[0]);case 4:case"end":return e.stop()}},e,this)})),function(){return Z.apply(this,arguments)})},{key:"createOrUpdateCipher",value:(F=(0,M.Z)(I().mark(function e(t){var n,r,a,i=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:null,this.attachToGlobal(),r=t.organizationId,e.next=5,r?this.cryptoService.getOrgKey(r):this.cryptoService.getEncKey();case 5:return a=e.sent,e.abrupt("return",this.cipherService.encrypt(t,a,n));case 7:case"end":return e.stop()}},e,this)})),function(e){return F.apply(this,arguments)})},{key:"createNewCozySharedCipher",value:(V=(0,M.Z)(I().mark(function e(t){var n,r,a,i=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:null,e.next=3,this.getCozyOrg();case 3:return r=e.sent,e.next=6,this.getCollectionsForOrg(r);case 6:return a=e.sent.map(function(e){return e.id}),t.organizationId=r.id,t.collectionIds=a,e.abrupt("return",this.createOrUpdateCipher(t,n));case 11:case"end":return e.stop()}},e,this)})),function(e){return V.apply(this,arguments)})},{key:"assertImportedCiphersSeemOK",value:function(e){var t=Math.floor(e.length/2),n=e.length-1;if(this.importService.badData(e[0])&&this.importService.badData(e[t])&&this.importService.badData(e[n]))throw Error("IMPORT_BAD_FILE_CONTENT")}},{key:"import",value:(W=(0,M.Z)(I().mark(function e(t,n){var r,a,i,o,s,c=this;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.importService.getImporter(n,!1)){e.next=3;break}throw Error("IMPORT_UNKNOWN_FORMAT");case 3:return e.next=5,r.parse(t);case 5:if((a=e.sent).success){e.next=8;break}throw Error("IMPORT_FORMAT_ERROR");case 8:return a.ciphers.length>0&&this.assertImportedCiphersSeemOK(a.ciphers),i=a.ciphers.filter(function(e){return e.login}),aJ.info("Parsed ".concat(a.ciphers.length)),aJ.info("Importing ".concat(i.length," supported ciphers")),e.next=14,Promise.all(i.map(function(e){return c.prepareCipherToImport(e)}));case 14:return o=e.sent,e.next=17,this.postImportCiphers(o);case 17:return s=e.sent,e.abrupt("return",aX(aX({},s),{},{nbParsedCiphers:a.ciphers.length,nbSupportedCiphers:i.length}));case 19:case"end":return e.stop()}},e,this)})),function(e,t){return W.apply(this,arguments)})},{key:"searchExistingCipher",value:(G=(0,M.Z)(I().mark(function e(t){var n,r,a,i,o,s;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=a0(t.login.uris),e.prev=1,r.s();case 3:if((a=r.n()).done){e.next=24;break}return i=a.value,o={username:t.login.username,uri:i._uri,type:b.Login},aJ.debug("Searching existing cipher with",o),s=[function(e){return e.login.password===t.login.password?0:1},"revisionDate"],e.next=10,this.getByIdOrSearch(null,o,s);case 10:if(n=e.sent,aJ.debug("Found potential matching cipher",n),!n){e.next=22;break}return e.next=15,this.decrypt(n);case 15:if(e.sent.login.password!=t.login.password){e.next=21;break}return aJ.debug("Passwords are identical !"),e.abrupt("return",n);case 21:aJ.debug("Passwords are different");case 22:e.next=3;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),r.e(e.t0);case 29:return e.prev=29,r.f(),e.finish(29);case 32:case"end":return e.stop()}},e,this,[[1,26,29,32]])})),function(e){return G.apply(this,arguments)})},{key:"mergeCiphers",value:(K=(0,M.Z)(I().mark(function e(t,n){var r,a,i,o,s;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decrypt(t);case 2:r=e.sent,a=a0(n.login.uris),e.prev=4,o=I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=i.value,!r.login.uris.find(function(e){return e.match===t.match&&e.uri===t.uri})&&r.login.uris.push(t);case 3:case"end":return e.stop()}},e)}),a.s();case 7:if((i=a.n()).done){e.next=11;break}return e.delegateYield(o(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),a.e(e.t1);case 16:return e.prev=16,a.f(),e.finish(16);case 19:return aJ.info("Merging ciphers",r,n),e.next=22,this.createOrUpdateCipher(r,t);case 22:return s=e.sent,aJ.info("Merge result",s),e.abrupt("return",s);case 25:case"end":return e.stop()}},e,this,[[4,13,16,19]])})),function(e,t){return K.apply(this,arguments)})},{key:"prepareCipherToImport",value:(Q=(0,M.Z)(I().mark(function e(t){var n,r;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return aJ.info("Preparing cipher to import"),t.login.uris=t.login.uris||[],e.next=4,this.searchExistingCipher(t);case 4:if(!(r=e.sent)){e.next=12;break}return aJ.info("Found existing cipher"),e.next=9,this.mergeCiphers(r,t);case 9:n=e.sent,e.next=16;break;case 12:return aJ.info("Creating a new cipher"),e.next=15,this.createOrUpdateCipher(t);case 15:n=e.sent;case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}},e,this)})),function(e){return Q.apply(this,arguments)})},{key:"importCipher",value:(Y=(0,M.Z)(I().mark(function e(t){var n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.prepareCipherToImport(t);case 2:return n=e.sent,e.next=5,this.saveCipher(n);case 5:case"end":return e.stop()}},e,this)})),function(e){return Y.apply(this,arguments)})},{key:"getImportOptions",value:function(){return{featured:this.importService.featuredImportOptions,regular:this.importService.regularImportOptions}}}]),$}();z().mixin(a2);var a4=n("67294"),a3=n("45697"),a5=n.n(a3),a6=n("88306"),a9=n.n(a6),a8=a4.createContext(),a7=a9()(function(e,t,n){return new a2(e,{unsafeStorage:t},n)}),ie=function(e){(0,$.Z)(i,e);var t,n,r,a=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function i(e){(0,T.Z)(this,i);var t,n=(t=a.call(this,e)).props.vaultClient;return t.props.client&&(n=t.props.client,console.warn("Passing client in props is deprecated, please use vaultClient instead.")),t.state={vaultClient:n,locked:!0},t.updateLockedState=t.updateLockedState.bind((0,tC.Z)(t)),t.setupClient=t.setupClient.bind((0,tC.Z)(t)),t}return(0,j.Z)(i,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.cozyClient,r=t.instance;if(n){var a=n.getStackClient().uri;a?this.setupClient(a):n.on("login",function(){e.setupClient(n.getStackClient().uri)})}r&&this.setupClient(this.props.instance)}},{key:"componentWillUnmount",value:function(){var e=this.state.vaultClient;if(!!e)e.removeListener("unlock",this.updateLockedState),e.removeListener("lock",this.updateLockedState),e.removeListener("login",this.updateLockedState)}},{key:"updateLockedState",value:(r=(0,M.Z)(I().mark(function e(){var t,n;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.vaultClient,e.next=3,t.isLocked();case 3:(n=e.sent)!=this.state.locked&&this.setState({locked:n});case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"setupClient",value:function(e){var t=this,n=this.props.unsafeStorage,r=this.props.vaultClient||this.props.client||a7(e,n,this.props.vaultData);this.setState({vaultClient:r,locked:!0},function(){r.on("unlock",t.updateLockedState),r.on("lock",t.updateLockedState),r.on("login",t.updateLockedState),t.updateLockedState()}),this.props.setClient&&this.props.setClient(r)}},{key:"render",value:function(){return a4.createElement(a8.Provider,{value:this.state},this.props.children)}}]),i}(a4.Component);ie.propTypes={instance:a5().string,vaultClient:a5().object,client:a5().object,unsafeStorage:a5().bool,setClient:a5().func,cozyClient:a5().object};var it=function(){var e=(0,a4.useContext)(a8);if(!e)throw Error("useVaultClient must be used within a VaultProvider");return e.vaultClient},ir=n("88495"),ia=n("16019"),ii=n("94184"),io=n.n(ii),is=n("57557"),ic=n.n(is),iu=n("22862"),il="styles__c-overlay___8W1LN",id=["onEscape","children","className","innerRef"],ip=function(e){(0,$.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ee.Z)(t);return e=n?Reflect.construct(r,arguments,(0,ee.Z)(this).constructor):r.apply(this,arguments),(0,X.Z)(this,e)});function a(){var e;(0,T.Z)(this,a);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),(0,R.Z)((0,tC.Z)(e),"handleKeydown",function(t){27===t.keyCode&&e.props.onEscape()}),(0,R.Z)((0,tC.Z)(e),"handleClick",function(t){e.props.onClick&&t.target===t.currentTarget&&e.props.onClick()}),e}return(0,j.Z)(a,[{key:"componentDidMount",value:function(){this.props.onEscape&&document.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){this.props.onEscape&&document.removeEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.innerRef,a=ic()(this.props,id),i=document.body.getBoundingClientRect().height>window.innerHeight?a4.Fragment:iu.Z;return a4.createElement("div",(0,ia.Z)({ref:r,className:io()(il,n),onClick:this.handleClick},a),a4.createElement(i,null,t))}}]),a}(a4.Component);ip.propTypes={className:a5().string,children:a5().node,onEscape:a5().func};let ih=a4.forwardRef(function(e,t){return a4.createElement(ip,(0,ia.Z)({innerRef:t},e))});var iv=n("69311"),im=JSON.parse('{"unlock":{"title":"Login","title-oidc":"Cozy Pass","subtitle":"For security, please confirm your identity","error":"Incorrect password","label":"Cozy password","label-oidc":"Cozy Pass password","show":"show","hide":"hide","abort":"Leave","unlock":"Unlock","forgotten-password":"I forgot my password"}}'),iy=JSON.parse('{"unlock":{"title":"Authentification","title-oidc":"Cozy Pass","subtitle":"Par s\xe9curit\xe9, merci de confirmer votre identit\xe9","error":"Mot de passe incorrect, essayer \xe0 nouveau","label":"Mot de passe Cozy","label-oidc":"Mot de passe Cozy Pass","show":"afficher","hide":"masquer","abort":"Quitter","unlock":"D\xe9verrouiller","forgotten-password":"J\'ai oubli\xe9 mon mot de passe"}}'),ig=n("16396"),ib=n("71400"),iw=n("32692"),ik=n("89909"),ix=n("62125"),iO=n("36198"),iC=n("32419"),iS=n("99127"),iE=n("16579");let iP=function(e){return a4.createElement("svg",(0,ia.Z)({viewBox:"0 0 32 32"},e),a4.createElement("g",{fill:"none",fillRule:"evenodd"},a4.createElement("path",{fill:"#D1D5DB",d:"M22 0h.28A10 10 0 0132 9.72v.56A10 10 0 0122.28 20h-.56a9.96 9.96 0 01-3.42-.7L7.18 30.77A4 4 0 014.3 32H2a2 2 0 01-2-2v-3.8c0-.45.18-.88.5-1.2l.05-.05a2 2 0 011.08-.56l.89-.14A1.77 1.77 0 004 22.5V22a1 1 0 011-1h.5c.83 0 1.5-.67 1.5-1.5V19a1 1 0 011-1h.75c.69 0 1.25-.56 1.25-1.25v-.42a2 2 0 01.59-1.42l1.88-1.88A10 10 0 0122 0zm.14 4c-.46 0-.93.05-1.39.17a2 2 0 00-1.04 3.25l.1.11 4.66 4.66a2 2 0 003.32-.8l.04-.14c.45-1.84 0-3.85-1.36-5.33l-.19-.2A5.83 5.83 0 0022.42 4h-.28z"}),a4.createElement("path",{fill:"#95999D",d:"M15.45 17.55c.54.47 1.13.89 1.77 1.23L4 32H2a2 2 0 01-.82-.18l14.27-14.27z"})))};var i_=n("22960");let iA=function(e){return a4.createElement("svg",(0,ia.Z)({width:96,height:64},e),a4.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M80 32c8.837 0 16 7.163 16 16s-7.163 16-16 16-16-7.163-16-16 7.163-16 16-16zm0 8c-2.206 0-4 1.794-4 4v2h-1c-.552 0-1 .456-1 .995v8.01c0 .55.456.995 1.002.995h9.996c.553 0 1.002-.456 1.002-.995v-8.01A.995.995 0 0085 46h-1v-2c0-2.206-1.795-4-4-4zm0 8.5c.826 0 1.5.672 1.5 1.5 0 .552-.305 1.032-.75 1.29v2.46a.751.751 0 01-1.5 0v-2.46A1.49 1.49 0 0178.5 50a1.5 1.5 0 011.5-1.5zM47.755 0c4.455 0 8.665 1.689 11.85 4.762 2.779 2.679 4.507 6.147 4.97 9.9 8.201.724 14.74 7.229 15.374 15.339L80 30c-9.941 0-18 8.059-18 18H32.946C23.6 48 16 40.507 16 31.297c0-4.393 1.716-8.542 4.833-11.681a16.942 16.942 0 0110.096-4.903c.452-3.772 2.185-7.26 4.975-9.95C39.09 1.689 43.298 0 47.754 0zM80 42c1.103 0 2 1.121 2 2.5V46h-4v-1.5c0-1.379.897-2.5 2-2.5zM55.386 28a1.132 1.132 0 00-1.113 1.154c.011.203.02.3.056.51.04.227.096.46.172.692-3.7 3.16-9.297 3.168-13.007.023.165-.49.233-.942.233-1.234a1.13 1.13 0 00-1.104-1.143 1.136 1.136 0 00-1.157 1.1c0 .11-.04.36-.135.618-.153.419-.41.771-.802 1.017a1.136 1.136 0 00-.333 1.597 1.127 1.127 0 001.538.323 4.21 4.21 0 00.505-.375C42.426 34.054 45.163 35 47.986 35c2.83 0 5.573-.95 7.764-2.73.16.141.332.27.517.387a1.134 1.134 0 001.307-1.848l-.101-.073-.077-.048a1.9 1.9 0 01-.546-.589 2.312 2.312 0 01-.316-1.003A1.128 1.128 0 0055.386 28z"}))};var iR=n("77354"),iD=n("23153"),iM=n("7397"),iT=n("90736"),ij=n("6197");let iN=n("282").Z;var iI=["hidden"],iL=function(e){var t=e.hidden,n=(0,iR.Z)(e,iI),r=(0,ix.useI18n)().t;return a4.createElement(iM.Z,{position:"end"},a4.createElement(iN,(0,ia.Z)({className:"u-ph-half u-mh-0 u-miw-auto",color:"secondary",label:r(t?"unlock.show":"unlock.hide")},n),a4.createElement(iC.default,{icon:t?iT.Z:ij.Z})))},iz={"data-testid":"password",autoFocus:!0};let iZ=function(e){var t=(0,a4.useState)(!0),n=(0,D.Z)(t,2),r=n[0],a=n[1];return a4.createElement(iD.default,(0,ia.Z)({},e,{variant:"outlined",type:r?"password":"text",InputProps:{inputProps:iz,endAdornment:a4.createElement(iL,{onClick:function(){return a(!r)},hidden:r})}}))};var iB=function(e){var t,n=(0,ig.useClient)(),r=it(),a=(0,ik.default)().isMobile,i=(0,ix.useI18n)().t,o=e.onUnlock,s=e.onDismiss,c=e.closable,u=(0,a4.useState)(!1),l=(0,D.Z)(u,2),d=l[0],f=l[1],p=(0,a4.useState)(null),h=(0,D.Z)(p,2),v=h[0],m=h[1],y=(0,a4.useState)(""),g=(0,D.Z)(y,2),b=g[0],w=g[1],k=(0,a4.useCallback)(function(e){w(e.currentTarget.value)}),x=(0,a4.useCallback)((0,M.Z)(I().mark(function e(){return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),m(null),e.prev=2,e.next=5,r.unlock(b);case 5:o&&o(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),m(e.t0);case 11:return e.prev=11,f(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[2,8,11,14]])})),[r,o,b]),O=(0,a4.useCallback)(function(e){e.preventDefault(),x()},[x]),C=(0,a4.useMemo)(function(){return new URL("/auth/passphrase_reset",n.getStackClient().uri).href},[n]);var S=(t=n,U()(t,"capabilities.can_auth_with_oidc")||(0,ib.default)("vault.force-oidc-display")),E=(0,i_.useWebviewIntent)();return(0,a4.useEffect)(function(){return E&&E.call("setFlagshipUI",{bottomTheme:"light",topTheme:"light"},"cozy-keys-lib/UnlockForm"),function(){return E&&E.call("setFlagshipUI",{bottomTheme:"light",topTheme:"light"},"cozy-keys-lib/UnlockForm")}},[E]),a4.createElement(iS.default,{variant:"inverted"},a4.createElement(iE.Z,{size:"small",open:!0,onClose:c&&s,content:a4.createElement("form",{onSubmit:O,className:"u-stack-m u-flex u-flex-column u-flex-items-center"},S?a4.createElement(iC.default,{icon:iP,size:64,className:"u-mb-half"}):a4.createElement(iA,{className:"u-mb-half"}),a4.createElement(iw.default,{variant:"h3",gutterBottom:!0},i(S?"unlock.title-oidc":"unlock.title")),v?a4.createElement(iw.default,{variant:"body1",className:"u-error"},i("unlock.error")):a4.createElement(iw.default,{variant:"body1"},i("unlock.subtitle")),a4.createElement(iZ,{id:"idField",label:i(S?"unlock.label-oidc":"unlock.label"),value:b,onChange:k,fullWidth:!0,className:"u-mt-2"}),a4.createElement(iw.default,{variant:"body1",component:"a",color:"primary",href:C,className:"u-link u-mt-1 u-flex-self-start"},i("unlock.forgotten-password"))),actions:a4.createElement(iO.default,{onClick:O,label:i("unlock.unlock"),theme:"primary",className:io()({"u-mt-1":!a,"u-mt-auto":a}),busy:d,extension:"full"})}))};iB.propTypes={onDismiss:a5().func.isRequired,closable:a5().bool,onUnlock:a5().func},iB.defaultProps={closable:!0};var iF=(v=(0,M.Z)(I().mark(function e(t){var n,r=arguments;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:function(){return!0},e.next=3,n();case 3:if(e.t0=e.sent,!e.t0){e.next=8;break}return e.next=7,t.isLocked();case 7:e.t0=e.sent;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}},e)})),function(e){return v.apply(this,arguments)}),iU=function(e){var t=e.children,n=e.onDismiss,r=e.closable,a=e.onUnlock,i=e.UnlockForm,o=e.addCheckShouldUnlock,s=(0,a4.useContext)(a8),c=s.locked,u=s.vaultClient,l=(0,a4.useState)(!1),d=(0,D.Z)(l,2),f=d[0],p=d[1],h=(0,a4.useState)(!0),v=(0,D.Z)(h,2),m=v[0],y=v[1],g=(0,a4.useState)(!1),b=(0,D.Z)(g,2),w=b[0],k=b[1];return((0,a4.useEffect)(function(){var e=setInterval(function(){p(!0)},1e3);return function(){return clearInterval(e)}}),(0,a4.useEffect)(function(){var e;(e=(0,M.Z)(I().mark(function e(){var t;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iF(u,o);case 2:k(t=e.sent),y(!1),!t&&a&&a();case 6:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[]),m)?a4.createElement(ih,null,a4.createElement("div",{className:"u-ta-center u-flex u-flex-column u-flex-grow-1 u-mv-3"},f?a4.createElement(ir.default,{size:"large",color:"white"}):null)):c&&w?a4.createElement(i,{onDismiss:n,closable:r,onUnlock:a}):t||null};iU.propTypes={onDismiss:a5().func.isRequired,closable:a5().bool,onUnlock:a5().func.isRequired,addCheckShouldUnlock:a5().func},iU.defaultProps={UnlockForm:iB};let iV=(0,iv.default)({en:im,fr:iy})(iU);function iH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iH(Object(n),!0).forEach(function(t){(0,R.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var iq=a4.createContext(),iG=function(e){var t=e.children,n=e.addCheckShouldUnlock,r=it(),a=(0,a4.useState)(!1),i=(0,D.Z)(a,2),o=i[0],s=i[1],c=(0,a4.useState)(null),u=(0,D.Z)(c,2),l=u[0],d=u[1],f=(0,a4.useMemo)(function(){var e;return{showingUnlockForm:o,showUnlockForm:(e=(0,M.Z)(I().mark(function e(t){var a,i;return I().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||!t.onUnlock)){e.next=2;break}throw Error('onUnlock must be passed in showUnlockForm options. showUnlockForm({ onUnlock: () => alert("Vault has been unlocked") })');case 2:return a=function(){s(!1),t.onUnlock&&t.onUnlock()},i=function(){s(!1),t.onDismiss&&t.onDismiss()},e.next=6,iF(r,n);case 6:e.sent?(d(iW(iW({},t),{},{onUnlock:a,onDismiss:i})),s(!0)):a();case 8:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),unlockFormProps:l,vaultClient:r}},[o,l,r,n]);return a4.createElement(iq.Provider,{value:f},t)};let iK=function(e){var t=e.unlockFormProps,n=(0,a4.useContext)(iq),r=n.showingUnlockForm,a=n.unlockFormProps;return r?a4.createElement(iV,(0,ia.Z)({},a,t)):null}},51830:function(e,t,n){e.exports=n(3832),n(3068),n(85649),n(36607),n(28991),n(98960),n(4742),n(97116)},46553:function(e){"use strict";var t=function(e){return Object.assign(this,e),this};t.prototype.toString=function(){throw Error("Cannot convert Secret to string")},e.exports=t},33918:function(e,t,n){"use strict";var r=n(34155);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=n(87593),o=i.filterLevel,s=i.filterSecrets,c=n(46553),u=r.env.LOG_LEVEL||"debug",l=n(36865),d=[o,s],f=function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{!s&&null!=n.return&&n.return()}finally{if(c)throw o}}}}(d);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!1===n.apply(null,arguments))return!0}}catch(e){t.e(e)}finally{t.f()}return!1};function p(e,t,n,r){if(!f(u,e,t,n,r))console.log(l(e,t,n,r))}p.addFilter=function(e){return d.push(e)},p.setLevel=function(e){u=e};["debug","info","warn","error","ok","critical"].forEach(function(e){p[e]=function(t,n,r){return p(e,t,n,r)}}),e.exports=p,p.setNoRetry=function(e){return e?e.no_retry=!0:e={no_retry:!0},e.no_retry},p.Secret=c,p.namespace=function(e){return function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;p(t,n,r,a)}}},87593:function(e,t,n){"use strict";var r={secret:0,debug:10,info:20,warn:30,error:40,ok:50,critical:50},a=n(46553);e.exports={filterSecrets:function(e,t,n){if("secret"!==t&&n instanceof a)throw Error("You should log a secret with log.secret")},filterLevel:function(e,t){return r[t]>=r[e]}}},36865:function(e,t,n){"use strict";var r=n(62481),a=n(62481);e.exports=r},62481:function(e,t,n){"use strict";var r=n(64530);e.exports=function(e,t,n,a){var i={time:new Date,type:e,label:n,namespace:a};"object"==typeof t?(t&&t.no_retry&&(i.no_retry=t.no_retry),t&&t.message&&(i.message=t.message)):i.message=t,i.message&&i.message.stack&&(i.message=i.message.stack);var o=i;try{o=r(i).substr(0,65535)}catch(e){console.log(e.message,"cozy-logger: Failed to convert message to JSON")}return o}},7756:function(e,t,n){"use strict";var r=n(26465),a={debug:1,info:2,warn:3,error:4};function i(){this.enabled=!0,this.defaultResult=!0,this.clear()}function o(e,t){return e.n.test?e.n.test(t):e.n==t}r.mixin(i),i.prototype.allow=function(e,t){return this._white.push({n:e,l:a[t]}),this},i.prototype.deny=function(e,t){return this._black.push({n:e,l:a[t]}),this},i.prototype.clear=function(){return this._white=[],this._black=[],this},i.prototype.test=function(e,t){var n,r=Math.max(this._white.length,this._black.length);for(n=0;n<r;n++){if(this._white[n]&&o(this._white[n],e)&&a[t]>=this._white[n].l)return!0;if(this._black[n]&&o(this._black[n],e)&&a[t]<=this._black[n].l)return!1}return this.defaultResult},i.prototype.write=function(e,t,n){if(!this.enabled||this.test(e,t))return this.emit("item",e,t,n)},e.exports=i},94731:function(e,t,n){"use strict";var r=n(26465),a=n(7756),i=new r,o=Array.prototype.slice;(t=e.exports=function(e){var n=function(){return i.write(e,void 0,o.call(arguments)),n};return n.debug=function(){return i.write(e,"debug",o.call(arguments)),n},n.info=function(){return i.write(e,"info",o.call(arguments)),n},n.warn=function(){return i.write(e,"warn",o.call(arguments)),n},n.error=function(){return i.write(e,"error",o.call(arguments)),n},n.group=function(){return i.write(e,"group",o.call(arguments)),n},n.groupEnd=function(){return i.write(e,"groupEnd",o.call(arguments)),n},n.log=n.debug,n.suggest=t.suggest,n.format=i.format,n}).defaultBackend=t.defaultFormatter=null,t.pipe=function(e){return i.pipe(e)},t.end=t.unpipe=t.disable=function(e){return i.unpipe(e)},t.Transform=r,t.Filter=a,t.suggest=new a,t.enable=function(){return t.defaultFormatter?i.pipe(t.suggest).pipe(t.defaultFormatter).pipe(t.defaultBackend):i.pipe(t.suggest).pipe(t.defaultBackend)}},26465:function(e,t,n){"use strict";function r(){}n(37203).mixin(r),r.prototype.write=function(e,t,n){this.emit("item",e,t,n)},r.prototype.end=function(){this.emit("end"),this.removeAllListeners()},r.prototype.pipe=function(e){var t=this;function n(){e.write.apply(e,Array.prototype.slice.call(arguments))}function r(){e._isStdio||e.end()}return t.emit("unpipe",e),e.emit("pipe",t),t.on("item",n),t.on("end",r),t.when("unpipe",function(a){var i=a===e||void 0===a;return i&&(t.removeListener("item",n),t.removeListener("end",r),e.emit("unpipe")),i}),e},r.prototype.unpipe=function(e){return this.emit("unpipe",e),this},r.prototype.format=function(){throw Error("Warning: .format() is deprecated in Minilog v2! Use .pipe() instead. For example:\nvar Minilog = require('minilog');\nMinilog\n  .pipe(Minilog.backends.console.formatClean)\n  .pipe(Minilog.backends.console);")},r.mixin=function(e){var t,n=r.prototype;for(t in n)n.hasOwnProperty(t)&&(e.prototype[t]=n[t])},e.exports=r},93601:function(e,t,n){"use strict";var r=n(26465),a=[],i=new r;i.write=function(e,t,n){a.push([e,t,n])},i.get=function(){return a},i.empty=function(){a=[]},e.exports=i},90115:function(e,t,n){"use strict";var r=n(26465),a=/\n+$/,i=new r;i.write=function(e,t,n){var r=n.length-1;if("undefined"!=typeof console&&!!console.log){if(console.log.apply)return console.log.apply(console,[e,t].concat(n));if(JSON&&JSON.stringify){n[r]&&"string"==typeof n[r]&&(n[r]=n[r].replace(a,""));try{for(r=0;r<n.length;r++)n[r]=JSON.stringify(n[r])}catch(e){}console.log(n.join(" "))}}},i.formatters=["color","minilog"],i.color=n(82035),i.minilog=n(26687),e.exports=i},82035:function(e,t,n){"use strict";var r=n(26465),a=n(20477),i={debug:["cyan"],info:["purple"],warn:["yellow",!0],error:["red",!0]},o=new r;o.write=function(e,t,n){var r=console.log;console[t]&&console[t].apply&&(r=console[t]).apply(console,["%c"+e+" %c"+t,a("gray"),a.apply(a,i[t])].concat(n))},o.pipe=function(){},e.exports=o},26687:function(e,t,n){"use strict";var r=n(26465),a=n(20477),i={debug:["gray"],info:["purple"],warn:["yellow",!0],error:["red",!0]},o=new r;o.write=function(e,t,n){var r=console.log;"debug"!=t&&console[t]&&(r=console[t]);var o=0;if("info"!=t){for(;o<n.length&&"string"==typeof n[o];o++);r.apply(console,["%c"+e+" "+n.slice(0,o).join(" "),a.apply(a,i[t])].concat(n.slice(o)))}else r.apply(console,["%c"+e,a.apply(a,i[t])].concat(n))},o.pipe=function(){},e.exports=o},20477:function(e){"use strict";var t={black:"#000",red:"#c23621",green:"#25bc26",yellow:"#bbbb00",blue:"#492ee1",magenta:"#d338d3",cyan:"#33bbc8",gray:"#808080",purple:"#708"};e.exports=function(e,n){return n?"color: #fff; background: "+t[e]+";":"color: "+t[e]+";"}},74450:function(e,t,n){"use strict";var r=n(94731),a=r.enable,i=r.disable,o="undefined"!=typeof navigator&&/chrome/i.test(navigator.userAgent),s="undefined"!=typeof navigator&&"ReactNative"===navigator.product,c=n(90115);if(r.defaultBackend=o||s?c.minilog:c,"undefined"!=typeof window){try{r.enable(JSON.parse(window.localStorage.minilogSettings))}catch(e){}if(window.location&&window.location.search){var u=RegExp("[?&]minilog=([^&]*)").exec(window.location.search);u&&r.enable(decodeURIComponent(u[1]))}}r.enable=function(){a.call(r,!0);try{window.localStorage.minilogSettings=JSON.stringify(!0)}catch(e){}return this},r.disable=function(){i.call(r);try{delete window.localStorage.minilogSettings}catch(e){}return this},(t=e.exports=r).backends={array:n(93601),browser:r.defaultBackend,localStorage:n(19377),jQuery:n(85791)}},85791:function(e,t,n){"use strict";var r=n(26465),a=new Date().valueOf().toString(36);function i(e){this.url=e.url||"",this.cache=[],this.timer=null,this.interval=e.interval||3e4,this.enabled=!0,this.jQuery=window.jQuery,this.extras={}}r.mixin(i),i.prototype.write=function(e,t,n){!this.timer&&this.init(),this.cache.push([e,t].concat(n))},i.prototype.init=function(){if(this.enabled&&this.jQuery){var e=this;this.timer=setTimeout(function(){var t,n,r=[],i=e.url;if(0==e.cache.length)return e.init();for(t=0;t<e.cache.length;t++)try{JSON.stringify(e.cache[t]),r.push(e.cache[t])}catch(e){}e.jQuery.isEmptyObject(e.extras)?(n=JSON.stringify({logs:r}),i=e.url+"?client_id="+a):n=JSON.stringify(e.jQuery.extend({logs:r},e.extras)),e.jQuery.ajax(i,{type:"POST",cache:!1,processData:!1,data:n,contentType:"application/json",timeout:1e4}).success(function(t){t.interval&&(e.interval=Math.max(1e3,t.interval))}).error(function(){e.interval=3e4}).always(function(){e.init()}),e.cache=[]},this.interval)}},i.prototype.end=function(){},i.jQueryWait=function(e){if("undefined"!=typeof window&&(window.jQuery||window.$))return e(window.jQuery||window.$);"undefined"!=typeof window&&setTimeout(function(){i.jQueryWait(e)},200)},e.exports=i},19377:function(e,t,n){"use strict";var r=n(26465),a=!1,i=new r;i.write=function(e,t,n){if("undefined"!=typeof window&&"undefined"!=typeof JSON&&JSON.stringify&&JSON.parse)try{!a&&(a=window.localStorage.minilog?JSON.parse(window.localStorage.minilog):[]),a.push([new Date().toString(),e,t,n]),window.localStorage.minilog=JSON.stringify(a)}catch(e){}},e.exports=i},11461:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(59713)),o=r(n(48926)),s=r(n(34575)),c=r(n(93913)),u=r(n(37203)),l=n(74782),d=r(n(88838)),f=r(n(77123)),p=n(86540),h=r(n(74268)),v=n(83462);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var w=function(){var e,t,n,r,i;function u(e){var t=this;(0,s.default)(this,u),this.client=(0,v.getCozyClientFromOptions)(e),this.createWebSocket=e.createWebSocket||v.createWebSocket,this.logger=e.logger||h.default,this.subscriptions=new f.default({logger:e.logger}),this.retryManager=new d.default({raiseErrorAfterAttempts:p.raiseErrorAfterAttempts,timeBeforeSuccessful:p.timeBeforeSuccessful,baseWaitAfterFirstFailure:p.baseWaitAfterFirstFailure,maxWaitBetweenRetries:p.maxWaitBetweenRetries,logger:e.logger}),this.retryManager.on("error",function(e){return t.emit("error",e)}),this.bindEventHandlers(),(0,l.isCordova)()&&!(0,l.hasNetworkInformationPlugin)()&&this.logger.warn("This seems a Cordova app and cordova-plugin-network-information doesn't seem to be installed. Please install it from https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-network-information/ to support online and offline events.")}return(0,c.default)(u,[{key:"start",value:function(){!this.isStarted&&(this.logger.info("started"),this.isStarted=!0,this.retryManager.reset(),this.subscribeGlobalEvents(),this.subscribeClientEvents(),this.subscribeCordovaEvents(),this.emit("start"),(0,v.isOnline)()&&this.connect())}},{key:"createSocket",value:function(){this.websocket&&(this.logger.error("Unexpected replacement of an existing socket, this should not happen. A `revokeWebSocket()` should have been called first inside CozyRealtime"),this.revokeWebSocket()),this.logger.info("creating a new websocket…");var e=(0,v.getUrl)(this.client);try{return this.websocket=this.createWebSocket(e,v.doctype),this.websocket.authenticated=!1,this.websocket.onmessage=this.onWebSocketMessage,this.websocket.onerror=this.onWebSocketError,this.websocket.onopen=this.onWebSocketOpen,this.websocket.onclose=this.onWebSocketClose,this.websocket}catch(e){this.onWebSocketError(e)}}},{key:"connect",value:(e=(0,o.default)(a.default.mark(function e(){var t,n,r=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0!==(t=(r.length>0&&void 0!==r[0]?r[0]:{}).immediate)&&t,this.logger.info("connecting…"),!this.waitingForConnect){e.next=7;break}this.logger.debug("Pending reconnection, skipping reconnect"),n&&this.retryManager.stopCurrentAttemptWaitingTime(),e.next=17;break;case 7:if(this.logger.debug("No pending reconnection, will reconnect"),e.prev=8,this.waitingForConnect=!0,n){e.next=13;break}return e.next=13,this.retryManager.waitBeforeNextAttempt();case 13:this.createSocket();case 14:return e.prev=14,this.waitingForConnect=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[8,,14,17]])})),function(){return e.apply(this,arguments)})},{key:"reconnect",value:(t=(0,o.default)(a.default.mark(function e(){var t,n,r=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=void 0!==(t=(r.length>0&&void 0!==r[0]?r[0]:{}).immediate)&&t,this.hasWebSocket()&&this.revokeWebSocket(),this.connect({immediate:n});case 3:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"revokeWebSocket",value:function(){var e=this;if(this.emit("disconnected"),this.hasWebSocket()){this.logger.info("trashing the previous websocket…"),this.websocket.onmessage=null,this.websocket.onerror=function(t){e.logger.error("Error while trying to close the websocket: ".concat(t.message))},this.websocket.onopen=null,this.websocket.onclose=null;try{this.websocket.close()}catch(e){}finally{this.websocket=null}}else this.logger.error("Trying to revoke a websocket that is not attached. This should not happen")}},{key:"stop",value:function(){this.isStarted&&(this.logger.info("stopped"),this.unsubscribeCordovaEvents(),this.unsubscribeGlobalEvents(),this.unsubscribeClientEvents(),this.hasWebSocket()&&this.revokeWebSocket(),this.isStarted=!1,!this.subscriptions.isEmpty()&&this.unsubscribeAll(),this.emit("close"))}},{key:"authenticate",value:function(){if(this.isWebSocketOpen()){var e=(0,v.getToken)(this.client);this.logger.debug("authenticate with",e),this.sendWebSocketMessage("AUTH",e),this.websocket.authenticated=!0}else this.logger.error("Trying to authenticate to a non-opened websocket. This should not happen.",this.websocket,this.websocket&&this.websocket.readyState)}},{key:"sendWebSocketMessage",value:function(e,t){var n=JSON.stringify({method:e,payload:t});this.websocket.send(n)}},{key:"sendNotification",value:(n=(0,o.default)(a.default.mark(function e(t,n,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.getStackClient().fetchJSON("POST","/realtime/".concat(t,"/").concat(n),{data:r}));case 1:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"send",value:function(){return!this.sendDeprecationNoticeSent&&(this.sendDeprecationNoticeSent=!0,this.logger.warn("Deprecation notice: CozyRealtime.send() is deprecated, please use CozyRealtime.sendNotification() from now on")),this.sendNotification.apply(this,arguments)}},{key:"waitForSocketReady",value:(r=(0,o.default)(a.default.mark(function e(){var t=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isWebSocketAuthenticated()){e.next=2;break}return e.abrupt("return",!0);case 2:return e.abrupt("return",new Promise(function(e,n){t.once("ready",e),t.once("close",n)}));case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"hasWebSocket",value:function(){return!!this.websocket}},{key:"isWebSocketOpen",value:function(){return!!(this.hasWebSocket()&&this.websocket.readyState===WebSocket.OPEN)}},{key:"isWebSocketAuthenticated",value:function(){return!!(this.isWebSocketOpen()&&this.websocket.authenticated)}},{key:"subscribe",value:function(e,t,n,r){this.start();var a=this.normalizeSubscription(e,t,n,r),i=this.subscriptions.hasSameTypeAndId(a);this.subscriptions.add(a),!i&&this.isWebSocketAuthenticated()&&this.sendSubscription(a.type,a.id)}},{key:"unsubscribe",value:function(e,t,n,r){var a=this.normalizeSubscription(e,t,n,r);this.subscriptions.remove(a),!this.subscriptions.hasSameTypeAndId(a)&&this.isWebSocketAuthenticated()&&this.sendUnsubscription(a.type,a.id),this.subscriptions.isEmpty()&&this.stop()}},{key:"unsubscribeAll",value:function(){var e,t=g(this.subscriptions.getAll());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n.event,a=n.type,i=n.id,o=n.handler;this.unsubscribe(r,a,i,o)}}catch(e){t.e(e)}finally{t.f()}}},{key:"sendSubscriptions",value:function(){var e,t=g(this.subscriptions.getAllTypeAndIdPairs());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n.type,a=n.id;this.sendSubscription(r,a)}}catch(e){t.e(e)}finally{t.f()}}},{key:"sendSubscription",value:function(e,t){if(this.isWebSocketOpen()){var n=t?{type:e,id:t}:{type:e};this.logger.debug("send subscription to",n.type,n.id),this.sendWebSocketMessage("SUBSCRIBE",n)}else this.logger.error("Trying to subscribe on a non-ready socket. This should not happen. Type and id:",e,t)}},{key:"sendUnsubscription",value:function(e,t){if(this.isWebSocketOpen()){var n=t?{type:e,id:t}:{type:e};this.logger.debug("send unsubscription to",n.type,n.id),this.sendWebSocketMessage("UNSUBSCRIBE",n)}else this.logger.error("Trying to subscribe on a non-ready socket. This should not happen. Type and id:",e,t)}},{key:"normalizeSubscription",value:function(e,t,n,r){return{event:e?e.toUpperCase():e,type:t,id:r?n:null,handler:r||n}}},{key:"bindEventHandlers",value:(i=(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.onWebSocketMessage=this.onWebSocketMessage.bind(this),this.onWebSocketError=this.onWebSocketError.bind(this),this.onWebSocketOpen=this.onWebSocketOpen.bind(this),this.onWebSocketClose=this.onWebSocketClose.bind(this),this.onClientLogin=this.onClientLogin.bind(this),this.onClientTokenRefreshed=this.onClientTokenRefreshed.bind(this),this.onClientLogout=this.onClientLogout.bind(this),this.onOnline=this.onOnline.bind(this),this.onOffline=this.onOffline.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.onDeviceReady=this.onDeviceReady.bind(this),this.onResume=this.onResume.bind(this);case 12:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"onWebSocketMessage",value:function(e){var t=JSON.parse(e.data),n=t.event,r=t.payload;this.logger.info("receive message from server",{event:n,payload:r});var a,i=g(this.subscriptions.getAllHandlersForEvent(n,r.type,r.id));try{for(i.s();!(a=i.n()).done;){var o=a.value;try{o(y(y({},r.doc),{},{_type:r.type}))}catch(e){this.logger.error("handler did throw for ".concat(n,", ").concat(r.type,", ").concat(r.id))}}}catch(e){i.e(e)}finally{i.f()}"error"===n&&this.logger.warn("Stack returned an error",r)}},{key:"onWebSocketError",value:function(e){this.logger.info("An error was raised on the websocket",e),this.retryManager.onFailure(e),this.reconnect()}},{key:"onWebSocketOpen",value:function(){this.retryManager.onSuccess(),this.authenticate(),this.sendSubscriptions(),this.emit("ready")}},{key:"onWebSocketClose",value:function(e){this.logger.info("The current websocket was closed by a third party",e),this.retryManager.onFailure(e),this.reconnect()}},{key:"subscribeClientEvents",value:function(){this.client.on("login",this.onClientLogin),this.client.on("tokenRefreshed",this.onClientTokenRefreshed),this.client.on("logout",this.onClientLogout)}},{key:"unsubscribeClientEvents",value:function(){this.client.removeListener("login",this.onClientLogin),this.client.removeListener("tokenRefreshed",this.onClientTokenRefreshed),this.client.removeListener("logout",this.onClientLogout)}},{key:"onClientLogin",value:function(){this.logger.info("Received login from cozy-client"),this.isWebSocketOpen()&&(this.authenticate(),this.sendSubscriptions())}},{key:"onClientTokenRefreshed",value:function(){this.hasWebSocket()&&this.revokeWebSocket()}},{key:"onClientLogout",value:function(){this.hasWebSocket()&&this.revokeWebSocket()}},{key:"subscribeCordovaEvents",value:function(){(0,l.isCordova)()&&(document.addEventListener("deviceready",this.onDeviceReady),document.addEventListener("resume",this.onResume))}},{key:"unsubscribeCordovaEvents",value:function(){(0,l.isCordova)()&&(document.removeEventListener("deviceready",this.onDeviceReady),document.removeEventListener("resume",this.onResume))}},{key:"onDeviceReady",value:function(){this.unsubscribeGlobalEvents(),this.subscribeGlobalEvents()}},{key:"onResume",value:function(){this.reconnect({immediate:!0})}},{key:"subscribeGlobalEvents",value:function(){v.hasBrowserContext&&window.addEventListener&&(window.addEventListener("online",this.onOnline),window.addEventListener("offline",this.onOffline),window.addEventListener("visibilitychange",this.onVisibilityChange))}},{key:"unsubscribeGlobalEvents",value:function(){v.hasBrowserContext&&window.removeEventListener&&(window.removeEventListener("online",this.onOnline),window.removeEventListener("offline",this.onOffline),window.removeEventListener("visibilitychange",this.onVisibilityChange))}},{key:"onOnline",value:function(){this.logger.info("reconnect because receiving an online event"),this.reconnect({immediate:!0})}},{key:"onOffline",value:function(){this.hasWebSocket()&&this.revokeWebSocket()}},{key:"onVisibilityChange",value:function(){document.visibilityState&&"visible"===document.visibilityState&&this.retryManager.stopCurrentAttemptWaitingTime()}}]),u}();u.default.mixin(w);t.default=w},81935:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(11461)),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(this,e),this.client=t,this.createWebSocket=n.createWebSocket,this.logger=n.logger,this.realtime=null,this.handleLogin=this.handleLogin.bind(this),this.handleLogout=this.handleLogout.bind(this),this.client.on("login",this.handleLogin),this.client.on("logout",this.handleLogout),t.isLogged&&this.handleLogin()}return(0,i.default)(e,[{key:"handleLogin",value:function(){this.realtime=new o.default({client:this.client,createWebSocket:this.createWebSocket,logger:this.logger}),this.client.emit("plugin:realtime:login")}},{key:"handleLogout",value:function(){this.unsubscribeAll(),this.realtime=null,this.client.emit("plugin:realtime:logout")}},{key:"checkRealtimeInstance",value:function(){if(!this.realtime)throw Error("Unable to use realtime while cozy-client is not logged in")}},{key:"subscribe",value:function(){var e;this.checkRealtimeInstance(),(e=this.realtime).subscribe.apply(e,arguments)}},{key:"unsubscribe",value:function(){var e;this.checkRealtimeInstance(),(e=this.realtime).unsubscribe.apply(e,arguments)}},{key:"unsubscribeAll",value:function(){this.checkRealtimeInstance(),this.realtime.unsubscribeAll()}},{key:"sendNotification",value:function(){var e;this.checkRealtimeInstance(),(e=this.realtime).sendNotification.apply(e,arguments)}}]),e}();s.pluginName="realtime";t.default=s},88838:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(37203)),u=n(86540),l=r(n(74268)),d=function(){var e;function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.maxWaitBetweenRetries,r=void 0===n?u.maxWaitBetweenRetries:n,a=e.baseWaitAfterFirstFailure,i=void 0===a?u.baseWaitAfterFirstFailure:a,s=e.timeBeforeSuccessful,c=void 0===s?u.timeBeforeSuccessful:s,d=e.raiseErrorAfterAttempts,f=void 0===d?u.raiseErrorAfterAttempts:d,p=e.logger,h=void 0===p?l.default:p;(0,o.default)(this,t),this.logger=h,this.reset(),this.onSuccess=this.onSuccess.bind(this),this.onFailure=this.onFailure.bind(this),this.onSuccessAcknowledged=this.onSuccessAcknowledged.bind(this),this.raiseErrorAfterAttempts=f,this.timeBeforeSuccessful=c,this.baseWaitAfterFirstFailure=i,this.maxWaitBetweenRetries=r}return(0,s.default)(t,[{key:"onSuccess",value:function(){this.timeBeforeSuccessful>0?this.startSuccessTimer(this.onSuccessAcknowledged,this.timeBeforeSuccessful):this.onSuccessAcknowledged()}},{key:"onSuccessAcknowledged",value:function(){this.emit("success"),this.reset()}},{key:"clearSuccessTimer",value:function(){this.successTimer&&(n.g.clearTimeout(this.successTimer),this.successTimer=null)}},{key:"startSuccessTimer",value:function(e,t){var r=this;!this.successTimer&&(this.successTimer=n.g.setTimeout(function(){r.successTimer=null,e()},t))}},{key:"onFailure",value:function(e){this.logger.debug("failure, increase the failure counter of the retry manager"),this.clearSuccessTimer(),this.increaseFailureCounter(),this.emit("failure",e),this.shouldEmitError()&&this.emit("error",e)}},{key:"shouldEmitError",value:function(){return this.retries>0&&this.retries%this.raiseErrorAfterAttempts==0}},{key:"reset",value:function(){this.logger.debug("reset the retry manager"),this.clearSuccessTimer(),this.retries=0,this.wait=0}},{key:"increaseFailureCounter",value:function(){0===this.retries?this.wait=0:0===this.wait?this.wait=this.baseWaitAfterFirstFailure:this.wait=Math.min(2*this.wait,this.maxWaitBetweenRetries),this.retries=this.retries+1}},{key:"waitBeforeNextAttempt",value:(e=(0,i.default)(a.default.mark(function e(){var t,r,i=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.logger.debug("waitBeforeNextAttempt",this.wait),!this.wait){e.next=5;break}return!this.waiting&&((r=new Promise(function(e){t=function(){i.waiting===r&&(i.waiting=null),e()},n.g.setTimeout(t,i.wait)})).stop=t,this.waiting=r),e.next=5,this.waiting;case 5:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"stopCurrentAttemptWaitingTime",value:function(){this.waiting&&this.waiting.stop()}}]),t}();c.default.mixin(d);t.default=d},77123:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(18446)),s=r(n(78718)),c=r(n(82257)),u=r(n(82729)),l=r(n(87185)),d=n(86540),f=r(n(74268)),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,e),this.subscriptions=[],this.logger=t.logger||f.default}return(0,i.default)(e,[{key:"add",value:function(e){var t=this.normalize(e);if(!this.subscriptions.find(function(e){return(0,o.default)(e,t)})||(d.onDoubleSubscriptions&&(0,d.onDoubleSubscriptions)(t,{logger:this.logger}),!!d.allowDoubleSubscriptions))this.subscriptions.push(t)}},{key:"remove",value:function(e){var t=this.normalize(e);if(d.requireDoubleUnsubscriptions){var n=this.subscriptions.findIndex(function(e){return(0,o.default)(e,t)});if(n>=0){(0,c.default)(this.subscriptions,n);return}}else{var r=(0,u.default)(this.subscriptions,function(e){return(0,o.default)(e,t)});if(r&&r.length>0)return}this.logger.warn("Trying to unsubscribe to an unknown subscription",t)}},{key:"getAll",value:function(){return this.subscriptions.slice()}},{key:"getAllTypeAndIdPairs",value:function(){return(0,l.default)(this.subscriptions.map(function(e){return(0,s.default)(e,["type","id"])}),o.default)}},{key:"hasSameTypeAndId",value:function(e){var t=e.type,n=e.id,r=t||null,a=n||null;return!!this.subscriptions.find(function(e){return e.type===r&&e.id===a})}},{key:"getAllHandlersForEvent",value:function(e,t,n){var r=this;return this.subscriptions.filter(function(a){return r.isMatchingEvent(a,e,t,n)}).map(function(e){return e.handler})}},{key:"isMatchingEvent",value:function(e,t,n,r){return(!e.event||e.event===t)&&(!e.id||e.id===(r||null))&&(!e.type||e.type===(n||null))&&!0}},{key:"isEmpty",value:function(){return 0===this.subscriptions.length}},{key:"normalize",value:function(e){function t(e){throw this.logger.error(e),Error(e)}return e.event&&!d.eventNames.includes(e.event)&&t("Trying to subscribe to a unknown event name ".concat(e.event)),"function"!=typeof e.handler&&t("Trying to subscribe with a non-function handler ".concat(e.event)),"error"!==e.event&&"string"!=typeof e.type&&t("Trying to subscribe with to non-string type ".concat(e.type)),e.id&&"string"!=typeof e.id&&t("Trying to subscribe with to non-string id ".concat(e.id)),{event:e.event||null,type:e.type||null,id:e.id||null,handler:e.handler||null}}}]),e}();t.default=p},86540:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.timeBeforeSuccessful=t.requireDoubleUnsubscriptions=t.raiseErrorAfterAttempts=t.onDoubleSubscriptions=t.maxWaitBetweenRetries=t.eventNames=t.baseWaitAfterFirstFailure=t.allowDoubleSubscriptions=void 0;var a=r(n(74268));t.maxWaitBetweenRetries=3e5;t.baseWaitAfterFirstFailure=128;t.timeBeforeSuccessful=1200;t.raiseErrorAfterAttempts=8;t.allowDoubleSubscriptions=!0;t.requireDoubleUnsubscriptions=!0;t.onDoubleSubscriptions=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.logger,r=void 0===n?a.default:n;r.warn("Double subscription for ",e),r.info("The handler may be called twice for the same event!"),r.info("Remember to call one `unsubscribe` for each `subscribe`")};t.eventNames=["CREATED","UPDATED","DELETED","NOTIFIED","error"]},72916:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"RealtimePlugin",{enumerable:!0,get:function(){return s.default}});var i=a(n(11461)),o=a(n(72841)),s=a(n(81935)),c=i.default},74268:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(60732)),i="undefined"!=typeof window&&window.minilog||a.default,o=i("cozy-realtime");o.minilog=a.default,i.enable(),i.suggest.deny("cozy-realtime","warn"),i.suggest.allow("cozy-realtime","warn");t.default=o},72841:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(63038)),s=n(67294);t.default=function(e,t,n){(0,s.useEffect)(function(){if(!e.plugins||!e.plugins.realtime){console.error("[useRealtime] The provided CozyClient instance does not have a RealtimePlugin registered, useRealtime will not work");return}return Object.entries(t).forEach(function(t){var n,r=(0,o.default)(t,2),s=r[0];Object.entries(r[1]).forEach((n=(0,i.default)(a.default.mark(function t(n){var r,i,c;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(r=(0,o.default)(n,2))[0],c=r[1],t.prev=1,t.next=4,e.plugins.realtime.subscribe(i,s,c);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0),console.error("[useRealtime] Impossible to subscribe to ".concat(i," event on ").concat(s,". Does your app have the required permissions on this doctype?"));case 10:case"end":return t.stop()}},t,null,[[1,6]])})),function(e){return n.apply(this,arguments)}))}),function(){Object.entries(t).forEach(function(t){var n,r=(0,o.default)(t,2),s=r[0];Object.entries(r[1]).forEach((n=(0,i.default)(a.default.mark(function t(n){var r,i,c;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(r=(0,o.default)(n,2))[0],c=r[1],t.prev=1,t.next=4,e.plugins.realtime.unsubscribe(i,s,c);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0),console.error("[useRealtime] Impossible to unsubscribe from ".concat(i," event on ").concat(s,". Does your app have the required permissions on this doctype?"));case 10:case"end":return t.stop()}},t,null,[[1,6]])})),function(e){return n.apply(this,arguments)}))})}},n)}},83462:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createWebSocket=function(e,t){return new WebSocket(e,t)},t.doctype=void 0,t.getCozyClientFromOptions=function(e){var t=e.cozyClient,n=e.client,r=e.logger,a=void 0===r?i.default:r;return t?a.warn("Passing a `cozyClient` parameter is deprecated, please use `client` instead"):!n&&a.warn("Realtime must be initialized with a client. Ex: `new Realtime({ client })`"),n||t},t.getToken=function(e){return e.getStackClient().getAccessToken()},t.getUrl=function(e){var t=e.getStackClient().uri,n=t.toString().match("^(https:/{2})")?"wss:":"ws:",r=new URL(t).host;return"".concat(n,"//").concat(r,"/realtime/")},t.hasBrowserContext=void 0,t.isOnline=function(){return!(0,a.default)(n.g,"navigator.onLine")||n.g.navigator.onLine};var a=r(n(18721)),i=r(n(74268)),o="undefined"!=typeof window;t.hasBrowserContext=o;t.doctype="io.cozy.websocket"},29708:function(e,t,n){"use strict";var r,a,i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.startApp=t.default=t.checkApp=void 0;var o=i(n(87757)),s=i(n(48926)),c=n(6899),u=function(){return window.startApp},l=function(e){var t=e.appId,n=e.uri;return(0,c.isAndroidApp)()?{package:t}:n},d={};var f=d.startApp=(r=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.startApp,e.next=3,d.checkApp(t);case 3:if(!e.sent){e.next=9;break}return r=l(t),e.abrupt("return",new Promise(function(e,t){if(!u()){t(Error("Cordova plugin 'com.lampa.startapp' is not installed. This plugin is needed to start a native app. Required by cozy-bar"));return}n.set(r).start(e,t)}));case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.startApp=f;var p=d.checkApp=(a=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.startApp,r=l(t),e.abrupt("return",new Promise(function(e,t){if(!u()){t(Error("Cordova plugin 'com.lampa.startapp' is not installed."));return}n.set(r).check(function(t){return e("OK"===t||t)},function(n){!1===n||0===n.indexOf("NameNotFoundException")?e(!1):t(n)})}));case 3:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});t.checkApp=p;t.default=d},892:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCordova=void 0;t.isCordova=function(){return"undefined"!=typeof window&&void 0!==window.cordova}},22786:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openDeeplinkOrRedirect=void 0;var n=function(e,t,n){var r=document.createElement("iframe");return r.src=t,r.id="hiddenIframe_".concat(n),r.style.display="none",e.appendChild(r),r},r=function(e,t){var r=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);window.addEventListener("blur",o);var a=n(document.body,"about:blank",r),i=setTimeout(function(){t(),window.removeEventListener("blur",o),a.parentElement.removeChild(a)},500);function o(){clearTimeout(i),window.removeEventListener("blur",o),a.parentElement.removeChild(a)}a.contentWindow.location.href=e},a=function(e,t){for(var n=setTimeout(function(){t(),r.removeEventListener("blur",a)},500),r=window;r!=r.parent;)r=r.parent;function a(){clearTimeout(n),r.removeEventListener("blur",a)}r.addEventListener("blur",a),window.location=e},i=function(e,t){navigator.msLaunchUri(e,void 0,t)},o=function(){var e=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t=navigator.userAgent.toLowerCase(),n=t.includes("safari")&&!t.includes("chrome")||Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,r=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,a=r&&(t.includes("os 12_2")||t.includes("os 12_3"));return{isOpera:e,isFirefox:void 0!==window.InstallTrigger,isSafari:n,isChrome:!!window.chrome&&!e,isIOS122:a,isIOS:r}};t.openDeeplinkOrRedirect=function(e,t){if(navigator.msLaunchUri)i(e,t);else{var n=o();n.isChrome||n.isIOS&&!n.isIOS122?a(e,t):n.isSafari&&!n.isIOS122||n.isFirefox?r(e,t):t()}}},98048:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceName=void 0;var a=r(n(48403)),i=n(892),o=n(11656),s=n(6899),c="Device",u=function(e){for(var t=0,n=["iPhone","iPad","Watch","AppleTV"];t<n.length;t++){var r=n[t];if(e.match(new RegExp(r)))return r}return c};t.getDeviceName=function(){if(!(0,o.hasDevicePlugin)())return(0,i.isCordova)()&&console.warn("You should install `cordova-plugin-device`."),c;var e=window.device,t=e.manufacturer,n=e.model,r=(0,s.isIOSApp)()?u(n):n;return"".concat((0,a.default)(t)," ").concat(r)}},27345:function(e,t,n){"use strict";var r,a,i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isFlagshipApp=t.getFlagshipMetadata=t.FlagshipRoutes=void 0;var o=i(n(33918));t.FlagshipRoutes=a,(r=a||(t.FlagshipRoutes=a={})).Home="home",r.Cozyapp="cozyapp",r.Authenticate="authenticate",r.Onboarding="onboarding",r.Stack="stack";var s=function(){return"undefined"!=typeof window?window:void(0,o.default)("error",'"window" is not defined. This means that getGlobalWindow() shouldn\'t have been called and investigation should be done to prevent this call')};t.getFlagshipMetadata=function(){var e,t,n;return null!==(e=null===(t=s())||void 0===t?void 0:null===(n=t.cozy)||void 0===n?void 0:n.flagship)&&void 0!==e?e:{}};t.isFlagshipApp=function(){var e,t;return(null===(e=s())||void 0===e?void 0:null===(t=e.cozy)||void 0===t?void 0:t.flagship)!==void 0}},74782:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"checkApp",{enumerable:!0,get:function(){return i.checkApp}}),Object.defineProperty(t,"getDeviceName",{enumerable:!0,get:function(){return a.getDeviceName}}),Object.defineProperty(t,"getFlagshipMetadata",{enumerable:!0,get:function(){return l.getFlagshipMetadata}}),Object.defineProperty(t,"getPlatform",{enumerable:!0,get:function(){return r.getPlatform}}),Object.defineProperty(t,"hasDevicePlugin",{enumerable:!0,get:function(){return o.hasDevicePlugin}}),Object.defineProperty(t,"hasInAppBrowserPlugin",{enumerable:!0,get:function(){return o.hasInAppBrowserPlugin}}),Object.defineProperty(t,"hasNetworkInformationPlugin",{enumerable:!0,get:function(){return o.hasNetworkInformationPlugin}}),Object.defineProperty(t,"hasSafariPlugin",{enumerable:!0,get:function(){return o.hasSafariPlugin}}),Object.defineProperty(t,"isAndroid",{enumerable:!0,get:function(){return r.isAndroid}}),Object.defineProperty(t,"isAndroidApp",{enumerable:!0,get:function(){return r.isAndroidApp}}),Object.defineProperty(t,"isCordova",{enumerable:!0,get:function(){return s.isCordova}}),Object.defineProperty(t,"isFlagshipApp",{enumerable:!0,get:function(){return l.isFlagshipApp}}),Object.defineProperty(t,"isIOS",{enumerable:!0,get:function(){return r.isIOS}}),Object.defineProperty(t,"isIOSApp",{enumerable:!0,get:function(){return r.isIOSApp}}),Object.defineProperty(t,"isMobile",{enumerable:!0,get:function(){return r.isMobile}}),Object.defineProperty(t,"isMobileApp",{enumerable:!0,get:function(){return r.isMobileApp}}),Object.defineProperty(t,"isWebApp",{enumerable:!0,get:function(){return r.isWebApp}}),Object.defineProperty(t,"nativeLinkOpen",{enumerable:!0,get:function(){return c.nativeLinkOpen}}),Object.defineProperty(t,"openDeeplinkOrRedirect",{enumerable:!0,get:function(){return u.openDeeplinkOrRedirect}}),Object.defineProperty(t,"startApp",{enumerable:!0,get:function(){return i.startApp}});var r=n(6899),a=n(98048),i=n(29708),o=n(11656),s=n(892),c=n(60561),u=n(22786),l=n(27345)},60561:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.nativeLinkOpen=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(11656);var c=(r=(0,o.default)(i.default.mark(function e(t){var n,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,(0,s.hasSafariPlugin)();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}e.t0=window.SafariViewController;case 6:if(!e.t0){e.next=10;break}window.SafariViewController.show({url:n,transition:"curl"},function(e){"closed"===e.event&&window.SafariViewController.hide()},function(){window.SafariViewController.hide()}),e.next=11;break;case 10:(0,s.hasInAppBrowserPlugin)()?(r="_blank",a="clearcache=yes,zoom=no",window.cordova.InAppBrowser.open(n,r,a)):window.location=n;case 11:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.nativeLinkOpen=c},6899:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebApp=t.isMobileApp=t.isMobile=t.isIOSApp=t.isIOS=t.isAndroidApp=t.isAndroid=t.getPlatform=void 0;var r=n(892),a=function(){return(0,r.isCordova)()?window.cordova.platformId:"web"};t.getPlatform=a;var i=function(e){return a()===e};t.isIOSApp=function(){return i("ios")};t.isAndroidApp=function(){return i("android")};t.isWebApp=function(){return i("web")};t.isMobileApp=function(){return(0,r.isCordova)()};var o=function(){return window.navigator.userAgent&&window.navigator.userAgent.indexOf("Android")>=0};t.isAndroid=o;var s=function(){return window.navigator.userAgent&&/iPad|iPhone|iPod/.test(window.navigator.userAgent)};t.isIOS=s;t.isMobile=function(){return o()||s()}},11656:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasSafariPlugin=t.hasNetworkInformationPlugin=t.hasInAppBrowserPlugin=t.hasDevicePlugin=void 0;var r=n(892);t.hasDevicePlugin=function(){return(0,r.isCordova)()&&void 0!==window.device};t.hasInAppBrowserPlugin=function(){return(0,r.isCordova)()&&void 0!==window.cordova.InAppBrowser};t.hasSafariPlugin=function(){return new Promise(function(e){if(!(0,r.isCordova)()||void 0===window.SafariViewController){e(!1);return}window.SafariViewController.isAvailable(function(t){return e(t)})})};t.hasNetworkInformationPlugin=function(){return(0,r.isCordova)()&&void 0!==window.navigator.connection}},91944:function(e,t,n){"use strict";n.d(t,{Gf:function(){return c},Qm:function(){return s},ZP:function(){return u}});var r=n(16396),a=n(26969),i=r.models.contact,o=function(e){return"io.cozy.contacts"===e._type},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(o(e))return i.getInitials(e);var n=e.public_name||e.name||e.email;return n&&n[0].toUpperCase()||t},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o(e)?i.getDisplayName(e):e.public_name||e.name||e.email||t};let u=a.Contact},66614:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(16019),a=n(77354),i=n(45697),o=n.n(i),s=n(67294),c=n(41496),u=n(32419),l=n(62125),d=n(70559),f=n(64411),p=["link","isSharingShortcutCreated","isShortLabel"],h=function(e){var t=e.link,n=e.isSharingShortcutCreated,i=e.isShortLabel,o=(0,a.Z)(e,p),f=(0,l.useI18n)().t,h=(0,d.DZ)({link:t,isSharingShortcutCreated:void 0!==n&&n,isShortLabel:void 0!==i&&i,t:f}),v=h.icon,m=h.label;return s.createElement(c.default,(0,r.Z)({onClick:function(){(0,d.N8)(t)},startIcon:s.createElement(u.default,{icon:v}),label:m},o))};h.propTypes={link:o().string,isSharingShortcutCreated:o().bool,isShortLabel:o().bool};let v=(0,f.Z)(h)},72386:function(e,t,n){"use strict";n.d(t,{Z:()=>_});var r=n("16019"),a=n("17508"),i=n("77354"),o=n("45697"),s=n.n(o),c=n("67294"),u=n("96802"),l=n("32419"),d=n("25002"),f=n("23279"),p=n.n(f),h=n("73068"),v=n("34627");let m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,r=(0,c.useState)({scrollTop:0,scrollLeft:0}),a=(0,d.Z)(r,2),i=a[0],o=a[1],s=p()(function(){var t=(0,v.Q)(e);t===window?o({scrollTop:window.scrollY,scrollLeft:window.scrollX}):o({scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})},void 0===n?250:n);return(0,h.Z)(e,"scroll",s),(0,h.Z)(e,"touchmove",s),i};var y=["label","icon","follow","topLimit","scrollOptions"];let g=function(e){var t=e.label,n=e.icon,a=e.follow,o=e.topLimit,s=e.scrollOptions,d=(0,i.Z)(e,y),f=m(a,s).scrollTop<(void 0===o?50:o);return c.createElement(u.Z,(0,r.Z)({"aria-label":t,variant:f?"extended":"circular"},d),c.createElement(l.default,(0,r.Z)({icon:n},f&&{className:"u-mr-half"})),f&&t)};var b=n("62125"),w=n("70559"),k=n("64411"),x=["position","right","bottom"],O=["link","isSharingShortcutCreated","isShortLabel"],C=["style"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var E=function(e){var t=e.position,n=e.right,r=e.bottom;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({position:null!=t?t:"fixed",right:null!=n?n:"1rem",bottom:null!=r?r:"1rem"},(0,i.Z)(e,x))},P=function(e){var t=e.link,n=e.isSharingShortcutCreated,a=e.isShortLabel,o=(0,i.Z)(e,O),s=o.style,u=(0,i.Z)(o,C),l=(0,b.useI18n)().t,d=E(void 0===s?{}:s),f=(0,w.DZ)({link:t,isSharingShortcutCreated:void 0!==n&&n,isShortLabel:a,t:l}),p=f.icon,h=f.label;return c.createElement(g,(0,r.Z)({color:"primary",label:h,style:d,icon:p,follow:window,onClick:function(){(0,w.N8)(t)}},u))};P.propTypes={link:s().string.isRequired,isSharingShortcutCreated:s().bool,isShortLabel:s().bool};let _=(0,k.Z)(P)},24838:function(e,t,n){"use strict";n.d(t,{T:()=>E});var r=n("16019"),a=n("17508"),i=n("77354"),o=n("67294"),s=n("62125"),c=n("94184"),u=n.n(c),l=n("41496"),d=n("32419"),f=n("53773"),p=["label","onClick","className"],h=["label","onClick","className"],v=["label","onClick","className"],m="button__coz-btn-shared___9MFbY",y="button__coz-btn-sharedWithMe___25PBh",g=function(e){var t=e.label,n=e.onClick,a=e.className,s=(0,i.Z)(e,h);return o.createElement(l.default,(0,r.Z)({"data-test-id":"share-by-me-button",className:u()(m,a),onClick:function(){return n()},icon:o.createElement(d.default,{icon:f.default}),label:t},s))},b=function(e){var t=e.label,n=e.onClick,a=e.className,s=(0,i.Z)(e,v);return o.createElement(l.default,(0,r.Z)({className:u()(y,a),onClick:function(){return n()},startIcon:o.createElement(d.default,{icon:f.default}),label:t},s))};let w=function(e){var t=e.label,n=e.onClick,a=e.className,s=(0,i.Z)(e,p);return o.createElement(l.default,(0,r.Z)({"data-test-id":"share-button",variant:"secondary",className:a,onClick:function(){return n()},startIcon:o.createElement(d.default,{icon:f.default}),label:t},s))};var k=n("80583"),x=n("64411"),O=["docId","useShortLabel"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E=(0,x.Z)(function(e){var t=e.docId,n=e.useShortLabel,a=(0,i.Z)(e,O),c=(0,s.useI18n)().t,u=S(S({},a),{},{t:null,f:null,lang:null});return o.createElement(k.Z.Consumer,null,function(e){var a=e.byDocId,i=e.documentType,s=e.isOwner;return a[t]?s(t)?o.createElement(g,(0,r.Z)({label:n?c("".concat(i,".share.shared")):c("".concat(i,".share.sharedByMe"))},u)):o.createElement(b,(0,r.Z)({label:n?c("".concat(i,".share.shared")):c("".concat(i,".share.sharedWithMe"))},u)):o.createElement(w,(0,r.Z)({label:c("".concat(i,".share.cta"))},u))})})},51926:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var r=n(16019),a=n(77354),i=n(67294),o=n(9768),s=n(80583),c=n(64411),u=["docId","onClick"],l=(0,c.Z)(function(e){var t=e.docId,n=e.onClick,c=(0,a.Z)(e,u);return i.createElement(s.Z.Consumer,null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.byDocId,s=e.getRecipients,u=e.getSharingLink,l=e.isOwner;return a&&a[t]?i.createElement(o.eM,(0,r.Z)({recipients:s(t),link:null!==u(t),onClick:n,isOwner:l(t)},c)):null})})},69573:function(e,t,n){"use strict";n.d(t,{Y:function(){return p}});var r=n(16019),a=n(67294),i=n(95587),o=n(32419),s=n(79580),c=n(96105),u=n(11075),l=n(70559),d=n(64411),f=function(e,t){var n=(0,a.forwardRef)(function(n,s){return a.createElement(i.Z,(0,r.Z)({},n,{ref:s}),a.createElement(c.default,null,a.createElement(o.default,{icon:t})),a.createElement(u.default,{primary:e}))});return n.displayName="AddToCozySharingLink",n},p=function(e){var t=e.isSharingShortcutCreated,n=e.openSharingLinkDisplayed,r=void 0===n||n,a=e.isShortLabel,i=e.addSharingLink,o=(0,(0,d.c)().t)("Share.banner.add_to_mine",{smart_count:void 0!==a&&a?1:2}),c=s.Z;return{name:"addToCozySharingLink",label:o,icon:c,displayCondition:function(){return r&&!t},action:function(){(0,l.N8)(i)},Component:f(o,c)}}},54528:function(e,t,n){"use strict";n.d(t,{y:function(){return p}});var r=n(16019),a=n(67294),i=n(95587),o=n(32419),s=n(21342),c=n(96105),u=n(11075),l=n(70559),d=n(64411),f=function(e,t){var n=(0,a.forwardRef)(function(n,s){return a.createElement(i.Z,(0,r.Z)({},n,{ref:s}),a.createElement(c.default,null,a.createElement(o.default,{icon:t})),a.createElement(u.default,{primary:e}))});return n.displayName="CreateCozySharingLink",n},p=function(e){var t=e.openSharingLinkDisplayed,n=void 0===t||t,r=e.isShortLabel,a=e.createCozyLink,i=(0,(0,d.c)().t)("Share.create-cozy",{smart_count:void 0!==r&&r?1:2}),o=s.Z;return{name:"createCozySharingLink",label:i,icon:o,displayCondition:function(){return n},action:function(){(0,l.N8)(a)},Component:f(i,o)}}},33491:function(e,t,n){"use strict";n.d(t,{U:function(){return p}});var r=n(16019),a=n(67294),i=n(95587),o=n(32419),s=n(58300),c=n(96105),u=n(11075),l=n(70559),d=n(64411),f=function(e,t){var n=(0,a.forwardRef)(function(n,s){return a.createElement(i.Z,(0,r.Z)({},n,{ref:s}),a.createElement(c.default,null,a.createElement(o.default,{icon:t})),a.createElement(u.default,{primary:e}))});return n.displayName="SyncToCozySharingLink",n},p=function(e){var t=e.openSharingLinkDisplayed,n=void 0===t||t,r=e.isShortLabel,a=e.syncSharingLink,i=(0,(0,d.c)().t)("Share.banner.sync_to_mine",{smart_count:void 0!==r&&r?1:2}),o=s.Z;return{name:"syncToCozySharingLink",label:i,icon:o,displayCondition:function(){return n},action:function(){(0,l.N8)(a)},Component:f(i,o)}}},9768:function(e,t,n){"use strict";n.d(t,{eM:function(){return m}});var r=n(17508),a=n(94184),i=n.n(a),o=n(67294),s=n(16396),c=n(88230),u=n(40354),l=n(42191),d=n(11085),f=n(6713),p=n(91944),h={"recipients-avatars":"recipient__recipients-avatars___1npjD","--interactive":"recipient__--interactive___160Bp","recipients-avatars--link":"recipient__recipients-avatars--link___1qeON","recipients-avatars--plusX":"recipient__recipients-avatars--plusX___3-6_l","recipients-avatars--avatar":"recipient__recipients-avatars--avatar___-owjC"},v=function(e){var t=e.recipients,n=e.isOwner,r=e.client;return t.filter(function(e){return n?"owner"!==e.status:e.instance!==r.options.uri})},m=function(e){var t=e.recipients,n=e.link,a=e.size,m=e.className,y=e.onClick,g=e.isOwner,b=e.showMeAsOwner,w=(0,s.useClient)(),k=b?t.slice().reverse():v({recipients:t,isOwner:g,client:w}).reverse(),x=k.length>3,O=k.slice(3).map(function(e){return(0,p.Gf)(e)}),C=k.slice(0,3);return o.createElement("div",{className:i()(h["recipients-avatars"],(0,r.Z)({},h["--interactive"],y),m),onClick:y},n&&o.createElement("span",{"data-testid":"AvatarList-link"},o.createElement(c.Z,{className:h["recipients-avatars--link"],icon:u.Z,size:a})),x&&o.createElement("span",{"data-testid":"AvatarList-plusX"},o.createElement(l.N,{className:h["recipients-avatars--plusX"],extraRecipients:O,size:a})),C.map(function(e){return e.members?o.createElement("span",{"data-testid":"AvatarList-avatar".concat("owner"===e.status?"-owner":""),key:e.index},o.createElement(d.N,{size:a,className:i()(h["recipients-avatars--avatar"])})):o.createElement("span",{"data-testid":"AvatarList-avatar".concat("owner"===e.status?"-owner":""),key:e.index},o.createElement(f.s,{recipient:e,size:a,className:i()(h["recipients-avatars--avatar"])}))}))}},42191:function(e,t,n){"use strict";n.d(t,{N:()=>k});var r=n("73955"),a=n.n(r),i=n("45697"),o=n.n(i),s=n("67294"),c=n("88230"),u=n("46932"),l=n("89526"),d=n("11998"),f=n("28446"),p=n("26238"),h=n("17508"),v=n("16019"),m=n("4726"),y="tooltip__shared-tooltip___7Dys3",g="tooltip__shared-tooltip-list___jD5hi",b=function(e){return s.createElement(m.Z,(0,v.Z)({place:"bottom",effect:"solid",className:y},e),e.children)},w=function(e){function t(){var e,n,r;return(0,u.Z)(this,t),e=this,n=t,r=arguments,n=(0,f.Z)(n),(0,d.Z)(e,!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){return!1}}()?n.apply(e,r):Reflect.construct(n,r||[],(0,f.Z)(e).constructor))}return(0,p.Z)(t,e),(0,l.Z)(t,[{key:"render",value:function(){var e=this.context.t,t=this.props,n=t.recipientNames,r=t.cutoff,a=void 0===r?4:r;return s.createElement("ul",{className:g},n.slice(0,a).map(function(e,t){return s.createElement("li",{key:"key_name_".concat(e,"_").concat(t)},e)}),n.length>a&&s.createElement("li",null,e("Share.members.others",{smart_count:n.slice(a).length})))}}])}(s.Component);(0,h.Z)(w,"contextTypes",{t:o().func.isRequired}),w.propTypes={recipientNames:o().arrayOf(o().string),cutoff:o().number},w.defaultProps={recipientNames:[],cutoff:4};var k=function(e){var t=e.className,n=e.size,r=e.extraRecipients,i=void 0===r?[]:r,o=a()("extra-recipients-avatar-");return s.createElement("span",{"data-tip":!0,"data-for":o,className:"u-db"},s.createElement(c.Z,{className:t,size:n,text:"+".concat(Math.min(i.length,99)),style:{backgroundColor:"var(--genericRecipientBackground)",color:"var(--genericRecipientColor)"}}),s.createElement(b,{id:o},s.createElement(w,{recipientNames:i})))};k.propTypes={extraRecipients:o().arrayOf(o().string),size:o().oneOfType([o().string,o().number]),className:o().string},k.defaultProps={extraRecipients:[],size:"medium"}},11085:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(67294),a=n(88230),i=n(56815),o=function(e){var t=e.size,n=e.className;return r.createElement(a.Z,{icon:i.Z,size:t,className:n})}},6713:function(e,t,n){"use strict";n.d(t,{s:function(){return p}});var r=n(16019),a=n(17508),i=n(77354),o=n(67294),s=n(16396),c=n(88230),u=n(91944),l=n(96184),d=["recipient"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var p=function(e){var t=e.recipient,n=(0,i.Z)(e,d),p=(0,s.useClient)();if(!t)return l.Z.warn("RecipientAvatar: recipient is missing, see props:",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({recipient:t},n)),null;var h=t.avatarPath&&t.status?"".concat(p.options.uri).concat(t.avatarPath,"?v=").concat(t.status):null;return o.createElement(c.Z,(0,r.Z)({image:h,text:(0,u.Qm)(t),textId:(0,u.Gf)(t),disabled:"pending"===t.status||"mail-not-send"===t.status},n))}},40509:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(94184),a=n.n(r),i=n(45697),o=n.n(i),s=n(67294),c="recipient__recipient-idents___3s7rw",u="recipient__recipient-user___1THIU",l="recipient__recipient-details___2fZfc",d=function(e){var t=e.name,n=e.details;return s.createElement("div",{className:a()(c,"u-ml-1")},s.createElement("div",{className:u},t),s.createElement("div",{className:l},n))};d.propTypes={name:o().string.isRequired,details:o().string},d.defaultProps={details:"-"};let f=d},11782:function(e,t,n){"use strict";n.d(t,{Z:()=>z});var r=n("16019"),a=n("77354"),i=n("45697"),o=n.n(i),s=n("67294"),c=n("16396"),u=n("75536"),l=n("10059"),d=n("96105"),f=n("11075"),p=n("32692"),h=n("89909"),v=n("62125"),m=n("11954"),y=n("25002"),g=n("87757"),b=n.n(g),w=n("24321"),k=n("89197"),x=n("54920"),O=n("28158"),C=n("88495"),S=n("59549"),E=n("95587"),P=n("32419");let _=function(e){return s.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),s.createElement("path",{d:"M4.5 1H2.007C1.45 1 1 1.448 1 2v1h14V2a1 1 0 00-1.007-1H11.5L11 0H5l-.5 1zM2 4h12v9.991A2.01 2.01 0 0111.991 16H4.01A2.01 2.01 0 012 13.991V4z",fillRule:"evenodd"}))};var A=function(e){var t=e.t,n=e.isOwner,a=e.handleRevocation,i=n?"revoke":"revokeSelf",o=t("RevokeMemberItem.".concat(i,".title")),c=t("RevokeMemberItem.".concat(i,".desc"));return{name:"revokeMember",label:o,icon:_,action:function(){a()},Component:(0,s.forwardRef)(function(e,t){return s.createElement(E.Z,(0,r.Z)({},e,{ref:t}),s.createElement(d.default,null,s.createElement(P.default,{icon:_,color:"var(--errorColor)"})),s.createElement(f.default,{primary:s.createElement(p.default,{color:"error"},o),secondary:c}))})}};let R=function(e){var t=e.isOwner,n=e.status,r=e.instance,a=e.type,i=e.document,o=e.className,u=e.onRevoke,l=e.onRevokeSelf,d=e.sharingId,f=e.memberIndex,h=(0,v.useI18n)().t,g=(0,s.useRef)(),E=(0,c.useClient)(),P=(0,s.useState)(!1),_=(0,y.Z)(P,2),R=_[0],D=_[1],M=(0,s.useState)(!1),T=(0,y.Z)(M,2),j=T[0],N=T[1],I=void 0!==r&&r===E.options.uri,L=!R&&"owner"!==n&&(I&&!t||t),z=(0,s.useCallback)((0,m.Z)(b().mark(function e(){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D(!0),!t){e.next=6;break}return e.next=4,u(i,d,f);case 4:e.next=8;break;case 6:return e.next=8,l(i);case 8:D(!1);case 9:case"end":return e.stop()}},e)})),[t,u,l,i,d,f]),Z=(0,k.hk)([S.r,x.q,A],{t:h,type:null!=a?a:"one-way",isOwner:t,handleRevocation:z});return s.createElement("div",{className:o},R&&s.createElement(C.default,null),!L&&!R&&s.createElement(p.default,{variant:"body2"},h("Share.status.".concat(n)).toLowerCase()),L&&s.createElement(s.Fragment,null,s.createElement(O.Z,{ref:g,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(){return N(!j)},textVariant:"body2"},h("Share.type.".concat(a)).toLowerCase()),s.createElement(w.default,{ref:g,open:j,actions:Z,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoClose:!0,onClose:function(){return N(!1)}})))};var D=n("83556"),M=n("26782"),T=n("60743"),j=n("91944"),N=n("6713"),I=["instance","isOwner","status","recipientConfirmationData","verifyRecipient","fadeIn"],L=function(e){var t=(0,v.useI18n)().t,n=(0,c.useClient)(),i=(0,h.default)().isMobile,o=e.instance,m=e.isOwner,y=e.status,g=e.recipientConfirmationData,b=e.verifyRecipient,w=e.fadeIn,k=(0,a.Z)(e,I),x=m&&"owner"===y||o===n.options.uri,O=t(T.A8),C=(0,j.Gf)(k,O),S=g?s.createElement(M.Z,{recipientConfirmationData:g,verifyRecipient:b}):s.createElement(R,(0,r.Z)({},e,{className:"u-flex-shrink-0"}));return s.createElement(u.Z,{in:!0,timeout:w?T.Av:0},s.createElement(l.default,{gutters:i?"default":"double",size:"small"},s.createElement(d.default,null,s.createElement(N.s,{size:"small",recipient:e})),s.createElement(f.default,{primary:s.createElement(p.default,{className:"u-ellipsis",variant:"body1"},x?t("Share.recipients.you"):C),secondary:s.createElement(D.Z,{status:y,isMe:x,instance:o})}),S))};L.propTypes={instance:o().string,isOwner:o().bool,status:o().string,recipientConfirmationData:o().object,verifyRecipient:o().func};let z=L},83556:function(e,t,n){"use strict";n.d(t,{Z:()=>p});var r=n("16019"),a=n("67294"),i=n("32419"),o=n("90736");let s=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M16 0l-6 15-2.5-2.5L4 15l-1-4 10-8.5-10 6L0 6z",fillRule:"evenodd"}))};var c=n("21342"),u=n("32692"),l=n("33952"),d=n("62125"),f="recipient__recipient-status-icon___-liGw";let p=function(e){var t,n,p=e.status,h=e.isMe,v=e.instance,m=e.typographyProps,y=(0,d.useI18n)().t,g=!h&&"mail-not-sent"===p;return h||"ready"===p||"owner"===p?(t=v,n=c.Z):g?(t=y("Share.status.mail-not-sent"),n=s):(t=y(["pending","seen"].includes(p)?"Share.status.".concat(p):"Share.status.pending"),n="seen"===p?o.Z:s),a.createElement(l.p,null,a.createElement(l.E,{className:f},a.createElement(i.default,{icon:n,size:10})),a.createElement(l.Bd,null,a.createElement(u.default,(0,r.Z)({variant:"caption",color:"textSecondary"},m),t)))}},26782:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(45697),a=n.n(r),i=n(67294),o=n(41496),s=n(62125),c="share__aligned-dropdown-button___3crgG",u=function(e){var t=e.recipientConfirmationData,n=e.verifyRecipient,r=(0,s.useI18n)().t;return i.createElement(o.default,{style:{position:"initial"},variant:"text",className:c,onClick:function(){n(t)},label:r("Share.twoStepsConfirmation.verify")})};u.propTypes={recipientConfirmationData:a().object.isRequired,verifyRecipient:a().func.isRequired};let l=u},59549:function(e,t,n){"use strict";n.d(t,{r:function(){return u}});var r=n(16019),a=n(67294),i=n(95587),o=n(96105),s=n(11075),c=n(84827),u=function(e){var t=e.t,n=e.type,u=t("Share.type.".concat(n));return{name:"permission",label:u,icon:null,action:null,Component:(0,a.forwardRef)(function(e,t){return a.createElement(i.Z,(0,r.Z)({},e,{ref:t,button:!1}),a.createElement(o.default,null,a.createElement(c.Z,{checked:!0})),a.createElement(s.default,{primary:u}))})}}},93616:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(11954),a=n(25002),i=n(87757),o=n.n(i),s=n(67294),c=n(41496),u=n(26662),l=n(88495),d=n(62125),f=n(95810),p=function(){return s.createElement("div",{className:"u-ta-center"},s.createElement(l.default,{size:"xxlarge",loadingType:"sharing"}))},h=function(){var e=(0,d.useI18n)().t;return s.createElement("div",null,e("Share.loadingError"))},v=function(e){var t=e.confirm,n=e.reject,r=(0,d.useI18n)().t;return s.createElement(s.Fragment,null,s.createElement(c.default,{variant:"secondary",color:"error",label:r("Share.twoStepsConfirmation.reject"),onClick:n}),s.createElement(c.default,{label:r("Share.twoStepsConfirmation.confirm"),onClick:t}))},m=function(e){var t=e.recipientConfirmationData;return(0,(0,d.useI18n)().t)("Share.twoStepsConfirmation.confirmRejection",{userName:t.name,userEmail:t.email})},y=function(e){var t=e.reject,n=e.cancel,r=(0,d.useI18n)().t;return s.createElement(s.Fragment,null,s.createElement(c.default,{variant:"secondary",label:r("Share.twoStepsConfirmation.cancel"),onClick:n}),s.createElement(c.default,{label:r("Share.twoStepsConfirmation.reject"),onClick:t}))};let g=function(e){var t=e.createContact,n=e.document,i=e.documentType,c=e.hasSharedParent,l=e.isOwner,g=e.link,b=e.needsContactsPermission,w=e.onClose,k=e.onRevoke,x=e.onRevokeLink,O=e.onRevokeSelf,C=e.onShare,S=e.onUpdateShareLinkPermissions,E=e.permissions,P=e.recipients,_=e.sharing,A=e.sharingDesc,R=e.showShareByEmail,D=e.showShareOnlyByLink,M=e.showWhoHasAccess,T=e.twoStepsConfirmationMethods,j=void 0===T?{}:T,N=e.dialogContentOnShare,I=e.dialogActionsOnShare,L=e.dialogTitleOnShare,z=(0,d.useI18n)().t,Z=null==j?void 0:j.getRecipientsToBeConfirmed,B=(0,f.FH)(Z?"loading":"sharing"),F=(0,a.Z)(B,2),U=F[0],V=F[1],H=(0,f.FH)([]),W=(0,a.Z)(H,2),q=W[0],G=W[1],K=(0,s.useState)(void 0),Q=(0,a.Z)(K,2),Y=Q[0],J=Q[1],$=j.confirmRecipient,X=j.rejectRecipient,ee=j.recipientConfirmationDialogContent,et=(0,s.useCallback)((0,r.Z)(o().mark(function e(){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=15;break}return V("loading"),e.prev=2,e.next=5,j.getRecipientsToBeConfirmed();case 5:G(e.sent),V("sharing"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),V("error");case 13:e.next=16;break;case 15:V("sharing");case 16:case"end":return e.stop()}},e,null,[[2,10]])})),[Z,j,G,V]);(0,s.useEffect)(function(){et()},[et]);var en=function(){V("confirmingRecipient")},er=s.createElement(L,{recipientsToBeConfirmed:q}),ea=null,ei=null,eo=null;return"error"===U?ea=s.createElement(h,null):"loading"===U?ea=s.createElement(p,null):"sharing"===U?(ea=s.createElement(N,{createContact:t,document:n,documentType:i,hasSharedParent:c,isOwner:l,needsContactsPermission:b,onRevoke:k,onRevokeSelf:O,onShare:C,recipients:P,sharing:_,sharingDesc:A,showShareByEmail:R,showShareOnlyByLink:D,showWhoHasAccess:M,recipientsToBeConfirmed:q,verifyRecipient:function(e){J(e),V("confirmingRecipient")},link:g,permissions:E,onUpdateShareLinkPermissions:S,onRevokeLink:x}),ei=I?s.createElement(I,{link:g,document:n,documentType:i}):null):"confirmingRecipient"===U?(er=z("Share.twoStepsConfirmation.title"),ea=s.createElement(ee,{recipientConfirmationData:Y}),ei=s.createElement(v,{confirm:function(){$(Y).then(function(){et()})},reject:function(){J(Y),V("rejectingRecipient")}}),eo=function(){V("sharing")}):"rejectingRecipient"===U&&(er=z("Share.twoStepsConfirmation.titleReject"),ea=s.createElement(m,{recipientConfirmationData:Y}),ei=s.createElement(y,{reject:function(){V("loading"),X(Y).then(function(){et()})},cancel:en}),eo=en),s.createElement(u.Z,{disableGutters:!0,disableEnforceFocus:!0,open:!0,onClose:w,onBack:eo,title:er,content:ea,actions:ei})}},28508:function(e,t,n){"use strict";n.d(t,{V:()=>nD});var r,a,i,o,s,c=n("16019"),u=n("57557"),l=n.n(u),d=n("67294"),f=n("26335"),p=n("77354"),h=n("45697"),v=n.n(h),m=n("16396"),y=n("45827"),g=n("95051"),b=n("91944"),w=n("94184"),k=n.n(w),x=n("32692"),O=n("89909"),C=n("62125"),S=n("11954"),E=n("98477"),P=n("25002"),_=n("87757"),A=n.n(_),R=n("71400"),D=n("56664"),M=n("17508"),T=n("58808"),j=n.n(T),N=n("88230"),I=n("42599"),L=["label","variant","color","className"],z=(0,d.forwardRef)(function(e,t){var n=e.label,r=e.variant,a=void 0===r?"default":r,i=e.color,o=void 0===i?"primary":i,s=e.className,u=(0,p.Z)(e,L);return d.createElement(I.Z,(0,c.Z)({ref:t,className:k()(s,(0,M.Z)({noLabel:!n,ghost:"ghost"===a},"customColor-".concat(o),o)),label:n,variant:"active"===a?"default":"outlined",color:"active"===a?"primary":"default"},u))});z.propTypes={label:v().oneOfType([v().string,v().object]),variant:v().oneOf(["default","active","ghost"]),color:v().oneOf(["primary","success","error","warning","info"]),className:v().string};var Z=n("88495"),B=n("11085"),F=n("10059"),U=n("96105"),V=n("11075"),H=n("26969"),W=m.models.contact,q=function(e){var t,n,r,a=e.contactOrGroup,i=(0,C.useI18n)().t,o=a._type===H.Group.doctype;return o?(n=a.name,t="G",r=i("Share.members.count",{smart_count:a.members.length.toString()})):(n=(0,b.Gf)(a),t=(0,b.Qm)(a),r=W.getPrimaryCozy(a)),d.createElement(F.default,{button:!0},d.createElement(U.default,null,o?d.createElement(B.N,{size:"small"}):d.createElement(N.Z,{text:t,size:"small"})),d.createElement(V.default,{primary:n,secondary:r&&""!==r?r:"-"}))},G=v().shape({_type:v().string.isRequired,email:v().string.isRequired});q.propTypes={contactOrGroup:v().oneOfType([b.ZP.propType,H.Group.propType,G]).isRequired,contacts:v().arrayOf(b.ZP.propType)};var K=function(e){return/([\w.+-]+@[\w.-]+\.[\w-]+)/i.test(String(e).toLowerCase())},Q=function(e,t){if(!t.email)return!1;var n=RegExp(e,"i");return Array.isArray(t.email)?t.email.some(function(e){return n.test(e.address)}):n.test(t.email)},Y=function(e,t){if(!t.cozy&&!t.url)return!1;var n=RegExp(e,"i");return t.cozy&&Array.isArray(t.cozy)?t.cozy.some(function(e){return n.test(e.url)}):n.test(t.url)},J={container:"autosuggest__container___1Yro7",suggestionsContainer:"autosuggest__suggestionsContainer___3EDuG",suggestionsContainerOpen:"autosuggest__suggestionsContainerOpen___35OCI",input:"autosuggest__input___1Ea-3",suggestionsList:"autosuggest__suggestionsList___3uRpV",suggestionHighlighted:"autosuggest__suggestionHighlighted___1vpXJ",recipientsContainer:"autosuggest__recipientsContainer___1JYxA",recipientChip:"autosuggest__recipientChip___d5I3R"},$=function(e){var t=e.loading,n=e.contactsAndGroups,r=e.recipients,a=e.onPick,i=e.onRemove,o=e.placeholder,s=(0,d.useState)(""),u=(0,P.Z)(s,2),l=u[0],f=u[1],p=(0,d.useState)([]),h=(0,P.Z)(p,2),v=h[0],m=h[1],y=(0,d.useState)(!1),g=(0,P.Z)(y,2),w=g[0],k=g[1],x=(0,d.useState)(!1),O=(0,P.Z)(x,2),C=O[0],S=O[1],E=(0,d.useRef)(null),_=function(e){var t=e.trim().toLowerCase();return 0===t.length?[]:n.filter(function(e){var n,r,a,i;return n=t,(r=e)._type===H.Group.doctype&&RegExp(n,"i").test(r.name)||(a=t,!!(i=e).fullname&&RegExp(a,"i").test(i.fullname))||Q(t,e)||Y(t,e)})},A=function(e){(("Enter"===e.key||13===e.keyCode)&&K(l)||("Space"===e.key||32===e.keyCode)&&K(l))&&D({email:l})},R=function(e){var t=e.key,n=e.keyCode;r.length>0&&""===l&&("Backspace"===t||8===n||"Delete"===t||46===n)&&document.getElementById("recipient_".concat(r.length-1)).focus()},D=function(e){var t;a(e),f(""),null==E||null===(t=E.current)||void 0===t||null===(t=t.input)||void 0===t||t.focus()},M=function(e){var t;i(e),null==E||null===(t=E.current)||void 0===t||null===(t=t.input)||void 0===t||t.focus()};return d.createElement(j(),{ref:E,theme:J,suggestions:v.slice(0,20),getSuggestionValue:function(e){return e},onSuggestionsFetchRequested:function(e){var t=e.value,n=_(t);m(0===n.length&&K(t)?[{email:t,_type:b.ZP.doctype}]:n)},onSuggestionsClearRequested:function(){m([])},renderSuggestion:function(e){return d.createElement(q,{contactOrGroup:e})},renderInputComponent:function(e){return d.createElement("div",{className:J.recipientsContainer},r.map(function(e,t){var n=e._type===H.Group.doctype,r=(0,b.Qm)(e),a=(0,b.Gf)(e);return d.createElement(z,{id:"recipient_".concat(t),key:"key_recipient_".concat(t),avatar:n?d.createElement(B.N,{size:"xsmall"}):d.createElement(N.Z,{text:r,size:"xsmall"}),label:a,onDelete:function(){M(e)},className:J.recipientChip})}),d.createElement("input",(0,c.Z)({},e,{onKeyPress:A,onKeyUp:R})),t&&C?d.createElement(Z.Spinner,{color:"var(--primaryColor)"}):null)},highlightFirstSuggestion:!0,inputProps:{onFocus:function(){S(!0)},onChange:function(e,t){var n=t.newValue,r=t.method;if(w){var a,i="string"==typeof(a=n)?a.match(/([\w.+-]+@[\w.-]+\.[\w-]+)/gi):null;i&&i.map(function(e){D({email:e})}),k(!1)}else"object"!=typeof n?f(n):("click"===r||"enter"===r)&&D(n)},onPaste:function(){k(!0)},onBlur:function(){""!==l&&l.match(/\S+@\S+/)&&D({email:l})},value:l,type:"email",placeholder:o}})};$.propTypes={loading:v().bool,contactsAndGroups:v().array,recipients:v().array.isRequired,onPick:v().func.isRequired,onRemove:v().func.isRequired,placeholder:v().string};var X=(r=(0,S.Z)(A().mark(function e(t,n,r){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=(0,S.Z)(A().mark(function e(n){var a,i;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.id){e.next=4;break}return e.abrupt("return",n);case 4:if(!K(n.email)){e.next=16;break}return e.next=7,t.collection("io.cozy.contacts").find({email:{$elemMatch:{address:n.email}},_id:{$gt:null}},{indexedFields:["_id"]});case 7:if(!((a=e.sent).data.length>0)){e.next=12;break}return e.abrupt("return",a.data[0]);case 12:return e.next=14,r({email:[{address:n.email,primary:!0}]});case 14:return i=e.sent,e.abrupt("return",i.data);case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)}),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter(function(e){var n;return null===(n=e.relationships)||void 0===n||null===(n=n.groups)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.some(function(e){return e._id===t})})},et=n("16700");function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach(function(t){(0,M.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ea=function(e){var t=e.currentRecipients,n=e.recipients,r=e.placeholder,a=e.onPick,i=e.onRemove,o=(0,et.LG)(),s=(0,m.useQueryAll)(o.definition,o.options),c=(0,et.r)(),u=(0,m.useQueryAll)(c.definition,er(er({},c.options),{},{enabled:!!(0,R.default)("sharing.show-recipient-groups")})),l=(0,et.pM)(),f=(0,m.useQueryAll)(l.definition,l.options),p=(0,m.isQueryLoading)(s)||s.hasMore||(0,m.isQueryLoading)(f)||f.hasMore||(0,R.default)("sharing.show-recipient-groups")&&((0,m.isQueryLoading)(u)||u.hasMore),h=t.map(function(e){return e.id}).filter(Boolean),v=(f.data||[]).filter(function(e){var t=e._id;return!(0,R.default)("sharing.show-recipient-groups")||!h.includes(t)}).map(function(e){var t=ee(s.data,e.id).map(function(e){return er(er({},e),{},{isReachable:!0})});if(!0!==(0,R.default)("sharing.show-recipient-groups"))return er(er({},e),{},{members:t});var n=ee(u.data,e.id).map(function(e){return er(er({},e),{},{isReachable:!1})});return er(er({},e),{},{members:[].concat((0,E.Z)(t),(0,E.Z)(n))})}),y=[].concat((0,E.Z)(s.data||[]),(0,E.Z)(v));return d.createElement($,{loading:p,contactsAndGroups:y,recipients:n,onPick:a,onRemove:i,placeholder:r})};ea.propTypes={currentRecipients:v().array,recipients:v().array,placeholder:v().string,onPick:v().func.isRequired,onRemove:v().func.isRequired},ea.defaultProps={currentRecipients:[],recipients:[]};var ei=n("41496"),eo=n("53189"),es=n("60743"),ec=function(e){var t=e.documentName,n=e.onConfirm,r=(0,C.useI18n)().t,a=(0,es.Qk)();return d.createElement(eo.Z,{open:!0,title:r("ShareRecipientsLimitModal.title"),content:r("ShareRecipientsLimitModal.content",{documentName:t,limit:a}),actions:d.createElement(ei.default,{label:r("ShareRecipientsLimitModal.confirm"),onClick:n,fullWidth:!0})})};ec.propTypes={documentName:v().string.isRequired};var eu=function(e){return d.createElement(ei.default,{onClick:function(){e.onSubmit()},size:"large",busy:e.loading,label:e.label,disabled:e.disabled})};eu.propTypes={onSubmit:v().func.isRequired,label:v().string,loading:v().bool,disabled:v().bool},eu.defaultProps={label:"Submit",loading:!1};var el=n("32419"),ed=n("52747"),ef=n("19322"),ep=n("7977"),eh=n("46932"),ev=n("89526"),em=n("64222"),ey=n("26238"),eg=n("11998"),eb=n("28446"),ew=n("17158"),ek=n("25976"),ex=["selectProps","innerProps"];function eO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(n),!0).forEach(function(t){(0,M.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eS=function(e){var t=e.selectProps.onControlClicked,n=e.innerProps,r=(0,p.Z)(e,ex),a=eC(eC({},n),{},{onClick:t,onTouchStart:t});return d.createElement(ep.c.Control,(0,c.Z)({},r,{innerProps:a}))};eS.propTypes={selectProps:v().object.isRequired};let eE=function(e){return d.createElement("svg",(0,c.Z)({viewBox:"0 0 24 24"},e),d.createElement("path",{d:"M20.603 17.825a1.571 1.571 0 002.222-2.222l-9.428-9.428a1.571 1.571 0 00-2.222 0l-9.429 9.428a1.571 1.571 0 002.222 2.222l8.318-8.317 8.317 8.317z",fillRule:"evenodd"}))};var eP=n("43755"),e_=["actions"],eA=["className","components","disabled","fullwidth","styles","breakpoints","classNamePrefix","name"];function eR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eR(Object(n),!0).forEach(function(t){(0,M.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eM={"select--disabled":"styles__select--disabled___1W3en","select--fullwidth":"styles__select--fullwidth___2l_xM","select--autowidth":"styles__select--autowidth___16AEp","select-option":"styles__select-option___ov_IT","select-option--disabled":"styles__select-option--disabled___1du57","select-option__actions":"styles__select-option__actions___2WOjb","select-option--focused":"styles__select-option--focused___1Vpjv","select-option--selected":"styles__select-option--selected___R3_ES","select-option__checkbox":"styles__select-option__checkbox___15WVE","select-option__label":"styles__select-option__label___1Xi5R","select-option__checkmark":"styles__select-option__checkmark___ChXXs",select__overlay:"styles__select__overlay___3H8Jy"},eT={tiny:"2rem",medium:"2.5rem",large:"3rem"},ej=function(e,t){if(!(e&&t))return{};var n=e.style.paddingTop||"0px",r=e.style.paddingBottom||"0px";return{menuList:function(a){var i=(a.paddingTop||0)+(a.paddingBottom||0),o=e.getBoundingClientRect().bottom-t.getBoundingClientRect().bottom-i;return eD(eD({},a),{},{maxHeight:"calc(".concat(o,"px - ").concat(n," - ").concat(r,")")})}}},eN=function(e){var t,n=e.children,r=e.isSelected,a=e.isFocused,i=e.isDisabled,o=e.innerProps,s=e.innerRef,u=e.labelComponent,l=e.withCheckbox;return d.createElement("div",(0,c.Z)({},o,{ref:s,className:k()(eM["select-option"],(t={},(0,M.Z)(t,eM["select-option--selected"],r&&!l),(0,M.Z)(t,eM["select-option--focused"],a),(0,M.Z)(t,eM["select-option--disabled"],i),t))}),l&&d.createElement("input",{type:"checkbox",readOnly:!0,checked:r,className:eM["select-option__checkbox"]}),d.createElement("span",{className:eM["select-option__label"]},d.createElement("span",{className:"u-ellipsis"},u||n),!!u&&n),!l&&d.createElement("span",{className:eM["select-option__checkmark"]},r&&d.createElement(el.default,{icon:ef.Z,color:"var(--primaryColor)",className:"u-ph-half"})))};eN.propTypes={withCheckbox:v().bool,labelComponent:v().node},eN.defaultProps={withCheckbox:!1};var eI=function(e){var t=e.actions,n=(0,p.Z)(e,e_);return d.createElement(eN,(0,c.Z)({},n,{labelComponent:n.children}),d.createElement("span",{className:eM["select-option__actions"]},t.map(function(e,t){return d.createElement(el.default,(0,c.Z)({},e.iconProps,{key:t,icon:e.icon,color:n.isFocused?"var(--iconTextColor)":"var(--hintTextColor)",className:"u-ph-half",onClick:function(t){t.stopPropagation(),e.onClick(n)}}))})))};eI.propTypes={actions:v().arrayOf(v().shape({icon:v().string,onClick:v().func,iconProps:v().object}))},eI.defaultProps={actions:[]};var eL={Control:eS,DropdownIndicator:function(e){return d.createElement(ep.c.DropdownIndicator,e,d.createElement(el.default,{icon:e.selectProps.menuIsOpen?eE:ed.Z,color:"var(--iconTextColor)",width:"20",height:"16"}))},Option:eN},ez=function(e){(0,ey.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,eb.Z)(t);return e=n?Reflect.construct(r,arguments,(0,eb.Z)(this).constructor):r.apply(this,arguments),(0,eg.Z)(this,e)});function a(e){var t;return(0,eh.Z)(this,a),(t=r.call(this,e)).state={isOpen:!1},t.element=null,t.handleRef=t.handleRef.bind((0,em.Z)(t)),t.handleOpen=t.handleOpen.bind((0,em.Z)(t)),t.handleClose=t.handleClose.bind((0,em.Z)(t)),t}return(0,ev.Z)(a,[{key:"handleOpen",value:function(){this.refreshMenuStyle(),this.setState({isOpen:!0})}},{key:"refreshMenuStyle",value:function(){if(this.props.container&&this.controlRef){var e;this.menuStyle=ej((e=this.props.container)&&e.current||e,this.controlRef)}}},{key:"handleClose",value:function(){this.setState({isOpen:!1})}},{key:"handleRef",value:function(e){var t=this.props.inputRef;e&&e.select&&(e.select.controlRef&&(this.controlRef=e.select.controlRef),e.select.inputRef&&"function"==typeof t&&t(e.select.inputRef))}},{key:"render",value:function(){var e,t,n=this.props,r=n.className,a=n.components,i=n.disabled,o=n.fullwidth,s=n.styles,u=n.breakpoints.isMobile,l=n.classNamePrefix,f=n.name,h=(0,p.Z)(n,eA),v=this.state.isOpen&&u;return d.createElement(ew.ZP,(0,c.Z)({ref:this.handleRef,components:a?eD(eD({},eL),a):eL,styles:eD(eD(eD({},(e=this.props,{control:function(t,n){var r,a;return eD(eD({},t),{},{backgroundColor:e.disabled?"transparent":"var(--paperBackgroundColor)",border:(r=e,a=n,r.inset?".125rem solid var(--paperBackgroundColor)":".0625rem solid ".concat(a.isFocused?"var(--primaryColor)":"var(--borderMainColor)")),":hover":{borderColor:e.inset?"var(--paperBackgroundColor)":"var(--hintTextColor)",backgroundColor:e.inset?"var(--defaultBackgroundColor)":"var(--paperBackgroundColor)",cursor:"pointer"},borderRadius:".1875rem",boxShadow:"unset",height:eT[e.size],minHeight:eT[e.size]})},placeholder:function(e){return eD(eD({},e),{},{color:"var(--secondaryTextColor)"})},dropdownIndicator:function(e){return eD(eD({},e),{},{marginRight:".75rem",height:".875rem",width:".875rem",padding:0})},indicatorSeparator:function(){return{display:"none"}},valueContainer:function(e){return eD(eD({},e),{},{color:"var(--primaryTextColor)"})},singleValue:function(e){return eD(eD({},e),{},{color:"var(--primaryTextColor)"})},multiValue:function(e){return eD(eD({},e),{},{backgroundColor:"var(--hintTextColor)"})},menu:function(e){return eD(eD({},e),{},{backgroundColor:"var(--paperBackgroundColor)",zIndex:10})}})),s),this.menuStyle||{}),onMenuOpen:this.handleOpen,onMenuClose:this.handleClose},h,{isDisabled:i,className:k()((t={},(0,M.Z)(t,eM.select__overlay,v),(0,M.Z)(t,eM["select--autowidth"],!o),(0,M.Z)(t,eM["select--disabled"],i),(0,M.Z)(t,eM["select--fullwidth"],o),t),r),classNamePrefix:(0,ek.isIOSApp)()?"needsclick ".concat(l||""):l||"",selectProps:{name:f}}))}}]),a}(d.Component);ez.propTypes={container:v().object,components:v().object,disabled:v().bool,fullwidth:v().bool,inset:v().bool,name:v().string,inputRef:v().func,size:v().oneOf(["tiny","medium","large"]),styles:v().object},ez.defaultProps={components:{},fullwidth:!1,inset:!1,size:"large",styles:{}};let eZ=(0,eP.default)()(ez);var eB=n("96184");function eF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eF(Object(n),!0).forEach(function(t){(0,M.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eV="share__select-wrapper___3XBKC",eH="share__select-option___3Jp8_",eW="share__select-option-label___1BWz_",eq="share__select-option-desc___3jOnr",eG=function(e){return d.createElement(ep.c.DropdownIndicator,e,d.createElement(el.default,{icon:ed.Z,color:"var(--iconTextColor)"}))},eK=function(e){return d.createElement(ep.c.Option,e,d.createElement("div",{className:k()(eH)},e.isSelected&&d.createElement(el.default,{icon:ef.Z,color:"var(--primaryColor)"}),d.createElement("div",null,d.createElement("div",{className:eW},e.label),d.createElement("div",{className:eq},e.data.desc))))},eQ={option:function(e,t){return eU(eU({},e),{},{color:"var(--primaryTextColor)",backgroundColor:t.isFocused?"var(--actionColorHover)":null,padding:0,borderBottom:0===t.options.findIndex(function(e){return e.value===t.value})?"1px solid var(--borderMainColor)":null})},menu:function(e){return eU(eU({},e),{},{backgroundColor:"var(--paperBackgroundColor)",width:"204%"})}},eY=function(e){var t=e.options,n=e.onChange;return d.createElement("div",{className:eV},d.createElement(eZ,{name:"select",classNamePrefix:"needsclick react-select",components:{DropdownIndicator:eG,Option:eK},styles:eQ,defaultValue:t[0],isSearchable:!1,onChange:function(e){n(e.value)},options:t,menuPosition:"fixed"}))};eY.propTypes={onChange:v().func,options:v().array.isRequired},eY.defaultProps={onChange:eB.Z.log,value:""};function eJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eJ(Object(n),!0).forEach(function(t){(0,M.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eX=function(e,t,n){if(1===t.length){var r,a=t[0],i=b.ZP.isContact(a)?m.models.contact.getPrimaryEmail(a):a.email,o=m.models.contact.getPrimaryCozy(a);if(a._type===H.Group.doctype)return["".concat(n,".share.shareByEmail.singleGroupSuccess"),{groupName:a.name}];if(i)return["".concat(n,".share.shareByEmail.singleContactSuccess"),{email:i}];else if(o)return["".concat(n,".share.shareByEmail.singleContactSuccess"),{email:o}];else return["".concat(n,".share.shareByEmail.contactSuccess"),{smart_count:1}]}var s=(r=e,t.filter(function(e){if(b.ZP.isContact(e)){var t=m.models.contact.getPrimaryEmail(e),n=m.models.contact.getPrimaryCozy(e);return!r.find(function(e){return t&&e.email&&e.email===t||n&&e.instance&&e.instance===n})}return!0}).reduce(function(e,t){return t._type===H.Group.doctype?e$(e$({},e),{},{group:e.group+1}):e$(e$({},e),{},{contact:e.contact+1})},{group:0,contact:0}));return s.contact>0&&s.group>0?["".concat(n,".share.shareByEmail.contactAndGroupSuccess"),{nbContact:s.contact,nbGroup:s.group}]:s.group>0?["".concat(n,".share.shareByEmail.groupSuccess"),{smart_count:s.group}]:["".concat(n,".share.shareByEmail.contactSuccess"),{smart_count:s.contact}]},e0=function(e){var t=e.t,n=e.err,r=e.documentType,a=e.recipients,i=e.selectedOption;if("FetchError"===n.name&&400===n.status&&JSON.parse(n.message).errors[0].detail.startsWith("A group member cannot be added as they are already in")){var o=t("Share.errors.sharingRights.".concat("readOnly"===i?"readWrite":"readOnly"));return 1===a.length&&a[0]._type===b.ZP.doctype?["Share.errors.contactAlreadyInSharing",{smart_count:a.length,contactName:(0,b.Gf)(a[0]),sharingRights:o,icon:!1}]:["Share.errors.groupMemberAlreadyInSharing",{smart_count:a.length,groupName:a[0].name,sharingRights:o,icon:!1}]}return["".concat(r,".share.error.generic")]},e1=n("46513"),e2={"coz-form":"share__coz-form___1ICST","coz-form-group":"share__coz-form-group___VsQp7","share-type-control":"share__share-type-control___1YoRr"},e4=function(e){var t,n,r,a,i=e.document,o=e.sharingDesc,s=e.onShare,c=e.createContact,u=e.documentType,l=e.currentRecipients,f=e.sharing,p=(0,m.useClient)(),h=(0,C.useI18n)().t,v=(0,D.useAlert)().showAlert,y=(0,d.useState)([]),g=(0,P.Z)(y,2),b=g[0],w=g[1],k=(0,d.useState)(!1),x=(0,P.Z)(k,2),O=x[0],_=x[1],M=(0,d.useState)("readWrite"),T=(0,P.Z)(M,2),j=T[0],N=T[1],I=(0,d.useState)(!1),L=(0,P.Z)(I,2),z=L[0],Z=L[1],B=function(){N("readWrite"),w([]),_(!1)},F=function(e){w((0,R.default)("sharing.show-recipient-groups")?(0,es.$U)(b,e):(0,es.gc)(b,e))},U=function(e){var t=b.findIndex(function(t){return t===e});w([].concat((0,E.Z)(b.slice(0,t)),(0,E.Z)(b.slice(t+1))))};var V=(t=(0,S.Z)(A().mark(function e(){var t,n,r,a;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==b.length){e.next=2;break}return e.abrupt("return");case 2:if(t=l,!(0,es.F4)(t,b)){e.next=6;break}return Z(!0),e.abrupt("return");case 6:return _(!0),e.prev=7,e.next=10,X(p,b,c);case 10:return n=e.sent,r=[],a=[],"readOnly"===j?a=n:r=n,e.next=16,s({document:i,recipients:r,readOnlyRecipients:a,description:o,openSharing:r.length>0});case 16:v({message:h.apply(void 0,(0,E.Z)(eX(t,n,u))),severity:"success",variant:"filled"}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),v({message:h.apply(void 0,(0,E.Z)(e0({t:h,err:e.t0,documentType:u,recipients:b,selectedOption:j}))),severity:"error",variant:"filled"});case 22:return e.prev=22,B(),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[7,19,22,25]])})),function(){return t.apply(this,arguments)}),H=b.length>0;return d.createElement("div",{className:e2["coz-form-group"]},d.createElement("div",{className:e2["coz-form"]},d.createElement(ea,{placeholder:0===b.length?h("".concat(u,".share.shareByEmail.emailPlaceholder")):"",onPick:function(e){return F(e)},onRemove:function(e){return U(e)},currentRecipients:l,recipients:b})),H&&d.createElement("div",{className:e2["share-type-control"]},d.createElement(eY,{value:j,options:(n=!!f&&(0,e1.Dh)(f,i._id),r={value:"readWrite",label:h("Share.type.two-way"),desc:h("Share.type.desc.two-way"),disabled:!1},a={value:"readOnly",label:h("Share.type.one-way"),desc:h("Share.type.desc.one-way"),disabled:!1},n?[a]:[r,a]),onChange:function(e){N(e)}}),d.createElement(eu,{label:h("".concat(u,".share.shareByEmail.send")),onSubmit:V,loading:O,disabled:0===b.length})),z?d.createElement(ec,{documentName:i.name,onConfirm:function(){return Z(!1)}}):null)};e4.propTypes={currentRecipients:v().arrayOf(v().object),document:v().object.isRequired,documentType:v().string.isRequired,sharingDesc:v().string.isRequired,onShare:v().func.isRequired,createContact:v().func.isRequired,sharing:v().object};var e3=n("83631"),e5=n("40354"),e6=n("77349"),e9=n("83913");let e8=n("96899").Z;var e7=n("43271"),te=n("30923"),tt=n("63430"),tn=n("76110"),tr=n("97562"),ta=n("87827"),ti=n("313"),to=n("23605"),ts=n("99580"),tc=n("95347"),tu=function(e){var t=e.ampm,n=e.mode,r=e.lang;switch(n){case"date":return"fr"===r?"dd/LL/yyyy":"LL/dd/yyyy";case"time":return"fr"===r?"HH:mm":t?"HH:mm a":"HH:mm";case"dateTime":return"fr"===r?"dd/LL/yyyy HH:mm":t?"LL/dd/yyyy HH:mm a":"LL/dd/yyyy HH:mm";default:return"fr"===r?"dd/LL/yyyy":t?"LL/dd/yyyy a":"LL/dd/yyyy"}},tl=n("41256");let td=(0,tl.Z)({en:{cancel:"Cancel",clear:"Clear",invalidDate:"Invalid date",ok:"Ok",today:"Today",minDateLabelError:"Date should not be before minimal date (%{date})"},fr:{cancel:"Annuler",clear:"Supprimer",invalidDate:"Date invalide",ok:"Ok",today:"Aujourd'hui",minDateLabelError:"La date ne doit pas \xeatre ant\xe9rieure \xe0 la date minimale (%{date})"}});var tf=n("41120"),tp=["className","label","clearable","value","placeholder","onFocus","onBlur","onChange","minDate","minDateLabelError","format","cancelLabel","clearLabel","okLabel","todayLabel","showTodayButton","helperText","errorLabel","inputVariant","inputProps","KeyboardButtonProps","enableKeyboard","mode","ampm"];function th(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?th(Object(n),!0).forEach(function(t){(0,M.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):th(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tm={fr:ts.Z,en:to.Z},ty=(0,tf.Z)(function(){return{overrides:{width:"100%",height:function(e){return e?"5rem":"inherit"},MuiOutlinedInput:{"&:focused":{notchedOutline:{borderColor:"var(--primaryColor)"}}}}}}),tg=(0,d.forwardRef)(function(e,t){var n,r=e.className,a=e.label,i=e.clearable,o=e.value,s=e.placeholder,u=e.onFocus,l=e.onBlur,f=e.onChange,h=e.minDate,v=e.minDateLabelError,m=e.format,y=e.cancelLabel,g=e.clearLabel,b=e.okLabel,w=e.todayLabel,x=e.showTodayButton,S=e.helperText,E=e.errorLabel,_=e.inputVariant,A=e.inputProps,R=e.KeyboardButtonProps,D=e.enableKeyboard,M=e.mode,T=void 0===M?"date":M,j=e.ampm,N=(0,p.Z)(e,tp),I=(0,d.useState)(null),L=(0,P.Z)(I,2),z=L[0],Z=L[1],B=(0,d.useState)(!1),F=(0,P.Z)(B,2),U=F[0],V=F[1],H=ty((0,O.default)().isDesktop),W=(0,C.useI18n)(),q=W.t,G=W.lang,K=!U&&!!z,Q=m||tu({ampm:j,mode:T,lang:G}),Y=null!=j?j:!("time"===T||"dateTime"===T),J=null!=s?s:(0,e7.Z)(new Date,Q),$=g||q("clear"),X=w||q("today"),ee=y||q("cancel"),et=b||q("ok"),en=v||(h?q("minDateLabelError",{date:(0,e7.Z)(h,Q)}):null),er=tv({"aria-label":a},R),ea=tv({inputMode:"numeric"},A);switch(T){case"date":n=D?tt.e:tt.M;break;case"time":n=D?tn.e:tn.j;break;case"dateTime":n=D?tr.B:tr.x}return d.createElement(ta.M,{utils:te.Z,locale:tm[G]},d.createElement(n,(0,c.Z)({inputRef:t,label:a,placeholder:J,value:void 0===o?null:o,helperText:K?z:null!=S?S:null,className:k()(H.overrides,r),minDate:h,ampm:Y,format:Q,onChange:function(e){if((null==e?void 0:e.toString())!=="Invalid Date"){if(h&&(0,ti.Z)(e,(0,tc.Z)(h,1))){Z(en),f(e,!1);return}Z(null),f(e,!0)}else""===e?(Z(null),f(null,!0)):(Z(null!=E?E:q("invalidDate")),f(e,!1))},error:K,onBlur:function(){V(!1),null==u||u(!0),null==l||l(!1)},onFocus:function(){V(!0),null==u||u(!1),null==l||l(!0)},inputVariant:void 0===_?"outlined":_,inputProps:ea,KeyboardButtonProps:er,showTodayButton:void 0!==x&&x,todayLabel:X,clearable:void 0!==i&&i,clearLabel:$,cancelLabel:ee,okLabel:et},N)))});tg.displayName="DatePicker",tg.prototype={className:v().string,label:v().string,value:v().string.isRequired,placeholder:v().string,onChange:v().func.isRequired,onBlur:v().func,onFocus:v().func,helperText:v().string,minDate:v().instanceOf(Date),minDateLabelError:v().string,format:v().string,cancelLabel:v().string,showTodayButton:v().bool,todayLabel:v().string,okLabel:v().string,clearable:v().bool,clearLabel:v().string,errorLabel:v().string,inputVariant:v().string,inputProps:v().object,KeyboardButtonProps:v().object,enableKeyboard:v().bool,mode:v().oneOf(["date","time","dateTime"]),ampm:v().bool};let tb=td(d.memo(tg));var tw=n("24546"),tk=n("55392");let tx=n("9570").Z;var tO=function(e){var t=e.onChange,n=e.date,r=e.toggle,a=e.onToggle,i=(0,C.useI18n)(),o=i.t,s=i.lang,c=function(e){var t,n;a(null!==(t=null==e||null===(n=e.target)||void 0===n?void 0:n.checked)&&void 0!==t?t:e)};return d.createElement(e8,{borderRadius:"0.5rem",border:"1px solid var(--borderMainColor)"},d.createElement(tw.default,{className:"u-p-0"},d.createElement(F.default,{button:!0,size:"large",ellipsis:!1,onClick:function(){return c(!r)}},d.createElement(U.default,null,d.createElement(el.default,{icon:"calendar"})),d.createElement(V.default,{primary:o("BoxDate.text")}),d.createElement(tk.default,null,d.createElement(tx,{edge:"end",color:"primary",checked:r,onChange:c})))),r&&d.createElement("div",{className:"u-pt-half u-ph-1 u-pb-1"},d.createElement(tb,{className:"u-w-100",enableKeyboard:!0,label:o("BoxDate.label"),placeholder:(0,e7.Z)(new Date,"fr"===s?"dd/MM/yyyy":"MM/dd/yyyy"),value:n,minDate:new Date,onChange:t,inputProps:{inputMode:"numeric"},KeyboardButtonProps:{"aria-label":o("BoxDate.label")}})))};tO.propTypes={onChange:v().func.isRequired,date:v().instanceOf(Date),toggle:v().bool.isRequired,onToggle:v().func.isRequired};var tC=n("67348"),tS=n("24321"),tE=n("89197"),tP=n("95587"),t_=n("84827"),tA=n("44510"),tR=function(e){var t=e.label,n=e.desc,r=e.editingRights,a=(0,d.forwardRef)(function(e,a){var i=(0,g.o)().updateDocumentPermissions;return d.createElement(tP.Z,(0,c.Z)({},e,{ref:a,button:!1,onClick:function(){return e.onClick({updateDocumentPermissions:i})}}),d.createElement(U.default,null,d.createElement(t_.Z,{checked:"write"===r})),d.createElement(V.default,{primary:t,secondary:n}))});return a.displayName="EditPermissionLink",a},tD=function(e){var t=e.isDirectory,n=e.t,r=e.editingRights,a=e.setEditingRights,i=e.documentType,o=n(t?"Share.permissionLink.modifyFolder":"Share.permissionLink.modifyFile");return{name:"editPermissionLink",label:o,icon:null,displayCondition:function(){return({documentType:i}).documentType!==tA.t.ALBUMS},action:function(){a("write")},Component:tR({label:o,desc:n("Share.permissionLink.writeDescription"),editingRights:r})}},tM=function(e){var t=e.label,n=e.desc,r=e.editingRights,a=(0,d.forwardRef)(function(e,a){var i=(0,g.o)().updateDocumentPermissions;return d.createElement(tP.Z,(0,c.Z)({},e,{ref:a,button:!1,onClick:function(){return e.onClick({updateDocumentPermissions:i})}}),d.createElement(U.default,null,d.createElement(t_.Z,{checked:"readOnly"===r})),d.createElement(V.default,{primary:t,secondary:n}))});return a.displayName="ReadOnlyPermissionLink",a},tT=function(e){var t=e.isDirectory,n=e.t,r=e.editingRights,a=e.setEditingRights,i=n(t?"Share.permissionLink.seeFolder":"Share.permissionLink.seeFile");return{name:"readOnlyPermissionLink",label:i,icon:null,action:function(){a("readOnly")},Component:tM({label:i,desc:n("Share.permissionLink.readDescription"),editingRights:r})}},tj=function(e){var t=e.file,n=e.editingRights,r=e.setEditingRights,a=(0,d.useReducer)(function(e){return!e},!1),i=(0,P.Z)(a,2),o=i[0],s=i[1],c=(0,d.useRef)(),u=(0,C.useI18n)().t,l=(0,g.o)().documentType,f=(0,tC.isDirectory)(t),p=(0,tE.hk)([tT,tD],{t:u,editingRights:n,setEditingRights:r,documentType:l,isDirectory:f}),h=u("readOnly"===n?"Share.permissionLink.readDescription":"Share.permissionLink.writeDescription");return d.createElement(d.Fragment,null,d.createElement(e8,{borderRadius:"0.5rem",border:"1px solid var(--borderMainColor)",ref:c},d.createElement(tw.default,{className:"u-p-0"},d.createElement(F.default,{button:!0,size:"large",ellipsis:!1,onClick:s},d.createElement(U.default,null,d.createElement(el.default,{icon:"people"})),d.createElement(V.default,{primary:u("BoxEditingRights.text"),secondary:h}),d.createElement(U.default,{className:"u-mr-half"},d.createElement(el.default,{icon:"bottom"}))))),d.createElement(tS.default,{ref:c,open:o,docs:[t],actions:p,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoClose:!0,onClose:s}))};tj.propTypes={file:v().object.isRequired,editingRights:v().oneOf(["readOnly","write"]).isRequired,setEditingRights:v().func.isRequired};var tN=n("9047"),tI=n("23153"),tL=n("74450"),tz=n.n(tL)()("ShareRestrictionModal/helpers"),tZ=["GET","POST","PUT","PATCH"],tB=["GET"];var tF=(a=(0,S.Z)(A().mark(function e(t){var n,r,a,i=arguments;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=i.length>1&&void 0!==i[1]?i[1]:{}).t,a=n.showAlert,t){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,navigator.clipboard.writeText(t);case 6:a({message:r("copyReminderContent.success"),severity:"success",variant:"filled"}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),a({message:r("copyReminderContent.error"),severity:"error",variant:"filled"}),tz.error("Error in 'copyToClipboard' function when trying to copy to clipboard",e.t0);case 13:case"end":return e.stop()}},e,null,[[3,9]])})),function(e){return a.apply(this,arguments)}),tU=function(e){if(e)try{var t,n=e;if("string"==typeof e&&(n=new Date(e),(null===(t=n)||void 0===t?void 0:t.toString())==="Invalid Date"))throw Error("Invalid date: ".concat(e));if(n instanceof Date){var r=new Date;return n>r?"".concat(Math.round((n-r)/1e3),"s"):void 0}throw Error("Invalid date: ".concat(e))}catch(e){tz.error(e);return}};var tV=(i=(0,S.Z)(A().mark(function e(t){var n,r,a,i,o,s,c,u,l;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,r=t.t,a=t.ttl,i=t.password,o=t.editingRights,s=t.documentType,c=t.shareByLink,u=t.showAlert,e.prev=1,l="readOnly"===o?tB:tZ,e.abrupt("return",c(n,{verbs:l,ttl:a,password:i}));case 6:e.prev=6,e.t0=e.catch(1),u({message:r("".concat(s,".share.shareByLink.permserror")),severity:"error",variant:"filled"}),tz.error("Error in 'readOnlyPermissionLink' function when trying to change permission",e.t0);case 10:case"end":return e.stop()}},e,null,[[1,6]])})),function(e){return i.apply(this,arguments)});var tH=(o=(0,S.Z)(A().mark(function e(t){var n,r,a,i,o,s,c,u,l,d,f,p,h;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,r=t.t,a=t.dateToggle,i=t.selectedDate,o=t.passwordToggle,s=t.password,c=t.editingRights,u=t.documentType,l=t.updateDocumentPermissions,d=t.showAlert,e.prev=1,f=a?(null==i?void 0:i.toISOString())||void 0:"",p=o?s||void 0:"",h="readOnly"===c?tB:tZ,e.abrupt("return",l(n,{verbs:h,expiresAt:f,password:p}));case 8:e.prev=8,e.t0=e.catch(1),d({message:r("".concat(u,".share.shareByLink.permserror")),severity:"error",variant:"filled"}),tz.error("Error in 'updateDocumentPermissions' function when trying to change permission",e.t0);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return o.apply(this,arguments)});var tW=(s=(0,S.Z)(A().mark(function e(t){var n,r,a,i,o;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,r=t.t,a=t.documentType,i=t.revokeSharingLink,o=t.showAlert,e.prev=1,e.abrupt("return",i(n));case 5:e.prev=5,e.t0=e.catch(1),o({message:r("".concat(a,".share.error.revoke")),severity:"error",variant:"filled"}),tz.error("Error in 'revokePermissions' function when trying to revoke sharing link",e.t0);case 9:case"end":return e.stop()}},e,null,[[1,5]])})),function(e){return s.apply(this,arguments)}),tq=n("80136"),tG=function(e){var t,n=e.file,r=e.onChange,a=e.password,i=e.onToggle,o=e.toggle,s=e.helperText,u=e.inputProps,l=(0,C.useI18n)().t,f=(0,D.useAlert)().showAlert,p=(0,d.useState)(!1),h=(0,P.Z)(p,2),v=h[0],m=h[1],y=d.useRef(),b=(0,(0,g.o)().getDocumentPermissions)(n._id),w=(0,tq.Yb)(b),k=function(e){var t,n;i(null!==(t=null==e||null===(n=e.target)||void 0===n?void 0:n.checked)&&void 0!==t?t:e)},x=function(e){var t,n;r(null!==(t=null==e||null===(n=e.target)||void 0===n?void 0:n.value)&&void 0!==t?t:e)};var O=(t=(0,S.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tF(a,{t:l,showAlert:f});case 2:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return d.createElement(e8,{borderRadius:"0.5rem",border:"1px solid var(--borderMainColor)"},d.createElement(tw.default,{className:"u-p-0"},d.createElement(F.default,{button:!0,size:"large",ellipsis:!1,onClick:function(){return k(!o)}},d.createElement(U.default,null,d.createElement(el.default,{icon:"password"})),d.createElement(V.default,{primary:l("BoxPassword.text")}),d.createElement(tk.default,null,d.createElement(tx,{edge:"end",color:"primary",checked:o,onChange:k})))),o&&d.createElement("div",{className:"u-pt-half u-ph-1 u-pb-1"},d.createElement(tI.default,(0,c.Z)({inputRef:y,autoFocus:!0,label:l("BoxPassword.label")},w&&{placeholder:"****",InputLabelProps:{shrink:!0}},{value:a,error:v&&!!s,helperText:v&&s,onChange:x,onFocus:function(){m(!1)},onBlur:function(){x(y.current.value.trim()),m(!0)},fullWidth:!0,type:"text",variant:"outlined",InputProps:{endAdornment:d.createElement(tN.default,{onClick:O},d.createElement(el.default,{icon:"copy"}))},inputProps:u}))))};tG.propTypes={onChange:v().func.isRequired,password:v().string,onToggle:v().func.isRequired,toggle:v().bool.isRequired,helperText:v().string,inputProps:v().object};var tK=function(e){var t=e.file,n=e.selectedDate,r=e.setSelectedDate,a=e.dateToggle,i=e.setDateToggle,o=e.setIsValidDate,s=e.helperTextPassword,c=e.password,u=e.setPassword,l=e.passwordToggle,f=e.setPasswordToggle,p=e.setIsValidPassword,h=e.editingRights,v=e.setEditingRights,m=(0,C.useI18n)().t,y=(0,(0,g.o)().getDocumentPermissions)(t._id),b=(0,tq.Yb)(y);return d.createElement(e8,{display:"flex",flexDirection:"column",gridGap:"1rem"},d.createElement(x.default,{variant:"h4",className:"u-mb-half u-ml-half"},m("ShareRestrictionModal.title")),d.createElement(tj,{file:t,editingRights:h,setEditingRights:v}),d.createElement(tO,{onChange:function(e){r(e),o((0,e9.Z)(e))},date:n,onToggle:function(e){i(e),e?r(e?(0,e6.Z)(new Date,30):null):r(null),o(!0)},toggle:a}),d.createElement(tG,{file:t,onChange:function(e){u(e),p(b&&0===e.trim().length||e.trim().length>=4)},password:c,onToggle:function(e){f(e),u(""),e&&!c?p(b):p(!0)},toggle:l,helperText:s,inputProps:{minLength:4}}))};tK.propTypes={file:v().object.isRequired,selectedDate:v().object,setSelectedDate:v().func.isRequired,dateToggle:v().bool,setDateToggle:v().func.isRequired,setIsValidDate:v().func.isRequired,helperTextPassword:v().string,password:v().string,setPassword:v().func.isRequired,passwordToggle:v().bool.isRequired,setPasswordToggle:v().func.isRequired,setIsValidPassword:v().func.isRequired,editingRights:v().oneOf(["readOnly","write"]),setEditingRights:v().func.isRequired};var tQ=function(e){var t,n,r=e.file,a=e.onClose,i=(0,m.useClient)(),o=(0,C.useI18n)().t,s=(0,D.useAlert)().showAlert,c=(0,d.useState)(""),u=(0,P.Z)(c,2),l=u[0],f=u[1],p=(0,d.useState)(!0),h=(0,P.Z)(p,2),v=h[0],y=h[1],b=(0,d.useState)(!0),w=(0,P.Z)(b,2),k=w[0],x=w[1],O=(0,d.useState)(!1),E=(0,P.Z)(O,2),_=E[0],R=E[1],M=(0,g.o)(),T=M.documentType,j=M.getDocumentPermissions,N=M.updateDocumentPermissions,I=M.shareByLink,L=M.getSharingLink,z=M.revokeSharingLink,Z=null!==L(r._id),B=j(r._id),F=(0,tq.s)(B),U=(0,tq.Yb)(B),V=(0,tq.rn)(B),H=(0,tq.Bf)(B),W=H?new Date(H):(0,e6.Z)(new Date,30),q=(0,d.useState)(W),G=(0,P.Z)(q,2),K=G[0],Q=G[1],Y=(0,d.useState)(!(B.length>0)||V),J=(0,P.Z)(Y,2),$=J[0],X=J[1],ee=(0,d.useState)(U),et=(0,P.Z)(ee,2),en=et[0],er=et[1],ea=(0,d.useState)(F||0===B.length?"readOnly":"write"),es=(0,P.Z)(ea,2),ec=es[0],eu=es[1],ed=k?null:o("ShareRestrictionModal.invalidPasswordMessage",{smart_count:4-l.length});var ef=(t=(0,S.Z)(A().mark(function e(){var t,n,c,u,d,f;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!0),Z){e.next=13;break}return t=tU($&&K),e.next=5,tV({file:r,t:o,ttl:t,password:l,editingRights:ec,documentType:T,shareByLink:I,showAlert:s});case 5:return n=e.sent.data,c=(0,m.generateWebLink)({cozyUrl:i.getStackClient().uri,searchParams:[["sharecode",n.attributes.shortcodes.code]],pathname:"/public",slug:"drive",subDomainType:i.capabilities.flat_subdomains?"flat":"nested"}),e.next=10,tF(c,{t:o,showAlert:s});case 10:a(),e.next=22;break;case 13:return e.next=15,tH({file:r,t:o,dateToggle:$,selectedDate:K,passwordToggle:en,password:l,editingRights:ec,documentType:T,updateDocumentPermissions:N,showAlert:s});case 15:return u=e.sent,d=(0,P.Z)(u,1)[0].data,f=(0,m.generateWebLink)({cozyUrl:i.getStackClient().uri,searchParams:[["sharecode",d.attributes.shortcodes.code]],pathname:"/public",slug:"drive",subDomainType:i.capabilities.flat_subdomains?"flat":"nested"}),e.next=21,tF(f,{t:o,showAlert:s});case 21:a();case 22:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});var ep=(n=(0,S.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,tW({file:r,t:o,documentType:T,revokeSharingLink:z,showAlert:s});case 3:a();case 4:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return d.createElement(eo.Z,{open:!0,onClose:a,content:d.createElement(tK,{file:r,dateToggle:$,setDateToggle:X,setSelectedDate:Q,selectedDate:K,setIsValidDate:y,helperTextPassword:ed,passwordToggle:en,setPasswordToggle:er,password:l,setPassword:f,setIsValidPassword:x,editingRights:ec,setEditingRights:eu}),actions:d.createElement(d.Fragment,null,Z&&d.createElement(ei.default,{label:o("Share.permissionLink.deactivate"),variant:"secondary",color:"error",startIcon:d.createElement(el.default,{icon:"trash"}),onClick:ep,busy:_}),d.createElement(ei.default,{label:o("ShareRestrictionModal.action.confirm"),onClick:ef,disabled:!v||!k,busy:_}))})};tQ.propTypes={file:v().object.isRequired,onClose:v().func};var tY=function(e){var t,n,r=e.link,a=e.document,i=e.documentType,o=(0,C.useI18n)().t,s=(0,O.default)().isMobile,c=(0,D.useAlert)().showAlert,u=r&&s&&navigator.share,l=r&&!s||r&&s&&!navigator.share,f=(0,d.useReducer)(function(e){return!e},!1),p=(0,P.Z)(f,2),h=p[0],v=p[1];var m=(t=(0,S.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tF(r,{t:o,showAlert:c});case 2:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});var y=(n=(0,S.Z)(A().mark(function e(){var t;return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={text:o("".concat(i,".share.shareByLink.shareDescription"),{name:a.name||""}),url:r},e.next=4,navigator.share(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c({message:o("".concat(i,".share.error.generic")),severity:"error",variant:"filled"});case 9:case"end":return e.stop()}},e,null,[[0,6]])})),function(){return n.apply(this,arguments)});return d.createElement("div",{className:"u-w-100 u-flex u-flex-justify-center"},!r&&d.createElement(ei.default,{label:o("".concat(i,".share.shareByLink.create")),variant:"secondary",size:"medium",startIcon:d.createElement(el.default,{icon:e5.Z}),className:"u-flex-auto",style:{position:"initial"},onClick:v}),u&&d.createElement(d.Fragment,null,d.createElement(ei.default,{label:o("".concat(i,".share.shareByLink.send")),variant:"secondary",size:"medium",startIcon:d.createElement(el.default,{icon:e5.Z}),className:"u-flex-auto u-mr-half",onClick:y}),d.createElement(ei.default,{label:d.createElement(el.default,{icon:e3.default}),variant:"secondary",size:"medium",onClick:m})),l&&d.createElement(ei.default,{label:o("".concat(i,".share.shareByLink.copy")),variant:"secondary",size:"medium",startIcon:d.createElement(el.default,{icon:e5.Z}),className:"u-flex-auto u-mr-half",onClick:m}),h&&d.createElement(tQ,{file:a,onClose:v}))};tY.propTypes={link:v().string,document:v().object.isRequired,documentType:v().string.isRequired};var tJ=n("93616"),t$=n("77843"),tX=n("75536"),t0=n("28158"),t1=function(e){var t=e.className,n=e.document,r=e.permissions,a=(0,C.useI18n)().t,i=(0,d.useRef)(),o=(0,d.useState)(!1),s=(0,P.Z)(o,2),c=s[0],u=s[1],l=(0,tq.s)(r);return d.createElement("div",{className:t},d.createElement(d.Fragment,null,d.createElement(t0.Z,{ref:i,textVariant:"body2",onClick:function(){return u(!0)}},a("Share.type.".concat(l?"one-way":"two-way")).toLowerCase()),c&&d.createElement(tQ,{file:n,onClose:function(){return u(!1)}})))};t1.propTypes={className:v().string,document:v().object.isRequired,permissions:v().arrayOf(v().object).isRequired};var t2=n("26782"),t4="recipient__link-recipient-icon-circle___3ZTU-",t3=function(e){var t=(0,C.useI18n)(),n=t.t,r=t.f,a=t.lang,i=(0,O.default)().isMobile,o=(0,g.o)().getDocumentPermissions,s=e.recipientConfirmationData,u=e.verifyRecipient,l=e.link,f=e.fadeIn,p=o(e.document._id),h=(0,tq.Yb)(p),v=(0,tq.Bf)(p),m=v?r(v,"fr"===a?"dd/LL/yyyy":"LL/dd/yyyy"):null,y=n(h?"Share.recipients.linkWithPassword":"Share.recipients.anyoneWithTheLink"),b=v?n("Share.recipients.expires",{date:m}):l,w=s?d.createElement(t2.Z,{recipientConfirmationData:s,verifyRecipient:u}):d.createElement(t1,(0,c.Z)({},e,{className:"u-flex-shrink-0"}));return d.createElement(tX.Z,{in:!0,timeout:f?es.Av:0},d.createElement(F.default,{gutters:i?"default":"double",size:"small"},d.createElement(U.default,null,d.createElement(t$.Z,{size:"small",className:t4},d.createElement(el.default,{icon:e5.Z}))),d.createElement(V.default,{primary:d.createElement(x.default,{className:"u-ellipsis",variant:"body1"},y),secondary:b}),w))};t3.propTypes={link:v().string.isRequired};var t5=n("11782");let t6=function(){var e,t=(0,m.useClient)(),n=(0,et.Vg)(),r=(0,m.useQuery)(n.definition,n.options);return(0,m.hasQueryBeenLoaded)(r)&&d.createElement(t5.Z,{isOwner:!0,status:"owner",instance:t.options.uri,public_name:null==r||null===(e=r.data)||void 0===e||null===(e=e.attributes)||void 0===e?void 0:e.public_name})};var t9=function(e){var t=e.recipients.find(function(e){return"owner"===e.status});return t?d.createElement(t5.Z,t):d.createElement(t6,null)};t9.propTypes={recipients:v().array.isRequired};var t8=n("17006"),t7=n("41581"),ne=n("83556"),nt=function(e){var t=e.withAccess,n=(0,C.useI18n)().t,r=(0,m.useClient)();return d.createElement("div",null,d.createElement(x.default,{variant:"subtitle2"},n("GroupRecipientDetail.withAccess.title")),d.createElement(tw.default,null,t.map(function(e){var t=(0,b.Gf)(e),n=e.instance===r.options.uri;return d.createElement(F.default,{disableGutters:!0,key:e.index,size:"small"},d.createElement(U.default,null,d.createElement(N.Z,{size:"small",text:(0,b.Qm)(e),textId:t})),d.createElement(V.default,{primary:t,secondary:d.createElement(ne.Z,{status:e.status,isMe:n,instance:e.instance})}))})))},nn=n("68437"),nr=function(e){var t=e.withoutAccess,n=e.isOwner,r=(0,C.useI18n)().t;return d.createElement("div",null,d.createElement(x.default,{variant:"subtitle2"},r("GroupRecipientDetail.withoutAccess.title")),d.createElement(tw.default,null,t.map(function(e){var t="revoked"===e.status?nn.Z:null,a=r(es.A8),i=(0,b.Gf)(e,a);return d.createElement(F.default,{disableGutters:!0,key:e.index,ellipsis:!1,size:"small"},d.createElement(U.default,null,d.createElement(N.Z,{size:"small",text:(0,b.Qm)(e),textId:i})),d.createElement(V.default,{primary:i,secondary:d.createElement("div",{className:"u-flex u-flex-items-center"},t?d.createElement(el.default,{icon:t,size:10,style:{marginRight:"0.25rem"}}):null,r("GroupRecipientDetail.withoutAccess.status.".concat(e.status)),n&&"mail-not-sent"===e.status?" - ".concat(r("GroupRecipientDetail.withoutAccess.addEmail")):null)}))})))},na=function(e){var t=e.name,n=e.owner,r=e.members,a=e.onClose,i=e.isOwner,o=(0,m.useClient)(),s=(0,C.useI18n)().t,c=r.filter(function(e){return!["revoked","mail-not-sent"].includes(e.status)}),u=r.filter(function(e){return["revoked","mail-not-sent"].includes(e.status)}),l=n.public_name,f=(0,m.generateWebLink)({cozyUrl:o.getStackClient().uri,slug:"contacts",pathname:"/",subDomainType:o.getInstanceOptions().subdomain});return d.createElement(t8.Z,{open:!0,size:"small",onClose:a,title:d.createElement(d.Fragment,null,t,l?d.createElement(x.default,{variant:"caption"},s("GroupRecipientDetail.subtitle",{ownerName:l})):null),content:d.createElement("div",{className:"u-flex u-stack-xs u-flex-column"},0===r.length?d.createElement(t7.default,{text:s("GroupRecipientDetail.empty.content")},d.createElement(ei.default,{component:"a",className:"u-mt-1",href:f,target:"_blank",rel:"noopener noreferrer",label:s("GroupRecipientDetail.empty.action")})):null,c.length>0?d.createElement(nt,{withAccess:c}):null,u.length>0?d.createElement(nr,{withoutAccess:u,isOwner:i}):null)})},ni=n("54920"),no=n("95335"),ns=n("59549"),nc=function(e){var t=e.t,n=e.isOwner,r=e.handleRevocation,a=n?"revoke":"revokeSelf",i=t("RevokeGroupItem.".concat(a,".title")),o=t("RevokeGroupItem.".concat(a,".desc")),s=nn.Z;return{name:"revokeMember",label:i,icon:s,action:function(){r()},Component:(0,d.forwardRef)(function(e,t){return d.createElement(tP.Z,(0,c.Z)({},e,{ref:t}),d.createElement(U.default,null,d.createElement(el.default,{icon:s,color:"var(--errorColor)"})),d.createElement(V.default,{primary:d.createElement(x.default,{color:"error"},i),secondary:o}))})}},nu=function(e){var t,n=e.name,r=e.isOwner,a=e.sharingId,i=e.groupIndex,o=e.read_only,s=e.className,c=e.isUserInsideMembers,u=e.document,l=(0,C.useI18n)().t,f=(0,d.useRef)(),p=(0,g.o)(),h=p.revokeGroup,v=p.revokeSelf,m=(0,d.useState)(!1),y=(0,P.Z)(m,2),b=y[0],w=y[1],k=(0,d.useState)(!1),x=(0,P.Z)(k,2),O=x[0],E=x[1],_=!O&&(r||c);var R=(t=(0,S.Z)(A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!0),!r){e.next=6;break}return e.next=4,h(u,a,i);case 4:e.next=8;break;case 6:return e.next=8,v(u);case 8:E(!1);case 9:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),D=void 0!==o&&o?"one-way":"two-way",M=(0,tE.hk)([ns.r,ni.q,nc],{t:l,type:D,isOwner:r,handleRevocation:R});return d.createElement("div",{className:s},O&&d.createElement(Z.default,null),_&&d.createElement(d.Fragment,null,d.createElement(t0.Z,{ref:f,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(){return w(!b)},textVariant:"body2"},l("Share.type.".concat(D)).toLowerCase()),d.createElement(tS.default,{ref:f,open:b,actions:M,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoClose:!0,onClose:function(){return w(!1)}},d.createElement(no.default,null,d.createElement(U.default,null,d.createElement(B.N,{size:"small"})),d.createElement(V.default,{primary:n,primaryTypographyProps:{variant:"h6"}})))))},nl=function(e){var t=e.name,n=e.members,r=e.fadeIn,a=e.owner,i=e.isOwner,o=(0,C.useI18n)().t,s=(0,m.useClient)(),u=(0,O.default)().isMobile,l=(0,d.useState)(!1),f=(0,P.Z)(l,2),p=f[0],h=f[1],v=n.length,y=n.filter(function(e){return!["revoked","mail-not-sent"].includes(e.status)}).length,g=n.some(function(e){return e.instance===s.options.uri});return d.createElement(d.Fragment,null,d.createElement(tX.Z,{in:!0,timeout:r?es.Av:0},d.createElement(F.default,{button:!0,onClick:function(){h(!p)},gutters:u?"default":"double",size:"small"},d.createElement(U.default,null,d.createElement(B.N,{size:"small"})),d.createElement(V.default,{primary:d.createElement(x.default,{className:"u-ellipsis",variant:"body1"},t),secondary:(0,es.rM)({t:o,nbMember:v,nbMemberReady:y,isUserInsideMembers:g})}),d.createElement(tk.default,{className:u?"u-mr-1":"u-mr-2"},d.createElement(nu,(0,c.Z)({isUserInsideMembers:g},e))))),p?d.createElement(na,{isOwner:i,owner:a,name:t,members:n,onClose:function(){h(!1)}}):null)},nd=n("95810"),nf=function(e){var t=e.recipients,n=e.recipientsToBeConfirmed,r=e.isOwner,a=e.document,i=e.documentType,o=e.onRevoke,s=e.onRevokeSelf,u=e.verifyRecipient,l=(0,nd.D9)(t);return(0,es.rV)(t,l).map(function(e){var t=n.find(function(t){return t.email===e.email});return e.members?d.createElement(nl,(0,c.Z)({},e,{isOwner:r,key:e.index,document:a,documentType:i,onRevoke:o,onRevokeSelf:s,fadeIn:e.hasBeenJustAdded})):d.createElement(t5.Z,(0,c.Z)({},e,{key:e.index,isOwner:r,document:a,documentType:i,onRevoke:o,onRevokeSelf:s,recipientConfirmationData:t,verifyRecipient:u,fadeIn:e.hasBeenJustAdded}))})},np=function(e){var t=e.recipientsToBeConfirmed,n=(0,C.useI18n)().t;return t.length>0?n("Share.twoStepsConfirmation.contactAreWaitingForConfirmation",{smart_count:t.length}):null},nh=function(e){var t=e.isOwner,n=e.recipients,r=e.recipientsToBeConfirmed,a=void 0===r?[]:r,i=e.document,o=e.documentType,s=e.onRevoke,c=e.className,u=e.onRevokeSelf,l=e.verifyRecipient,f=e.link,p=e.permissions,h=(0,nd.D9)(f),v=f&&null===h;return d.createElement("div",{className:c},d.createElement(np,{recipientsToBeConfirmed:a}),d.createElement(tw.default,null,f&&d.createElement(t3,{document:i,documentType:o,onRevoke:s,onRevokeSelf:u,link:f,permissions:p,fadeIn:v}),d.createElement(t9,{recipients:n}),d.createElement(nf,{recipients:n,recipientsToBeConfirmed:a,isOwner:void 0!==t&&t,document:i,documentType:o,onRevoke:s,onRevokeSelf:u,verifyRecipient:l})))};nh.propTypes={isOwner:v().bool,recipients:v().array.isRequired,recipientsToBeConfirmed:v().arrayOf(v().shape({email:v().string.isRequired})),document:v().object.isRequired,documentType:v().string.isRequired,onRevoke:v().func.isRequired,onRevokeSelf:v().func,verifyRecipient:v().func};var nv=["showShareByLink","documentType","document"],nm={"share-modal-content":"share__share-modal-content___1iqEq","share-byemail-onlybylink":"share__share-byemail-onlybylink___29W-t"},ny=function(e){var t=e.createContact,n=e.document,r=e.documentType,a=e.hasSharedParent,i=e.isOwner,o=e.needsContactsPermission,s=e.onRevoke,c=e.onRevokeSelf,u=e.onShare,l=e.recipients,f=e.sharing,p=e.sharingDesc,h=e.showShareByEmail,v=e.showShareOnlyByLink,m=e.showWhoHasAccess,y=e.recipientsToBeConfirmed,g=e.verifyRecipient,b=e.link,w=e.permissions,S=(0,C.useI18n)().t,E=(0,O.default)().isMobile;return d.createElement("div",{className:k()(nm["share-modal-content"])},d.createElement("div",{className:k()("u-pt-1-half",E?"u-ph-1":"u-ph-2")},v&&d.createElement("div",{className:nm["share-byemail-onlybylink"]},S("".concat(r,".share.shareByEmail.onlyByLink"),{type:S("".concat(r,".share.shareByEmail.type.").concat("directory"===n.type?"folder":"file"))})," ",d.createElement("strong",null,S("".concat(r,".share.shareByEmail.").concat(a?"hasSharedParent":"hasSharedChild")))),d.createElement(x.default,{variant:"h6",className:"u-mb-1-half"},S("Share.contacts.whoHasAccess")),h&&d.createElement(e4,{createContact:t,currentRecipients:l,document:n,documentType:r,needsContactsPermission:o,onShare:u,sharing:f,sharingDesc:p})),m&&d.createElement(nh,{document:n,documentType:r,isOwner:i,onRevoke:s,onRevokeSelf:c,recipients:l,recipientsToBeConfirmed:y,verifyRecipient:g,link:b,permissions:w}))},ng=function(e){var t=e.documentType,n=e.document;return function(){var e;return(0,(0,C.useI18n)().t)("".concat(t,".share.title"),{name:n.name||(null===(e=n.attributes)||void 0===e?void 0:e.name)})}};let nb=function(e){var t=e.showShareByLink,n=e.documentType,r=e.document,a=(0,p.Z)(e,nv);return d.createElement(tJ.Z,(0,c.Z)({},a,{documentType:n,document:r,dialogContentOnShare:ny,dialogActionsOnShare:t?tY:null,dialogTitleOnShare:ng({documentType:n,document:r}),disableGutters:!0}))},nw=function(e){var t=e.isOwner,n=e.onRevoke,r=e.onRevokeSelf,a=e.recipients,i=e.document,o=e.documentType,s=e.link,c=e.onClose,u=e.permissions,l=(0,C.useI18n)().t,f=(0,O.default)().isMobile;return d.createElement(t8.Z,{disableGutters:!0,disableEnforceFocus:!0,open:!0,onClose:c,title:l("".concat(o,".share.title"),{name:i.name||i.attributes.name}),content:d.createElement(d.Fragment,null,d.createElement(x.default,{variant:"h6",className:k()(f?"u-ph-1 u-mt-1":"u-ph-2 u-mt-1-half")},l("Share.contacts.whoHasAccess")),d.createElement(nh,{document:i,documentType:o,isOwner:t,onRevoke:n,onRevokeSelf:r,recipients:a,link:s,permissions:u}),d.createElement("div",{className:k()("u-mt-half",f?"u-ph-1 u-mb-1":"u-ph-2 u-mb-1-half")},d.createElement(tY,{link:s,document:i,documentType:o})))})};var nk=function(e){var t=e.createContact,n=e.document,r=e.documentType,a=void 0===r?"Document":r,i=e.hasSharedChild,o=e.hasSharedParent,s=e.isOwner,c=e.link,u=e.needsContactsPermission,l=e.onClose,f=e.onRevoke,p=e.onRevokeSelf,h=e.onShare,v=e.permissions,m=e.recipients,y=e.sharing,g=e.sharingDesc,b=e.twoStepsConfirmationMethods,w="Albums"===a,k=!o&&!i,x="Organizations"!==a,O=o||i,C="Albums"!==a;return w?d.createElement(nw,{isOwner:s,onRevoke:f,onRevokeSelf:p,recipients:m,document:n,documentType:a,link:c,onClose:l,permissions:v}):d.createElement(nb,{createContact:t,document:n,documentType:a,hasSharedParent:o,isOwner:s,link:c,needsContactsPermission:u,onClose:l,onRevoke:f,onRevokeSelf:p,onShare:h,permissions:v,recipients:m,sharing:y,sharingDesc:g,showShareByEmail:k,showShareByLink:x,showShareOnlyByLink:O,showWhoHasAccess:C,twoStepsConfirmationMethods:b})};nk.propTypes={createContact:v().func.isRequired,document:v().object.isRequired,documentType:v().string,hasSharedChild:v().bool,hasSharedParent:v().bool,isOwner:v().bool,link:v().string,needsContactsPermission:v().bool,onClose:v().func.isRequired,onRevoke:v().func.isRequired,onShare:v().func.isRequired,permissions:v().array.isRequired,recipients:v().array.isRequired,sharingDesc:v().string,twoStepsConfirmationMethods:v().shape({getRecipientsToBeConfirmed:v().func,confirmRecipient:v().func,rejectRecipient:v().func,recipientConfirmationDialogContent:v().func})};var nx=["document"],nO=function(e){var t=e.document,n=(0,p.Z)(e,nx),r=(0,m.useClient)(),a=(0,y.W)(r,t),i=(0,g.o)(),o=i.documentType,s=i.getDocumentPermissions,u=i.getRecipients,l=i.getSharingForSelf,f=i.getSharingLink,h=i.hasSharedChild,v=i.hasSharedParent,w=i.isOwner,k=i.revoke,x=i.revokeSelf,O=i.share,C=v(t.path)?t.dir_id:t._id,S=u(C),E=s(C),P=f(C),_=l(C),A=w(C);return d.createElement(nk,(0,c.Z)({createContact:function(e){return r.create(b.ZP.doctype,e)},document:t,documentType:o,hasSharedChild:a&&h(a),hasSharedParent:a&&v(a),isOwner:A,link:P,onRevoke:k,onRevokeSelf:x,onShare:O,permissions:E,recipients:S,sharing:_},n))};nO.propTypes={document:v().object};var nC=n("20958"),nS=n("40509"),nE=["url","size"],nP="recipient__avatar___2LnIV";let n_=function(e){var t=e.url,n=e.size,r=(0,p.Z)(e,nE);return d.createElement("div",{className:nP},d.createElement(N.Z,{text:(0,b.Qm)(r),size:n,textId:(0,b.Gf)(r)}),d.createElement(nS.Z,{name:(0,b.Gf)(r),details:t}))};var nA={"share-modal-content":"share__share-modal-content___1iqEq","coz-form":"share__coz-form___1ICST","coz-form-group":"share__coz-form-group___VsQp7","coz-form-desc":"share__coz-form-desc___2mYN4","coz-form-label":"share__coz-form-label___bogBw","coz-form-label--error":"share__coz-form-label--error___3YPkf","coz-form-errors":"share__coz-form-errors___2xYRz","coz-form-controls":"share__coz-form-controls___H8kGc","coz-form-controls--full":"share__coz-form-controls--full___1oQXF","coz-form-controls--dispatch":"share__coz-form-controls--dispatch___1zIxt",error:"share__error___pwqPO","share-byemail-onlybylink":"share__share-byemail-onlybylink___29W-t","aligned-dropdown-button":"share__aligned-dropdown-button___3crgG","share-type-control":"share__share-type-control___1YoRr","select-wrapper":"share__select-wrapper___3XBKC","select-option":"share__select-option___3Jp8_","select-option-label":"share__select-option-label___1BWz_","select-option-desc":"share__select-option-desc___3jOnr","share-details-created":"share__share-details-created___z3nvO","share-details-perm":"share__share-details-perm___3HjxK","share-details-perm-desc":"share__share-details-perm-desc___3HyHu"},nR=function(e){var t=e.onClose,n=e.sharingType,r=e.owner,a=e.recipients,i=e.document,o=e.documentType,s=void 0===o?"Document":o,c=e.onRevoke,u=e.onRevokeSelf,l=(0,C.useI18n)(),f=l.t,p=l.f,h=(0,O.default)().isMobile;return d.createElement(t8.Z,{disableGutters:!0,open:!0,onClose:t,className:nA["share-modal"],title:f("".concat(s,".share.details.title")),content:d.createElement("div",{className:nA["share-modal-content"]},d.createElement("div",{className:k()(nA["share-details"],h?"u-ph-1 u-pt-1-half":"u-ph-2 u-pt-1")},d.createElement(n_,{name:f("".concat(s,".share.sharedBy"),{name:(0,b.Gf)(r)}),url:r.instance}),d.createElement("div",{className:nA["share-details-created"]},f("".concat(s,".share.details.createdAt"),{date:p(i.created_at||null,"do LLLL yyyy")})),d.createElement("div",{className:nA["share-details-perm"]},f("".concat(s,".share.details.").concat("one-way"===n?"ro":"rw"))),d.createElement("div",{className:nA["share-details-perm-desc"]},f("".concat(s,".share.details.desc.").concat("one-way"===n?"ro":"rw")))),d.createElement(nC.default,{className:"u-mv-1"}),d.createElement(nh,{title:f("Share.recipients.accessCount",{count:a.length}),recipients:a,document:i,documentType:s,onRevoke:c,onRevokeSelf:u}))})};nR.propTypes={onClose:v().func,sharingType:v().string,owner:v().object.isRequired,document:v().object.isRequired,documentType:v().string.isRequired,onRevoke:v().func.isRequired,onRevokeSelf:v().func};var nD=(0,n("64411").Z)(function(e){var t,n=null===f.TH||void 0===f.TH?void 0:(0,f.TH)(),r=null==n||null===(t=n.state)||void 0===t?void 0:t.modalProps,a=(null==r?void 0:r.document)||e.document,i=l()(r||e,"document"),o=(0,g.o)(),s=o.byDocId,u=o.isOwner,p=o.canReshare,h=o.documentType,v=o.getOwner,m=o.getSharingType,y=o.getRecipients,b=o.revokeSelf;return!s[a.id]||u(a.id)||p(a.id)?d.createElement(nO,(0,c.Z)({document:a},i)):d.createElement(nR,(0,c.Z)({document:a,documentType:h,owner:v(a.id),sharingType:m(a.id),recipients:y(a.id),onRevoke:b},i))})},12136:function(e,t,n){"use strict";n.d(t,{h:()=>f});var r=n("11954"),a=n("25002"),i=n("87757"),o=n.n(i),s=n("67294"),c=n("16396"),u=n("96184"),l=n("16700"),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=(0,a.Z)(t,2),r=n[0],i=n[1];return e[r]=decodeURIComponent(void 0===i||i),e},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/preview",t=(0,c.useClient)(),n=(0,s.useState)(),i=(0,a.Z)(n,2),f=i[0],p=i[1],h=(0,s.useState)(),v=(0,a.Z)(h,2),m=v[0],y=v[1],g=(0,s.useState)(!1),b=(0,a.Z)(g,2),w=b[0],k=b[1],x=(0,s.useState)(),O=(0,a.Z)(x,2),C=O[0],S=O[1],E=(0,s.useState)(!0),P=(0,a.Z)(E,2),_=P[0],A=P[1];return(0,s.useEffect)(function(){var n,a=(n=(0,r.Z)(o().mark(function e(){var n,r,a,i,s,f,h,v;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.prev=1,e.next=4,t.collection("io.cozy.permissions").fetchOwnPermissions();case 4:return n=e.sent,r=c.models.permission.isShortcutCreatedOnTheRecipientCozy(n),a=n.data.attributes.source_id.split("/")[1],i=window.location.search.substring(1).split("&").map(function(e){return e.split("=")}).reduce(d,{}).sharecode,s=t.collection("io.cozy.sharings").getDiscoveryLink(a,i,{shortcut:!0}),f=t.collection("io.cozy.sharings").getDiscoveryLink(a,i),h=(0,l.cr)(a),e.next=13,t.query(h.definition);case 13:v=e.sent.data,p(s),y(f),k(r),S(v),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),u.Z.warn("Failed to load sharing discovery link",e.t0);case 24:return e.prev=24,A(!1),e.finish(24);case 27:case"end":return e.stop()}},e,null,[[1,21,24,27]])})),function(){return n.apply(this,arguments)});window.location.pathname===e?a():A(!1)},[t,e]),{sharing:C,loading:_,addSharingLink:f,syncSharingLink:m,createCozyLink:"https://manager.cozycloud.cc/cozy/create",isSharingShortcutCreated:w}}},68325:function(e,t,n){"use strict";n.d(t,{q:()=>A});var r=n("45697"),a=n.n(r),i=n("67294"),o=n("25002"),s=n("59252"),c=n("16396"),u=n("17508"),l=n("94184"),d=n.n(l),f=n("20958"),p=n("11571"),h=n("9758"),v=n("32692"),m={"c-banner-wrapper":"styles__c-banner-wrapper___3KlaG","c-banner-icon":"styles__c-banner-icon___1f_LM","c-banner-text":"styles__c-banner-text___1sTVC","c-banner-buttons":"styles__c-banner-buttons___3sLgG"},y=function(e){var t=e.icon,n=e.bgcolor,r=e.className,a=e.text,o=e.buttonOne,s=e.buttonTwo,c=e.inline,l=e.disableIconStyles,y={row:[8,4],column:[12,12]},g=c?y.row:y.column;return i.createElement(i.Fragment,null,i.createElement(h.default,{elevation:0,square:!0},i.createElement("div",{className:d()(m["c-banner-wrapper"],r),style:n&&{backgroundColor:n}},i.createElement(p.Z,{container:!0,justifyContent:"space-between"},i.createElement(p.Z,{container:!0,item:!0,xs:12,lg:g[0],alignItems:l?"flex-start":"center",wrap:"nowrap"},t&&i.createElement(p.Z,{item:!0},i.createElement("div",{className:d()((0,u.Z)({},m["c-banner-icon"],!l))},t)),i.createElement(p.Z,{item:!0,className:m["c-banner-text"]},i.createElement(v.default,{variant:"body2"},a))),(o||s)&&i.createElement(p.Z,{container:!0,item:!0,xs:12,lg:g[1],justifyContent:"flex-end",alignItems:"center"},i.createElement(p.Z,{item:!0,className:m["c-banner-buttons"]},o&&o,s&&s))))),i.createElement(f.default,null))};y.propTypes={icon:a().node,bgcolor:a().string,text:a().node,buttonOne:a().node,buttonTwo:a().node,inline:a().bool,disableIconWrapper:a().bool};var g=n("41496"),b=n("62125"),w="publicBanner__bannermarkdown___1dR1E",k=function(e){var t=e.sharing,n=(0,b.useI18n)().t,r=(0,c.useClient)(),a=t.attributes.members[0].public_name,u="".concat(r.options.uri,"/public/avatar?fallback=initials"),l=(0,s.Z)(n("Share.banner.shared_from",{name:a,image:u})).split("<img src"),d=l[1].split("<strong>")[1].split("</strong>"),f=(0,o.Z)(d,2),p=f[0],h=f[1];return i.createElement("span",{className:w},l[0],i.createElement("img",{src:u,alt:"avatar"})," ",i.createElement("strong",null,p),h)};k.propTypes={sharing:a().object.isRequired};var x=function(e){var t=e.sharing,n=e.isSharingShortcutCreated,r=e.addSharingLink,a=e.onClose,o=(0,b.useI18n)().t,s=function(){var e;return e=r,window.location=e},c=n?{label:o("Share.banner.sync_to_mine",{smart_count:2}),icon:"sync-cozy",action:s}:{label:o("Share.banner.add_to_mine",{smart_count:2}),icon:"to-the-cloud",action:s};return i.createElement(y,{bgcolor:"var(--defaultBackgroundColor)",text:i.createElement(k,{sharing:t}),buttonOne:i.createElement(g.default,{variant:"text",label:c.label,icon:c.icon,onClick:c.action}),buttonTwo:i.createElement(g.default,{variant:"text",label:o("Share.banner.close"),onClick:a}),inline:!0})},O=function(){var e=(0,b.useI18n)().t,t=e("Share.banner.whats_cozy"),n=i.createElement("a",{href:"https://cozy.io",target:"_blank",className:"u-link",rel:"noopener noreferrer"},e("Share.banner.know_more"));return i.createElement("span",{style:{color:"var(--iconTextColor)"}},t," ",n)},C=function(e){var t=e.onClose,n=(0,b.useI18n)().t;return i.createElement(y,{bgcolor:"var(--defaultBackgroundColor)",text:i.createElement(O,null),buttonOne:i.createElement(g.default,{component:"a",variant:"text",label:n("Share.create-cozy",{smart_count:2}),icon:"cloud",href:"https://manager.cozycloud.cc/cozy/create"}),buttonTwo:i.createElement(g.default,{variant:"text",label:n("Share.banner.close"),onClick:t}),inline:!0})};x.propTypes={sharing:a().object.isRequired,isSharingShortcutCreated:a().bool.isRequired,addSharingLink:a().string.isRequired,onClose:a().func.isRequired};var S=function(e){var t=e.sharingInfos,n=(0,i.useState)(!0),r=(0,o.Z)(n,2),a=r[0],s=r[1],c=(0,i.useCallback)(function(){return s(!1)},[s]),u=t.loading,l=t.addSharingLink,d=t.sharing,f=t.isSharingShortcutCreated;return u?null:a&&(l?i.createElement(x,{isSharingShortcutCreated:f,sharing:d,addSharingLink:l,onClose:c}):i.createElement(C,{onClose:c}))};S.propTypes={sharingInfos:a().object};var E=n("12136"),P=n("64411"),_=function(e){var t=e.previewPath,n=(0,E.h)(t);return i.createElement(S,{sharingInfos:n})};_.propTypes={previewPath:a().string};var A=(0,P.Z)(_)},80583:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=n(67294).createContext()},44510:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var r={ALBUMS:"Albums",FILES:"Files",NOTES:"Notes",ORGANIZATIONS:"Organizations"}},49246:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var r,a=n(11954),i=n(87757),o=n.n(i);var s=(r=(0,a.Z)(o().mark(function e(t,n,r){var a,i,s;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.map(function(e){return e.dir_id}).filter(function(e,t,n){return n.indexOf(e)===t}),e.next=3,t.collection(n).all({keys:a});case 3:return i=e.sent,s=r.map(function(e){return i.data.find(function(t){return t.id===e.dir_id})}).filter(function(e){return void 0!==e}).map(function(e){var t=e.path;return"/"===t?"/".concat(e.name):"".concat(t,"/").concat(e.name)}),e.abrupt("return",s);case 6:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)})},95810:function(e,t,n){"use strict";n.d(t,{D9:function(){return o},FH:function(){return s}});var r=n(25002),a=n(67294),i="undefined"==typeof window;function o(e){var t=(0,a.useRef)();return(0,a.useEffect)(function(){t.current=e},[e]),t.current}function s(e){var t,n,o=(t=(0,a.useRef)(!1),n=(0,a.useCallback)(function(){return t.current},[]),a[i?"useEffect":"useLayoutEffect"](function(){return t.current=!0,function(){t.current=!1}},[]),n),s=a.useState(e),c=(0,r.Z)(s,2),u=c[0],l=c[1];return[u,a.useCallback(function(e){(function(e){Promise.resolve().then(e).catch(function(e){return setTimeout(function(){throw e})})})(function(){o()&&l(e)})},[o])]}},80136:function(e,t,n){"use strict";n.d(t,{Bf:function(){return c},Yb:function(){return u},rn:function(){return s},s:function(){return o}});var r=n(27361),a=n.n(r),i=n(16396),o=function(e){return Object.values(a()(e,"[0].attributes.permissions",{})).filter(function(e){return i.models.permission.isReadOnly(e)}).length>0},s=function(e){var t;return!!(null==e||null===(t=e[0])||void 0===t||null===(t=t.attributes)||void 0===t?void 0:t.expires_at)},c=function(e){var t;return null==e||null===(t=e[0])||void 0===t||null===(t=t.attributes)||void 0===t?void 0:t.expires_at},u=function(e){var t;return!!(null==e||null===(t=e[0])||void 0===t||null===(t=t.attributes)||void 0===t?void 0:t.password)}},60743:function(e,t,n){"use strict";n.d(t,{$U:function(){return v},A8:function(){return u},Av:function(){return d},F4:function(){return p},Qk:function(){return f},gc:function(){return h},rM:function(){return m},rV:function(){return l}});var r=n(98477),a=n(17508),i=n(71400),o=n(26969);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u="Share.contacts.defaultDisplayName",l=function(e,t){return e.filter(function(e){return"owner"!==e.status}).map(function(e){return t&&!t.find(function(t){return t.name===e.name&&t.email===e.email})?c(c({},e),{},{hasBeenJustAdded:!0}):e})},d=600,f=function(){var e=(0,i.default)("sharing.recipients-limit");return null!==e?e:100},p=function(e,t){var n=f();return!!(e.length+t.length>n)||!1},h=function(e,t){var n,a=(n=t._type===o.Group.doctype?t.members:[t]).filter(function(e){return e.email&&e.email.length>0||e.cozy&&e.cozy.length>0}).filter(function(t){return!e.find(function(e){return e===t})});return[].concat((0,r.Z)(e),(0,r.Z)(a))},v=function(e,t){return[].concat((0,r.Z)(e),[t])},m=function(e){var t=e.nbMember,n=e.nbMemberReady,r=e.t,a=e.isUserInsideMembers;return r("GroupRecipient.secondary",{memberCount:t===n?t:[n,t].join("/"),smart_count:t})+(a?" (".concat(r("GroupRecipient.secondary_you"),")"):"")}},70559:function(e,t,n){"use strict";n.d(t,{wM:()=>g,ZV:()=>y,DZ:()=>k,N8:()=>w,O_:()=>b});var r,a=n("11954"),i=n("87757"),o=n.n(i),s=n("16396"),c=n("79580"),u=n("58300"),l=n("21342"),d=n("49246"),f=n("17508");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,f.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=n("96184"),m=n("46513"),y=function(e,t){var n,r,a,i;if(e){;return n=e,r=t,h(h({},n),{},{meta:{rev:r._rev},attributes:h({},r)})}return i="io.cozy.sharings",h(h({id:(a=t)._id},a),{},{attributes:h({id:a._id},a),type:i})};var g=(r=(0,a.Z)(o().mark(function e(t){var n,r,i,c,u;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.doctype,i=t.dispatch,c=t.docsId,u=t.sharing,e.next=3,Promise.all(c.map(function(){var e=(0,a.Z)(o().mark(function e(t){var a,c;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"io.cozy.files"!==r){e.next=7;break}return e.next=4,n.query((0,s.Q)(r).getById(t));case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=void 0;case 8:if(a=e.t0,e.t1=a,!e.t1){e.next=17;break}if(e.t2=a.data.path,e.t2){e.next=16;break}return e.next=15,(0,d.T)(n,r,[a.data]);case 15:e.t2=e.sent;case 16:e.t1=e.t2;case 17:c=e.t1,i((0,m.e5)(u,c)),e.next=24;break;case 21:e.prev=21,e.t3=e.catch(0),v.Z.log(e.t3);case 24:case"end":return e.stop()}},e,null,[[0,21]])}));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),b=function(e,t){e((0,m.Ei)(t))},w=function(e){window.open(e,"_blank")},k=function(e){var t=e.link,n=e.isSharingShortcutCreated,r=e.isShortLabel,a=e.t;return"https://manager.cozycloud.cc/cozy/create"===t?{icon:l.Z,label:a("Share.create-cozy",{smart_count:r?1:2})}:n?{icon:u.Z,label:a("Share.banner.sync_to_mine",{smart_count:r?1:2})}:{icon:c.Z,label:a("Share.banner.add_to_mine",{smart_count:r?1:2})}}},64411:function(e,t,n){"use strict";n.d(t,{Z:function(){return u},c:function(){return c}});var r=n(67294),a=n(8250),i=n(62125),o=n(14669),s={en:n(26030),fr:n(40552)},c=function(){return(0,o.getI18n)(void 0,function(e){return s[e]})};let u=function(e){return(0,a.Z)()(function(t){return r.createElement(i.I18n,{dictRequire:function(e){return s[e]},lang:t.lang},r.createElement(e,t))})}},45827:function(e,t,n){"use strict";n.d(t,{W:function(){return u}});var r=n(11954),a=n(25002),i=n(87757),o=n.n(i),s=n(67294),c=n(49246),u=function(e,t){var n=(0,s.useState)(t.path?t.path:null),i=(0,a.Z)(n,2),u=i[0],l=i[1];return(0,s.useEffect)(function(){(0,r.Z)(o().mark(function n(){return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,"directory"!==t.type){n.next=4;break}return n.abrupt("return",l(t.path));case 4:return n.next=6,(0,c.T)(e,t._type,[t]);case 6:l(n.sent[0]),n.next=12;break;case 10:n.prev=10,n.t0=n.catch(0);case 12:case"end":return n.stop()}},n,null,[[0,10]])}))()},[e,t]),u}},95051:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(67294),a=n(80583),i=function(){return(0,r.useContext)(a.Z)}},74122:function(e,t,n){"use strict";n.r(t),n.d(t,{NativeFileSharingProvider:()=>e4.fb,OpenSharingLinkFabButton:()=>e2.Z,useSharingContext:()=>j.o,useNativeFileSharing:()=>e4.oO,withLocales:()=>T.Z,SharingBannerPlugin:()=>ez.q,SharedDocument:()=>I,shareNative:()=>te,ShareModal:()=>eM.V,SharingContext:()=>w.Z,default:()=>tt,createCozySharingLink:()=>e3.y,addToCozySharingLink:()=>e5.Y,OpenSharingLinkButton:()=>e1.Z,SharedBadge:()=>K,useFetchDocumentPath:()=>N.W,ShareButton:()=>eD.T,SharedRecipients:()=>$.L,CozyPassFingerprintDialogContent:()=>eL,OwnerRecipientDefaultLite:()=>eg,SharingOwnerAvatar:()=>J,useSharingInfos:()=>eZ.h,DOCUMENT_TYPE:()=>e0.t,SharedRecipientsList:()=>eR,ConfirmTrustedRecipientsDialog:()=>eQ,SharedStatus:()=>z,syncToCozySharingLink:()=>e6.U,RefreshableSharings:()=>eT,ShareButtonWithRecipients:()=>eX,LinkRecipientLite:()=>ey,MemberRecipientLite:()=>ed});var r,a,i=n("98477"),o=n("25002"),s=n("11954"),c=n("46932"),u=n("89526"),l=n("11998"),d=n("28446"),f=n("26238"),p=n("17508"),h=n("87757"),v=n.n(h),m=n("67294"),y=n("16396"),g=n("74450"),b=n.n(g),w=n("80583"),k=n("46513");var x=(r=(0,s.Z)(v().mark(function e(t,n,r){var a;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.links&&t.links.next)){e.next=6;break}return e.next=3,r.fetchPermissionsByLink(t);case 3:return a=e.sent,n((0,k.j3)(a.data)),e.abrupt("return",x(a,n,r));case 6:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)}),O=n("49246"),C=n("70559");var S=(0,u.Z)(function e(){(0,c.Z)(this,e),this.isRunning=!1,this.queue=[]},[{key:"push",value:function(e){this.queue.push(e),!this.isRunning&&this.run()}},{key:"run",value:(a=(0,s.Z)(v().mark(function e(){var t;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.isRunning=!0;case 1:if(!(this.queue.length>0)){e.next=7;break}return t=this.queue.shift(),e.next=5,t.function(t.arguments);case 5:e.next=1;break;case 7:this.isRunning=!1;case 8:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})}]),E=n("16700");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,p.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A=b()("SharingProvider"),R="io.cozy.sharings",D=function(e){var t;function n(e,t){(0,c.Z)(this,n),r=this,a=n,i=[e,t],a=(0,d.Z)(a),P=(0,l.Z)(r,!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){return!1}}()?a.apply(r,i):Reflect.construct(a,i||[],(0,d.Z)(r).constructor)),(0,p.Z)(P,"dispatch",function(e){return P.setState(function(t){return _(_({},t),(0,k.ZP)(t,e))})}),(0,p.Z)(P,"initialize",function(){if(!P.isInitialized){var e=P.props.client;P.fetchAllSharings(),e.plugins.realtime?(P.realtime=e.plugins.realtime,P.realtime.subscribe("created",R,P.handleCreateOrUpdateSharings),P.realtime.subscribe("updated",R,P.handleCreateOrUpdateSharings)):console.warn("You should register the realtime plugin to your CozyClient instance see https://docs.cozy.io/en/cozy-realtime/#example"),P.isInitialized=!0}}),(0,p.Z)(P,"handleCreateOrUpdateSharings",(o=(0,s.Z)(v().mark(function e(t){var n,r,a,i,o,s;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=(n=P.props).client,a=n.doctype,i=(0,k.zJ)(P.state,t._id),o=(0,C.ZV)(i,t),i?(0,C.O_)(P.dispatch,o):(s=(0,k.Fv)(o,r.getStackClient().uri),P.synchronousJobQueue.push({function:C.wM,arguments:{client:r,doctype:a,dispatch:P.dispatch,docsId:s,sharing:o}}));case 4:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})),(0,p.Z)(P,"share",(u=(0,s.Z)(v().mark(function e(t){var n,r,a,i,o,s,c,u,l,d,f,p,h;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.document,a=t.recipients,i=t.readOnlyRecipients,o=t.description,s=t.openSharing,u=(c=P.props).client,l=c.doctype,!(d=(0,k.jS)(P.state,r.id))){e.next=10;break}return e.next=6,P.addRecipients({document:d,recipients:a,readOnlyRecipients:i});case 6:return f=e.sent,e.next=9,P.state.onShared({document:r,recipients:a,readOnlyRecipients:i});case 9:return e.abrupt("return",f);case 10:return p=null!==(n=P.props.previewPath)&&void 0!==n?n:"/preview",e.next=13,P.sharingCol.create({document:r,recipients:a,readOnlyRecipients:i,description:o,previewPath:p,openSharing:s});case 13:if(h=e.sent.data,e.t0=P,e.t1=k.e5,e.t2=h,e.t3=r.path,e.t3){e.next=23;break}return e.next=22,(0,O.T)(u,l,[r]);case 22:e.t3=e.sent;case 23:return e.t4=e.t3,e.t5=(0,e.t1)(e.t2,e.t4),e.t0.dispatch.call(e.t0,e.t5),e.next=28,P.state.onShared({document:r,recipients:a,readOnlyRecipients:i});case 28:return e.abrupt("return",h);case 29:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)})),(0,p.Z)(P,"addRecipients",(f=(0,s.Z)(v().mark(function e(t){var n,r,a,i;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.document,r=t.recipients,a=t.readOnlyRecipients,e.next=3,P.sharingCol.addRecipients({document:n,recipients:r,readOnlyRecipients:a});case 3:i=e.sent,P.dispatch((0,k.Ei)(i.data));case 5:case"end":return e.stop()}},e)})),function(e){return f.apply(this,arguments)})),(0,p.Z)(P,"revokeAllRecipients",(h=(0,s.Z)(v().mark(function e(t){var n,r,a,i,o;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=P.props).client,a=n.doctype,i=(0,k.Tw)(P.state,t.id),o=(0,k.jS)(P.state,t.id),e.next=5,P.sharingCol.revokeAllRecipients(o);case 5:i.map(function(){var e=(0,s.Z)(v().mark(function e(n,i){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=P,e.t1=k.eR,e.t2=o,e.t3=i,e.t4=t.path,e.t4){e.next=9;break}return e.next=8,(0,O.T)(r,a,[t]);case 8:e.t4=e.sent;case 9:e.t5=e.t4,e.t6=(0,e.t1)(e.t2,e.t3,e.t5),e.t0.dispatch.call(e.t0,e.t6);case 12:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}},e)})),function(e){return h.apply(this,arguments)})),(0,p.Z)(P,"revoke",(m=(0,s.Z)(v().mark(function e(t,n,r){var a,i,o,s;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(a=P.props).client,o=a.doctype,s=(0,k.zJ)(P.state,n),e.next=4,P.sharingCol.revokeRecipient(s,r);case 4:if(e.t0=P,e.t1=k.eR,e.t2=s,e.t3=r,e.t4=t.path,e.t4){e.next=13;break}return e.next=12,(0,O.T)(i,o,[t]);case 12:e.t4=e.sent;case 13:e.t5=e.t4,e.t6=(0,e.t1)(e.t2,e.t3,e.t5),e.t0.dispatch.call(e.t0,e.t6);case 16:case"end":return e.stop()}},e)})),function(e,t,n){return m.apply(this,arguments)})),(0,p.Z)(P,"revokeGroup",(y=(0,s.Z)(v().mark(function e(t,n,r){var a,i,o,s;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(a=P.props).client,o=a.doctype,s=(0,k.zJ)(P.state,n),e.next=4,P.sharingCol.revokeGroup(s,r);case 4:if(e.t0=P,e.t1=k.xd,e.t2=s,e.t3=r,e.t4=t.path,e.t4){e.next=13;break}return e.next=12,(0,O.T)(i,o,[t]);case 12:e.t4=e.sent;case 13:e.t5=e.t4,e.t6=(0,e.t1)(e.t2,e.t3,e.t5),e.t0.dispatch.call(e.t0,e.t6);case 16:case"end":return e.stop()}},e)})),function(e,t,n){return y.apply(this,arguments)})),(0,p.Z)(P,"revokeSelf",(g=(0,s.Z)(v().mark(function e(t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,k.i6)(P.state,t.id),e.next=3,P.sharingCol.revokeSelf(n);case 3:P.dispatch((0,k.G1)(n));case 4:case"end":return e.stop()}},e)})),function(e){return g.apply(this,arguments)})),(0,p.Z)(P,"shareByLink",(b=(0,s.Z)(v().mark(function e(t,n){var r;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.permissionCol.createSharingLink(t,n);case 2:return r=e.sent,P.dispatch((0,k.j3)(r.data)),e.abrupt("return",r);case 5:case"end":return e.stop()}},e)})),function(e,t){return b.apply(this,arguments)})),(0,p.Z)(P,"updateDocumentPermissions",(w=(0,s.Z)(v().mark(function e(t,n){var r,a,i,o,c;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.verbs,a=n.expiresAt,i=n.password,o=(0,k.jp)(P.state,t.id),e.next=4,Promise.all(o.map(function(){var e=(0,s.Z)(v().mark(function e(t){var n,o;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object.keys(n=t.attributes.permissions).map(function(e){n[e].verbs=r}),e.next=4,P.permissionCol.add(t,n,{expiresAt:a,password:i});case 4:return o=e.sent,P.dispatch((0,k.OQ)(o.data)),e.abrupt("return",o);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}},e)})),function(e,t){return w.apply(this,arguments)})),(0,p.Z)(P,"revokeSharingLink",(x=(0,s.Z)(v().mark(function e(t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,k.jp)(P.state,t.id),e.next=3,Promise.all(n.map(function(e){return P.permissionCol.destroy(e)}));case 3:P.dispatch((0,k.cI)(n));case 4:case"end":return e.stop()}},e)})),function(e){return x.apply(this,arguments)})),(0,p.Z)(P,"hasWriteAccess",function(e){var t=P.props.client.getStackClient().uri;return!P.state.byDocId||!P.state.byDocId[e]||(0,k.mF)(P.state,e)||"two-way"===(0,k.FQ)(P.state,e,t)});var r,a,i,o,u,f,h,m,y,g,b,w,x,E,P,A=e.client.getStackClient().uri,D=e.documentType||"Document",M=e.onShared||function(){};P.state={byDocId:{},sharings:[],permissions:[],sharedFolderPaths:[],documentType:D,isOwner:function(e){return(0,k.mF)(P.state,e)},canReshare:function(e){return(0,k.pg)(P.state,e,A)},getOwner:function(e){return(0,k.ei)(P.state,e)},getSharingType:function(e){return(0,k.FQ)(P.state,e,A)},getSharingForSelf:function(e){return(0,k.i6)(P.state,e)},getRecipients:function(e){return(0,k.Tw)(P.state,e)},getSharedParentPath:function(e){return(0,k.WM)(P.state,e)},getDocumentPermissions:function(e){return(0,k.jp)(P.state,e)},getSharingLink:function(e){return(0,k.NF)(P.state,e,D)},hasSharedParent:function(e){return(0,k.vj)(P.state,e)},hasSharedChild:function(e){return(0,k.pY)(P.state,e)},share:P.share,onShared:M,revoke:P.revoke,revokeGroup:P.revokeGroup,revokeSelf:P.revokeSelf,shareByLink:P.shareByLink,updateDocumentPermissions:P.updateDocumentPermissions,revokeSharingLink:P.revokeSharingLink,hasLoadedAtLeastOnePage:!1,allLoaded:!1,revokeAllRecipients:P.revokeAllRecipients,refresh:P.fetchAllSharings,hasWriteAccess:P.hasWriteAccess},P.isPublic=null!==(E=e.isPublic)&&void 0!==E&&E,P.realtime=null,P.isInitialized=!1,P.synchronousJobQueue=new S;var T=e.client;return P.sharingCol=T.collection(R),P.permissionCol=T.collection("io.cozy.permissions"),P.fetchAllSharings=P.fetchAllSharings.bind(P),P}return(0,f.Z)(n,e),(0,u.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.client;e.isLogged?this.initialize():e.on("plugin:realtime:login",this.initialize)}},{key:"componentWillUnmount",value:function(){this.realtime&&(this.realtime.unsubscribe("created",R,this.handleCreateOrUpdateSharings),this.realtime.unsubscribe("updated",R,this.handleCreateOrUpdateSharings))}},{key:"fetchAllSharings",value:(t=(0,s.Z)(v().mark(function e(){var t,n,r,a,s,c,u,l,d,f,p,h;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPublic){e.next=4;break}return A.warn("fetchAllSharings is not allowed in public context."),this.setState({allLoaded:!0}),e.abrupt("return");case 4:return n=(t=this.props).doctype,r=t.client,e.next=7,Promise.all([this.sharingCol.findByDoctype(n),this.permissionCol.findLinksByDoctype(n),r.fetchQueryAndGetFromState((0,E.SD)())]);case 7:return a=e.sent,c=(s=(0,o.Z)(a,3))[0],u=s[1],l=s[2],this.dispatch((0,k.UX)({instanceUri:r.options.uri,sharings:c.data,permissions:u.data,apps:l.data})),this.setState({hasLoadedAtLeastOnePage:!0}),e.next=16,x(u,this.dispatch,this.permissionCol);case 16:if("io.cozy.files"!==n){e.next=26;break}return d=(0,k.fH)(c),e.next=20,r.collection(n).all({keys:d});case 20:return p=(f=e.sent).data.filter(function(e){return"directory"===e.type&&!e.trashed}).map(function(e){return e.path}),e.next=24,(0,O.T)(r,n,f.data.filter(function(e){return"directory"!==e.type&&!e.trashed}));case 24:h=e.sent,this.dispatch((0,k.RX)([].concat((0,i.Z)(p),(0,i.Z)(h))));case 26:this.setState({allLoaded:!0});case 27:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return m.createElement(w.Z.Provider,{value:_({},this.state)},this.props.children)}}])}(m.Component);let M=(0,y.withClient)(D);var T=n("64411"),j=n("95051"),N=n("45827"),I=function(e){var t=e.docId,n=e.children;return m.createElement(w.Z.Consumer,null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.hasWriteAccess,a=e.byDocId,i=e.isOwner,o=e.getRecipients,s=e.getSharingLink,c=e.refresh,u=e.revokeSelf;return n({hasWriteAccess:r(t),isShared:void 0!==a&&a[t],isSharedByMe:void 0!==a&&a[t]&&i(t),isSharedWithMe:void 0!==a&&a[t]&&!i(t),recipients:o(t),link:null!==s(t),onFileDelete:c,onLeave:u})})},L=n("9768"),z=(0,T.Z)(function(e){var t=e.docId,n=e.className,r=e.noSharedClassName,a=e.onClick,i=e.showMeAsOwner;return m.createElement(w.Z.Consumer,null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.byDocId,s=e.getRecipients,c=e.getSharingLink,u=e.isOwner;return o&&o[t]?m.createElement(L.eM,{className:n,recipients:s(t),link:null!==c(t),onClick:a,isOwner:u(t),size:24,showMeAsOwner:i}):m.createElement("span",{className:n+" "+r},"—")})}),Z=n("16019"),B=n("77354"),F=n("94184"),U=n.n(F),V=n("32419"),H=n("53773"),W={"shared-badge":"badge__shared-badge___2jGsy","--small":"badge__--small___2VMyY","shared-badge-icon":"badge__shared-badge-icon___3s9t1","--xsmall":"badge__--xsmall___2cEGG","--by-me":"badge__--by-me___3aTHb","--with-me":"badge__--with-me___3jW7R"};let q=function(e){var t=e.byMe,n=e.className,r=e.small,a=e.xsmall;return m.createElement("div",{className:U()(W["shared-badge"],n,(0,p.Z)({},W["--small"],r),(0,p.Z)({},W["--xsmall"],a),W[t?"--by-me":"--with-me"])},m.createElement(V.default,{icon:H.default,color:"var(--primaryContrastTextColor)",className:W["shared-badge-icon"]}))};var G=["docId"],K=(0,T.Z)(function(e){var t=e.docId,n=(0,B.Z)(e,G);return m.createElement(w.Z.Consumer,null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.byDocId,a=e.isOwner;return r&&r[t]?m.createElement(q,(0,Z.Z)({byMe:a(t)},n)):null})}),Q=n("6713"),Y=["docId"],J=(0,T.Z)(function(e){var t=e.docId,n=(0,B.Z)(e,Y);return m.createElement(w.Z.Consumer,null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.byDocId,a=e.getOwner;return r&&r[t]?m.createElement(Q.s,(0,Z.Z)({recipient:a(t)},n)):null})}),$=n("51926"),X=n("45697"),ee=n.n(X),et=n("10059"),en=n("96105"),er=n("11075"),ea=n("32692"),ei=n("62125"),eo=n("83556"),es=n("60743"),ec=n("91944"),eu=["recipient","isOwner"],el=function(e){var t,n=e.recipient,r=e.isOwner,a=(0,B.Z)(e,eu),i=(0,ei.useI18n)().t,o=(0,y.useClient)(),s="owner"===n.status,c=r&&s||n.instance===o.options.uri;return m.createElement(et.default,{size:"small",ellipsis:!0},m.createElement(en.default,null,m.createElement(Q.s,(0,Z.Z)({size:"small",recipient:n},a))),m.createElement(er.default,{primary:c?i("Share.recipients.you"):(0,ec.Gf)(n,i(es.A8)),secondary:m.createElement(eo.Z,{status:n.status,isMe:c,instance:n.instance,typographyProps:{noWrap:!0}})}),m.createElement(ea.default,{className:"u-flex-shrink-0",variant:"body2"},s?i("Share.status.".concat(n.status)).toLowerCase():i("Share.type.".concat(null!==(t=n.type)&&void 0!==t?t:"one-way")).toLowerCase()))};el.propTypes={recipient:ee().object,isOwner:ee().bool};let ed=(0,T.Z)(el);var ef=n("77843"),ep=n("40354"),eh=n("80136"),ev={"link-recipient-icon-circle":"recipient__link-recipient-icon-circle___3ZTU-"},em=function(e){var t=e.permissions,n=e.link,r=(0,ei.useI18n)().t;if(!n)return null;var a=(0,eh.s)(t);return m.createElement(et.default,{size:"small",ellipsis:!0},m.createElement(en.default,null,m.createElement(ef.Z,{size:"small",className:ev["link-recipient-icon-circle"]},m.createElement(V.default,{icon:ep.Z}))),m.createElement(er.default,{primary:r("Share.recipients.anyoneWithTheLink"),secondary:n}),m.createElement(ea.default,{className:"u-flex-shrink-0",variant:"body2"},r("Share.type.".concat(a?"one-way":"two-way")).toLowerCase()))};em.propTypes={permissions:ee().array,link:ee().string};let ey=(0,T.Z)(em),eg=(0,T.Z)(function(){var e,t=(0,y.useClient)(),n=(0,E.Vg)(),r=(0,y.useQuery)(n.definition,n.options);return(0,y.hasQueryBeenLoaded)(r)&&m.createElement(ed,{recipient:{status:"owner",instance:t.options.uri,public_name:null==r||null===(e=r.data)||void 0===e||null===(e=e.attributes)||void 0===e?void 0:e.public_name},isOwner:!0})});var eb=n("40509"),ew=n("42191"),ek={recipient:"recipient__recipient___2DmZI","recipients-list-light":"recipient__recipients-list-light___Vq4op","recipient-idents":"recipient__recipient-idents___3s7rw","recipient-status-icon":"recipient__recipient-status-icon___-liGw","recipient-user":"recipient__recipient-user___1THIU","recipient-details":"recipient__recipient-details___2fZfc",avatar:"recipient__avatar___2LnIV","link-recipient-icon-circle":"recipient__link-recipient-icon-circle___3ZTU-","recipients-avatars":"recipient__recipients-avatars___1npjD","--interactive":"recipient__--interactive___160Bp","recipients-avatars--link":"recipient__recipients-avatars--link___1qeON","recipients-avatars--plusX":"recipient__recipients-avatars--plusX___3-6_l","recipients-avatars--avatar":"recipient__recipients-avatars--avatar___-owjC",spin:"recipient__spin___2tYv3",shake:"recipient__shake___TGyPp"},ex=function(e,t){var n=e.extraRecipients,r=t.t;return m.createElement("div",{className:ek.recipient},m.createElement(ew.N,{extraRecipients:n.map(function(e){return(0,ec.Gf)(e)})}),m.createElement("div",{className:ek["recipient-ident-status"]},m.createElement(eb.Z,{name:r("Share.members.otherContacts",n.length)})))};ex.contextTypes={t:ee().func.isRequired};var eO=n("88230"),eC=["instance"],eS={recipient:"recipient__recipient___2DmZI","recipients-list-light":"recipient__recipients-list-light___Vq4op","recipient-idents":"recipient__recipient-idents___3s7rw","recipient-status-icon":"recipient__recipient-status-icon___-liGw","recipient-user":"recipient__recipient-user___1THIU","recipient-details":"recipient__recipient-details___2fZfc",avatar:"recipient__avatar___2LnIV","link-recipient-icon-circle":"recipient__link-recipient-icon-circle___3ZTU-","recipients-avatars":"recipient__recipients-avatars___1npjD","--interactive":"recipient__--interactive___160Bp","recipients-avatars--link":"recipient__recipients-avatars--link___1qeON","recipients-avatars--plusX":"recipient__recipients-avatars--plusX___3-6_l","recipients-avatars--avatar":"recipient__recipients-avatars--avatar___-owjC",spin:"recipient__spin___2tYv3",shake:"recipient__shake___TGyPp"},eE=function(e){var t=e.instance,n=(0,B.Z)(e,eC),r=(0,ec.Gf)(n);return m.createElement("div",{className:eS.recipient},m.createElement(eO.Z,{text:(0,ec.Qm)(n),textId:r}),m.createElement("div",{className:eS["recipient-ident-status"]},m.createElement(eb.Z,{name:r,details:t})))},eP="recipient__recipients-list-light___Vq4op";let e_=function(e){var t=e.recipients,n=e.className;return m.createElement("div",{className:U()(eP,n)},t.slice(0,2).map(function(e,t){return m.createElement(eE,(0,Z.Z)({},e,{key:"key_recipient__".concat(t)}))}),t.length>2&&m.createElement(ex,{extraRecipients:t.slice(2)}))};var eA=["docId"],eR=(0,T.Z)(function(e){var t=e.docId,n=(0,B.Z)(e,eA);return m.createElement(w.Z.Consumer,null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.byDocId,a=e.isOwner,i=e.getRecipients;return r&&r[t]&&a(t)?m.createElement(e_,(0,Z.Z)({recipients:i(t).filter(function(e){return"owner"!==e.status})},n)):null})}),eD=n("24838"),eM=n("28508"),eT=function(e){var t=e.children;return m.createElement(w.Z.Consumer,null,function(e){return t({refresh:e.refresh})})},ej=n("59252"),eN=n("9758"),eI={"cozy-pass-fingerprint-modal__fingerprint":"CozyPassFingerprintDialogContent__cozy-pass-fingerprint-modal__fingerprint___3qIGs"},eL=function(e){var t=e.recipientConfirmationData,n=(0,ei.useI18n)().t,r=(0,ej.Z)(n("Organizations.fingerprint.instruction",{userName:t.name,userEmail:t.email})),a=(0,ej.Z)(n("Organizations.fingerprint.instruction2"));return m.createElement("div",{className:U()(eI["share-modal-content"])},m.createElement("p",{dangerouslySetInnerHTML:{__html:r}}),m.createElement(eN.default,{className:U()(eI["cozy-pass-fingerprint-modal__fingerprint"]),elevation:1},m.createElement(ea.default,{variant:"body1"},t.fingerprintPhrase)),m.createElement("p",{dangerouslySetInnerHTML:{__html:a}}))};eL.propTypes={recipientConfirmationData:ee().shape({name:ee().string.isRequired,email:ee().string.isRequired,fingerprintPhrase:ee().string.isRequired})};var ez=n("68325"),eZ=n("12136"),eB=n("86077"),eF=n("24546"),eU=n("89909"),eV=n("11782"),eH=n("93616"),eW=function(e){var t=e.recipientsToBeConfirmed,n=e.verifyRecipient,r=(0,ei.useI18n)().t,a=(0,eU.default)().isMobile;return m.createElement(m.Fragment,null,m.createElement(ea.default,{variant:"body1",className:U()("u-mb-half",a?"u-ph-1 u-mt-1":"u-ph-2 u-mt-1-half")},r("ConfirmRecipientModal.intruction")),m.createElement(eF.default,{className:a?"u-mb-half":"u-mb-1"},t.map(function(e){return m.createElement(eV.Z,(0,Z.Z)({},e,{key:"key_r_".concat(e.id),isOwner:!1,recipientConfirmationData:e,verifyRecipient:n}))})))},eq=function(e){var t=e.recipientsToBeConfirmed;return(0,(0,ei.useI18n)().t)("ConfirmRecipientModal.title",{smart_count:t.length})};let eG=function(e){var t=(0,Z.Z)({},((0,eB.Z)(e),e));return m.createElement(eH.Z,(0,Z.Z)({},t,{dialogContentOnShare:eW,dialogActionsOnShare:null,dialogTitleOnShare:eq}))};var eK=["document"],eQ=(0,T.Z)(function(e){var t=e.document,n=(0,B.Z)(e,eK);return m.createElement(w.Z.Consumer,null,function(){return m.createElement(eG,(0,Z.Z)({document:t},n))})}),eY=n("11571");let eJ=n("58365").Z;var e$=["docId","onClick"],eX=function(e){var t=e.docId,n=e.onClick,r=(0,B.Z)(e,e$),a=(0,eU.default)().isMobile;return m.createElement(w.Z.Consumer,null,function(e){return e.allLoaded?m.createElement(eY.Z,{container:!0,alignItems:"center",className:"u-w-auto"},!a&&m.createElement(eY.Z,{item:!0},m.createElement($.L,{docId:t,onClick:n,size:32})),m.createElement(eY.Z,{item:!0},m.createElement(eD.T,(0,Z.Z)({docId:t,onClick:n},r)))):m.createElement(eJ,{width:120,animation:"wave"})})},e0=n("44510"),e1=n("66614"),e2=n("72386"),e4=n("25442"),e3=n("54528"),e5=n("69573"),e6=n("33491"),e9=n("95587"),e8=n("25735"),e7=function(e,t){var n=(0,m.forwardRef)(function(n,r){return m.createElement(e9.Z,(0,Z.Z)({},n,{ref:r}),m.createElement(en.default,null,m.createElement(V.default,{icon:t})),m.createElement(er.default,{primary:e}))});return n.displayName="ShareNative",n},te=function(e){var t=e.shareFilesNative,n=e.isNativeFileSharingAvailable,r=(0,(0,T.c)().t)("Share.send"),a=e8.default;return{name:"shareNative",label:r,icon:a,displayCondition:function(e){return n&&e.every(function(e){return"file"===e.type})},action:function(e){t(e.map(function(e){return e._id}))},Component:e7(r,a)}};let tt=M},96184:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(60732),a=n.n(r),i="undefined"!=typeof window&&window.minilog||a(),o=i("cozy-sharing");i.suggest.deny("cozy-sharing","log"),i.suggest.deny("cozy-sharing","info");let s=o},25442:function(e,t,n){"use strict";n.d(t,{fb:function(){return f},oO:function(){return d}});var r=n(11954),a=n(25002),i=n(87757),o=n.n(i),s=n(67294),c=n(25976),u=n(22960),l=(0,s.createContext)(),d=function(){var e=(0,s.useContext)(l);if(!e)throw Error("useFileSharing must be used within a FileSharingProvider");return e},f=function(e){var t,n=e.children,i=(0,u.useWebviewIntent)(),d=(0,s.useState)(!1),f=(0,a.Z)(d,2),p=f[0],h=f[1];(0,s.useEffect)(function(){var e;(e=(0,r.Z)(o().mark(function e(){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=(0,c.isFlagshipApp)(),!e.t0){e.next=5;break}return e.next=4,i.call("isAvailable","shareFiles");case 4:e.t0=e.sent;case 5:h(e.t0);case 7:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[i]);var v=(t=(0,r.Z)(o().mark(function e(t){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.call("shareFiles",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});return s.createElement(l.Provider,{value:{isNativeFileSharingAvailable:p,shareFilesNative:v}},n)}},16700:function(e,t,n){"use strict";n.d(t,{LG:function(){return u},SD:function(){return s},Vg:function(){return f},cr:function(){return c},pM:function(){return l},r:function(){return d}});var r=n(16396),a=n(91944),i=n(26969),o=r.fetchPolicies.olderThan(54e4),s=function(){return{definition:(0,r.Q)("io.cozy.apps"),options:{as:"io.cozy.apps",fetchPolicy:o}}},c=function(e){return{definition:(0,r.Q)("io.cozy.sharings").getById(e),options:{as:"io.cozy.sharings/".concat(e),fetchPolicy:o}}},u=function(){return{definition:(0,r.Q)(a.ZP.doctype).where({_id:{$gt:null}}).partialIndex({trashed:{$or:[{$eq:!1},{$exists:!1}]},$or:[{cozy:{$not:{$size:0}}},{email:{$not:{$size:0}}}]}).indexFields(["_id"]).limitBy(1e3),options:{as:"io.cozy.contacts/reachable"}}},l=function(){return{definition:(0,r.Q)(i.Group.doctype),options:{as:"io.cozy.contacts.groups",fetchPolicy:o}}},d=function(){return{definition:(0,r.Q)(a.ZP.doctype).where({_id:{$gt:null}}).partialIndex({trashed:{$or:[{$eq:!1},{$exists:!1}]},cozy:{$size:0},email:{$size:0},"relationships.groups.data":{$exists:!0}}).indexFields(["_id"]).limitBy(1e3),options:{as:"io.cozy.contacts/unreachable-with-groups",fetchPolicy:o}}},f=function(){return{definition:(0,r.Q)("io.cozy.settings").getById("io.cozy.settings.instance"),options:{as:"io.cozy.settings/instance",singleDocData:!0}}}},46513:function(e,t,n){"use strict";n.d(t,{Dh:function(){return eg},Ei:function(){return C},FQ:function(){return X},Fv:function(){return el},G1:function(){return P},NF:function(){return J},OQ:function(){return A},RX:function(){return D},Tw:function(){return K},UX:function(){return x},WM:function(){return es},ZP:function(){return H},cI:function(){return R},e5:function(){return O},eR:function(){return S},ei:function(){return G},fH:function(){return ex},i6:function(){return $},j3:function(){return _},jS:function(){return ee},jp:function(){return er},mF:function(){return W},pY:function(){return eo},pg:function(){return q},vj:function(){return ei},xd:function(){return E},zJ:function(){return en}});var r=n(98477),a=n(77354),i=n(17508),o=n(27361),s=n.n(o),c=n(71400);function u(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f="RECEIVE_SHARINGS",p="ADD_SHARING",h="UPDATE_SHARING",v="REVOKE_RECIPIENT",m="REVOKE_GROUP",y="REVOKE_SELF",g="ADD_SHARING_LINK",b="UPDATE_SHARING_LINK",w="REVOKE_SHARING_LINK",k="RECEIVE_PATHS",x=function(e){var t=e.instanceUri,n=e.sharings,r=e.permissions,a=e.apps;return{type:f,data:{sharings:(void 0===n?[]:n).filter(function(e){return!ef(e)&&!ep(e,t)}),permissions:void 0===r?[]:r,apps:void 0===a?[]:a}}},O=function(e,t){return{type:p,data:e,path:t}},C=function(e){return{type:h,sharing:e}},S=function(e,t,n){return{type:v,sharing:d(d({},e),{},{attributes:d(d({},e.attributes),{},{members:e.attributes.members.map(function(e,n){return n===t?d(d({},e),{},{status:"revoked"}):e})})}),path:n}},E=function(e,t,n){return{type:m,sharing:d(d({},e),{},{attributes:d(d({},e.attributes),{},{groups:e.attributes.groups.map(function(e,n){return n===t?d(d({},e),{},{revoked:!0}):e})})}),path:n}},P=function(e){return{type:y,sharing:e}},_=function(e){return{type:g,data:e}},A=function(e){return{type:b,data:e}},R=function(e){return{type:w,permissions:e}},D=function(e){return{type:k,paths:e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){return t.instance&&t.instance.toString().toLowerCase()===e.toLowerCase()}},T={sharings:[],permissions:[]},j=function(e,t,n){var r,o=e[t],s=(0,a.Z)(e,[t].map(u)),c=n(o||T);return 0===(r=c).sharings.length&&0===r.permissions.length?s:d(d({},s),{},(0,i.Z)({},t,c))},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return ec(t).reduce(function(e,n){return j(e,n,function(e){return d(d({},e),{},{sharings:Object.values(e.sharings).includes(t.id)?(0,r.Z)(e.sharings):[].concat((0,r.Z)(e.sharings),[t.id])})})},e)},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return ec(t).reduce(function(e,n){return j(e,n,function(e){return d(d({},e),{},{sharings:e.sharings.filter(function(e){return e!==t.id})})})},e)},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return ec(t).reduce(function(e,n){return j(e,n,function(e){return d(d({},e),{},{permissions:[].concat((0,r.Z)(e.permissions),[t.id])})})},e)},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return ec(t).reduce(function(e,n){return j(e,n,function(e){return d(d({},e),{},{permissions:e.permissions.filter(function(e){return e!==t.id})})})},e)},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:var n=t.data.sharings.reduce(function(e,t){return N(e,t)},e);return t.data.permissions.reduce(function(e,t){return L(e,t)},n);case p:return N(e,t.data);case m:case v:case h:if(ef(t.sharing))return I(e,t.sharing);return e;case g:if(!Array.isArray(t.data))return L(e,t.data);var r=d({},e);return t.data.map(function(e){r=d({},L(r,e))}),r;case y:return I(e,t.sharing);case w:return t.permissions.reduce(function(e,t){return z(e,t)},e);default:return e}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.data.permissions;case g:if(!Array.isArray(t.data))return[].concat((0,r.Z)(e),[t.data]);return[].concat((0,r.Z)(e),(0,r.Z)(t.data));case b:return e.map(function(e){return e.id===t.data.id?t.data:e});case w:var n=t.permissions.map(function(e){return e.id});return e.filter(function(e){return -1===n.indexOf(e.id)});default:return e}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(t.type===f)return t.data.apps;return e},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.data.sharings;case p:var n=e.filter(function(e){return e.id!==t.data.id});return[].concat((0,r.Z)(n),[t.data]);case h:case m:case v:return e.map(function(e){return e.id!==t.sharing.id?e:t.sharing});case y:return e.filter(function(e){return e.id!==t.sharing.id});default:return e}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.paths;case p:return[].concat((0,r.Z)(e),[t.path]);case m:case v:if(ef(t.sharing))return e.filter(function(e){return e!==t.path});return e;default:return e}};let H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{byDocId:Z(e.byDocId,t),sharings:U(e.sharings,t),permissions:B(e.permissions,t),apps:F(e.apps,t),sharedPaths:V(e.sharedPaths,t)}};var W=function(e,t){return!e.byDocId[t]||0===e.byDocId[t].sharings.length||!0===en(e,e.byDocId[t].sharings[0]).attributes.owner},q=function(e,t,n){var r=ee(e,t),a=r.attributes.members.find(M(n));return!0===r.attributes.open_sharing&&a&&!a.read_only},G=function(e,t){return K(e,t).find(function(e){return"owner"===e.status})},K=function(e,t){var n=et(e,t);return(0,c.default)("sharing.show-recipient-groups")?Y(n,t):Q(n,t)},Q=function(e,t){var n=e.map(function(e){var n=ey(e,t);return e.attributes.members.map(function(t,r){return d(d({},t),{},{index:"sharing-".concat(e.id,"-member-").concat(r),type:t.read_only?"one-way":n,sharingId:e.id,memberIndex:r,avatarPath:"/sharings/".concat(e.id,"/recipients/").concat(r,"/avatar")})})}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return"revoked"!==e.status});return n[0]&&"owner"===n[0].status?[n[0]].concat((0,r.Z)(n.filter(function(e){return"owner"!==e.status}))):n},Y=function(e,t){var n=e.flatMap(function(e){var n,a=ey(e,t),i=e.id,o=e.attributes.members.map(function(t,n){return d(d({},t),{},{type:t.read_only?"one-way":a,sharingId:i,index:"sharing-".concat(e.id,"-member-").concat(n),memberIndex:n,avatarPath:"/sharings/".concat(i,"/recipients/").concat(n,"/avatar")})}),s=(null===(n=e.attributes.groups)||void 0===n?void 0:n.map(function(t,n){return d(d({},t),{},{sharingId:i,index:"sharing-".concat(e.id,"-group-").concat(n),groupIndex:n,owner:o[t.addedBy],members:o.filter(function(e){var t;return null===(t=e.groups)||void 0===t?void 0:t.includes(n)})})}).filter(function(e){return!e.revoked}))||[];return[].concat((0,r.Z)(o.filter(function(e){return!e.only_in_groups&&"revoked"!==e.status})),(0,r.Z)(s))});return n[0]&&"owner"===n[0].status?[n[0]].concat((0,r.Z)(n.filter(function(e){return"owner"!==e.status}))):n},J=function(e,t,n){var r=er(e,t);if(0===r.length)return null;var a=r[0],i=s()(a,"attributes.shortcodes.email")||s()(a,"attributes.shortcodes.code")||s()(a,"attributes.codes.email")||s()(a,"attributes.codes.code");return i?eb(e,n,i):null},$=function(e,t){return ee(e,t)},X=function(e,t,n){var r=$(e,t);if(!r)return!1;var a=ey(r,t);if(r.attributes.owner)return a;var i=r.attributes.members.find(M(n));return i&&i.read_only?"one-way":a},ee=function(e,t){return et(e,t)[0]||null},et=function(e,t){return e.byDocId[t]?e.byDocId[t].sharings.map(function(t){return en(e,t)}):[]},en=function(e,t){return e.sharings.find(function(e){return e.id===t})},er=function(e,t){return e.byDocId[t]?e.byDocId[t].permissions.map(function(t){return ea(e,t)}):[]},ea=function(e,t){return e.permissions.find(function(e){return e.id===t})},ei=function(e,t){return!!e.sharedPaths&&e.sharedPaths.some(function(e){return 0===t.indexOf("".concat(e,"/"))})},eo=function(e,t){return!!e.sharedPaths&&e.sharedPaths.some(function(e){return 0===e.indexOf("".concat(t,"/"))})},es=function(e,t){return ei(e,t)?e.sharedPaths.find(function(e){return t.startsWith(e)}):null},ec=function(e){return"io.cozy.sharings"===e.type?eu(e):ed(e)},eu=function(e){var t=e.attributes.rules.map(function(e){return e.values}).reduce(function(e,t){return e.concat(t)},[]);return e.attributes.shortcut_id&&t.push(e.attributes.shortcut_id),t},el=function(e,t){var n=e.attributes.members.find(function(e){return e.instance===t}),r=[];return(null==n?void 0:n.status)==="ready"&&(r=e.attributes.rules.map(function(e){return e.values}).reduce(function(e,t){return e.concat(t)},[])),e.attributes.shortcut_id&&r.push(e.attributes.shortcut_id),r},ed=function(e){return Object.keys(e.attributes.permissions).map(function(t){return e.attributes.permissions[t].values?e.attributes.permissions[t].values:[]}).reduce(function(e,t){return[].concat((0,r.Z)(e),(0,r.Z)(t))},[])},ef=function(e){return e.attributes.owner&&1===e.attributes.members.filter(function(e){return"revoked"!==e.status}).length},ep=function(e,t){var n=e.attributes.members.find(M(t));return!e.attributes.owner&&n&&"revoked"===n.status},eh=function(e,t){return e.attributes.rules.find(function(e){return -1!==e.values.indexOf(t)})},ev=function(e){return e&&"sync"===e.update&&"sync"===e.remove?"two-way":"one-way"},em=function(e){return e&&"sync"===e.update&&"revoke"===e.remove?"two-way":"one-way"},ey=function(e,t){if(!e)return null;var n=eh(e,t),r=ev(n),a=em(n);return"two-way"===r||"two-way"===a?"two-way":"one-way"},eg=function(e,t){var n=eh(e,t),r=ev(n),a=em(n);return"two-way"!==r&&"two-way"!==a},eb=function(e,t,n){var r=ew(e,t);if("Notes"===t)return"".concat(r,"public/?sharecode=").concat(n);return"".concat(r,"public?sharecode=").concat(n)},ew=function(e,t){var n=e.apps;switch(t){case"Notes":return ek(n,"notes");case"Files":case"Document":return ek(n,"drive");case"Albums":return ek(n,"photos");default:throw Error("Sharing link: don't know which app to use for doctype ".concat(t))}},ek=function(e,t){var n=e.find(function(e){return e.attributes.slug===t&&"ready"===e.attributes.state});if(!n)throw Error("Sharing link: app ".concat(t," not installed"));return n.links.related},ex=function(e){var t=[];return e.data?(e.data.forEach(function(e){e.attributes&&e.attributes.active&&t.push.apply(t,(0,r.Z)(eu(e)))}),t):[]}},97209:function(e,t,n){"use strict";var r=n(95318),a=r(n(59713)),i=r(n(34575)),o=r(n(93913)),s=r(n(2205)),c=r(n(78585)),u=r(n(29754));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var p=n(27361),h=n(35937),v=n(38215),m="io.cozy.accounts",y=["login","identifier","new_identifier","email"],g=function(e){(0,s.default)(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function l(){return(0,i.default)(this,l),r.apply(this,arguments)}return(0,o.default)(l,null,[{key:"getAccountName",value:function(e){return e?e.auth&&(e.auth.accountName||this.getAccountLogin(e))||e._id:null}},{key:"getAccountLogin",value:function(e){if(e&&e.auth){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(y);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.auth[r])return e.auth[r]}}catch(e){n.e(e)}finally{n.f()}}}},{key:"fromCipher",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=d({identifierProperty:"login"},n),i=(p(e,"fields")||[]).reduce(function(e,t){return e[t.name]=t.value,e},{}),o={auth:h(d((t={},(0,a.default)(t,r.identifierProperty,p(e,"login.username","")),(0,a.default)(t,"password",p(e,"login.password","")),t),i),function(e){return!!e})};return e&&(o.relationships={vaultCipher:{_id:e.id,_type:"com.bitwarden.ciphers",_protocol:"bitwarden"}}),o}}]),l}(v);g.schema={doctype:m,attributes:{},relationships:{master:{type:"has-one",doctype:m}}},g.probableLoginFieldNames=y,e.exports=g},94867:function(e,t,n){"use strict";var r=n(95318),a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(78585)),c=r(n(29754)),u=n(38215),l="io.cozy.apps",d=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);return e=n?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function u(){return(0,a.default)(this,u),r.apply(this,arguments)}return(0,i.default)(u,null,[{key:"getStoreInstallationURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.slug)throw Error("Expected app / konnector with the defined slug");var n=this.isInstalled(e,{slug:"store"});if(!n)return null;var r=n.links&&n.links.related;return r?"".concat(r,"#/discover/").concat(t.slug,"/install"):null}},{key:"isInstalled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.find(function(e){return e.attributes&&e.attributes.slug===t.slug})}},{key:"getUrl",value:function(e){return e.links&&e.links.related}}]),u}(u);d.schema={doctype:l,attributes:{}},d.doctype=l,e.exports=d},38215:function(e,t,n){"use strict";var r,a=n(95318),i=a(n(319)),o=a(n(6479)),s=a(n(87757)),c=a(n(59713)),u=a(n(48926)),l=a(n(2205)),d=a(n(78585)),f=a(n(29754)),p=a(n(34575)),h=a(n(93913)),v=["concurrency","logProgress"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=n(87735),w=n(94654),k=n(17204),x=n(27361),O=n(7739),C=n(52353),S=n(57557),E=n(14176),P=n(78718),_=n(35937),A=n(84238),R=n(89734),D=n(18621).default,M=n(71450).Q,T=n(89540).namespace("Document"),j=n(79478).parallelMap,N={},I=["shortLabel"];function L(e){return e.startsWith("\\")?e.slice(1):e}var z=function(e){return E(e,C)},Z=function(e){return Object.assign({},e,{_deleted:!0})},B=function(e){var t=e.cozyMetadata&&e.cozyMetadata.updatedAt;return t?new Date(t):null},F=function(e){var t=B(e);return t?-t:0},U=function(){var e,t,n,r,a,c,m,C,E,B,U,V,H,W,q,G,K,Q,Y,J;function $(){(0,p.default)(this,$)}return(0,h.default)($,null,[{key:"registerClient",value:function(e){if(this.cozyClient)throw console.warn("Document already has been registered, this is not possible to re-register as the client is shared globally between all classes. This is to prevent concurrency bugs."),Error("Document cannot be re-registered to a client.");this.cozyClient=e}},{key:"copyWithClient",value:function(e){var t=function(e){(0,l.default)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,f.default)(t);return e=n?Reflect.construct(r,arguments,(0,f.default)(this).constructor):r.apply(this,arguments),(0,d.default)(this,e)});function a(){return(0,p.default)(this,a),r.apply(this,arguments)}return(0,h.default)(a)}(this);return t.cozyClient=null,t.registerClient(e),t}},{key:"usesCozyClient",value:function(){return this.cozyClient instanceof D}},{key:"getIndex",value:function(e,t){if(this.usesCozyClient())throw Error("This method is not implemented yet with CozyClient");return this.getIndexViaOldClient(e,t)}},{key:"getIndexViaOldClient",value:function(e,t){var n="".concat(e,":").concat(t.slice().join(","));return!N[n]&&(N[n]=this.cozyClient.data.defineIndex(e,t).then(function(e){return N[n]=e,e})),Promise.resolve(N[n])}},{key:"addCozyMetadata",value:function(e){return!e.cozyMetadata&&(e.cozyMetadata={}),e.cozyMetadata.updatedAt=new Date,!e.cozyMetadata.createdByApp&&this.createdByApp&&(e.cozyMetadata.createdByApp=this.createdByApp),this.createdByApp&&!function(e,t){!e.updatedByApps&&(e.updatedByApps=[]);var n=new Date,r,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(e.updatedByApps);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.slug===t){i.date=n;return}}}catch(e){a.e(e)}finally{a.f()}e.updatedByApps.push({slug:t,date:n})}(e.cozyMetadata,this.createdByApp),e}},{key:"get",value:(e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.usesCozyClient()){e.next=2;break}throw Error("This method is not implemented with cozy-client-js");case 2:if(this.doctype){e.next=4;break}throw Error("doctype is not defined");case 4:return e.next=6,this.cozyClient.query(M(this.doctype).getById(t));case 6:return n=e.sent,e.abrupt("return",n.data);case 8:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"createOrUpdate",value:(t=(0,u.default)(s.default.mark(function e(t){var n,r=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:{},!this.usesCozyClient()){e.next=3;break}return e.abrupt("return",this.createOrUpdateViaNewClient(t,n));case 3:return e.abrupt("return",this.createOrUpdateViaOldClient(t,n));case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"applyUpdateIfDifferent",value:function(e,t,n){return!this.checkAttributes||function(e,t){if(0===Object.keys(e).length)return!0;for(var n in e)if(e[n]!==t[n])return!0;return!1}(P(e,this.checkAttributes),P(t,this.checkAttributes))||null!=n&&n.forceUpdate?(delete t.dateImport,this.addCozyMetadata(y(y({},e),t))):(T("debug","[updateIfDifferent] No need to update ".concat(t._id," because its `checkAttributes` (").concat(this.checkAttributes,") didn't change.")),e)}},{key:"getHandleDuplicateStrategy",value:function(e){if($.duplicateHandlingStrategies[e])return $.duplicateHandlingStrategies[e];throw Error("".concat(e," is not a know duplication handling strategy. Known strategies are ").concat(Object.keys($.duplicateHandlingStrategies)))}},{key:"handleDuplicates",value:(n=(0,u.default)(s.default.mark(function e(t,n,r){var a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof(a=t||this.defaultDuplicateHandling)?this.getHandleDuplicateStrategy(a):a,e.next=4,i.call(this,n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"createOrUpdateViaNewClient",value:(r=(0,u.default)(s.default.mark(function e(t,n){var r,a,i,o,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=k(this.idAttributes.map(function(e){return[e,x(t,L(e))]})),a=[],A(z(r))!==this.idAttributes.length){e.next=7;break}return e.next=6,this.queryAll(r);case 6:a=e.sent;case 7:if(0!==a.length){e.next=11;break}return e.abrupt("return",this.create(this.addCozyMetadata(t)));case 11:if(!((a=R(a,F)).length>1)){e.next=15;break}return e.next=15,this.handleDuplicates(n.handleDuplicates,a,r);case 15:if(i=a[0],o=S(t,I),c=this.applyUpdateIfDifferent(i,o,n),!(n.forceUpdate||c!==i)){e.next=22;break}return e.abrupt("return",this.save(c));case 22:return e.abrupt("return",c);case 23:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"createOrUpdateViaOldClient",value:(a=(0,u.default)(s.default.mark(function e(t,n){var r,a,i,o,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=k(this.idAttributes.map(function(e){return[e,x(t,L(e))]})),a=[],A(z(r))!==this.idAttributes.length){e.next=10;break}return e.next=6,this.getIndex(this.doctype,this.idAttributes);case 6:return i=e.sent,e.next=9,this.cozyClient.data.query(i,{selector:r});case 9:a=e.sent;case 10:if(0!==a.length){e.next=14;break}return e.abrupt("return",this.create(this.addCozyMetadata(t)));case 14:if(!((a=R(a,F)).length>1)){e.next=18;break}return e.next=18,this.handleDuplicates(n.handleDuplicates,a,r);case 18:if(o=a[0],c=S(t,I),u=this.applyUpdateIfDifferent(o,c,n),!(n.forceUpdate||u!==o)){e.next=25;break}return e.abrupt("return",this.save(u));case 25:return e.abrupt("return",o);case 26:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"create",value:(c=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.usesCozyClient()){e.next=2;break}return e.abrupt("return",this.createViaNewClient(t));case 2:return e.abrupt("return",this.createViaOldClient(t));case 3:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"createViaNewClient",value:(m=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cozyClient.create(this.doctype,t);case 2:return n=e.sent.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"createViaOldClient",value:(C=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cozyClient.data.create(this.doctype,t));case 1:case"end":return e.stop()}},e,this)})),function(e){return C.apply(this,arguments)})},{key:"save",value:(E=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.usesCozyClient()){e.next=2;break}return e.abrupt("return",this.saveViaNewClient(t));case 2:return e.abrupt("return",this.saveViaOldClient(t));case 3:case"end":return e.stop()}},e,this)})),function(e){return E.apply(this,arguments)})},{key:"saveViaNewClient",value:(B=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cozyClient.save(t);case 2:return n=e.sent.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)})),function(e){return B.apply(this,arguments)})},{key:"saveViaOldClient",value:(U=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cozyClient.data.updateAttributes(this.doctype,t._id,t));case 1:case"end":return e.stop()}},e,this)})),function(e){return U.apply(this,arguments)})},{key:"bulkSave",value:function(e,t,n){(n||"object"!=typeof t)&&T("warn","Second argument of bulkSave is now an object, please use bulkSave(documents, { logProgress, concurrency })");var r={};return"number"==typeof t&&(r.concurrency=t),"function"==typeof n&&(r.logProgress=n),"object"==typeof t&&Object.assign(r,t),this._bulkSave(e,r)}},{key:"_bulkSave",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.concurrency,i=r.logProgress,c=(0,o.default)(r,v);return j(e,(t=(0,u.default)(s.default.mark(function e(t){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i&&i(t),e.prev=1,e.next=4,n.createOrUpdate(t,c);case 4:return a=e.sent,e.abrupt("return",a);case 8:if(e.prev=8,e.t0=e.catch(1),!r.onCreateOrUpdateError){e.next=14;break}return e.abrupt("return",r.onCreateOrUpdateError(e.t0,t));case 14:throw e.t0;case 15:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return t.apply(this,arguments)}),void 0===a?30:a)}},{key:"query",value:function(e,t){if(this.usesCozyClient())throw Error("This method is not implemented yet with CozyClient");return this.queryViaOldClient(e,t)}},{key:"queryViaOldClient",value:function(e,t){return this.cozyClient.data.query(e,t)}},{key:"fetchAll",value:(V=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.usesCozyClient()?this.cozyClient.stackClient:this.cozyClient,e.prev=1,e.next=4,t.fetchJSON("GET","/data/".concat(this.doctype,"/_all_docs?include_docs=true"));case 4:return n=e.sent,e.abrupt("return",n.rows.filter(function(e){return 0!==e.id.indexOf("_design")&&e.doc}).map(function(e){return e.doc}));case 8:if(e.prev=8,e.t0=e.catch(1),!(e.t0&&e.t0.response&&e.t0.response.status&&404===e.t0.response.status)){e.next=14;break}return e.abrupt("return",[]);case 14:return e.abrupt("return",[]);case 15:case"end":return e.stop()}},e,this,[[1,8]])})),function(){return V.apply(this,arguments)})},{key:"updateAll",value:(H=(0,u.default)(s.default.mark(function e(t){var n,r,a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.usesCozyClient()?this.cozyClient.stackClient:this.cozyClient,!(!t||!t.length)){e.next=3;break}return e.abrupt("return",Promise.resolve([]));case 3:return e.prev=3,e.next=6,n.fetchJSON("POST","/data/".concat(this.doctype,"/_bulk_docs"),{docs:t});case 6:return r=e.sent,e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(3),!(e.t0.reason&&e.t0.reason.reason&&"Database does not exist."==e.t0.reason.reason)){e.next=23;break}return e.next=15,this.create(t[0]);case 15:return a=e.sent,e.next=18,this.updateAll(t.slice(1));case 18:return(i=e.sent).unshift({ok:!0,id:a._id,rev:a._rev}),e.abrupt("return",i);case 23:throw e.t0;case 24:case"end":return e.stop()}},e,this,[[3,10]])})),function(e){return H.apply(this,arguments)})},{key:"deleteAll",value:(W=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.updateAll(t.map(Z)));case 1:case"end":return e.stop()}},e,this)})),function(e){return W.apply(this,arguments)})},{key:"findDuplicates",value:function(e){var t=this.idAttributes;return w(_(O(e,function(e){return t.map(function(t){return x(e,t)}).join("#$$$$#")}),function(e){return e.length>1}),function(e){return e.slice(1)})}},{key:"deleteDuplicates",value:(q=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAll();case 2:return n=e.sent,t&&(n=R(n,t)),r=this.findDuplicates(n),e.abrupt("return",this.deleteAll(r));case 6:case"end":return e.stop()}},e,this)})),function(e){return q.apply(this,arguments)})},{key:"fetchChanges",value:(G=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,o,c,u=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=this.usesCozyClient()?this.cozyClient.stackClient:this.cozyClient,a={since:t,include_docs:"true"},n.params&&Object.assign(a,n.params),e.next=6,r.fetchJSON("GET","/data/".concat(this.doctype,"/_changes?").concat(b.stringify(a)));case 6:return o=(i=e.sent).last_seq,c=i.results.map(function(e){return e.doc}).filter(Boolean),!n.includeDesign&&(c=c.filter(function(e){return 0!==e._id.indexOf("_design")})),!n.includeDeleted&&(c=c.filter(function(e){return!e._deleted})),e.abrupt("return",{newLastSeq:o,documents:c});case 12:case"end":return e.stop()}},e,this)})),function(e){return G.apply(this,arguments)})},{key:"queryAll",value:(K=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.usesCozyClient()){e.next=2;break}return e.abrupt("return",this.queryAllViaNewClient(t));case 2:return e.abrupt("return",this.queryAllViaOldClient(t,n));case 3:case"end":return e.stop()}},e,this)})),function(e,t){return K.apply(this,arguments)})},{key:"queryAllViaNewClient",value:(Q=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",this.fetchAll());case 2:return n=void 0!==M?M(this.doctype).where(t):this.cozyClient.find(this.doctype).where(t),e.next=5,this.cozyClient.query(n);case 5:a=(r=e.sent).data;case 7:if(!(r&&r.next)){e.next=20;break}if(!(r.bookmark&&n.offsetBookmark)){e.next=14;break}return e.next=11,this.cozyClient.query(n.offsetBookmark(r.bookmark));case 11:r=e.sent,e.next=17;break;case 14:return e.next=16,this.cozyClient.query(n.offset(a.length));case 16:r=e.sent;case 17:a.push.apply(a,(0,i.default)(r.data)),e.next=7;break;case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}},e,this)})),function(e){return Q.apply(this,arguments)})},{key:"queryAllViaOldClient",value:(Y=(0,u.default)(s.default.mark(function e(t,n){var r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,this.fetchAll();case 3:return e.abrupt("return",e.sent);case 4:if(r=n){e.next=9;break}return e.next=8,this.cozyClient.data.defineIndex(this.doctype,Object.keys(t));case 8:r=e.sent;case 9:a=[],o={next:!0};case 11:if(!(o&&o.next)){e.next=18;break}return e.next=14,this.cozyClient.data.query(r,{selector:t,wholeResponse:!0,skip:a.length});case 14:o=e.sent,a.push.apply(a,(0,i.default)(o.docs)),e.next=11;break;case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}},e,this)})),function(e,t){return Y.apply(this,arguments)})},{key:"getAll",value:(J=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.usesCozyClient()?this.cozyClient.stackClient:this.cozyClient,e.prev=1,e.next=4,n.fetchJSON("POST","/data/".concat(this.doctype,"/_all_docs?include_docs=true"),{keys:t});case 4:r=e.sent,e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(1),!e.t0.message.match(/not_found/)){e.next=11;break}return e.abrupt("return",[]);case 11:throw e.t0;case 12:return a=r.rows.filter(function(e){return e.doc}),e.abrupt("return",a.map(function(e){return e.doc}));case 14:case"end":return e.stop()}},e,this,[[1,7]])})),function(e){return J.apply(this,arguments)})}]),$}();U.defaultDuplicateHandling="throw",U.duplicateHandlingStrategies={throw:function(e,t){throw Error("Create or update with selectors that returns more than 1 result\n"+JSON.stringify(t)+"\n"+JSON.stringify(e))},remove:(r=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.slice(1)).length>0)){e.next=5;break}return T("warn","Cleaning duplicates for doctype ".concat(this.doctype," (kept: ").concat(t[0]._id,", removed: ").concat(n.map(function(e){return e._id}),")")),e.next=5,this.deleteAll(n);case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},e.exports=U},41472:function(e,t,n){"use strict";var r=n(95318),a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(2205)),u=r(n(78585)),l=r(n(29754)),d=n(10691),f=n(38215),p=/(.+)(\..*)$/,h=function(e){(0,c.default)(g,e);var t,n,r,f,h,v,m,y=(t=g,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);return e=n?Reflect.construct(r,arguments,(0,l.default)(this).constructor):r.apply(this,arguments),(0,u.default)(this,e)});function g(){return(0,o.default)(this,g),y.apply(this,arguments)}return(0,s.default)(g,null,[{key:"getFullpath",value:(r=(0,i.default)(a.default.mark(function e(t,n){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("You must provide a dirId");case 2:return e.next=4,this.get(t);case 4:return r=d(e.sent.path,"/"),e.abrupt("return","".concat(r,"/").concat(n));case 7:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"move",value:(f=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s,c,u,l,d,f,p=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],i=n.folderId,o=n.path,s=this.cozyClient.collection("io.cozy.files"),e.prev=3,e.next=6,s.updateFileMetadata(t,{dir_id:i});case 6:return c=e.sent,e.abrupt("return",{moved:c.data,deleted:null});case 10:if(e.prev=10,e.t0=e.catch(3),!(409===e.t0.status&&r)){e.next=35;break}if(!o){e.next=17;break}u=o,e.next=24;break;case 17:return e.next=19,this.get(t);case 19:return l=e.sent.name,e.next=23,this.getFullpath(i,l);case 23:u=e.sent;case 24:return e.next=26,s.statByPath(u);case 26:return d=e.sent,e.next=29,s.destroy(d.data);case 29:return e.next=31,s.updateFileMetadata(t,{dir_id:i});case 31:return f=e.sent,e.abrupt("return",{moved:f.data,deleted:d.data.id});case 35:throw e.t0;case 36:case"end":return e.stop()}},e,this,[[3,10]])})),function(e,t){return f.apply(this,arguments)})},{key:"splitFilename",value:function(e){if(!e.name)throw Error("file should have a name property ");if("file"===e.type){var t=e.name.match(p);if(t)return{filename:t[1],extension:t[2]}}return{filename:e.name,extension:""}}},{key:"overrideFileForPath",value:(h=(0,i.default)(a.default.mark(function e(t,n,r){var i,o,s,c,u,l,d,f;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return!(i=t).endsWith("/")&&(i+="/"),o=this.cozyClient.collection("io.cozy.files"),e.prev=3,e.next=6,o.statByPath(i+n.name);case 6:return c=(s=e.sent.data).id,u=s.dir_id,e.next=10,o.updateFile(n,{dirId:u,fileId:c,metadata:r});case 10:return l=e.sent,e.abrupt("return",l);case 14:if(e.prev=14,e.t0=e.catch(3),!/Not Found/.test(e.t0)){e.next=24;break}return e.next=19,o.ensureDirectoryExists(i);case 19:return d=e.sent,e.next=22,o.createFile(n,{dirId:d,metadata:r});case 22:return f=e.sent,e.abrupt("return",f);case 24:throw e.t0;case 25:case"end":return e.stop()}},e,this,[[3,14]])})),function(e,t,n){return h.apply(this,arguments)})},{key:"generateNewFileNameOnConflict",value:function(e){var t=e.match(/(_)([0-9]+)$/);if(!t)return"".concat(e,"_1");var n=parseInt(t[2]);return n++,e.replace(/(_)([0-9]+)$/,"_".concat(n))}},{key:"generateFileNameForRevision",value:function(e,t,n){var r=g.splitFilename({name:e.name,type:"file"}),a=r.filename,i=r.extension;return"".concat(a,"_").concat(n(t.updated_at,"DD MMMM - HH[h]mm")).concat(i)}},{key:"uploadFileWithConflictStrategy",value:(v=(0,i.default)(a.default.mark(function e(t,n,r,i,o,s){var c,u,l,d,f,p,h,v;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=this.cozyClient.collection("io.cozy.files"),e.prev=1,e.next=4,g.getFullpath(r,t);case 4:return u=e.sent,e.next=7,c.statByPath(u);case 7:if(l=e.sent.data.id,"erase"!==i){e.next=16;break}return e.next=12,c.updateFile(n,{dirId:r,fileId:l,name:t,metadata:o,contentType:s});case 12:return d=e.sent,e.abrupt("return",d);case 16:return p=(f=g.splitFilename({name:t,type:"file"})).filename,h=f.extension,v=g.generateNewFileNameOnConflict(p)+h,e.abrupt("return",g.uploadFileWithConflictStrategy(v,n,r,i,o,s));case 19:e.next=28;break;case 21:if(e.prev=21,e.t0=e.catch(1),!/Not Found/.test(e.t0.message)){e.next=27;break}return e.next=26,g.upload(t,n,r,o,s);case 26:return e.abrupt("return",e.sent);case 27:throw e.t0;case 28:case"end":return e.stop()}},e,this,[[1,21]])})),function(e,t,n,r,a,i){return v.apply(this,arguments)})},{key:"upload",value:(m=(0,i.default)(a.default.mark(function e(t,n,r,i){var o,s=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:"image/jpeg",e.abrupt("return",this.cozyClient.collection("io.cozy.files").createFile(n,{name:t,dirId:r,contentType:o,lastModifiedDate:new Date,metadata:i}));case 2:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return m.apply(this,arguments)})}]),g}(f);h.doctype="io.cozy.files",e.exports=h},71014:function(e,t,n){"use strict";var r=n(95318),a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(2205)),u=r(n(78585)),l=r(n(29754)),d=n(71450).Q,f=n(94867),p=n(41472),h=function(e){(0,c.default)(g,e);var t,n,r,h,v,m,y=(t=g,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);return e=n?Reflect.construct(r,arguments,(0,l.default)(this).constructor):r.apply(this,arguments),(0,u.default)(this,e)});function g(){return(0,o.default)(this,g),y.apply(this,arguments)}return(0,s.default)(g,null,[{key:"createFolderWithReference",value:(r=(0,i.default)(a.default.mark(function e(t,n){var r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.cozyClient.collection(p.doctype),e.next=3,r.ensureDirectoryExists(t);case 3:return i=e.sent,e.next=6,r.addReferencesTo(n,[{_id:i}]);case 6:return e.next=8,this.cozyClient.query(d(p.doctype).getById(i));case 8:return o=e.sent.data,e.abrupt("return",o);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"ensureMagicFolder",value:(h=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={_type:f.doctype,_id:t},e.next=3,this.getReferencedFolders(r);case 3:if(!(o=(i=e.sent).length?i[0]:null)){e.next=7;break}return e.abrupt("return",o);case 7:if((s=Object.values(this.magicFolders)).includes(t)){e.next=10;break}throw Error("Cannot create Magic folder with id ".concat(t,". Allowed values are ").concat(s.join(", "),"."));case 10:if(n){e.next=12;break}throw Error("Magic folder default path must be defined");case 12:return e.abrupt("return",this.createFolderWithReference(n,r));case 13:case"end":return e.stop()}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"getReferencedFolders",value:(v=(0,i.default)(a.default.mark(function e(t){var n,r=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cozyClient.collection(p.doctype).findReferencedBy(t);case 2:return n=e.sent.included,e.abrupt("return",n.filter(function(e){return!r.isTrashed(e)}));case 5:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"ensureFolderWithReference",value:(m=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getReferencedFolders(n);case 2:if(!(r=e.sent).length){e.next=5;break}return e.abrupt("return",r[0]);case 5:return i=this.cozyClient.collection(p.doctype),e.next=8,i.ensureDirectoryExists(t);case 8:return o=e.sent,e.next=11,i.addReferencesTo(n,[{_id:o}]);case 11:return e.next=13,i.get(o);case 13:return s=e.sent.data,e.abrupt("return",s);case 16:case"end":return e.stop()}},e,this)})),function(e,t){return m.apply(this,arguments)})},{key:"isTrashed",value:function(e){return/^\/\.cozy_trash/.test(e.attributes.path)}}]),g}(p);h.magicFolders={ADMINISTRATIVE:"".concat(f.doctype,"/administrative"),PHOTOS:"".concat(f.doctype,"/photos"),PHOTOS_BACKUP:"".concat(f.doctype,"/photos/mobile"),PHOTOS_UPLOAD:"".concat(f.doctype,"/photos/upload"),NOTES_FOLDER:"".concat(f.doctype,"/notes")},e.exports=h},44102:function(e,t,n){"use strict";var r=n(95318),a=r(n(93913)),i=r(n(34575)),o=r(n(2205)),s=r(n(78585)),c=r(n(29754)),u=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);return e=n?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function u(){return(0,i.default)(this,u),r.apply(this,arguments)}return(0,a.default)(u)}(n(38215));u.schema={doctype:"io.cozy.permissions",attributes:{}},e.exports=u},88061:function(e,t,n){"use strict";var r=n(95318),a=r(n(87757)),i=r(n(59713)),o=r(n(48926)),s=r(n(34575)),c=r(n(93913)),u=r(n(2205)),l=r(n(78585)),d=r(n(29754));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var p=n(85564),h=n(27361),v=n(38215),m=n(64497),y=function(e){(0,u.default)(y,e);var t,n,r,v=(t=y,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);return e=n?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function y(){return(0,s.default)(this,y),v.apply(this,arguments)}return(0,c.default)(y,null,[{key:"getPersonalData",value:function(e,t){var n={firstname:{path:"name.givenName"},lastname:{path:"name.familyName"},address:{getter:m.getPrimaryAddress},email:{getter:m.getPrimaryEmail},phone:{getter:m.getPrimaryPhone}},r={};return t.forEach(function(t){var a,i=h(n,t,t);if(i.getter)a=i.getter(e);else{var o=h(i,"path",t);a=h(e,o)}void 0!==a&&(r[t]=a)}),r}},{key:"getFilesByRules",value:(r=(0,o.default)(a.default.mark(function e(t){var n,r,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rules,r=t.count,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({trashed:!1,type:"file"},n),e.next=4,this.cozyClient.collection("io.cozy.files").createIndex(["metadata.datetime","metadata.qualification"]);case 4:return e.next=6,this.cozyClient.collection("io.cozy.files").find(o,{indexedFields:["metadata.datetime","metadata.qualification"],sort:[{"metadata.datetime":"desc"},{"metadata.qualification":"desc"}],limit:r||1});case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"create",value:function(e,t){var n=e.documentsData,r=e.personalData,a=e.procedureData,i=Object.keys(n).map(function(e){return n[e].files.map(function(t){if(t)return{_id:t.id,_type:"io.cozy.files",templateDocumentId:e}})});return{personalData:r,procedureData:a,submissionDate:new Date,templateId:t.type,templateVersion:t.version,relationships:{files:{data:p(i)}}}}},{key:"createJson",value:function(e){return JSON.stringify(e)}}]),y}(v);y.doctype="io.cozy.procedures.administratives",e.exports=y},90293:function(e,t,n){"use strict";var r=n(95318),a=r(n(87757)),i=r(n(63038)),o=r(n(48926)),s=r(n(34575)),c=r(n(93913)),u=r(n(2205)),l=r(n(78585)),d=r(n(29754)),f=n(27754),p=n(38215),h=function(e){(0,u.default)(v,e);var t,n,r,h=(t=v,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);return e=n?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function v(){return(0,s.default)(this,v),h.apply(this,arguments)}return(0,c.default)(v,null,[{key:"getByYearAndAccount",value:(r=(0,o.default)(a.default.mark(function e(t,n){var r,o,s,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getIndex(this.doctype,this.idAttributes);case 2:return r=e.sent,o={selector:{year:t,"relationships.account.data._id":n},limit:1},e.next=6,p.query(r,o);case 6:if(s=e.sent,!(c=(0,i.default)(s,1)[0])){e.next=11;break}return e.abrupt("return",c);case 11:return e.abrupt("return",this.getEmptyDocument(t,n));case 12:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"getEmptyDocument",value:function(e,t){return{year:e,balances:{},metadata:{version:this.version},relationships:{account:{data:{_id:t,_type:f.doctype}}}}}}]),v}(p);h.doctype="io.cozy.bank.balancehistories",h.idAttributes=["year","relationships.account.data._id"],h.version=1,h.checkAttributes=["balances"],e.exports=h},27754:function(e,t,n){"use strict";var r=n(95318),a=r(n(63038)),i=r(n(319)),o=r(n(59713)),s=r(n(34575)),c=r(n(93913)),u=r(n(2205)),l=r(n(78585)),d=r(n(29754));function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=n(27361),y=n(7739),g=n(24350),b=n(82492),w=n(89540).namespace("BankAccount"),k=n(48562),x=n(65986).getSlugFromInstitutionLabel,O=n(38215),C=function(e){var t,n,r;return null==e?void 0:null===(t=e.relationships)||void 0===t?void 0:null===(n=t.connection)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r._id},S=function(e){(0,u.default)(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);return e=n?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function o(){return(0,s.default)(this,o),r.apply(this,arguments)}return(0,c.default)(o,null,[{key:"reconciliate",value:function(e,t){var n=k.matchAccounts(e,t);return(n=o.addForcedReplaceMatchings(n,t)).map(function(e){w("info",e.match?"".concat(e.account.label," matched with ").concat(e.match.label," via ").concat(e.method):"".concat(e.account.label," did not match with an existing account")),e.forcedReplace&&w("info","".concat(e.account.label," forced disabled state"));var t=e.match?e.match._id:void 0,n=e.forcedReplace?e.account._id:void 0;return v(v({},e.account),{},{relationships:b({},e.match?e.match.relationships:null,e.account.relationships),_id:n||t})})}},{key:"addForcedReplaceMatchings",value:function(e,t){var n=o.findReplacedCozyAccountIdsMatchings(e);if(!Object.keys(n).length>0)return e;var r=(0,i.default)(e),a=g(r,"match._id"),s,c=f(t);try{for(c.s();!(s=c.n()).done;){var u,l=s.value;if(null==C(l)||a[l._id])continue;var d=n[C(l)];if(null!=d)r.push({forcedReplace:!0,account:v(v({},l),{},{metadata:b({},l.metadata,{disabledAt:null===(u=l.metadata)||void 0===u?void 0:u.updatedAt}),relationships:b({},l.relationships,{connection:{data:{_id:d}}})})})}}catch(e){c.e(e)}finally{c.f()}return r}},{key:"findReplacedCozyAccountIdsMatchings",value:function(e){var t={},n,r=f(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.match&&C(null==a?void 0:a.account)!==C(null==a?void 0:a.match)&&(t[C(null==a?void 0:a.match)]=C(null==a?void 0:a.account))}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"findDuplicateAccountsWithNoOperations",value:function(e,t){var n=y(t,function(e){return e.account}),r=Object.entries(y(e,function(e){return e.institutionLabel+" > "+e.label})).map(function(e){return(0,a.default)(e,2)[1]}).filter(function(e){return e.length>1}),i=[],o,s=f(r);try{for(s.s();!(o=s.n()).done;){var c,u=o.value,l=f(u);try{for(l.s();!(c=l.n()).done;){var d=c.value,p=n[d._id]||[];0===p.length&&i.push(d)}}catch(e){l.e(e)}finally{l.f()}}}catch(e){s.e(e)}finally{s.f()}return i}},{key:"hasIncoherentCreatedByApp",value:function(e){var t=x(e.institutionLabel),n=e.cozyMetadata&&e.cozyMetadata.createdByApp;return!!(t&&n&&t!==n)}},{key:"getUpdatedAt",value:function(e){var t=m(e,"metadata.updatedAt");if(t)return t;var n=m(e,"cozyMetadata.updatedAt");return n?n:null}}]),o}(O);S.normalizeAccountNumber=k.normalizeAccountNumber,S.doctype="io.cozy.bank.accounts",S.idAttributes=["_id"],S.version=1,S.checkAttributes=null,S.vendorIdAttr="vendorId",e.exports=S},42783:function(e,t,n){"use strict";var r=n(95318),a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(78585)),c=r(n(29754));function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=n(73303),d=function(e){(0,o.default)(d,e);var t,n,r=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);return e=n?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function d(){return(0,a.default)(this,d),r.apply(this,arguments)}return(0,i.default)(d,null,[{key:"checkCurrencies",value:function(e){var t=e[0].currency,n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(e);try{for(r.s();!(n=r.n()).done;)if(n.value.currency!==t)return!1}catch(e){r.e(e)}finally{r.f()}return!0}},{key:"sum",value:function(e){if(0===e.length)throw Error("You must give at least one stats object");if(!this.checkCurrencies(e))throw Error("Currency of all stats object must be the same.");var t=["income","additionalIncome","mortgage","loans","fixedCharges"].reduce(function(t,n){return t[n]=l(e,function(e){return e[n]||0}),t},{});return t.currency=e[0].currency,t}}]),d}(n(38215));d.doctype="io.cozy.bank.accounts.stats",d.idAttributes=["_id"],d.version=1,d.checkAttributes=null,e.exports=d},91443:function(e,t,n){"use strict";var r=n(95318),a=r(n(87757)),i=r(n(59713)),o=r(n(319)),s=r(n(48926)),c=r(n(34575)),u=r(n(93913)),l=r(n(16525)),d=r(n(2205)),f=r(n(78585)),p=r(n(29754));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var v=n(40317),m=n(8214),y=n(50361),g=n(7739),b=n(24350),w=n(84753),k=n(71400).default,x=n(27754),O=n(39469).matchTransactions,C=n(38215),S=n(49720),E=function(e,t){var n=w(e,t);return n?t(n):null},P=function(e){return(e.realisationDate||e.date).slice(0,10)},_=function(e){var t=new Date;return E(e.filter(function(e){return!m(P(e),t)}),P)},A=function(e){return e instanceof Date?e.toISOString():e},R=function(e){(0,d.default)(M,e);var t,n,r,w,R,D=(t=M,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,p.default)(t);return e=n?Reflect.construct(r,arguments,(0,p.default)(this).constructor):r.apply(this,arguments),(0,f.default)(this,e)});function M(){return(0,c.default)(this,M),D.apply(this,arguments)}return(0,u.default)(M,[{key:"isAfter",value:function(e){if(!e)return!0;var t=A(this.date).slice(0,10);return"NaN"!==t?t>e:(S("warn","transaction date could not be parsed. transaction: "+JSON.stringify(this)),!1)}},{key:"isBeforeOrSame",value:function(e){if(!e)return!0;var t=A(this.date).slice(0,10);return"NaN"!==t?t<=e:(S("warn","transaction date could not be parsed. transaction: "+JSON.stringify(this)),!1)}},{key:"getIdentifier",value:function(){return"".concat(this.amount,"-").concat(this.originalBankLabel,"-").concat(this.date)}},{key:"getVendorAccountId",value:function(){return this[this.constructor.vendorAccountIdAttr]}}],[{key:"deleteAll",value:(r=(0,s.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k("banking.warn-on-delete")&&S("warn","OPERATION_DELETE: removing operations with _id : ".concat(JSON.stringify(t.map(function(e){return e._id})))),e.abrupt("return",(0,l.default)((0,p.default)(M),"deleteAll",this).call(this,t));case 2:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"getDate",value:function(e){return e}},{key:"getMissedTransactions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=v(E(t,P),-7),a=Array.from(O(e.filter(function(e){return m(P(e),r)}),t)).filter(function(e){return!e.match}).map(function(e){return e.transaction}),i=n.trackEvent;if("function"==typeof i)try{var o=a.length,s=t.length;i({e_a:"ReconciliateMissing",e_n:"MissedTransactionPct",e_v:parseFloat((o/s).toFixed(2),10)}),i({e_a:"ReconciliateMissing",e_n:"MissedTransactionAbs",e_v:o})}catch(e){S("warn","Could not send MissedTransaction event: ".concat(e.message))}return a}},{key:"reconciliate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=y(n);!1!==r.useSplitDate&&(r.useSplitDate=!0);var a=g(e,function(e){var n;return(n=e,t.find(function(e){return e.vendorId===n.vendorId}))?"updatedTransactions":"newTransactions"}),i=a.newTransactions||[],s=a.updatedTransactions||[],c=!!r.useSplitDate&&_(t);if(c){"function"==typeof r.trackEvent&&r.trackEvent({e_a:"ReconciliateSplitDate"});var u=i.filter(function(e){return M.prototype.isAfter.call(e,c)});u.length>0?S("info","Found ".concat(u.length," transactions after ").concat(c)):S("info","No transaction after ".concat(c));var l=i.filter(function(e){return M.prototype.isBeforeOrSame.call(e,c)});S("info","Found ".concat(l.length," transactions before ").concat(c));var d=M.getMissedTransactions(l,t,r);d.length>0?S("info","Found ".concat(d.length," missed transactions before ").concat(c)):S("info","No missed transactions before ".concat(c)),i=[].concat((0,o.default)(u),(0,o.default)(d))}else S("info","Can't find a split date, saving all new transactions");return S("info","Transaction reconciliation: new ".concat(i.length,", updated ").concat(s.length,", split date ").concat(c," ")),[].concat(i).concat(s)}},{key:"getMostRecentForAccounts",value:(w=(0,s.default)(a.default.mark(function e(t){var n,r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S("debug","Transaction.getLast"),e.next=4,C.getIndex(this.doctype,["date","account"]);case 4:return n=e.sent,r={selector:{date:{$gte:null},account:{$in:t}},sort:[{date:"desc"}]},e.next=8,C.query(n,r);case 8:return S("info","last transactions length: "+(i=e.sent).length),e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(0),S("error",e.t0),e.abrupt("return",[]);case 17:case"end":return e.stop()}},e,this,[[0,13]])})),function(e){return w.apply(this,arguments)})},{key:"deleteOrphans",value:(R=(0,s.default)(a.default.mark(function e(){var t,n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S("info","Deleting up orphan operations"),e.t0=b,e.next=4,x.fetchAll();case 4:return e.t1=e.sent,t=(0,e.t0)(e.t1,"_id"),e.next=8,this.fetchAll();case 8:if(r=(n=e.sent).filter(function(e){return!t[e.account]}),S("info","Total number of operations: ".concat(n.length)),S("info","Total number of orphan operations: ".concat(r.length)),S("info","Deleting ".concat(r.length," orphan operations...")),!(r.length>0)){e.next=16;break}return S(k("banking.warn-on-delete")?"warn":"info","OPERATION_DELETE: removing ".concat(r.length," orphan operations")),e.abrupt("return",this.deleteAll(r));case 16:case"end":return e.stop()}},e,this)})),function(){return R.apply(this,arguments)})},{key:"getCategoryId",value:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({localModelOverride:!1,localModelUsageThreshold:this.LOCAL_MODEL_USAGE_THRESHOLD,globalModelUsageThreshold:this.GLOBAL_MODEL_USAGE_THRESHOLD},t);return e.manualCategoryId?e.manualCategoryId:n.localModelOverride&&e.localCategoryId&&e.localCategoryProba&&e.localCategoryProba>n.localModelUsageThreshold?e.localCategoryId:e.cozyCategoryId&&e.cozyCategoryProba&&e.cozyCategoryProba>n.globalModelUsageThreshold?e.cozyCategoryId:e.localCategoryId||e.cozyCategoryId?e.automaticCategoryId:null}}]),M}(C);R.doctype="io.cozy.bank.operations",R.version=1,R.vendorAccountIdAttr="vendorAccountId",R.vendorIdAttr="vendorId",R.idAttributes=["vendorId"],R.checkAttributes=["label","originalBankLabel","automaticCategoryId","account"],R.LOCAL_MODEL_USAGE_THRESHOLD=.8,R.GLOBAL_MODEL_USAGE_THRESHOLD=.15,R.getSplitDate=_,e.exports=R},23553:function(e,t,n){"use strict";var r=n(95318),a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=n(17204),u=n(89540).namespace("BankingReconciliator"),l=function(){var e,t;function n(e){(0,o.default)(this,n),this.options=e}return(0,s.default)(n,[{key:"saveAccounts",value:(e=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.options.BankAccount,e.next=3,r.fetchAll();case 3:return i=e.sent,o=r.reconciliate(t,i),u("info","Saving accounts..."),e.next=8,r.bulkSave(o,{handleDuplicates:"remove"});case 8:return s=e.sent,n.onAccountsSaved&&n.onAccountsSaved(s),e.abrupt("return",{savedAccounts:s,reconciliatedAccounts:o});case 11:case"end":return e.stop()}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"save",value:(t=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,s,l,d,f,p,h,v,m,y,g,b,w=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.length>2&&void 0!==w[2]?w[2]:{},o=(i=this.options).BankAccount,s=i.BankTransaction,e.next=4,this.saveAccounts(t,r);case 4:return d=(l=e.sent).reconciliatedAccounts,p=c((f=l.savedAccounts).map(function(e){return[e[o.vendorIdAttr],e._id]})),u("info","Linking transactions to accounts..."),u("info",JSON.stringify(p)),n.forEach(function(e){if(e.account=p[e[s.vendorAccountIdAttr]],void 0===e.account)throw u("warn","Transaction without account, vendorAccountIdAttr: ".concat(s.vendorAccountIdAttr)),u("warn","transaction: "+JSON.stringify(e)),Error("Transaction without account.")}),h=new Set(d.filter(function(e){return e._id}).map(function(e){return e._id})),e.next=14,s.fetchAll();case 14:return v=e.sent.filter(function(e){return h.has(e.account)}),m=s.reconciliate(n,v,r),u("info","Saving transactions..."),y=1,g=function(e){u("debug","[bulkSave] ".concat(y++," Saving ").concat(e.date," ").concat(e.label))},e.next=21,s.bulkSave(m,{concurrency:30,logProgress:void 0!==r.logProgress?r.logProgress:g,handleDuplicates:"remove"});case 21:return b=e.sent,e.abrupt("return",{accounts:f,transactions:b});case 23:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})}]),n}();e.exports=l},76786:function(e){"use strict";e.exports={"American Express":"americanexpress","Ark\xe9a Banque Priv\xe9e":"arkea","AXA Banque":"axabanque102","Floa Bank":"banquecasino","Banque Populaire":"banquepopulaire",Milleis:"barclays136",BforBank:"bforbank97","BNP Paribas":"bnpparibas82",BoursoBank:"boursorama83",BRED:"bred","Caisse d'\xc9pargne Particuliers":"caissedepargne1","Carrefour Banque":"carrefour159",Cetelem:"cetelem",CIC:"cic63","Compte Nickel":"comptenickel168","Cr\xe9dit Agricole":"caatlantica3","Cr\xe9dit Coop\xe9ratif":"creditcooperatif148","Cr\xe9dit Maritime":"creditmaritime","Cr\xe9dit Mutuel":"cic45","Cr\xe9dit Mutuel de Bretagne":"cic45","Cr\xe9dit Mutuel du Sud Ouest":"cic45",Fortuneo:"fortuneo84","Hello bank!":"hellobank145","HSBC Continental Europe":"hsbc119","La Banque Postale":"labanquepostale44",LCL:"lcl-linxo","MAIF Vie":"maifviebank",Monabanq:"monabanq96","Soci\xe9t\xe9 G\xe9n\xe9rale":"societegenerale","Connecteur de test":"bankingconnectortest",Revolut:"revolut",N26:"n26",Oney:"oney","Banque BCP":"bcp","Banque Transatlantique":"transatlantique","Gan Assurances":"gan",Groupama:"groupama","MAAF Vie":"maafvie",PayPal:"paypal",Yomoni:"yomoni",WeSave:"wesave","Orange Bank":"orangebank","MAIF Socram Banque":"socram","Macif Espace Banque":"socrammacif","Natixis Inter\xe9pargne":"natixis",Amundi:"amundiee","Banque Europ\xe9enne Cr\xe9dit Mutuel":"becm",Afer:"afer","CIC \xc9pargne Salariale":"cicee","PSA Banque":"psa","Cr\xe9dit Agricole - Epargne Longue des Salari\xe9s":"caels",LinXea:"linxea","Louvre Banque Priv\xe9e":"bpe",Palatine:"palatine","Cr\xe9dit Mutuel \xc9pargne Salariale":"creditmutueles","Renault Bank":"zesto","assurancevie.com":"assuranceviecom","mes-placements.fr":"mesplacementsfr",Sharinbox:"sharinbox","Soci\xe9t\xe9 G\xe9n\xe9rale \xc9pargne Salariale":"esalia","Epsens \xc9pargne Salariale":"epsenses","Cr\xe9dit Foncier":"creditfoncier","Banque Fran\xe7aise Commerciale Oc\xe9an Indien":"bfcoi",MACSF:"macsf","Banque Chalus":"chalus",Epargnissimo:"epargnissimo","AXA \xc9pargne Salariale":"axaes",Sogeretraite:"sogeretraite","Banque Edmond de Rothschild":"edmondderothschild",Mutavie:"mutavie",Agipi:"agipi","Uptevia (ex CACEIS)":"ccso","Allianz Retraite Collective":"allianzretraitecollective","Banque Transatlantique \xe9pargne salariale":"transatlantiquees","Ageas ":"ageas",Manymore:"manymore",Altaprofits:"altaprofits","AXA \xc9pargne Retraite":"axaer","Banque Postale \xc9pargne Salariale":"banquepostaleee","BNP Paribas \xc9pargne & Retraite Entreprises (Personeo)":"bnpes",Generali:"generali","Groupama \xc9pargne Salariale":"groupamaes","Oddo - Banque Priv\xe9e":"oddo",Spirica:"spirica",SwissLife:"swisslife","Union Financi\xe8re de France":"unionfinancieredefrance",Nalo:"nalo",CCF:"ccf",Lydia:"lydia","Ma French Bank":"mafrenchbank","Allianz Banque":"allianzbanque"}},48562:function(e,t,n){"use strict";var r=n(95318),a=r(n(319)),i=r(n(59713));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=n(27361),d=n(89734),f=n(33074).eitherIncludes,p=n(65986).getSlugFromInstitutionLabel,h=function(e,t,n){var r=n.filter(function(n){return n[e]===t[e]});return 1===r.length?{match:r[0],method:e+"-exact"}:r.length>1?{matches:r,method:e+"-exact"}:null},v=/^(?:[A-Za-z]+)?-?([0-9]+)-?(?:[A-Za-z]+)?$/,m=/[x*]{4}[ -]?[x*]{4}[ -]?[x*]{4}[ -]?(\d{4})/,y=function(e,t){var n,r=t&&t.replace(/\s/g,""),a=e&&!e.match(m)?e.replace(/\s/g,""):e;if(r&&27==r.length)return r.substr(14,11);if(!a)return a;if(23==a.length)return a.substr(10,11);if(16==a.length)return a.substr(5,11);if(a.length>11&&(n=a.match(v)))return n[1];else return a},g=function(e,t){return t.number&&e.number&&(11===t.number.length||11===e.number.length)&&f(t.number,e.number)&&Math.min(t.number.length,e.number.length)>=4},b=function(e,t){if("CreditCard"!==e.type&&"CreditCard"!==t.type)return!1;for(var n,r,a=0,i=[e,t];a<i.length;a++){var o=i[a],s=o&&o.number&&o.number.match(m);s&&(n=o,r=s[1])}var c=n===e?t:e;return!!c&&!!c.number&&c.number.slice(-4)===r||!1},w=[{rule:function(e,t){var n=p(e.institutionLabel),r=p(t.institutionLabel);return!n||!r||n===r},bonus:0,malus:-1e3},{rule:g,bonus:50,malus:-50,name:"approx-number"},{rule:function(e,t){var n=e.number||String(e.id),r=t.number||String(t.id);return(!e.number||!t.number)&&f(n,r)},bonus:10,malus:-10,name:"no-number-attr"},{rule:function(e,t){return e.type===t.type},bonus:50,malus:0,name:"same-type"},{rule:b,bonus:150,malus:0,name:"credit-card-number"},{rule:function(e,t){return!!e.currency&&(t.rawNumber&&t.rawNumber.includes(e.currency)||t.label&&t.label.includes(e.currency)||t.originalBankLabel&&t.originalBankLabel.includes(e.currency))},bonus:50,malus:0,name:"currency"}],k=function(e,t){var n=[],r={account:t,methods:n},a=0,i,o=c(w);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.rule,l=s.bonus,d=s.malus,f=s.name,p=u(e,t);p&&l&&(a+=l),!p&&d&&(a+=d),f&&p&&n.push(f)}}catch(e){o.e(e)}finally{o.f()}return r.points=a,r},x=function(e){var t=y(e.number,e.iban);return s(s({},e),{},{rawNumber:e.number,number:t})},O=["iban","number"],C=function(e,t){return e&&e===t},S=function(e,t){var n,r=c(O);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(e[a]){var i=h(a,e,t);if(i&&i.match)return i}}}catch(e){r.e(e)}finally{r.f()}var o=t.find(function(t){return C(e.originalNumber,t.number)||C(e.number,t.originalNumber)});if(o)return{match:o,method:"originalNumber-exact"};var s=t.find(function(t){return(C(e.rawNumber,t.number)||C(e.number,t.rawNumber))&&t.type==e.type&&t.currency==e.currency});if(s)return{match:s,method:"rawNumber-exact-currency-type"};var u=d(t.map(function(t){return k(e,t)}),function(e){return-e.points}).filter(function(e){return e.points>0});if(u.length>0)return{match:u[0].account,method:u[0].methods.join("-")}};e.exports={matchAccounts:function(e,t){var n=e.map(x),r=(0,a.default)(t).map(x),i=[],o,u=c(n);try{for(u.s();!(o=u.n()).done;){var d=o.value,f=S(d,r);if(f){var p=r.indexOf(f.match);r.splice(p,1),(!l(d,"metadata.disabledAt")||!l(f,"metadata.disabledAt"))&&i.push(s({account:d},f))}else!l(d,"metadata.disabledAt")&&i.push({account:d})}}catch(e){u.e(e)}finally{u.f()}return i},normalizeAccountNumber:y,score:k,creditCardMatch:b,approxNumberMatch:g}},33074:function(e){"use strict";e.exports={eitherIncludes:function(e,t){return!!(e&&t&&(e.includes(t)||t.includes(e)))}}},39469:function(e,t,n){"use strict";var r,a=n(95318),i=a(n(319)),o=a(n(63038)),s=a(n(28655)),c=a(n(87757));function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=n(7739),f=n(89734),p=n(33074).eitherIncludes,h=function(e){return e.date.substr(0,10)},v=c.default.mark(function e(t,n){var r,a,i,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=u(Object.keys((r=t.map(function(e){return d(e,n)}))[0]).sort()),e.prev=2,o=c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.value,n=r.map(function(e){return e[t]||[]}),e.next=4,[t,n];case 4:case"end":return e.stop()}},e)}),a.s();case 5:if((i=a.n()).done){e.next=9;break}return e.delegateYield(o(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),a.e(e.t1);case 14:return e.prev=14,a.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[2,11,14,17]])}),m=function(e,t){var n=RegExp(String.raw(r||(r=(0,s.default)(["","{2,}"])),t),"gi");return e&&e.replace(n,t)},y=/\b[0-9X]+\b/gi,g=/\b\d{2}\/\d{2}\/\d{4}\b/g,b=function(e){return e&&e.replace(y,"")},w=function(e){return e&&e.replace(g,"")},k=function(e){return e&&e.replace(/\s/g,"").replace(/-/g,"")},x=function(e,t){if(m(t.originalBankLabel," ")===m(e.originalBankLabel," "))return[200,"originalBankLabel"];if(k(t.originalBankLabel)===k(e.originalBankLabel))return[120,"originalBankLabelCompacted"];if(w(t.originalBankLabel)===w(e.originalBankLabel))return[150,"originalBankLabelWithoutDate"];else if(t.label===e.label)return[100,"label"];else if(p(t.label.toLowerCase(),e.label.toLowerCase()))return[70,"eitherIncludes"];else if(p(b(t.label.toLowerCase()),b(e.label.toLowerCase())))return[50,"fuzzy-eitherIncludes"];else return[-1e3,"label-penalty"]},O=function(e,t){var n=new Date(e.date.substr(0,10)),r=new Date(t.date.substr(0,10)),a=Math.abs(r-n);return e.realisationDate?Math.min(a,Math.abs(r-new Date(e.realisationDate.substr(0,10)))):a},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],a={op:t,methods:r};if(n.maxDateDelta){if(O(e,t)>n.maxDateDelta)return a.points=-1e3,a;r.push("approx-date")}var i=x(e,t),s=(0,o.default)(i,2),c=s[0],u=s[1];r.push(u);var l=0===Math.abs(t.amount-e.amount)?r.push("amount")&&100:-1e3;return a.points=l+c,a},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.find(function(t){return t.vendorId&&e.vendorId&&t.vendorId===e.vendorId});if(r)return{match:r,method:"vendorId"};var a=f(t.map(function(t){return C(e,t,n)}),function(e){return-e.points}).filter(function(e){return e.points>0});return a.length>0?{match:a[0].op,method:a[0].methods.join("-")}:{candidates:a}},E=c.default.mark(function e(t,n){var r,a,o,s,l,d,f,p,h=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=h.length>2&&void 0!==h[2]?h[2]:{},a=Array.isArray(n)?(0,i.default)(n):[],o=u(t),e.prev=3,o.s();case 5:if((s=o.n()).done){e.next=14;break}return d={transaction:l=s.value},(f=a.length>0?S(l,a,r):null)&&(Object.assign(d,f),(p=a.indexOf(f.match))>-1&&a.splice(p,1)),e.next=12,d;case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),o.e(e.t0);case 19:return e.prev=19,o.f(),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[3,16,19,22]])}),P=c.default.mark(function e(t,n){var r,a,i,s,l,d,f,p,m,y,g,b,w,k,x,O,C,S;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=new Set(t),a=new Set(n),i=u(v([t,n],h)),e.prev=3,i.s();case 5:if((s=i.n()).done){e.next=29;break}(l=(0,o.default)(s.value,2))[0],p=(f=(0,o.default)(l[1],2))[0],m=u(E(p,f[1])),e.prev=8,m.s();case 10:if((y=m.n()).done){e.next=19;break}if(!(g=y.value).match){e.next=17;break}return a.delete(g.match),r.delete(g.transaction),e.next=17,g;case 17:e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),m.e(e.t0);case 24:return e.prev=24,m.f(),e.finish(24);case 27:e.next=5;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(3),i.e(e.t1);case 34:return e.prev=34,i.f(),e.finish(34);case 37:w=0,k=b=[3,4,5];case 39:if(!(w<k.length)){e.next=64;break}x=k[w],O=u(E(Array.from(r),Array.from(a),{maxDateDelta:864e5*x})),e.prev=42,O.s();case 44:if((C=O.n()).done){e.next=53;break}if((S=C.value).method&&(S.method+="-delta".concat(x)),S.match&&(a.delete(S.match),r.delete(S.transaction)),!(S.match||x===b[b.length-1])){e.next=51;break}return e.next=51,S;case 51:e.next=44;break;case 53:e.next=58;break;case 55:e.prev=55,e.t2=e.catch(42),O.e(e.t2);case 58:return e.prev=58,O.f(),e.finish(58);case 61:w++,e.next=39;break;case 64:case"end":return e.stop()}},e,null,[[3,31,34,37],[8,21,24,27],[42,55,58,61]])});e.exports={matchTransactions:P,scoreMatching:C}},65986:function(e,t,n){"use strict";var r=n(95318)(n(63038));function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=n(89540).namespace("slug-account"),o=Object.entries(n(76786)).map(function(e){var t=(0,r.default)(e,2),n=t[0],a=t[1];return"/"===n[0]&&"/"===n[n.length-1]?[RegExp(n.substr(1,n.length-2),"i"),a]:[n,a]});e.exports={getSlugFromInstitutionLabel:function(e){if(!e){i("warn","No institution label, cannot compute slug");return}var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{!s&&null!=n.return&&n.return()}finally{if(c)throw o}}}}(o);try{for(n.s();!(t=n.n()).done;){var s=(0,r.default)(t.value,2),c=s[0],u=s[1];if(c instanceof RegExp){if(e.match(c))return u}else if(c.toLowerCase()===e.toLowerCase())return u}}catch(e){n.e(e)}finally{n.f()}i("warn","Could not compute slug for ".concat(e))}}},64497:function(e,t,n){"use strict";var r=n(95318),a=r(n(34575)),i=r(n(93913)),o=r(n(2205)),s=r(n(78585)),c=r(n(29754)),u=n(27361),l=n(45697),d=n(38215),f=n(49720),p=function(e){return function(t){return t[e]&&0!==t[e].length?t[e].find(function(e){return e.primary})||t[e][0]:""}},h=function(e){return f("warn","".concat(e," from cozy-doctypes contact is deprecated, use cozy-client/models/contacts/").concat(e," instead"))},v=function(e){(0,o.default)(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);return e=n?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function l(){return(0,a.default)(this,l),r.apply(this,arguments)}return(0,i.default)(l,null,[{key:"isContact",value:function(e){return e._type===l.doctype}},{key:"getInitials",value:function(e){if(h("getInitials"),"string"==typeof e)return f("warn","Passing a string to Contact.getInitials will be deprecated soon."),e[0].toUpperCase();if(e.name)return["givenName","familyName"].map(function(t){return u(e,["name",t,0],"")}).join("").toUpperCase();var t=l.getPrimaryEmail(e);return t?t[0].toUpperCase():(f("warn","Contact has no name and no email."),"")}},{key:"getPrimaryEmail",value:function(e){return h("getPrimaryEmail"),Array.isArray(e.email)?p("email")(e).address:e.email}},{key:"getPrimaryCozy",value:function(e){return h("getPrimaryCozy"),Array.isArray(e.cozy)?p("cozy")(e).url:e.url}},{key:"getPrimaryPhone",value:function(e){return h("getPrimaryPhone"),p("phone")(e).number}},{key:"getPrimaryAddress",value:function(e){return h("getPrimaryAddress"),p("address")(e).formattedAddress}},{key:"getFullname",value:function(e){return(h("getFullname"),e.fullname)?e.fullname:e.name?["namePrefix","givenName","additionalName","familyName","nameSuffix"].map(function(t){return e.name[t]}).filter(function(e){return void 0!==e}).join(" ").trim():void 0}},{key:"getDisplayName",value:function(e){return h("getDisplayName"),l.getFullname(e)||l.getPrimaryEmail(e)}}]),l}(d),m=l.shape({_id:l.string.isRequired,_type:l.string.isRequired,fullname:l.string,name:l.shape({givenName:l.string,familyName:l.string,additionalName:l.string,namePrefix:l.string,nameSuffix:l.string}),birthday:l.string,note:l.string,email:l.arrayOf(l.shape({address:l.string.isRequired,label:l.string,type:l.string,primary:l.bool})),address:l.arrayOf(l.shape({street:l.string,pobox:l.string,city:l.string,region:l.string,postcode:l.string,country:l.string,type:l.string,primary:l.bool,label:l.string,formattedAddress:l.string})),phone:l.arrayOf(l.shape({number:l.string.isRequired,type:l.string,label:l.string,primary:l.bool})),cozy:l.arrayOf(l.shape({url:l.string.isRequired,label:l.string,primary:l.bool})),company:l.string,jobTitle:l.string,trashed:l.bool,me:l.bool,relationships:l.shape({accounts:l.shape({data:l.arrayOf(l.shape({_id:l.string.isRequired,_type:l.string.isRequired}))}),groups:l.shape({data:l.arrayOf(l.shape({_id:l.string.isRequired,_type:l.string.isRequired}))})})});v.doctype="io.cozy.contacts",v.propType=m,e.exports=v},18582:function(e,t,n){"use strict";var r=n(95318),a=r(n(93913)),i=r(n(34575)),o=r(n(2205)),s=r(n(78585)),c=r(n(29754)),u=n(45697),l=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);return e=n?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function u(){return(0,i.default)(this,u),r.apply(this,arguments)}return(0,a.default)(u)}(n(38215)),d=u.shape({_id:u.string.isRequired,_type:u.string.isRequired,name:u.string.isRequired,trashed:u.bool});l.doctype="io.cozy.contacts.groups",l.propType=d,e.exports=l},26969:function(e,t,n){"use strict";var r=n(97209),a=n(94867),i=n(38215),o=n(41472),s=n(71014),c=n(44102),u=n(88061),l=n(90293),d=n(27754),f=n(42783),p=n(91443),h=n(23553),v=n(64497),m=n(18582);e.exports={Account:r,AdministrativeProcedure:u,Application:a,Document:i,BalanceHistory:l,BankAccount:d,BankingReconciliator:h,BankTransaction:p,BankAccountStats:f,Contact:v,CozyFile:o,CozyFolder:s,Group:m,registerClient:i.registerClient,Permission:c}},49720:function(e,t,n){"use strict";var r=n(89540).namespace("doctypes");e.exports=r},79478:function(e,t,n){"use strict";var r=n(95318)(n(87757));function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=n(60321);e.exports={parallelMap:function(e,t,n){var o=[];return new i(r.default.mark(function n(){var i,s,c;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{!s&&null!=n.return&&n.return()}finally{if(c)throw o}}}}(e),n.prev=1,i.s();case 3:if((s=i.n()).done){n.next=9;break}return c=s.value,n.next=7,t(c).then(function(e){return o.push(e)});case 7:n.next=3;break;case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),i.e(n.t0);case 14:return n.prev=14,i.f(),n.finish(14);case 17:case"end":return n.stop()}},n,null,[[1,11,14,17]])}),n||30).start().then(function(){return o})}}},62955:function(e){e.exports=function(e){var t=new Date(e.getTime()),n=t.getTimezoneOffset();return t.setSeconds(0,0),6e4*n+t.getTime()%6e4}},40317:function(e,t,n){var r=n(63817);e.exports=function(e,t){var n=r(e),a=Number(t);return n.setDate(n.getDate()+a),n}},8214:function(e,t,n){var r=n(63817);e.exports=function(e,t){var n=r(e),a=r(t);return n.getTime()>a.getTime()}},44284:function(e){e.exports=function(e){return e instanceof Date}},63817:function(e,t,n){var r=n(62955),a=n(44284),i=/[T ]/,o=/:/,s=/^(\d{2})$/,c=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],u=/^(\d{4})/,l=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],d=/^-(\d{2})$/,f=/^-?(\d{3})$/,p=/^-?(\d{2})-?(\d{2})$/,h=/^-?W(\d{2})$/,v=/^-?W(\d{2})-?(\d{1})$/,m=/^(\d{2}([.,]\d*)?)$/,y=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,g=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,b=/([Z+-].*)$/,w=/^(Z)$/,k=/^([+-])(\d{2})$/,x=/^([+-])(\d{2}):?(\d{2})$/;function O(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var a=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+a),r}e.exports=function(e,t){if(a(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var n=(t||{}).additionalDigits;n=null==n?2:Number(n);var C=function(e){var t,n={},r=e.split(i);if(o.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1]),t){var a=b.exec(t);a?(n.time=t.replace(a[1],""),n.timezone=a[1]):n.time=t}return n}(e),S=function(e,t){var n,r=c[t],a=l[t];if(n=u.exec(e)||a.exec(e)){var i=n[1];return{year:parseInt(i,10),restDateString:e.slice(i.length)}}if(n=s.exec(e)||r.exec(e)){var o=n[1];return{year:100*parseInt(o,10),restDateString:e.slice(o.length)}}return{year:null}}(C.date,n),E=S.year,P=function(e,t){if(null===t)return null;if(0===e.length)return(r=new Date(0)).setUTCFullYear(t),r;if(n=d.exec(e))return r=new Date(0),a=parseInt(n[1],10)-1,r.setUTCFullYear(t,a),r;if(n=f.exec(e)){r=new Date(0);var n,r,a,i,o=parseInt(n[1],10);return r.setUTCFullYear(t,0,o),r}if(n=p.exec(e)){r=new Date(0),a=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return r.setUTCFullYear(t,a,s),r}return(n=h.exec(e))?O(t,i=parseInt(n[1],10)-1):(n=v.exec(e))?O(t,i=parseInt(n[1],10)-1,parseInt(n[2],10)-1):null}(S.restDateString,E);if(!P)return new Date(e);var _,A=P.getTime(),R=0;if(C.time&&(R=function(e){if(t=m.exec(e))return(n=parseFloat(t[1].replace(",",".")))%24*36e5;if(t=y.exec(e))return n=parseInt(t[1],10),n%24*36e5+6e4*(r=parseFloat(t[2].replace(",",".")));if(t=g.exec(e)){var t,n,r;return n=parseInt(t[1],10),n%24*36e5+6e4*(r=parseInt(t[2],10))+1e3*parseFloat(t[3].replace(",","."))}return null}(C.time)),C.timezone)_=6e4*function(e){var t,n;return(t=w.exec(e))?0:(t=k.exec(e))?(n=60*parseInt(t[2],10),"+"===t[1]?-n:n):(t=x.exec(e))?(n=60*parseInt(t[2],10)+parseInt(t[3],10),"+"===t[1]?-n:n):0}(C.timezone);else{var D=A+R,M=new Date(D);_=r(M);var T=new Date(D);T.setDate(M.getDate()+1);var j=r(T)-r(M);j>0&&(_+=j)}return new Date(A+R+_)}},94853:function(e){"use strict";var t=function(e){return Object.assign(this,e),this};t.prototype.toString=function(){throw Error("Cannot convert Secret to string")},e.exports=t},89540:function(e,t,n){"use strict";var r=n(34155);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=n(94853),o=n(38956),s=o.filterLevel,c=o.filterSecrets,u=r.env.LOG_LEVEL||"debug",l=n(67054),d=[s,c],f=function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{!s&&null!=n.return&&n.return()}finally{if(c)throw o}}}}(d);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!1===n.apply(null,arguments))return!0}}catch(e){t.e(e)}finally{t.f()}return!1};function p(e,t,n,r){if(!f(u,e,t,n,r))console.log(l(e,t,n,r))}p.addFilter=function(e){return d.push(e)},p.setLevel=function(e){u=e};["debug","info","warn","error","ok","critical"].forEach(function(e){p[e]=function(t,n,r){return p(e,t,n,r)}}),e.exports=p,p.setNoRetry=function(e){return e?e.no_retry=!0:e={no_retry:!0},e.no_retry},p.Secret=i,p.namespace=function(e){return function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;p(t,n,r,a)}}},38956:function(e,t,n){"use strict";var r={secret:0,debug:10,info:20,warn:30,error:40,ok:50,critical:50},a=n(94853);e.exports={filterSecrets:function(e,t,n){if("secret"!==t&&n instanceof a)throw Error("You should log a secret with log.secret")},filterLevel:function(e,t){return r[t]>=r[e]}}},67054:function(e,t,n){"use strict";var r=n(44027),a=n(44027);e.exports=a},44027:function(e,t,n){"use strict";var r=n(64530);e.exports=function(e,t,n,a){var i={time:new Date,type:e,label:n,namespace:a};"object"==typeof t?(t&&t.no_retry&&(i.no_retry=t.no_retry),t&&t.message&&(i.message=t.message)):i.message=t,i.message&&i.message.stack&&(i.message=i.message.stack);var o=i;try{o=r(i).substr(0,65535)}catch(e){console.log(e.message,"cozy-logger: Failed to convert message to JSON")}return o}},62831:function(e,t,n){"use strict";var r=n(35362),a=n(14453),i=n(71821),o=n(62554),s=n(40801),c=n(31062),u=n(49206),l=n(28263),d=n(42694),f=n(29981),p=r("String.prototype.split"),h=Object("a"),v="a"!==h[0]||!(0 in h);e.exports=function(e){var t,n=l(this),r=v&&f(this)?p(this,""):n,h=u(r);if(!c(e))throw new a("Array.prototype.forEach callback must be a function");arguments.length>1&&(t=arguments[1]);for(var m=0;m<h;){var y=d(m);s(r,y)&&i(e,t,[o(r,y),m,r]),m+=1}}},28554:function(e,t,n){"use strict";var r=n(4289),a=n(40498),i=n(35362),o=n(11781),s=n(62831),c=n(52750),u=c(),l=n(23495),d=i("Array.prototype.slice"),f=a.apply(u),p=function(e,t){return o(e),f(e,d(arguments,1))};r(p,{getPolyfill:c,implementation:s,shim:l}),e.exports=p},52750:function(e,t,n){"use strict";var r=n(72868),a=n(62831);e.exports=function(){var e=Array.prototype.forEach;return r(e)?e:a}},23495:function(e,t,n){"use strict";var r=n(4289),a=n(52750);e.exports=function(){var e=a();return r(Array.prototype,{forEach:e},{forEach:function(){return Array.prototype.forEach!==e}}),e}},35362:function(e,t,n){"use strict";var r=n(42124),a=n(40498),i=a(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&i(e,".prototype.")>-1?a(n):n}},40498:function(e,t,n){"use strict";var r=n(58612),a=n(42124),i=n(67771),o=n(14453),s=a("%Function.prototype.apply%"),c=a("%Function.prototype.call%"),u=a("%Reflect.apply%",!0)||r.call(c,s),l=n(24429),d=a("%Math.max%");e.exports=function(e){if("function"!=typeof e)throw new o("a function is required");var t=u(r,c,arguments);return i(t,1+d(0,e.length-(arguments.length-1)),!0)};var f=function(){return u(r,s,arguments)};l?l(e.exports,"apply",{value:f}):e.exports.apply=f},10871:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.start=function e(t,n,r,a){var d,f,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},h=function(){f&&u.remove(f),d&&d.stopListening()},v=function(){h()},m=new Promise(function(h,m){var y,g=(0,c.pickService)(n,p.filterServices);f=u.insertIntentIframe(n,r,g.href,p.onReadyCallback);var b=g.href.split("/",3).join("/");(d=new l.default({intentId:n.id,origin:b,onReady:function(e){e.source.postMessage(a,e.origin)},onDone:function(e){h(e.data.document),v()},onCancel:function(){h(null),v()},onError:function(e){m(e instanceof Event?c.errorSerializer.deserialize(e.data.error):e),v()},onResize:function(e){var t=e.data,n=t.transition,a=t.dimensions;u.applyStyle(r,(0,s.default)({transition:n},a))},onExposeFrameRemoval:function(e){h({document:e.document,removeIntentIframe:function(){return u.remove(f)}})},onCompose:(y=(0,o.default)(i.default.mark(function n(a){var o,c,l,d,p,h,v,m;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c=(o=a.data).action,l=o.doctype,d=o.data,p=a.source,h=a.origin,n.next=4,t(c,l,d);case 4:return v=n.sent,u.hide(f),n.prev=6,n.next=9,e(t,v,r,(0,s.default)({},d,{exposeIntentFrameRemoval:!1}));case 9:m=n.sent,p.postMessage(m,h);case 11:return n.prev=11,u.show(f),n.finish(11);case 14:case"end":return n.stop()}},n,null,[[6,,11,14]])})),function(e){return y.apply(this,arguments)})})).listen()});return m.destroy=h,m};var i=a(n(87757)),o=a(n(48926)),s=a(n(60693)),c=n(19001),u=r(n(2265)),l=a(n(72969))},2265:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hide=function(e){e.style.display="none"},t.show=function(e){e.style.display="block"},t.remove=function(e){if(!!e.parentNode)e.parentNode.removeChild(e)},t.iframeFromIntent=i,t.insertIntentIframe=function(e,t,n,r){a(t);var o=i(e,t,n);return"function"==typeof r&&(o.onload=r),t.appendChild(o),o.focus(),o},t.assertOKForIntentIframe=t.applyStyle=void 0;var n=function(e){return e+"px"},r={width:n,height:n,maxWidth:n,maxHeight:n};t.applyStyle=function(e,t){Object.keys(t).forEach(function(n){var a=t[n];e.style[n]="".concat(r[n]?r[n](a):a)})};var a=function(e){var t=e.ownerDocument;if(!t)throw console.warn("assertProperForIframe: bad node",e),Error("Cannot retrieve document object from given node");if(!t.defaultView)throw console.warn("assertProperForIframe: bad document",t),Error("Cannot retrieve window object from document")};function i(e,t,n){var r=t.ownerDocument;if(!r)throw Error("Cannot retrieve document object from given node");var a=r.createElement("iframe");return a.setAttribute("id","intent-".concat(e.id)),a.setAttribute("src",n),a.classList.add("coz-intent"),a}t.assertOKForIntentIframe=a},19001:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeQueryString=t.buildRedirectionURL=t.pickService=t.errorSerializer=void 0;var n,r=(n=function(e,t){var n=Object.assign(t,e);return["name","message"].reduce(function(n,r){return e[r]&&(t[r]=e[r]),n},n)},{serialize:function(e){return n(e,{})},deserialize:function(e){return n(e,Error(e.message))}});t.errorSerializer=r;t.pickService=function(e,t){var n=e.attributes.services||[],r=t?n.find(t):n[0];if(!r)throw Error("Unable to find a service");return r};t.buildRedirectionURL=function(e,t){var n=Object.keys(t).filter(function(e){return!["object","function"].includes(typeof t[e])}).map(function(e){return"".concat(e,"=").concat(t[e])});return n.length?"".concat(e,"?").concat(n.join("&")):e};t.removeQueryString=function(e){return e.replace(/\?[^/#]*/,"")}},69898:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"Intents",{enumerable:!0,get:function(){return i.default}});var i=a(n(11100))},11100:function(e,t,n){"use strict";var r=n(20862),a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(87757)),o=a(n(48926)),s=a(n(34575)),c=a(n(93913)),u=r(n(10871)),l=r(n(99673)),d=a(n(90224)),f=n(19001),p=function(){var e,t;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.client;(0,s.default)(this,n),this.request=new d.default(t),this.create=this.create.bind(this)}return(0,c.default)(n,[{key:"create",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e)throw Error('Misformed intent, "action" property must be provided');if(!t)throw Error('Misformed intent, "type" property must be provided');var i=this.request.post(e,t,r,a);return i.start=function(e,t){var a,o={filteredServices:r.filteredServices,onReadyCallback:t};delete r.filteredServices;var s=i.then(function(t){return a=u.start(n.create,t,e,r,o)});return s.stop=function(){a&&a.destroy()},s},i}},{key:"createService",value:function(e,t){return l.start(this.request)(e,t)}},{key:"getRedirectionURL",value:(e=(0,o.default)(i.default.mark(function e(t,n){var r,a,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t&&!n)){e.next=2;break}throw Error("Cannot retrieve redirection, at least type or doc must be provided");case 2:return e.next=4,this.create("REDIRECT",t,n);case 4:return r=e.sent,a=(0,f.pickService)(r),o=(0,f.removeQueryString)(a.href),e.abrupt("return",n?(0,f.buildRedirectionURL)(o,n):o);case 8:case"end":return e.stop()}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"redirect",value:(t=(0,o.default)(i.default.mark(function e(t,n,r){var a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window){e.next=2;break}throw Error("redirect() method can only be called in a browser");case 2:return e.next=4,this.getRedirectionURL(t,n);case 4:if(a=e.sent,!(r&&"function"==typeof r)){e.next=7;break}return e.abrupt("return",r(a));case 7:window.location.href=a;case 8:case"end":return e.stop()}},e,this)})),function(e,n,r){return t.apply(this,arguments)})}]),n}();t.default=p},72969:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=/intent-(.*):(.*)/,s=function(){function e(t){(0,a.default)(this,e),this.state={handshaken:!1},this.options=t,this.handleMessageWrapper=this.handleMessageWrapper.bind(this)}return(0,i.default)(e,[{key:"handleMessage",value:function(e){if(e.origin===this.options.origin){var t=e.data.type;if("load"===t){console.warn&&console.warn("Cozy Client ignored MessageEvent having data.type `load`.");return}var n=o.exec(t);if(!n){console.warn("intents: Message type ".concat(t," not matching intent format"));return}var r=n[1];c(r==this.options.intentId,"Invalid event id","eventId: ".concat(r," != listener eventId ").concat(this.options.intentId));var a=n[2];"ready"!==a?c(this.state.handshaken,"Unexpected handshake message from intent service"):this.state.handshaken=!0;var i=this.options["on"+u(a)];if(i)return i(e);console.warn("intents: Unhandled event ".concat(a))}}},{key:"handleMessageWrapper",value:function(e){try{this.handleMessage(e)}catch(e){this.options.onError(e)}}},{key:"listen",value:function(){window.addEventListener("message",this.handleMessageWrapper)}},{key:"stopListening",value:function(){window.removeEventListener("message",this.handleMessageWrapper)}}]),e}();t.default=s;var c=function(e,t,n){if(!e)throw n&&console.warn(n),Error(t)},u=function(e){return e[0].toUpperCase()+e.slice(1)}},90224:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=function(){function e(t){(0,a.default)(this,e),this.stackClient=t.stackClient}return(0,i.default)(e,[{key:"get",value:function(e){return this.stackClient.fetchJSON("GET","/intents/".concat(e)).then(function(e){var t=e.data;return!t._id&&(t._id=t.id),t})}},{key:"post",value:function(e,t,n,r){return this.stackClient.fetchJSON("POST","/intents",{data:{type:"io.cozy.intents",attributes:{action:e,type:t,data:n,permissions:r}}}).then(function(e){return e.data})}}]),e}();t.default=o},99673:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=void 0;var r=n(19001);function a(e){e&&e.style&&(e.style.height="100%")}t.start=function(e){return function(t,n){var i=n||"undefined"!=typeof window&&window;if(!i||!i.document)return Promise.reject(Error("Intent service should be used in browser"));i.addEventListener("load",function(){var e=i.document;[e.documentElement,e.body].forEach(a)});var o=t||i.location.search.split("=")[1];return o?e.get(o).then(function(e){var t,n,a=!1,o=function(t){if(a)throw Error("Intent service has already been terminated");i.parent.postMessage(t,e.attributes.client)},s=function(t,n,r){return new Promise(function(a){i.addEventListener("message",function t(n){if(n.origin===e.attributes.client)return i.removeEventListener("message",t),a(n.data)}),o({type:"intent-".concat(e._id,":compose"),action:t,doctype:n,data:r})})},c=function(e){o(e),a=!0},u=function(t,n){if(a)throw Error("Intent service has been terminated");o({type:"intent-".concat(e._id,":resize"),dimensions:t.element?Object.assign({},t,{maxHeight:t.element.clientHeight,maxWidth:t.element.clientWidth}):t,transition:n})},l=function(){c({type:"intent-".concat(e._id,":cancel")})};return i.addEventListener("unload",function(){!a&&l()}),(t=e,n=i,new Promise(function(e){n.addEventListener("message",function r(a){a.origin===t.attributes.client&&(n.removeEventListener("message",r),e(a.data))}),n.parent.postMessage({type:"intent-".concat(t._id,":ready")},t.attributes.client)})).then(function(t){return{compose:s,getData:function(){return t},getIntent:function(){return e},terminate:function(n){var r=t&&t.exposeIntentFrameRemoval?"exposeFrameRemoval":"done";return c({type:"intent-".concat(e._id,":").concat(r),document:n})},throw:function(t){return c({type:"intent-".concat(e._id,":error"),error:r.errorSerializer.serialize(t)})},resizeClient:u,cancel:l}})}):Promise.reject(Error("Cannot retrieve intent from URL"))}}},42124:function(e,t,n){"use strict";var r,a=n(81648),i=n(53981),o=n(24726),s=n(26712),c=n(33464),u=n(14453),l=n(43915),d=Function,f=function(e){try{return d('"use strict"; return ('+e+").constructor;")()}catch(e){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(e){p=null}var h=function(){throw new u},v=p?function(){try{return arguments.callee,h}catch(e){try{return p(arguments,"callee").get}catch(e){return h}}}():h,m=n(41405)(),y=n(52996)(),g=Object.getPrototypeOf||(y?function(e){return e.__proto__}:null),b={},w="undefined"!=typeof Uint8Array&&g?g(Uint8Array):r,k={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":m&&g?g([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":a,"%eval%":eval,"%EvalError%":i,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":d,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&g?g(g([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&m&&g?g(new Map()[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":o,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&m&&g?g(new Set()[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&g?g(""[Symbol.iterator]()):r,"%Symbol%":m?Symbol:r,"%SyntaxError%":c,"%ThrowTypeError%":v,"%TypedArray%":w,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(g)try{null.error}catch(e){var x=g(g(e));k["%Error.prototype%"]=x}var O=function e(t){var n;if("%AsyncFunction%"===t)n=f("async function () {}");else if("%GeneratorFunction%"===t)n=f("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=f("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&g&&(n=g(a.prototype))}return k[t]=n,n},C={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},S=n(58612),E=n(99676),P=S.call(Function.call,Array.prototype.concat),_=S.call(Function.apply,Array.prototype.splice),A=S.call(Function.call,String.prototype.replace),R=S.call(Function.call,String.prototype.slice),D=S.call(Function.call,RegExp.prototype.exec),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,j=function(e){var t=R(e,0,1),n=R(e,-1);if("%"===t&&"%"!==n)throw new c("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new c("invalid intrinsic syntax, expected opening `%`");var r=[];return A(e,M,function(e,t,n,a){r[r.length]=n?A(a,T,"$1"):t||e}),r},N=function(e,t){var n,r=e;if(E(C,r)&&(r="%"+(n=C[r])[0]+"%"),E(k,r)){var a=k[r];if(a===b&&(a=O(r)),void 0===a&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:a}}throw new c("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===D(/^%?[^%]*%?$/,e))throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=j(e),r=n.length>0?n[0]:"",a=N("%"+r+"%",t),i=a.name,o=a.value,s=!1,l=a.alias;l&&(r=l[0],_(n,P([0,1],l)));for(var d=1,f=!0;d<n.length;d+=1){var h=n[d],v=R(h,0,1),m=R(h,-1);if(('"'===v||"'"===v||"`"===v||'"'===m||"'"===m||"`"===m)&&v!==m)throw new c("property names with quotes must have matching quotes");if(("constructor"===h||!f)&&(s=!0),r+="."+h,E(k,i="%"+r+"%"))o=k[i];else if(null!=o){if(!(h in o)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(p&&d+1>=n.length){var y=p(o,h);o=(f=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:o[h]}else f=E(o,h),o=o[h];f&&!s&&(k[i]=o)}}return o}},52996:function(e){"use strict";var t={foo:{}},n=Object;e.exports=function(){return({__proto__:t}).foo===t.foo&&!(({__proto__:null})instanceof n)}},99676:function(e,t,n){"use strict";var r=Function.prototype.call,a=Object.prototype.hasOwnProperty,i=n(58612);e.exports=i.call(r,a)},58622:function(e,t,n){"use strict";var r,a=n(28554),i=n(23631),o=n(42473),s=n(17642),c=n(46057),u=function(e){o(!1,e)},l=String.prototype.replace,d=String.prototype.split,f="||||",p=function(e){var t=e%100,n=t%10;return 11!==t&&1===n?0:2<=n&&n<=4&&!(t>=12&&t<=14)?1:2},h={pluralTypes:{arabic:function(e){if(e<3)return e;var t=e%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:p,chinese:function(){return 0},croatian:p,french:function(e){return e>=2?1:0},german:function(e){return 1!==e?1:0},russian:p,lithuanian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0},slovenian:function(e){var t=e%100;return 1===t?0:2===t?1:3===t||4===t?2:3},romanian:function(e){if(1===e)return 0;var t=e%100;return 0===e||t>=2&&t<=19?1:2}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is","mk"],slovenian:["sl-SL"],romanian:["ro"]}};function v(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var m=(r={},function(e,t){var n,o,s,c,u,l=r[t];if(l&&!e.pluralTypes[l]&&(l=null,r[t]=l),!l){;n=e,o=t,(l=(u=(s=n.pluralTypeToLanguages,c={},a(i(s),function(e){var t=e[0];a(e[1],function(e){c[e]=t})}),c))[o]||u[d.call(o,/-/,1)[0]]||u.en)&&(r[t]=l)}return l}),y=/%\{(.*?)\}/g;function g(e,t,n,r,a,i){if("string"!=typeof e)throw TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var o=e,u=i||l,p="number"==typeof t?{smart_count:t}:t;if(null!=p.smart_count&&e){var v,g,b,w=a||h,k=d.call(e,f),x=m(w,n||"en");o=c(k[v=w,g=x,b=p.smart_count,v.pluralTypes[g](b)]||k[0])}return o=u.call(o,r||y,function(e,t){return s(p,t)&&null!=p[t]?p[t]:e})}function b(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var n=t.allowMissing?g:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:n,this.warn=t.warn||u,this.replaceImplementation=t.replace||l,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",n=e&&e.suffix||"}";if(t===f||n===f)throw RangeError('"'+f+'" token is reserved for pluralization');return RegExp(v(t)+"(.*?)"+v(n),"g")}(t.interpolation),this.pluralRules=t.pluralRules||h}b.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},b.prototype.extend=function(e,t){a(i(e||{}),function(e){var n=e[0],r=e[1],a=t?t+"."+n:n;"object"==typeof r?this.extend(r,a):this.phrases[a]=r},this)},b.prototype.unset=function(e,t){"string"==typeof e?delete this.phrases[e]:a(i(e||{}),function(e){var n=e[0],r=e[1],a=t?t+"."+n:n;"object"==typeof r?this.unset(r,a):delete this.phrases[a]},this)},b.prototype.clear=function(){this.phrases={}},b.prototype.replace=function(e){this.clear(),this.extend(e)},b.prototype.t=function(e,t){var n,r,a=null==t?{}:t;return"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof a._?n=a._:this.onMissingKey?r=(0,this.onMissingKey)(e,a,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation):(this.warn('Missing translation for key: "'+e+'"'),r=e),"string"==typeof n&&(r=g(n,a,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)),r},b.prototype.has=function(e){return s(this.phrases,e)},b.transformPhrase=function(e,t,n){return g(e,t,n)},e.exports=b},83774:function(e,t,n){var r="function"==typeof Map&&Map.prototype,a=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=r&&a&&"function"==typeof a.get?a.get:null,o=r&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=s&&c&&"function"==typeof c.get?c.get:null,l=s&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,f="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,v=Object.prototype.toString,m=Function.prototype.toString,y=String.prototype.match,g=String.prototype.slice,b=String.prototype.replace,w=String.prototype.toUpperCase,k=String.prototype.toLowerCase,x=RegExp.prototype.test,O=Array.prototype.concat,C=Array.prototype.join,S=Array.prototype.slice,E=Math.floor,P="function"==typeof BigInt?BigInt.prototype.valueOf:null,_=Object.getOwnPropertySymbols,A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,R="function"==typeof Symbol&&"object"==typeof Symbol.iterator,D="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===R?"object":"symbol")?Symbol.toStringTag:null,M=Object.prototype.propertyIsEnumerable,T=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function j(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||x.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-E(-e):E(e);if(r!==e){var a=String(r),i=g.call(t,a.length+1);return b.call(a,n,"$&_")+"."+b.call(b.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,n,"$&_")}var N=n(14061),I=N.custom,L=F(I)?I:null;function z(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}e.exports=function e(t,r,a,s){var c=r||{};if(V(c,"quoteStyle")&&"single"!==c.quoteStyle&&"double"!==c.quoteStyle)throw TypeError('option "quoteStyle" must be "single" or "double"');if(V(c,"maxStringLength")&&("number"==typeof c.maxStringLength?c.maxStringLength<0&&c.maxStringLength!==1/0:null!==c.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var v=!V(c,"customInspect")||c.customInspect;if("boolean"!=typeof v&&"symbol"!==v)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(c,"indent")&&null!==c.indent&&"	"!==c.indent&&!(parseInt(c.indent,10)===c.indent&&c.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(c,"numericSeparator")&&"boolean"!=typeof c.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var w=c.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,n){if(t.length>n.maxStringLength){var r=t.length-n.maxStringLength;return e(g.call(t,0,n.maxStringLength),n)+("... "+r+" more character")+(r>1?"s":"")}return z(b.call(b.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,q),"single",n)}(t,c);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var x=String(t);return w?j(t,x):x}if("bigint"==typeof t){var E=String(t)+"n";return w?j(t,E):E}var _=void 0===c.depth?5:c.depth;if(void 0===a&&(a=0),a>=_&&_>0&&"object"==typeof t)return Z(t)?"[Array]":"[Object]";var I=function(e,t){var n;if("	"===e.indent)n="	";else{if("number"!=typeof e.indent||!(e.indent>0))return null;n=C.call(Array(e.indent+1)," ")}return{base:n,prev:C.call(Array(t+1),n)}}(c,a);if(void 0===s)s=[];else if(W(s,t)>=0)return"[Circular]";function U(t,n,r){if(n&&(s=S.call(s)).push(n),r){var i={depth:c.depth};return V(c,"quoteStyle")&&(i.quoteStyle=c.quoteStyle),e(t,i,a+1,s)}return e(t,c,a+1,s)}if("function"==typeof t&&!B(t)){var $=function(e){if(e.name)return e.name;var t=y.call(m.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),X=J(t,U);return"[Function"+($?": "+$:" (anonymous)")+"]"+(X.length>0?" { "+C.call(X,", ")+" }":"")}if(F(t)){var ee=R?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):A.call(t);return"object"!=typeof t||R?ee:G(ee)}if(function(e){return!!e&&"object"==typeof e&&(!!("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)||"string"==typeof e.nodeName&&"function"==typeof e.getAttribute)}(t)){for(var et="<"+k.call(String(t.nodeName)),en=t.attributes||[],er=0;er<en.length;er++)et+=" "+en[er].name+"="+z(function(e){return b.call(String(e),/"/g,"&quot;")}(en[er].value),"double",c);return et+=">",t.childNodes&&t.childNodes.length&&(et+="..."),et+="</"+k.call(String(t.nodeName))+">"}if(Z(t)){if(0===t.length)return"[]";var ea=J(t,U);return I&&!function(e){for(var t=0;t<e.length;t++)if(W(e[t],"\n")>=0)return!1;return!0}(ea)?"["+Y(ea,I)+"]":"[ "+C.call(ea,", ")+" ]"}if(function(e){return"[object Error]"===H(e)&&(!D||!("object"==typeof e&&D in e))}(t)){var ei=J(t,U);return"cause"in Error.prototype||!("cause"in t)||M.call(t,"cause")?0===ei.length?"["+String(t)+"]":"{ ["+String(t)+"] "+C.call(ei,", ")+" }":"{ ["+String(t)+"] "+C.call(O.call("[cause]: "+U(t.cause),ei),", ")+" }"}if("object"==typeof t&&v){if(L&&"function"==typeof t[L]&&N)return N(t,{depth:_-a});if("symbol"!==v&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var eo=[];return o&&o.call(t,function(e,n){eo.push(U(n,t,!0)+" => "+U(e,t))}),Q("Map",i.call(t),eo,I)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var es=[];return l&&l.call(t,function(e){es.push(U(e,t))}),Q("Set",u.call(t),es,I)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return K("WeakMap");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return K("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return K("WeakRef");if(function(e){return"[object Number]"===H(e)&&(!D||!("object"==typeof e&&D in e))}(t))return G(U(Number(t)));if(function(e){if(!e||"object"!=typeof e||!P)return!1;try{return P.call(e),!0}catch(e){}return!1}(t))return G(U(P.call(t)));if(function(e){return"[object Boolean]"===H(e)&&(!D||!("object"==typeof e&&D in e))}(t))return G(h.call(t));if(function(e){return"[object String]"===H(e)&&(!D||!("object"==typeof e&&D in e))}(t))return G(U(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if(t===n.g)return"{ [object globalThis] }";if(!function(e){return"[object Date]"===H(e)&&(!D||!("object"==typeof e&&D in e))}(t)&&!B(t)){var ec=J(t,U),eu=T?T(t)===Object.prototype:t instanceof Object||t.constructor===Object,el=t instanceof Object?"":"null prototype",ed=!eu&&D&&Object(t)===t&&D in t?g.call(H(t),8,-1):el?"Object":"",ef=(eu||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(ed||el?"["+C.call(O.call([],ed||[],el||[]),": ")+"] ":"");return 0===ec.length?ef+"{}":I?ef+"{"+Y(ec,I)+"}":ef+"{ "+C.call(ec,", ")+" }"}return String(t)};function Z(e){return"[object Array]"===H(e)&&(!D||!("object"==typeof e&&D in e))}function B(e){return"[object RegExp]"===H(e)&&(!D||!("object"==typeof e&&D in e))}function F(e){if(R)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!A)return!1;try{return A.call(e),!0}catch(e){}return!1}var U=Object.prototype.hasOwnProperty||function(e){return e in this};function V(e,t){return U.call(e,t)}function H(e){return v.call(e)}function W(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return -1}function q(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function G(e){return"Object("+e+")"}function K(e){return e+" { ? }"}function Q(e,t,n,r){return e+" ("+t+") {"+(r?Y(n,r):C.call(n,", "))+"}"}function Y(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+C.call(e,","+n)+"\n"+t.prev}function J(e,t){var n,r=Z(e),a=[];if(r){a.length=e.length;for(var i=0;i<e.length;i++)a[i]=V(e,i)?t(e[i],e):""}var o="function"==typeof _?_(e):[];if(R){n={};for(var s=0;s<o.length;s++)n["$"+o[s]]=o[s]}for(var c in e){if(!V(e,c)||r&&String(Number(c))===c&&c<e.length)continue;if(!(R&&n["$"+c]instanceof Symbol))x.call(/[^\w$]/,c)?a.push(t(c,e)+": "+t(e[c],e)):a.push(c+": "+t(e[c],e))}if("function"==typeof _)for(var u=0;u<o.length;u++)M.call(e,o[u])&&a.push("["+t(o[u])+"]: "+t(e[o[u]],e));return a}},78706:function(e,t,n){"use strict";var r=n(11781),a=n(35362),i=a("Object.prototype.propertyIsEnumerable"),o=a("Array.prototype.push");e.exports=function(e){var t=r(e),n=[];for(var a in t)i(t,a)&&o(n,[a,t[a]]);return n}},23631:function(e,t,n){"use strict";var r=n(4289),a=n(40498),i=n(78706),o=n(75242),s=n(91693),c=a(o(),Object);r(c,{getPolyfill:o,implementation:i,shim:s}),e.exports=c},75242:function(e,t,n){"use strict";var r=n(78706);e.exports=function(){return"function"==typeof Object.entries?Object.entries:r}},91693:function(e,t,n){"use strict";var r=n(75242),a=n(4289);e.exports=function(){var e=r();return a(Object,{entries:e},{entries:function(){return Object.entries!==e}}),e}},1107:function(e,t,n){"use strict";var r=n(35362),a=n(98420),i=r("RegExp.prototype.exec"),o=n(14453);e.exports=function(e){if(!a(e))throw new o("`regex` must be a RegExp");return function(t){return null!==i(e,t)}}},54920:function(e,t,n){"use strict";n.d(t,{q:function(){return i}});var r=n(67294),a=n(20958),i=function(){return{name:"divider",Component:(0,r.forwardRef)(function(e,t){return r.createElement(a.default,{className:"u-mv-half",ref:t})})}}},89197:function(e,t,n){"use strict";n.d(t,{KJ:function(){return b},_:function(){return w},hk:function(){return g},ww:function(){return A},yM:function(){return k}});var r,a,i,o,s,c,u,l,d=n(11954),f=n(17508),p=n(87757),h=n.n(p),v=n(74895),m=n(67348);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.filter(Boolean).map(function(e){var n=e(t),r=n.name||e.name;return(0,f.Z)({},r,n)})},b=function(e){return Object.keys(e)[0]},w=function(e,t){var n="";return e.filter(function(e){var n=Object.values(e)[0];return!n.displayCondition||n.displayCondition(t)}).map(function(e){var t=b(e);return n===t?(n=t,null):(n=t,e)}).filter(Boolean).filter(function(e,t,n){return!(("hr"===b(e)||"divider"===b(e))&&t===n.length-1)})};var k=(r=(0,d.Z)(h().mark(function e(t){var n;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FileReader).readAsDataURL(t),e.abrupt("return",new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(e){t(e)}}));case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),x=function(e){var t=Math.max(e.height,e.width),n=1;return 3840<t&&(n=3840/t),n};var O=(a=(0,d.Z)(h().mark(function e(t){var n;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.base64,e.abrupt("return",new Promise(function(e,t){var r=new Image;r.src=n,r.onerror=t,r.onload=function(){var t=document.createElement("canvas"),n=x(r),a=n*r.width,i=n*r.height,o=a>=1920||i>=1920?.35:.75;t.width=a,t.height=i,t.getContext("2d").drawImage(r,0,0,a,i),e(t.toDataURL("image/jpeg",o))}}));case 2:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});var C=(i=(0,d.Z)(h().mark(function e(t){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new FileReader;r.onerror=n,r.onload=function(t){return e(t.target.result)},r.readAsDataURL(t)}));case 1:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)});var S=(o=(0,d.Z)(h().mark(function e(t,n){var r,a,i,o,s,c,u;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(n);case 2:return r=e.sent,e.next=5,O({base64:r});case 5:return a=e.sent,e.next=8,t.embedJpg(a);case 8:i=e.sent,c=(s=(o=t.addPage([i.width,i.height])).getSize()).width,u=s.height,o.drawImage(i,{x:c/2-i.width/2,y:u/2-i.height/2,width:i.width,height:i.height});case 12:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)});var E=(s=(0,d.Z)(h().mark(function e(t){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("arrayBuffer"in t)){e.next=4;break}return e.next=3,t.arrayBuffer();case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",new Promise(function(e,n){var r=new FileReader;r.onerror=n,r.onload=function(t){return e(new Uint8Array(t.target.result))},r.readAsArrayBuffer(t)}));case 5:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)});var P=(c=(0,d.Z)(h().mark(function e(t,n){var r,a;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(n);case 2:return r=e.sent,e.next=5,v.PDFDocument.load(r);case 5:return a=e.sent,e.next=8,t.copyPages(a,a.getPageIndices());case 8:e.sent.forEach(function(e){return t.addPage(e)});case 10:case"end":return e.stop()}},e)})),function(e,t){return c.apply(this,arguments)});var _=(u=(0,d.Z)(h().mark(function e(t,n){var r;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("application/pdf"!==n.type){e.next=5;break}return e.next=3,P(t,n);case 3:e.next=7;break;case 5:return e.next=7,S(t,n);case 7:return e.next=9,t.save();case 9:return r=e.sent,e.abrupt("return",r);case 11:case"end":return e.stop()}},e)})),function(e,t){return u.apply(this,arguments)});var A=(l=(0,d.Z)(h().mark(function e(t,n){var r,a,i,o,s,c;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.PDFDocument.create();case 2:r=e.sent,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(n),e.prev=4,a.s();case 6:if((i=a.n()).done){e.next=15;break}return o=i.value,e.next=10,(0,m.fetchBlobFileById)(t,o._id);case 10:return s=e.sent,e.next=13,_(r,s);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return e.next=25,r.save();case 25:return c=new Blob([new Uint8Array(e.sent)],{type:"application/pdf"}),e.abrupt("return",c);case 29:case"end":return e.stop()}},e,null,[[4,17,20,23]])})),function(e,t){return l.apply(this,arguments)})},13873:function(e,t,n){"use strict";n.r(t),n.d(t,{divider:()=>a.q,emailTo:()=>O,download:()=>j,addToFavorites:()=>F,viewInDrive:()=>$,copyToClipboard:()=>et,modify:()=>y,editAttribute:()=>ea,makeActions:()=>r.hk,removeFromFavorites:()=>G,smsTo:()=>b,call:()=>k,print:()=>D,viewInContacts:()=>Q,others:()=>eo});var r=n("89197"),a=n("54920"),i=n("16019"),o=n("67294"),s=n("16396"),c=n("14669"),u=n("41256"),l={en:{viewInContacts:"View in Cozy Contacts",viewInDrive:"Open",modify:"Modify",emailTo:"Send an email",smsTo:"Send a message",print:"Print",download:"Download",favorites:{add:{label:"Add to favorites",success:"%{filename} has been added to favorites |||| These items have been added to favorites"},remove:{label:"Remove from favorites",success:"%{filename} has been removed from favorites |||| These items have been removed from favorites"},error:"An error occurred, please try again."},others:"Others",editAttribute:"Edit attribute",copyToClipboard:{copy:"Copy",success:"Copied to clipboard",error:"Cannot copy to clipboard"},call:"Call"},fr:{viewInContacts:"Voir dans Cozy Contacts",viewInDrive:"Ouvrir",modify:"Modifier",emailTo:"Envoyer un e-mail",smsTo:"Envoyer un message",print:"Imprimer",download:"T\xe9l\xe9charger",favorites:{add:{label:"Ajouter aux favoris",success:"%{filename} a \xe9t\xe9 ajout\xe9 aux favoris |||| Ces \xe9l\xe9ments ont \xe9t\xe9 ajout\xe9s aux favoris"},remove:{label:"Retirer des favoris",success:"%{filename} a \xe9t\xe9 retir\xe9 des favoris |||| Ces \xe9l\xe9ments ont \xe9t\xe9 retir\xe9s des favoris"},error:"Une erreur est survenue, merci de r\xe9essayer."},others:"Autres",editAttribute:"Editer l'attribut",copyToClipboard:{copy:"Copier",success:"Copi\xe9 dans le presse-papier",error:"Impossible de copier dans le presse-papier"},call:"Appeler"}},d=function(){return(0,c.getI18n)(void 0,function(e){return l[e]})};(0,u.Z)(l);var f=n("32419");let p=function(e){return o.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),o.createElement("defs",null,o.createElement("path",{id:"pen_svg__a",d:"M9.5 3.5l3 3L3.04 16H0v-2.97L9.5 3.5zM14.91.92l.18.17c.77.78.78 2.05 0 2.84L14.03 5 11 2 12.09.91a2 2 0 012.82 0z"})),o.createElement("use",{fillRule:"evenodd",xlinkHref:"#pen_svg__a"}))};var h=n("96105"),v=n("11075"),m=n("95587"),y=function(){var e=d().t,t=e("modify");return{name:"modify",icon:p,label:t,action:function(e,t){var n=t.client,r=e[0]._id,a=(0,s.generateWebLink)({slug:"contacts",cozyUrl:n.getStackClient().uri,subDomainType:n.getInstanceOptions().subdomain,pathname:"/",hash:"/".concat(r,"/edit")});window.open(a,"_blank")},Component:(0,o.forwardRef)(function(e,n){return o.createElement(m.Z,(0,i.Z)({ref:n},e),o.createElement(h.default,null,o.createElement(f.default,{icon:p})),o.createElement(v.default,{primary:t}))})}};let g=function(e){return o.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),o.createElement("path",{fillRule:"evenodd",d:"M0 .999A.997.997 0 011 0h14a1 1 0 011 .999V12c0 .552-.453.999-.997.999H8l-6 3v-3H1A1 1 0 010 12V1zM4 5c0 .556.446 1 .997 1h6.006c.544 0 .997-.448.997-1 0-.556-.446-1-.997-1H4.997C4.453 4 4 4.448 4 5zm0 3c0 .556.444 1 .99 1h4.02A1 1 0 0010 8c0-.556-.444-1-.99-1H4.99A1 1 0 004 8z"}))};var b=function(){var e=d().t,t=e("smsTo");return{name:"smsTo",icon:g,label:t,action:function(e){var t,n,r,a=null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(n=t.phone)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.number;a&&window.open("sms:".concat(a),"_self")},Component:(0,o.forwardRef)(function(e,n){return o.createElement(m.Z,(0,i.Z)({},e,{ref:n}),o.createElement(h.default,null,o.createElement(f.default,{icon:g})),o.createElement(v.default,{primary:t}))})}},w=n("38813"),k=function(){var e=d().t,t=w.Z,n=e("call");return{name:"call",icon:t,label:n,action:function(e){var t,n,r,a=null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(n=t.phone)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.number;a&&window.open("tel:".concat(a),"_self")},Component:(0,o.forwardRef)(function(e,r){return o.createElement(m.Z,(0,i.Z)({},e,{ref:r}),o.createElement(h.default,null,o.createElement(f.default,{icon:t})),o.createElement(v.default,{primary:n}))})}},x=n("56107"),O=function(){var e=d().t,t=x.Z,n=e("emailTo");return{name:"emailTo",icon:t,label:n,action:function(e){var t,n,r,a=null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(n=t.email)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.address;a&&window.open("mailto:".concat(a),"_self")},Component:(0,o.forwardRef)(function(e,r){return o.createElement(m.Z,(0,i.Z)({},e,{ref:r}),o.createElement(h.default,null,o.createElement(f.default,{icon:t})),o.createElement(v.default,{primary:n}))})}},C=n("11954"),S=n("87757"),E=n.n(S),P=n("67348"),_=n("33918"),A=n.n(_);let R=function(e){return o.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),o.createElement("path",{fillRule:"evenodd",d:"M13 12v3c0 .552-.456 1-.995 1h-8.01A.995.995 0 013 15v-3H1c-.552 0-1-.438-1-1.003V6.003A1 1 0 011 5h14c.552 0 1 .438 1 1.003v4.994A1 1 0 0115 12h-2zM3 1.01C3 .451 3.456 0 3.995 0h8.01c.55 0 .995.443.995 1.01V4H3V1.01zM5 10v4h6v-4H5zm9-2a1 1 0 100-2 1 1 0 000 2z"}))};var D=function(){var e,t=d().t,n=t("print");return{name:"print",icon:R,label:n,disabled:function(e){return 0===e.length},displayCondition:function(e){return e.every(function(e){return(0,P.isFile)(e)})},action:(e=(0,C.Z)(E().mark(function e(t,n){var a,i,o,s,c,u,l,d;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.client,i=n.webviewIntent,o=1===t.length,s=t[0],e.prev=3,!i){e.next=19;break}if(!o){e.next=11;break}return e.next=8,(0,P.fetchBlobFileById)(a,s._id);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,(0,r.ww)(a,t);case 13:e.t0=e.sent;case 14:return c=e.t0,e.next=17,(0,r.yM)(c);case 17:return u=e.sent,e.abrupt("return",i.call("print",u));case 19:if(l="",!o){e.next=26;break}return e.next=23,a.collection("io.cozy.files").getDownloadLinkById(s._id,s.name);case 23:l=e.sent,e.next=30;break;case 26:return e.next=28,(0,r.ww)(a,t);case 28:d=e.sent,l=URL.createObjectURL(d);case 30:setTimeout(function(){window.open(l,"_blank")}),e.next=36;break;case 33:e.prev=33,e.t1=e.catch(3),A().error("Error trying to print document ".concat(i?"inside flagship appp":"outside flagship app",": ").concat(JSON.stringify(e.t1)));case 36:case"end":return e.stop()}},e,null,[[3,33]])})),function(t,n){return e.apply(this,arguments)}),Component:(0,o.forwardRef)(function(e,t){return o.createElement(m.Z,(0,i.Z)({},e,{ref:t}),o.createElement(h.default,null,o.createElement(f.default,{icon:R})),o.createElement(v.default,{primary:n}))})}},M=n("27108"),T=function(e,t){var n=(0,o.forwardRef)(function(n,r){return o.createElement(m.Z,(0,i.Z)({},n,{ref:r}),o.createElement(h.default,null,o.createElement(f.default,{icon:t})),o.createElement(v.default,{primary:e}))});return n.displayName="download",n},j=function(e){var t=e.encryptedUrl,n=d().t,r=M.default,a=n("download");return{name:"download",icon:r,label:a,Component:T(a,r),action:function(e,n){var r=n.client,a=n.webviewIntent;return(0,P.downloadFile)({client:r,file:e[0],url:t,webviewIntent:a})}}},N=n("17508");let I=function(e){return o.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.305l2.71 1.425-.517-3.018 2.192-2.137-3.03-.44L8 3.389 6.645 6.135l-3.03.44 2.193 2.137-.518 3.018L8 10.305zm-4.702 4.167l.898-5.236L.392 5.528l5.257-.764L8 0l2.351 4.764 5.257.764-3.804 3.708.898 5.236L8 12l-4.702 2.472z"}))};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach(function(t){(0,N.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=function(e,t){var n=(0,o.forwardRef)(function(n,r){return o.createElement(m.Z,(0,i.Z)({},n,{ref:r}),o.createElement(h.default,null,o.createElement(f.default,{icon:t})),o.createElement(v.default,{primary:e}))});return n.displayName="addToFavorites",n},F=function(e){var t,n=e.showAlert,r=d().t,a=r("favorites.add.label");return{name:"addToFavorites",icon:I,label:a,displayCondition:function(e){return e.length>0&&e.every(function(e){var t;return!(null!==(t=e.cozyMetadata)&&void 0!==t&&t.favorite)})},Component:B(a,I),action:(t=(0,C.Z)(E().mark(function e(t,a){var i,o,s,c;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=a.client,e.prev=1,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(t),e.prev=3,o.s();case 5:if((s=o.n()).done){e.next=11;break}return c=s.value,e.next=9,i.save(z(z({},c),{},{cozyMetadata:z(z({},c.cozyMetadata),{},{favorite:!0})}));case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),o.e(e.t0);case 16:return e.prev=16,o.f(),e.finish(16);case 19:n({message:r("favorites.add.success",{filename:(0,P.splitFilename)(t[0]).filename,smart_count:t.length}),severity:"success"}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),n({message:r("favorites.error"),severity:"error"});case 26:case"end":return e.stop()}},e,null,[[1,23],[3,13,16,19]])})),function(e,n){return t.apply(this,arguments)})}};let U=function(e){return o.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),o.createElement("path",{fillRule:"evenodd",d:"M8 12l-4.702 2.472.898-5.236L.392 5.528l5.257-.764L8 0l2.351 4.764 5.257.764-3.804 3.708.898 5.236z"}))};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(t){(0,N.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var q=function(e,t){var n=(0,o.forwardRef)(function(n,r){return o.createElement(m.Z,(0,i.Z)({},n,{ref:r}),o.createElement(h.default,null,o.createElement(f.default,{icon:t})),o.createElement(v.default,{primary:e}))});return n.displayName="removeFromFavorites",n},G=function(e){var t,n=e.showAlert,r=d().t,a=r("favorites.remove.label");return{name:"removeFromFavorites",icon:U,label:a,displayCondition:function(e){return e.length>0&&e.every(function(e){var t;return null===(t=e.cozyMetadata)||void 0===t?void 0:t.favorite})},Component:q(a,U),action:(t=(0,C.Z)(E().mark(function e(t,a){var i,o,s,c;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=a.client,e.prev=1,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(t),e.prev=3,o.s();case 5:if((s=o.n()).done){e.next=11;break}return c=s.value,e.next=9,i.save(H(H({},c),{},{cozyMetadata:H(H({},c.cozyMetadata),{},{favorite:!1})}));case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),o.e(e.t0);case 16:return e.prev=16,o.f(),e.finish(16);case 19:n({message:r("favorites.success.remove",{filename:(0,P.splitFilename)(t[0]).filename,smart_count:t.length}),severity:"success"}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),n({message:r("favorites.error"),severity:"error"});case 26:case"end":return e.stop()}},e,null,[[1,23],[3,13,16,19]])})),function(e,n){return t.apply(this,arguments)})}};let K=function(e){return o.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 2H2v3H0V2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2v-3h2v3h12V2zM7.293 4.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L8.586 9H1a1 1 0 110-2h7.586L7.293 5.707a1 1 0 010-1.414z"}))};var Q=function(){var e=d().t,t=e("viewInContacts");return{name:"viewInContacts",icon:K,label:t,action:function(e,t){var n=t.client,r=e[0]._id,a=(0,s.generateWebLink)({slug:"contacts",cozyUrl:n.getStackClient().uri,subDomainType:n.getInstanceOptions().subdomain,pathname:"/",hash:"/".concat(r)});window.open(a,"_blank")},Component:(0,o.forwardRef)(function(e,n){return o.createElement(m.Z,(0,i.Z)({ref:n},e),o.createElement(h.default,null,o.createElement(f.default,{icon:K})),o.createElement(v.default,{primary:t}))})}};let Y=function(e){return o.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),o.createElement("path",{d:"M0 13V3a2 2 0 012-2h3.172a2 2 0 011.414.586l.828.828A2 2 0 008.828 3H12a2 2 0 012 2H3.5a.5.5 0 00-.474.342l-2 6a.5.5 0 10.948.316L3.86 6h11.142a1 1 0 01.952 1.304l-2.01 6.304A2 2 0 0112.039 15H2a2 2 0 01-2-2z"}))};var J=function(e,t){var n=(0,o.forwardRef)(function(n,r){return o.createElement(m.Z,(0,i.Z)({},n,{ref:r}),o.createElement(h.default,null,o.createElement(f.default,{icon:t})),o.createElement(v.default,{primary:e}))});return n.displayName="viewInDrive",n},$=function(){var e=d().t,t=e("viewInDrive");return{name:"viewInDrive",icon:Y,label:t,Component:J(t,Y),action:function(e,t){var n=t.client,r=e[0].dir_id,a=(0,s.generateWebLink)({slug:"drive",cozyUrl:n.getStackClient().uri,subDomainType:n.getInstanceOptions().subdomain,pathname:"/",hash:"folder/".concat(r)});window.open(a,"_blank")}}},X=n("83631"),ee=function(e,t){var n=(0,o.forwardRef)(function(n,r){return o.createElement(m.Z,(0,i.Z)({},n,{ref:r}),o.createElement(h.default,null,o.createElement(f.default,{icon:t})),o.createElement(v.default,{primary:e}))});return n.displayName="copyToClipboard",n},et=function(){var e,t=d().t,n=X.default,r=t("copyToClipboard.copy");return{name:"copyToClipboard",icon:n,label:r,Component:ee(r,n),action:(e=(0,C.Z)(E().mark(function e(n,r){var a,i;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.showAlert,i=r.copyValue){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,navigator.clipboard.writeText(i);case 6:a({message:t("copyToClipboard.success"),severity:"success",variant:"filled"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a({message:t("copyToClipboard.error"),severity:"error",variant:"filled"});case 12:case"end":return e.stop()}},e,null,[[3,9]])})),function(t,n){return e.apply(this,arguments)})}};let en=function(e){return o.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 3h7.172l2-2H2a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2V6.828l-2 2V14H2V3zm3 7v2h2l7.146-7.146-2-2L5 10zm10.5-6.5l-.646.646-2-2L13.5 1.5a1.414 1.414 0 112 2z"}))};var er=function(e,t){var n=(0,o.forwardRef)(function(n,r){return o.createElement(m.Z,(0,i.Z)({},n,{ref:r}),o.createElement(h.default,null,o.createElement(f.default,{icon:t})),o.createElement(v.default,{primary:e}))});return n.displayName="editAttribute",n},ea=function(){var e=d().t,t=e("editAttribute");return{name:"editAttribute",icon:en,label:t,Component:er(t,en),action:function(e,t){(0,t.editAttributeCallback)(e)}}},ei=n("42725"),eo=function(){return{name:"others",label:(0,d().t)("others"),icon:ei.default}}},95587:function(e,t,n){"use strict";n.d(t,{Z:()=>g});var r=n("16019"),a=n("77354"),i=n("94184"),o=n.n(i),s=n("57557"),c=n.n(s),u=n("45697"),l=n.n(u),d=n("67294"),f=n("10059"),p=n("20964"),h=["component"],v=(0,d.forwardRef)(function(e,t){var n=e.component,i=(0,a.Z)(e,h);return d.createElement(p.Z,(0,r.Z)({ref:t,component:f.default,componentElement:n,gutters:"disabled"},i))});v.displayName="MenuItem",v.propTypes=f.LitItemPropTypes;var m=["isListItem","className"],y=(0,d.forwardRef)(function(e,t){var n,i=e.isListItem,s=e.className,u=(0,a.Z)(e,m),l=i?f.default:v;var p=(n=u,c()(n,["docs","action","t","f","lang"]));return d.createElement(l,(0,r.Z)({},p,{className:o()(s,"cozyActionsItem"),ref:t,button:!0,ellipsis:!1}))});y.displayName="ActionsMenuItem",y.propTypes={className:l().string,isListItem:l().bool};let g=y},95335:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(16019),a=n(77354),i=n(45697),o=n.n(i),s=n(67294),c=n(95587),u=n(20958),l=n(89909),d=["children"],f=(0,s.forwardRef)(function(e,t){var n=e.children,i=(0,a.Z)(e,d);return(0,l.default)().isMobile?s.createElement(s.Fragment,null,s.createElement(c.Z,(0,r.Z)({},i,{ref:t,isListItem:!0}),n),s.createElement(u.default,{className:"u-mv-half"})):null});f.displayName="ActionsMenuMobileHeader",f.propTypes={children:o().node};let p=f},8934:function(e,t,n){"use strict";n.d(t,{Z:()=>y});var r=n("16019"),a=n("77354"),i=n("45697"),o=n.n(i),s=n("67294"),c=n("87838");let u=n("50517").Z;var l=n("9758"),d=n("31395"),f=n("41170"),p=n.n(f),h=n("89909"),v=["children","autoClose","open","onClose"],m=function(e){var t=e.children,n=e.autoClose,i=e.open,o=e.onClose,f=(0,a.Z)(e,v),m=(0,h.default)().isMobile;(0,d.L)();var y=function(e){return function(t){var r;null===(r=e.onClick)||void 0===r||r.call(e,t),n&&(null==o||o())}};return m&&i?s.createElement(c.Z,{skipAnimation:p()(),backdrop:!0,onClose:o},s.createElement(l.default,{square:!0},s.Children.map(t,function(e){return s.isValidElement(e)?s.cloneElement(e,{isListItem:!0,size:"small",onClick:y(e.props)}):null}))):s.createElement(u,(0,r.Z)({},f,{open:i,onClose:o}),s.Children.map(t,function(e,n){var r,a,i=s.Children.toArray(t)[0],o=(null==i?void 0:null===(r=i.type)||void 0===r?void 0:r.name)||(null==i?void 0:null===(a=i.type)||void 0===a?void 0:a.displayName);return s.isValidElement(e)?s.cloneElement(e,{autoFocus:"ActionsMenuMobileHeader"===o&&1===n||void 0,onClick:y(e.props)}):null}))};m.propTypes={autoClose:o().bool,onClose:o().func};let y=m},24321:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>k});var r=n("16019"),a=n("77354"),i=n("45697"),o=n.n(i),s=n("67294"),c=n("17508"),u=n("16396"),l=n("22960"),d=n("89197"),f=n("62125"),p=["docs","actions","actionOptions","component","onClick"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=(0,s.forwardRef)(function(e,t){var n=e.docs,i=e.actions,o=e.actionOptions,c=e.component,h=e.onClick,m=(0,a.Z)(e,p),y=(0,u.useClient)(),g=(0,l.useWebviewIntent)(),b=(0,f.useI18n)().t;return(0,s.useMemo)(function(){return(0,d._)(i,n)},[i,n]).map(function(e,a){var i=(0,d.KJ)(e),u=Object.values(e)[0],l=u.Component,f=u.action,p=u.disabled;return s.createElement(null!=c?c:l,(0,r.Z)({},m,{ref:t,key:i+a,action:u,docs:n,autoFocus:0===a,disabled:null==p?void 0:p(n),onClick:function(e){null==f||f(n,v(v({client:y,t:b,webviewIntent:g},o),e)),null==h||h()}}))})});m.propTypes={docs:o().array,component:o().object,actions:o().array,actionOptions:o().object,onClick:o().func},o().array,o().object,o().bool,o().bool,o().func;var y=n("8934"),g=["docs","actions","anchorOrigin","children","componentsProps","onClose"],b=function(e){var t=e.vertical,n=e.horizontal;return{vertical:"bottom"===t?"top":"top"===t?"bottom":t,horizontal:n}},w=(0,s.forwardRef)(function(e,t){var n=e.docs,i=e.actions,o=e.anchorOrigin,c=e.children,u=e.componentsProps,l=e.onClose,d=(0,a.Z)(e,g),f=b(o);return s.createElement(y.Z,(0,r.Z)({},d,{anchorEl:t.current,getContentAnchorEl:null,anchorOrigin:o,transformOrigin:f,keepMounted:!0,onClose:l}),c,s.createElement(m,(0,r.Z)({},u.actionsItems,{docs:n,actions:i})))});w.defaultProps={anchorOrigin:{vertical:"bottom",horizontal:"left"},autoClose:!0,componentsProps:{}},w.propTypes={open:o().bool,docs:o().array,actions:o().array,anchorOrigin:o().shape({vertical:o().oneOf(["bottom","center","top"]),horizontal:o().oneOf(["left","center","right"])}),autoClose:o().bool,componentsProps:o().shape({actionsItems:o().shape({actionOptions:o().object,onClick:o().func})}),onClose:o().func};let k=w},34978:function(e,t,n){"use strict";n.r(t),n.d(t,{AlertPropTypes:()=>x,AlertDefaultProps:()=>O,default:()=>C});var r=n("16019"),a=n("17508"),i=n("77354"),o=n("77958"),s=n("94184"),c=n.n(s),u=n("82492"),l=n.n(u),d=n("45697"),f=n.n(d),p=n("67294"),h=n("32419");let v=function(e){return p.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),p.createElement("defs",null,p.createElement("path",{id:"info_svg__a",d:"M8 16A8 8 0 118 0a8 8 0 010 16zM7 4a1 1 0 102 0 1 1 0 10-2 0zm1 2H6v2h1v4a1 1 0 001 1h2v-2H9V7a1 1 0 00-1-1z"})),p.createElement("use",{fillRule:"evenodd",xlinkHref:"#info_svg__a"}))};var m=n("41120"),y=["className","classes","icon","severity","block","color","square","action","variant","style","children"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var b={success:p.createElement(h.default,{icon:function(e){return p.createElement("svg",(0,r.Z)({viewBox:"0 0 48 48"},e),p.createElement("path",{fillRule:"evenodd",d:"M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zM13.414 24.586a2 2 0 00-2.828 2.828l7 7a2 2 0 002.828 0l15-15a2 2 0 00-2.828-2.828L19 30.172l-5.586-5.586z"}))}}),warning:p.createElement(h.default,{icon:function(e){return p.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),p.createElement("path",{fillRule:"evenodd",d:"M7.022 1.736c.543-.959 1.428-.95 1.966 0l6.532 11.529c.543.958.094 1.735-1.016 1.735h-13C.399 15-.051 14.215.487 13.265l6.535-11.53zM7.004 13c0-.552.443-1 1-1 .552 0 1 .444 1 1 0 .553-.444 1-1 1-.553 0-1-.444-1-1zm0-7.997a.999.999 0 011-1.003c.552 0 1 .438 1 1.003v4.994a.999.999 0 01-1 1.003c-.553 0-1-.438-1-1.003V5.003z"}))}}),error:p.createElement(h.default,{icon:function(e){return p.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),p.createElement("path",{fillRule:"evenodd",d:"M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 9.75C7.30964 9.75 6.75 10.3096 6.75 11C6.75 11.6904 7.30964 12.25 8 12.25C8.69036 12.25 9.25 11.6904 9.25 11C9.25 10.3096 8.69036 9.75 8 9.75ZM8 4C7.48716 4 7.06449 4.38604 7.00673 4.88338L7 5V8C7 8.55228 7.44772 9 8 9C8.51284 9 8.93551 8.61396 8.99327 8.11662L9 8V5C9 4.44772 8.55228 4 8 4Z"}))}}),info:p.createElement(h.default,{icon:v})},w=(0,m.Z)({message:{maxWidth:function(e){var t=e.block,n=e.iconSize;return t&&"calc(100% - ".concat(n,"px - 12px)")}}}),k=(0,p.forwardRef)(function(e,t){var n,s,u,d=e.className,f=e.classes,m=e.icon,k=e.severity,x=e.block,O=e.color,C=e.square,S=e.action,E=e.variant,P=e.style,_=e.children,A=(0,i.Z)(e,y),R=["primary","secondary"].includes(k)?"success":k;var D=(n=m,s=k,!1!==n&&(n||["primary","secondary"].includes(s)&&p.createElement(h.default,{icon:v})||void 0)),M=w({iconSize:(null==m?void 0:null===(u=m.props)||void 0===u?void 0:u.size)||16,block:x}),T=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({backgroundColor:O,borderRadius:C&&0},P);return p.createElement(o.Z,(0,r.Z)({ref:t,style:T,className:c()(d,"cozyStyles-".concat(k,"-").concat(E),{block:x},{action:!!S}),classes:l()(M,f),variant:E,severity:R,iconMapping:b,icon:D,action:S},A),_)});k.displayName="Alert";var x={className:f().string,icon:f().oneOfType([f().element,f().bool]),severity:f().oneOf(["primary","secondary","success","error","warning","info"]),block:f().bool,color:f().string,square:f().bool,variant:f().oneOf(["standard","outlined","filled"])},O={severity:"primary",block:!1,square:!1,variant:"standard"};k.propTypes=x,k.defaultProps=O;let C=k},51008:function(e,t,n){"use strict";n.r(t),n.d(t,{AppLinker:function(){return w},default:function(){return k},generateUniversalLink:function(){return g.hk},generateWebLink:function(){return g.iT},getUniversalLinkDomain:function(){return g.py}});var r=n(46932),a=n(89526),i=n(64222),o=n(26238),s=n(11998),c=n(28446),u=n(17508),l=n(45697),d=n.n(l),f=n(67294),p=n(16396),h=n(25976),v=n(22960),m=n(33918),y=n.n(m),g=n(81623);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var w=function(e){(0,o.Z)(d,e);var t,n,l=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);return e=n?Reflect.construct(r,arguments,(0,c.Z)(this).constructor):r.apply(this,arguments),(0,s.Z)(this,e)});function d(e){var t;return(0,r.Z)(this,d),t=l.call(this,e),(0,u.Z)((0,i.Z)(t),"state",{imgRef:null}),(0,u.Z)((0,i.Z)(t),"setImgRef",function(e){t.imgRef=e,t.setState({imgRef:t.imgRef})}),t}return(0,a.Z)(d,[{key:"render",value:function(){var e=this.props.children,t=d.getOnClickHref(this.props,this.context,this.state.imgRef),n=t.href,r=t.onClick;return e({iconRef:this.setImgRef,onClick:r,href:n})}}],[{key:"getSlug",value:function(e){return e.app.slug}},{key:"getOnClickHref",value:function(e,t,n){var r=e.app,a=e.client,i=e.href;if((0,h.isFlagshipApp)()){var o=(a?a.getInstanceOptions():void 0).app;if(void 0===o||r.slug!==o.slug){var s=n&&JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n.getBoundingClientRect().toJSON()));return{onClick:function(e){e.preventDefault(),t?t.call("openApp",i,r,s):y().error('Failed to "openApp('.concat(r,')". WebviewService has the following falsy value "').concat(t,"\" in AppLinker's context."))},href:"#"}}}return{href:i,onClick:null}}},{key:"onAppSwitch",value:function(e){"function"==typeof e&&e()}},{key:"openWeb",value:function(e){d.onAppSwitch(e.onAppSwitch)}}]),d}(f.Component);(0,u.Z)(w,"contextType",v.WebviewContext),w.propTypes={href:d().string,onAppSwitch:d().func,app:d().shape({slug:d().string.isRequired}).isRequired};let k=(0,p.withClient)(w)},81623:function(e,t,n){"use strict";n.d(t,{hk:()=>l,iT:()=>u,py:()=>c});var r=n("17508"),a=n("77354"),i=n("16396"),o=["nativePath"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var c=function(){return"https://links.mycozy.cloud"},u=function(e){var t=e.nativePath,n=(0,a.Z)(e,o);return console.warn("Deprecated: you should use generateWebLink from cozy-client instead"),(0,i.generateWebLink)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({pathname:"/",hash:t},n))},l=function(e){var t=e.slug,n=e.cozyUrl,r=e.subDomainType,a=e.fallbackUrl,o=e.nativePath;if(o=(0,i.ensureFirstSlash)(o),!n&&!a)throw Error("Must have either cozyUrl or fallbackUrl to generate universal link.");n&&!a&&(a=(0,i.generateWebLink)({cozyUrl:n,pathname:"/",hash:o,slug:t,subDomainType:r}));var s=new URL(c(n)+"/"+t+o);return s.searchParams.append("fallback",a),s.toString()}},63293:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var r=n(85718),a=n.n(r),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[a().azure,a().melon,a().blazeOrange,a().pomegranate,a().mango,a().pumpkinOrange,a().darkPeriwinkle,a().purpley,a().lightishPurple,a().weirdGreen,a().puertoRico,a().emerald,a().seafoamGreen,a().lavender,a().brightSun,a().fuchsia],n=Array.from(e.toUpperCase()).map(function(e){return e.charCodeAt(0)}).reduce(function(e,t){return e+t},0)%t.length;return t[n]}},88230:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(94184),a=n.n(r),i=n(28583),o=n.n(i),s=n(45697),c=n.n(s),u=n(67294),l=n(63293),d=n(77843),f=n(32419),p=n(77107),h={"c-avatar":"styles__c-avatar___PpDI-","c-avatar-image":"styles__c-avatar-image___3yJnb","c-avatar-initials":"styles__c-avatar-initials___310qC","c-avatar--text":"styles__c-avatar--text___2dvna","c-avatar--disabled":"styles__c-avatar--disabled___xoLOy","c-avatar--image":"styles__c-avatar--image___jDBci","c-avatar--ghost":"styles__c-avatar--ghost___3898R"},v=function(e){var t=e.text,n=e.textId;return t?{backgroundColor:"".concat((0,l.g)(n||t))}:{}},m=function(e){var t=e.text,n=e.textId,r=e.image,i=e.size,s=e.className,c=e.style,l=e.disabled,p=e.ghost,m=e.icon,y=(0,d.U)(i),g=v({text:t,textId:n}),b=o()(g,y,c),w=f.default.isProperIcon(m)?u.createElement(f.default,{icon:m}):m;return u.createElement("div",{"data-testid":"Avatar",className:a()(h["c-avatar"],t?h["c-avatar--text"]:"",r?h["c-avatar--image"]:"",l?h["c-avatar--disabled"]:"",p?h["c-avatar--ghost"]:"",s),style:b},r&&u.createElement("img",{src:r,className:h["c-avatar-image"],alt:""}),!r&&t&&u.createElement("span",{className:h["c-avatar-initials"]},t),!r&&!t&&w)};m.propTypes={text:c().string,image:c().string,size:c().oneOfType([c().oneOf(["xsmall","small","medium","large","xlarge"]),c().number]),className:c().string,disabled:c().bool,icon:c().oneOfType([c().node,f.iconPropType]),ghost:c().bool,style:c().object},m.defaultProps={text:"",image:"",size:"medium",className:"",disabled:!1,icon:p.default,ghost:!1,style:{}};let y=m},87838:function(e,t,n){"use strict";n.d(t,{Z:()=>Y});var r=n("16019"),a=n("77354"),i=n("98477"),o=n("25002"),s=n("17508"),c=n("73637"),u=n("76234"),l=n("54408"),d=n("45697"),f=n.n(d),p=n("67294"),h={attributes:!0,characterData:!0,childList:!0,subtree:!0},v=n("99589"),m=n("94184"),y=n.n(m),g=n("41120"),b=["isOver"],w=(0,g.Z)({isOver:{zIndex:"calc(var(--zIndex-modal-toolbar) + 1)"}}),k=function(e){var t=e.isOver,n=(0,a.Z)(e,b),i=w();return p.createElement(v.Z,(0,r.Z)({},n,{className:y()((0,s.Z)({},i.isOver,t),n.className)}))};k.propTypes={isOver:f().bool};let x=function(e){var t=e.showBackdrop,n=e.onClick,r=e.children,a=t?k:p.Fragment;return p.createElement(a,t?{open:t,onClick:n}:void 0,r)};var O=function(e){var t;return parseInt((t=e,getComputedStyle(document.documentElement).getPropertyValue("--safe-area-inset-".concat(t))))},C=n("32202"),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ref,n=e.height,r=1;return n?r=n:t&&t.current&&(r=t.current.offsetHeight),r+((0,C.ym)().statusBarHeight||0)+O("top")},E=function(e){var t=S(e);return window.innerHeight-t},P=function(e){var t=e.backdrop,n=e.maxHeight,r=e.mediumHeight,a=e.mediumHeightRatio,i=e.innerContentHeight,o=e.bottomSpacerHeight,s=e.offset,c=r||Math.round(n*a);if(t)return c<i?c<n?c:n:i>n?n:i+o;return i<c?i+s:c>n?n:c},_=function(e){var t=e.isClosable,n=e.isOpenMin,r=e.headerRef,a=e.offset,i=e.actionButtonsHeight,o=e.actionButtonsBottomMargin;return t&&!n?0:r.current.offsetHeight+(void 0===a?0:a)+i+o+((0,C.ym)().navbarHeight||0)+O("bottom")},A=function(e){var t=e.snapIndex,n=e.peekHeights,r=e.isTopPosition,a=e.setIsTopPosition,i=n.length-1;t>i&&a(!0),t===i&&!r&&a(!0),t<i&&r&&a(!1)},R=function(e){var t=e.snapIndex,n=e.isBottomPosition,r=e.setIsBottomPosition;0===t&&!n&&r(!0),0!==t&&n&&r(!1)},D=function(e){var t=e.backdrop,n=e.setCurrentIndex,r=e.setIsTopPosition,a=e.setIsBottomPosition,i=e.handleClose;t&&(n(0),r(!1),a(!0),setTimeout(i,250))},M=function(e){var t=e.backdrop,n=e.maxHeight,r=e.innerContentHeight,a=e.toolbarProps,i=e.offset;return n-r<=0?i+S(a):t?i:n-r},T=function(e,t){return e?parseFloat(getComputedStyle(e).getPropertyValue(t)):0},j=n("9758"),N=n("8421"),I=n("10923"),L=n("99127"),z=["portalProps"];function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var F={renderSaferAnim:"styles__renderSaferAnim___2rNtc"},U=function(e){var t=e.showBackdrop,n=e.children;return t?p.createElement("div",{style:{position:"fixed",zIndex:"var(--zIndex-modal)",inset:0}},n):n},V=function(e){var t=e.isTopPosition,n=e.hasToolbarProps,r=e.offset,a=e.renderSaferHeight,i=e.isBottomPosition;return{root:B({borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",transition:"border-radius 0.5s",boxShadow:"0 -0.5px 0px 0 rgba(0, 0, 0, 0.10), 0 -2px 2px 0 rgba(0, 0, 0, 0.02), 0 -4px 4px 0 rgba(0, 0, 0, 0.02), 0 -8px 8px 0 rgba(0, 0, 0, 0.02), 0 -16px 16px 0 rgba(0, 0, 0, 0.02)",backgroundColor:"var(--paperBackgroundColor)",zIndex:"var(--zIndex-modal)"},t&&{borderTopLeftRadius:0,borderTopRightRadius:0,boxShadow:n?"0 0 1px 0 rgba(0, 0, 0, 0.5)":"0 -1px 0 0 rgba(255, 255, 255, 1)"}),indicator:{width:"4rem",height:"0.25rem",borderRadius:"99px",backgroundColor:"var(--secondaryTextColor)"},stack:{backgroundColor:"var(--defaultBackgroundColor)"},bounceSafer:{height:50,width:"100%",position:"fixed",bottom:0,left:0,backgroundColor:"var(--paperBackgroundColor)"},flagshipImmersive:{backgroundColor:"var(--paperBackgroundColor)",bottom:0,content:"",height:"var(--flagship-bottom-height)",position:"fixed",width:"100%",zIndex:"var(--zIndex-modal)"},offsetSafer:{opacity:i?0:1,height:"".concat(r,"px"),width:"100%",position:"fixed",bottom:0,left:0,backgroundColor:"var(--paperBackgroundColor)",zIndex:"calc(var(--zIndex-modal) + 10)",transition:"opacity ".concat(250,"ms")},renderSafer:{height:a,width:"100%",position:"fixed",bottom:0,pointerEvents:"none"}}},H=165,W=17,q=!0,G={mediumHeightRatio:.75,mediumHeight:null,hasMinHeightOffset:!1,isOpenMin:!1},K=(0,p.memo)(function(e){var t,n,r,a,s,u=e.toolbarProps,d=e.settings,f=e.backdrop,v=e.skipAnimation,m=e.onClose,y=e.offset,g=e.children,b=B(B({},G),d),w=b.mediumHeightRatio,k=b.mediumHeight,O=b.isOpenMin,S=b.hasMinHeightOffset,z=(0,p.useRef)(),Z=(0,p.useRef)(),K=(0,p.useRef)(),Q=(0,p.useState)(!1),Y=(0,o.Z)(Q,2),J=Y[0],$=Y[1],X=(0,p.useState)(!1),ee=(0,o.Z)(X,2),et=ee[0],en=ee[1],er=(0,p.useState)(!1),ea=(0,o.Z)(er,2),ei=ea[0],eo=ea[1],es=(0,p.useState)(f),ec=(0,o.Z)(es,2),eu=ec[0],el=ec[1],ed=(0,p.useState)(null),ef=(0,o.Z)(ed,2),ep=ef[0],eh=ef[1],ev=(0,p.useState)(1),em=(0,o.Z)(ev,2),ey=em[0],eg=em[1],eb=(0,p.useState)(0),ew=(0,o.Z)(eb,2),ek=ew[0],ex=ew[1],eO=(0,p.useState)(0),eC=(0,o.Z)(eO,2),eS=eC[0],eE=eC[1],eP=(0,p.useRef)(),e_=(0,p.useState)(0),eA=(0,o.Z)(e_,2),eR=eA[0],eD=eA[1],eM=!!Object.keys(u).length,eT=!!m||f,ej=eS<eP.current?eP.current-16:0,eN=0!==eP.current&&eP.current>eS,eI=V({isTopPosition:J,hasToolbarProps:eM,offset:y,renderSaferHeight:ej,isBottomPosition:et});var eL=(t=g,n=K,p.Children.map(t,function(e){var t,r;return(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.name)==="BottomSheetHeader"||(null==e?void 0:null===(r=e.type)||void 0===r?void 0:r.displayName)==="BottomSheetHeader"?p.cloneElement(e,{headerContentRef:n}):e}));if(f&&!m)throw Error("BottomSheet must have `onClose` method to work properly when setting `backdrop` to `true`");var ez=(0,p.useCallback)(function(){el(!1),eo(!0),m&&m()},[m]);r=z,a=function(){eD(function(e){return e+1})},void 0===s&&(s=h),(0,p.useEffect)(function(){if(r.current){var e=new MutationObserver(a);return e.observe(r.current,s),function(){e.disconnect()}}},[a,s]),(0,p.useEffect)(function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="auto"}},[]),!function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!0);var r=(0,p.useRef)();function a(){r.current&&r.current()}(0,p.useEffect)(function(){r.current=e}),(0,p.useEffect)(function(){if(n){if("undefined"!=typeof window){var e=window.setTimeout(a,t);return function(){window.clearTimeout(e)}}console.warn("useTimeoutWhen: window is undefined.")}},[n])}(function(){return ez()},250,eT&&et),(0,p.useEffect)(function(){var e=K.current,t=z.current.offsetHeight,n=T(e,"height"),r=T(e,"padding-bottom"),a=E(u),o=M({backdrop:f,maxHeight:a,innerContentHeight:t,toolbarProps:u,offset:y}),s=_({isClosable:eT,isOpenMin:O,headerRef:Z,offset:S?y:0,actionButtonsHeight:n,actionButtonsBottomMargin:r}),c=O&&n>0?s+1:P({backdrop:f,maxHeight:a,mediumHeight:k,mediumHeightRatio:w,innerContentHeight:t,bottomSpacerHeight:o,offset:y}),l=(0,i.Z)(new Set([s,c,a])),d=(null==ep?void 0:ep.toString())!==(null==l?void 0:l.toString())&&J?ey-1-(ey-(l.length-1)):ey;eg(d),eh(l),eP.current=eS,eE(c),A({snapIndex:d,peekHeights:l,isTopPosition:J,setIsTopPosition:$}),ex(o)},[z,u,w,k,eu,f,eT,y,eR]);var eZ=(0,L.useCozyTheme)().isLight;return(0,I.useSetFlagshipUI)({bottomTheme:eZ?"dark":"light"},{bottomTheme:(0,C.ym)().immersive||!eZ?"light":"dark"},"cozy-ui/BottomSheet"),p.createElement(U,{showBackdrop:eu},(0,C.ym)().immersive&&p.createElement("span",{style:eI.flagshipImmersive}),p.createElement(x,{showBackdrop:eu,onClick:function(){return D({backdrop:f,setCurrentIndex:eg,setIsTopPosition:$,setIsBottomPosition:en,handleClose:ez})}}),p.createElement(l.R,{peekHeights:ep,defaultHeight:eS,backdrop:!1,fullHeight:!eM,currentIndex:ey,onIndexChange:function(e){eg(e),A({snapIndex:e,peekHeights:ep,isTopPosition:J,setIsTopPosition:$}),R({snapIndex:e,isBottomPosition:et,setIsBottomPosition:en})},styles:{root:eI.root},threshold:0,springConfig:{tension:H,friction:W,clamp:q},disabledClosing:!m,hidden:ei,snapPointSeekerMode:"next",skipAnimation:v},p.createElement("div",{ref:z},p.createElement(j.default,{"data-testid":"bottomSheet-header",className:"u-w-100 u-h-3 u-pos-relative u-flex u-flex-items-center u-flex-justify-center",ref:Z,elevation:0,square:!0},p.createElement("div",{style:eI.indicator})),p.createElement(N.default,{style:eI.stack,className:"u-flex u-flex-column u-ov-hidden",spacing:"s"},eL)),p.createElement("div",{style:{height:ek}})),eN&&p.createElement("div",{style:eI.renderSafer},p.createElement(j.default,{className:F.renderSaferAnim,elevation:0,square:!0})),!et&&p.createElement(p.Fragment,null,p.createElement(c.Z,{in:!0,timeout:250},p.createElement("div",{style:eI.bounceSafer}))),!!y&&p.createElement(c.Z,{in:!0,timeout:250},p.createElement("div",{id:"bottomSheet-offsetSafer",style:eI.offsetSafer})))});K.displayName="BottomSheet",K.defaultProps={classes:{},toolbarProps:{},backdrop:!1,offset:(0,C.ym)().immersive&&(0,C.ym)().navbarHeight||0},K.propTypes={toolbarProps:f().shape({ref:f().object,height:f().number}),settings:f().shape({mediumHeight:f().number,mediumHeightRatio:f().number,hasMinHeightOffset:f().bool,isOpenMin:f().bool}),backdrop:f().bool,skipAnimation:f().bool,offset:f().number,onClose:f().func};var Q=(0,p.forwardRef)(function(e,t){var n=e.portalProps,i=(0,a.Z)(e,z),o=(0,L.useCozyTheme)().variant,s=null!=n&&n.disablePortal?p.Fragment:L.default,c=null!=n&&n.disablePortal?void 0:{variant:o};return p.createElement(u.Z,n,p.createElement(s,c,p.createElement(K,(0,r.Z)({ref:t},i))))});Q.displayName="BottomSheetPortal";let Y=Q},41800:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(94184),a=n.n(r),i=n(67294),o=n(26234),s=function(e){var t=e.className,n=e.headerContentRef,r=e.children;return i.createElement(o.Z,{ref:n,className:a()("u-flex u-flex-items-center",t),disableGutters:!0,disableElevation:!0},r)};s.displayName="BottomSheetHeader";let c=s},26234:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(16019),a=n(77354),i=n(94184),o=n.n(i),s=n(45697),c=n.n(s),u=n(67294),l=n(9758),d=["children","disableGutters","disableElevation","className"],f=(0,u.forwardRef)(function(e,t){var n=e.children,i=e.disableGutters,s=e.disableElevation,c=e.className,f=(0,a.Z)(e,d);return u.createElement(l.default,(0,r.Z)({ref:t,elevation:s?0:25,square:!0,className:o()({"u-p-1":!i},c)},f),n)});f.displayName="BottomSheetItem",f.propTypes={className:c().string,disableGutters:c().bool,disableElevation:c().bool};let p=u.memo(f)},26024:function(e,t,n){"use strict";n.r(t),n.d(t,{BottomSheetHeader:()=>i.Z,BottomSheetTitle:()=>g,BottomSheetItem:()=>a.Z,default:()=>r.Z});var r=n("87838"),a=n("26234"),i=n("41800"),o=n("94184"),s=n.n(o),c=n("45697"),u=n.n(c),l=n("67294"),d=n("32419"),f=n("24546"),p=n("10059"),h=n("96105"),v=n("11075"),m=n("32692"),y=(0,l.forwardRef)(function(e,t){var n=e.className,r=e.label,i=e.icon;return i?l.createElement(a.Z,{disableGutters:!0,disableElevation:!0},l.createElement(f.default,{ref:t},l.createElement(p.default,null,l.createElement(h.default,null,l.createElement(d.default,{icon:i,size:32})),l.createElement(v.default,{primary:l.createElement(m.default,{className:"u-ellipsis",variant:"h6"},r)})))):l.createElement(a.Z,{disableElevation:!0},l.createElement(m.default,{ref:t,className:s()("u-flex u-flex-justify-center",n),variant:"h6"},r))});y.propTypes={className:u().string,label:u().string,icon:d.iconPropType};let g=y},41496:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(16019),a=n(17508),i=n(77354),o=n(282),s=n(94184),c=n.n(s),u=n(45697),l=n.n(u),d=n(67294),f=n(32419),p=n(43870),h=["variant","className","color","label","busy","disabled","endIcon"],v=["variant","className"],m=["success","error","warning","info"],y=(0,d.forwardRef)(function(e,t){var n=e.variant,s=e.className,u=e.color,l=e.label,v=e.busy,y=e.disabled,g=e.endIcon,b=(0,i.Z)(e,h),w=m.includes(u)?u:"primary",k="text"!==n||m.includes(u)?"primary":u;return d.createElement(o.Z,(0,r.Z)({},b,{variant:n,ref:t,className:c()((0,a.Z)({},"customColor-".concat(w),w),s),color:k,disabled:y||v,endIcon:v?d.createElement(f.default,{icon:p.Z,spin:!0,"aria-hidden":!0,focusable:"false"}):g,disableElevation:!0}),l)});y.displayName="DefaultButton",y.defaultProps={variant:"contained",color:"primary"};var g=(0,d.forwardRef)(function(e,t){var n=e.variant,a=e.className,o=void 0===a?"":a,s=(0,i.Z)(e,v);switch(n){case"ghost":return d.createElement(y,(0,r.Z)({className:"ghost ".concat(o),variant:"outlined"},s,{ref:t}));case"secondary":return d.createElement(y,(0,r.Z)({variant:"outlined",className:o},s,{ref:t}));case"text":return d.createElement(y,(0,r.Z)({variant:"text",className:o},s,{ref:t}));default:return d.createElement(y,(0,r.Z)({className:o},s,{ref:t}))}});g.displayName="Buttons",g.propTypes={variant:l().oneOf(["primary","secondary","ghost","text"]),color:l().oneOf(["default","inherit","primary","secondary","success","error","warning","info"])},g.defaultProps={variant:"primary"};let b=g},77843:function(e,t,n){"use strict";n.d(t,{U:function(){return l},Z:function(){return f}});var r=n(94184),a=n.n(r),i=n(45697),o=n.n(i),s=n(67294),c="styles__c-circle___1DuMR",u="styles__c-circle-text___1jFgD",l=function(e){var t=Number.isInteger(e)?e:({xsmall:16,small:32,medium:40,large:48,xlarge:64})[e];return{"--circleSize":"".concat(t,"px")}},d=function(e){var t=e.children,n=e.backgroundColor,r=e.size,i=e.className,o=l(r),d=Object.assign({backgroundColor:n},o);return s.createElement("div",{className:a()(c,i),style:d},s.createElement("span",{className:u},t))};d.propTypes={backgroundColor:o().string,size:o().oneOfType([o().oneOf(["xsmall","small","medium","large","xlarge"]),o().number]),className:o().string},d.defaultProps={size:"medium",className:""};let f=d},53189:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(16019),a=n(17508),i=n(51991),o=n.n(i),s=n(67294),c=n(1467),u=n(30910),l=n(11844),d=n(98067),f=n(38611),p=n(46590),h=n(36055),v=n(96503);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=function(e){var t=e.onClose,n=e.onBack,a=e.title,i=e.content,l=e.actions,m=e.actionsLayout,g=(0,d.Z)(y(y({},e),{},{isFluidTitle:!0})),b=g.dialogProps,w=g.dialogTitleProps,k=g.fullScreen,x=g.id,O=g.dialogActionsProps,C=g.dialogContentProps,S=n||t;return s.createElement(f.ZP,b,!k&&t&&s.createElement(u.Z,{onClick:t,"data-testid":"modal-close-button-".concat(x)}),!k&&n&&s.createElement(c.Z,{"data-testid":"modal-back-button-".concat(x),onClick:n}),k&&S&&s.createElement(c.Z,{"data-testid":"modal-backclose-button-".concat(x),onClick:S}),s.createElement(p.Z,C,s.createElement("div",{className:"dialogContentInner withFluidActions"},a&&s.createElement("div",{className:"dialogTitleFluidContainer"},s.createElement(h.Z,w,a)),s.createElement("div",{className:o()("dialogContentWrapper",{withActions:!!l})},i),l&&s.createElement(v.Z,(0,r.Z)({},O,{disableSpacing:!0,className:o()("dialogActionsFluid",{columnLayout:"column"==m},O.className)}),l))))};g.defaultProps={size:"small"},g.propTypes=l.Z;let b=g},17006:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(16019),a=n(94184),i=n.n(a),o=n(67294),s=n(1467),c=n(30910),u=n(11844),l=n(98067),d=n(38611),f=n(36055),p=n(46590),h=n(96503),v=n(20958),m=function(e){var t=e.onClose,n=e.onBack,a=e.title,u=e.content,m=e.actions,y=e.actionsLayout,g=(0,l.Z)(e),b=g.dialogProps,w=g.dialogTitleProps,k=g.fullScreen,x=g.id,O=g.dividerProps,C=g.dialogActionsProps,S=g.dialogContentProps,E=n||t;return o.createElement(d.ZP,b,!k&&t&&o.createElement(c.Z,{onClick:t,"data-testid":"modal-close-button-".concat(x)}),!k&&n&&o.createElement(s.Z,{onClick:n,"data-testid":"modal-back-button-".concat(x)}),k&&E&&o.createElement(s.Z,{"data-testid":"modal-backclose-button-".concat(x),onClick:E}),a&&o.createElement(o.Fragment,null,o.createElement(f.Z,w,a),o.createElement(v.default,O)),o.createElement(p.Z,S,o.createElement("div",{className:"dialogContentInner withFluidActions"},o.createElement("div",{className:i()("dialogContentWrapper",{withActions:!!m})},u),m&&o.createElement(h.Z,(0,r.Z)({},C,{disableSpacing:!0,className:i()("dialogActionsFluid",{columnLayout:"column"==y},C.className)}),m))))};m.propTypes=u.Z;let y=m},1467:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(16019),a=n(77354),i=n(45697),o=n.n(i),s=n(67294),c=n(44247),u=n(32419),l=n(9047),d=n(32466),f=n(68659),p=["onClick"],h="styles__DialogBackButton___1c7yH",v=(0,f.Z)(c.Z),m=function(e){var t=e.onClick,n=(0,a.Z)(e,p),i=v().t;return s.createElement("div",{className:h},s.createElement(l.default,(0,r.Z)({onClick:t},n,{"aria-label":i("backButton"),className:"dialogIconButton",size:"medium"}),s.createElement(u.default,{icon:d.default})))};m.propTypes={onClick:o().func.isRequired};let y=m},30910:function(e,t,n){"use strict";n.d(t,{Z:()=>y});var r=n("16019"),a=n("77354"),i=n("45697"),o=n.n(i),s=n("67294"),c=n("44247"),u=n("32419"),l=n("9047");let d=function(e){return s.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),s.createElement("path",{fillRule:"evenodd",d:"M8 6.59l5.3-5.3a1 1 0 011.4 1.42L9.42 8l5.3 5.3a1 1 0 01-1.42 1.4L8 9.42l-5.3 5.3a1 1 0 11-1.4-1.42L6.58 8l-5.3-5.3A1 1 0 112.7 1.3L8 6.58z"}))};var f=n("68659"),p=["onClick"],h="styles__DialogCloseButton___cxKPO",v=(0,f.Z)(c.Z),m=function(e){var t=e.onClick,n=(0,a.Z)(e,p),i=v().t;return s.createElement("div",{className:h},s.createElement(l.default,(0,r.Z)({onClick:t},n,{"aria-label":i("closeButton"),className:"dialogIconButton",size:"medium"}),s.createElement(u.default,{icon:d})))};m.propTypes={onClick:o().func.isRequired};let y=m},26662:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(16019),a=n(94184),i=n.n(a),o=n(67294),s=n(1467),c=n(30910),u=n(11844),l=n(98067),d=n(38611),f=n(36055),p=n(46590),h=n(96503),v=n(20958),m=function(e){var t=e.onClose,n=e.onBack,a=e.title,u=e.content,m=e.actions,y=e.actionsLayout,g=(0,l.Z)(e),b=g.dialogProps,w=g.dialogTitleProps,k=g.fullScreen,x=g.id,O=g.dividerProps,C=g.dialogActionsProps,S=g.dialogContentProps,E=n||t;return o.createElement(d.ZP,b,!k&&t&&o.createElement(c.Z,{"data-testid":"modal-close-button-".concat(x),onClick:t}),!k&&n&&o.createElement(s.Z,{"data-testid":"modal-back-button-".concat(x),onClick:n}),k&&E&&o.createElement(s.Z,{"data-testid":"modal-backclose-button-".concat(x),onClick:E}),a&&o.createElement(o.Fragment,null,o.createElement(f.Z,w,a),o.createElement(v.default,O)),o.createElement(p.Z,S,o.createElement("div",{className:"dialogContentInner"},u)),o.createElement(v.default,O),m&&o.createElement(h.Z,(0,r.Z)({},C,{disableSpacing:!0,className:i()({columnLayout:"column"==y},C.className)}),m))};m.propTypes=u.Z;let y=m},16579:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(16019),a=n(17508),i=n(51991),o=n.n(i),s=n(67294),c=n(1467),u=n(30910),l=n(11844),d=n(98067),f=n(38611),p=n(46590),h=n(36055),v=n(96503);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=function(e){var t=e.onClose,n=e.onBack,a=e.title,i=e.content,l=e.actions,m=e.actionsLayout,g=(0,d.Z)(y(y({},e),{},{isFluidTitle:!0,disableTitleAutoPadding:!0})),b=g.dialogProps,w=g.dialogTitleProps,k=g.id,x=g.fullScreen,O=g.dialogActionsProps,C=g.dialogContentProps,S=n||t;return s.createElement(f.ZP,b,!x&&t&&s.createElement(u.Z,{"data-testid":"modal-close-button-".concat(k),onClick:t}),!x&&n&&s.createElement(c.Z,{onClick:n,"data-testid":"modal-back-button-".concat(k)}),x&&S&&s.createElement(c.Z,{"data-testid":"modal-backclose-button-".concat(k),onClick:S}),s.createElement(p.Z,C,s.createElement("div",{className:"dialogContentInner withFluidActions u-pt-1-half"},a&&s.createElement("div",{className:"dialogTitleFluidContainer"},s.createElement(h.Z,(0,r.Z)({},w,{className:o()("u-flex u-flex-justify-center",w.className)}),a)),s.createElement("div",{className:o()("dialogContentWrapper",{withActions:!!l})},i),l&&s.createElement(v.Z,(0,r.Z)({},O,{disableSpacing:!0,className:o()("dialogActionsFluid",{columnLayout:"column"==m},O.className)}),l))))};g.propTypes=l.Z;let b=g},11844:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(45697),a=n.n(r);let i={size:a().oneOf(["small","medium","large","full"]),open:a().bool.isRequired,disableTitleAutoPadding:a().bool,background:a().string,title:a().node,content:a().node,actions:a().node,actionsLayout:a().oneOf(["row","column"]),onClose:a().func,onBack:a().func}},40137:function(e,t,n){"use strict";n.r(t),n.d(t,{FixedDialog:()=>O.Z,PermissionDialog:()=>j,Dialog:()=>i.Z,IllustrationDialog:()=>C.Z,AllowLocationDialog:()=>ei,FixedActionsDialog:()=>x,ConfirmDialog:()=>o.Z,InstallFlagshipAppDialog:()=>en,useCozyDialog:()=>p.Z,DialogBackButton:()=>r.Z,TopAnchoredDialog:()=>N,AuthentificationDialog:()=>$,DialogCloseButton:()=>a.Z});var r=n("1467"),a=n("30910"),i=n("17006"),o=n("53189"),s=n("16019"),c=n("17508"),u=n("51991"),l=n.n(u),d=n("67294"),f=n("11844"),p=n("98067"),h=n("38611"),v=n("46590"),m=n("36055"),y=n("96503"),g=n("20958");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k=function(e){var t=e.onClose,n=e.onBack,i=e.title,o=e.content,c=e.actions,u=e.actionsLayout,f=(0,p.Z)(w(w({},e),{},{isFluidTitle:!0})),b=f.dialogProps,k=f.dialogTitleProps,x=f.fullScreen,O=f.id,C=f.dividerProps,S=f.dialogActionsProps,E=f.dialogContentProps,P=n||t;return d.createElement(h.ZP,b,!x&&t&&d.createElement(a.Z,{"data-testid":"modal-close-button-".concat(O),onClick:t}),!x&&n&&d.createElement(r.Z,{"data-testid":"modal-back-button-".concat(O),onClick:n}),x&&P&&d.createElement(r.Z,{"data-testid":"modal-backclose-button-".concat(O),onClick:P}),d.createElement(v.Z,E,d.createElement("div",{className:"dialogContentInner"},i&&d.createElement("div",{className:"dialogTitleFluidContainer"},d.createElement(m.Z,k,i)),o)),d.createElement(g.default,C),c&&d.createElement(y.Z,(0,s.Z)({},S,{disableSpacing:!0,className:l()({columnLayout:"column"==u},S.className)}),c))};k.propTypes=f.Z;let x=k;var O=n("26662"),C=n("16579"),S=n("94184"),E=n.n(S),P=n("45697"),_=n.n(P),A=n("32419"),R=n("9758"),D=n("99127"),M=(0,n("41120").Z)({floatingIcon:{top:"-2.25rem",width:"4.5rem",height:"4.5rem"}}),T=function(e){var t=e.open,n=e.icon,r=e.title,a=e.content,i=e.actions,s=e.actionsLayout,c=e.onClose,u=M();return d.createElement(D.default,{variant:"inverted"},d.createElement(o.Z,{open:t,size:"small",disableTitleAutoPadding:!0,classes:{paper:"overflow"},componentsProps:{dialogTitle:{className:"u-ta-center u-pt-2 u-pb-half"}},title:d.createElement(d.Fragment,null,d.createElement(D.default,{variant:"normal",className:"u-flex u-flex-justify-center"},d.createElement(R.default,{square:!0,elevation:2,className:E()(u.floatingIcon,"u-pos-absolute u-bdrs-circle u-flex u-bg-white")},d.createElement(A.default,{className:"u-m-auto",icon:n,size:48}))),r),content:a,actions:i,actionsLayout:s,onClose:c}))};T.propTypes={open:_().bool.isRequired,icon:_().func.isRequired,title:_().string.isRequired,content:_().node,actions:_().node,actionsLayout:_().oneOf(["row","column"]),onClose:_().func};let j=T,N=(0,n("68893").Z)({scrollPaper:{alignItems:"start"},paper:{}})(function(e){return d.createElement(h.ZP,e)});var I=n("25002"),L=n("16396"),z=n("41256");let Z=(0,z.Z)({en:{cancel:"Cancel",allow:"Allow","allow-location-dialog":{title:"Allow access to your location",description:"Your Cozy needs to always be authorised to access your phone's location in order to memorise and help you analyse your movements, even when the app is not in use.\n\nIt will NEVER be passed on to anyone without your request.\n\nYou can deactivate this feature from the Coach CO2 app settings."},"install-flagship-app-dialog":{title:"Scan the QR Code",text:"or go directly to the <img src=%{iosIconSrc} /> <a href='%{iosUrl}' class='u-link' target='_blank' rel='noopener'>App Store</a><br>or <img src=%{androidIconSrc} /> <a href='%{androidUrl}' class='u-link' target='_blank' rel='noopener'>Play Store</a> to install the Cozy Cloud app",a11n:"Go to the Cozy Cloud application download page"},"authentification-dialog":{title:"Login","title-oidc":"Cozy Pass",subtitle:"For security, please confirm your identity",label:"Cozy password","label-oidc":"Cozy Pass password",abort:"Leave",unlock:"Unlock","forgotten-password":"I forgot my password",errors:{invalid_password:"Incorrect password, try again.",server_error:"Something went wrong with the server. Please, reload the page."}}},fr:{cancel:"Annuler",allow:"Autoriser","allow-location-dialog":{title:"Autoriser l'acc\xe8s \xe0 votre position",description:"Votre Cozy a besoin d'\xeatre toujours autoris\xe9 \xe0 acc\xe9der \xe0 la position de votre t\xe9l\xe9phone pour m\xe9moriser, et vous aider \xe0 analyser vos d\xe9placements, m\xeame lorsque l'app n'est pas utilis\xe9e ou affich\xe9e.\n\nElle ne sera JAMAIS transmise \xe0 qui que ce soit sans votre demande.\n\nVous pourrez d\xe9sactiver cette fonctionnalit\xe9 depuis les param\xe8tres de l'app Coach CO2."},"install-flagship-app-dialog":{title:"Scannez le QR Code",text:"ou rendez vous directement sur <img src=%{iosIconSrc} /> <a href='%{iosUrl}' class='u-link' target='_blank' rel='noopener'>l’App Store</a><br>ou sur le <img src=%{androidIconSrc} /> <a href='%{androidUrl}' class='u-link' target='_blank' rel='noopener'>Play Store</a> pour installer l’app Cloud Personnel Cozy",a11n:"Aller sur la page de t\xe9l\xe9chargement de l'application Cloud Personnel Cozy"},"authentification-dialog":{title:"Authentification","title-oidc":"Cozy Pass",subtitle:"Par s\xe9curit\xe9, merci de confirmer votre identit\xe9",label:"Mot de passe Cozy","label-oidc":"Mot de passe Cozy Pass",abort:"Quitter",unlock:"D\xe9verrouiller","forgotten-password":"J'ai oubli\xe9 mon mot de passe",errors:{invalid_password:"Mot de passe incorrect, essayer \xe0 nouveau.",server_error:"Une erreur s'est produite. Merci de recharger la page."}}}});var B=n("41496");let F=function(e){return d.createElement("svg",(0,s.Z)({viewBox:"0 0 64 64",fill:"none"},e),d.createElement("path",{d:"M0 35.333c0 9.819 7.96 17.778 17.778 17.778h28.444c9.819 0 17.778-7.96 17.778-17.778 0-8.705-6.258-15.95-14.52-17.48C47.95 9.591 40.706 3.333 32 3.333c-8.706 0-15.95 6.258-17.48 14.52C6.257 19.383 0 26.628 0 35.333z",fill:"#B3D3FF"}),d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34.667 35.445A6.668 6.668 0 0032 22.667a6.667 6.667 0 00-2.667 12.778v5.888a2.667 2.667 0 105.334 0v-5.888z",fill:"#297EF2"}))};var U=n("9047"),V=n("90736"),H=n("6197"),W=n("33642"),q=n("23153"),G=n("62125");function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let Q=(0,z.Z)({en:{"password-field":{show:"Show password",hide:"Hide password"}},fr:{"password-field":{show:"Afficher le mot de passe",hide:"Masquer le mot de passe"}}})(function(e){var t=(0,G.useI18n)().t,n=(0,d.useState)(!0),r=(0,I.Z)(n,2),a=r[0],i=r[1];return d.createElement(q.default,(0,s.Z)({variant:"outlined",type:a?"password":"text"},e,{InputProps:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({endAdornment:d.createElement(W.Z,{position:"end"},d.createElement(U.default,{label:t(a?"password-field.show":"password-field.hide"),disabled:e.disabled,onClick:function(){return i(!a)},edge:"end"},d.createElement(A.default,{icon:a?V.Z:H.Z})))},e.InputProps)}))});var Y=n("32692"),J=function(e){var t=e.onClose,n=e.onSubmit,r=e.isLoading,a=e.isOIDC,i=e.error,o=e.resetRedirection,s=(0,G.useI18n)().t,c=(0,L.useClient)(),u=(0,d.useState)(""),l=(0,I.Z)(u,2),f=l[0],p=l[1],h=function(e){e.preventDefault(),n(f)},v=(0,d.useMemo)(function(){var e=new URL("/auth/passphrase_reset",c.getStackClient().uri);return o&&e.searchParams.set("from",o),e.href},[c,o]);return d.createElement(j,{open:!0,onClose:t,title:s("authentification-dialog.".concat(a?"title-oidc":"title")),icon:F,content:d.createElement("form",{onSubmit:h},d.createElement(Y.default,{variant:"body1",className:"u-ta-center"},s("authentification-dialog.subtitle")),d.createElement(Q,{autoFocus:!0,disabled:r,value:f,onChange:function(e){p(e.currentTarget.value)},className:"u-mv-1",label:s("authentification-dialog.".concat(a?"label-oidc":"label")),error:!!i,helperText:i&&s("authentification-dialog.errors.".concat(i)),fullWidth:!0,required:!0}),d.createElement(Y.default,{variant:"body1",component:"a",color:"primary",href:v,className:"u-link"},s("authentification-dialog.forgotten-password"))),actions:d.createElement(B.default,{busy:r,disabled:r||0===f.length,onClick:h,label:s("authentification-dialog.unlock"),fullWidth:!0})})};J.defaultProps={isOIDC:!1},J.propTypes={onClose:_().func,onSubmit:_().func,isLoading:_().bool,isOIDC:_().bool,error:_().string,resetRedirection:_().string};let $=Z(J),X=n.p+"static/image/QRCodeInstallFlagshipAppDialog.de9b11bb.png";var ee=n("25750"),et=(0,d.forwardRef)(function(e,t){var n=e.onClose,r=e.playStoreUrl,a=e.appStoreUrl,i=e.QRCode,o=(0,G.useI18n)().t;return d.createElement(C.Z,{open:!0,ref:t,size:"small",onClose:n,componentsProps:{dialogTitle:{className:"u-pt-2-half"}},title:d.createElement(ee.default,{href:"https://cozy.io/download",target:"_blank",rel:"noopener noreferrer"},d.createElement("img",{src:i,width:"100%",alt:"","aria-hidden":!0}),d.createElement("span",{className:"u-visuallyhidden"},o("install-flagship-app-dialog.a11n"))),content:d.createElement("div",{className:"u-ta-center"},d.createElement(Y.default,{gutterBottom:!0,variant:"h3",color:"textPrimary"},o("install-flagship-app-dialog.title")),d.createElement(Y.default,{color:"textSecondary",className:"u-ta-center",dangerouslySetInnerHTML:{__html:o("install-flagship-app-dialog.text",{androidUrl:r,androidIconSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAaVBMVEUAAABChfL3ugP6vQQ0qVLfQEA0qFPrQzU7lK6KaKIzqFLqQzZjrEDuYSkzqFLqQzX6vQX6vAPpRDboQjcyp1LpQzb7uwQwp1BChfQ0qFPqQzX7vAQ8kriBbK3uuwlZrER/rzXtWizwcCO3VHXJAAAAGHRSTlMA4CDffxDv7+Dg39/PwJ+fn5+AcGBQQCDtAoUNAAAAWElEQVQI1z3MRwKAIAxEUcTee0kiWO5/SIkR/2reZpSKoFmVLwNIIo9gB4Bi+rCxoNIC1mGp1wyn0xJRKDA3/TCIF1GnGQZd9fIe8C5nuc4R0yFW0oitnw85agdgC2xS8QAAAABJRU5ErkJggg==",iosUrl:a,iosIconSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAY1BMVEUAAAAbivUapPUVnfcdj/YcifQbjfUaqvkZvPobmfcavPockPYarvkgd/Qar/kdmfYcfPMbgfMcivMcmPYcfPMdffQbn/YckfQap/kbn/Qbt/ochvcbj/UatfkbofgcgPQbp/jS6lwFAAAAHHRSTlMA4CAQn4DQoN/fsK8/MP7v7s/Av7+fkJB/YF8/OgJnugAAAF1JREFUCNc9jEcOwCAQAzfsAimQ3kPJ/18ZQIQ5WB5ZMkSQIYOftq7bIsrauwjrJRaR7ynL4PbLqSxNw3BYYuPUGUF0mI44iCpBwlRzmKb09Hge0m+QWMcQGvOnhg/hzAM6wPTOXQAAAABJRU5ErkJggg=="})}}))})});et.propTypes={onClose:_().func,playStoreUrl:_().string,appStoreUrl:_().string,QRCode:_().any},et.defaultProps={playStoreUrl:"https://play.google.com/store/apps/details?id=io.cozy.flagship.mobile",appStoreUrl:"https://apps.apple.com/app/my-cozy/id1600636174",QRCode:X},et.displayName="InstallFlagshipAppDialog";let en=Z(et),er=function(e){return d.createElement("svg",(0,s.Z)({viewBox:"0 0 172 128",fill:"none"},e),d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M51.533 125.273c2.862 1.018 10.204 1.899 16.121 2.251 16.158.963 38.736.439 48.306-1.331 9.642-1.785 10.07-4.485-14.44-5.821-20.872-1.139-45.234.484-50.444 2.901-1.399.648-1.322 1.369.457 2z",fill:"#BBD9FD"}),d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M92.189 18.264l-34.745 7.19c-5.051 1.052-8.293 5.965-7.248 10.99l14.47 69.251c1.045 5.03 5.99 8.247 11.037 7.217l34.749-7.217a9.282 9.282 0 007.243-10.99l-14.464-69.24c-1.051-5.025-5.99-8.253-11.042-7.201z",fill:"#297EF1"}),d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M108.213 83.562L68.9 91.715 57.72 38.219l39.324-8.142 11.169 53.485zm-14.002 16.2a3.515 3.515 0 01-4.85.998 3.456 3.456 0 01-1.507-2.209 3.468 3.468 0 01.51-2.615c1.092-1.558 3.204-1.992 4.844-1.009a3.475 3.475 0 011.013 4.824l-.01.01z",fill:"#BBD9FD"}),d.createElement("path",{d:"M131.104 0c-18.777 0-34 15.222-34 34l.004.46a33.997 33.997 0 0017.697 29.386l.241.129.094-.163c-.507.853-.823 1.741-.823 2.623 0 1.898.905 3.494 2.734 4.132l.307.102c3.468 1.092 6.602.057 10.395-2.599l.289-.207.749.06c.767.051 1.539.077 2.313.077 18.778 0 34-15.222 34-34s-15.222-34-34-34z",fill:"#fff"}),d.createElement("path",{d:"M131.104 0c-18.777 0-34 15.222-34 34l.004.46a33.997 33.997 0 0017.697 29.386l.241.129.094-.163c-.507.853-.823 1.741-.823 2.623 0 1.898.905 3.494 2.734 4.132l.307.102c3.468 1.092 6.602.057 10.395-2.599l.289-.207.749.06c.767.051 1.539.077 2.313.077 18.778 0 34-15.222 34-34s-15.222-34-34-34zm0 4c16.569 0 30 13.431 30 30 0 16.569-13.431 30-30 30a30.39 30.39 0 01-3.395-.19l-.773-.087-1.19.867c-2.986 2.143-5.098 2.895-7.163 2.27l-.214-.07c-.048-.017-.052-.023-.052-.356 0-.038.09-.29.241-.544l.081-.13a7.163 7.163 0 00.964-2.237l.392-1.598-1.493-.692A30.001 30.001 0 01101.104 34c0-16.569 13.432-30 30-30z",fill:"#BBD9FD"}),d.createElement("path",{d:"M144.667 29.333c0 7.992-9.776 20.872-12.586 24.41a.945.945 0 01-1.495 0C127.776 50.204 118 37.324 118 29.332 118 21.97 123.97 16 131.333 16c7.364 0 13.334 5.97 13.334 13.333z",fill:"#97ECA1"}),d.createElement("circle",{cx:131.333,cy:29.333,fill:"#09AE1C",r:5.333}))};var ea=(0,d.forwardRef)(function(e,t){var n=e.onClose,r=e.onAllow,a=e.description,i=(0,G.useI18n)().t;return d.createElement(C.Z,{open:!0,ref:t,size:"small",onClose:n,title:d.createElement("div",{className:"u-flex u-flex-column u-flex-items-center"},d.createElement(A.default,{icon:er,width:128,height:128}),d.createElement(Y.default,{variant:"h3",className:"u-ta-center"},i("allow-location-dialog.title"))),content:d.createElement("div",{className:"u-ta-center"},d.createElement(Y.default,{gutterBottom:!0,variant:"body1",color:"textPrimary",style:{whiteSpace:"pre-line"}},a||i("allow-location-dialog.description"))),actions:d.createElement(d.Fragment,null,d.createElement(B.default,{variant:"secondary",label:i("cancel"),onClick:n}),d.createElement(B.default,{variant:"primary",label:i("allow"),onClick:r}))})});ea.propTypes={onClose:_().func,onAllow:_().func,description:_().string},ea.displayName="AllowLocationDialog";let ei=Z(ea)},44247:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r={en:{closeButton:"Close",backButton:"Back"},fr:{closeButton:"Fermer",backButton:"Retour"},es:{closeButton:"Cerrar",backButton:"Atr\xe1s"}}},98067:function(e,t,n){"use strict";n.d(t,{Z:()=>C});var r=n("17508"),a=n("25002"),i=n("77354"),o=n("94184"),s=n.n(o),c=n("67294"),u=n("16019"),l=n("67159"),d=n("82285"),f=n("45697"),p=n.n(f),h=["fullScreen","isFullscreen"],v=(0,c.forwardRef)(function(e,t){var n=e.fullScreen,r=e.isFullscreen,a=(0,i.Z)(e,h);return n||r?c.createElement(d.Z,(0,u.Z)({ref:t,direction:"up"},a)):c.createElement(l.Z,(0,u.Z)({ref:t},a))});v.propTypes={fullScreen:p().bool};var m=n("89909"),y=n("41120"),g=["size","actions","actionsLayout","title","content","open","opened","onBack","onClose","align","disableTitleAutoPadding","isFluidTitle","disableGutters","titleRef","background","componentsProps"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k=0,x=["small","medium","large","full"],O=(0,y.Z)({paper:{background:function(e){var t=e.background;return null!=t?t:"var(--paperBackgroundColor)"}}});let C=function(e){var t,n=e.size,r=(e.actions,e.actionsLayout,e.title,e.content,e.open),o=e.opened,u=e.onBack,l=e.onClose,d=e.align,f=e.disableTitleAutoPadding,p=e.isFluidTitle,h=e.disableGutters,y=e.titleRef,b=e.background,C=e.componentsProps,S=(0,i.Z)(e,g),E=(0,m.default)().isMobile,P=(0,c.useState)(k++),_=(0,a.Z)(P,1)[0],A=x.includes(n)?"".concat(n):"medium",R="small"!==n&&E,D=O({background:b}),M=w(w({"aria-labelledby":"modal-title-".concat(_),fullScreen:R,open:void 0!==r?r:o,onClose:l,TransitionComponent:v},S),{},{classes:w(w({},S.classes),{},{paper:"".concat(A," ").concat(D.paper," ").concat(S.classes?S.classes.paper:""),scrollPaper:"top"==d?"alignTop":""}),TransitionProps:w({fullScreen:R},S.TransitionProps)}),T=!R&&l,j=u||R&&l,N=w(w({},null==C?void 0:C.dialogTitle),{},{id:"modal-title-".concat(_),ref:y,disableTypography:!0,className:"cozyDialogTitle "+s()({"u-ellipsis":!p,dialogTitleFluid:p,dialogTitleWithClose:T&&!f,dialogTitleWithBack:j&&!f},null==C?void 0:null===(t=C.dialogTitle)||void 0===t?void 0:t.className)}),I=w(w({},null==C?void 0:C.divider),{},{classes:{root:"divider--dialog"}});return{dialogProps:M,dialogTitleProps:N,listItemProps:{classes:{root:"listItem--dialog"}},id:_,fullScreen:R,dividerProps:I,dialogActionsProps:w(w({},null==C?void 0:C.dialogActions),{},{classes:{root:"cozyDialogActions"}}),dialogContentProps:w(w({},null==C?void 0:C.dialogContent),{},{classes:{root:s()({disableGutters:h})},className:"cozyDialogContent"})}}},96503:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=n(66856).Z},46590:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=n(29525).Z},36055:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=n(66083).Z},38611:function(e,t,n){"use strict";n.d(t,{ZP:()=>S});var r,a,i=n("16019"),o=n("77354"),s=n("52663"),c=n("94184"),u=n.n(c),l=n("67294"),d=n("59693"),f=n("8920"),p=n("25976"),h=n("22960"),v=n("32202"),m=n("10923"),y=n("99127");(r=a||(a={})).BackgroundDefault="default",r.BackgroundPaper="paper",r.CozyBarBackground="background-color",r.CozyBarClass=".coz-bar-wrapper",r.CozyBarPrimaryClass="coz-theme-primary",r.DialogClass=".MuiPaper-root",r.OverlayActive="rgba(0, 0, 0, 0.5)",r.OverlayTransparent="transparent",r.RootModalColor="color",r.SidebarID="sidebar";var g=function(e){var t=e.cozybar,n=e.fullscreen,r=e.sidebar,i=e.rootModal,o=e.theme,s=t&&!i;return n?{bottomBackground:o.palette.background.paper,bottomTheme:m.ThemeColor.Dark,topBackground:o.palette.background.paper,topTheme:m.ThemeColor.Dark}:{bottomBackground:i?void 0:o.palette.background[r?a.BackgroundDefault:a.BackgroundPaper],bottomTheme:m.ThemeColor.Light,bottomOverlay:a.OverlayActive,topOverlay:a.OverlayActive,topBackground:s?getComputedStyle(t).getPropertyValue(a.CozyBarBackground):void 0,topTheme:m.ThemeColor.Light}},b=function(e){var t=e.rootModal,n=e.theme,r=e.immersive,i=e.sidebar,o=e.cozybar,s=e.isLight,c=t&&.5>(0,d.H3)(getComputedStyle(t).getPropertyValue(a.RootModalColor)),u=!t,l=o&&!t,f=c||!r&&!(o&&o.classList.contains(a.CozyBarPrimaryClass))&&s;return{bottomBackground:u?n.palette.background[i?a.BackgroundDefault:a.BackgroundPaper]:void 0,bottomTheme:c||!r&&s?m.ThemeColor.Dark:m.ThemeColor.Light,bottomOverlay:a.OverlayTransparent,topOverlay:a.OverlayTransparent,topBackground:l?getComputedStyle(o).getPropertyValue(a.CozyBarBackground):void 0,topTheme:f?m.ThemeColor.Dark:m.ThemeColor.Light}},w=function(){var e=document.querySelectorAll(a.DialogClass);return e.length>1?e[0]:null},k=function(e,t,n,r){var a=(0,h.useWebviewIntent)();(0,l.useEffect)(function(){return e&&(0,m.parseArg)(a,t,"".concat(r||"unknown"," (onOpenMount)")),function(){e&&void 0!==e&&(0,m.parseArg)(a,n,"".concat(r||"unknown"," (onOpenUnmount)"))}},[e,a])},x=(0,p.isFlagshipApp)()||v.q6?function(e,t){var n=(0,f.Z)(),r=(0,y.useCozyTheme)().isLight,i=document.querySelector(a.CozyBarClass),o=document.getElementById(a.SidebarID),s=w(),c=!!(0,v.ym)().immersive;k(e,g({fullscreen:t,theme:n,sidebar:o,rootModal:s,cozybar:i,isLight:r}),b({rootModal:s,theme:n,immersive:c,sidebar:o,cozybar:i,isLight:r}),["cozy-ui/Dialog",t?"--fullScreen":"",s?"--stacked":"",c?"--immersive":""].join(""))}:function(){},O=["className"],C=function(e){var t=e.className,n=(0,o.Z)(e,O),r=(0,y.useCozyTheme)(),a=r.type,c=r.variant;return x(n.open,n.fullScreen),l.createElement(s.Z,(0,i.Z)({className:u()("CozyTheme--".concat(a,"-").concat(c),t)},n))};C.defaultProps={disableEnforceFocus:!0};let S=C},20958:function(e,t,n){"use strict";n.r(t),n.d(t,{DeprecatedDivider:()=>k,default:()=>b});var r=n("17508"),a=n("16019"),i=n("55517"),o=n("67294"),s=n("77354"),c=n("94184"),u=n.n(c),l=n("45697"),d=n.n(l),f=n("32692"),p=["color","variant","textAlign","children","className"],h={divider:"styles__divider___SuA5q",center:"styles__center___3K8dw"},v=function(e){var t=e.color,n=e.variant,r=e.textAlign,i=e.children,c=e.className,l=(0,s.Z)(e,p);return o.createElement(f.default,(0,a.Z)({color:void 0===t?"textPrimary":t,variant:void 0===n?"body2":n,className:u()(h.divider,h[r],c)},l),i)};v.propTypes={textAlign:d().oneOf(["center"])};var m=n("68893");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var g=(0,o.forwardRef)(function(e,t){return"string"==typeof e.children?o.createElement(v,(0,a.Z)({},e,{ref:t})):o.createElement(i.Z,(0,a.Z)({},e,{ref:t}))});g.displayName="Divider",g.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},v.propTypes);let b=g;var w={sm:{padding:16},md:{padding:32}},k=(0,m.Z)(function(e){var t;return{root:(t={},(0,r.Z)(t,e.breakpoints.down("md"),{width:"calc(100% + ".concat(w.sm.padding,"*2px)"),marginLeft:"-".concat(w.sm.padding,"px")}),(0,r.Z)(t,e.breakpoints.up("md"),{width:"calc(100% + ".concat(w.md.padding,"*2px)"),marginLeft:"-".concat(w.md.padding,"px")}),t)}})(g)},28158:function(e,t,n){"use strict";n.d(t,{Z:()=>w});var r=n("16019"),a=n("77354"),i=n("282"),o=n("45697"),s=n.n(o),c=n("67294"),u=n("32419"),l=n("52747"),d=n("32692"),f=n("41120"),p=["spaceBetween","variant","disabled","noWrap","color","children","innerTextProps","innerIconContainerProps","innerIconProps"],h=(0,f.Z)(function(e){return{container:{display:"flex",width:"100%",alignItems:"center",justifyContent:function(e){return e.spaceBetween?"space-between":"left"}},typography:{color:function(t){var n=t.disabled;return e.palette.text[n?"disabled":"primary"]}},endIcon:{display:"flex",marginLeft:"5px",marginTop:function(e){return"body1"===e.variant?"3px":void 0},color:function(t){var n=t.disabled;return e.palette.text[n?"disabled":"primary"]}}}}),v={h1:24,h2:17,h3:15,h4:14,h5:13,h6:12,body1:12,body2:11,caption:10,subtitle1:11,subtitle2:10},m=(0,c.forwardRef)(function(e,t){var n=e.spaceBetween,i=e.variant,o=void 0===i?"body1":i,s=e.disabled,f=e.noWrap,m=e.color,y=e.children,g=e.innerTextProps,b=e.innerIconContainerProps,w=e.innerIconProps,k=(0,a.Z)(e,p),x=h({spaceBetween:void 0!==n&&n,disabled:void 0!==s&&s,color:void 0===m?"primary":m,variant:o});return c.createElement("div",(0,r.Z)({ref:t,className:x.container},k),c.createElement(d.default,(0,r.Z)({classes:{root:x.typography},variant:o,noWrap:void 0!==f&&f},g),y),c.createElement(d.default,(0,r.Z)({classes:{root:x.endIcon}},b),c.createElement(u.default,(0,r.Z)({icon:l.Z,size:v[o]},w))))});m.propTypes={spaceBetween:s().bool,variant:s().string,disabled:s().bool,noWrap:s().bool,innerTextProps:s().object,innerIconContainerProps:s().object,innerIconProps:s().object,children:s().node};var y=["spaceBetween","textVariant","disabled","fullWidth","noWrap","children","className","dropdownTextProps"],g=(0,f.Z)({root:{height:"auto",width:function(e){var t=e.fullWidth,n=e.noWrap;return t||n?"calc(100% + 16px)":"auto"},margin:"-8px",padding:"8px"},text:{textTransform:"none",textAlign:"left"}}),b=(0,c.forwardRef)(function(e,t){var n=e.spaceBetween,o=e.textVariant,s=e.disabled,u=e.fullWidth,l=e.noWrap,d=e.children,f=e.className,p=e.dropdownTextProps,h=(0,a.Z)(e,y),v=g({fullWidth:u,noWrap:l}),b=v.root,w=v.text;return c.createElement(i.Z,(0,r.Z)({ref:t,classes:{root:b,text:w},disabled:s,className:f},h),c.createElement(m,(0,r.Z)({variant:o,spaceBetween:n,disabled:s,noWrap:l},p),d))});b.defaultProps={spaceBetween:!1,textVariant:"body1",disabled:!1,fullWidth:!1,noWrap:!1},b.propTypes={spaceBetween:s().bool,textVariant:s().string,disabled:s().bool,fullWidth:s().bool,noWrap:s().bool,dropdownTextProps:s().object,className:s().string,children:s().node};let w=b},41581:function(e,t,n){"use strict";n.r(t),n.d(t,{Empty:function(){return m},EmptySubTitle:function(){return y},default:function(){return g}});var r=n(16019),a=n(17508),i=n(77354),o=n(94184),s=n.n(o),c=n(45697),u=n.n(c),l=n(67294),d=n(32419),f=n(32692),p=["icon","iconSize","title","text","children","className","centered","componentsProps"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var v={"c-empty":"styles__c-empty___3w5oV","c-empty--centered":"styles__c-empty--centered___2ijsY","c-empty-img":"styles__c-empty-img___2GC4d","c-empty-img--medium":"styles__c-empty-img--medium___1d2Zd","c-empty-img--large":"styles__c-empty-img--large___3s3vC","c-empty-title":"styles__c-empty-title___2HduE","c-empty-text":"styles__c-empty-text___3HnvR"},m=function(e){var t,n,o=e.icon,c=e.iconSize,u=e.title,m=e.text,g=e.children,b=e.className,w=e.centered,k=e.componentsProps,x=(0,i.Z)(e,p),O="object"==typeof o&&!!o.props;return l.createElement("div",(0,r.Z)({className:s()(v["c-empty"],(0,a.Z)({},v["c-empty--centered"],w),b)},x),o&&(O?l.cloneElement(o,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({className:s()(v["c-empty-img"],(0,a.Z)({},v["c-empty-img--".concat(c)],"normal"!==c),null===(t=o.props)||void 0===t?void 0:t.className),size:(null===(n=o.props)||void 0===n?void 0:n.size)||(o.type===d.default?"100%":void 0)},null==k?void 0:k.icon)):l.createElement(d.default,(0,r.Z)({className:s()(v["c-empty-img"],(0,a.Z)({},v["c-empty-img--".concat(c)],"normal"!==c)),icon:o,size:"100%"},null==k?void 0:k.icon))),u&&l.createElement(f.default,(0,r.Z)({gutterBottom:!0,variant:"h3",color:"textPrimary"},null==k?void 0:k.title),u),m&&l.createElement(y,(0,r.Z)({gutterBottom:!0},null==k?void 0:k.text),m),l.createElement("div",(0,r.Z)({className:v["c-empty-text"]},null==k?void 0:k.childrenContainer),g))};m.propTypes={icon:d.iconPropType,iconSize:u().oneOf(["normal","medium","large"]),title:u().node,text:u().node,centered:u().bool,children:u().node,componentsProps:u().shape({icon:u().object,title:u().object,text:u().object,childrenContainer:u().object}),className:u().string},m.defaultProps={iconSize:"normal"};var y=function(e){var t=(0,r.Z)({},e);return l.createElement(f.default,(0,r.Z)({variant:"body1",color:"textSecondary"},t))};let g=m},96802:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=n(33758).Z},75536:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=n(73637).Z},14868:function(e,t,n){"use strict";n.r(t),n.d(t,{FileImageLoader:()=>_,default:()=>A});var r,a=n("11954"),i=n("46932"),o=n("89526"),s=n("64222"),c=n("26238"),u=n("11998"),l=n("28446"),d=n("17508"),f=n("87757"),p=n.n(f),h=n("45697"),v=n.n(h),m=n("67294"),y=n("16396"),g=n("67348"),b=n("33918"),w=n.n(b);var k=(r=(0,a.Z)(p().mark(function e(t){var n,r,a;return p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,r=null,a=function(){clearTimeout(n),r.onload=r.onerror=null,r.src="",r=null},e.abrupt("return",new Promise(function(e,a){(r=new Image).onload=e,r.onerror=a,r.src=t,n=setTimeout(function(){return a(Error("Loading image took too long"))},1e4)}).then(function(){return a()}));case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),x=n("33398"),O="PENDING",C="LOADING_LINK",S="LOADING_FALLBACK",E="LOADED",P="GET_LINK",_=function(e){(0,c.Z)(y,e);var t,n,r,f,h,v,m=(t=y,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);return e=n?Reflect.construct(r,arguments,(0,l.Z)(this).constructor):r.apply(this,arguments),(0,u.Z)(this,e)});function y(){var e;(0,i.Z)(this,y);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=m.call.apply(m,[this].concat(n)),(0,d.Z)((0,s.Z)(e),"state",{src:null}),(0,d.Z)((0,s.Z)(e),"_mounted",!1),(0,d.Z)((0,s.Z)(e),"handleCreate",function(t){var n=e.props,r=n.file,a=n.linkType;r._id===t._id&&t.format===a&&e.loadLink()}),e}return(0,o.Z)(y,[{key:"componentDidMount",value:function(){var e=this.props.client;this._mounted=!0,this.status=O,this.loadNextSrc(),this.realtime=e.plugins.realtime,this.type="io.cozy.files.thumbnails",this.realtime.subscribe("created",this.type,this.handleCreate)}},{key:"componentWillUnmount",value:function(){this._mounted=!1,this.img&&(this.img.onload=this.img.onerror=null,this.img.src=""),this.realtime&&this.realtime.unsubscribe("created",this.type,this.handleCreate)}},{key:"getFileId",value:function(e){return e.id||e._id}},{key:"loadNextSrc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.props.file;if(!(0,g.isEncrypted)(t))this.status===O?this.getLink():this.status===P?this.loadLink():this.status===C?this.loadFallback():this.status===S&&(w().warn("failed loading thumbnail",e),this.setState({status:"FAILED"}),this.props.onError(e))}},{key:"fetchFileLinks",value:(r=(0,a.Z)(p().mark(function e(t){var n;return p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.client.collection("io.cozy.files").get(this.getFileId(t));case 2:if((n=e.sent).data.links){e.next=5;break}throw Error("Could not fetch file links");case 5:return e.abrupt("return",n.data.links);case 6:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"getLink",value:(f=(0,a.Z)(p().mark(function e(){var t,n,r,a,i,o;return p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status=P,n=(t=this.props).file,r=t.linkType,a=t.client,e.prev=2,i=!!n.links&&n.links[r]){e.next=6;break}throw Error("".concat(r," link is not available"));case 6:return o=a.getStackClient().uri+i,e.next=9,k(o);case 9:this._mounted&&(this.status=E,this.setState({src:o})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),this.loadNextSrc(e.t0);case 15:case"end":return e.stop()}},e,this,[[2,12]])})),function(){return f.apply(this,arguments)})},{key:"loadLink",value:(h=(0,a.Z)(p().mark(function e(){var t,n,r,a,i,o;return p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.status=C,n=(t=this.props).file,r=t.linkType,a=t.client,e.prev=2,e.next=5,this.fetchFileLinks(n);case 5:if(i=e.sent[r]){e.next=9;break}throw Error("".concat(r," link is not available"));case 9:return o=a.getStackClient().uri+i,e.next=12,k(o);case 12:this._mounted&&(this.status=E,this.setState({src:o})),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),w().error(e.t0),this.loadNextSrc(e.t0);case 19:case"end":return e.stop()}},e,this,[[2,15]])})),function(){return h.apply(this,arguments)})},{key:"loadFallback",value:(v=(0,a.Z)(p().mark(function e(){var t,n,r,a;return p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status=S,n=(t=this.props).file,r=t.client,e.prev=2,"pdf"!==n.class){e.next=5;break}throw Error("No pdf files fallback");case 5:return e.next=7,r.collection("io.cozy.files").getDownloadLinkById(this.getFileId(n),n.name);case 7:return a=e.sent,e.next=10,k(a);case 10:this._mounted&&(this.status=E,this.setState({src:a})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),this.loadNextSrc(e.t0);case 16:case"end":return e.stop()}},e,this,[[2,13]])})),function(){return v.apply(this,arguments)})},{key:"render",value:function(){var e=this.state.src,t=this.props,n=t.render,r=t.renderFallback;return this.context&&this.context.url?n(this.context.url):e?n(e):r?r():null}}]),y}(m.Component);(0,d.Z)(_,"contextType",x.EncryptedContext),_.propTypes={file:v().object.isRequired,render:v().func.isRequired,linkType:v().oneOf(["tiny","small","medium","large","icon"]),onError:v().func,renderFallback:v().func},_.defaultProps={linkType:"small",onError:function(){}};let A=(0,y.withClient)(_)},67655:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(67294),a=n(1756),i="styles__c-file-path___XvgNN";let o=function(e){var t=e.children,n=e.className;return r.createElement(a.default,{className:"".concat(n," ").concat(i)},t)}},11571:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=n(41749).Z},91873:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(67294),a=n(51236),i=n.n(a),o={display:"none"};let s=function(){return r.createElement("div",{style:o,dangerouslySetInnerHTML:{__html:i()}})}},51236:function(e){e.exports='<svg><defs>\n        <path d="M164,261 C164,258.790861 165.790861,257 168,257 C170.209139,257 172,258.790861 172,261 C174.209139,261 176,262.790861 176,265 C176,267.209139 174.209139,269 172,269 L164,269 C161.790861,269 160,267.209139 160,265 C160,262.790861 161.790861,261 164,261 Z M165.146447,264.853553 C165.300738,265.007845 165.568968,265.222429 165.939431,265.434122 C166.557029,265.787035 167.249166,266 168,266 C168.750834,266 169.442971,265.787035 170.060569,265.434122 C170.431032,265.222429 170.699262,265.007845 170.853553,264.853553 C171.048816,264.658291 171.048816,264.341709 170.853553,264.146447 C170.658291,263.951184 170.341709,263.951184 170.146447,264.146447 C170.050738,264.242155 169.850218,264.402571 169.564431,264.565878 C169.088279,264.837965 168.561666,265 168,265 C167.438334,265 166.911721,264.837965 166.435569,264.565878 C166.149782,264.402571 165.949262,264.242155 165.853553,264.146447 C165.658291,263.951184 165.341709,263.951184 165.146447,264.146447 C164.951184,264.341709 164.951184,264.658291 165.146447,264.853553 Z" id="path-1"/>\n    \n    <path id="file-none-a" d="M10,5.0999 L10,2 L4,2 C3.45,2 3,2.45 3,3 L3,13 C3,13.55 3.45,14 4,14 L12,14 C12.55,14 13,13.55 13,13 L13,6 L11.1001,6 L11.5,6.3999 L9.4,8.4999 L11.5,10.5999 L10.1,11.9999 L8,9.8999 L5.9,11.9999 L4.5,10.5999 L6.6,8.4999 L4.5,6.3999 L5.9,4.9999 L8,7.0999 L10,5.0999 Z M15,5 L15,15.004 C15,15.555 14.55,16 13.993,16 L2.007,16 C1.451,16 1,15.556 1,14.999 L1,1.001 C1,0.448 1.446,0 1.998,0 L10,0 L11,0 L15,4 L15,5 Z"/>\n  \n    <path id="file-a" d="M1,1.00087166 C1,0.448105505 1.4463114,0 1.99754465,0 L10,0 L10,5 L15,5 L15,15.0044225 C15,15.5542648 14.5500512,16 13.9931545,16 L2.00684547,16 C1.45078007,16 1,15.5553691 1,14.9991283 L1,1.00087166 Z M11,4 L11,0 L15,4 L11,4 Z"/>\n  <clipPath id="clip0_3250_157"><path d="M0 0h16v16H0z"/></clipPath>\n    <path id="hourglass-a" d="M4.4997,13 C4.4997,12.453 4.8397,11.709 5.2597,11.349 L7.9997,9 L10.7407,11.349 C11.1637,11.712 11.4997,12.447 11.4997,13 L4.4997,13 Z M11.4997,3 C11.4997,3.547 11.1597,4.292 10.7407,4.651 L10.3327,5 L5.6667,5 L5.2597,4.651 C4.8357,4.288 4.4997,3.552 4.4997,3 L11.4997,3 Z M12.9997,13 C12.9997,12.443 12.6837,11.684 12.2937,11.294 L8.9997,8 L12.2937,4.706 C12.6837,4.316 12.9997,3.556 12.9997,3 L12.9997,2 C13.5507,2 13.9997,1.556 13.9997,1 C13.9997,0.448 13.5437,0 12.9977,0 L3.0027,0 C2.4487,0 1.9997,0.444 1.9997,1 C1.9997,1.552 2.4557,2 3.0027,2 L2.9997,3 C2.9997,3.552 3.3127,4.312 3.7057,4.706 L6.9997,8 L3.7057,11.294 C3.3127,11.688 2.9997,12.447 2.9997,13 L2.9997,14 C2.4557,14 1.9997,14.447 1.9997,15 C1.9997,15.556 2.4487,16 3.0027,16 L12.9977,16 C13.5437,16 13.9997,15.553 13.9997,15 C13.9997,14.443 13.5507,14 12.9977,14 L12.9997,13 Z"/>\n  <path id="info" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zM7 4a1 1 0 1 0 2 0 1 1 0 1 0-2 0zm1 2H6v2h1v4a1 1 0 0 0 1 1h2v-2H9V7a1 1 0 0 0-1-1z"/>\n    <path id="pen" d="M9.5 3.5l3 3L3.04 16H0v-2.97L9.5 3.5zM14.91.92l.18.17c.77.78.78 2.05 0 2.84L14.03 5 11 2 12.09.91a2 2 0 0 1 2.82 0z"/>\n  \n        <path id="plus-small" d="M4 4V1a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2H6v3a1 1 0 1 1-2 0V6H1a1 1 0 1 1 0-2h3z"/>\n    \n    <polygon id="plus-a" points="7 0 9 0 9 7 16 7 16 9 9 9 9 16 7 16 7 9 0 9 0 7 7 7"/>\n  </defs><symbol id="icon-check-animated" viewBox="0 0 16 16">\n<style>\n@-webkit-keyframes checkmark \n{\n0% {\n    stroke-dashoffset: 100px\n}\n\n100% {\n    stroke-dashoffset: 200px\n}\n}\n\n@-ms-keyframes checkmark \n{\n0% {\n    stroke-dashoffset: 100px\n}\n\n100% {\n    stroke-dashoffset: 200px\n}\n}\n\n@keyframes checkmark \n{\n0% {\n    stroke-dashoffset: 100px\n}\n\n100% {\n    stroke-dashoffset: 0px\n}\n}\npath {\n-webkit-animation: checkmark 1.0s ease-in-out backwards;\nanimation: checkmark 1.0s ease-in-out backwards\n}\n</style>\n<path d="M1 11L4 14L15 3" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="stroke-dasharray:100px, 100px; stroke-dashoffset: 200px;"/>\n</symbol><symbol id="icon-cross-animated" viewBox="0 0 16 16">\n<style>\n@-webkit-keyframes checkmark \n{\n0% {\n    stroke-dashoffset: 100px\n}\n100% {\n    stroke-dashoffset: 200px\n}\n}\n@-ms-keyframes checkmark \n{\n0% {\n    stroke-dashoffset: 100px\n}\n100% {\n    stroke-dashoffset: 200px\n}\n}\n@keyframes checkmark \n{\n0% {\n    stroke-dashoffset: 100px\n}\n100% {\n    stroke-dashoffset: 0px\n}\n}\npath.l1 {\n-webkit-animation: checkmark 0.5s ease-in-out backwards;\nanimation: checkmark 0.5s ease-in-out backwards\n}\npath.l2 {\n-webkit-animation: checkmark 0.5s ease-in-out 0.16s backwards;\nanimation: checkmark 0.5s ease-in-out 0.16s backwards\n}\n</style>\n<path class="l1" d="M2 2L14 14" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="stroke-dasharray:100px, 100px; stroke-dashoffset: 200px;"/>\n<path class="l2" d="M14 2L2 14" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="stroke-dasharray:100px, 100px; stroke-dashoffset: 200px;"/>\n</symbol><symbol id="account" viewBox="0 0 32 32"><g fill-rule="evenodd" clip-rule="evenodd" fill="#855CEA"><path d="M24 17c2.21 0 4-2.015 4-4.5S26.21 8 24 8s-4 2.015-4 4.5 1.79 4.5 4 4.5Zm-4 1c-2 0-4 3-4 4s0 2 1 2h14c1 0 1-1 1-2s-2-4-4-4c-.899 0-1.192.202-1.514.424-.395.273-.835.576-2.486.576-1.651 0-2.09-.303-2.486-.576C21.192 18.202 20.9 18 20 18Z" fill-opacity=".5"/><path d="M12 18c3.314 0 6-3.134 6-7s-2.686-7-6-7-6 3.134-6 7 2.686 7 6 7Zm-6 1c-3 0-6 4.5-6 6s0 3 1.5 3h21c1.5 0 1.5-1.5 1.5-3s-3-6-6-6c-1.349 0-1.788.303-2.271.637-.593.408-1.252.863-3.729.863-2.477 0-3.136-.455-3.729-.863C7.788 19.303 7.348 19 6 19Z"/><path d="M12 18c3.314 0 6-3.134 6-7s-2.686-7-6-7-6 3.134-6 7 2.686 7 6 7Zm-6 1c-3 0-6 4.5-6 6s0 3 1.5 3h21c1.5 0 1.5-1.5 1.5-3s-3-6-6-6c-1.349 0-1.788.303-2.271.637-.593.408-1.252.863-3.729.863-2.477 0-3.136-.455-3.729-.863C7.788 19.303 7.348 19 6 19Z"/></g></symbol><symbol id="bottom-select" viewBox="0 0 24 24">\n  <g fill="#95999d" fill-rule="evenodd" transform="translate(12.285714, 12.000000) rotate(90.000000) translate(-12.285714, -12.000000)">\n    <path d="M6.46026077,20.3174036 C5.84657974,20.9310847 5.84657974,21.9260582 6.46026077,22.5397392 C7.0739418,23.1534203 8.06891534,23.1534203 8.68259637,22.5397392 L18.1111678,13.1111678 C18.7248488,12.4974868 18.7248488,11.5025132 18.1111678,10.8888322 L8.68259637,1.46026077 C8.06891534,0.846579743 7.0739418,0.846579743 6.46026077,1.46026077 C5.84657974,2.0739418 5.84657974,3.06891534 6.46026077,3.68259637 L14.7776644,12 L6.46026077,20.3174036 Z"/>\n  </g>\n</symbol><symbol id="check-white" viewBox="0 0 20 20">\n    <path d="M3 10.019l4.523 4.523 9.541-9.541" stroke="#FFF" stroke-width="2" fill="none"/>\n</symbol><symbol id="cloud-broken" viewBox="0 0 160 160"><g fill="none" fill-rule="evenodd"><path fill="#93BEF8" d="M61.763 130.593l-3.174 7.933h59.045-.003c23.356 0 42.369-19.126 42.369-42.634 0-22.218-16.977-40.52-38.56-42.467a42.494 42.494 0 0 0-12.426-25.27 42.873 42.873 0 0 0-4.68-3.992l-3.156 7.892c7.203 6.153 11.888 15.26 12.12 25.41.055 2.478 2.056 4.446 4.499 4.446h.34c18.71 0 33.93 15.405 33.93 34.338 0 18.936-15.22 34.34-33.93 34.34h-.324l-.01.004h-56.04zm39.415-106.538l3.157-7.892C97.128 10.86 88.462 8 79.387 8 68.245 8 57.724 12.311 49.76 20.158c-6.974 6.868-11.308 15.77-12.438 25.4-9.568 1.135-18.411 5.5-25.239 12.514C4.29 66.086 0 76.677 0 87.89c0 23.511 19 42.637 42.366 42.637H58.59l3.174-7.933H42.537c-.097-.007-.194-.007-.292-.007l-.107.007h-.275c-18.71 0-33.93-15.405-33.93-34.341 0-18.507 14.863-33.905 33.132-34.331 2.406-.056 4.343-2.017 4.398-4.45.419-18.494 15.638-33.538 33.92-33.538 8.248 0 15.873 3.062 21.795 8.122z"/><path stroke="#297EF1" stroke-linecap="round" stroke-width="8" d="M50 156L110 4"/></g></symbol><symbol id="cloud-sync2" viewBox="0 0 96 96"><path fill-rule="evenodd" clip-rule="evenodd" d="M26.667 83.676C11.939 83.676 0 71.737 0 57.01c0-13.06 9.387-23.926 21.781-26.22C24.075 18.395 34.941 9.01 48 9.01c13.059 0 23.925 9.386 26.22 21.78C86.613 33.085 96 43.95 96 57.01c0 14.464-11.516 26.239-25.88 26.655l-.787.011H26.667Z" fill="#B2D3FF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M66.156 57.51a2.668 2.668 0 0 1 1.214 3.57c-3.603 7.304-11.12 12.096-19.371 12.096-6.307 0-12.117-2.885-16.117-7.413-.275 1.181-1.283 2.08-2.55 2.08a2.668 2.668 0 0 1-2.666-2.667V54.51c0-.168.042-.318.069-.475.016-.072.013-.144.032-.213a2.58 2.58 0 0 1 .395-.854c.02-.026.048-.048.066-.072.168-.218.37-.402.595-.557a2.648 2.648 0 0 1 2.043-.424c.072.016.14.035.21.053.23.067.446.171.659.307.072.045.144.077.213.128.03.024.064.035.094.059l8 6.666a2.665 2.665 0 0 1 .338 3.755 2.629 2.629 0 0 1-1.917.939c2.877 2.496 6.592 4.021 10.536 4.021 6.195 0 11.875-3.619 14.587-9.12a2.665 2.665 0 0 1 3.57-1.213Zm3.094-7.766c-.01.053-.008.107-.022.157a2.568 2.568 0 0 1-.415.843c-.032.045-.07.075-.105.115a2.546 2.546 0 0 1-.57.514c-.067.046-.128.091-.2.128a2.76 2.76 0 0 1-.886.31c-.008 0-.016.005-.02.008-.025.002-.046-.008-.07-.006a2.625 2.625 0 0 1-1.086-.109 2.552 2.552 0 0 1-.674-.33c-.061-.04-.126-.067-.181-.113-.02-.016-.043-.018-.062-.037l-8-6.667a2.665 2.665 0 0 1-.341-3.754c.55-.659 1.346-.942 2.139-.915a16.33 16.33 0 0 0-10.758-4.045c-6.31 0-12.021 3.64-14.666 9.184a2.667 2.667 0 0 1-4.813-2.296C32.043 35.34 39.625 30.509 48 30.509c6.38 0 12.183 2.79 16.154 7.238.33-1.094 1.31-1.904 2.512-1.904a2.668 2.668 0 0 1 2.666 2.666v10.667c0 .203-.042.384-.082.568Z" fill="#297EF1"/></symbol><symbol id="cloud-sync" viewBox="0 0 32 32">\n    <g fill="none" fill-rule="evenodd">\n        <g>\n            <path fill="#B2D3FF" d="M8.889 27.892c-4.91 0-8.889-3.98-8.889-8.889 0-4.353 3.129-7.975 7.26-8.74.765-4.13 4.387-7.26 8.74-7.26 4.353 0 7.975 3.13 8.74 7.26 4.131.765 7.26 4.387 7.26 8.74 0 4.822-3.839 8.747-8.627 8.885l-.262.004H8.89z"/>\n            <path fill="#297EF1" d="M22.052 19.17c.44.217.621.75.405 1.19-1.201 2.435-3.707 4.032-6.457 4.032-2.103 0-4.04-.962-5.373-2.471-.091.394-.427.693-.85.693-.49 0-.888-.398-.888-.889V18.17c0-.056.014-.106.023-.158.005-.024.004-.048.01-.071.028-.106.072-.201.132-.285l.022-.024c.056-.073.124-.134.198-.186.022-.016.044-.03.068-.043.184-.104.399-.142.613-.098.024.005.047.012.07.018.077.022.149.057.22.102.024.015.048.026.071.043.01.008.021.011.031.02l2.667 2.221c.377.314.427.875.113 1.252-.166.2-.4.301-.64.313.96.832 2.198 1.34 3.513 1.34 2.065 0 3.958-1.206 4.862-3.04.217-.44.75-.621 1.19-.404zm1.031-2.589c-.003.018-.002.036-.007.053-.03.105-.077.198-.138.28-.011.016-.024.026-.035.039-.055.067-.12.124-.19.171-.023.016-.043.03-.067.043-.092.05-.191.087-.295.103-.003 0-.005.002-.007.003-.008 0-.015-.003-.023-.002-.096.012-.194.004-.292-.018-.024-.005-.046-.01-.07-.018-.077-.024-.153-.062-.225-.11-.02-.014-.042-.023-.06-.038-.007-.005-.015-.006-.02-.012l-2.668-2.223c-.376-.313-.428-.874-.113-1.251.183-.22.449-.314.713-.305-.96-.838-2.22-1.348-3.586-1.348-2.103 0-4.007 1.213-4.89 3.06-.21.444-.741.631-1.184.42-.443-.211-.631-.742-.42-1.184C10.682 11.78 13.21 10.17 16 10.17c2.127 0 4.061.93 5.385 2.412.11-.364.436-.634.837-.634.49 0 .889.398.889.888v3.556c0 .068-.014.128-.028.19z"/>\n        </g>\n    </g>\n</symbol><symbol id="contacts" viewBox="0 0 32 32"><g fill-rule="evenodd" clip-rule="evenodd"><path d="M32 25.995A1.997 1.997 0 0 1 30.002 28H24v-2.499c0-.829-.666-1.5-1.5-1.5-.829 0-1.5.678-1.5 1.5v2.5H11v-2.5c0-.829-.666-1.5-1.5-1.5-.829 0-1.5.678-1.5 1.5v2.5H1.998A2.002 2.002 0 0 1 0 25.994V6.005C0 4.897.889 4 2.001 4h27.997C31.104 4 32 4.897 32 6.005v19.99Z" fill="#FFD799"/><path d="M12 15.5c1.5 0 3 2.25 3 3l-.004.393c-.02.598-.128 1.107-.746 1.107H3.75C3 20 3 19.25 3 18.5s1.5-3 3-3 .75.75 3 .75 1.5-.75 3-.75ZM28 18v1H17v-1h11Zm0-3v1H17v-1h11ZM9 8c1.657 0 3 1.511 3 3.375s-1.343 3.375-3 3.375-3-1.51-3-3.375C6 9.511 7.343 8 9 8Zm19 4v1H17v-1h11Zm-5-3v1h-6V9h6Z" fill="#FF9300"/></g></symbol><symbol id="cozy-authentification" viewBox="0 0 64 64"><path d="M0 35.333c0 9.819 7.96 17.778 17.778 17.778h28.444c9.819 0 17.778-7.96 17.778-17.778 0-8.705-6.258-15.95-14.52-17.48C47.95 9.591 40.706 3.333 32 3.333c-8.706 0-15.95 6.258-17.48 14.52C6.257 19.383 0 26.628 0 35.333Z" fill="#B3D3FF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M34.667 35.445A6.668 6.668 0 0 0 32 22.667a6.667 6.667 0 0 0-2.667 12.778v5.888a2.667 2.667 0 1 0 5.334 0v-5.888Z" fill="#297EF2"/></symbol><symbol id="cozy-logo" viewBox="0 0 101 30">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0-5h101v40H0z"/>\n        <path fill="#297EF1" d="M29.408 30H10.592C4.75 30 0 25.317 0 19.56c0-2.745 1.072-5.338 3.02-7.3a10.589 10.589 0 0 1 6.31-3.064 10.316 10.316 0 0 1 3.11-6.22A10.607 10.607 0 0 1 19.847 0a10.61 10.61 0 0 1 7.406 2.976 10.324 10.324 0 0 1 3.107 6.187C35.756 9.64 40 14.121 40 19.561 40 25.317 35.247 30 29.408 30zm-.226-2.5h.079c4.543 0 8.239-3.612 8.239-8.05 0-4.438-3.696-8.048-8.239-8.048h-.083a1.08 1.08 0 0 1-1.092-1.043C27.983 6.025 24.289 2.5 19.85 2.5c-4.44 0-8.135 3.526-8.237 7.86a1.08 1.08 0 0 1-1.068 1.044c-4.436.1-8.045 3.709-8.045 8.047 0 4.438 3.696 8.049 8.239 8.049h.067l.026-.002c.024 0 .047 0 .07.002H29.183zm-3.127-8.333v-.002c.199.12.255.366.125.55a.453.453 0 0 1-.594.116 2.329 2.329 0 0 1-.485-.387c-1.448 1.204-3.28 1.806-5.11 1.806-1.827 0-3.654-.6-5.1-1.798a2.31 2.31 0 0 1-.476.378.455.455 0 0 1-.595-.115c-.13-.183-.074-.428.125-.549.732-.438.767-1.247.767-1.279.008-.217.206-.393.44-.386.235.005.423.185.419.402 0 .03-.013.414-.214.866 2.603 2.255 6.684 2.252 9.282-.014-.196-.446-.208-.824-.21-.853-.005-.217.184-.398.422-.402.238-.003.432.169.437.388.002.035.038.84.767 1.279zm33.222-4.905a1.405 1.405 0 0 1-.227.227.516.516 0 0 1-.319.085.756.756 0 0 1-.436-.162 5.113 5.113 0 0 0-1.404-.702c-.325-.109-.725-.163-1.202-.163-.624 0-1.174.113-1.651.338a3.179 3.179 0 0 0-1.19.962c-.316.416-.556.923-.721 1.521a7.592 7.592 0 0 0-.247 2.015c0 .771.087 1.458.26 2.06.173.603.42 1.11.741 1.521.32.412.71.724 1.17.937.46.212.97.318 1.534.318.546 0 .997-.067 1.352-.202.355-.134.65-.279.884-.435.234-.156.429-.301.585-.436.156-.134.316-.201.481-.201.208 0 .368.078.481.234l.728.936a4.903 4.903 0 0 1-1.02.949c-.378.26-.778.472-1.203.637a6.792 6.792 0 0 1-1.332.364 8.488 8.488 0 0 1-1.411.117 5.846 5.846 0 0 1-2.308-.455 5.228 5.228 0 0 1-1.858-1.326c-.525-.58-.939-1.293-1.242-2.139-.303-.845-.455-1.804-.455-2.879 0-.98.136-1.885.41-2.717a6.046 6.046 0 0 1 1.209-2.151 5.588 5.588 0 0 1 1.969-1.418c.78-.342 1.673-.513 2.678-.513.945 0 1.777.152 2.496.455.72.303 1.36.732 1.924 1.287l-.676.936zm8.814-2.678c.97 0 1.848.158 2.633.474a5.489 5.489 0 0 1 2.001 1.366c.55.593.973 1.308 1.268 2.145.295.836.442 1.774.442 2.814s-.147 1.98-.442 2.821c-.295.84-.717 1.556-1.267 2.145a5.527 5.527 0 0 1-2.002 1.358c-.785.317-1.662.475-2.633.475-.98 0-1.861-.158-2.645-.474a5.59 5.59 0 0 1-2.009-1.359c-.555-.59-.981-1.304-1.28-2.145-.3-.84-.449-1.781-.449-2.821 0-1.04.15-1.978.449-2.814a6.11 6.11 0 0 1 1.28-2.146 5.55 5.55 0 0 1 2.008-1.365c.785-.316 1.667-.474 2.646-.474zm0 11.622c1.248 0 2.18-.42 2.795-1.261.615-.84.923-2.024.923-3.549s-.308-2.71-.923-3.556c-.615-.845-1.547-1.267-2.795-1.267-1.265 0-2.208.422-2.828 1.267-.62.846-.929 2.03-.929 3.556 0 1.525.31 2.708.93 3.549.62.84 1.562 1.261 2.827 1.261zM86.46 12.858c0 .182-.032.36-.097.533-.066.173-.15.32-.254.442l-6.929 9.178h7.046V25H76.203v-1.066c0-.121.03-.266.091-.436.06-.169.147-.327.26-.474l6.968-9.243h-6.916v-1.989h9.854v1.066zm14.144-1.066l-7.332 17.043a1.07 1.07 0 0 1-.312.442c-.13.104-.32.156-.572.156h-1.885l2.418-5.265L87.5 11.792h2.21c.217 0 .386.052.507.156a.906.906 0 0 1 .26.351l3.354 7.93c.07.2.136.4.201.605a6.6 6.6 0 0 1 .163.604 14.609 14.609 0 0 1 .416-1.222l3.237-7.917a.84.84 0 0 1 .286-.364.729.729 0 0 1 .442-.143h2.028z"/>\n    </g>\n</symbol><symbol id="cozy" viewBox="0 0 52 52">\n  <path fill="#297EF2" fill-rule="evenodd" d="M558.23098,44 L533.76902,44 C526.175046,44 520,37.756072 520,30.0806092 C520,26.4203755 521.393962,22.9628463 523.927021,20.3465932 C526.145918,18.0569779 529.020185,16.6317448 532.129554,16.2609951 C532.496769,13.1175003 533.905295,10.2113693 536.172045,7.96901668 C538.760238,5.40737823 542.179607,4 545.800788,4 C549.420929,4 552.841339,5.40737823 555.429532,7.96796639 C557.686919,10.2008665 559.091284,13.0912433 559.467862,16.2179336 C566.482405,16.8533543 572,22.8284102 572,30.0816594 C572,37.756072 565.820793,44 558.22994,44 L558.23098,44 Z M558.068077,40.9989547 L558.171599,40.9989547 C564.142748,40.9989547 569,36.0883546 569,30.0520167 C569,24.0167241 564.142748,19.1061239 558.171599,19.1061239 L558.062901,19.1061239 C557.28338,19.1061239 556.644649,18.478972 556.627051,17.6887604 C556.492472,11.7935317 551.63729,7 545.802791,7 C539.968291,7 535.111039,11.7956222 534.977495,17.690851 C534.959896,18.4664289 534.34187,19.0914904 533.573737,19.1092597 C527.743378,19.2451426 523,24.1536522 523,30.0530619 C523,36.0893999 527.857252,41 533.828401,41 L533.916395,41 L533.950557,40.9979094 C533.981614,40.9979094 534.01267,40.9979094 534.043727,41 L558.064971,41 L558.068077,40.9989547 Z M553.766421,29.2227318 C552.890676,28.6381003 552.847676,27.5643091 552.845578,27.5171094 C552.839285,27.2253301 552.606453,26.9957683 552.32118,27.0000592 C552.035908,27.0054228 551.809368,27.2467844 551.814612,27.5364185 C551.81671,27.5750363 551.831393,28.0792139 552.066323,28.6735 C548.949302,31.6942753 544.051427,31.698566 540.928113,28.6917363 C541.169336,28.0888684 541.185068,27.576109 541.185068,27.5374911 C541.190312,27.2478572 540.964821,27.0086409 540.681646,27.0011319 C540.401618,26.9925502 540.163541,27.2264027 540.154102,27.5160368 C540.154102,27.5589455 540.11215,28.6370275 539.234308,29.2216592 C538.995183,29.3825669 538.92806,29.7097461 539.08433,29.9532532 C539.182917,30.1077246 539.346529,30.1924694 539.516434,30.1924694 C539.612923,30.1924694 539.710461,30.1645787 539.797512,30.1066519 C540.023003,29.9564713 540.211786,29.7848363 540.370154,29.6024742 C542.104862,31.2008247 544.296845,32 546.488828,32 C548.686055,32 550.883282,31.1976066 552.621136,29.5917471 C552.780553,29.7762546 552.971434,29.9521804 553.203218,30.1066519 C553.289219,30.1645787 553.387806,30.1924694 553.484295,30.1924694 C553.652102,30.1924694 553.816763,30.1066519 553.916399,29.9521804 C554.07162,29.7076006 554.004497,29.3793488 553.766421,29.2205864 L553.766421,29.2227318 Z" transform="translate(-520)"/>\n</symbol><symbol id="cozy-upgrade" viewBox="0 0 128 128"><path fill-rule="evenodd" clip-rule="evenodd" d="M115.149 70.393c-.483-5.764-3.108-11.079-7.096-15.408-4.338-4.707-10.593-8.496-17.246-9.151a27.82 27.82 0 0 0-20.435-23.542 28.937 28.937 0 0 0-6.54-.974v-.006c-.01.002-.022.002-.032.002-.011 0-.022 0-.033-.002v.006c-2.173.073-4.368.389-6.54.974-11.308 3.04-19.138 12.606-20.434 23.542-6.655.655-12.91 4.444-17.247 9.151-3.988 4.33-6.615 9.644-7.1 15.408a22.135 22.135 0 0 0 .327 5.968c.391 2.719 1.612 6.666 3.359 9.682 4.59 7.928 12.415 11.21 22.102 12.896 5.35.93 10.428 1.488 25.062 1.488l.471.002h.065l.47-.002c14.635 0 19.713-.557 25.061-1.488 9.687-1.686 17.513-4.968 22.102-12.896 1.749-3.016 2.97-6.963 3.361-9.682.373-1.965.493-3.976.323-5.968Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M57.845 24.584a26.48 26.48 0 0 1 5.954-.892 26.51 26.51 0 0 1 5.957.892C79.881 27.306 87.22 35.758 88.45 46.112a2.371 2.371 0 0 0 2.123 2.082c5.507.544 11.389 3.682 15.734 8.4 3.818 4.142 6.058 8.984 6.478 13.997v.002a19.714 19.714 0 0 1-.291 5.324l-.018.106c-.07.49-.177 1.049-.317 1.651A12.85 12.85 0 0 1 115.498 83c.884-2.354 1.431-4.627 1.67-6.247.412-2.195.529-4.401.347-6.56-.509-6.074-3.177-11.89-7.718-16.816-4.713-5.116-10.787-8.565-16.905-9.65C90.826 32.274 82.4 23.067 70.99 20a31.266 31.266 0 0 0-6.911-1.047 2.178 2.178 0 0 0-.358-.012c-.067.002-.127.004-.193.01-2.349.092-4.677.445-6.916 1.05-11.413 3.067-19.84 12.272-21.904 23.726-6.122 1.085-12.196 4.534-16.907 9.65-4.539 4.924-7.207 10.742-7.718 16.818a24.436 24.436 0 0 0 .348 6.558c.382 2.598 1.562 6.879 3.647 10.478 5.656 9.772 15.663 12.639 23.749 14.045 5.806 1.011 11.34 1.524 25.468 1.524l.472.002h.08l.456-.002c5.336 0 9.447-.073 12.809-.219a15.698 15.698 0 0 1 .06-2.8l.069-.573.05-.352.054-.336.062-.325.073-.321.014-.058c-3.293.152-7.5.237-13.191.237l-.53.002-.478-.002c-15.132 0-19.764-.602-24.654-1.454C28 94.749 21.883 91.235 18.187 84.853c-1.641-2.83-2.739-6.56-3.065-8.83a2.164 2.164 0 0 0-.018-.106 19.794 19.794 0 0 1-.292-5.326c.423-5.014 2.663-9.854 6.48-13.997 4.342-4.718 10.226-7.856 15.733-8.4a2.371 2.371 0 0 0 2.123-2.082c1.23-10.354 8.567-18.806 18.697-21.528Z" fill="#3281EE"/><path fill-rule="evenodd" clip-rule="evenodd" d="M81.82 71.666c-1.06-.782-2.3-2.349-2.257-3.124.046-.801-.294-1.502-.934-1.922-.68-.445-1.606-.49-2.359-.111a2.243 2.243 0 0 0-1.232 1.9c-.062 1.132.276 2.099.77 2.965-7.389 3.895-17.21 3.743-24.187-.427.447-.936.684-2.01.53-3.235-.178-1.4-1.489-2.114-2.6-1.976-1.168.147-1.909 1.101-1.762 2.268.17 1.345-.954 2.298-2.44 3.4a2.227 2.227 0 0 0-.893 2.066c.094.814.611 1.537 1.314 1.842.25.108.51.162.767.162a2.07 2.07 0 0 0 1.236-.43c.36-.266.785-.584 1.23-.953 4.406 2.677 9.749 4.024 15.098 4.024 4.99 0 9.987-1.173 14.23-3.522.305.292.633.58.993.846.404.296.847.442 1.28.442.636 0 1.247-.307 1.68-.892.699-.948.717-2.45-.463-3.323ZM105.09 78.09a.035.035 0 0 1-.013-.003.07.07 0 0 0-.012-.005c-9.842-3.563-13.751 5.785-14.71 8.425a2.194 2.194 0 0 0 1.312 2.813 2.194 2.194 0 0 0 2.814-1.31c.208-.576 3.075-7.964 9.095-5.798 6.002 2.21 3.45 9.714 3.242 10.288a2.195 2.195 0 1 0 4.127 1.501c.959-2.64 3.974-12.315-5.855-15.91Z" fill="#3281EE"/><path fill-rule="evenodd" clip-rule="evenodd" d="M112.131 102.779c.425-1.713.913-4.089.913-4.089.389-1.854-.577-3.726-2.261-4.53l-19.986-7.273c-1.806-.468-3.748.344-4.643 2.017 0 0-1.155 2.132-1.932 3.718-1.395 2.858-2.727 5.328-2.985 7.617-.693 6.22 3.79 12.417 10.593 14.903 6.809 2.469 14.226.602 17.69-4.607 1.277-1.921 1.842-4.67 2.611-7.756Z" fill="#B2D3FF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M88.925 91.71c-.046.467.124.965.33 1.222.546.699 1.636.927 2.362.398.732-.535 1.214-1.616.36-2.63-.727-.864-2.083-.68-2.727.194a1.693 1.693 0 0 0-.325.816ZM83.962 100.497c-.046.466.124.963.328 1.219.547.701 1.638.929 2.362.4.734-.534 1.216-1.616.363-2.629-.728-.864-2.084-.681-2.73.194a1.688 1.688 0 0 0-.323.816ZM91.418 111.358c-.047.464.121.963.326 1.219.549.701 1.637.929 2.363.4.732-.534 1.215-1.616.36-2.629-.727-.864-2.083-.681-2.728.192a1.682 1.682 0 0 0-.322.818ZM103.944 107.905c-.046.465.124.963.328 1.221.549.7 1.638.927 2.364.398.732-.534 1.214-1.615.36-2.629-.728-.864-2.083-.681-2.729.192a1.712 1.712 0 0 0-.323.818ZM105.79 97.984c-.046.467.124.965.328 1.221.547.7 1.638.928 2.364.398.732-.534 1.214-1.615.36-2.628-.728-.865-2.083-.68-2.729.193a1.695 1.695 0 0 0-.323.816Z" fill="#3281EE"/><path fill-rule="evenodd" clip-rule="evenodd" d="M100.802 96.234c-1.718-2.037-4.913-1.605-6.436.456a4.005 4.005 0 0 0-.762 1.925c-.11 1.094.293 2.267.768 2.873-.336.856-.71 1.847-1.153 3.072-1.015 2.796 3.297 4.492 4.32 1.679.471-1.306.87-2.355 1.223-3.25.421-.109.823-.29 1.189-.554 1.725-1.26 2.862-3.809.851-6.201Z" fill="#FEDBA7"/><path fill-rule="evenodd" clip-rule="evenodd" d="M98.794 96.382a2.624 2.624 0 0 0-.988-.153 3.14 3.14 0 0 0-2.378 1.245c-.28.378-.466.843-.51 1.275-.08.782.248 1.612.494 1.926l.464.594-.276.702c-.332.845-.703 1.828-1.14 3.038-.316.868.496 1.214.666 1.275.002 0 .002 0 .002.002.327.119.913.212 1.168-.497.45-1.242.855-2.317 1.239-3.285l.246-.62.645-.171c.284-.073.536-.192.752-.348.751-.548 1.26-1.354 1.357-2.15.088-.724-.161-1.442-.74-2.13a2.346 2.346 0 0 0-1.001-.703Zm-4.57 12.382c-1.685-.613-3.044-2.451-2.246-4.655.346-.952.65-1.768.927-2.487-.429-.834-.73-1.98-.612-3.14a5.318 5.318 0 0 1 1.011-2.577 5.78 5.78 0 0 1 4.417-2.315c1.595-.05 3.087.602 4.091 1.793l.002.002c1.052 1.255 1.517 2.69 1.341 4.148-.186 1.531-1.07 2.976-2.426 3.966a4.709 4.709 0 0 1-.961.54 125.98 125.98 0 0 0-.99 2.649c-.784 2.164-2.882 2.683-4.55 2.078-.002 0-.003 0-.003-.002Z" fill="#3281EE"/><path d="M29.419 125.29a81.818 81.818 0 0 0 16.14 2.244c16.167.948 38.76.424 48.326-1.346 9.567-1.771 10.083-4.465-14.448-5.812-20.925-1.147-45.26.474-50.362 2.894-1.52.648-1.447 1.371.344 2.02Z" fill="#BBD9FD"/><path d="M16 43c-.61 0-1.22-.488-1.22-1.22 0-.487-.121-2.56-2.56-2.56-.61 0-1.22-.488-1.22-1.22s.488-1.22 1.22-1.22c.365 0 2.56-.122 2.56-2.56 0-.61.488-1.22 1.22-1.22.61 0 1.22.488 1.22 1.22 0 .365.122 2.56 2.56 2.56.61 0 1.22.488 1.22 1.22s-.488 1.22-1.22 1.22c-.365 0-2.56.122-2.56 2.56-.122.732-.61 1.22-1.22 1.22ZM89 22c-.61 0-1.22-.488-1.22-1.22 0-.487-.121-2.56-2.56-2.56-.61 0-1.22-.488-1.22-1.22s.488-1.22 1.22-1.22c.365 0 2.56-.121 2.56-2.56 0-.61.488-1.22 1.22-1.22.61 0 1.22.488 1.22 1.22 0 .365.121 2.56 2.56 2.56.61 0 1.22.488 1.22 1.22s-.488 1.22-1.22 1.22c-.365 0-2.56.122-2.56 2.56-.122.732-.61 1.22-1.22 1.22ZM30 26c-.91 0-1.818-.727-1.818-1.818 0-3.455-2.91-6.364-6.364-6.364C20.91 17.818 20 17.091 20 16c0-.91.727-1.818 1.818-1.818 3.455 0 6.364-2.91 6.364-6.364C28.182 6.91 28.909 6 30 6c.91 0 1.818.727 1.818 1.818 0 3.455 2.91 6.364 6.364 6.364.909 0 1.818.727 1.818 1.818 0 .91-.727 1.818-1.818 1.818-3.455 0-6.364 2.91-6.364 6.364C31.818 25.09 31.091 26 30 26Zm-2.546-10c.91.727 1.819 1.454 2.546 2.546.727-.91 1.454-1.819 2.545-2.546-.909-.727-1.818-1.454-2.545-2.546A5.744 5.744 0 0 1 27.454 16ZM107 42c-.909 0-1.818-.727-1.818-1.818 0-3.455-2.909-6.364-6.364-6.364C97.91 33.818 97 33.091 97 32c0-.91.727-1.818 1.818-1.818 3.455 0 6.364-2.91 6.364-6.364 0-.909.727-1.818 1.818-1.818.909 0 1.818.727 1.818 1.818 0 3.455 2.909 6.364 6.364 6.364.909 0 1.818.727 1.818 1.818 0 .91-.727 1.818-1.818 1.818-3.455 0-6.364 2.91-6.364 6.364 0 .909-.727 1.818-1.818 1.818Zm-2.545-10c.909.727 1.818 1.455 2.545 2.545.727-.909 1.455-1.818 2.545-2.545-.909-.727-1.818-1.454-2.545-2.546A5.745 5.745 0 0 1 104.455 32Z" fill="#FF9300"/><circle cx="11" cy="23" r="2" fill="#FF8E8E"/><circle cx="30" cy="34" r="2" fill="#FF8E8E"/><circle cx="50" cy="12" r="2" fill="#FF8E8E"/><circle cx="107" cy="12" r="2" fill="#FF8E8E"/><circle cx="117" cy="47" r="2" fill="#FF8E8E"/><circle cx="8" cy="53" r="2" fill="#FF8E8E"/></symbol><symbol id="credit-card-large" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 5h28a2 2 0 0 1 2 2v18.23a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z" fill="#B2D3FF"/><path fill="#197BFF" d="M0 9.042h32v6.063H0z"/></symbol><symbol id="cross-white" viewBox="0 0 24 24">\n  <path fill="#FFF" fill-rule="evenodd" d="M106.585786,44 L96.2928932,33.7071068 C95.9023689,33.3165825 95.9023689,32.6834175 96.2928932,32.2928932 C96.6834175,31.9023689 97.3165825,31.9023689 97.7071068,32.2928932 L108,42.5857864 L118.292893,32.2928932 C118.683418,31.9023689 119.316582,31.9023689 119.707107,32.2928932 C120.097631,32.6834175 120.097631,33.3165825 119.707107,33.7071068 L109.414214,44 L119.707107,54.2928932 C120.097631,54.6834175 120.097631,55.3165825 119.707107,55.7071068 C119.316582,56.0976311 118.683418,56.0976311 118.292893,55.7071068 L108,45.4142136 L97.7071068,55.7071068 C97.3165825,56.0976311 96.6834175,56.0976311 96.2928932,55.7071068 C95.9023689,55.3165825 95.9023689,54.6834175 96.2928932,54.2928932 L106.585786,44 Z" transform="translate(-96 -32)"/>\n</symbol><symbol id="dash-white" viewBox="0 0 20 20"><path d="M3.497 10h13.006" stroke="#FFF" stroke-width="2"/></symbol><symbol id="device-browser" viewBox="0 0 32 32">\n    <g fill="none" fill-rule="evenodd">\n        <circle cx="16" cy="16" r="16" fill="#D9DDE1"/>\n        <path fill="#95999D" d="M22.76 2.84l.3-1.202.089.044c.115.058.23.117.344.177l.335.184.33.19.338.207.325.209c.231.153.459.312.682.477l.261.198.317.251.359.3.237.208.264.242.238.228.246.245.163.17.221.237.273.306.188.22.314.386.167.217.248.336.189.268.183.271.25.39.19.317.086.149c.135.236.264.476.388.72l.18.368.133.287.166.382.156.387c.173.447.327.903.461 1.369l.032.114c-.575.89-1.613 1.055-2.356.605l-.12-.08-.838-.613c-.074-.055-.168-.072-.255-.05l-.063.024-1.075.551c-.003.006-.002.024.002.03l.3.111c.025.01.049.021.07.036.88.611.968 1.649.451 2.339l-.087.106-.758.852c-.502.563-1.342.71-2.01.37l-.13-.074-2.045-1.288c-.007-.005-.011-.007-.023-.002l-.01.008-.161.95v.012l.007.01 1.067.974c.55.502.678 1.291.331 1.929l-.081.134-1.697 2.51-.049.15-.148 3.609c-.014.36-.15.7-.386.973l-.107.113-2.316 2.215c-.316.303-.734.46-1.156.46-.23 0-.459-.046-.674-.14l-.159-.08-1.5-.859c-.353-.201-.616-.525-.74-.902l-.039-.143-.69-3.08-.663-1.739-.007-.01-.013-.005-3.03-.257c-.482-.041-.919-.287-1.198-.666l-.087-.131-1.724-2.902c-.16-.27-.236-.583-.22-.893l.016-.155.434-2.815c.056-.367.237-.697.513-.945l.124-.101 2.648-1.95c.423-.312.978-.404 1.48-.253l.149.052 2.524 1.029.04.013.043.007 3.411.363.207-.053 2.268-1.587.009-.013-.001-.015-.219-.477-.008-.01-.012-.004-6.61-.353c-.255-.014-.507-.086-.729-.21-.582-.326-.903-.955-.817-1.605.08-.599.489-1.096 1.06-1.303l.147-.046 1.918-.504.127-.07 2.376-2.19c.225-.207.509-.349.811-.408l.153-.022 3.652-.367c.01-.001.019-.008.02-.018z"/>\n    </g>\n</symbol><symbol id="device-laptop" viewBox="0 0 32 32">\n  <g fill="none" fill-rule="evenodd" transform="translate(0 4)">\n    <path fill="#32363F" d="M2,21 L2,1.99456145 C2,0.892995579 2.89989752,0 3.99124431,0 L28.0087557,0 C29.1084896,0 30,0.90234375 30,1.99456145 L30,21 L2,21 Z"/>\n    <rect width="24" height="16" x="4" y="2" fill="#5D6165"/>\n    <path fill="#95999D" d="M19,20.5 C19,20.7761424 18.7670975,21 18.4965773,21 L12.5034227,21 C12.22539,21 12,20.7680664 12,20.5 L12,20.5 C12,20.2238576 11.7709994,20 11.4996527,20 L0.500347316,20 C0.224013124,20 0,20.2150574 0,20.4904785 L0,22 C0,23.1045695 0.889261723,24 2.00174332,24 L29.9982567,24 C31.103789,24 32,23.1122704 32,22 L32,20.4904785 C32,20.2195947 31.7743607,20 31.506259,20 L19.493741,20 C19.2210554,20 19,20.2319336 19,20.5 L19,20.5 Z"/>\n  </g>\n</symbol><symbol id="device-phone" viewBox="0 0 32 32">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="#95999D" d="M23.333 32H8.667C7.193 32 6 30.753 6 29.217V2.783C6 1.247 7.193 0 8.667 0h14.666C24.805 0 26 1.247 26 2.783v26.434C26 30.753 24.805 32 23.333 32z"/>\n        <path fill="#F5F6F7" fill-rule="nonzero" d="M14 2.001a.5.5 0 1 1 0-1L18 1a.5.5 0 1 1 0 1l-4 .001z"/>\n        <path fill="#F5F6F7" d="M17.5 29.5a1.5 1.5 0 1 1-3.001-.001 1.5 1.5 0 0 1 3.001.001z"/>\n        <path fill="#32363F" d="M7 3h18v25H7z"/>\n    </g>\n</symbol><symbol id="device-tablet" viewBox="0 0 32 32">\n    <g fill="none" fill-rule="evenodd" transform="translate(4)">\n        <rect width="24" height="32" fill="#32363F" rx="2"/>\n        <path fill="#5D6165" d="M2 3h20v26H2z"/>\n        <path fill="#95999D" fill-rule="nonzero" d="M10 31.001a.5.5 0 1 1 0-1L14 30a.5.5 0 0 1 0 1l-4 .001zM11.5 1.501a.5.5 0 1 1 1 0 .5.5 0 0 1-1 0z"/>\n    </g>\n</symbol><symbol id="dots-white" viewBox="0 0 16 16">\n  <path fill="#FFFFFF" fill-rule="evenodd" d="M34,74 C35.1045695,74 36,73.1045695 36,72 C36,70.8954305 35.1045695,70 34,70 C32.8954305,70 32,70.8954305 32,72 C32,73.1045695 32.8954305,74 34,74 Z M46,74 C47.1045695,74 48,73.1045695 48,72 C48,70.8954305 47.1045695,70 46,70 C44.8954305,70 44,70.8954305 44,72 C44,73.1045695 44.8954305,74 46,74 Z M40,74 C41.1045695,74 42,73.1045695 42,72 C42,70.8954305 41.1045695,70 40,70 C38.8954305,70 38,70.8954305 38,72 C38,73.1045695 38.8954305,74 40,74 Z" transform="translate(-32 -64)"/>\n</symbol><symbol id="file-type-audio" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><rect width="30" height="30" fill="#ACF6F7" rx="2"/><path fill="#0CCBD0" d="M8 19.998c-1.105 0-2 .888-2 2 0 1.105.898 2 1.998 2H9c1.657 0 3-1.35 3-2.997v-7.679a.63.63 0 0 1 .492-.601l6.016-1.129c.272-.05.492.124.492.418v5.478c0 .282-.215.51-.49.51H17c-1.105 0-2 .904-2 1.997v-.179a2 2 0 0 0 1.998 1.997H18c1.657 0 3-1.349 3-2.993V7c0-.554-.445-.921-.976-.825L10.976 7.82C10.437 7.918 10 8.454 10 9v10.498c0 .276-.215.5-.49.5H8z"/></g></symbol><symbol id="file-type-banking-account" viewBox="0 0 32 32"><path d="M30 5.2c0-1.12 0-1.68-.218-2.108a2 2 0 0 0-.874-.874C28.48 2 27.92 2 26.8 2H5.2c-1.12 0-1.68 0-2.108.218a2 2 0 0 0-.874.874C2 3.52 2 4.08 2 5.2v14.6c0 1.12 0 1.68.218 2.108a2 2 0 0 0 .874.874C3.52 23 4.08 23 5.2 23h21.6c1.12 0 1.68 0 2.108-.218a2 2 0 0 0 .874-.874C30 21.48 30 20.92 30 19.8V5.2Z" fill="#10C016"/><path d="M2 4a2 2 0 0 0 1.999 2H28.8c1.12 0 1.68 0 2.108.218a2 2 0 0 1 .874.874C32 7.52 32 8.08 32 9.2v17.6c0 1.12 0 1.68-.218 2.108a2 2 0 0 1-.874.874C30.48 30 29.92 30 28.8 30H3.2c-1.12 0-1.68 0-2.108-.218a2 2 0 0 1-.874-.874C0 28.48 0 27.92 0 26.8V5.2c0-1.12 0-1.68.218-2.108a2 2 0 0 1 .874-.874C1.52 2 2.08 2 3.2 2H4a2 2 0 0 0-2 2Z" fill="#9FE6A2"/><path fill-rule="evenodd" clip-rule="evenodd" d="M32 11a2 2 0 0 1-2 2h-9a5 5 0 0 0 0 10h8.793A2.207 2.207 0 0 0 32 20.793V11Zm-11 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill="#10C016"/></symbol><symbol id="file-type-bin" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd"><path fill="#D1D5DB" d="M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0 1 27.003 32H4.997A1.995 1.995 0 0 1 3 29.998V2.002z"/><path fill="#A3ACB8" d="M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5z"/><path fill="#4F5B69" d="M7 15.568c0-.597.06-1.12.178-1.568.118-.449.285-.82.5-1.115.215-.295.473-.516.772-.664.3-.147.633-.221 1.001-.221.786 0 1.391.29 1.815.87.424.58.636 1.479.636 2.698 0 .602-.059 1.128-.177 1.577-.119.449-.286.822-.501 1.12-.215.298-.474.521-.776.669a2.265 2.265 0 0 1-1.006.22c-.792 0-1.397-.306-1.815-.918C7.209 17.623 7 16.734 7 15.568zm3.705 0a9.152 9.152 0 0 0-.019-.58l-2.292 2.191c.193.597.546.895 1.057.895.4 0 .708-.2.926-.6.219-.4.328-1.035.328-1.906zm-2.507 0a7.965 7.965 0 0 0 .018.55l2.283-2.192c-.187-.563-.54-.845-1.057-.845-.4 0-.707.202-.922.605-.215.402-.322 1.03-.322 1.882zm5.35 0c0-.597.06-1.12.179-1.568.118-.449.285-.82.5-1.115.215-.295.473-.516.772-.664.3-.147.633-.221 1.001-.221.786 0 1.39.29 1.815.87.424.58.636 1.479.636 2.698 0 .602-.06 1.128-.178 1.577-.118.449-.285.822-.5 1.12-.215.298-.474.521-.777.669a2.265 2.265 0 0 1-1.005.22c-.792 0-1.397-.306-1.815-.918-.418-.613-.627-1.502-.627-2.668zm3.706 0a9.153 9.153 0 0 0-.02-.58l-2.291 2.191c.193.597.546.895 1.057.895.4 0 .708-.2.926-.6.218-.4.328-1.035.328-1.906zm-2.508 0a7.965 7.965 0 0 0 .02.55l2.282-2.192c-.187-.563-.54-.845-1.057-.845-.4 0-.707.202-.922.605-.215.402-.323 1.03-.323 1.882zm5.988 2.368h1.431v-4.295l-1.235.993-.561-.786 2.133-1.71h.823v5.798h1.404v1.081h-3.995v-1.08zM7 24.413c0-.596.06-1.119.178-1.568.118-.449.285-.82.5-1.115.215-.295.473-.516.772-.664.3-.147.633-.22 1.001-.22.786 0 1.391.29 1.815.869.424.58.636 1.48.636 2.698 0 .603-.059 1.128-.177 1.577-.119.449-.286.822-.501 1.12-.215.299-.474.521-.776.669A2.265 2.265 0 0 1 9.442 28c-.792 0-1.397-.306-1.815-.919C7.209 26.468 7 25.58 7 24.413zm3.705 0a9.152 9.152 0 0 0-.019-.58l-2.292 2.192c.193.596.546.894 1.057.894.4 0 .708-.2.926-.6.219-.4.328-1.035.328-1.906zm-2.507 0a7.965 7.965 0 0 0 .018.55l2.283-2.192c-.187-.563-.54-.845-1.057-.845-.4 0-.707.202-.922.605-.215.403-.322 1.03-.322 1.882zm5.987 2.368h1.431v-4.295l-1.235.993-.56-.786 2.132-1.71h.824v5.798h1.403v1.081h-3.995v-1.08zm5.913-2.368c0-.596.059-1.119.177-1.568.119-.449.286-.82.501-1.115.215-.295.472-.516.772-.664.3-.147.633-.22 1-.22.787 0 1.392.29 1.816.869.424.58.636 1.48.636 2.698 0 .603-.06 1.128-.178 1.577-.118.449-.285.822-.5 1.12-.215.299-.474.521-.777.669A2.265 2.265 0 0 1 22.54 28c-.793 0-1.398-.306-1.815-.919-.418-.613-.627-1.502-.627-2.668zm3.704 0a9.152 9.152 0 0 0-.018-.58l-2.292 2.192c.193.596.545.894 1.057.894.399 0 .708-.2.926-.6.218-.4.327-1.035.327-1.906zm-2.507 0a7.965 7.965 0 0 0 .019.55l2.283-2.192c-.187-.563-.54-.845-1.057-.845-.4 0-.707.202-.922.605-.215.403-.323 1.03-.323 1.882z"/></g></symbol><symbol id="file-type-code" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd"><path fill="#E6D5FF" d="M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0 1 27.003 32H4.997A1.995 1.995 0 0 1 3 29.998V2.002z"/><path fill="#9C59FF" d="M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5z"/><g stroke="#9C59FF" stroke-width="2"><path stroke-linejoin="round" d="M12 22l-4-4 4-4M20 22l4-4-4-4"/><path d="M14 25l4-14"/></g></g></symbol><symbol id="file-type-files" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd"><path fill="#D1D5DB" d="M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0 1 27.003 32H4.997A1.995 1.995 0 0 1 3 29.998V2.002z"/><path fill="#A3ACB8" d="M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5z"/></g></symbol><symbol id="file-type-folder" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd" transform="translate(0 2)"><rect width="32" height="26" y="2" fill="#B2D3FF" rx="2"/><path fill="#197BFF" d="M0 .99C0 .445.45 0 1.007 0h11.986c.556 0 1.32.313 1.718.71l.578.58c.393.392 1.156.71 1.712.71h13.005C31.107 2 32 2.895 32 4H17c-.552 0-1.313.313-1.71.71l-.58.58c-.392.392-1.16.71-1.717.71H1.007A1.004 1.004 0 0 1 0 5.01V.99z"/></g></symbol><symbol id="file-type-image" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd" transform="translate(0 3)"><rect width="32" height="26" fill="#8EE39B" rx="2"/><path fill="#1EC737" d="M0 20l6.29-6.29a.999.999 0 0 1 1.416-.004L11 17l8.294-8.294a1.003 1.003 0 0 1 1.412 0L32 20v4.002C32 25.106 31.11 26 29.998 26H2.002A2.002 2.002 0 0 1 0 24.002V20z"/><circle cx="8" cy="7" r="3" fill="#FFF"/><path stroke="#8EE39B" d="M11 16l-5.5 5.5L11 16z" stroke-linecap="round" stroke-linejoin="round"/></g></symbol><symbol id="file-type-note" viewBox="0 0 32 32"><path d="M2 2a2 2 0 0 1 2-2h22a2 2 0 0 1 2 2v28a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2z" fill="#acf5f7" fill-rule="evenodd"/><path d="M8 8h14v2H8zm0 4h8v2H8zm0 4h14v2H8zm0 4h10v2H8zM1.5 4h2A1.54 1.54 0 0 1 5 5.5 1.54 1.54 0 0 1 3.5 7h-2A1.54 1.54 0 0 1 0 5.5 1.54 1.54 0 0 1 1.5 4zM1.5 11h2A1.54 1.54 0 0 1 5 12.5 1.54 1.54 0 0 1 3.5 14h-2A1.54 1.54 0 0 1 0 12.5 1.54 1.54 0 0 1 1.5 11zM1.5 18h2A1.54 1.54 0 0 1 5 19.5 1.54 1.54 0 0 1 3.5 21h-2A1.54 1.54 0 0 1 0 19.5 1.54 1.54 0 0 1 1.5 18zM1.5 25h2A1.54 1.54 0 0 1 5 26.5 1.54 1.54 0 0 1 3.5 28h-2A1.54 1.54 0 0 1 0 26.5 1.54 1.54 0 0 1 1.5 25zM31.4 18.4l-2.8-2.8a2 2 0 0 1 2.8 2.8zM30.7 19.1L20.8 29l-2.5.9a1 1 0 0 1-1.3-.6.85.85 0 0 1 0-.7l.9-2.5 9.9-9.9z" fill="#0dcbcf" fill-rule="evenodd"/></symbol><symbol id="file-type-pdf" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd"><path fill="#FCD0D5" d="M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0 1 27.003 32H4.997A1.995 1.995 0 0 1 3 29.998V2.002z"/><path fill="#F1132D" d="M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5zM9 11h14v2H9v-2zm0 4h12v2H9v-2zm.066 4.784h1.904c.283 0 .548.028.796.084.248.056.464.15.648.28.184.13.33.304.436.52.107.216.16.481.16.796 0 .304-.055.568-.164.792-.11.224-.257.408-.444.552a1.89 1.89 0 0 1-.648.32 2.87 2.87 0 0 1-.784.104h-.728V25H9.066v-5.216zm1.832 2.512c.64 0 .96-.277.96-.832 0-.272-.081-.464-.244-.576-.163-.112-.401-.168-.716-.168h-.656v1.576h.656zm3.016-2.512h1.472c.4 0 .76.05 1.08.152.32.101.595.257.824.468.23.21.405.479.528.804.123.325.184.712.184 1.16 0 .448-.061.837-.184 1.168-.123.33-.296.604-.52.82a2.137 2.137 0 0 1-.804.484c-.312.107-.66.16-1.044.16h-1.536v-5.216zm1.4 4.264c.224 0 .427-.03.608-.088.181-.059.336-.153.464-.284.128-.13.228-.303.3-.516.072-.213.108-.477.108-.792 0-.31-.036-.57-.108-.78a1.263 1.263 0 0 0-.3-.504 1.092 1.092 0 0 0-.464-.268 2.152 2.152 0 0 0-.608-.08h-.224v3.312h.224zm3.68-4.264h3.288v.992H20.17v1.208h1.808v.992H20.17V25h-1.176v-5.216z"/></g></symbol><symbol id="file-type-sheet" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd"><path fill="#9FE6A2" d="M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0 1 27.003 32H4.997A1.995 1.995 0 0 1 3 29.998V2.002z"/><path fill="#0FC016" d="M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5zM8 9h4v2H8V9zm0-4h4v2H8V5zm0 8h4v2H8v-2zm0 4h4v2H8v-2zm0 4h4v2H8v-2zm0 4h4v2H8v-2zm6-16h4v2h-4V9zm0-4h4v2h-4V5zm0 8h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2zm6-12h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2z"/></g></symbol><symbol id="file-type-slide" viewBox="0 0 32 32">\n    <title>icons/files/presentation</title>\n    <g id="icons/files/presentation" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="file-02" transform="translate(3.000000, 0.000000)">\n            <path d="M0,2.00174332 C0,0.89621101 0.890925393,0 1.99742191,0 L19,0 L26,7 L26,29.9964051 C26,31.10296 25.1050211,32 24.0029953,32 L1.99700466,32 C0.89408944,32 0,31.1107383 0,29.9982567 L0,2.00174332 Z" id="Rectangle-2" fill="#FFDEC1"/>\n            <path d="M18.5,8.57092175e-14 C18.2238576,1.33045111e-13 18,0.230796814 18,0.500435829 L18,8 L25.4995642,8 C25.7759472,8 26,7.76806641 26,7.5 L26,7 L19,0 L18.5,8.57092175e-14 Z" id="Path-2" fill="#FF9433"/>\n        </g>\n        <path d="M22.9962158,24 L22.9962158,26 L12.9962158,26 L12.9962158,24 L22.9962158,24 Z M11,24 L11,26 L9,26 L9,24 L11,24 Z M22.9962158,20 L22.9962158,22 L12.9962158,22 L12.9962158,20 L22.9962158,20 Z M11,20 L11,22 L9,22 L9,20 L11,20 Z M16,10 L16,14 L20,14 C20,16.209139 18.209139,18 16,18 C13.790861,18 12,16.209139 12,14 C12,11.790861 13.790861,10 16,10 L16,10 Z M17,9 C19,9 21.0000002,11 21,13 L17,13 L17,9 L17,9 Z" id="text" fill="#FF9433"/>\n    </g>\n</symbol><symbol id="file-type-text" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd"><path fill="#B2D3FF" d="M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0 1 27.003 32H4.997A1.995 1.995 0 0 1 3 29.998V2.002z"/><path fill="#197BFF" d="M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5zM9 11h14v2H9v-2zm0 4h12v2H9v-2zm0 4h14v2H9v-2zm0 4h10v2H9v-2z"/></g></symbol><symbol id="file-type-video" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd"><path fill="#FFC5CE" d="M1 2.992C1 1.892 1.898 1 2.992 1h26.016C30.108 1 31 1.898 31 2.992v26.016c0 1.1-.898 1.992-1.992 1.992H2.992C1.892 31 1 30.102 1 29.008V2.992zm1 12.017C2 14.452 2.443 14 3.01 14h1.98c.558 0 1.01.443 1.01 1.01v1.98C6 17.549 5.557 18 4.99 18H3.01C2.451 18 2 17.557 2 16.99v-1.98zm24 0c0-.557.443-1.009 1.01-1.009h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zM2 9A1 1 0 0 1 3.01 8h1.98C5.549 8 6 8.444 6 9v3a1 1 0 0 1-1.01 1H3.01C2.451 13 2 12.556 2 12V9zm24 0A1 1 0 0 1 27.01 8h1.98c.558 0 1.01.444 1.01 1v3a1 1 0 0 1-1.01 1h-1.98c-.558 0-1.01-.444-1.01-1V9zM2 26A1 1 0 0 1 3.01 25h1.98c.558 0 1.01.444 1.01 1v3a1 1 0 0 1-1.01 1H3.01C2.451 30 2 29.556 2 29v-3zm24 0A1 1 0 0 1 27.01 25h1.98c.558 0 1.01.444 1.01 1v3a1 1 0 0 1-1.01 1h-1.98c-.558 0-1.01-.444-1.01-1v-3zM2 3A1 1 0 0 1 3.01 2h1.98C5.549 2 6 2.444 6 3v3a1 1 0 0 1-1.01 1H3.01C2.451 7 2 6.556 2 6V3zm24 0A1 1 0 0 1 27.01 2h1.98c.558 0 1.01.444 1.01 1v3a1 1 0 0 1-1.01 1h-1.98C26.451 7 26 6.556 26 6V3zM2 20A1 1 0 0 1 3.01 19h1.98c.558 0 1.01.444 1.01 1v3a1 1 0 0 1-1.01 1H3.01C2.451 24 2 23.556 2 23v-3zm24 0A1 1 0 0 1 27.01 19h1.98c.558 0 1.01.444 1.01 1v3a1 1 0 0 1-1.01 1h-1.98c-.558 0-1.01-.444-1.01-1v-3z"/><path fill="#FF405D" d="M12 10.615c0-.554.38-.775.853-.491l8.294 4.977c.471.282.473.739 0 1.023L12.853 21.1c-.471.282-.853.055-.853-.491v-9.995z"/></g></symbol><symbol id="file-type-zip" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd" transform="translate(3)"><rect width="26" height="32" fill="#D1D5DB" rx="2"/><path fill="#4F5B69" d="M11 1h2v2h-2V1zm0 4h2v2h-2V5zm0 4h2v2h-2V9zm2-6h2v2h-2V3zm0 4h2v2h-2V7zm-2 5h4v7h-4v-7zm1 1h2v2h-2v-2z"/></g></symbol><symbol id="forbidden-sign" viewBox="0 0 96 96"><g fill="none" fill-rule="evenodd"><path fill="#FFDEC1" d="M24.6 3.51L3.51 24.61A12 12 0 0 0 0 33.08V62.9a12 12 0 0 0 3.52 8.49l21.08 21.1A12 12 0 0 0 33.1 96h29.8a12 12 0 0 0 8.49-3.51l21.09-21.1A12 12 0 0 0 96 62.92V33.1a12 12 0 0 0-3.51-8.49l-21.1-21.1A12 12 0 0 0 62.92 0H33.1a12 12 0 0 0-8.49 3.51z"/><path fill="#FF9433" fill-rule="nonzero" d="M55.35 81H43.77c-3.97 0-7.79-1.5-10.7-4.2L13.3 58.43a4.06 4.06 0 0 1-.62-5.22 3.61 3.61 0 0 1 4.87-1.09l10.97 6.64V23.5l.02-.45a3.83 3.83 0 0 1 7.62 0l.03.45v18.02c0 .54.37 1 .88 1.12l.26.03h1.54c.63 0 1.15-.52 1.15-1.15V15.83l.02-.44a3.83 3.83 0 0 1 7.62 0l.03.44v25.69c0 .54.37 1 .88 1.12l.26.03h1.54c.63 0 1.15-.52 1.15-1.15V19.67l.02-.45a3.83 3.83 0 0 1 7.62 0l.03.45v21.85c0 .54.37 1 .88 1.12l.26.03h1.54c.63 0 1.15-.52 1.15-1.15V27.33l.02-.44a3.83 3.83 0 0 1 7.62 0l.03.44v38.34c0 8.47-6.87 15.33-15.34 15.33z"/></g></symbol><symbol id="google" viewBox="0 0 16 16">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="#3E82F1" d="M15.526 6.413h-7.38v3.03h4.22a3.651 3.651 0 0 1-1.565 2.365l2.53 1.959a7.053 7.053 0 0 0 1.934-3.076 9.064 9.064 0 0 0 .261-4.288v.01z"/>\n        <path fill="#32A753" d="M10.801 11.808a4.714 4.714 0 0 1-2.654.747h-.033A4.592 4.592 0 0 1 4.49 10.7a4.698 4.698 0 0 1-.695-1.306c0-.026-.023-.052-.033-.081L1.988 10.7l-.855.657a7.883 7.883 0 0 0 2.651 2.991 7.787 7.787 0 0 0 4.33 1.326h.033a7.484 7.484 0 0 0 5.185-1.897l-2.53-1.97z"/>\n        <path fill="#F9BB00" d="M3.761 6.348L1.988 4.973l-.855-.656c-.105.212-.2.43-.288.653a7.79 7.79 0 0 0 0 5.727c.088.226.183.444.288.653l.845-.653 1.773-1.374a4.649 4.649 0 0 1 0-2.978l.01.003z"/>\n        <path fill="#E74133" d="M8.147 0h-.033a7.836 7.836 0 0 0-6.981 4.317l.845.653 1.774 1.375c0-.03.022-.056.032-.082a4.7 4.7 0 0 1 .696-1.306 4.591 4.591 0 0 1 3.624-1.855h.033a4.246 4.246 0 0 1 2.994 1.17l2.244-2.215A7.54 7.54 0 0 0 8.147 0"/>\n    </g>\n</symbol><symbol id="keychain" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd"><path fill="#D1D5DB" d="M22 0h.28A10 10 0 0 1 32 9.72v.56A10 10 0 0 1 22.28 20h-.56a9.96 9.96 0 0 1-3.42-.7L7.18 30.77A4 4 0 0 1 4.3 32H2a2 2 0 0 1-2-2v-3.8c0-.45.18-.88.5-1.2l.05-.05a2 2 0 0 1 1.08-.56l.89-.14A1.77 1.77 0 0 0 4 22.5V22a1 1 0 0 1 1-1h.5c.83 0 1.5-.67 1.5-1.5V19a1 1 0 0 1 1-1h.75c.69 0 1.25-.56 1.25-1.25v-.42a2 2 0 0 1 .59-1.42l1.88-1.88A10 10 0 0 1 22 0zm.14 4c-.46 0-.93.05-1.39.17a2 2 0 0 0-1.04 3.25l.1.11 4.66 4.66a2 2 0 0 0 3.32-.8l.04-.14c.45-1.84 0-3.85-1.36-5.33l-.19-.2A5.83 5.83 0 0 0 22.42 4h-.28z"/><path fill="#95999D" d="M15.45 17.55c.54.47 1.13.89 1.77 1.23L4 32H2a2 2 0 0 1-.82-.18l14.27-14.27z"/></g></symbol><symbol id="logout-large" viewBox="0 0 44 44"><g fill="none" fill-rule="evenodd"><rect width="27.5" height="32.5" x="1.25" y="1.25" fill="#D9DDE1" rx="2"/><path fill="#95999D" d="M4.74 1.45l13.75 5.91c.92.4 1.51 1.3 1.51 2.29v27.61a2.5 2.5 0 01-3.49 2.29L2.76 33.64a2.49 2.49 0 01-1.51-2.29V3.74a2.5 2.5 0 013.49-2.29z"/><path fill="#95999D" fill-rule="nonzero" d="M34.3 12.92l.15.13 5 5c.69.69.73 1.77.13 2.5l-.13.15-5 5-.14.13a1.88 1.88 0 01-2.64-2.64l.13-.14 1.8-1.8h-7.98a1.88 1.88 0 01-.18-3.74l.18-.01h7.98l-1.8-1.8a1.87 1.87 0 012.5-2.78z"/></g></symbol><symbol id="papers" viewBox="0 0 32 32"><path d="M30.002 28A1.997 1.997 0 0 0 32 25.995V6.005A2.003 2.003 0 0 0 29.998 4H2.001A1.998 1.998 0 0 0 0 6.005v19.99C0 27.102.895 28 1.998 28h28.004Z" fill="#E6D5FF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 20.5c0-.75-1.5-3-3-3-.674 0-.894.152-1.136.319-.296.204-.625.431-1.864.431s-1.568-.227-1.864-.431C6.894 17.651 6.674 17.5 6 17.5c-1.5 0-3 2.25-3 3s0 1.5.75 1.5h10.5c.618 0 .727-.509.746-1.107L15 20.5Zm-3-7.125C12 11.511 10.657 10 9 10s-3 1.511-3 3.375 1.343 3.375 3 3.375 3-1.51 3-3.375ZM18 11a1 1 0 1 0 0 2h9a1 1 0 1 0 0-2h-9Zm0 4a1 1 0 1 0 0 2h9a1 1 0 1 0 0-2h-9Zm-1 5a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2h-9a1 1 0 0 1-1-1Z" fill="#9C59FF"/></symbol><symbol id="share-grey08" viewBox="0 0 16 16">\n  <g fill="#32363F" fill-rule="evenodd" transform="translate(-160 -32)">\n    <path d="M165.082611,42.1593397 C164.543049,42.6798471 163.808912,43 163,43 C161.343146,43 160,41.6568542 160,40 C160,38.3431458 161.343146,37 163,37 C163.808912,37 164.543049,37.3201529 165.082611,37.8406603 L170.022669,35.3706317 C170.007705,35.2491857 170,35.1254927 170,35 C170,33.3431458 171.343146,32 173,32 C174.656854,32 176,33.3431458 176,35 C176,36.6568542 174.656854,38 173,38 C172.191088,38 171.456951,37.6798471 170.917389,37.1593397 L165.977331,39.6293683 C165.992295,39.7508143 166,39.8745073 166,40 C166,40.1254927 165.992295,40.2491857 165.977331,40.3706317 L170.917389,42.8406603 C171.456951,42.3201529 172.191088,42 173,42 C174.656854,42 176,43.3431458 176,45 C176,46.6568542 174.656854,48 173,48 C171.343146,48 170,46.6568542 170,45 C170,44.8745073 170.007705,44.7508143 170.022669,44.6293683 L165.082611,42.1593397 Z"/>\n    <path d="M165.082611,42.1593397 C164.543049,42.6798471 163.808912,43 163,43 C161.343146,43 160,41.6568542 160,40 C160,38.3431458 161.343146,37 163,37 C163.808912,37 164.543049,37.3201529 165.082611,37.8406603 L170.022669,35.3706317 C170.007705,35.2491857 170,35.1254927 170,35 C170,33.3431458 171.343146,32 173,32 C174.656854,32 176,33.3431458 176,35 C176,36.6568542 174.656854,38 173,38 C172.191088,38 171.456951,37.6798471 170.917389,37.1593397 L165.977331,39.6293683 C165.992295,39.7508143 166,39.8745073 166,40 C166,40.1254927 165.992295,40.2491857 165.977331,40.3706317 L170.917389,42.8406603 C171.456951,42.3201529 172.191088,42 173,42 C174.656854,42 176,43.3431458 176,45 C176,46.6568542 174.656854,48 173,48 C171.343146,48 170,46.6568542 170,45 C170,44.8745073 170.007705,44.7508143 170.022669,44.6293683 L165.082611,42.1593397 Z"/>\n  </g>\n</symbol><symbol id="store" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 19v8h10v-8h14v12h-3V20h-7v11H2V19h4ZM30 2v6H2V2h28Z" fill="#FDD5D5"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 18.99C0 19.548.453 20 .993 20h30.014A.996.996 0 0 0 32 18.99v-1.98c0-.558-.097-1.445-.218-1.99L30 7H2L.218 15.02C.098 15.56 0 16.442 0 17.01v1.98Z" fill="#F52D2D"/></symbol><symbol id="top-select" viewBox="0 0 24 24">\n  <g fill="#95999d" fill-rule="evenodd" transform="translate(12.285714, 12.000000) rotate(270.000000) translate(-12.285714, -12.000000)">\n    <path d="M6.46026077,20.3174036 C5.84657974,20.9310847 5.84657974,21.9260582 6.46026077,22.5397392 C7.0739418,23.1534203 8.06891534,23.1534203 8.68259637,22.5397392 L18.1111678,13.1111678 C18.7248488,12.4974868 18.7248488,11.5025132 18.1111678,10.8888322 L8.68259637,1.46026077 C8.06891534,0.846579743 7.0739418,0.846579743 6.46026077,1.46026077 C5.84657974,2.0739418 5.84657974,3.06891534 6.46026077,3.68259637 L14.7776644,12 L6.46026077,20.3174036 Z"/>\n  </g>\n</symbol><symbol id="trash-duotone" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.586 3 10.707.879A3 3 0 0 1 12.828 0h6.344a3 3 0 0 1 2.121.879L23.414 3H29a2 2 0 1 1 0 4H3a2 2 0 1 1 0-4h5.586Zm3.535-.707A1 1 0 0 1 12.828 2h6.344a1 1 0 0 1 .707.293l.707.707h-9.172l.707-.707Z" fill="#95999D"/><path d="M4 8a1 1 0 0 1 1-1h22a1 1 0 0 1 1 1v22a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8Z" fill="#D6D8DA"/></symbol><symbol id="album-add" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M65,99.0094776 C65,97.347389 66.3423789,96 68.0033512,96 L77.9931545,96 C78.5492199,96 79,96.4438648 79,97 C79,97.5522847 78.544239,98 77.9975267,98 L68.0024733,98 C67.4488226,98 67,98.4438648 67,99 C67,99.5522847 67.455761,100 68.0024733,100 L77.9975267,100 C78.5511774,100 79,100.455761 79,101.002473 L79,110.997527 C79,111.551177 78.5500512,112 77.9931545,112 L68.0033512,112 C66.3446462,112 65,110.663369 65,108.990522 L65,99.0094776 Z M72,102 L74,102 L74,105 L77,105 L77,107 L74,107 L74,110 L72,110 L72,107 L69,107 L69,105 L72,105 L72,102 Z" transform="translate(-64 -96)"/>\n</symbol><symbol id="album-remove" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M65,99.009C65,97.347 66.342,96 68.003,96L77.993,96C78.549,96 79,96.444 79,97C79,97.552 78.544,98 77.998,98L68.002,98C67.449,98 67,98.444 67,99C67,99.552 67.456,100 68.002,100L77.998,100C78.551,100 79,100.456 79,101.002L79,110.998C79,111.551 78.55,112 77.993,112L68.003,112C66.345,112 65,110.663 65,108.991L65,99.009ZM72,105L77,105L77,107L74,107L72,107L69,107L69,105L72,105Z" transform="translate(-64 -96)"/>\n</symbol><symbol id="album" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M33,99.0094776 C33,97.347389 34.3423789,96 36.0033512,96 L45.9931545,96 C46.5492199,96 47,96.4438648 47,97 L47,97 C47,97.5522847 46.544239,98 45.9975267,98 L36.0024733,98 C35.4488226,98 35,98.4438648 35,99 L35,99 C35,99.5522847 35.4509752,100 35.990778,100 L40.5089948,100 C40.7801695,100 41,100.22788 41,100.491005 L41,106 L42.5,105 L44,106 L44,100.491005 C44,100.219831 44.2157526,100 44.495389,100 L46.0010434,100 C46.5527519,100 47,100.455761 47,101.002473 L47,110.997527 C47,111.551177 46.5500512,112 45.9931545,112 L36.0033512,112 C34.3446462,112 33,110.663369 33,108.990522 L33,99.0094776 Z" transform="translate(-32 -96)"/>\n</symbol><symbol id="answer" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M11.586 7H7a3 3 0 0 0-3 3v4a1 1 0 0 1-2 0v-4a5 5 0 0 1 5-5h4.586L9.293 2.707a1 1 0 1 1 1.414-1.414l4 4a1 1 0 0 1 0 1.414l-4 4a1 1 0 1 1-1.414-1.414L11.586 7z"/>\n</symbol><symbol id="apple" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M11.88 8.5c.023 2.422 2.125 3.227 2.148 3.238-.018.056-.336 1.148-1.107 2.275-.667.975-1.36 1.946-2.45 1.966-1.07.02-1.415-.635-2.64-.635s-1.607.615-2.622.655c-1.052.04-1.853-1.054-2.526-2.025C1.31 11.987.26 8.36 1.67 5.912c.7-1.215 1.952-1.985 3.31-2.005 1.034-.02 2.01.695 2.641.695.632 0 1.817-.86 3.063-.733.522.022 1.986.21 2.927 1.587-.076.047-1.748 1.02-1.73 3.044M9.868 2.555c.559-.677.935-1.618.832-2.555-.805.032-1.779.537-2.357 1.213-.517.598-.97 1.556-.848 2.475.897.069 1.814-.457 2.373-1.133"/>\n</symbol><symbol id="archive" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M1 4h14v10.004a1 1 0 0 1-1.007.996H2.007A1 1 0 0 1 1 14.004V4zM0 2c0-.552.445-1 1-1h14c.552 0 1 .444 1 1v1H0V2zm5 4v2h6V6H5z"/>\n</symbol><symbol id="arrow-up" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 3.414v11.58C9 15.548 8.556 16 8 16c-.552 0-1-.45-1-1.007V3.414L1.707 8.707A1 1 0 0 1 .293 7.293l7-7a1 1 0 0 1 1.414 0l7 7a1 1 0 0 1-1.414 1.414L9 3.414Z"/></symbol><symbol id="attachment" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2.43 14.43C.457 12.457.337 9.385 2.16 7.56l6.3-6.3c1.327-1.325 3.563-1.237 4.997.197 1.434 1.434 1.522 3.67.196 4.996l-5.1 5.1c-.828.828-2.227.773-3.123-.123-.895-.895-.95-2.294-.122-3.122l4.5-4.5 1.298 1.298L6.552 9.66c-.33.33.319.979.649.649l5.154-5.154c.66-.66.616-1.784-.098-2.498-.714-.714-1.838-.758-2.498-.098l-6.3 6.3c-1.158 1.158-1.081 3.119.171 4.371 1.253 1.253 3.214 1.33 4.372.172l5.7-5.7L15 9l-5.7 5.7c-1.824 1.824-4.897 1.703-6.87-.27z"/>\n</symbol><symbol id="attention" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 2l8 12H0L8 2zM7 6v4h2V6H7zm0 5v2h2v-2H7z"/>\n</symbol><symbol id="bank-check" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h12Zm0 3H2v7h12V5Zm-2 1v1h-.5a1.5 1.5 0 0 0-1.415 1H12v1h-1.914c.19.54.68.937 1.27.993L11.5 10h.5v1h-.5a2.5 2.5 0 0 1-.164-4.995L11.5 6h.5ZM8 9v1H4V9h4Zm0-2v1H4V7h4Z"/></symbol><symbol id="banking-add" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 11.003l3-.001c0 .702.127 1.372.35 1.998H1.996A2.003 2.003 0 0 1 0 11.003V1.997C0 .898.9 0 1.997 0h12.006C15.101 0 16 .898 16 1.997v5.689a6.031 6.031 0 0 0-1.999-1.876V6H1.998L2 11.003zM1.997 2v1H14V2H1.997zM11 8h2v3h3v2h-3v3h-2v-3H8v-2h3V8z"/>\n</symbol><symbol id="banking" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 8v5h12V4H2v1h12v3H2zm0-6h12a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/>\n</symbol><symbol id="bank" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M7.979 0L0 5.066v1.966h15.958V5.066L7.979 0zm4 13.063h2v-5h-2v5zm-5 0h2v-5h-2v5zm-5 0h2v-5h-2v5zm-1.979 3h15.958v-2H0v2z"/>\n</symbol><symbol id="bell" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M13.993 13H2.007A1.001 1.001 0 1 1 2 11V9c0-2.45 1.333-5.566 4-6.627v-.379C6 .893 6.888 0 8 0c1.105 0 2 .895 2 1.994v.38C12.667 3.433 14 6.55 14 9v2c.552 0 1 .444 1 1 0 .552-.45 1-1.007 1zM6 14h4v.006A1.992 1.992 0 0 1 8 16c-1.105 0-2-.895-2-1.994V14z"/>\n</symbol><symbol id="benefit" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.669 1.52A3.99 3.99 0 0 0 5.142 3.5H4v2h1.142l.054.19a3.987 3.987 0 0 0 6.632 1.639l-1.415-1.415-.125.115C9.94 6.322 9.49 6.5 9 6.5a1.993 1.993 0 0 1-1.722-1H9v-2H7.278l.085-.134a1.988 1.988 0 0 1 3.051-.28l1.414-1.415-.16-.15ZM8.986 10c0-.552-.449-1-1.002-1H2.462c-.532 0-1.042.21-1.417.586L.629 10a2.142 2.142 0 0 0-.475 2.313l.974 2.43A2.004 2.004 0 0 0 2.988 16H7.41c.376 0 .744-.105 1.062-.304L16 11v-.25c0-.69-.56-1.25-1.252-1.25a4.84 4.84 0 0 0-2.348.607L8.986 12H4.978v-1h3.006c.553 0 1.002-.448 1.002-1Z"/></symbol><symbol id="bike" viewBox="0 0 16 16"><path d="M12.5 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM8.457 7.543c.182.156.379.309.588.453C9.816 8.53 10.838 9 12 9a1 1 0 1 0 0-2c-.62 0-1.25-.257-1.819-.65s-.999-.867-1.204-1.164A1.561 1.561 0 0 0 7.701 4.5c-.394 0-.772.156-1.05.435L4.447 7.139a1.527 1.527 0 0 0 .233 2.35L7 11.034V14a1 1 0 1 0 2 0v-3.5a1 1 0 0 0-.445-.832l-1.334-.89 1.236-1.235Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M16 13a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-1.5 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM3 16a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm0-1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/></symbol><symbol id="bill" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M13 8c1.025 0 1.96.386 2.669 1.02l.159.151-1.414 1.415C14.052 10.224 13.551 10 13 10c-.68 0-1.276.345-1.637.866l-.085.134H13v2h-1.722c.347.595.985 1 1.722 1 .49 0 .94-.178 1.288-.47l.125-.116 1.415 1.415C15.104 15.553 14.104 16 13 16c-1.793 0-3.298-1.185-3.804-2.81L9.142 13H8v-2h1.142C9.587 9.278 11.138 8 13 8zm-8 4c.552 0 1 .448 1 1s-.448 1-1 1H1c-.552 0-1-.448-1-1s.448-1 1-1h4zm0-4c.552 0 1 .448 1 1s-.448 1-1 1H1c-.552 0-1-.448-1-1s.448-1 1-1h4zm10-8c.552 0 1 .448 1 1s-.448 1-1 1H1c-.552 0-1-.448-1-1s.448-1 1-1h14zm0 4c.552 0 1 .448 1 1s-.448 1-1 1H1c-.552 0-1-.448-1-1s.448-1 1-1h14z"/>\n</symbol><symbol id="bottom" viewBox="0 0 24 24">\n  <g fill-rule="evenodd" transform="translate(12.285714, 12.000000) rotate(90.000000) translate(-12.285714, -12.000000)">\n    <path d="M6.46026077,20.3174036 C5.84657974,20.9310847 5.84657974,21.9260582 6.46026077,22.5397392 C7.0739418,23.1534203 8.06891534,23.1534203 8.68259637,22.5397392 L18.1111678,13.1111678 C18.7248488,12.4974868 18.7248488,11.5025132 18.1111678,10.8888322 L8.68259637,1.46026077 C8.06891534,0.846579743 7.0739418,0.846579743 6.46026077,1.46026077 C5.84657974,2.0739418 5.84657974,3.06891534 6.46026077,3.68259637 L14.7776644,12 L6.46026077,20.3174036 Z"/>\n  </g>\n</symbol><symbol id="browser-brave" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M14.808 5.161l-.314 1.212-1.435 5.491a2.805 2.805 0 0 1-1.079 1.569s-1.536 1.09-3.482 2.365c-.154.101-.313.17-.483.17-.17 0-.33-.069-.484-.17a124.63 124.63 0 0 1-3.482-2.36 2.788 2.788 0 0 1-1.084-1.568L1.519 6.379 1.2 5.172l.489-1.334-.356-.797a.214.214 0 0 1 .048-.234l.946-.957c.41-.42 1.02-.564 1.573-.367l.255.09L5.575.021 7.999 0h.016l2.408.016 1.424 1.541.26-.09a1.507 1.507 0 0 1 1.563.362l.93.94a.27.27 0 0 1 .054.293l-.34.765.494 1.334zM8.323 9.823a.648.648 0 0 0-.154-.048h-.17a.648.648 0 0 0-.154.048l-.692.287c-.063.027-.17.075-.233.107l-1.042.542c-.064.032-.07.09-.01.133l.919.648c.058.043.149.112.202.16l.409.35.191.17.394.352a.146.146 0 0 0 .191 0l.404-.351.191-.17.41-.357c.053-.047.143-.117.202-.159l.92-.654c.058-.042.052-.1-.011-.133l-1.042-.531a4.547 4.547 0 0 0-.234-.107l-.691-.287zm4.987-4.425c.02-.069.02-.095.02-.095 0-.07-.004-.186-.015-.255l-.053-.155a1.86 1.86 0 0 0-.128-.223l-.6-.888a2.608 2.608 0 0 0-.155-.207l-.776-.973c-.042-.053-.085-.1-.09-.095h-.01l-.128.021-1.186.234c-.069.016-.18.037-.25.048l-.02.005a.662.662 0 0 1-.25-.016l-.995-.319a5.863 5.863 0 0 0-.244-.069s-.202-.048-.367-.043c-.165 0-.367.043-.367.043-.069.016-.18.048-.244.07l-.994.318a.662.662 0 0 1-.25.016l-.021-.005c-.07-.01-.181-.038-.25-.048L4.74 2.539a1.062 1.062 0 0 0-.128-.022h-.01a.532.532 0 0 0-.09.096l-.777.973c-.042.053-.111.149-.154.207l-.6.888a3.04 3.04 0 0 0-.128.223l-.053.154c-.01.07-.022.186-.016.255 0 0 0 .022.021.096a.858.858 0 0 0 .128.245c.042.053.122.143.17.19l1.76 1.872a.22.22 0 0 1 .036.213l-.366.866a.368.368 0 0 0-.006.24l.101.27c.085.229.229.43.42.585l.356.287a.218.218 0 0 0 .213.027l1.127-.537c.064-.032.16-.096.213-.144l.807-.728a.286.286 0 0 0 .016-.404L6.086 7.248a.148.148 0 0 1-.048-.186l.744-1.403a.31.31 0 0 0 .01-.229l-.09-.207a.365.365 0 0 0-.17-.165L4.348 4.24c-.064-.027-.064-.054.005-.059l1.409-.133c.069-.005.18.006.25.021l1.254.351c.069.022.111.09.1.16l-.435 2.386c-.01.07-.01.165.005.218.016.054.085.101.154.117l.872.186c.07.016.18.016.25 0l.813-.186c.07-.016.138-.069.154-.117a.493.493 0 0 0 .006-.218l-.43-2.386c-.011-.07.031-.144.1-.16l1.255-.35c.069-.022.18-.027.25-.022l1.408.133c.07.005.075.032.005.059l-2.184.829a.342.342 0 0 0-.17.165l-.09.207c-.027.064-.027.17.01.228l.75 1.404a.15.15 0 0 1-.048.186L8.345 8.407a.281.281 0 0 0 .016.404l.808.728a.912.912 0 0 0 .212.138l1.133.537c.063.032.16.016.212-.026l.356-.293c.192-.154.335-.356.415-.584l.101-.271a.369.369 0 0 0-.005-.24l-.367-.866a.22.22 0 0 1 .037-.213l1.76-1.87.17-.192c-.01-.016.085-.133.117-.26z"/>\n</symbol><symbol id="browser-chrome" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M4.036 6.978l-2.29-3.966A7.985 7.985 0 0 1 8 .001a7.996 7.996 0 0 1 6.883 3.921H8.356a4.101 4.101 0 0 0-4.32 3.055zm6.828-1.9h4.585a8 8 0 0 1-7.359 10.92l3.273-5.665a4.081 4.081 0 0 0-.498-5.254zm-5.77 2.923A2.91 2.91 0 0 1 8 5.094a2.91 2.91 0 0 1 2.906 2.907A2.91 2.91 0 0 1 8 10.907 2.91 2.91 0 0 1 5.094 8zm4.003 3.944l-2.29 3.967a8.002 8.002 0 0 1-5.78-11.834l3.266 5.657a4.099 4.099 0 0 0 4.804 2.21z"/>\n</symbol><symbol id="browser-duckduckgo" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 .013a8 8 0 0 1 1.942 15.761l-.223-.43a18.303 18.303 0 0 1-.7-.256.164.164 0 0 1-.053.068.491.491 0 0 1-.06.034c-.016.063-.041.11-.078.134-.216.144-.828.216-1.152.144a.295.295 0 0 1-.13-.06c-.552.306-1.346.714-1.507.622-.252-.144-.291-2.184-.252-2.521.04-.337.263-.486.317-.501a.102.102 0 0 0-.053.086c-.036.468 0 2.376.252 2.52.161.093.954-.315 1.506-.621a.295.295 0 0 0 .131.06c.324.072.936 0 1.152-.144.036-.024.061-.072.078-.135a.495.495 0 0 0 .06-.033.164.164 0 0 0 .054-.068 23.637 23.637 0 0 0 .287.109l.024.009.004.002.022.008.007.002a28.042 28.042 0 0 0 .03.011l.019.007.01.004.019.006.011.005.018.006.013.005.017.006.013.004.017.007.013.004.018.006.014.005.016.006.015.005.016.006a9.84 9.84 0 0 1 .03.01l.016.006.029.01.017.006.014.004.018.006.014.005.017.006.014.004.017.006.014.005.017.005.014.005.018.006.013.004.018.005.014.005.017.005a4.139 4.139 0 0 1 .03.01l.014.004.018.006.012.004.019.005.012.004.02.006.01.003.025.007.004.002.03.008.005.002.024.006.01.003.019.005.01.003.018.005.011.003.017.005c.004 0 .007.002.011.003.006 0 .011.002.017.004a4.868 4.868 0 0 0 .115.027l.015.004a1.763 1.763 0 0 0 .025.005l.01.001.016.004.007.001a2 2 0 0 0 .02.004h.003l.022.004h.005l.016.003h.007l.014.003h.007l.013.002h.008l.01.002h.009a.515.515 0 0 0 .018.001h.01a.38.38 0 0 0 .016.001h.03l.006-.001.008-.001h.006l.007-.002h.005l.008-.003h.003a.071.071 0 0 0 .022-.009l.001-.001a.09.09 0 0 0 .01-.008l.002-.001a.122.122 0 0 0 .021-.024.338.338 0 0 0 .04-.077c.183-.488.094-2.305-.193-2.37-.259-.058-1.25.641-1.641.926a1.18 1.18 0 0 0-.042-.144c-.027-.068-.224-.09-.457-.073-.468-1.098-.832-2.39-.625-3.295l.002.002c.273.19 2.094.804 2.997.787.904-.017 2.39-.571 2.226-1.015-.162-.443-1.637.392-3.175.25-1.139-.107-1.34-.617-1.088-.99.317-.468.895.09 1.848-.196.955-.285 2.29-.794 2.785-1.071 1.145-.638-.48-.903-.863-.726-.363.168-1.63.487-2.216.629.33-1.16-.462-3.18-1.345-4.063-.288-.288-.731-.47-1.23-.565-.192-.263-.502-.515-.94-.748a4.42 4.42 0 0 0-2.76-.449c-.135.018-.208.067-.31.084.113.01.542.21.811.32-.131.05-.311.08-.452.138a.661.661 0 0 0-.162.046c-.132.06-.231.288-.23.395.643-.065 1.596-.02 2.292.188-.493.069-.946.197-1.274.37a2.438 2.438 0 0 0-.047.025c-.037.015-.072.03-.103.047-1.05.553-1.513 1.844-1.237 3.391.26 1.448 1.344 6.493 1.797 8.668A8.003 8.003 0 0 1 0 8.013a8 8 0 0 1 8-8zM5.077 5.132c-.425.267-.409.54-.409.54s-.226-.503.376-.75c.602-.246.896.14.896.14s-.438-.197-.863.07zm.805 1.419a.15.15 0 1 0 .3 0 .15.15 0 1 0-.3 0zm-.107.774a.58.58 0 0 1 0-1.16v-.001a.58.58 0 0 1 0 1.16zm4.101-1.22a.13.13 0 1 0 .003.26c.071-.001.128-.06.127-.13a.129.129 0 0 0-.13-.13zm-.721.296a.5.5 0 1 1 0 .001zm.328-1.749c.347.058.47.37.47.37s-.314-.179-.558-.176c-.5.007-.638.228-.638.228s.085-.528.726-.422z"/>\n</symbol><symbol id="browser-edge-chromium" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M13.4967 10.1297C11.9007 10.5367 10.834 10.403 10.1674 10.173C9.93103 10.0932 9.73878 9.91834 9.637 9.69061C9.53522 9.46288 9.53318 9.20299 9.63136 8.97369C10.0067 8.07802 10.2684 6.40502 8.18802 4.75536C8.18709 4.75477 8.18619 4.75398 8.18531 4.7532C8.18368 4.75176 8.18209 4.75036 8.18036 4.75036C4.49602 2.43436 1.52736 4.45569 0.794024 5.04236C0.770077 5.0613 0.736554 5.06235 0.71147 5.04494C0.686386 5.02752 0.675647 4.99575 0.685024 4.96669C1.01569 3.95236 2.74602 -0.15831 9.05102 0.0293567C13.598 0.164357 16.196 4.30269 15.744 7.38402C15.5937 8.41069 14.885 9.59136 13.5064 10.1267C13.5047 10.1274 13.5031 10.128 13.5014 10.1285C13.4998 10.129 13.4983 10.1294 13.4967 10.1297ZM8.34102 6.62836C8.74669 6.71436 6.36169 4.73436 3.42536 5.18036C2.40436 5.33536 0.0543578 6.22102 0.251691 9.38036C0.605024 15.049 5.20402 15.877 6.73669 15.9954C6.81162 16.0014 6.88227 15.9597 6.9131 15.8912C6.94394 15.8226 6.92829 15.742 6.87402 15.69C6.76117 15.5819 6.62131 15.4624 6.46538 15.3291L6.46537 15.3291C5.49338 14.4984 3.89724 13.1342 4.32869 10.6797C4.78102 8.10836 6.62636 6.26669 8.34102 6.62836ZM9.93669 15.7797C7.98736 15.883 6.15402 14.4864 5.65936 12.5334C5.32447 11.2105 5.52325 9.97369 6.25569 8.82302C6.26451 8.80935 6.27273 8.7935 6.28121 8.77717C6.31408 8.71382 6.35072 8.64322 6.44002 8.66469C6.50151 8.67967 6.50417 8.74249 6.50662 8.80043C6.50728 8.81599 6.50793 8.83119 6.50969 8.84502C6.70502 10.3297 7.55202 11.3634 8.83802 12.0367C10.6654 12.9934 12.5227 12.946 14.3714 12.0597C14.4048 12.0437 14.4388 12.0243 14.4733 12.0046L14.4733 12.0046C14.6236 11.9188 14.7822 11.8284 14.9357 11.993C15.107 12.1759 14.9866 12.3478 14.8775 12.5034C14.8603 12.5279 14.8434 12.552 14.828 12.5757C13.8414 14.088 12.5737 15.2384 10.757 15.667C10.584 15.708 10.408 15.738 10.2324 15.7644C10.1341 15.7745 10.0354 15.7796 9.93669 15.7797Z"/>\n</symbol><symbol id="browser-edge" viewBox="0 0 16 16">\n    <g fill-rule="evenodd">\n        <path d="M15.27 7.592c0-1.517-.31-2.831-.928-3.943-.66-1.178-1.534-2.08-2.623-2.708C10.63.313 9.399 0 8.025 0c-.88 0-1.702.128-2.466.383a6.575 6.575 0 0 0-1.994 1.048 7.578 7.578 0 0 0-1.494 1.57 8.157 8.157 0 0 0-1.026 1.936 9.791 9.791 0 0 0-.52 2.14c.36-.517.768-.998 1.22-1.443.458-.45.981-.867 1.57-1.254a8.07 8.07 0 0 1 1.993-.932 8.673 8.673 0 0 1 2.316-.397l.196.011c.131.006.298.032.5.076.201.044.425.106.668.183.245.076.484.198.719.365.234.165.444.364.629.593.184.228.324.53.419.905.096.374.12.79.072 1.248H5.162c.095-.558.231-1.034.41-1.423.179-.389.41-.762.696-1.12-1.255.583-2.222 1.38-2.9 2.392-.677 1.01-1.008 2.235-.99 3.675.012 1.165.382 2.273 1.111 3.32.729 1.045 1.655 1.786 2.779 2.22.839.321 1.778.479 2.82.473 1.04-.006 1.97-.12 2.787-.34.817-.22 1.5-.493 2.047-.82v-3.363c-.435.303-.95.554-1.548.753-.598.2-1.216.339-1.856.415a7.04 7.04 0 0 1-1.9-.027 5.815 5.815 0 0 1-1.69-.508 2.988 2.988 0 0 1-1.218-1.092c-.313-.486-.471-1.058-.477-1.718H15.27V7.592z"/>\n        <path fill-rule="nonzero" d="M.536 7.144h.029l.007-.05-.036.05z"/>\n    </g>\n</symbol><symbol id="browser-firefox" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M15.79 5.961a.13.13 0 0 0-.14.075l-.178.395c-.067-.519-.193-1.355-.359-1.903a3.664 3.664 0 0 0-.812-1.412.13.13 0 0 0-.22.12l.139.626c-.334-.349-.87-.85-1.4-1.093a9.105 9.105 0 0 0-.37-.168 6.264 6.264 0 0 0-4.164-1.588 6.246 6.246 0 0 0-5.293 2.902 1.16 1.16 0 0 1-.352-.467c-.16-.393-.241-.834-.242-.838a.13.13 0 0 0-.219-.072c-.96.921-.865 2.357-.83 2.682a7.072 7.072 0 0 0-.794 1.048C.134 6.944.006 8.125 0 8.175a.13.13 0 0 0 .225.103l.28-.297c-.03.114-.06.243-.09.388C.29 8.996.328 9.967.33 10.008a.13.13 0 0 0 .249.05l.165-.35c.122.853.59 2.666 2.385 4.337 1.33 1.238 3.179 1.949 5.073 1.949 1.84 0 3.576-.658 5.021-1.902 1.71-1.473 2.347-3.576 2.58-5.08.251-1.625.104-2.885.098-2.937a.13.13 0 0 0-.11-.114zm-2.919.047c.002.003.18.235.218.83.027.445-.065 1.158-.122 1.547l-.349-.404a.13.13 0 0 0-.229.101c.002.01.12 1.017-.08 1.891a2.791 2.791 0 0 1-.369.902l.049-.659a.13.13 0 0 0-.25-.064c-.005.013-.609 1.31-2.262 1.823-.231.07-.474.107-.723.107-.882 0-1.682-.45-2.136-.766l.116.003c.65 0 1.15-.28 1.552-.505.106-.059.206-.115.302-.162.577-.29.846-.315 1.052-.315a.216.216 0 0 0 .22-.166c.064-.251-.238-.7-.611-.904a1.254 1.254 0 0 0-.623-.148c-.381 0-.854.12-1.531.304a1.42 1.42 0 0 1-.365.05c-.415 0-.69-.201-.846-.37-.212-.226-.332-.526-.314-.78.008-.117.053-.236.33-.236.246 0 .52.1.522.102a.13.13 0 0 0 .046.008h.001a.13.13 0 0 0 .13-.151L6.561 6.9c.132-.084.448-.29.751-.51.735-.534.833-.738.755-.893-.104-.212-.379-.246-.696-.286a3.054 3.054 0 0 1-.573-.11c-.388-.129-.643-.463-.701-.545a.784.784 0 0 1 .073-.499c.123-.216.549-.55.702-.662a.13.13 0 0 0-.062-.236c-.013-.001-.404-.04-1.042.171-.52.174-.922.456-1.06.56a3.823 3.823 0 0 0-.332-.045 5.202 5.202 0 0 1 3.909-1.762 5.15 5.15 0 0 1 3.033.973l-.879.147a.13.13 0 0 0-.017.254c.012.003 1.182.373 2.055 1.047.195.152.372.349.529.585.145.313.26.635.34.962l-.294-.229a.131.131 0 0 0-.182.185z"/>\n</symbol><symbol id="browser-ie" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M15.826 8.135a7.08 7.08 0 0 0-.89-3.448c2.417-5.472-2.591-4.67-2.87-4.616a12.737 12.737 0 0 0-2.949.964A7.114 7.114 0 0 0 1.782 6.54C3.563 4.542 4.81 3.736 5.556 3.413c-.119.106-.236.214-.35.323l-.113.108c-.076.073-.151.146-.225.22l-.13.131-.194.2-.134.143a17.71 17.71 0 0 0-.89 1.024l-.139.173-.132.167-.12.159-.136.179c-.032.042-.062.084-.093.127-.281.383-.538.76-.77 1.12l-.002.003c-.06.095-.12.189-.177.282l-.01.015a22.37 22.37 0 0 0-.168.276l-.006.01c-.146.243-.282.479-.404.7-.64 1.16-.952 1.972-.966 2.02-2.022 7.231 4.29 4.177 5.171 3.722a7.114 7.114 0 0 0 9.849-3.998H11.68c-.553.934-1.617 1.566-2.84 1.566-1.792 0-3.244-1.357-3.244-3.032h10.172c.038-.3.058-.606.058-.916zm-1.329-6.998c.613.413 1.104 1.062.26 3.248a7.136 7.136 0 0 0-3.473-2.883c.659-.317 2.288-.99 3.213-.365zM1.482 14.5c-.499-.512-.587-1.758.514-4.028a7.133 7.133 0 0 0 3.097 3.785c-.713.392-2.605 1.275-3.61.243zM5.58 7.106c.056-1.628 1.473-2.93 3.213-2.93s3.157 1.302 3.214 2.93H5.58z"/>\n</symbol><symbol id="browser-opera" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8.617 2.144a5.126 5.126 0 0 1 2.278-.539 5.16 5.16 0 0 1 2.642.737 7.891 7.891 0 0 1 2.298 5.576 7.892 7.892 0 0 1-2.298 5.576 5.16 5.16 0 0 1-2.642.736 5.124 5.124 0 0 1-2.279-.54c2.014-.415 3.559-2.841 3.559-5.772 0-2.932-1.545-5.358-3.558-5.774zM7.54 15.826A7.917 7.917 0 0 1 7.918 0h.03a7.888 7.888 0 0 1 5.247 2.016 5.713 5.713 0 0 0-3.174-.97c-1.885 0-3.574.935-4.71 2.41-.875 1.033-1.442 2.56-1.48 4.275v.373c.038 1.714.605 3.242 1.48 4.275 1.136 1.475 2.825 2.41 4.71 2.41 1.16 0 2.245-.353 3.173-.969a7.89 7.89 0 0 1-5.654 2.006z"/>\n</symbol><symbol id="browser-safari" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8.806 8.806L7.194 7.194l-.807 2.419 2.42-.807zM8 0c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8zm0 14.667A6.674 6.674 0 0 0 14.667 8 6.674 6.674 0 0 0 8 1.333 6.674 6.674 0 0 0 1.333 8 6.674 6.674 0 0 0 8 14.667zM4.28 11.72L6.14 6.14l5.58-1.86-1.86 5.58-5.58 1.86z"/>\n</symbol><symbol id="burger" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M0 3c0-.552.445-1 1-1h14c.552 0 1 .444 1 1 0 .552-.445 1-1 1H1c-.552 0-1-.444-1-1zm0 10c0-.552.445-1 1-1h14c.552 0 1 .444 1 1 0 .552-.445 1-1 1H1c-.552 0-1-.444-1-1zm0-5c0-.552.445-1 1-1h14c.552 0 1 .444 1 1 0 .552-.445 1-1 1H1c-.552 0-1-.444-1-1z"/>\n</symbol><symbol id="bus" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 11c0 .88.39 1.67 1 2.22v1.28c0 .83.67 1.5 1.5 1.5S5 15.33 5 14.5V14h6v.5c0 .82.67 1.5 1.5 1.5.82 0 1.5-.67 1.5-1.5v-1.28c.61-.55 1-1.34 1-2.22V4c0-3-3-4-7-4S1 1 1 4v7Zm3.5 1c-.83 0-1.5-.67-1.5-1.5S3.67 9 4.5 9 6 9.67 6 10.5 5.33 12 4.5 12Zm7 0c-.83 0-1.5-.67-1.5-1.5S10.67 9 11.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5ZM13 7H3V3h10v4Z"/></symbol><symbol id="calendar" viewBox="0 0 16 16"><path d="M13 1h3v2H0V1h3V0h2v1h6V0h2v1zM0 4h16v10.998A1 1 0 0 1 15 16H1c-.552 0-1-.456-1-1.002V4zm2 2v8h12V6H2zm6 3h5v4H8V9z" fill-rule="nonzero"/></symbol><symbol id="camera" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M5.5 1h5l2 2H14c1.1 0 2 .9 2 2v8c0 1.1-.9 2-2 2H2c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h1.5l2-2zM8 13c2.208 0 4-1.792 4-4s-1.792-4-4-4-4 1.792-4 4 1.792 4 4 4zm0-2a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/>\n</symbol><symbol id="carbonCopy" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5.58 1.38a2.8 2.8 0 0 1 4.83-.02l.1.18.03.06h.07a2.8 2.8 0 0 1 2.93 2.29l.02.17.02.17a2.8 2.8 0 0 1-.36 1.54l-.1.17-.04.06.13.22a2.8 2.8 0 0 1-.6 3.5l-.14.12-.15.1c-.4.26-.85.42-1.32.46v5.3a.3.3 0 0 1-.48.23L8 14l-2.52 1.93a.3.3 0 0 1-.48-.24v-5.3a2.8 2.8 0 0 1-2.53-2.27l-.03-.18-.02-.17a2.8 2.8 0 0 1 .36-1.53l.1-.18.04-.06-.04-.06a2.8 2.8 0 0 1 .5-3.66l.15-.12.15-.1c.45-.3.97-.46 1.5-.47h.2l.08.01.12-.22zm2.78.7a.8.8 0 0 0-1.02.26l-.06.1-.62 1.24-1.4-.08a.8.8 0 0 0-.76 1.14l.05.1L5.32 6l-.77 1.16a.8.8 0 0 0 .62 1.24h.1l1.39-.08.62 1.25a.8.8 0 0 0 .6.43h.25a.8.8 0 0 0 .53-.33l.06-.1.62-1.25 1.4.08a.8.8 0 0 0 .76-1.14l-.05-.1L10.68 6l.77-1.16a.8.8 0 0 0-.62-1.24h-.1l-1.39.08-.62-1.25a.8.8 0 0 0-.36-.36z"/></symbol><symbol id="carpooling" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 10.25v.005-3.297a1.004 1.004 0 0 0-.072-.33l-2-5-.051-.11A1 1 0 0 0 13 1H3l-.121.007a1 1 0 0 0-.807.622l-2 5-.04.119a.99.99 0 0 0-.033.239L0 13.5l.007.145A1.498 1.498 0 0 0 1.5 15c.83 0 1.5-.67 1.5-1.5V13h3.73c.116-.167.242-.332.376-.49.233-.27.602-.648 1.091-.958A4.453 4.453 0 0 1 8 10.25C8 8.13 9.576 6 12 6s4 2.13 4 4.25ZM12 6H2.477l1.2-3h8.647l1.2 3H12ZM3.5 8C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11 5 10.33 5 9.5 4.33 8 3.5 8Z"/><path d="M10 10.25c0 1.243.895 2.25 2 2.25s2-1.007 2-2.25S13.105 8 12 8s-2 1.007-2 2.25ZM10 13c-1 0-2 1.5-2 2s0 1 .5 1h7c.5 0 .5-.5.5-1s-1-2-2-2c-.45 0-.596.101-.757.212-.198.136-.417.288-1.243.288-.826 0-1.045-.152-1.243-.288C10.596 13.101 10.45 13 10 13Z"/></symbol><symbol id="car" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M13.92 2.01C13.72 1.42 13.16 1 12.5 1h-9c-.66 0-1.21.42-1.42 1.01L.11 6.68c-.07.21-.11.43-.11.66v6.16c0 .83.67 1.5 1.5 1.5S3 14.33 3 13.5V13h10v.5c0 .82.67 1.5 1.5 1.5.82 0 1.5-.67 1.5-1.5V7.34c0-.22-.04-.45-.11-.66l-1.97-4.67zM3.5 11C2.67 11 2 10.33 2 9.5S2.67 8 3.5 8 5 8.67 5 9.5 4.33 11 3.5 11zm9 0c-.83 0-1.5-.67-1.5-1.5S11.67 8 12.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM2 6l1.27-2.82c.14-.4.52-.68.95-.68h7.56c.43 0 .81.28.95.68L14 6H2z"/>\n</symbol><symbol id="categories" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M3.243 6.034L.671 4.842a.779.779 0 0 1-.396-.397c-.197-.496 0-.894.396-1.093L7.792.075c.198-.1.395-.1.594 0l7.12 3.277a.746.746 0 0 1 .494.696.746.746 0 0 1-.494.695l-2.67 1.291-.594.298-3.856 1.887a.694.694 0 0 1-.693 0c-.198-.105-3.857-1.887-3.857-1.887l-.593-.298zm12.03 4.807c.78.4.675 1.345-.086 1.756L8.421 15.9a.985.985 0 0 1-.864 0L.572 12.49a.779.779 0 0 1-.396-.397c-.197-.497 0-.894.396-1.093l.89-.397 2.472 1.192 3.627 1.73a.984.984 0 0 0 .857-.005l3.725-1.825 2.373-1.19.756.336zm.53-3.218c.197.397 0 .894-.594 1.192l-2.274 1.092-.594.3-4.058 2.036a.98.98 0 0 1-.883 0l-4.058-2.037-.594-.299L.474 8.815a.777.777 0 0 1-.396-.398c-.198-.496 0-.894.396-1.092l1.285-.596 2.176.993 3.626 1.73a.986.986 0 0 0 .858-.005l4.12-2.023 1.582-.794 1.286.596a.771.771 0 0 1 .396.397z"/>\n</symbol><symbol id="certified" viewBox="0 0 12 12">\n    <path fill-rule="nonzero" d="M11.806 5.468c.259.295.259.737 0 1.032l-.714.812a.782.782 0 0 0-.19.588L11 8.976a.782.782 0 0 1-.606.835l-1.057.24a.782.782 0 0 0-.5.363l-.553.93a.782.782 0 0 1-.98.32l-.995-.427a.782.782 0 0 0-.619 0l-.993.43a.782.782 0 0 1-.983-.318l-.553-.929a.782.782 0 0 0-.499-.363l-1.057-.24A.782.782 0 0 1 1 8.982L1.1 7.9a.782.782 0 0 0-.191-.587l-.715-.814a.782.782 0 0 1 0-1.031l.715-.819a.782.782 0 0 0 .19-.587L1 2.988a.782.782 0 0 1 .608-.836l1.054-.236a.782.782 0 0 0 .501-.364l.552-.93c.201-.337.62-.473.982-.318l.995.427c.197.085.42.085.617 0l.995-.427a.782.782 0 0 1 .981.319l.553.93c.11.185.29.316.5.363l1.057.24a.782.782 0 0 1 .606.835l-.1 1.076c-.02.214.05.427.191.588l.714.813zm-7.526.001a.75.75 0 0 0-1.06 1.062l1.5 1.497a.75.75 0 0 0 1.06 0l3-2.997a.75.75 0 1 0-1.06-1.062L5.25 6.42l-.97-.95z"/>\n</symbol><symbol id="checkbox" viewBox="0 0 16 16">\n<path d="M14 14V8.24267L16 6.24267V14C16 15.1046 15.1046 16 14 16H2C0.895431 16 0 15.1046 0 14V2C0 0.895431 0.895431 0 2 0H13.7574L11.7574 2H2V14H14Z"/>\n<path d="M4.70711 7.29289C4.31658 6.90237 3.68342 6.90237 3.29289 7.29289C2.90237 7.68342 2.90237 8.31658 3.29289 8.70711L6.29289 11.7071C6.68342 12.0976 7.31658 12.0976 7.70711 11.7071L15.7071 3.70711C16.0976 3.31658 16.0976 2.68342 15.7071 2.29289C15.3166 1.90237 14.6834 1.90237 14.2929 2.29289L7 9.58579L4.70711 7.29289Z"/>\n</symbol><symbol id="check-circle" viewBox="0 0 48 48"><path fill-rule="evenodd" d="M24,48 C37.254834,48 48,37.254834 48,24 C48,10.745166 37.254834,0 24,0 C10.745166,0 0,10.745166 0,24 C0,37.254834 10.745166,48 24,48 Z M13.4142136,24.5857864 C12.633165,23.8047379 11.366835,23.8047379 10.5857864,24.5857864 C9.80473785,25.366835 9.80473785,26.633165 10.5857864,27.4142136 L17.5857864,34.4142136 C18.366835,35.1952621 19.633165,35.1952621 20.4142136,34.4142136 L35.4142136,19.4142136 C36.1952621,18.633165 36.1952621,17.366835 35.4142136,16.5857864 C34.633165,15.8047379 33.366835,15.8047379 32.5857864,16.5857864 L19,30.1715729 L13.4142136,24.5857864 Z"/></symbol><symbol id="check-list" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M7 1h9v2H7V1zm0 6h9v2H7V7zm0 6h9v2H7v-2zM1.825 3.716L.66 2.72a.918.918 0 0 1-.017-1.407 1.23 1.23 0 0 1 1.587-.014l.372.307L4.085.292a1.223 1.223 0 0 1 1.586 0 .915.915 0 0 1 0 1.405l-2.269 2.01A1.19 1.19 0 0 1 2.61 4a1.2 1.2 0 0 1-.785-.284zM1 12h4v4H1v-4zm1 1v2h2v-2H2zM1 6h4v4H1V6zm1 1v2h2V7H2z"/>\n</symbol><symbol id="check-square" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M64,129.99406 C64,128.892771 64.8945138,128 65.9940603,128 L78.0059397,128 C79.1072288,128 80,128.894514 80,129.99406 L80,142.00594 C80,143.107229 79.1054862,144 78.0059397,144 L65.9940603,144 C64.8927712,144 64,143.105486 64,142.00594 L64,129.99406 Z M67.7071068,137.292893 C67.3165825,136.902369 66.6834175,136.902369 66.2928932,137.292893 C65.9023689,137.683418 65.9023689,138.316582 66.2928932,138.707107 L68.2928932,140.707107 C68.6834175,141.097631 69.3165825,141.097631 69.7071068,140.707107 L77.7071068,132.707107 C78.0976311,132.316582 78.0976311,131.683418 77.7071068,131.292893 C77.3165825,130.902369 76.6834175,130.902369 76.2928932,131.292893 L69,138.585786 L67.7071068,137.292893 Z" transform="translate(-64 -128)"/>\n</symbol><symbol id="check" viewBox="0 0 16 16">\n  <g transform="translate(-32 -128)">\n    <path d="M33.7071068,138.292893 C33.3165825,137.902369 32.6834175,137.902369 32.2928932,138.292893 C31.9023689,138.683418 31.9023689,139.316582 32.2928932,139.707107 L35.2928932,142.707107 C35.6834175,143.097631 36.3165825,143.097631 36.7071068,142.707107 L47.7071068,131.707107 C48.0976311,131.316582 48.0976311,130.683418 47.7071068,130.292893 C47.3165825,129.902369 46.6834175,129.902369 46.2928932,130.292893 L36,140.585786 L33.7071068,138.292893 Z"/>\n  </g>\n</symbol><symbol id="chess" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 13a.5.5 0 0 1 .398.197l.05.079 1 2a.498.498 0 0 1-.362.717L12.5 16h-10a.501.501 0 0 1-.483-.628l.036-.096 1-2a.501.501 0 0 1 .355-.267l.092-.01h8ZM8.732.023c.2-.061.3 0 .28.18-.117.729.163 1.292.74 1.735l3.973 3.14c.32.25.367.703.106 1.012l-.615.734c-.333.4-.903.51-1.366.27a6.014 6.014 0 0 1-.57-.322 1.333 1.333 0 0 0-1.035-.16c-.56.146-1.053.027-1.514-.283l-.137-.1-.3-.241 1.623 2.1c.133.172.282.333.443.48l.308.27.396.363.243.232c.041.04.083.08.124.122.252.25.336.55.363.762l.01.14-.004.129V12H3v-1.957c.02-.703 0-1.39.04-2.096.036-.924.138-1.833.357-2.741.2-.847.454-1.693.974-2.421.447-.64.96-1.106 1.756-1.131h.175c.6.02 1.075-.201 1.375-.805.22-.423.597-.686 1.055-.826Z"/></symbol><symbol id="child" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 0a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm-12 16a1.5 1.5 0 0 1 0-3h6a1.5 1.5 0 0 1 0 3h-5m8.59-1-1.4-4H6L1.75 6.75S4 4.25 7.5 4.25c3 0 3.35 1 3.56 1.62L13.92 14c.28.78-.14 1.64-.92 1.92-.78.27-1.64-.14-1.91-.92Z"/></symbol><symbol id="circle-filled" viewBox="0 0 16 16">\n    <circle cx="8" cy="8" r="8" fill-rule="evenodd"/>\n</symbol><symbol id="clock-outline" viewBox="0 0 16 16"><path clip-rule="evenodd" d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0Zm0 2a6 6 0 1 0 0 12A6 6 0 0 0 8 2Zm0 2a1 1 0 0 1 .993.883L9 5v2.6l2 1.9a1 1 0 0 1-1.32 1.497l-.094-.083-2.293-2.207a1 1 0 0 1-.284-.576L7 8V5a1 1 0 0 1 1-1Z"/></symbol><symbol id="clock" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M136,48 C140.418278,48 144,44.418278 144,40 C144,35.581722 140.418278,32 136,32 C131.581722,32 128,35.581722 128,40 C128,44.418278 131.581722,48 136,48 Z M135,40 C135,40.2652165 135.105357,40.5195704 135.292893,40.7071068 L138.292893,43.7071068 C138.683418,44.0976311 139.316582,44.0976311 139.707107,43.7071068 C140.097631,43.3165825 140.097631,42.6834175 139.707107,42.2928932 L137,39.6004639 L137,36 C137,35.4477153 136.552285,35 136,35 C135.447715,35 135,35.4477153 135,36 L135,40 Z" transform="translate(-128 -32)"/>\n</symbol><symbol id="cloud-happy" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M4 6a4 4 0 1 1 8 0 4 4 0 1 1 0 8H4a4 4 0 1 1 0-8zm1 3s0 2 3 2 3-2 3-2H5z"/>\n</symbol><symbol id="cloud-plus-outlined" viewBox="0 0 18 16"><path d="M3.297 4.297a5.002 5.002 0 0 1 9.406 0 5.008 5.008 0 0 1 3.213 3.787 5.027 5.027 0 0 0-2.045.044A3.001 3.001 0 0 0 11 6a3 3 0 0 0-6 0 3 3 0 1 0 0 6h5.1a5.022 5.022 0 0 0 0 2H5a5 5 0 0 1-1.703-9.703ZM14 11a1 1 0 1 1 2 0v1h1a1 1 0 1 1 0 2h-1v1a1 1 0 1 1-2 0v-1h-1a1 1 0 1 1 0-2h1v-1Z"/></symbol><symbol id="cloud" viewBox="0 0 16 16">\n    \n    <g id="16px" stroke="none" stroke-width="1" fill-rule="evenodd" transform="translate(-160.000000, -255.000000)">\n        <g id="slices" transform="translate(32.000000, 32.000000)"/>\n        <mask id="mask-2" fill="white">\n            <use xlink:href="#path-1"/>\n        </mask>\n        <use id="Mask" xlink:href="#path-1"/>\n    </g>\n</symbol><symbol id="cocktail" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 10 .3 1.625A1 1 0 0 1 1.081 0H14.92a1 1 0 0 1 .78 1.625L9 10v4h3a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2h3v-4Zm4.24-6H4.761l-1.6-2h9.677l-1.6 2Z"/></symbol><symbol id="collect" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M14.56 5.575c.279.756.44 1.571.44 2.425 0 .926-.184 1.807-.51 2.616.309.275.51.678.51 1.134 0 .828-.648 1.5-1.448 1.5a1.4 1.4 0 0 1-.712-.201 6.971 6.971 0 0 1-3.438 1.81C9.246 15.513 8.68 16 8 16c-.68 0-1.246-.487-1.402-1.141a6.971 6.971 0 0 1-3.438-1.81 1.4 1.4 0 0 1-.712.201c-.8 0-1.448-.672-1.448-1.5 0-.456.201-.859.51-1.134A6.979 6.979 0 0 1 1 8c0-.854.161-1.669.44-2.425A1.52 1.52 0 0 1 1 4.5C1 3.671 1.648 3 2.448 3c.194 0 .377.041.546.112a6.98 6.98 0 0 1 3.604-1.971C6.754.487 7.32 0 8 0c.68 0 1.246.487 1.402 1.141a6.98 6.98 0 0 1 3.604 1.971c.169-.071.352-.112.546-.112.8 0 1.448.671 1.448 1.5 0 .422-.169.802-.44 1.075zM2 8c0 .797.159 1.555.44 2.251l.008-.001c.8 0 1.448.671 1.448 1.5 0 .188-.037.365-.097.53.01.011.021.019.032.029a6.226 6.226 0 0 1 8.338 0l.032-.029a1.544 1.544 0 0 1-.097-.53c0-.829.648-1.5 1.448-1.5l.008.001a5.952 5.952 0 0 0 .087-4.261c-.032.002-.063.01-.095.01-.8 0-1.448-.672-1.448-1.5 0-.255.067-.492.175-.702a5.98 5.98 0 0 0-2.977-1.652C9.068 2.649 8.576 3 8 3c-.576 0-1.068-.351-1.302-.854a5.98 5.98 0 0 0-2.977 1.652c.108.21.175.447.175.702 0 .828-.648 1.5-1.448 1.5-.032 0-.063-.008-.095-.01A5.952 5.952 0 0 0 2 8zm6 1.757c-1.439 0-2.607-1.29-2.607-2.878 0-1.59 1.168-2.88 2.607-2.88 1.439 0 2.607 1.29 2.607 2.88 0 1.589-1.168 2.878-2.607 2.878z"/>\n</symbol><symbol id="comment" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M0 .999A.997.997 0 0 1 1 0h14a1 1 0 0 1 1 .999V12c0 .552-.453.999-.997.999H8l-6 3v-3H1a1 1 0 0 1-1-.999V1zM4 5c0 .556.446 1 .997 1h6.006c.544 0 .997-.448.997-1 0-.556-.446-1-.997-1H4.997C4.453 4 4 4.448 4 5zm0 3c0 .556.444 1 .99 1h4.02A1 1 0 0 0 10 8c0-.556-.444-1-.99-1H4.99A1 1 0 0 0 4 8z"/>\n</symbol><symbol id="company" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M10 0v16H0V0h10zM4 12v-2H2v2h2zm0-4V6H2v2h2zm0-4V2H2v2h2zm4 0V2H6v2h2zm0 4V6H6v2h2zm0 4v-2H6v2h2zm3-8h5v12h-5V4zm3.5 8v-2h-2v2h2zm0-4V6h-2v2h2z"/>\n</symbol><symbol id="compare" viewBox="0 0 16 16"><path clip-rule="evenodd" d="M1 6h4.586L4.293 7.293a1 1 0 0 0 1.414 1.414l3-3a1 1 0 0 0 0-1.414l-3-3a1 1 0 0 0-1.414 1.414L5.586 4H1a1 1 0 0 0 0 2Zm14 4h-4.586l1.293-1.293a1 1 0 0 0-1.414-1.414l-3 3a1 1 0 0 0 0 1.414l3 3a1 1 0 0 0 1.414-1.414L10.414 12H15a1 1 0 1 0 0-2Z"/></symbol><symbol id="compass" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M7.864 10.663a2.667 2.667 0 0 0 2.8-2.8l1.22-3.175c.197-.51-.058-.77-.572-.573L8.136 5.337a2.667 2.667 0 0 0-2.8 2.8l-1.22 3.175c-.197.51.058.77.572.573l3.176-1.222zM8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zm0-6.667a1.333 1.333 0 1 1 0-2.666 1.333 1.333 0 0 1 0 2.666z"/>\n</symbol><symbol id="connector" viewBox="0 0 20 27">\n<title>collect</title>\n<desc>Created with Sketch.</desc>\n<g id="_xD83D__xDCE6_-components">\n	<g id="icons_x2F_apps_x2F_connector-box" transform="translate(-50.000000, -46.000000)">\n		<g id="icons_x2F_connect-data-pastille_x2F_box" transform="translate(40.000000, 40.000000)">\n			<g id="collect" transform="translate(10.000000, 6.250000)">\n				<g id="Combined-Shape">\n					<path id="path-1_1_" d="M9.7,13.2c0.1,0.1,0.2,0.1,0.3,0.1c0.1,0,0.2,0,0.3-0.1l6.2-5.8c0.1-0.1,0.1-0.2,0.1-0.3\n						c0-0.1,0-0.1,0-0.2c-0.1-0.2-0.2-0.3-0.4-0.3h-3V0.4c0-0.2-0.2-0.4-0.4-0.4H7C6.8,0,6.6,0.2,6.6,0.4v6.2H3.8\n						c-0.2,0-0.3,0.1-0.4,0.3c0,0.1,0,0.1,0,0.2c0,0.1,0,0.2,0.1,0.3L9.7,13.2z"/>\n				</g>\n				<path id="Shape" d="M19.7,11.5l-3.3-1.6l-1.8,1.7l2.9,1.4L10,16.7l-7.5-3.7l2.9-1.4L3.6,9.8l-3.3,1.6C0.1,11.6,0,11.8,0,12v9.3\n					c0,0.2,0.1,0.5,0.3,0.6l9.4,4.7c0.1,0,0.2,0.1,0.3,0.1c0.1,0,0.2,0,0.3-0.1l9.4-4.7c0.2-0.1,0.3-0.3,0.3-0.6V12\n					C20,11.8,19.9,11.6,19.7,11.5z"/>\n			</g>\n		</g>\n	</g>\n</g>\n</symbol><symbol id="contract" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M12.5 4h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 1 0 1zm0 3h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 1 0 1zm0 3h-9a.5.5 0 0 1 0-1h9a.5.5 0 0 1 0 1zm0 3h-9a.5.5 0 0 1 0-1h9a.5.5 0 0 1 0 1zM3 5V2h4v6L5 6 3 8V5zm11-5H2c-.55 0-1 .45-1 1v14c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1z"/>\n</symbol><symbol id="contrast" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M12.444 11.111H8v1.333h4.444v-1.333zM14 14H2L14 2v12zM2.222 4H4V2.222h1.333V4h1.778v1.333H5.333v1.778H4V5.333H2.222V4zm12-4H1.778C.79 0 0 .791 0 1.778v12.444C0 15.204.796 16 1.778 16h12.444c.982 0 1.778-.796 1.778-1.778V1.778C16 .79 15.2 0 14.222 0z"/>\n</symbol><symbol id="copy" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 0a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2v2a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2V2a2 2 0 0 1 2-2h7Zm-4 6H3v8h7V6Zm4-4H7v2h3a2 2 0 0 1 2 2v4h2V2Z"/></symbol><symbol id="cozy-circle" viewBox="0 0 20 20"><path fill-rule="evenodd" clip-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm2 0c0 5.523-4.477 10-10 10S0 15.523 0 10 4.477 0 10 0s10 4.477 10 10Zm-8.59 1.206c.134.086.33.046.417-.085a.28.28 0 0 0-.087-.396c-.116-.073-.125-.223-.125-.223a.296.296 0 0 0-.3-.282h-.006a.306.306 0 0 0-.21.087.283.283 0 0 0-.085.21.895.895 0 0 0 .029.183 1.682 1.682 0 0 1-2.087.004c.03-.11.03-.189.03-.191a.294.294 0 0 0-.291-.292.285.285 0 0 0-.213.076.289.289 0 0 0-.098.204s-.008.15-.126.225a.282.282 0 0 0-.085.396.315.315 0 0 0 .442.068l.007-.005c.392.295.874.455 1.375.455a2.29 2.29 0 0 0 1.379-.456l.033.022Zm.766-5.313c.521.502.845 1.153.932 1.856C14.726 7.892 16 9.236 16 10.869 16 12.594 14.574 14 12.822 14H7.177C5.425 14 4 12.595 4 10.868c0-.823.322-1.601.906-2.19a3.179 3.179 0 0 1 1.893-.92c.085-.707.41-1.36.933-1.865A3.18 3.18 0 0 1 9.954 5c.835 0 1.625.316 2.222.893Z"/></symbol><symbol id="cozy-laugh" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M4 6a4 4 0 1 1 8 0 4 4 0 1 1 0 8H4a4 4 0 1 1 0-8zm1 3s0 2 3 2 3-2 3-2H5z"/>\n</symbol><symbol id="cozy-lock" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 2.73c4.315 0 7.979 2.83 9.158 6.739C29.102 10.622 32 14.226 32 18.523c0 5.234-4.299 9.44-9.556 9.44H9.556C4.299 27.963 0 23.757 0 18.523c0-4.297 2.898-7.901 6.842-9.054C8.02 5.56 11.685 2.73 16 2.73Zm-7.244 7.317C9.683 6.975 12.575 4.73 16 4.73s6.317 2.245 7.244 5.317l.313 1.037 1.04.305c3.134.916 5.403 3.77 5.403 7.134 0 4.1-3.373 7.44-7.556 7.44H9.556c-4.183 0-7.556-3.34-7.556-7.44 0-3.365 2.27-6.218 5.403-7.134l1.04-.304.313-1.038ZM19 16a3 3 0 0 1-1.5 2.599V20.5a1.5 1.5 0 0 1-3 0v-1.901A2.999 2.999 0 0 1 16 13a3 3 0 0 1 3 3Z"/></symbol><symbol id="cozy-release" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 3c4.315 0 7.979 2.83 9.158 6.739C29.102 10.892 32 14.496 32 18.793c0 3.594-2.027 6.704-5 8.3V24.73c1.824-1.36 3-3.517 3-5.937 0-3.365-2.27-6.218-5.403-7.134l-1.04-.305-.313-1.037C22.317 7.245 19.425 5 16 5s-6.317 2.245-7.244 5.317l-.313 1.037-1.04.305C4.269 12.575 2 15.429 2 18.793c0 4.1 3.373 7.44 7.556 7.44H10v2h-.444C4.299 28.233 0 24.027 0 18.793c0-4.296 2.898-7.901 6.842-9.054C8.02 5.83 11.685 3 16 3Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.16 15.961a1.555 1.555 0 1 0-2.199 2.2l6.972 6.897H14.56a1.5 1.5 0 0 0 0 3.001h7.999a1.5 1.5 0 0 0 1.5-1.5v-8a1.5 1.5 0 0 0-3.001 0v4.374L14.16 15.96Z" fill="#CB8100"/></symbol><symbol id="cozy-text" viewBox="0 0 52 19"><path d="M10.277 3.262c-.067.084-.143.16-.227.227a.516.516 0 01-.319.085.756.756 0 01-.436-.162 5.113 5.113 0 00-1.404-.702c-.325-.109-.725-.163-1.202-.163-.624 0-1.174.113-1.651.338-.47.219-.878.55-1.19.962-.316.416-.556.923-.721 1.521a7.592 7.592 0 00-.247 2.015c0 .771.087 1.458.26 2.06.173.603.42 1.11.741 1.521.32.412.71.724 1.17.937.46.212.97.318 1.534.318.546 0 .997-.067 1.352-.202.355-.134.65-.279.884-.435a5.93 5.93 0 00.585-.436c.156-.134.316-.201.481-.201.208 0 .368.078.481.234l.728.936a4.903 4.903 0 01-1.02.949 5.85 5.85 0 01-1.203.637c-.43.166-.877.288-1.332.364a8.488 8.488 0 01-1.411.117 5.846 5.846 0 01-2.308-.455 5.228 5.228 0 01-1.858-1.326c-.525-.58-.939-1.293-1.242-2.139C.419 9.417.267 8.458.267 7.383c0-.98.136-1.885.41-2.717a6.046 6.046 0 011.209-2.151 5.588 5.588 0 011.969-1.418C4.635.755 5.528.584 6.533.584c.945 0 1.777.152 2.496.455.72.303 1.36.732 1.924 1.287l-.676.936zM19.091.584c.97 0 1.848.158 2.633.474.76.3 1.444.767 2.001 1.366.55.593.973 1.308 1.268 2.145.295.836.442 1.774.442 2.814s-.147 1.98-.442 2.821c-.295.84-.717 1.556-1.267 2.145a5.527 5.527 0 01-2.002 1.358c-.785.317-1.662.475-2.633.475-.98 0-1.861-.158-2.645-.474a5.59 5.59 0 01-2.009-1.359c-.555-.59-.981-1.304-1.28-2.145-.3-.84-.449-1.781-.449-2.821 0-1.04.15-1.978.449-2.814a6.11 6.11 0 011.28-2.146 5.55 5.55 0 012.008-1.365c.785-.316 1.667-.474 2.646-.474zm0 11.622c1.248 0 2.18-.42 2.795-1.261.615-.84.923-2.024.923-3.549s-.308-2.71-.923-3.556c-.615-.845-1.547-1.267-2.795-1.267-1.265 0-2.208.422-2.828 1.267-.62.846-.929 2.03-.929 3.556 0 1.525.31 2.708.93 3.549.62.84 1.562 1.261 2.827 1.261zM37.46 1.858c0 .182-.032.36-.097.533-.066.173-.15.32-.254.442l-6.929 9.178h7.046V14H27.203v-1.066c0-.121.03-.266.091-.436.06-.169.147-.327.26-.474l6.968-9.243h-6.916V.792h9.854v1.066zM51.604.792l-7.332 17.043a1.07 1.07 0 01-.312.442c-.13.104-.32.156-.572.156h-1.885l2.418-5.265L38.5.792h2.21c.217 0 .386.052.507.156a.906.906 0 01.26.351l3.354 7.93c.07.2.136.4.201.605.064.199.118.4.163.604.12-.413.26-.821.416-1.222l3.237-7.917a.84.84 0 01.286-.364.73.73 0 01.442-.143h2.028z" fill-rule="nonzero"/></symbol><symbol id="credit-card-add" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 11.003l3-.001c0 .702.127 1.372.35 1.998H1.996A2.003 2.003 0 0 1 0 11.003V1.997C0 .898.9 0 1.997 0h12.006C15.101 0 16 .898 16 1.997v5.689a6.031 6.031 0 0 0-1.999-1.876V6H1.998L2 11.003zM1.997 2v1H14V2H1.997zM11 8h2v3h3v2h-3v3h-2v-3H8v-2h3V8z"/>\n</symbol><symbol id="credit-card" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 8v5h12V4H2v1h12v3H2zm0-6h12a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/>\n</symbol><symbol id="credit" viewBox="0 0 16 16">\n    <g fill-rule="evenodd">\n        <path d="M3.414 10H11a1 1 0 0 1 0 2H3.414l1.293 1.293a1 1 0 0 1-1.414 1.414l-3-3a1 1 0 0 1 0-1.414l3-3a1 1 0 1 1 1.414 1.414L3.414 10z" opacity=".322"/>\n        <path d="M12.586 4l-1.293-1.293a1 1 0 1 1 1.414-1.414l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L12.586 6H5a1 1 0 1 1 0-2h7.586z"/>\n    </g>\n</symbol><symbol id="crop" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M4 15v1H0v-4h1V4H0V0h4v1h8V0h4v4h-1v8h1v4h-4v-1H4zm0-2h8v-1h1V4h-1V3H4v1H3v8h1v1zM1 1v2h2V1H1zm12 0v2h2V1h-2zm0 12v2h2v-2h-2zM1 13v2h2v-2H1z"/>\n</symbol><symbol id="cross-circle-outline" viewBox="0 0 16 16"><path d="M4.793 4.793a1 1 0 0 1 1.414 0L8 6.586l1.793-1.793a1 1 0 0 1 1.414 1.414L9.414 8l1.793 1.793a1 1 0 0 1-1.414 1.414L8 9.414l-1.793 1.793a1 1 0 0 1-1.414-1.414L6.586 8 4.793 6.207a1 1 0 0 1 0-1.414Z"/><path fill-rule="evenodd" d="M16 8c0-4.416-3.584-8-8-8S0 3.584 0 8s3.584 8 8 8 8-3.584 8-8Zm-2 0c0-3.311-2.689-6-6-6S2 4.689 2 8s2.689 6 6 6 6-2.689 6-6Z"/></symbol><symbol id="cross-circle" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM5.707 4.293l-.094-.083a1 1 0 0 0-1.226 0l-.094.083-.083.094-.07.102c-.206.345-.185.788.062 1.114l.09.104L6.586 8l-2.292 2.293a1 1 0 0 0 1.32 1.497l.094-.083L8 9.415l2.293 2.292.094.083a1 1 0 0 0 1.226 0l.094-.083.083-.094a1 1 0 0 0 0-1.226l-.083-.094L9.415 8l2.292-2.293a1 1 0 0 0-1.32-1.497l-.094.083L8 6.585 5.707 4.293l-.094-.083.094.083z"/>\n</symbol><symbol id="cross-medium" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 6.59l5.3-5.3a1 1 0 0 1 1.4 1.42L9.42 8l5.3 5.3a1 1 0 0 1-1.42 1.4L8 9.42l-5.3 5.3a1 1 0 1 1-1.4-1.42L6.58 8l-5.3-5.3A1 1 0 1 1 2.7 1.3L8 6.58z"/>\n</symbol><symbol id="cross-small" viewBox="0 0 12 12">\n  <path d="M6 4.59l2.3-2.3a1 1 0 0 1 1.4 1.42L7.42 6l2.3 2.3A1 1 0 1 1 8.3 9.7L6 7.42l-2.3 2.3A1 1 0 1 1 2.3 8.3L4.58 6l-2.3-2.3A1 1 0 0 1 3.7 2.3L6 4.58z"/>\n</symbol><symbol id="cross" viewBox="0 0 24 24">\n  <path fill-rule="evenodd" d="M106.585786,44 L96.2928932,33.7071068 C95.9023689,33.3165825 95.9023689,32.6834175 96.2928932,32.2928932 C96.6834175,31.9023689 97.3165825,31.9023689 97.7071068,32.2928932 L108,42.5857864 L118.292893,32.2928932 C118.683418,31.9023689 119.316582,31.9023689 119.707107,32.2928932 C120.097631,32.6834175 120.097631,33.3165825 119.707107,33.7071068 L109.414214,44 L119.707107,54.2928932 C120.097631,54.6834175 120.097631,55.3165825 119.707107,55.7071068 C119.316582,56.0976311 118.683418,56.0976311 118.292893,55.7071068 L108,45.4142136 L97.7071068,55.7071068 C97.3165825,56.0976311 96.6834175,56.0976311 96.2928932,55.7071068 C95.9023689,55.3165825 95.9023689,54.6834175 96.2928932,54.2928932 L106.585786,44 Z" transform="translate(-96 -32)"/>\n</symbol><symbol id="cube" viewBox="0 0 16 16">\n  <path d="M1,11.0086308 L1,5.50051502 C1,4.95127159 1.3905874,4.72776572 1.87240137,5.00308799 L7.12759863,8.00605786 C7.60359323,8.27805477 8,8.95047139 8,9.50051502 L8,15.0086308 C8,15.5578743 7.6094126,15.7813801 7.12759863,15.5060579 L1.87240137,12.503088 C1.39640677,12.2310911 1,11.5586745 1,11.0086308 Z M16,11.0086308 C16,11.5586745 15.6035932,12.2310911 15.1275986,12.503088 L9.87240137,15.5060579 C9.3905874,15.7813801 9,15.5578743 9,15.0086308 L9,9.50051502 C9,8.95047139 9.39640677,8.27805477 9.87240137,8.00605786 L15.1275986,5.00308799 C15.6094126,4.72776572 16,4.95127159 16,5.50051502 L16,11.0086308 Z M9.34976149,6.98164278 C8.88045118,7.27044912 8.11286116,7.26633364 7.65023851,6.98164278 L2.84976149,4.02750307 C2.38045118,3.73869673 2.38713884,3.29611355 2.87661892,3.03254735 L7.62338108,0.476598498 C8.10752434,0.215905973 8.88713884,0.213032303 9.37661892,0.476598498 L14.1233811,3.03254735 C14.6075243,3.29323988 14.6128612,3.74281221 14.1502385,4.02750307 L9.34976149,6.98164278 Z" id="path-1"/>\n</symbol><symbol id="dashboard" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M9.118 10h4.532S14 8.722 14 8A6 6 0 1 0 2 8c0 .705.345 2 .345 2h4.537l2.224-4.447a1 1 0 0 1 1.788.894L9.118 10zM8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>\n</symbol><symbol id="dash" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 7h12a1 1 0 0 1 0 2H2a1 1 0 1 1 0-2z"/>\n</symbol><symbol id="data-control" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M14.792.198A.625.625 0 0 1 15 .667v7.999c0 .598-.122 1.189-.366 1.776a6.574 6.574 0 0 1-.909 1.564c-.361.454-.79.896-1.289 1.328a14.745 14.745 0 0 1-2.708 1.88 19.53 19.53 0 0 1-.979.515c-.193.09-.348.161-.465.208A.646.646 0 0 1 8 16a.643.643 0 0 1-.284-.063 9.866 9.866 0 0 1-.465-.208 19 19 0 0 1-.98-.515 14.743 14.743 0 0 1-2.707-1.88 10.006 10.006 0 0 1-1.29-1.328 6.538 6.538 0 0 1-.908-1.564A4.588 4.588 0 0 1 1 8.666V.667c0-.181.069-.337.208-.469A.69.69 0 0 1 1.7 0h12.6a.69.69 0 0 1 .492.198zM5 6.998a1 1 0 1 0 2 0V4.414l.293.293a.997.997 0 0 0 1.414 0 .999.999 0 0 0 0-1.414l-1.999-2a1 1 0 0 0-1.416 0l-1.999 2a.999.999 0 1 0 1.414 1.414L5 4.413v2.586zm5.708 5.708l1.999-1.999a.999.999 0 1 0-1.414-1.414L11 9.586V7a1 1 0 1 0-2 0v2.586l-.293-.293a.999.999 0 1 0-1.414 1.414l1.999 1.999a.99.99 0 0 0 .326.217.991.991 0 0 0 1.09-.217z"/>\n</symbol><symbol id="debit" viewBox="0 0 16 16">\n    <g fill-rule="evenodd">\n        <path d="M3.414 10H11a1 1 0 0 1 0 2H3.414l1.293 1.293a1 1 0 0 1-1.414 1.414l-3-3a1 1 0 0 1 0-1.414l3-3a1 1 0 0 1 1.414 1.414L3.414 10z"/>\n        <path d="M12.586 4l-1.293-1.293a1 1 0 0 1 1.414-1.414l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L12.586 6H5a1 1 0 1 1 0-2h7.586z" opacity=".316"/>\n    </g>\n</symbol><symbol id="devices" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M9.734 5.995c0-.55.45-.995.99-.995h4.02a1 1 0 0 1 .99.995v8.01c0 .55-.451.995-.99.995h-4.02a1 1 0 0 1-.99-.995v-8.01zm2 1.005v6h2V7h-2zm-11-5.002c0-.551.447-.998.998-.998h11.003c.552 0 .999.444.999 1v1h-11v6h5v4H.73c-.55 0-.858-.417-.68-.95L.733 10V1.998z"/>\n</symbol><symbol id="dots" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M34,74 C35.1045695,74 36,73.1045695 36,72 C36,70.8954305 35.1045695,70 34,70 C32.8954305,70 32,70.8954305 32,72 C32,73.1045695 32.8954305,74 34,74 Z M46,74 C47.1045695,74 48,73.1045695 48,72 C48,70.8954305 47.1045695,70 46,70 C44.8954305,70 44,70.8954305 44,72 C44,73.1045695 44.8954305,74 46,74 Z M40,74 C41.1045695,74 42,73.1045695 42,72 C42,70.8954305 41.1045695,70 40,70 C38.8954305,70 38,70.8954305 38,72 C38,73.1045695 38.8954305,74 40,74 Z" transform="translate(-32 -64)"/>\n</symbol><symbol id="download" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M231,103.414214 L229.707107,104.707107 C229.316582,105.097631 228.683418,105.097631 228.292893,104.707107 C227.902369,104.316582 227.902369,103.683418 228.292893,103.292893 L231.292893,100.292893 C231.683418,99.9023689 232.316582,99.9023689 232.707107,100.292893 L235.707107,103.292893 C236.097631,103.683418 236.097631,104.316582 235.707107,104.707107 C235.316582,105.097631 234.683418,105.097631 234.292893,104.707107 L233,103.414214 L233,111 C233,111.552285 232.552285,112 232,112 C231.447715,112 231,111.552285 231,111 L231,103.414214 Z M225,99 L239,99 C239.552285,99 240,98.5522847 240,98 C240,97.4477153 239.552285,97 239,97 L225,97 C224.447715,97 224,97.4477153 224,98 C224,98.5522847 224.447715,99 225,99 Z" transform="matrix(1 0 0 -1 -224 113)"/>\n</symbol><symbol id="down" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M5 0v8H0l8 8 8-8h-5V0z"/>\n</symbol><symbol id="drawing-arrow-up" viewBox="0 0 40 36"><path d="M4.008 0l.07.12h.034l.047.016.035.02.029.026L5.945 2.19l1.153 1.326a92.633 92.633 0 002.778 3.052l.676.698.494.5.406.425 1.622 1.768.586.626.526.541c1.012 1.016 1.834 1.682 2.53 2.004.228.105.264.525.03.609-2.223.79-4.188.908-5.798-.02l-.208-.127.126.463c1.819 6.009 6.042 10.741 12.236 14.28 5.583 3.188 11.23 4.584 16.135 3.567l.385-.085.094.014.037.017c.182.106.27.239.242.39a.456.456 0 01-.17.258l-.075.06-.22.096-.571.264-.49.184-.966.352c-8.112 2.89-13.91 3.289-19.627.42-6.312-3.166-11.194-10.25-12.474-17.744l-.066-.409-.059-.41c-.896 1.616-2.631 2.519-4.937 2.987-.242.049-.432-.327-.292-.536.427-.636.768-1.589 1.102-2.989l.072-.307.143-.656.545-2.778.054-.263.101-.469.233-1.004.195-.89c.191-.897.371-1.826.562-2.9l.097-.548.228-1.339.54-3.351.017-.048.007-.011.037-.049.033-.018L4.008 0zm1.885 13.409H5.85l.019.04.015.043.1.364.068.258.218.904.264.778.76 2.311.269.801.296.858c.722 2.046 1.311 3.398 2.093 4.736l.159.268.286.461c2.357 3.705 5.486 6.507 9.028 7.886 5.467 2.129 11.574 1.933 17.96-.202a19.56 19.56 0 01-4.353-.009l-.554-.069 2.21.854-.845.179-2.074-.708-1.449-.507-1.723-.615-1.912-.694-9.578-3.53-4.485-1.636-1.849-.686-.084-.087-.176-.263-.282-.456-.182-.301.799.296 1.26.311c1.263.319 2.533.656 3.807 1.011l1.276.362-1.1-.462-1.531-.651-.596-.248a51.461 51.461 0 00-4.401-1.596 3.325 3.325 0 01-.21-.346l-.056-.107-.186-.395-.136-.299-.236-.541 1.625.525c.909.301 1.81.611 2.703.93l1.335.487 1.324.5-.4-.398c-.392-.4-.766-.806-1.12-1.219a81.77 81.77 0 00-4.845-1.181l-.77-.155-.091-.075-.216-.552.138-.164.692.134c.926.186 1.873.4 2.855.646l.743.19-4.78-1.886-.07-.074-.298-.863 5.155 2.05-.269-.388a17.112 17.112 0 01-.488-.77l-.225-.385-4.295-1.052-.086-.08-.182-.55.147-.158 3.975 1.01-.154-.314-.147-.316L6.76 16l-.072-.075-.317-.928-.017-.071.16-.143 3.877 1.328-.052-.108-.054-.116-.052-.123-4.077-1.816-.068-.08-.102-.377-.02-.042a.114.114 0 00-.074-.041zm5.059 12.397l20.87 8.426-.467.06-.54.064-.175.019.01.002-.328.028-.699.053-.44.025-.448.018-14.502-4.91-.202-.181-.355-.334-.31-.31-.354-.365 15.16 5.138-16.368-6.602a9.298 9.298 0 01-.32-.396l-.145-.194-.387-.54zm3.377 3.921l10.263 4.59-1.006-.185a22.441 22.441 0 01-2.129-.495l-.516-.154-3.883-1.735a17.885 17.885 0 01-1.634-1.13l-.388-.31-.707-.58zm2.994-2.561l3.456 1.309 1.2.445-.55-.337-.537-.343a178.07 178.07 0 00-2.38-.725l-1.189-.35zm-3.95-3.095l1.634.654 1.182.46 1.144.434-.059-.05-1.297-.515-.653-.253-.655-.25-1.296-.48zm2.353.093l.188.179.308.122-.193-.183-.303-.118zm-3.014-2.773l.767.302.217.061-.1-.126-.884-.237zm.181-.703l-.174-.07.11.15.17.069-.106-.15zM4.286.98l.01.736c.025 4.164-.555 8.238-1.67 11.907-.282.93-.622 1.812-.973 2.51l-.132.252-.13.231.07-.112.155-.266.082-.151.083-.16.14-.064.563.142.003-.02c.003-.011.008-.019.022-.029l.075-.043.229-.126.394-.226a6.22 6.22 0 00.74-.501l.125-.104-1.502-.587-.072-.156.106-.304.096-.297.158-.08 1.934.664.133-.184.128-.195.115-.317-2.058-.934-.068-.144.128-.46.016-.007-.01-.02.109-.459.157-.088 5.586 1.78-.676-.332-.256-.123-.823-.386-3.508-1.599-.182-.084-.069-.137.1-.52.173-.088 1.108.509c.61.282 1.227.57 1.853.865l.946.447 1.786.849-.022-.258v-.061l.01-.059-5.666-2.69-.068-.134.088-.462.174-.09 8.563 4.06.21.003.22-.001 1.116-.039.197-.005c.25-.005.46-.003.658.007a11.406 11.406 0 01-1.465-.966l-.266-.206-9.278-2.92-.085-.136.07-.459.158-.099 7.777 2.445-.342-.32-.335-.323L8.732 8.76 4.21 6.73l-.072-.125.05-.466.173-.1 5.495 2.454-.096-.102-.522-.575a38.552 38.552 0 01-1.011-1.183c-.993-.31-2.03-.623-3.085-.919l-.793-.218-.09-.13.031-.457.082-.06-.07-.113.032-.48.17-.107 2.637 1.113-.116-.152-.396-.538-.385-.54-.586-.144-1.2-.306-.093-.124.018-.642.156-.116.854.248.142.042-.273-.421-.255-.02-.256-.036-.253-.042-.103-.122-.004-.337.06-.05-.061-.086-.005-.338.16-.119-.26-.44zm5.632 13.887l.04.13.074.034.032-.011-.032-.1-.114-.053zm-4.894-2.221l4.894 2.22-.026-.084-.085-.316-.077-.322-4.706-1.498zm4.456-.077l.012.12.448.21-.356-.17-.014-.12-.09-.04zm.767-.46l.104.092.233.195.14.11-.121-.098a6.117 6.117 0 01-.307-.27.137.137 0 00-.049-.028z"/></symbol><symbol id="dropdown-close" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M0 8c0-4.416 3.584-8 8-8s8 3.584 8 8-3.584 8-8 8-8-3.584-8-8zm6.293 2.293a1 1 0 0 0 1.414 1.414l3-3a1 1 0 0 0 0-1.414l-3-3a1 1 0 0 0-1.414 1.414L8.586 8l-2.293 2.293z"/>\n</symbol><symbol id="dropdown-open" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 0c4.416 0 8 3.584 8 8s-3.584 8-8 8-8-3.584-8-8 3.584-8 8-8zM5.707 6.293a1 1 0 0 0-1.414 1.414l3 3a1 1 0 0 0 1.414 0l3-3a1 1 0 1 0-1.414-1.414L8 8.586 5.707 6.293z"/>\n</symbol><symbol id="dropdown" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 5h12l-6 7z"/>\n</symbol><symbol id="dropup" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M14 12H2l6-7z"/>\n</symbol><symbol id="electric-bike" viewBox="0 0 16 16"><path d="M4.736.17c.018-.053-.012-.11-.075-.143-.088-.046-.212-.032-.276.03L.115 4.15A.345.345 0 0 0 0 4.398c0 .232.265.42.593.42h1.592l-.658 3.021c-.011.053.021.106.084.137.09.043.213.027.274-.037l4.011-4.142A.34.34 0 0 0 6 3.561c0-.231-.265-.419-.593-.419H3.765L4.736.171ZM10.5 5a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9.045 7.996a7.202 7.202 0 0 1-.588-.453L7.221 8.779l1.334.889A1 1 0 0 1 9 10.5V14a1 1 0 1 1-2 0v-2.965L4.68 9.488a1.527 1.527 0 0 1-.233-2.35l2.204-2.203a1.484 1.484 0 0 1 1.05-.435c.571 0 1.022.318 1.276.686.205.297.635.771 1.204 1.164.57.393 1.198.65 1.819.65a1 1 0 1 1 0 2c-1.162 0-2.184-.471-2.955-1.004Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M16 13a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-1.5 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM6 13a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-1.5 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"/></symbol><symbol id="electric-car" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.283.92c.08.059.118.16.095.257L13.15 6.5h2.078a.75.75 0 0 1 .62 1.174l-5.078 7.42a.25.25 0 0 1-.453-.18L11.15 9.5H9.134a.75.75 0 0 1-.604-1.195L13.934.972a.25.25 0 0 1 .35-.053ZM11.43 1 9.955 3H3.677l-1.2 3h5.268L6.92 7.118a2.75 2.75 0 0 0-.536 1.631l.005.168a2.751 2.751 0 0 0 2.244 2.536l.188.028L8.587 13H3v.5c0 .83-.67 1.5-1.5 1.5-.781 0-1.42-.594-1.493-1.355L0 13.5V6.987a.99.99 0 0 1 .032-.239l.04-.12 2-5a1 1 0 0 1 .807-.62L3 1h8.43ZM3.5 8C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11 5 10.33 5 9.5 4.33 8 3.5 8Z"/></symbol><symbol id="electric-scooter" viewBox="0 0 16 16"><path d="M4.736.17c.018-.053-.012-.11-.075-.143-.088-.046-.212-.032-.276.03L.115 4.15A.345.345 0 0 0 0 4.398c0 .232.265.42.593.42h1.592l-.658 3.021c-.011.053.021.106.084.137.09.043.213.027.274-.037l4.011-4.142A.34.34 0 0 0 6 3.561c0-.231-.265-.419-.593-.419H3.765L4.736.171Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8 1a1 1 0 0 1 1-1h2.22a2 2 0 0 1 1.94 1.515l1.81 7.242A1 1 0 0 1 14 10h-.5a3.5 3.5 0 0 0-3.465 4H4.95a2.5 2.5 0 1 1-.45-2h3.707a5.506 5.506 0 0 1 4.525-3.947L11.22 2H9a1 1 0 0 1-1-1ZM3 13.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M16 13.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm-2 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z"/></symbol><symbol id="email-notification" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M14 5.95V6v-.05a2.5 2.5 0 1 1 0 0zM10.073 4c.222 1.418.95 2.336 2.18 2.748L7 9 0 6V5c0-.552.45-1 1.007-1h9.066zM0 8l7 3 7-3v5.997c0 .554-.45 1.003-1.007 1.003H1.007A.998.998 0 0 1 0 13.997V8z"/>\n</symbol><symbol id="email" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M0 2.999A.998.998 0 0 1 1 2h14c.552 0 1 .443 1 .999V5L8 8 0 5V2.999zM0 7l8 3 8-3v7.003c0 .55-.445.997-1 .997H1c-.552 0-1-.453-1-.997V7z"/>\n</symbol><symbol id="euro" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M14.684 2.904C13.518 1.232 12 0 9.316 0 6.192 0 3.948 2.134 3.068 5.104H1v1.87h1.716c-.044.33-.044.682-.044 1.012 0 .286 0 .572.022.836H1v1.892h2.002c.858 3.124 3.146 5.214 6.402 5.214 2.508 0 4.07-1.276 5.324-3.102l-1.936-1.43c-1.012 1.342-1.892 2.112-3.366 2.112-1.716 0-2.97-1.056-3.586-2.794h4.752V8.822h-5.17C5.4 8.536 5.4 8.25 5.4 7.942c0-.33 0-.66.044-.968h5.148v-1.87h-4.73C6.478 3.454 7.688 2.42 9.25 2.42c1.54 0 2.442.704 3.388 2.002l2.046-1.518z"/>\n</symbol><symbol id="eu" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2.343 2.343l1.227.625.974-.973-.216 1.36 1.227.625-1.36.215-.215 1.36-.625-1.227-1.36.216.973-.974-.625-1.227zM8 0l.426 1.31h1.376l-1.114.809.426 1.31L8 2.619l-1.114.81.425-1.31-1.114-.81h1.377L8 0zM1.31 7.574V6.197l.809 1.114 1.31-.425L2.619 8l.81 1.114-1.31-.426-.81 1.114V8.425L0 8l1.31-.426zm1.033 6.083l.625-1.227-.973-.974 1.36.216.625-1.227.215 1.36 1.36.215-1.227.625.216 1.36-.974-.973-1.227.625zm11.314 0l-1.227-.625-.974.973.216-1.36-1.227-.625 1.36-.215.215-1.36.625 1.227 1.36-.216-.973.974.625 1.227zM8 13.38l1.114-.81-.426 1.31 1.114.81H8.425L8 16l-.426-1.31H6.197l1.115-.809-.426-1.31 1.114.81zm5.881-6.07l.81-1.114v1.377L16 8l-1.31.425v1.377l-.809-1.114-1.31.426.81-1.114-.81-1.114 1.31.425zm-.224-4.968l-.625 1.227.973.974-1.36-.216-.625 1.227-.215-1.36-1.36-.215 1.227-.625-.216-1.36.974.973 1.227-.625z"/>\n</symbol><symbol id="exchange" viewBox="0 0 20 20">\n<g id="Mask">\n	<path id="path-1_1_" d="M4.3,12.5h9.5c0.7,0,1.2,0.6,1.2,1.2S14.4,15,13.8,15H4.3l1.6,1.6c0.5,0.5,0.5,1.3,0,1.8\n		c-0.5,0.5-1.3,0.5-1.8,0l-3.8-3.8c-0.5-0.5-0.5-1.3,0-1.8l3.8-3.8c0.5-0.5,1.3-0.5,1.8,0s0.5,1.3,0,1.8L4.3,12.5z M15.7,7.5H6.2\n		C5.6,7.5,5,6.9,5,6.2S5.6,5,6.2,5h9.5l-1.6-1.6c-0.5-0.5-0.5-1.3,0-1.8s1.3-0.5,1.8,0l3.8,3.8c0.5,0.5,0.5,1.3,0,1.8l-3.8,3.8\n		c-0.5,0.5-1.3,0.5-1.8,0s-0.5-1.3,0-1.8L15.7,7.5z"/>\n</g>\n</symbol><symbol id="eye-closed" viewBox="0 0 20 20"><g fill-rule="evenodd"><path d="M1 10s3-6 9-6 9 6 9 6-3 6-9 6-9-6-9-6Zm9 4a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM3 17 17 4"/><path d="M16.32 3.267c.966-.832 2.311.514 1.36 1.466l-14 13c-.992.854-2.31-.516-1.36-1.466l14-13Z" style="fill-rule:nonzero"/></g></symbol><symbol id="eye" viewBox="0 0 20 20">\n  <path fill-rule="evenodd" d="M21,10 C21,10 24,4 30,4 C36,4 39,10 39,10 C39,10 36,16 30,16 C24,16 21,10 21,10 Z M30,14 C32.2091391,14 34,12.2091391 34,10 C34,7.79086089 32.2091391,6 30,6 C27.7908609,6 26,7.79086089 26,10 C26,12.2091391 27.7908609,14 30,14 Z M30,12 C31.1045696,12 32,11.1045696 32,10 C32,8.89543045 31.1045696,8 30,8 C28.8954304,8 28,8.89543045 28,10 C28,11.1045696 28.8954304,12 30,12 Z" transform="translate(-20)"/>\n</symbol><symbol id="face-id" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 3a1 1 0 0 1 1-1h2a1 1 0 0 0 0-2H3a3 3 0 0 0-3 3v2a1 1 0 0 0 2 0V3Zm12 0a1 1 0 0 0-1-1h-2a1 1 0 1 1 0-2h2a3 3 0 0 1 3 3v2a1 1 0 1 1-2 0V3ZM3 14a1 1 0 0 1-1-1v-2a1 1 0 1 0-2 0v2a3 3 0 0 0 3 3h2a1 1 0 1 0 0-2H3Zm11-1a1 1 0 0 1-1 1h-2a1 1 0 1 0 0 2h2a3 3 0 0 0 3-3v-2a1 1 0 1 0-2 0v2ZM6 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm5 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM7 6a1 1 0 0 1 2 0v2a1 1 0 0 1-2 0V6Zm-1.386 4.21a1 1 0 1 0-1.228 1.58C5.364 12.55 6.63 13 8 13c1.369 0 2.636-.45 3.614-1.21a1 1 0 1 0-1.228-1.58C9.765 10.695 8.932 11 8 11c-.932 0-1.765-.306-2.386-.79Z"/></symbol><symbol id="file-add" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M1 1c0-.552.446-1 .998-1H10v5h5v10.004a1 1 0 0 1-1.007.996H2.007A1.002 1.002 0 0 1 1 15V1zm10 3V0l4 4h-4zM7 6v3H4v2h3v3h2v-3h3V9H9V6H7z"/>\n</symbol><symbol id="file-duotone" viewBox="0 0 26 32"><g fill-rule="evenodd"><path d="M0 2.002C0 .896.89 0 1.997 0H19l7 7v22.996A2 2 0 0 1 24.003 32H1.997A1.995 1.995 0 0 1 0 29.998C.048 16 0 16 0 2.002Z" opacity=".242"/><path d="M18.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5Z"/></g></symbol><symbol id="file-new" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M1 1c0-.552.446-1 .998-1H10v5h5v10.004a1 1 0 0 1-1.007.996H2.007A1.002 1.002 0 0 1 1 15V1zm10 3V0l4 4h-4zM7 6v3H4v2h3v3h2v-3h3V9H9V6H7z"/>\n</symbol><symbol id="file-none" viewBox="0 0 16 16">\n  \n  <g fill-rule="evenodd">\n    <use xlink:href="#file-none-a"/>\n  </g>\n</symbol><symbol id="file-outline" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M13 5h-3V2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h8c.55 0 1-.45 1-1V5zm2-.999v11.003a1 1 0 0 1-1.007.996H2.007A1.001 1.001 0 0 1 1 14.999V1.001A.999.999 0 0 1 1.998 0H11l4 4.001z"/>\n</symbol><symbol id="file" viewBox="0 0 16 16">\n  \n  <g fill-rule="evenodd">\n    <use xlink:href="#file-a"/>\n  </g>\n</symbol><symbol id="filter" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 0h12a1 1 0 0 1 1 1v.581a1 1 0 0 1-.299.713L10 6.92V16l-4-3.09v-6L1.3 2.294A1 1 0 0 1 1 1.58V1a1 1 0 0 1 1-1z"/>\n</symbol><symbol id="fingerprint" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M15.904 3.955a.513.513 0 0 1-.123.72.512.512 0 0 1-.721-.124 8.208 8.208 0 0 0-2.958-2.566C9.6.703 6.377.706 3.89 1.995A8.29 8.29 0 0 0 .921 4.578a.455.455 0 0 1-.404.215.534.534 0 0 1-.296-.09.504.504 0 0 1-.213-.33.525.525 0 0 1 .087-.393 9.187 9.187 0 0 1 3.33-2.903c2.78-1.435 6.372-1.437 9.15-.009a9.208 9.208 0 0 1 3.33 2.886zM7.97 2.091c4.048 0 7.341 3.127 7.341 6.972 0 1.468-1.25 2.663-2.787 2.663s-2.787-1.195-2.787-2.663c0-.902-.789-1.635-1.758-1.635S6.22 8.161 6.22 9.063a5.48 5.48 0 0 0 1.625 3.918c.831.822 1.63 1.275 2.848 1.611.13.034.24.118.308.235a.517.517 0 0 1 .052.394.499.499 0 0 1-.485.39.58.58 0 0 1-.133-.02c-1.41-.39-2.339-.915-3.31-1.869a6.508 6.508 0 0 1-1.935-4.65c0-1.469 1.251-2.665 2.788-2.665s2.787 1.196 2.787 2.664c0 .901.79 1.634 1.758 1.634.97 0 1.758-.733 1.758-1.634 0-3.276-2.832-5.94-6.312-5.94-2.479 0-4.738 1.375-5.755 3.505-.34.708-.513 1.527-.513 2.435 0 .684.061 1.754.586 3.154a.507.507 0 0 1-.013.4.492.492 0 0 1-.288.26.508.508 0 0 1-.658-.3A9.877 9.877 0 0 1 .681 9.07c0-1.065.204-2.037.606-2.886C2.473 3.698 5.095 2.091 7.97 2.091zM4.784 12.426c.55.988.933 1.422 1.618 2.116a.53.53 0 0 1 0 .728.564.564 0 0 1-.38.156.487.487 0 0 1-.363-.158c-.765-.764-1.183-1.259-1.78-2.339-.611-1.089-.934-2.423-.934-3.858 0-2.659 2.27-4.822 5.06-4.822 2.79 0 5.06 2.163 5.06 4.822a.51.51 0 0 1-.515.515.51.51 0 0 1-.515-.515c0-2.09-1.808-3.792-4.03-3.792-2.222 0-4.03 1.701-4.03 3.792 0 1.256.279 2.417.809 3.355zm8.458.245a.503.503 0 0 1 .38.082.525.525 0 0 1 .217.338.517.517 0 0 1-.423.598 6.024 6.024 0 0 1-1.078.107c-1.069 0-2-.268-2.773-.797-1.332-.904-2.129-2.372-2.129-3.928a.51.51 0 0 1 .515-.515.51.51 0 0 1 .515.515c0 1.22.627 2.37 1.676 3.074.61.413 1.33.613 2.196.613.187 0 .535-.023.904-.087z"/>\n</symbol><symbol id="fitness" viewBox="0 0 16 16"><path d="m14.982 9.273.72-.72a.996.996 0 0 0 0-1.41l-.02-.02a.996.996 0 0 0-1.41 0l-2.86 2.86-5.4-5.4 2.86-2.86a.996.996 0 0 0 0-1.41l-.02-.02a.996.996 0 0 0-1.41 0l-.72.72-.72-.72c-.39-.39-1.03-.39-1.42 0l-1.43 1.43-.72-.72a1.02 1.02 0 0 0-1.43 0 1.02 1.02 0 0 0 0 1.43l.72.72-1.43 1.43a.996.996 0 0 0 0 1.41l.72.72-.72.73a.996.996 0 0 0 0 1.41l.02.02c.39.39 1.02.39 1.41 0l2.86-2.86 5.4 5.4-2.86 2.86a.996.996 0 0 0 0 1.41l.02.02c.39.39 1.02.39 1.41 0l.72-.72.72.72c.39.39 1.02.39 1.41 0l1.43-1.43.72.72c.39.39 1.04.39 1.43 0 .39-.39.39-1.04 0-1.43l-.72-.72 1.44-1.43a.996.996 0 0 0 0-1.41l-.72-.73Z"/></symbol><symbol id="flag-outlined" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8.98 2H15v10H8l-.979-2H3v6H1V0h7l.98 2zM3 8h5l1.03 2H13V4H8L6.997 2H3v6z"/>\n</symbol><symbol id="flag" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8.98 2L8 0H1v16h2v-6h4.021L8 12h7V2z"/>\n</symbol><symbol id="flash-auto" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M13.714 0L16 7h-1.357l-.5-1.556h-2.286L11.357 7H10l2.286-7h1.428zM12.18 4.1h1.642L13 1.453 12.179 4.1zM2 0h7L6 7h3l-5 9V8H2V0z"/>\n</symbol><symbol id="flashlight" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M6 7.003L3 3h10l-3 4.003H6zM13 2H3V0h10v2zM6 16V7h4v9H6z"/>\n</symbol><symbol id="folder-add" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M0 2.007C0 1.45.451 1 .99 1H5.51c.271 0 .648.157.84.348l1.303 1.304c.192.192.579.348.848.348h6.503c.55 0 .997.456.997 1.002v8.99C16 14.1 15.105 15 14.006 15H1.994A2 2 0 0 1 0 12.994V2.007zM9 5v3H6v2h3v3h2v-3h3V8h-3V5H9z"/>\n</symbol><symbol id="folder-moveto" viewBox="0 0 16 16"><path clip-rule="evenodd" d="M5.509 1c.271 0 .648.157.84.348l1.303 1.304c.192.192.579.348.848.348h6.503c.55 0 .997.456.997 1.002v8.99A2.003 2.003 0 0 1 14.006 15H1.994A2 2 0 0 1 0 12.994V2.007C0 1.45.451 1 .99 1h4.52ZM11.5 6a1 1 0 0 0-1.497 1.32l.083.094.5.586H6a1 1 0 0 0-.117 1.993L6 10h4.586l-.5.586a1 1 0 0 0 1.32 1.497L11.5 12l2.207-2.293a1 1 0 0 0 .083-1.32l-.083-.094L11.5 6Z"/></symbol><symbol id="folder-open" viewBox="0 0 16 16"><path d="M0 13V3a2 2 0 0 1 2-2h3.172a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 8.828 3H12a2 2 0 0 1 2 2H3.5a.5.5 0 0 0-.474.342l-2 6a.5.5 0 1 0 .948.316L3.86 6h11.142a1 1 0 0 1 .952 1.304l-2.01 6.304A2 2 0 0 1 12.039 15H2a2 2 0 0 1-2-2Z"/></symbol><symbol id="folder" viewBox="0 0 16 16"><path d="M0 2.007C0 1.45.451 1 .99 1h4.52c.271 0 .648.157.84.348l1.303 1.304c.192.192.579.348.848.348h6.503c.55 0 .997.456.997 1.002v8.99A2.005 2.005 0 0 1 14.006 15H1.994A2 2 0 0 1 0 12.994V2.007ZM0 5h16v1H0V5Z" fill-rule="evenodd"/></symbol><symbol id="forbidden" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M3.11 4.523a6 6 0 0 0 8.367 8.367L3.109 4.524zM4.522 3.11l8.368 8.368A6 6 0 0 0 4.524 3.11zM8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>\n</symbol><symbol id="from-user" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M11 0h5v5l-1.793-1.793-2.451 2.452-.265-.149c-.264 1.889-1.706 3.338-3.46 3.338-1.941 0-3.515-1.771-3.515-3.955C4.516 2.708 6.09.937 8.031.937c.191 0 .373.031.555.063l1 1-1.793 1.793 1.414 1.414 1.995-1.995c.018.041.026.088.041.131l1.55-1.55L11 0zm.547 9.727c1.758 0 3.516 2.637 3.516 3.516s0 1.757-.88 1.757H1.88c-.88 0-.88-.878-.88-1.757 0-.88 1.759-3.516 3.517-3.516s.879.879 3.515.879c2.637 0 1.758-.88 3.516-.88z"/>\n</symbol><symbol id="gear" viewBox="0 0 16 16"><path d="M14.25 7.078c.051.26.077.568.077.926 0 .358-.026.665-.078.925l1.62 1.333c.131.086.163.203.099.352-.325.95-.859 1.826-1.602 2.628-.104.124-.229.155-.37.094l-2.032-.668c-.52.396-1.08.705-1.68.926l-.409 2c-.026.146-.117.233-.273.258-.56.1-1.094.148-1.602.148a9.21 9.21 0 0 1-1.601-.148c-.157-.024-.248-.11-.274-.259l-.409-1.999a5.98 5.98 0 0 1-1.68-.926l-2.03.668c-.145.062-.268.03-.372-.094C.892 12.44.359 11.565.032 10.614c-.065-.148-.032-.266.098-.352L1.751 8.93a4.761 4.761 0 0 1-.078-.925c0-.358.026-.667.078-.926L.131 5.746C0 5.66-.034 5.542.031 5.394c.326-.95.86-1.826 1.602-2.627.104-.123.228-.154.371-.093l2.031.667a5.99 5.99 0 0 1 1.68-.926l.41-1.999c.025-.148.116-.234.273-.259a8.221 8.221 0 0 1 3.202 0c.156.024.247.111.273.26l.41 1.998c.6.223 1.159.53 1.68.926l2.03-.667c.143-.062.267-.03.371.093.742.802 1.276 1.678 1.602 2.627.064.148.032.266-.098.352l-1.62 1.332ZM8 4.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Z" fill-rule="evenodd"/></symbol><symbol id="globe" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M7.889 13.999L7 10 6 9 4 6l-.355-2.128A6 6 0 0 0 7.888 14zm.238-11.998L10 3.5V5L8 6.5l-1.5 1 .5 1 3 .5 1 1v1.5l-1.549 2.323A6 6 0 0 0 8.127 2.001zM8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>\n</symbol><symbol id="gouv" viewBox="0 0 16 16"><g clip-path="url(#clip0_3250_157)"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.547 11.767c-.14.185-.278.324-.418.463-.102.102-.295.223-.478.338-.232.144-.449.28-.449.357l-.363.169C1.967 13.497.402 14.22.003 14.5V16H15.2c-.043-.021-.142-.092-.3-.205-.532-.38-1.734-1.236-3.724-2.313a11.965 11.965 0 0 0-.96-.365c-.21-.072-.364-.125-.384-.145-.14-.093-.232-.603-.047-1.16.01-.026.018-.054.028-.084.038-.124.083-.266.158-.379v-.046a.971.971 0 0 1 .185-.278v-.047c.047 0 .047-.046.047-.046l.046-.046a.722.722 0 0 1 .175-.186c.036-.03.072-.062.103-.092a.676.676 0 0 1 .165-.051c.047-.01.099-.022.16-.042.25 0 .5.05.75.1.168.033.335.067.501.085.047 0 .093 0 .14.047.139 0 .324 0 .463-.047.186-.046.371-.139.464-.37.092-.186.139-.372.046-.557-.13-.163-.009-.257.107-.347a.57.57 0 0 0 .125-.117c.03-.091 0-.143-.037-.207-.019-.033-.04-.07-.056-.117-.019-.019-.045-.022-.073-.026-.04-.006-.085-.012-.112-.067.185-.093.463-.232.324-.463-.092-.14-.185-.325-.046-.464a.587.587 0 0 1 .203-.066c.122-.025.25-.051.307-.166.11-.221-.043-.443-.18-.64-.036-.051-.07-.1-.098-.148-.062-.124-.124-.206-.186-.288a2.716 2.716 0 0 1-.133-.19c-.089-.13-.198-.29-.238-.45a.753.753 0 0 1 .017-.333c.015-.074.03-.148.03-.223 0-.37-.093-.741-.186-1.112a1.3 1.3 0 0 1-.092-.278c-.024-.093-.047-.186-.093-.278a.694.694 0 0 1-.036-.093.421.421 0 0 0-.103-.186.14.14 0 0 1 0-.185c.092-.046.185-.14.278-.232.093-.139.046-.278-.093-.37-.106-.027-.136.037-.168.106-.025.051-.05.105-.11.125h-.093c0-.046.047-.093.093-.14 0-.045 0-.092-.046-.092a.354.354 0 0 1-.232-.092c-.232-.325-.603-.51-.974-.65.047 0 .093.012.14.024.046.011.092.023.139.023.185.046.37.046.51-.047.08-.04.125-.182.165-.31l.02-.06c.039-.078-.02-.19-.068-.278l-.025-.047c-.093-.185-.278-.324-.463-.417l-.371-.186C11.269.64 11.315 0 11.315 0H7.04S6.4.32 5.613.872l-.105.051c-.25.124-.52.256-.683.459-.186.232-.371.51-.464.788-.286.164-.465.436-.63.69l-.065.098a6.625 6.625 0 0 1-.162.271c-.195.315-.384.62-.348.98.039.353.111.672.189 1.014l.043.192c0 .045.004.09.01.136a.877.877 0 0 1-.01.328c.018.073.022.138.025.2.006.094.011.179.067.263a.686.686 0 0 1 .033.082c.022.062.041.118.106.15v.093c.024 0 .035.011.047.023.011.012.023.023.046.023v.093c.048.06.1.12.152.181.148.174.302.355.405.56.046.186-.232.093-.371.047-.222-.11-.356-.251-.495-.398l-.108-.112s-.046 0-.046.046c.032.066.1.132.165.195.12.116.233.226.113.315-.047.047-.105.035-.163.024-.057-.012-.115-.024-.162.023-.03.03-.02.062-.01.093a.15.15 0 0 1 .01.046.692.692 0 0 0-.291-.067c-.06-.004-.116-.007-.172-.026-.039-.019-.061-.062-.084-.105-.033-.063-.066-.127-.148-.127a6.564 6.564 0 0 0-.927-.185l-.245-.03C.998 7.24.655 7.194.282 7.27A.722.722 0 0 0 0 7.33v.4c.07-.018.139-.037.205-.056.106-.03.207-.06.308-.08.128-.016.25-.043.371-.07.214-.047.422-.093.645-.074-.323.021-.646.13-.97.237-.121.035-.237.056-.349.077a4.91 4.91 0 0 0-.21.043v.12c.54.025 1.076.115 1.58.27.185.046.417.139.602.278a.454.454 0 0 1 .116.093c.035.034.07.07.116.092a.45.45 0 0 0 .417.047h.14l.052-.013c.357-.09.747-.186.967-.45 0 .045 0 .045.047.045a1.29 1.29 0 0 0-.083.245.999.999 0 0 1-.15.358s0 .047.047.093h.047s-.047 0-.047.046c0 .023.012.023.03.023.017 0 .04 0 .063.024a.42.42 0 0 0-.325.139c0 .046.047.046.093.046-.023.023-.046.035-.07.046a.242.242 0 0 0-.069.047s0 .046.046.046c0 0-.046 0-.046.046v.093c-.046 0-.093.047-.139.093.062.062.124.041.185.02a.3.3 0 0 1 .093-.02c-.139.046-.266.104-.394.162a4.007 4.007 0 0 1-.394.162c-.023 0-.023.024-.023.047s0 .046-.023.046c.025.025.05.01.081-.01a.196.196 0 0 1 .104-.036c-.114.065-.234.13-.358.198-.228.124-.468.254-.708.405 0 0-.046.046-.046.092h-.093c-.026 0-.038.03-.05.063-.011.027-.023.056-.043.076.072.048.144.022.209-.002.061-.022.117-.043.162.002.046 0-.046.047-.093.047 0 0 0 .046-.046.046h-.278c-.013.012-.025.021-.037.03-.031.023-.056.041-.056.11-.046 0-.093 0-.14.046a8.3 8.3 0 0 1 .362-.023c.419-.02.868-.041 1.262-.256.417-.232.788-.463 1.112-.834 0 0 .047 0 .047.046a1.266 1.266 0 0 1-.418.556.622.622 0 0 0-.185.116.622.622 0 0 1-.186.116c-.046.024-.08.047-.115.07-.035.023-.07.046-.116.07-.356.124-.739.18-1.12.236-.613.09-1.222.18-1.708.552 0-.047 0-.047-.047-.047l-.139.14h.093c.139-.093.278-.14.417-.186L.7 11.72l-.278.14a.64.64 0 0 0-.186.138v.047c-.046 0-.046.046-.046.046v.046c-.047 0-.047.047-.047.047v.046h.093c.068.034.111-.032.148-.088.013-.02.025-.039.038-.051.023-.023.046-.035.07-.046a.242.242 0 0 0 .069-.047l-.047.047c0 .046.047.046.047.046a2.55 2.55 0 0 0-.418.325H.19v.046c-.023.023-.035.046-.047.07a.243.243 0 0 1-.046.069c-.029 0-.04.018-.055.042-.009.015-.02.033-.038.05L0 12.698v.136h.05c.139-.093.278-.232.417-.371h.046c.07-.046.14-.104.209-.162.07-.058.139-.116.209-.163a.64.64 0 0 0 .185-.139l.046-.046c.113-.075.255-.12.38-.158l.084-.027h.046c.14-.024.29-.047.44-.07.151-.023.302-.046.441-.07.186 0 .371 0 .603-.046.11-.027.204-.072.291-.112.06-.028.116-.055.172-.073v.046c.186-.07.348-.185.51-.301.163-.116.325-.232.51-.302.019 0 .037.015.056.03.028.022.056.045.083.017l.081-.066c.206-.17.42-.346.708-.305 0 0 0 .046.046.046-.046.023-.093.058-.14.093a.966.966 0 0 1-.138.093s0 .046.046.046c.07-.023.116-.058.162-.093a.542.542 0 0 1 .163-.092s0 .046-.047.092c-.046.047-.092.081-.139.116-.046.035-.092.07-.139.116-.216.154-.391.35-.566.546a7.066 7.066 0 0 1-.268.289ZM1.634 7.446c.06 0 .118.002.177.009-.064-.032-.128-.02-.177-.01Zm10.55-1.99c-.041-.01-.088-.021-.127-.04-.093-.024-.162-.024-.232-.024s-.139 0-.231-.023a2.36 2.36 0 0 1-.186.036c-.123.02-.247.041-.37.103.138-.093.277-.186.463-.232.07 0 .127-.023.185-.046a.486.486 0 0 1 .186-.047c.139-.046.278-.092.417-.046.044.015.092.025.14.034.102.022.2.042.23.105.047.186-.092.325-.231.417 0 .024.023.047.046.07.024.023.047.046.047.07 0 .046-.093.092-.14.092-.03 0-.061.041-.092.083-.015.02-.03.04-.046.056.023 0 .023.023.023.047 0 .023 0 .046.023.046-.043.064-.036.147-.03.224.006.089.012.168-.063.193-.139.047-.37.047-.556 0a.304.304 0 0 1 .111-.026c.056-.005.111-.01.167-.067v-.046c0-.046 0-.046-.046-.046 0 .046-.047.046-.047.046a.1.1 0 0 0-.092-.093c-.14.047-.279-.046-.371-.139l.045-.024c.065-.036.11-.06.187-.022.048 0 .058-.038.07-.08.012-.04.024-.083.069-.106h.046c.085-.106.19-.173.283-.233.11-.07.202-.13.227-.23 0-.027-.047-.038-.105-.052Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 10.039V8.4l.027.004c.07.012.139.024.208.07-.036.036-.066.044-.093.04l.162.047c.686.196 1.358.39 1.925.794-.557.278-1.113.417-1.716.51-.092 0-.139 0-.185-.047 0 .047 0 .093-.046.093-.093 0-.186 0-.232.046a.188.188 0 0 1-.05.08Zm.089-1.542c-.026-.01-.053-.022-.086-.022l.104.03a.668.668 0 0 1-.018-.008Z"/><path d="M.189 11.488a2.37 2.37 0 0 0-.189.008v-.054a.376.376 0 0 1 .189.046ZM0 6.927a.686.686 0 0 0 .138-.121c0 .046 0 .046-.046.093.046.046.046.046.092.046.031-.015.062-.026.093-.036a.421.421 0 0 0 .185-.103A.929.929 0 0 0 0 6.71v.216ZM.648 10.422a.22.22 0 0 0-.039.005c-.046.01-.1.02-.1-.051.034-.102.118-.13.197-.155.028-.01.056-.018.081-.03.046-.047.14-.094.185-.047.028.055.072.061.113.066.028.004.054.008.073.027-.1.133-.224.146-.355.16-.05.006-.103.012-.155.025Z"/></g></symbol><symbol id="graph-circle" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M7 16A7 7 0 0 1 7 2v7h7a7 7 0 0 1-7 7zm2-9V0a7 7 0 0 1 7 7H9z"/>\n</symbol><symbol id="grid" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M0 0h4v4H0V0zm0 6h4v4H0V6zm0 6h4v4H0v-4zM6 0h4v4H6V0zm0 6h4v4H6V6zm0 6h4v4H6v-4zm6-12h4v4h-4V0zm0 6h4v4h-4V6zm0 6h4v4h-4v-4z"/>\n</symbol><symbol id="group-list" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M6 1h10v2H6V1zm0 6h10v2H6V7zm0 6h10v2H6v-2zM2 4L.195 1.854a.901.901 0 0 1 0-1.121c.261-.31.682-.31.943 0L2 1.758 2.862.733c.26-.31.682-.31.943 0 .26.31.26.81 0 1.12L2 4zm0 6L.195 7.854a.901.901 0 0 1 0-1.121c.261-.31.682-.31.943 0L2 7.758l.862-1.025c.26-.31.682-.31.943 0 .26.31.26.81 0 1.12L2 10zm0 6L.195 13.854a.901.901 0 0 1 0-1.121c.261-.31.682-.31.943 0L2 13.758l.862-1.025c.26-.31.682-.31.943 0 .26.31.26.81 0 1.12L2 16z"/>\n</symbol><symbol id="groups" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2.944 3.473a1.473 1.473 0 1 1-2.946-.002 1.473 1.473 0 0 1 2.946.002zM5 4.722v-2.5h11v2.5H5zm0 4.64v-2.5h11v2.5H5zM5 14v-2.5h11V14H5z"/>\n</symbol><symbol id="growth" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 1a1 1 0 0 1 1-1c2.708 0 4.782.821 6.149 2.492.738.901 1.226 1.999 1.514 3.24.061-.081.124-.161.188-.24C10.218 3.822 12.292 3 15 3a1 1 0 0 1 1 1c0 2.606-.517 4.877-1.851 6.508-1.193 1.459-2.926 2.27-5.149 2.452V15a1 1 0 1 1-2 0V9.96c-2.223-.182-3.956-.993-5.149-2.452C.517 5.878 0 3.606 0 1Zm2.034 1.05c.124 1.858.59 3.244 1.365 4.192.742.907 1.867 1.531 3.567 1.707-.124-1.857-.59-3.243-1.365-4.19-.742-.908-1.867-1.532-3.567-1.708Zm11.932 3c-.124 1.858-.59 3.244-1.365 4.192-.742.907-1.867 1.531-3.567 1.707.124-1.857.59-3.243 1.365-4.19.742-.908 1.867-1.532 3.567-1.708Z"/></symbol><symbol id="hand" viewBox="0 0 15 16">\n     <path d="M14.992 8V5a1.001 1.001 0 0 0-2 0v3h-1V2a1.001 1.001 0 0 0-2 0v5h-1V1a1.001 1.001 0 0 0-2 0v6h-1V2c0-.551-.45-1-1-1-.551 0-1 .449-1 1v6.5a.5.5 0 0 1-.88.325L1.1 6.125c-.222-.182-.64-.166-.897.091a.7.7 0 0 0-.075.898c.064.117 1.542 4.144 3.227 6.798A4.486 4.486 0 0 0 7.156 16h3.336c2.48 0 4.5-2.019 4.5-4.5V8Z"/>\n </symbol><symbol id="heart" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M1.467 8.096a4.023 4.023 0 0 1-.699-.738L.724 7.31l.007-.006a4 4 0 1 1 7.21-2.994 6.685 6.685 0 0 1 .118 0 4.001 4.001 0 1 1 7.21 2.995l.005.005-.036.038a4.023 4.023 0 0 1-.713.753L8 15 1.467 8.096z"/>\n</symbol><symbol id="help-outlined" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M9 8.802C10.122 8.355 11 7.21 11 6c0-1.552-1.448-3-3-3S5 4.448 5 6h2c0-.448.552-1 1-1 .448 0 1 .552 1 1 0 .448-.552 1-1 1a1 1 0 0 0-1 1v2h2V8.802ZM7 11v2h2v-2H7ZM1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8ZM0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8Z"/></symbol><symbol id="help" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zm1-7.198C10.122 8.355 11 7.21 11 6c0-1.552-1.448-3-3-3S5 4.448 5 6h2c0-.448.552-1 1-1 .448 0 1 .552 1 1 0 .448-.552 1-1 1a1 1 0 0 0-1 1v2h2V8.802zM7 11v2h2v-2H7z"/>\n</symbol><symbol id="history" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 0c4.411 0 8 3.589 8 8s-3.589 8-8 8a8.039 8.039 0 0 1-7.229-4.571 1 1 0 1 1 1.806-.858A6.031 6.031 0 0 0 8 14c3.309 0 6-2.691 6-6s-2.691-6-6-6c-1.482 0-2.866.571-3.938 1.507a.989.989 0 0 1 .706.353 1 1 0 0 1-.128 1.408l-3 2.5A1 1 0 0 1 0 7V3a1 1 0 0 1 1-1c.481 0 .865.348.96.801C3.452 1.08 5.636 0 8 0zm0 4a1 1 0 0 1 1 1v2.586l1.707 1.707a.999.999 0 1 1-1.414 1.414l-2-1.999A1.025 1.025 0 0 1 7 8V5a1 1 0 0 1 1-1z"/>\n</symbol><symbol id="home" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M.416 7.584C-.366 8.366-.105 9 1 9v5.997A.999.999 0 0 0 2 16h4v-5h4v5h4c.552 0 1-.438 1-1.003V9c1.105 0 1.367-.633.584-1.416L8 0 .416 7.584z"/>\n</symbol><symbol id="hourglass" viewBox="0 0 16 16">\n  \n  <g fill-rule="evenodd">\n    <use xlink:href="#hourglass-a"/>\n  </g>\n</symbol><symbol id="image" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M65.0008717,65 C64.4481055,65 64,65.4499488 64,66.0068455 L64,77.9931545 C64,78.5492199 64.4446309,79 65.0008717,79 L78.9991283,79 C79.5518945,79 80,78.5500512 80,77.9931545 L80,66.0068455 C80,65.4507801 79.5553691,65 78.9991283,65 L65.0008717,65 Z M69,72 L71,74 L75,70 L78,73 L78,75.9906311 C78,76.5480902 77.544239,77 76.9975267,77 L67.0024733,77 C66.4488226,77 66,76.5561352 66,76 L66,75 L69,72 Z M69.5,70 C70.3284272,70 71,69.3284272 71,68.5 C71,67.6715728 70.3284272,67 69.5,67 C68.6715728,67 68,67.6715728 68,68.5 C68,69.3284272 68.6715728,70 69.5,70 Z" transform="translate(-64 -64)"/>\n</symbol><symbol id="info-outlined" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zm0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14zM7 4c0-.552.444-1 1-1 .552 0 1 .444 1 1 0 .552-.444 1-1 1-.552 0-1-.444-1-1zm1.001 2C8.553 6 9 6.444 9 7v4h1v2H7.999A.997.997 0 0 1 7 12V8H6V6h2.001z"/>\n</symbol><symbol id="info" viewBox="0 0 16 16"><use fill-rule="evenodd" xlink:href="#info"/></symbol><symbol id="justice" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0c1.306 0 2.418.835 2.83 2H14a1 1 0 0 1 .139 1.99l1.825 3.824a.499.499 0 0 1 .036.198V8.5a2.5 2.5 0 0 1-5 0v-.49a.5.5 0 0 1 .036-.196L12.857 4H10.83A3.008 3.008 0 0 1 9 5.83V13h6a1 1 0 1 1 0 2H1a1 1 0 1 1 0-2h6V5.83A3.008 3.008 0 0 1 5.17 4H3.144l1.821 3.814A.498.498 0 0 1 5 8.012V8.5a2.5 2.5 0 0 1-5 0v-.49a.498.498 0 0 1 .036-.196l1.826-3.823A1 1 0 0 1 2 2h3.17A3.001 3.001 0 0 1 8 0Zm5.5 5.346L14.935 8h-2.87L13.5 5.346ZM1.065 8h2.87L2.5 5.346 1.065 8ZM8 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"/></symbol><symbol id="key" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M9 9.584V10H7v2H5v2H3v2H0v-3l6.297-6.297A5 5 0 1 1 9 9.584zM11 3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>\n</symbol><symbol id="label-outlined" viewBox="0 0 17 17"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.002 4.5H2v8h8.002l4-4-4-4Zm0-2H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8.002a2 2 0 0 0 1.414-.586l4-4a2 2 0 0 0 0-2.828l-4-4a2 2 0 0 0-1.414-.586Z"/></symbol><symbol id="laptop" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M3 4v5h10V4H3zm11.5 7h-13a.5.5 0 0 1-.5-.5V4c0-1.103.896-2 2-2h10c1.102 0 2 .897 2 2v6.5a.5.5 0 0 1-.5.5zm-4 1h5a.5.5 0 0 1 .5.5c0 .827-.674 1.5-1.5 1.5h-13C.673 14 0 13.327 0 12.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5h4v-.5a.5.5 0 0 1 .5-.5z"/>\n</symbol><symbol id="laudry" viewBox="0 0 16 16"><path d="M10.425 11.475A3.5 3.5 0 0 1 5.5 11.5l4.95-4.95a3.5 3.5 0 0 1-.025 4.925Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M1 2a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V2Zm3.25 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm2.25.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm5.036 2.714a5 5 0 1 1-7.071 7.071 5 5 0 0 1 7.07-7.07Z"/></symbol><symbol id="left" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M10.70725,2.70725 C11.09825,2.31625 11.09825,1.68425 10.70725,1.29325 C10.31625,0.90225 9.68425,0.90225 9.29325,1.29325 L3.29325,7.29325 C2.90225,7.68425 2.90225,8.31625 3.29325,8.70725 L9.29325,14.70725 C9.68425,15.09825 10.31625,15.09825 10.70725,14.70725 C11.09825,14.31625 11.09825,13.68425 10.70725,13.29325 L5.41425,8.00025 L10.70725,2.70725 Z"/>\n</symbol><symbol id="library" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 1a1 1 0 0 1 2 0v10a1 1 0 1 1-2 0V1ZM2 5a1 1 0 0 1 2 0v6a1 1 0 1 1-2 0V5Zm7-5a1 1 0 0 0-1 1v10a1 1 0 1 0 2 0V1a1 1 0 0 0-1-1Zm2.066 5.607a1 1 0 1 1 1.887-.664l1.992 5.66a1 1 0 0 1-1.886.664l-1.993-5.66ZM1 13a1 1 0 1 0 0 2h14a1 1 0 1 0 0-2H1Z"/></symbol><symbol id="lightbulb" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M4.977 12.513s.103-1.083-.956-2.022a6 6 0 1 1 7.99-.028c-.674.605-.907 2.05-.907 2.05a.635.635 0 0 1-.595.487H5.491a.524.524 0 0 1-.514-.487zM11 14l-1.652 1.652a1.355 1.355 0 0 1-.853.348h-.99c-.279 0-.662-.157-.853-.348L5 14h6zm1-8a4 4 0 0 0-4-4 1 1 0 1 0 0 2 2 2 0 0 1 2 2 1 1 0 0 0 2 0z"/>\n</symbol><symbol id="lightning" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.284.121 2.26 8.404a.982.982 0 0 0 .794 1.56H8l-.814 5.7a.295.295 0 0 0 .53.215l6.024-8.283a.982.982 0 0 0-.795-1.56H8l.814-5.7a.295.295 0 0 0-.53-.215Z"/></symbol><symbol id="link-out" viewBox="0 0 16 16">\n  <g fill-rule="evenodd" transform="translate(-128 -160)">\n    <path d="M137,160 L137,162 L140.5,162 L134,168.5 L135.5,170 L142,163.5 L142,167 L144,167 L144,161.002929 C144,160.449027 143.562119,160 142.997071,160 L137,160 Z M135,162 L135,160 L129.002929,160 C128.449027,160 128,160.444631 128,161.000872 L128,174.999128 C128,175.551894 128.444631,176 129.000872,176 L142.999128,176 C143.551894,176 144,175.562119 144,174.997071 L144,169 L142,169 L142,174 L130,174 L130,162 L135,162 Z"/>\n  </g>\n</symbol><symbol id="link" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M9.259 4.045a1.043 1.043 0 1 1-1.475-1.474L9.44.915a3.126 3.126 0 0 1 4.417-.002l1.23 1.23a3.126 3.126 0 0 1-.007 4.422l-3.612 3.612c-1.6 1.6-4.244 1.65-5.77.124a1.043 1.043 0 1 1 1.475-1.474c.699.698 2.023.673 2.82-.125l3.613-3.612a1.04 1.04 0 0 0 .006-1.473l-1.23-1.23a1.04 1.04 0 0 0-1.468.003L9.26 4.045zm-2.518 7.91a1.043 1.043 0 0 1 1.475 1.474L6.56 15.085a3.126 3.126 0 0 1-4.417.002l-1.23-1.23a3.126 3.126 0 0 1 .006-4.422l3.613-3.612c1.6-1.6 4.243-1.65 5.77-.124a1.043 1.043 0 0 1-1.475 1.474c-.7-.698-2.023-.673-2.82.125L2.393 10.91a1.04 1.04 0 0 0-.007 1.473l1.23 1.23a1.04 1.04 0 0 0 1.469-.003l1.655-1.655z"/>\n</symbol><symbol id="list-min" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 11a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm10 0a1 1 0 1 1 0 2H7a1 1 0 1 1 0-2h6ZM3 7a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm10 0a1 1 0 1 1 0 2H7a1 1 0 0 1 0-2h6ZM3 3a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm10 0a1 1 0 1 1 0 2H7a1 1 0 0 1 0-2h6Z"/></symbol><symbol id="list" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M0 0h4v4H0V0zm6 0h10v4H6V0zM0 6h4v4H0V6zm6 0h10v4H6V6zm-6 6h4v4H0v-4zm6 0h10v4H6v-4z"/>\n</symbol><symbol id="location" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 0c3.99 0 7 2.866 7 6.667 0 4.782-6.508 9.089-6.784 9.27a.398.398 0 0 1-.432 0C7.507 15.756 1 11.45 1 6.667 1 2.866 4.01 0 8 0zm0 9a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>\n</symbol><symbol id="lock-screen" viewBox="0 0 16 16"><path d="M4 2h8v2h2V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h2v-2H4V2Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.75 10V8.5a2.75 2.75 0 1 0-5.5 0V10H9a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-.25ZM12 7.25c-.69 0-1.25.56-1.25 1.25V10h2.5V8.5c0-.69-.56-1.25-1.25-1.25ZM13 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></symbol><symbol id="lock" viewBox="0 0 16 16">\n  <g stroke="none" stroke-width="1" fill-rule="evenodd">\n      <path d="M2,15.0046024 C2,15.5543453 2.45576096,16 3.00247329,16 L12.9975267,16 C13.5511774,16 14,15.5443356 14,15.0046024 L14,6.99539757 C14,6.44565467 13.5561352,6 13,6 L12,6 L12,4 C12,1.794 10.2053333,0 8,0 C5.794,0 4,1.794 4,4 L4,6 L3,6 C2.44771525,6 2,6.4556644 2,6.99539757 L2,15.0046024 Z M6,4.5 C6,3.1215 6.8968,2 8,2 C9.1028,2 10,3.1215 10,4.5 L10,6 L6,6 L6,4.5 Z M8,8.5 C8.8265,8.5 9.5,9.172 9.5,10 C9.5,10.552 9.1955,11.032 8.75,11.29 L8.75,13.75 C8.75,14.1625 8.4125,14.5 8,14.5 C7.586,14.5 7.25,14.1625 7.25,13.75 L7.25,11.29 C6.803,11.032 6.5,10.552 6.5,10 C6.5,9.172 7.172,8.5 8,8.5 Z"/>\n  </g>\n</symbol><symbol id="logout" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M12.586 9H5a1 1 0 1 1 0-2h7.586l-1.293-1.293a1 1 0 1 1 1.414-1.414l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L12.586 9zM0 1a1 1 0 1 1 2 0v14a1 1 0 0 1-2 0V1z"/>\n</symbol><symbol id="magic-trick" viewBox="0 0 24 24"><g fill-rule="nonzero"><path d="M16.236 5.87a.631.631 0 0 0-.893 0L.185 21.026a.631.631 0 0 0 0 .893l1.895 1.895a.629.629 0 0 0 .893 0L18.13 8.657a.631.631 0 0 0 0-.893l-1.895-1.895zm-1.71 4.605l-1.001-1.001 2.264-2.265 1.002 1.002-2.265 2.264zM14.326 2.494l.648.216.216.647a.631.631 0 0 0 1.199 0l.216-.647.648-.216a.631.631 0 0 0 0-1.198l-.648-.216-.216-.648a.631.631 0 0 0-1.199 0l-.216.648-.648.216a.631.631 0 0 0 0 1.198zM9.274 5.02l.648.216.216.648a.631.631 0 0 0 1.198 0l.216-.648.648-.216a.631.631 0 0 0 0-1.198l-.648-.216-.216-.648a.631.631 0 0 0-1.198 0l-.216.648-.648.216a.631.631 0 0 0 0 1.198zM22.305 11.4l-.648-.215-.216-.648a.631.631 0 0 0-1.198 0l-.216.648-.648.216a.631.631 0 0 0 0 1.198l.648.216.216.648a.631.631 0 0 0 1.198 0l.216-.648.648-.216a.631.631 0 0 0 0-1.198zM23.568 4.454l-1.121-.374-.374-1.122a.631.631 0 0 0-1.198 0L20.5 4.08l-1.122.374a.631.631 0 0 0 0 1.198l1.122.374.374 1.12a.631.631 0 0 0 1.198 0l.374-1.12 1.121-.374a.631.631 0 0 0 0-1.198z"/></g></symbol><symbol id="magnet" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M11 3h4v6A7 7 0 1 1 1 9V3h4v6c0 1.654 1.346 3 3 3s3-1.346 3-3V3zm0-1V0h4.001v2H11zM1 2V0h4v2H1z"/>\n</symbol><symbol id="magnifier" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M10.472 10H11.5l3.294 3.294a.996.996 0 0 1 0 1.412l-.088.088a1 1 0 0 1-1.412 0L10 11.5v-1.028a6 6 0 1 1 .472-.472zM6 10a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"/>\n</symbol><symbol id="merge" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 0L4 3.997h3.064V9.18L2 14.59 3.32 16l5.616-5.999V3.997H12L8 0zm1.488 12.59L12.68 16 14 14.591l-3.191-3.411-1.32 1.41z"/>\n</symbol><symbol id="moped" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 0a1 1 0 1 0 0 2h2.246l1.604 5.613L12 9H8V5a1 1 0 0 0-1-1H2a1 1 0 1 0 0 2h2a4 4 0 0 0-4 4v1.986A1 1 0 0 0 1 13a3 3 0 0 0 6 0h2a3 3 0 1 0 4.48-2.61L15.6 8.8a1 1 0 0 0 .362-1.075l-2-7A1 1 0 0 0 13 0h-3ZM4.922 12.613a1 1 0 1 1-1.903.19l1.903-.19ZM12 14a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"/></symbol><symbol id="mosaic-min" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 9a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3Zm7 0a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3ZM6 2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h3Zm7 0a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h3Z"/></symbol><symbol id="motorcycle" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.965 4H6a1 1 0 0 1 0-2h2.324c.444 0 .86.222 1.106.592l1.596 2.395L14 3.5V6h-2.298l1.333 2a3 3 0 1 1-1.946.687l-.744-1.116-1.589 3.814a1 1 0 0 1-.923.615H7.46a1 1 0 0 1-.76-.35l-.705-.822a3 3 0 1 1-2.908-2.826L3.086 8H1a1 1 0 0 1 0-2h2.615c.192 0 .375.076.511.212l1.282 1.282 1.57-1.121A2 2 0 0 1 8.141 6h1.157L7.965 4ZM4 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm10 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></symbol><symbol id="mountain" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="m6.065 7.66-.003.005-1.19-2.116a1 1 0 0 0-1.744 0l-2.79 4.96A1 1 0 0 0 1.21 12h13.538a1 1 0 0 0 .86-1.509l-4.747-8.034a1 1 0 0 0-1.722 0l-2.192 3.71 1.527 2.715a.75.75 0 1 1-1.308.736L6.065 7.66Z"/></symbol><symbol id="movement-in" viewBox="0 0 16 16">\n    <g fill-rule="evenodd">\n        <path d="M3.414 10H11a1 1 0 0 1 0 2H3.414l1.293 1.293a1 1 0 0 1-1.414 1.414l-3-3a1 1 0 0 1 0-1.414l3-3a1 1 0 1 1 1.414 1.414L3.414 10z" opacity=".322"/>\n        <path d="M12.586 4l-1.293-1.293a1 1 0 1 1 1.414-1.414l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L12.586 6H5a1 1 0 1 1 0-2h7.586z"/>\n    </g>\n</symbol><symbol id="movement-out" viewBox="0 0 16 16">\n    <g fill-rule="evenodd">\n        <path d="M3.414 10H11a1 1 0 0 1 0 2H3.414l1.293 1.293a1 1 0 0 1-1.414 1.414l-3-3a1 1 0 0 1 0-1.414l3-3a1 1 0 0 1 1.414 1.414L3.414 10z"/>\n        <path d="M12.586 4l-1.293-1.293a1 1 0 0 1 1.414-1.414l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L12.586 6H5a1 1 0 1 1 0-2h7.586z" opacity=".316"/>\n    </g>\n</symbol><symbol id="movement" viewBox="0 0 16 16"><path d="M12.585 7.002H1.001a1 1 0 1 0 0 2.002l11.582-.002-1.29 1.29a1 1 0 0 0 1.414 1.415l3-3a1 1 0 0 0 0-1.414l-3-3a1 1 0 1 0-1.414 1.414L12.586 7l-.001.002Z"/></symbol><symbol id="moveto" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M295.5,102.914214 L294.207107,104.207107 C293.816582,104.597631 293.183418,104.597631 292.792893,104.207107 C292.402369,103.816582 292.402369,103.183418 292.792893,102.792893 L295.792893,99.7928932 C296.183418,99.4023689 296.816582,99.4023689 297.207107,99.7928932 L300.207107,102.792893 C300.597631,103.183418 300.597631,103.816582 300.207107,104.207107 C299.816582,104.597631 299.183418,104.597631 298.792893,104.207107 L297.5,102.914214 L297.5,110.5 C297.5,111.052285 297.052285,111.5 296.5,111.5 C295.947715,111.5 295.5,111.052285 295.5,110.5 L295.5,102.914214 Z M289.5,98.5 L303.5,98.5 C304.052285,98.5 304.5,98.0522847 304.5,97.5 C304.5,96.9477153 304.052285,96.5 303.5,96.5 L289.5,96.5 C288.947715,96.5 288.5,96.9477153 288.5,97.5 C288.5,98.0522847 288.947715,98.5 289.5,98.5 Z" transform="rotate(90 200.5 -88)"/>\n</symbol><symbol id="multi-files" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M5.007 14A2.006 2.006 0 0 1 3 11.999V3H1.998A.999.999 0 0 0 1 4.001v10.998C1 15.556 1.45 16 2.007 16h8.986A1 1 0 0 0 12 15.004V14H5.007zM4 1.001A.999.999 0 0 1 4.998 0H10v5h5v7.005a1 1 0 0 1-1.007.995H5.007A1.001 1.001 0 0 1 4 11.999V1.001zM11 4V0l4 4h-4z"/>\n</symbol><symbol id="music" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 12h1.51c.275 0 .49-.228.49-.51V2.838c0-.54.437-1.075.976-1.173L14.024.02c.531-.096.976.271.976.825v10.084a2.997 2.997 0 0 1-3 3.007h-1.002A2 2 0 0 1 9 11.94v.18c0-1.094.895-1.998 2-1.998h1.51a.49.49 0 0 0 .49-.493V5.467c0-.273-.22-.453-.492-.402L6.492 6.193A.62.62 0 0 0 6 6.781v6.225A3.004 3.004 0 0 1 3 16H1.998C.898 16 0 15.105 0 14c0-1.112.895-2 2-2z"/>\n</symbol><symbol id="new" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M15.785 9.637a.413.413 0 0 1 0 .726L12.28 12.28l-1.917 3.505a.414.414 0 0 1-.726 0L7.72 12.28l-3.505-1.917a.413.413 0 0 1 0-.726L7.72 7.72l1.917-3.505a.414.414 0 0 1 .726 0L12.28 7.72l3.505 1.917zm-8.91-6.349a.241.241 0 0 1 0 .424L4.83 4.83 3.712 6.874a.241.241 0 0 1-.424 0L2.17 4.83.126 3.712a.241.241 0 0 1 0-.424L2.17 2.17 3.288.126a.242.242 0 0 1 .424 0L4.83 2.17l2.044 1.118z"/>\n</symbol><symbol id="next" viewBox="0 0 16 16">\n    <g stroke-width="1" fill-rule="evenodd">\n        <path d="M3.41421356,7 L14.9931545,7 C15.5492199,7 16,7.44386482 16,8 C16,8.55228475 15.5500512,9 14.9931545,9 L3.41421356,9 L8.70710678,14.2928932 C9.09763107,14.6834175 9.09763107,15.3165825 8.70710678,15.7071068 C8.31658249,16.0976311 7.68341751,16.0976311 7.29289322,15.7071068 L0.292893219,8.70710678 C-0.0976310729,8.31658249 -0.0976310729,7.68341751 0.292893219,7.29289322 L7.29289322,0.292893219 C7.68341751,-0.0976310729 8.31658249,-0.0976310729 8.70710678,0.292893219 C9.09763107,0.683417511 9.09763107,1.31658249 8.70710678,1.70710678 L3.41421356,7 Z" transform="translate(8.000000, 8.000000) scale(-1, 1) translate(-8.000000, -8.000000) "/>\n    </g>\n</symbol><symbol id="note" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M14 0c.552 0 1 .448 1 1v1.024l-2 2.011V2H3v12h10v-3.05l2-2.011V15c0 .552-.448 1-1 1H2c-.552 0-1-.448-1-1v-2H.5c-.276 0-.5-.224-.5-.5s.224-.5.5-.5H1v-2H.5c-.276 0-.5-.224-.5-.5S.224 9 .5 9H1V7H.5C.224 7 0 6.776 0 6.5S.224 6 .5 6H1V4H.5C.224 4 0 3.776 0 3.5S.224 3 .5 3H1V1c0-.552.448-1 1-1h12zm1.612 4.299l.09.09c.396.396.399 1.046.002 1.448L9.55 12H8v-1.518l6.17-6.184c.399-.398 1.044-.397 1.442 0zM7 11v1H5v-1h2zm0-2v1H5V9h2zm2-2v1H5V7h4zm2-2v1H5V5h6z"/>\n</symbol><symbol id="notification-email" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M14 5.95V6v-.05a2.5 2.5 0 1 1 0 0zM10.073 4c.222 1.418.95 2.336 2.18 2.748L7 9 0 6V5c0-.552.45-1 1.007-1h9.066zM0 8l7 3 7-3v5.997c0 .554-.45 1.003-1.007 1.003H1.007A.998.998 0 0 1 0 13.997V8z"/>\n</symbol><symbol id="number" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 12V4h-.452l-.117.024-2.73 1.177v1.883l1.323-.54V12H4Zm11.245-7.363C14.8 4.21 14.192 4 13.44 4c-.437 0-.84.096-1.204.29a2.155 2.155 0 0 0-.864.816c-.17.29-.27.61-.298.957l-.021.527h2.08v-.318l.004-.09a.507.507 0 0 1 .11-.28.276.276 0 0 1 .233-.11c.111 0 .184.035.248.116.077.097.12.252.12.472 0 .24-.045.418-.128.54-.05.073-.118.111-.232.123l-.09.005h-.994v1.757h1.021l.08.004c.301.03.434.238.434.742 0 .228-.05.395-.144.512-.08.1-.178.144-.325.144-.108 0-.188-.04-.265-.137a.647.647 0 0 1-.132-.337l-.023-.431H11v.318l.007.206c.04.607.265 1.116.673 1.513.453.44 1.042.661 1.75.661.751 0 1.374-.22 1.85-.663.48-.446.72-1.04.72-1.762 0-.447-.098-.843-.296-1.182l-.094-.145-.107-.134a1.798 1.798 0 0 0-.252-.235l-.008-.006.014-.01.128-.133c.082-.092.157-.192.225-.3.203-.328.305-.686.305-1.07 0-.714-.222-1.296-.67-1.723ZM9.415 4.63C8.996 4.208 8.417 4 7.696 4c-.475 0-.907.118-1.289.354-.382.236-.68.568-.888.99a2.98 2.98 0 0 0-.3 1.123L5.2 7.03h2.05v-.322l.004-.157c.015-.25.066-.44.146-.568.077-.122.157-.17.271-.17.096 0 .152.033.204.12.076.127.12.323.12.59 0 .192-.049.397-.148.618-.085.19-.211.41-.378.66L7.331 8 5.33 10.57V12h4.87v-1.815H8.05l.573-.824.185-.226c.417-.519.722-.98.906-1.374.215-.462.323-.923.323-1.38 0-.739-.205-1.328-.623-1.751Z"/></symbol><symbol id="offline" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M3.113 2.707l10.61 10.61a.996.996 0 0 1-1.43 1.39l-2.435-2.435c.09.227.142.471.142.728a2 2 0 1 1-2-2c.257 0 .501.053.727.142L6.541 8.955a4.123 4.123 0 0 0-1.627.981 1.085 1.085 0 0 1-1.532-1.533 6.55 6.55 0 0 1 1.492-1.115L3.191 5.605a8.811 8.811 0 0 0-1.342 1.1A1.083 1.083 0 0 1 .317 5.173a10.92 10.92 0 0 1 1.326-1.115L.293 2.707a.999.999 0 1 1 1.414-1.414l1.39 1.39c.006.007.008.017.016.024zm4.312 1.484l-1.901-1.9a10.769 10.769 0 0 1 10.115 2.882 1.085 1.085 0 0 1-1.532 1.532 8.611 8.611 0 0 0-6.13-2.538c-.185 0-.368.011-.552.024zm5.148 4.212c.317.317.397.783.238 1.175l-2.72-2.72a6.471 6.471 0 0 1 2.482 1.545z"/>\n</symbol><symbol id="online" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M10 13a2 2 0 1 1-4.001-.001A2 2 0 0 1 10 13zm4.873-5.978c-.277 0-.555-.104-.767-.317a8.604 8.604 0 0 0-6.129-2.538A8.603 8.603 0 0 0 1.85 6.704 1.085 1.085 0 0 1 .317 5.173a10.76 10.76 0 0 1 7.66-3.172c2.894 0 5.616 1.126 7.662 3.172a1.085 1.085 0 0 1-.766 1.85zm-3.065 3.23c-.277 0-.555-.104-.766-.316-1.635-1.637-4.492-1.637-6.128 0a1.084 1.084 0 0 1-1.532-1.532A6.457 6.457 0 0 1 7.978 6.5c1.737 0 3.369.676 4.596 1.904a1.083 1.083 0 0 1-.766 1.849z"/>\n</symbol><symbol id="openapp" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 2H2v3H0V2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-3h2v3h12V2ZM7.293 4.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L8.586 9H1a1 1 0 1 1 0-2h7.586L7.293 5.707a1 1 0 0 1 0-1.414Z"/></symbol><symbol id="openwith" viewBox="0 0 16 16">\n  <g fill-rule="evenodd" transform="translate(-128 -160)">\n    <path d="M137,160 L137,162 L140.5,162 L134,168.5 L135.5,170 L142,163.5 L142,167 L144,167 L144,161.002929 C144,160.449027 143.562119,160 142.997071,160 L137,160 Z M135,162 L135,160 L129.002929,160 C128.449027,160 128,160.444631 128,161.000872 L128,174.999128 C128,175.551894 128.444631,176 129.000872,176 L142.999128,176 C143.551894,176 144,175.562119 144,174.997071 L144,169 L142,169 L142,174 L130,174 L130,162 L135,162 Z"/>\n  </g>\n</symbol><symbol id="palette" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M12.889 8a1.333 1.333 0 1 1 0-2.667 1.333 1.333 0 0 1 0 2.667zm-2.667-3.556a1.333 1.333 0 1 1 0-2.666 1.333 1.333 0 0 1 0 2.666zm-4.444 0a1.333 1.333 0 1 1 0-2.666 1.333 1.333 0 0 1 0 2.666zM3.11 8a1.333 1.333 0 1 1 0-2.667 1.333 1.333 0 0 1 0 2.667zM8 0a8 8 0 1 0 0 16c.736 0 1.333-.597 1.333-1.333 0-.347-.133-.658-.346-.89a1.333 1.333 0 0 1 .996-2.222h1.573A4.444 4.444 0 0 0 16 7.112C16 3.182 12.418 0 8 0z"/>\n</symbol><symbol id="paperplane" viewBox="0 0 16 16">\n  <g fill-rule="evenodd" transform="translate(-256 -64)">\n    <polygon points="272 64 266 79 263.5 76.5 260 79 259 75 269 66.5 259 72.5 256 70"/>\n  </g>\n</symbol><symbol id="paper" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2Zm5.5 8.25c0-.375-.75-1.5-1.5-1.5-.337 0-.447.076-.568.16-.148.101-.313.215-.932.215-.62 0-.784-.114-.932-.216-.121-.083-.23-.159-.568-.159-.75 0-1.5 1.125-1.5 1.5s0 .75.375.75h5.25c.309 0 .363-.254.373-.553l.002-.197ZM6 6.687C6 5.756 5.328 5 4.5 5S3 5.756 3 6.688c0 .931.672 1.687 1.5 1.687S6 7.619 6 6.687ZM14 8.5a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 0 0 1h4a.5.5 0 0 0 .5-.5Zm0 2a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 0 0 1h4a.5.5 0 0 0 .5-.5Zm0-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 0 0 1h4a.5.5 0 0 0 .5-.5Z"/></symbol><symbol id="password" viewBox="0 0 32 32"><path fill-rule="evenodd" d="M30 4a2 2 0 012 2v20a2 2 0 11-4 0V6a2 2 0 012-2zM12.102 14.434a2.002 2.002 0 01-1.284 2.52l-1.582.514.978 1.344a2.001 2.001 0 01-3.238 2.352L6 19.82l-.978 1.344c-.39.538-1 .824-1.62.824a2.002 2.002 0 01-1.616-3.176l.978-1.344-1.582-.514a2.002 2.002 0 01-1.284-2.52 2.002 2.002 0 012.52-1.284L4 13.664V12a2 2 0 114 0v1.664l1.582-.514a2 2 0 012.52 1.284zm14.2 0a2.002 2.002 0 01-1.284 2.52l-1.582.514.978 1.344a2.001 2.001 0 01-3.238 2.352L20.2 19.82l-.978 1.344c-.39.538-1 .824-1.62.824a2.002 2.002 0 01-1.616-3.176l.978-1.344-1.582-.514a2.002 2.002 0 01-1.284-2.52 2.002 2.002 0 012.52-1.284l1.582.514V12a2 2 0 114 0v1.664l1.582-.514a2 2 0 012.52 1.284z"/></symbol><symbol id="pen" viewBox="0 0 16 16">\n  \n  <use fill-rule="evenodd" xlink:href="#pen"/>\n</symbol><symbol id="people" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M136,73 C138.209139,73 140,70.9852814 140,68.5 C140,66.0147186 138.209139,64 136,64 C133.790861,64 132,66.0147186 132,68.5 C132,70.9852814 133.790861,73 136,73 Z M128,78 C128,77 130,74 132,74 C134,74 133,75 136,75 C139,75 138,74 140,74 C142,74 144,77 144,78 C144,79 144,80 143,80 L129,80 C128,80 128,79 128,78 Z" transform="translate(-128 -64)"/>\n</symbol><symbol id="percent-circle" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM9.9 4h1.2l-5 8H4.9l5-8zm1.704 6.604a.82.82 0 0 0 .25-.604.82.82 0 0 0-.25-.604.82.82 0 0 0-.604-.25.821.821 0 0 0-.605.25.82.82 0 0 0-.25.604.82.82 0 0 0 .25.604c.166.167.368.25.605.25a.82.82 0 0 0 .604-.25zm.813.81A1.925 1.925 0 0 1 11 12a1.925 1.925 0 0 1-1.414-.586A1.926 1.926 0 0 1 9 10c0-.552.195-1.023.586-1.414C9.976 8.195 10.448 8 11 8c.551 0 1.023.195 1.414.586.39.391.586.862.586 1.414 0 .552-.195 1.023-.583 1.414zm-6.813-4.81A.818.818 0 0 0 5.855 6a.818.818 0 0 0-.25-.604A.818.818 0 0 0 5 5.145a.818.818 0 0 0-.605.251.82.82 0 0 0-.25.604.82.82 0 0 0 .25.604.818.818 0 0 0 .605.251.818.818 0 0 0 .604-.251zm.813.81C6.027 7.805 5.555 8 5 8a1.925 1.925 0 0 1-1.414-.586A1.926 1.926 0 0 1 3 6c0-.552.195-1.023.586-1.414C3.976 4.195 4.448 4 5 4c.551 0 1.023.195 1.414.586C6.804 4.977 7 5.448 7 6c0 .552-.195 1.023-.583 1.414z"/>\n</symbol><symbol id="percent" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM9.9 4h1.2l-5 8H4.9l5-8zm1.704 6.604a.82.82 0 0 0 .25-.604.82.82 0 0 0-.25-.604.82.82 0 0 0-.604-.25.821.821 0 0 0-.605.25.82.82 0 0 0-.25.604.82.82 0 0 0 .25.604c.166.167.368.25.605.25a.82.82 0 0 0 .604-.25zm.813.81A1.925 1.925 0 0 1 11 12a1.925 1.925 0 0 1-1.414-.586A1.926 1.926 0 0 1 9 10c0-.552.195-1.023.586-1.414C9.976 8.195 10.448 8 11 8c.551 0 1.023.195 1.414.586.39.391.586.862.586 1.414 0 .552-.195 1.023-.583 1.414zm-6.813-4.81A.818.818 0 0 0 5.855 6a.818.818 0 0 0-.25-.604A.818.818 0 0 0 5 5.145a.818.818 0 0 0-.605.251.82.82 0 0 0-.25.604.82.82 0 0 0 .25.604.818.818 0 0 0 .605.251.818.818 0 0 0 .604-.251zm.813.81C6.027 7.805 5.555 8 5 8a1.925 1.925 0 0 1-1.414-.586A1.926 1.926 0 0 1 3 6c0-.552.195-1.023.586-1.414C3.976 4.195 4.448 4 5 4c.551 0 1.023.195 1.414.586C6.804 4.977 7 5.448 7 6c0 .552-.195 1.023-.583 1.414z"/>\n</symbol><symbol id="personal-data" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M12.375 16C13 16 13 15.5 13 15s-1.25-2-2.5-2-.625.5-2.5.5-1.25-.5-2.5-.5S3 14.5 3 15s0 1 .625 1H2.007A1.002 1.002 0 0 1 1 15V1c0-.552.446-1 .998-1H10v5h5v10.004a1 1 0 0 1-1.007.996h-1.618zM8 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm3-8V0l4 4h-4z"/>\n</symbol><symbol id="phone-download" viewBox="0 0 16 16">\n  <g transform="translate(-64 -160)">\n    <path d="M71,168.585786 L71,164 C71,163.447715 71.4477153,163 72,163 C72.5522847,163 73,163.447715 73,164 L73,168.585786 L73.2928932,168.292893 C73.6834175,167.902369 74.3165825,167.902369 74.7071068,168.292893 C75.0976311,168.683418 75.0976311,169.316582 74.7071068,169.707107 L72.7071068,171.707107 C72.3165825,172.097631 71.6834175,172.097631 71.2928932,171.707107 L69.2928932,169.707107 C68.9023689,169.316582 68.9023689,168.683418 69.2928932,168.292893 C69.6834175,167.902369 70.3165825,167.902369 70.7071068,168.292893 L71,168.585786 Z M66,161.000872 C66,160.448106 66.455761,160 67.0024733,160 L76.9975267,160 C77.5511774,160 78,160.444631 78,161.000872 L78,174.999128 C78,175.551894 77.544239,176 76.9975267,176 L67.0024733,176 C66.4488226,176 66,175.555369 66,174.999128 L66,161.000872 Z M68,162 L68,173 L76,173 L76,162 L68,162 Z"/>\n  </g>\n</symbol><symbol id="phone" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 1c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 14 1v14c0 .552-.456 1-1.002 1H3.002A1 1 0 0 1 2 15V1zm2 1v10h8V2H4zm4 13a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>\n</symbol><symbol id="phone-upload" viewBox="0 0 16 16"><path clip-rule="evenodd" d="M12.998 0A1 1 0 0 1 14 1v14c0 .552-.456 1-1.002 1H3.002A1 1 0 0 1 2 15V1c0-.552.456-1 1.002-1h9.995ZM12 2H4v11h8V2ZM7.293 3.293a1 1 0 0 1 1.32-.083l.094.083 2 2a1 1 0 0 1-1.32 1.497l-.094-.083L9 6.414V11a1 1 0 0 1-1.993.117L7 11V6.414l-.293.293a1 1 0 0 1-1.497-1.32l.083-.094 2-2Z"/></symbol><symbol id="pie-chart" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M7 16A7 7 0 0 1 7 2v7h7a7 7 0 0 1-7 7zm2-9V0a7 7 0 0 1 7 7H9z"/>\n</symbol><symbol id="pin" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M4 1c0-.552.453-1 .997-1h6.006c.55 0 .997.444.997 1 0 .552-.453 1-.997 1H11v4l2 2v2H9v4l-2 2v-6H3V8l2-2V2c-.552 0-1-.444-1-1z"/>\n</symbol><symbol id="plane" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.539.461a1.574 1.574 0 0 0-2.25.023L9.88 4.081 2.025 1.135a.51.51 0 0 0-.54.117L.15 2.588a.51.51 0 0 0 .108.804l6.561 3.75-3.57 3.57-1.74-.435a.51.51 0 0 0-.506.158l-.861.98a.51.51 0 0 0 .18.805l2.417 1.042 1.042 2.416a.51.51 0 0 0 .806.181l.979-.861a.51.51 0 0 0 .158-.507l-.435-1.739 3.57-3.57 3.75 6.56a.51.51 0 0 0 .804.108l1.336-1.335a.51.51 0 0 0 .117-.54L11.918 6.12l3.597-3.41a1.576 1.576 0 0 0 .023-2.25Z"/></symbol><symbol id="plus-small" viewBox="0 0 12 12">\n    \n    <use fill-rule="evenodd" transform="translate(1 1)" xlink:href="#plus-small"/>\n</symbol><symbol id="plus" viewBox="0 0 16 16">\n  \n  <g fill-rule="evenodd">\n    <use xlink:href="#plus-a"/>\n  </g>\n</symbol><symbol id="pop-inside" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 0a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2V2H4a2 2 0 0 1 2-2h8Zm-2 10v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4ZM4 6a1 1 0 0 0 0 2h2.586l-4.293 4.293a1 1 0 1 0 1.414 1.414L8 9.414V12a1 1 0 1 0 2 0V7a1 1 0 0 0-1-1H4Z"/></symbol><symbol id="previous" viewBox="0 0 16 16">\n    <g stroke-width="1" fill-rule="evenodd">\n        <path d="M3.41421356,7 L14.9931545,7 C15.5492199,7 16,7.44386482 16,8 C16,8.55228475 15.5500512,9 14.9931545,9 L3.41421356,9 L8.70710678,14.2928932 C9.09763107,14.6834175 9.09763107,15.3165825 8.70710678,15.7071068 C8.31658249,16.0976311 7.68341751,16.0976311 7.29289322,15.7071068 L0.292893219,8.70710678 C-0.0976310729,8.31658249 -0.0976310729,7.68341751 0.292893219,7.29289322 L7.29289322,0.292893219 C7.68341751,-0.0976310729 8.31658249,-0.0976310729 8.70710678,0.292893219 C9.09763107,0.683417511 9.09763107,1.31658249 8.70710678,1.70710678 L3.41421356,7 Z"/>\n    </g>\n</symbol><symbol id="printer" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M13 12v3c0 .552-.456 1-.995 1h-8.01A.995.995 0 0 1 3 15v-3H1c-.552 0-1-.438-1-1.003V6.003A1 1 0 0 1 1 5h14c.552 0 1 .438 1 1.003v4.994A1 1 0 0 1 15 12h-2zM3 1.01C3 .451 3.456 0 3.995 0h8.01c.55 0 .995.443.995 1.01V4H3V1.01zM5 10v4h6v-4H5zm9-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>\n</symbol><symbol id="qualify" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 2h8.002a2 2 0 0 1 1.414.586l4 4a2 2 0 0 1 0 2.828l-4 4a2 2 0 0 1-1.414.586H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/>\n</symbol><symbol id="radio-checked" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 16A8 8 0 108 0a8 8 0 000 16zm0-6a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>\n</symbol><symbol id="radio-unchecked" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 0a8 8 0 100 16A8 8 0 008 0zm0 14A6 6 0 108 2a6 6 0 000 12z" clip-rule="evenodd"/>\n</symbol><symbol id="refresh" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.589 0 0 3.589 0 8s3.589 8 8 8a8.039 8.039 0 0 0 7.229-4.571 1 1 0 1 0-1.806-.858A6.031 6.031 0 0 1 8 14c-3.309 0-6-2.691-6-6s2.691-6 6-6c1.482 0 2.866.571 3.938 1.507a.989.989 0 0 0-.706.353 1 1 0 0 0 .128 1.408l3 2.5A1 1 0 0 0 16 7V3a1 1 0 0 0-1-1 .987.987 0 0 0-.96.801C12.548 1.08 10.364 0 8 0Z"/></symbol><symbol id="relationship" viewBox="0 0 16 16"><path d="M5.5 2.509c.211 0 .42.012.625.035a7.031 7.031 0 0 0-1.801 2.167A3.501 3.501 0 0 0 6.2 11.44l.005-.001A3.493 3.493 0 0 0 8 10.458c.619-.63 1-1.495 1-2.45 0-.381-.061-.749-.174-1.093a1.998 1.998 0 0 1 1.8-.902c.242.619.374 1.292.374 1.996 0 1.297-.45 2.49-1.2 3.43a5.533 5.533 0 0 1-1.8 1.47 5.5 5.5 0 1 1-2.5-10.4Z"/><path d="M8 3.109c-.7.357-1.313.86-1.8 1.47A5.477 5.477 0 0 0 5 8.009c0 .704.132 1.377.373 1.996a1.998 1.998 0 0 0 1.801-.902A3.497 3.497 0 0 1 7 8.01c0-.954.381-1.818 1-2.45a3.493 3.493 0 0 1 2.5-1.05 3.5 3.5 0 0 1 1.176 6.797 7.032 7.032 0 0 1-1.801 2.168A5.5 5.5 0 1 0 8 3.109Z"/></symbol><symbol id="remboursement" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0c4.411 0 8 3.589 8 8s-3.589 8-8 8a8.039 8.039 0 0 1-7.229-4.571 1 1 0 1 1 1.806-.858A6.031 6.031 0 0 0 8 14c3.309 0 6-2.691 6-6s-2.691-6-6-6c-1.482 0-2.866.571-3.938 1.507a.989.989 0 0 1 .706.353 1 1 0 0 1-.037 1.322l-.091.086-3 2.5a1 1 0 0 1-1.634-.655L0 7V3a1 1 0 0 1 1-1c.481 0 .865.348.96.801C3.452 1.08 5.636 0 8 0Zm1 4c1.025 0 1.96.386 2.669 1.02l.159.151-1.414 1.415a1.988 1.988 0 0 0-3.05.28L7.277 7H9v2H7.278c.347.595.985 1 1.722 1 .49 0 .94-.178 1.288-.47l.125-.116 1.415 1.415a3.987 3.987 0 0 1-6.632-1.64L5.142 9H4V7h1.142A3.99 3.99 0 0 1 9 4Z"/></symbol><symbol id="rename" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M201.5,99.5 L192,109.025391 L192,112 L195.03772,112 L204.5,102.5 L201.5,99.5 Z M206.912154,96.9121541 C206.132243,96.1322429 204.869144,96.1308556 204.089264,96.9107361 L203,98 L206.030762,101 L207.092271,99.9252663 C207.869738,99.1381134 207.863777,97.8637772 207.087846,97.0878459 L206.912154,96.9121541 Z M199,110 L204.997071,110 C205.550973,110 206,110.443865 206,111 C206,111.552285 205.553689,112 205.002455,112 L197,112 L199,110 Z" transform="translate(-192 -96)"/>\n</symbol><symbol id="repare" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M15.493 2.49L13 5h-2V3L13.556.501c-1.722-.88-3.914-.601-5.356.84a4.587 4.587 0 0 0-.854 5.327l-6.93 6.926a1.408 1.408 0 1 0 1.989 1.993l6.922-6.924a4.582 4.582 0 0 0 6.166-6.173z"/>\n</symbol><symbol id="reply" viewBox="0 0 16 16">\n    <g fill-rule="evenodd">\n        <path id="w2s7pgbo5a" d="M10.054 4.266c-5.39.75-8.705 4.012-10.021 7.685-.184.513.45.912.851.542 2.155-2 5.465-2.93 9.17-2.93v2.496c0 .276.224.5.5.5.13 0 .255-.051.349-.142l4.752-4.634c.455-.443.464-1.171.021-1.626l-4.773-4.655c-.198-.193-.514-.189-.707.009-.091.093-.142.219-.142.349v2.406z"/>\n    </g>\n</symbol><symbol id="restaurant" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 0a4 4 0 0 1 3.995 3.8L15 4v5a1 1 0 0 1-.883.993L14 10h-1.5v4.75a1.25 1.25 0 1 1-2.5 0V1a1 1 0 0 1 .883-.993L11 0ZM7 0a1 1 0 0 1 .993.883L8 1v4a3 3 0 0 1-2.75 2.99v6.76a1.25 1.25 0 1 1-2.5 0V7.99A3 3 0 0 1 .005 5.176L0 5V1A1 1 0 0 1 1.993.883L2 1v4h1V1A1 1 0 0 1 4.993.883L5 1v4h1V1a1 1 0 0 1 1-1Z"/></symbol><symbol id="restore-straight" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 5a3 3 0 1 1 0 6H3a1 1 0 1 0 0 2h8a5 5 0 0 0 0-10H3.414l1.293-1.293A1 1 0 0 0 3.293.293l-3 3a1 1 0 0 0 0 1.414l3 3a1 1 0 0 0 1.414-1.414L3.414 5H11Z"/></symbol><symbol id="restore" viewBox="0 0 16 16">\n  <g fill-rule="evenodd" transform="translate(1 2)">\n    <path d="M-1.33226763e-14,13 L6.02479339,13 L8,13 C12.0522847,13 15,10.0522847 15,6 C15,1.94771525 12.0522847,-1 8,-1 C3.94771525,-1 1,1.94771525 1,6 C1,6.55228475 1.44771525,7 2,7 C2.55228475,7 3,6.55228475 3,6 C3,3.05228475 5.05228475,1 8,1 C10.9477153,1 13,3.05228475 13,6 C13,8.94771525 10.9477153,11 8,11 L-1.57651669e-14,11 C-0.55228475,11 -1,11.4477153 -1,12 C-1,12.5522847 -0.55228475,13 -1.33226763e-14,13 Z"/>\n    <path d="M0.832050294,2.4452998 C0.525697835,1.98577112 -0.0951715076,1.86159725 -0.554700196,2.16794971 C-1.01422888,2.47430216 -1.13840275,3.09517151 -0.832050294,3.5547002 L1.16794971,6.5547002 C1.47430216,7.01422888 2.09517151,7.13840275 2.5547002,6.83205029 L5.5547002,4.83205029 C6.01422888,4.52569784 6.13840275,3.90482849 5.83205029,3.4452998 C5.52569784,2.98577112 4.90482849,2.86159725 4.4452998,3.16794971 L2.2773501,4.61324951 L0.832050294,2.4452998 Z"/>\n  </g>\n</symbol><symbol id="right" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M12.707,7.2929 L6.707,1.2929 C6.316,0.9019 5.684,0.9019 5.293,1.2929 C4.902,1.6839 4.902,2.3159 5.293,2.7069 L10.586,7.9999 L5.293,13.2929 C4.902,13.6839 4.902,14.3159 5.293,14.7069 C5.684,15.0979 6.316,15.0979 6.707,14.7069 L12.707,8.7069 C13.098,8.3159 13.098,7.6839 12.707,7.2929"/>\n</symbol><symbol id="rise" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M4 2v2.001h6.59L2 12.5 3.5 14l8.499-8.59V12H14V2z"/>\n</symbol><symbol id="rotate-left" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8.116.547a1.044 1.044 0 0 1 .23-.289c.03-.024.051-.052.082-.072a.97.97 0 0 1 .305-.142c.025-.006.051-.006.076-.01C8.872.02 8.931.004 9 .004L13 0a.998.998 0 0 1 1.001.996.984.984 0 0 1-.789.957c1.7 1.495 2.785 3.67 2.788 6.03.004 3.085-1.79 5.902-4.528 7.252a.997.997 0 1 1-.886-1.789c2.062-1.017 3.417-3.143 3.414-5.462-.002-1.47-.57-2.855-1.502-3.93a.987.987 0 0 1-.352.705 1.001 1.001 0 0 1-1.408-.126l-2.505-2.99c-.002-.003-.003-.007-.006-.01-.044-.053-.074-.112-.106-.173a.986.986 0 0 1-.06-.128.988.988 0 0 1-.045-.172A1.056 1.056 0 0 1 8.01.974c.002-.043-.012-.083-.005-.127.007-.043.032-.076.044-.117.018-.063.038-.124.068-.183zM4.574.705a1 1 0 0 1 1.333.47.996.996 0 0 1-.47 1.33 5.977 5.977 0 0 0-1.686 1.227L2.111 2.56A7.981 7.981 0 0 1 4.573.706zm-.832 11.533l-1.185 1.659a8.094 8.094 0 0 1-2.222-3.61l2.003-.335a6.075 6.075 0 0 0 1.404 2.286zM.965 4.2l1.637 1.168A6.086 6.086 0 0 0 2 7.98l-1.986.332C.01 8.209 0 8.106 0 8A8.067 8.067 0 0 1 .965 4.2zm6.179 9.79a1 1 0 0 1-.271 1.978 7.803 7.803 0 0 1-2.7-.892l1.182-1.655a5.796 5.796 0 0 0 1.789.569z"/>\n</symbol><symbol id="rotate-right" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M7.884.547c.03.06.05.12.068.183.012.041.037.074.044.117.007.044-.007.084-.005.127.002.062.002.123-.007.186a.988.988 0 0 1-.045.172.986.986 0 0 1-.06.128c-.032.061-.062.12-.106.173-.003.003-.004.007-.006.01l-2.505 2.99a1.001 1.001 0 0 1-1.408.126.987.987 0 0 1-.352-.705C2.57 5.13 2.002 6.514 2 7.984c-.003 2.32 1.352 4.445 3.414 5.462a.997.997 0 1 1-.886 1.79C1.79 13.885-.004 11.067 0 7.981c.003-2.36 1.088-4.534 2.788-6.029a.984.984 0 0 1-.79-.957A.998.998 0 0 1 3 0l4 .005c.069 0 .128.016.19.028.026.005.052.005.077.011a.97.97 0 0 1 .305.142c.03.02.053.048.082.072a1.044 1.044 0 0 1 .23.29zm3.542.158a7.981 7.981 0 0 1 2.464 1.856l-1.641 1.17a5.977 5.977 0 0 0-1.686-1.225.996.996 0 0 1-.47-1.331 1 1 0 0 1 1.333-.47zm.832 11.533a6.075 6.075 0 0 0 1.404-2.286l2.003.335a8.094 8.094 0 0 1-2.222 3.61l-1.185-1.66zM15.035 4.2A8.067 8.067 0 0 1 16 8c0 .106-.01.209-.015.313L14 7.98a6.086 6.086 0 0 0-.6-2.613L15.034 4.2zm-6.179 9.79a5.796 5.796 0 0 0 1.79-.57l1.18 1.656c-.82.45-1.73.76-2.699.892a1 1 0 1 1-.27-1.978z"/>\n</symbol><symbol id="sad-cozy" viewBox="0 0 52 52"><path d="M38.231 40H13.769C6.175 40 0 33.756 0 26.08c0-3.66 1.394-7.117 3.927-9.733 2.219-2.29 5.093-3.715 8.203-4.086a13.887 13.887 0 014.042-8.292A13.608 13.608 0 0125.801 0c3.62 0 7.04 1.407 9.629 3.968a13.897 13.897 0 014.038 8.25C46.482 12.853 52 18.828 52 26.082 52 33.756 45.82 40 38.23 40h.001zm-.163-3.001h.104c5.97 0 10.828-4.91 10.828-10.947 0-6.035-4.857-10.946-10.828-10.946h-.11c-.779 0-1.417-.627-1.435-1.417C36.492 7.794 31.637 3 25.803 3 19.968 3 15.11 7.796 14.977 13.69a1.445 1.445 0 01-1.403 1.42C7.744 15.244 3 20.153 3 26.052 3 32.09 7.857 37 13.828 37h.088l.035-.002c.03 0 .062 0 .093.002h24.021l.003-.001zm-4.302-11.222c-.875.585-.918 1.659-.92 1.706a.52.52 0 01-.525.517.523.523 0 01-.506-.536c.002-.039.016-.543.251-1.137a7.99 7.99 0 00-11.138-.019c.241.603.257 1.116.257 1.155a.523.523 0 01-.503.536.526.526 0 01-.528-.515c0-.043-.042-1.121-.92-1.706a.536.536 0 01-.15-.731.51.51 0 01.714-.154c.225.15.414.322.572.505a9.006 9.006 0 0112.251.01c.16-.184.35-.36.582-.515a.503.503 0 01.281-.085c.168 0 .333.085.432.24a.537.537 0 01-.15.731v-.002z" fill-rule="evenodd"/></symbol><symbol id="safe" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14 0a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2h-1v1h-3v-1H6v1H3v-1H2a2 2 0 0 1-2-2V2C0 .9.9 0 2 0h12zm0 1H3a1 1 0 0 0-1 .88V3H1v3h1v3H1v3h1v1a1 1 0 0 0 .88 1H14a1 1 0 0 0 1-.88V2a1 1 0 0 0-.88-1H14zm0 1v11H3v-2H2v-1h1V5H2V4h1V2h11zM8.5 4a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7zm0 1a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5zm0 2a.5.5 0 1 0 0 1 .5.5 0 0 0 0-1z"/></symbol><symbol id="school" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 9.102v2.843a.5.5 0 0 1-.255.435l-4.5 2.532a.5.5 0 0 1-.49 0l-4.5-2.532A.5.5 0 0 1 3 11.945V9.102l4.03 2.155a2.06 2.06 0 0 0 1.94 0L13 9.103ZM8.16 1.023l.102.042 7.465 3.992a.522.522 0 0 1 .204.194.492.492 0 0 1-.124.64l-.08.052-7.465 3.992a.56.56 0 0 1-.423.041l-.101-.041L2 6.867V11a1 1 0 1 1-2 0V5.5c0-.148.068-.292.192-.39l.08-.053 7.466-3.992a.558.558 0 0 1 .338-.06l.085.019Z"/></symbol><symbol id="scooter" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 0a1 1 0 0 0 0 2h2.22l1.512 6.053A5.506 5.506 0 0 0 8.207 12H4.5a2.5 2.5 0 1 0 .45 2h5.085a3.5 3.5 0 0 1 3.465-4h.5a.999.999 0 0 0 .97-1.243l-1.81-7.242A2 2 0 0 0 11.22 0H9ZM2.5 14a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 16a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm0-2a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1Z"/></symbol><symbol id="select-all" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M14.7 8.713a1 1 0 1 0-1.4-1.427l-4.391 4.312L7.7 10.411A.999.999 0 1 0 6.3 11.838l1.909 1.875a.997.997 0 0 0 1.4 0l5.092-5zM15 4c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1H5c-.55 0-1-.45-1-1V5c0-.55.45-1 1-1h10zm-3-2H5C3.346 2 2 3.346 2 5v7H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v1z"/>\n</symbol><symbol id="server" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Zm5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM0 11a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-3Zm5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"/></symbol><symbol id="setting" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.855 5a3.502 3.502 0 0 1-6.71 0H1a1 1 0 0 1 0-2h6.145a3.502 3.502 0 0 1 6.71 0H15a1 1 0 1 1 0 2h-1.145ZM12 4a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM5.5 15.5A3.502 3.502 0 0 0 8.855 13H15a1 1 0 1 0 0-2H8.855a3.502 3.502 0 0 0-6.71 0H1a1 1 0 1 0 0 2h1.145A3.502 3.502 0 0 0 5.5 15.5ZM7 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"/></symbol><symbol id="share-circle" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zM6.541 6.92a1.5 1.5 0 1 0 0 2.16l2.47 1.235a1.5 1.5 0 1 0 .447-.894l-2.47-1.236a1.515 1.515 0 0 0 0-.37l2.47-1.235a1.5 1.5 0 1 0-.447-.894L6.541 6.92z"/>\n</symbol><symbol id="share-ios" viewBox="0 0 16 16">\n    <g fill-rule="evenodd">\n        <path d="M5 6v2H3v6h10V8h-2V6h2c1.105 0 2 .895 2 2v6c0 1.105-.895 2-2 2H3c-1.105 0-2-.895-2-2V8c0-1.105.895-2 2-2h2zM8.707.293L11.5 3.086c.39.39.39 1.023 0 1.414-.39.39-1.024.39-1.414 0L9 3.414V11c0 .552-.448 1-1 1s-1-.448-1-1V3.414L6 4.5c-.39.39-1.024.39-1.414 0-.39-.39-.39-1.024 0-1.414L7.293.293c.39-.39 1.024-.39 1.414 0z"/>\n    </g>\n</symbol><symbol id="share" viewBox="0 0 16 16"><path d="M5.083 10.16a3 3 0 1 1 0-4.319l4.94-2.47a3 3 0 1 1 .895 1.789l-4.94 2.47a3.03 3.03 0 0 1 0 .74l4.94 2.47a3 3 0 1 1-.895 1.789l-4.94-2.47Z" fill-rule="evenodd"/></symbol><symbol id="shield" viewBox="0 0 16 16">\n  <g fill-rule="evenodd">\n    <path d="M8 0C9.20521 0 10.3958 0.161508 11.7816 0.497858C13.0017 0.79361 14.2524 1.21086 15.5333 1.74843C15.8038 1.84297 16 2.08508 16 2.3672C16 5.70315 15.5174 8.29912 14.3128 10.4515C13.1076 12.6172 11.2094 14.3253 8.40627 15.8989C8.16596 16.0337 7.84964 16.0337 7.60833 15.8989C4.80591 14.3253 2.90797 12.6172 1.70243 10.4515C0.49722 8.29912 0 5.70315 0 2.3672C0 2.12034 0.15019 1.90412 0.379636 1.79059L0.482616 1.74843C1.7479 1.21086 2.99826 0.79361 4.23334 0.497858C5.60485 0.161508 6.81039 0 8 0ZM8 2C6.98556 2 5.93935 2.13874 4.69909 2.44287C3.89685 2.63497 3.08355 2.88465 2.2592 3.19225L2.014 3.286L2.02834 3.64806C2.1358 5.97025 2.55108 7.75457 3.31204 9.22285L3.44993 9.47871C4.34101 11.0795 5.72634 12.4281 7.84879 13.723L8.007 13.818L8.16353 13.7244C10.1711 12.5 11.5185 11.2287 12.4142 9.73979L12.5676 9.47474C13.4082 7.97259 13.8602 6.12463 13.9721 3.65506L13.985 3.283L13.7512 3.19376C13.0851 2.94655 12.4311 2.73671 11.7891 2.564L11.3099 2.44143C10.0547 2.13679 9.02322 2 8 2ZM8 4C8.76147 4 9.53815 4.09217 10.4778 4.30112L10.8381 4.385L11.2935 4.50163L11.7186 4.62187L11.893 4.675L11.8889 4.73299C11.7379 6.17337 11.4298 7.31061 10.9557 8.24741L10.8223 8.49801L10.6832 8.73794L10.5465 8.95553C10.0314 9.74198 9.31695 10.4776 8.33818 11.203L8.007 11.44L7.999 11.435L8 4Z"/>\n  </g>\n</symbol><symbol id="shop" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 13a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm8 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM2.5 1a1 1 0 0 1 .986.836L3.847 4H14a1 1 0 0 1 .986 1.164l-.86 5.165A2 2 0 0 1 12.153 12H4.847a2 2 0 0 1-1.973-1.671L1.652 3H1a1 1 0 0 1-.993-.883L0 2a1 1 0 0 1 .883-.993L1 1h1.5Z"/></symbol><symbol id="sound" viewBox="0 0 16 16">\n  <path d="M7.937 13.323a.718.718 0 0 1-.72.719.72.72 0 0 1-.46-.166l-3.939-3.258H.72A.72.72 0 0 1 0 9.9V7.034a.72.72 0 0 1 .72-.72h2.098l3.939-3.257a.72.72 0 0 1 1.18.554v9.712zm2.769-1.124a.72.72 0 0 1-.561-.209l-.097-.096a.718.718 0 0 1-.07-.937c.54-.726.825-1.587.825-2.49 0-.971-.323-1.882-.935-2.634a.718.718 0 0 1 .05-.962l.096-.096a.722.722 0 0 1 1.067.053 5.681 5.681 0 0 1 1.297 3.64 5.705 5.705 0 0 1-1.147 3.444.721.721 0 0 1-.525.287zm2.978 2.222a.722.722 0 0 1-1.06.045l-.094-.094a.718.718 0 0 1-.042-.972 7.669 7.669 0 0 0 1.802-4.933 7.648 7.648 0 0 0-1.93-5.08.718.718 0 0 1 .03-.985l.094-.094a.721.721 0 0 1 1.049.03 9.212 9.212 0 0 1 2.332 6.13 9.23 9.23 0 0 1-2.18 5.953z"/>\n</symbol><symbol id="spinner" viewBox="0 0 32 32">\n  <path opacity=".25" d="M16 0a16 16 0 0 0 0 32 16 16 0 0 0 0-32m0 4a12 12 0 0 1 0 24 12 12 0 0 1 0-24"/>\n  <path d="M16 0a16 16 0 0 1 16 16h-4a12 12 0 0 0-12-12z"/>\n</symbol><symbol id="sport-bag" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 5a4 4 0 1 1 8 0h.459a3 3 0 0 1 2.96 2.507l.5 2A3 3 0 0 1 12.958 13H3.042a3 3 0 0 1-2.96-3.493l.5-2A3 3 0 0 1 3.543 5H4Zm2 0a2 2 0 1 1 4 0H6Z"/></symbol><symbol id="stack" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M3.243 6.034L.671 4.842a.779.779 0 0 1-.396-.397c-.197-.496 0-.894.396-1.093L7.792.075c.198-.1.395-.1.594 0l7.12 3.277a.746.746 0 0 1 .494.696.746.746 0 0 1-.494.695l-2.67 1.291-.594.298-3.856 1.887a.694.694 0 0 1-.693 0c-.198-.105-3.857-1.887-3.857-1.887l-.593-.298zm12.03 4.807c.78.4.675 1.345-.086 1.756L8.421 15.9a.985.985 0 0 1-.864 0L.572 12.49a.779.779 0 0 1-.396-.397c-.197-.497 0-.894.396-1.093l.89-.397 2.472 1.192 3.627 1.73a.984.984 0 0 0 .857-.005l3.725-1.825 2.373-1.19.756.336zm.53-3.218c.197.397 0 .894-.594 1.192l-2.274 1.092-.594.3-4.058 2.036a.98.98 0 0 1-.883 0l-4.058-2.037-.594-.299L.474 8.815a.777.777 0 0 1-.396-.398c-.198-.496 0-.894.396-1.092l1.285-.596 2.176.993 3.626 1.73a.986.986 0 0 0 .858-.005l4.12-2.023 1.582-.794 1.286.596a.771.771 0 0 1 .396.397z"/>\n</symbol><symbol id="star-outline" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="m8 10.305 2.71 1.425-.517-3.018 2.192-2.137-3.03-.44L8 3.389 6.645 6.135l-3.03.44 2.193 2.137-.518 3.018L8 10.305Zm-4.702 4.167.898-5.236L.392 5.528l5.257-.764L8 0l2.351 4.764 5.257.764-3.804 3.708.898 5.236L8 12l-4.702 2.472Z"/></symbol><symbol id="star" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M8 12l-4.702 2.472.898-5.236L.392 5.528l5.257-.764L8 0l2.351 4.764 5.257.764-3.804 3.708.898 5.236z"/>\n</symbol><symbol id="stats" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M13 4h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1M7 0h2a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1M1 8h2a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1"/>\n</symbol><symbol id="stop" viewBox="0 0 12 12"><path d="M.75 1.5A.75.75 0 0 1 1.5.75h9a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-.75.75h-9a.75.75 0 0 1-.75-.75v-9Z"/></symbol><symbol id="subway" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.64.64C11.2.072 9.488 0 8 0 6.512 0 4.8.072 3.36.64 1.224 1.472 0 3.24 0 5.488V16h16V5.488C16 3.24 14.776 1.472 12.64.64ZM13 5.857v5c0 1.07-.785 1.958-1.811 2.118l1.097 1.096v.358h-1.429L9.43 13H6.57l-1.428 1.429H3.714v-.358l1.097-1.096A2.143 2.143 0 0 1 3 10.857v-5C3 3.714 5.143 3 8 3s5 .714 5 2.857Zm-8.571-.714V8h7.142V5.143H4.43ZM6.57 10.5a1.071 1.071 0 1 1-2.142 0 1.071 1.071 0 0 1 2.142 0Zm3.929 1.071a1.071 1.071 0 1 0 0-2.142 1.071 1.071 0 0 0 0 2.142Z"/></symbol><symbol id="support" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="m5.723 13.553.899-1.797a4.012 4.012 0 0 1-2.378-2.378l-1.797.899a6.02 6.02 0 0 0 3.276 3.276Zm.899-9.31a4.012 4.012 0 0 0-2.378 2.379l-1.797-.899a6.02 6.02 0 0 1 3.276-3.276l.899 1.797Zm6.931 6.034a6.021 6.021 0 0 1-3.277 3.276l-.898-1.797a4.012 4.012 0 0 0 2.378-2.378l1.797.899Zm0-4.554a6.02 6.02 0 0 0-3.277-3.276l-.898 1.797a4.012 4.012 0 0 1 2.378 2.378l1.797-.899ZM16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-6 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></symbol><symbol id="swap" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 0a2 2 0 0 1 2 2h1a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1a2 2 0 0 1 2-2h6Zm2 12h1V4h-1v8ZM3 4v8H2V4h1Zm2-2v12h6V2H5Z"/></symbol><symbol id="sync-cozy" viewBox="0 0 16 16">\n    <g fill="none" fill-rule="evenodd">\n        <g fill="#297EF1">\n            <path d="M8 2c2.21 0 4 1.79 4 4 2.21 0 4 1.79 4 4s-1.79 4-4 4H4c-2.21 0-4-1.79-4-4s1.79-4 4-4c0-2.21 1.79-4 4-4zM4.6 9.014c-.12-.025-.242-.004-.345.055l-.038.024c-.042.029-.08.063-.112.104l-.012.014c-.034.047-.059.1-.074.16l-.006.04C4.008 9.441 4 9.469 4 9.5v2c0 .276.224.5.5.5.237 0 .426-.168.478-.39C5.728 12.459 6.818 13 8 13c1.547 0 2.956-.899 3.632-2.268.122-.247.02-.547-.228-.67-.248-.121-.547-.02-.67.228C10.227 11.322 9.162 12 8 12c-.74 0-1.436-.286-1.976-.754.135-.007.267-.064.36-.176.177-.212.148-.527-.064-.704l-1.5-1.25c-.005-.005-.012-.006-.017-.011l-.04-.024c-.04-.025-.08-.045-.124-.057zM8 5c-1.57 0-2.992.906-3.653 2.291-.119.25-.013.548.236.667.25.118.548.013.667-.236C5.746 6.682 6.817 6 8 6c.769 0 1.477.287 2.017.758-.149-.005-.298.048-.401.172-.177.212-.148.527.064.704l1.5 1.25.011.007c.01.008.023.013.034.02.04.028.083.05.127.063l.04.01c.054.012.11.017.163.01.005 0 .009.002.013.001.063-.01.118-.031.17-.059.014-.007.025-.016.038-.024.04-.027.076-.059.107-.097l.02-.021c.034-.047.06-.1.077-.158.003-.01.002-.02.004-.03.008-.034.016-.068.016-.106v-2c0-.276-.224-.5-.5-.5-.226 0-.41.152-.471.357C10.284 5.523 9.196 5 7.999 5z"/>\n        </g>\n    </g>\n</symbol><symbol id="sync" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M16 7.2V3c0-.6-.4-1-1-1-.5 0-.8.3-.9.7A8.09 8.09 0 0 0 8 0C4.9 0 2 1.8.7 4.6c-.2.5 0 1.1.5 1.3.5.2 1.1 0 1.3-.5C3.5 3.4 5.6 2 8 2c1.5 0 3 .6 4 1.5-.3 0-.6.1-.8.3-.4.4-.3 1.1.1 1.4l3 2.5h.1c.1.1.2.1.3.1h.4c.1 0 .2-.1.3-.1h.1c.1-.1.2-.1.2-.2.2 0 .2-.1.3-.3 0 .1 0 0 0 0m-1.2 2.9c-.5-.2-1.1 0-1.3.5A6 6 0 0 1 8 14c-1.5 0-2.9-.6-4-1.5.3 0 .5-.1.7-.4.4-.4.3-1.1-.1-1.4l-3-2.5h-.1L1.3 8h-.1c-.2 0-.5 0-.7.1H.4c-.1.1-.1.2-.2.3-.1.1-.1.2-.2.3V13c0 .6.4 1 1 1 .5 0 .9-.3 1-.8C3.5 14.9 5.6 16 8 16c3.1 0 5.9-1.8 7.3-4.5.2-.5 0-1.1-.5-1.4"/></symbol><symbol id="tab" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 12v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1V3a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2h-1Zm1-9H5v1h6a2 2 0 0 1 2 2v4h1V3ZM2 6h9v7H2V6Z"/></symbol><symbol id="tag" viewBox="0 0 16 16"><path d="M5 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"/><path clip-rule="evenodd" d="M2 0a2 2 0 0 0-2 2v5.89a2 2 0 0 0 .586 1.415l5.98 5.973a2.462 2.462 0 0 0 3.481 0l5.236-5.237.002-.002a2.461 2.461 0 0 0 0-3.47L9.303.587A2 2 0 0 0 7.888 0H2Zm0 2h5.888l5.978 5.98a.461.461 0 0 1 0 .649l-5.234 5.236a.46.46 0 0 1-.652 0L2 7.89V2Z"/></symbol><symbol id="target" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M9 12.899V12a1 1 0 0 0-2 0v.899A5.016 5.016 0 0 1 3.101 9H4a1 1 0 0 0 0-2h-.899A5.016 5.016 0 0 1 7 3.101V4a1 1 0 0 0 2 0v-.899A5.016 5.016 0 0 1 12.899 7H12a1 1 0 0 0 0 2h.899A5.016 5.016 0 0 1 9 12.899zM16 7h-1.08A7.005 7.005 0 0 0 9 1.08V1a1 1 0 0 0-2 0v.08A7.005 7.005 0 0 0 1.08 7H1a1 1 0 0 0 0 2h.08A7.004 7.004 0 0 0 7 14.92V15a1 1 0 0 0 2 0v-.08A7.004 7.004 0 0 0 14.92 9H16V7z"/>\n</symbol><symbol id="task" viewBox="0 0 16 16"><path d="M5 4a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2H5ZM4 8a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1ZM5 10a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2H5Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Zm2 0h12v12H2V2Z"/></symbol><symbol id="team" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M11.145 7.75C10.263 7.285 9.647 6.23 9.647 5c0-1.657 1.12-3 2.5-3 1.381 0 2.5 1.343 2.5 3 0 1.231-.618 2.29-1.502 2.752V9l1.105.553c.49.245 1.095.848 1.342 1.342l.106.21c.245.49 0 .895-.55.895H9.142c-.544 0-.797-.4-.55-.895l.106-.21c.245-.49.848-1.095 1.342-1.342L11.145 9V7.75zM4.647 10.8c-1.165-.48-2-1.776-2-3.3 0-1.933 1.343-3.5 3-3.5s3 1.567 3 3.5c0 1.524-.835 2.82-2 3.3V12l2.051.684c.532.177 1.15.717 1.397 1.21l.105.211c.245.49.002.895-.548.895h-8.01c-.539 0-.794-.4-.547-.895l.105-.21c.245-.49.872-1.037 1.397-1.211L4.647 12v-1.2z"/>\n</symbol><symbol id="telecom" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 6.04c1.08 0 1.96.878 1.96 1.96 0 1.08-.88 1.96-1.96 1.96S6.04 9.08 6.04 8c0-1.082.88-1.96 1.96-1.96ZM8 0C3.59 0 0 3.588 0 8c0 4.41 3.59 8 8 8 1.778 0 3.46-.572 4.865-1.65l.138-.106-1.079-1.404-.137.106A6.167 6.167 0 0 1 8 14.228 6.236 6.236 0 0 1 1.77 8 6.236 6.236 0 0 1 8 1.77 6.236 6.236 0 0 1 14.23 8v.711a1.25 1.25 0 0 1-2.498 0v-.174h-.04a3.75 3.75 0 0 0 .04-.537V4.98h-1.565A3.688 3.688 0 0 0 8 4.268 3.736 3.736 0 0 0 4.268 8 3.735 3.735 0 0 0 8 11.73c.986 0 1.938-.405 2.642-1.118a3.02 3.02 0 0 0 2.338 1.119A3.023 3.023 0 0 0 16 8.71V8c0-4.412-3.59-8-8-8Z"/></symbol><symbol id="telephone" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M5.88 4.655a1.68 1.68 0 0 0 .001-2.377L4.097.492a1.685 1.685 0 0 0-2.38 0l-.98.979A2.521 2.521 0 0 0 .42 4.646 39.038 39.038 0 0 0 11.356 15.58c.999.662 2.328.53 3.175-.316l.979-.979a1.681 1.681 0 0 0 0-2.379l-1.785-1.784a1.679 1.679 0 0 0-2.379 0l-.594.593A40.017 40.017 0 0 1 5.285 5.25l.595-.595z"/>\n</symbol><symbol id="text-info" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 3h7.172l2-2H2a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V6.828l-2 2V14H2V3Zm3 7v2h2l7.146-7.146-2-2L5 10Zm10.5-6.5-.646.646-2-2L13.5 1.5a1.414 1.414 0 1 1 2 2Z"/></symbol><symbol id="text" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 13a1 1 0 1 1 0 2H1a1 1 0 1 1 0-2h8Zm6-4a1 1 0 1 1 0 2H1a1 1 0 1 1 0-2h14Zm0-4a1 1 0 1 1 0 2H1a1 1 0 0 1 0-2h14Zm0-4a1 1 0 1 1 0 2H1a1 1 0 0 1 0-2h14Z"/></symbol><symbol id="top" viewBox="0 0 24 24">\n  <g fill-rule="evenodd" transform="translate(12.285714, 12.000000) rotate(270.000000) translate(-12.285714, -12.000000)">\n    <path d="M6.46026077,20.3174036 C5.84657974,20.9310847 5.84657974,21.9260582 6.46026077,22.5397392 C7.0739418,23.1534203 8.06891534,23.1534203 8.68259637,22.5397392 L18.1111678,13.1111678 C18.7248488,12.4974868 18.7248488,11.5025132 18.1111678,10.8888322 L8.68259637,1.46026077 C8.06891534,0.846579743 7.0739418,0.846579743 6.46026077,1.46026077 C5.84657974,2.0739418 5.84657974,3.06891534 6.46026077,3.68259637 L14.7776644,12 L6.46026077,20.3174036 Z"/>\n  </g>\n</symbol><symbol id="to-the-cloud" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M12.112 5.665a4.132 4.132 0 0 0-1.239-2.475A4.227 4.227 0 0 0 7.918 2c-1.112 0-2.16.422-2.955 1.19-.237.229-.43.487-.603.756l2.847 2.847L9 5v5H4l1.793-1.793-2.452-2.451a4.21 4.21 0 0 0-2.136 1.148A4.124 4.124 0 0 0 0 9.824C0 12.127 1.895 14 4.225 14h7.507c2.33 0 4.227-1.873 4.227-4.176 0-2.176-1.694-3.968-3.847-4.159"/>\n</symbol><symbol id="train" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 4v7a3 3 0 0 1-2.536 2.964L14 15.5v.5h-2l-2-2H6l-2 2H2v-.5l1.536-1.536A3 3 0 0 1 1 11V4c0-3 3-4 7-4s7 1 7 4ZM3 7h4V3H3v4Zm6-4v4h4V3H9Zm-3 7.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm5.5 1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/></symbol><symbol id="tram" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 .75A.75.75 0 0 1 4.75 0h6.5a.75.75 0 0 1 0 1.5H9.589l-.764 1.526C11.527 3.201 14 4.276 14 7v5a3 3 0 0 1-1.765 2.735L13 15.5v.5h-2l-1-1H6l-1 1H3v-.5l.765-.765A3 3 0 0 1 2 12V7c0-2.78 1.718-3.843 5.153-3.984L7.911 1.5H4.75A.75.75 0 0 1 4 .75ZM4 10V6h8v4H4Zm4 4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/></symbol><symbol id="trash" viewBox="0 0 16 16"><path d="M4.5 1H2.007C1.45 1 1 1.448 1 2v1h14V2c0-.556-.45-1-1.007-1H11.5L11 0H5l-.5 1ZM2 4h12v9.991A2.01 2.01 0 0 1 11.991 16H4.01A2.01 2.01 0 0 1 2 13.991V4Z" fill-rule="evenodd"/></symbol><symbol id="trophy" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M3 2V1c0-.552.456-1 .995-1h8.01c.55 0 .995.444.995 1v1h2.001a1 1 0 0 1 .999.99v3.012c0 1.104-.852 2.282-1.9 2.631L13 9l-4 3v2h.508c.548 0 1.26.358 1.593.802L12 16H4l.899-1.198C5.23 14.359 5.942 14 6.492 14H7v-2L3 9l-1.1-.367C.85 8.283 0 7.102 0 6.003V2.99C0 2.444.443 2 .999 2H3zm0 2H2v2.505c0 .273.232.495.5.495H3V4zm10 0v3h.5c.268 0 .5-.222.5-.495V4h-1z"/>\n</symbol><symbol id="uncloud" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="m1.613 2.21.094.083 12 12a1 1 0 0 1-1.32 1.497l-.094-.083L10.585 14H4a4 4 0 0 1-1.224-7.81L.293 3.708a1 1 0 0 1 1.32-1.497ZM8 2a4 4 0 0 1 4 4 4 4 0 0 1 2.934 6.72L5.28 3.065A3.986 3.986 0 0 1 8 2Z"/></symbol><symbol id="unknow" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 12a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V11h-3V8.5a1.5 1.5 0 0 1 1.356-1.493L8 7a1.5 1.5 0 1 0-1.493-1.645L6.5 5.5h-3a4.506 4.506 0 0 1 5.468-4.4Z"/></symbol><symbol id="unlink" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M.151 2.849l1.414-1.414 13 13-1.414 1.414-4.453-4.452c-1.099.059-2.202-.298-3-1.095a1.044 1.044 0 0 1 0-1.475c.077-.076.168-.124.26-.172L5.302 8l-2.909 2.91a1.04 1.04 0 0 0-.007 1.472l1.23 1.23a1.04 1.04 0 0 0 1.468-.002l1.656-1.656a1.042 1.042 0 1 1 1.474 1.475L6.56 15.085a3.126 3.126 0 0 1-4.418.002l-1.229-1.23A3.125 3.125 0 0 1 .92 9.437l2.91-2.91L.15 2.849zm10.15 2.85a1.044 1.044 0 0 1 0 1.475c-.033.034-.078.048-.115.076L7.53 4.595c1.023 0 2.03.362 2.77 1.104zm4.786-3.556a3.126 3.126 0 0 1-.007 4.422l-2.79 2.79-1.474-1.474 2.79-2.79a1.04 1.04 0 0 0 .006-1.473l-1.23-1.23a1.042 1.042 0 0 0-1.468.002L9.259 4.045A1.042 1.042 0 1 1 7.784 2.57L9.44.915a3.127 3.127 0 0 1 4.418-.001l1.229 1.229z"/>\n</symbol><symbol id="unlock" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M3 6h7V4.5C10 3.122 9.103 2 8 2S6 3.122 6 4.5H4V4c0-2.206 1.794-4 4-4 2.205 0 4 1.794 4 4v2h1c.556 0 1 .446 1 .995v8.01c0 .54-.449.995-1.002.995H3.002A1.003 1.003 0 0 1 2 15.005v-8.01C2 6.455 2.448 6 3 6zm5 2.5A1.5 1.5 0 0 0 6.5 10c0 .552.303 1.032.75 1.29v2.46a.751.751 0 0 0 1.5 0v-2.46c.445-.258.75-.738.75-1.29 0-.828-.674-1.5-1.5-1.5z"/>\n</symbol><symbol id="upload" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M263,102.414214 L261.707107,103.707107 C261.316582,104.097631 260.683418,104.097631 260.292893,103.707107 C259.902369,103.316582 259.902369,102.683418 260.292893,102.292893 L263.292893,99.2928932 C263.683418,98.9023689 264.316582,98.9023689 264.707107,99.2928932 L267.707107,102.292893 C268.097631,102.683418 268.097631,103.316582 267.707107,103.707107 C267.316582,104.097631 266.683418,104.097631 266.292893,103.707107 L265,102.414214 L265,110 C265,110.552285 264.552285,111 264,111 C263.447715,111 263,110.552285 263,110 L263,102.414214 Z M257,98 L271,98 C271.552285,98 272,97.5522847 272,97 C272,96.4477153 271.552285,96 271,96 L257,96 C256.447715,96 256,96.4477153 256,97 C256,97.5522847 256.447715,98 257,98 Z" transform="translate(-256 -96)"/>\n</symbol><symbol id="up" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M11 16V8h5L8 0 0 8h5v8z"/>\n</symbol><symbol id="videos" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M1 1h14a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zm.5 1a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zm0 11a.5.5 0 1 0 0 1h1a.5.5 0 1 0 0-1h-1zm3-11a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zm0 11a.5.5 0 1 0 0 1h1a.5.5 0 1 0 0-1h-1zm3-11a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1zm0 11a.5.5 0 1 0 0 1h1a.5.5 0 1 0 0-1h-1zm3-11a.5.5 0 1 0 0 1h1a.5.5 0 1 0 0-1h-1zm0 11a.5.5 0 1 0 0 1h1a.5.5 0 1 0 0-1h-1zm3-11a.5.5 0 1 0 0 1h1a.5.5 0 1 0 0-1h-1zm0 11a.5.5 0 1 0 0 1h1a.5.5 0 1 0 0-1h-1zM6 11.066a.5.5 0 0 0 .777.416l4.599-3.064a.5.5 0 0 0 0-.832L6.777 4.52A.5.5 0 0 0 6 4.935v6.131z"/>\n</symbol><symbol id="walk" viewBox="0 0 16 17"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.602 3.663A2 2 0 1 1 8.38.337a2 2 0 0 1 2.222 3.326Zm-.121 3.73a2.55 2.55 0 0 0 1.51.607 1 1 0 1 1 0 2 4.071 4.071 0 0 1-3-1.29l-.69 1.58 2.33 1.94a1 1 0 0 1 .36.77v2a1 1 0 0 1-2 0v-1.53l-2.58-2.12-1.48 4a1.003 1.003 0 1 1-1.88-.7L5.87 7l-1.12.32-.82 2a1 1 0 1 1-1.86-.74l1-2.5a1 1 0 0 1 .66-.59l3.36-1h.12c.11-.014.22-.014.33 0h.1a2.16 2.16 0 0 1 2 1.51 2.56 2.56 0 0 0 .84 1.394Z"/></symbol><symbol id="wallet-add" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 0h11a1 1 0 0 1 1 1v3h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm1 2a1 1 0 1 0 0 2h9V2H3zm4 4v3H4v2h3v3h2v-3h3V9H9V6H7z"/>\n</symbol><symbol id="wallet-new" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 0h11a1 1 0 0 1 1 1v3h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm1 2a1 1 0 1 0 0 2h9V2H3zm4 4v3H4v2h3v3h2v-3h3V9H9V6H7z"/>\n</symbol><symbol id="wallet" viewBox="0 0 16 16">\n    <path fill-rule="evenodd" d="M2 0h11a1 1 0 0 1 1 1v3h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm1 2a1 1 0 1 0 0 2h9V2H3zm8 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>\n</symbol><symbol id="warning-circle" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0a8 8 0 110 16A8 8 0 018 0zm0 9.75a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5zM8 4a1 1 0 00-.993.883L7 5v3a1 1 0 001.993.117L9 8V5a1 1 0 00-1-1z"/></symbol><symbol id="warning" viewBox="0 0 16 16">\n  <g fill-rule="evenodd" transform="translate(-288 -128)">\n    <path d="M295.021699,129.735659 C295.564898,128.777255 296.450192,128.78566 296.988422,129.735659 L303.52045,141.26497 C304.063442,142.223374 303.613566,143.000315 302.503518,143.000315 L289.50373,143.000315 C288.399102,143.000315 287.948739,142.214969 288.487174,141.26497 L295.021699,129.735659 Z M295.003624,141.000315 C295.003624,140.44803 295.447489,140.000315 296.003624,140.000315 C296.555909,140.000315 297.003624,140.444179 297.003624,141.000315 C297.003624,141.552599 296.559759,142.000315 296.003624,142.000315 C295.45134,142.000315 295.003624,141.55645 295.003624,141.000315 Z M295.003624,133.003244 C295.003624,132.449341 295.447489,132.000315 296.003624,132.000315 C296.555909,132.000315 297.003624,132.438196 297.003624,133.003244 L297.003624,137.997385 C297.003624,138.551288 296.559759,139.000315 296.003624,139.000315 C295.45134,139.000315 295.003624,138.562433 295.003624,137.997385 L295.003624,133.003244 Z"/>\n  </g>\n</symbol><symbol id="warn" viewBox="0 0 48 48"><path fill-rule="evenodd" d="M24,48 C37.254834,48 48,37.254834 48,24 C48,10.745166 37.254834,0 24,0 C10.745166,0 0,10.745166 0,24 C0,37.254834 10.745166,48 24,48 Z M22.4965402,13.1030164 C23.3271937,11.6654101 24.6721035,11.6623183 25.5044703,13.1030164 L35.4961011,30.3969836 C36.3266815,31.8345899 35.6568766,33 33.9920699,33 L14.0079301,33 C12.3466962,33 11.6715912,31.8376817 12.5040311,30.3969836 L22.4965402,13.1030164 Z M22.5792265,18.4260768 C22.5354709,17.6384763 23.1362228,17 23.9297104,17 L24.0702896,17 C24.8598969,17 25.464841,17.6328625 25.4207735,18.4260768 L25.0554191,25.0024554 C25.024812,25.553384 24.5561352,26 24,26 C23.4477153,26 22.9752049,25.5536886 22.9445809,25.0024554 L22.5792265,18.4260768 Z M22.5,29 C22.5,28.1715729 23.1657972,27.5 24,27.5 C24.8284271,27.5 25.5,28.1657972 25.5,29 C25.5,29.8284271 24.8342028,30.5 24,30.5 C23.1715729,30.5 22.5,29.8342028 22.5,29 Z"/></symbol><symbol id="water" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.804 3.718C10.076 2.696 9.332 1.627 8.76.511A.93.93 0 0 0 7.938 0a.903.903 0 0 0-.821.511c-.558 1.1-1.27 2.138-1.952 3.145C3.785 5.655 2.5 7.53 2.5 9.621c0 3.238 2.277 5.578 5.423 5.578 3.176 0 5.577-2.402 5.577-5.578 0-2.076-1.317-3.935-2.696-5.903Z"/></symbol><symbol id="work" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 4h2c1.11 0 2 .89 2 2v7c0 1.11-.89 2-2 2H2c-1.11 0-2-.89-2-2l.01-7C.01 4.89.89 4 2 4h2V2c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2ZM6 4h4V2H6v2Zm1 4a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2H7Z"/></symbol><symbol id="wrench-circle" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0a8 8 0 110 16A8 8 0 018 0zm1.91 4.182a4.052 4.052 0 00-4.636-.773l2.262 2.262.072.086a.62.62 0 01-.072.793l-.99.99-.078.068a.61.61 0 01-.801-.067L3.404 5.279l-.09.199a4.05 4.05 0 00.87 4.43 4.055 4.055 0 004.293.923l2.422 2.423a6.029 6.029 0 002.326-2.302l-2.41-2.414.072-.2a4.054 4.054 0 00-.976-4.156z"/></symbol></svg>'},32419:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m},iconPropType:function(){return v}});var r=n(17508),a=n(16019),i=n(77354),o=n(94184),s=n.n(o),c=n(45697),u=n.n(c),l=n(67294),d=["icon","width","height","color","style","className","preserveColor","rotate","size","spin"],f={"icon--spin":"styles__icon--spin___ybfC1",spin:"styles__spin___2Vvw3",icon:"styles__icon___23x3R","icon--preserveColor":"styles__icon--preserveColor___3gBz6",shake:"styles__shake___wT_3z"};function p(e){return e instanceof Function}function h(e){var t,n,o=e.icon,c=e.width,u=e.height,v=e.color,m=e.style,y=e.className,g=e.preserveColor,b=e.rotate,w=e.size,k=e.spin,x=(0,i.Z)(e,d);if(!o)return null;var O=o.type===h,C="img"===o.type;if(O||C)return o;if("string"==typeof o&&o.includes(".png"))return l.createElement("img",(0,a.Z)({src:o,className:y,style:m,width:c||w||"16",height:u||w||"16"},x));var S=p(o)?o:(n=(t=o).id?"#".concat(t.id):"#"===t[0]?t:"#"+t)?function(e){return l.createElement("svg",e,l.createElement("use",{xlinkHref:n}))}:(console.warn("Icon not found ".concat(t,".")),null),E=m;E=Object.assign({},E),v&&(E.fill=v),b&&(E.transform="rotate(".concat(b,"deg)"));var P=s()(y,f[g?"icon--preserveColor":"icon"],(0,r.Z)({},f["icon--spin"],k));return S?l.createElement(S,(0,a.Z)({className:P,style:E,width:c||w||"16",height:u||w||"16"},x)):null}h.isProperIcon=function(e){var t=e&&!!e.id,n="string"==typeof e,r=p(e);return t||n||r};var v=u().oneOfType([u().string,u().object,u().func]);h.propTypes={icon:v,width:u().oneOfType([u().string,u().number]),height:u().oneOfType([u().string,u().number]),color:u().oneOfType([u().string,u().object]),style:u().object,className:u().string,preserveColor:u().bool,size:u().oneOfType([u().string,u().number]),rotate:u().number,spin:u().bool},h.defaultProps={spin:!1};let m=h},9047:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(16019),a=n(77354),i=n(17812),o=n(94184),s=n.n(o),c=n(45697),u=n.n(c),l=n(67294),d=["size","className","children","color"],f=["default","inherit","primary","secondary"],p=(0,l.forwardRef)(function(e,t){var n=e.size,o=e.className,c=e.children,u=e.color,p=(0,a.Z)(e,d),h=f.includes(u)?u:"default";return l.createElement(i.Z,(0,r.Z)({ref:t,className:s()(o,void 0===n?"large":n,{"cozyStyles-error":"error"===u}),color:h},p),c)});p.displayName="IconButton",p.propTypes={className:u().string,color:u().oneOf(["default","inherit","primary","secondary","error"]),size:u().oneOf(["small","medium","large"])};let h=p},74841:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M13.993 13H2.007A1.001 1.001 0 112 11V9c0-2.45 1.333-5.566 4-6.627v-.379C6 .893 6.888 0 8 0c1.105 0 2 .895 2 1.994v.38C12.667 3.433 14 6.55 14 9v2c.552 0 1 .444 1 1 0 .552-.45 1-1.007 1zM6 14h4v.006A1.992 1.992 0 018 16c-1.105 0-2-.895-2-1.994V14z"}))}},52747:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 24 24"},e),a.createElement("path",{d:"M3.968 6.175a1.571 1.571 0 00-2.222 2.222l9.429 9.428a1.571 1.571 0 002.222 0l9.428-9.428a1.571 1.571 0 00-2.222-2.222l-8.317 8.317-8.318-8.317z",fillRule:"evenodd"}))}},70809:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M13 1h3v2H0V1h3V0h2v1h6V0h2v1zM0 4h16v10.998A1 1 0 0115 16H1c-.552 0-1-.456-1-1.002V4zm2 2v8h12V6H2zm6 3h5v4H8V9z"}))}},65786:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M5.58 1.38a2.8 2.8 0 014.83-.02l.1.18.03.06h.07a2.8 2.8 0 012.93 2.29l.02.17.02.17a2.8 2.8 0 01-.36 1.54l-.1.17-.04.06.13.22a2.8 2.8 0 01-.6 3.5l-.14.12-.15.1c-.4.26-.85.42-1.32.46v5.3a.3.3 0 01-.48.23L8 14l-2.52 1.93a.3.3 0 01-.48-.24v-5.3a2.8 2.8 0 01-2.53-2.27l-.03-.18-.02-.17a2.8 2.8 0 01.36-1.53l.1-.18.04-.06-.04-.06a2.8 2.8 0 01.5-3.66l.15-.12.15-.1c.45-.3.97-.46 1.5-.47h.2l.08.01.12-.22zm2.78.7a.8.8 0 00-1.02.26l-.06.1-.62 1.24-1.4-.08a.8.8 0 00-.76 1.14l.05.1L5.32 6l-.77 1.16a.8.8 0 00.62 1.24h.1l1.39-.08.62 1.25a.8.8 0 00.6.43h.25a.8.8 0 00.53-.33l.06-.1.62-1.25 1.4.08a.8.8 0 00.76-1.14l-.05-.1L10.68 6l.77-1.16a.8.8 0 00-.62-1.24h-.1l-1.39.08-.62-1.25a.8.8 0 00-.36-.36z"}))}},19322:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M1.707 10.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l11-11a1 1 0 00-1.414-1.414L4 12.586l-2.293-2.293z"}))}},77992:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 160 160"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#93BEF8",d:"M61.763 130.593l-3.174 7.933h59.045-.003c23.356 0 42.369-19.126 42.369-42.634 0-22.218-16.977-40.52-38.56-42.467a42.494 42.494 0 00-12.426-25.27 42.873 42.873 0 00-4.68-3.992l-3.156 7.892c7.203 6.153 11.888 15.26 12.12 25.41.055 2.478 2.056 4.446 4.499 4.446h.34c18.71 0 33.93 15.405 33.93 34.338 0 18.936-15.22 34.34-33.93 34.34h-.324l-.01.004h-56.04zm39.415-106.538l3.157-7.892C97.128 10.86 88.462 8 79.387 8 68.245 8 57.724 12.311 49.76 20.158c-6.974 6.868-11.308 15.77-12.438 25.4-9.568 1.135-18.411 5.5-25.239 12.514C4.29 66.086 0 76.677 0 87.89c0 23.511 19 42.637 42.366 42.637H58.59l3.174-7.933H42.537c-.097-.007-.194-.007-.292-.007l-.107.007h-.275c-18.71 0-33.93-15.405-33.93-34.341 0-18.507 14.863-33.905 33.132-34.331 2.406-.056 4.343-2.017 4.398-4.45.419-18.494 15.638-33.538 33.92-33.538 8.248 0 15.873 3.062 21.795 8.122z"}),a.createElement("path",{stroke:"#297EF1",strokeLinecap:"round",strokeWidth:8,d:"M50 156L110 4"})))}},79580:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 18 16"},e),a.createElement("path",{d:"M3.297 4.297a5.002 5.002 0 019.406 0 5.008 5.008 0 013.213 3.787 5.027 5.027 0 00-2.045.044A3.001 3.001 0 0011 6a3 3 0 00-6 0 3 3 0 100 6h5.1a5.022 5.022 0 000 2H5a5 5 0 01-1.703-9.703zM14 11a1 1 0 112 0v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1z"}))}},29712:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M10 0v16H0V0h10zM4 12v-2H2v2h2zm0-4V6H2v2h2zm0-4V2H2v2h2zm4 0V2H6v2h2zm0 4V6H6v2h2zm0 4v-2H6v2h2zm3-8h5v12h-5V4zm3.5 8v-2h-2v2h2zm0-4V6h-2v2h2z"}))}},9603:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M12.5 4h-3a.5.5 0 010-1h3a.5.5 0 010 1zm0 3h-3a.5.5 0 010-1h3a.5.5 0 010 1zm0 3h-9a.5.5 0 010-1h9a.5.5 0 010 1zm0 3h-9a.5.5 0 010-1h9a.5.5 0 010 1zM3 5V2h4v6L5 6 3 8V5zm11-5H2c-.55 0-1 .45-1 1v14c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1z"}))}},83631:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 0a2 2 0 012 2v8a2 2 0 01-2 2h-2v2a2 2 0 01-2 2H3a2 2 0 01-2-2V6a2 2 0 012-2h2V2a2 2 0 012-2h7zm-4 6H3v8h7V6zm4-4H7v2h3a2 2 0 012 2v4h2V2z"}))}},91432:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 24 24"},e),a.createElement("path",{fillRule:"evenodd",d:"M10.586 12L.293 1.707A1 1 0 011.707.293L12 10.586 22.293.293a1 1 0 011.414 1.414L13.414 12l10.293 10.293a1 1 0 01-1.414 1.414L12 13.414 1.707 23.707a1 1 0 01-1.414-1.414L10.586 12z"}))}},42725:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M2 10a2 2 0 100-4 2 2 0 000 4zm12 0a2 2 0 100-4 2 2 0 000 4zm-6 0a2 2 0 100-4 2 2 0 000 4z"}))}},27108:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M7 9.586L5.707 8.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L9 9.586V2a1 1 0 10-2 0v7.586zM1 14h14a1 1 0 110 2H1a1 1 0 110-2z"}))}},88415:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M0 8c0-4.416 3.584-8 8-8s8 3.584 8 8-3.584 8-8 8-8-3.584-8-8zm6.293 2.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 00-1.414 1.414L8.586 8l-2.293 2.293z"}))}},56107:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M0 2.999A.998.998 0 011 2h14c.552 0 1 .443 1 .999V5L8 8 0 5V2.999zM0 7l8 3 8-3v7.003c0 .55-.445.997-1 .997H1c-.552 0-1-.453-1-.997V7z"}))}},17699:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M14.684 2.904C13.518 1.232 12 0 9.316 0 6.192 0 3.948 2.134 3.068 5.104H1v1.87h1.716c-.044.33-.044.682-.044 1.012 0 .286 0 .572.022.836H1v1.892h2.002c.858 3.124 3.146 5.214 6.402 5.214 2.508 0 4.07-1.276 5.324-3.102l-1.936-1.43c-1.012 1.342-1.892 2.112-3.366 2.112-1.716 0-2.97-1.056-3.586-2.794h4.752V8.822h-5.17C5.4 8.536 5.4 8.25 5.4 7.942c0-.33 0-.66.044-.968h5.148v-1.87h-4.73C6.478 3.454 7.688 2.42 9.25 2.42c1.54 0 2.442.704 3.388 2.002l2.046-1.518z"}))}},90736:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 20 20"},e),a.createElement("path",{fillRule:"evenodd",d:"M1 10s3-6 9-6 9 6 9 6-3 6-9 6-9-6-9-6zm9 4a4 4 0 100-8 4 4 0 000 8zm0-2a2 2 0 100-4 2 2 0 000 4z"}))}},6197:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 20 20"},e),a.createElement("g",{fillRule:"evenodd"},a.createElement("path",{d:"M1 10s3-6 9-6 9 6 9 6-3 6-9 6-9-6-9-6zm9 4a4 4 0 100-8 4 4 0 000 8zm0-2a2 2 0 100-4 2 2 0 000 4zm-7 5L17 4"}),a.createElement("path",{d:"M16.32 3.267c.966-.832 2.311.514 1.36 1.466l-14 13c-.992.854-2.31-.516-1.36-1.466l14-13z",fillRule:"nonzero"})))}},93460:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("defs",null,a.createElement("path",{id:"file_svg__a",d:"M1 1c0-.552.446-1 .998-1H10v5h5v10.004a1 1 0 01-1.007.996H2.007A1.002 1.002 0 011 15V1zm10 3V0l4 4h-4z"})),a.createElement("use",{xlinkHref:"#file_svg__a",fillRule:"evenodd"}))}},65600:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M13 5h-3V2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h8c.55 0 1-.45 1-1V5zm2-.999v11.003a1 1 0 01-1.007.996H2.007A1.001 1.001 0 011 14.999V1.001A.999.999 0 011.998 0H11l4 4.001z"}))}},40870:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)"},a.createElement("rect",{width:30,height:30,fill:"#ACF6F7",rx:2}),a.createElement("path",{fill:"#0CCBD0",d:"M8 19.998a2 2 0 00-.002 4H9c1.657 0 3-1.35 3-2.997v-7.679a.63.63 0 01.492-.601l6.016-1.129c.272-.05.492.124.492.418v5.478c0 .282-.215.51-.49.51H17c-1.105 0-2 .904-2 1.997v-.179a2 2 0 001.998 1.997H18c1.657 0 3-1.349 3-2.993V7c0-.554-.445-.921-.976-.825L10.976 7.82C10.437 7.918 10 8.454 10 9v10.498c0 .276-.215.5-.49.5H8z"})))}},97082:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#D1D5DB",d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z"}),a.createElement("path",{fill:"#A3ACB8",d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5z"}),a.createElement("path",{fill:"#4F5B69",d:"M7 15.568c0-.597.06-1.12.178-1.568.118-.449.285-.82.5-1.115a2.11 2.11 0 01.772-.664c.3-.147.633-.221 1.001-.221.786 0 1.391.29 1.815.87.424.58.636 1.479.636 2.698 0 .602-.059 1.128-.177 1.577-.119.449-.286.822-.501 1.12a2.084 2.084 0 01-.776.669 2.265 2.265 0 01-1.006.22c-.792 0-1.397-.306-1.815-.918C7.209 17.623 7 16.734 7 15.568zm3.705 0a9.152 9.152 0 00-.019-.58l-2.292 2.191c.193.597.546.895 1.057.895.4 0 .708-.2.926-.6.219-.4.328-1.035.328-1.906zm-2.507 0a7.965 7.965 0 00.018.55l2.283-2.192c-.187-.563-.54-.845-1.057-.845-.4 0-.707.202-.922.605-.215.402-.322 1.03-.322 1.882zm5.35 0c0-.597.06-1.12.179-1.568.118-.449.285-.82.5-1.115a2.11 2.11 0 01.772-.664c.3-.147.633-.221 1.001-.221.786 0 1.39.29 1.815.87.424.58.636 1.479.636 2.698 0 .602-.06 1.128-.178 1.577-.118.449-.285.822-.5 1.12a2.08 2.08 0 01-.777.669 2.265 2.265 0 01-1.005.22c-.792 0-1.397-.306-1.815-.918-.418-.613-.627-1.502-.627-2.668zm3.706 0a9.153 9.153 0 00-.02-.58l-2.291 2.191c.193.597.546.895 1.057.895.4 0 .708-.2.926-.6.218-.4.328-1.035.328-1.906zm-2.508 0a7.965 7.965 0 00.02.55l2.282-2.192c-.187-.563-.54-.845-1.057-.845-.4 0-.707.202-.922.605-.215.402-.323 1.03-.323 1.882zm5.988 2.368h1.431v-4.295l-1.235.993-.561-.786 2.133-1.71h.823v5.798h1.404v1.081h-3.995v-1.08zM7 24.413c0-.596.06-1.119.178-1.568.118-.449.285-.82.5-1.115a2.11 2.11 0 01.772-.664c.3-.147.633-.22 1.001-.22.786 0 1.391.29 1.815.869.424.58.636 1.48.636 2.698 0 .603-.059 1.128-.177 1.577-.119.449-.286.822-.501 1.12a2.075 2.075 0 01-.776.669A2.265 2.265 0 019.442 28c-.792 0-1.397-.306-1.815-.919C7.209 26.468 7 25.58 7 24.413zm3.705 0a9.152 9.152 0 00-.019-.58l-2.292 2.192c.193.596.546.894 1.057.894.4 0 .708-.2.926-.6.219-.4.328-1.035.328-1.906zm-2.507 0a7.965 7.965 0 00.018.55l2.283-2.192c-.187-.563-.54-.845-1.057-.845-.4 0-.707.202-.922.605-.215.403-.322 1.03-.322 1.882zm5.987 2.368h1.431v-4.295l-1.235.993-.56-.786 2.132-1.71h.824v5.798h1.403v1.081h-3.995v-1.08zm5.913-2.368c0-.596.059-1.119.177-1.568.119-.449.286-.82.501-1.115.215-.295.472-.516.772-.664.3-.147.633-.22 1-.22.787 0 1.392.29 1.816.869.424.58.636 1.48.636 2.698 0 .603-.06 1.128-.178 1.577-.118.449-.285.822-.5 1.12a2.07 2.07 0 01-.777.669A2.265 2.265 0 0122.54 28c-.793 0-1.398-.306-1.815-.919-.418-.613-.627-1.502-.627-2.668zm3.704 0a9.152 9.152 0 00-.018-.58l-2.292 2.192c.193.596.545.894 1.057.894.399 0 .708-.2.926-.6.218-.4.327-1.035.327-1.906zm-2.507 0a7.965 7.965 0 00.019.55l2.283-2.192c-.187-.563-.54-.845-1.057-.845-.4 0-.707.202-.922.605-.215.403-.323 1.03-.323 1.882z"})))}},5193:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#E6D5FF",d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z"}),a.createElement("path",{fill:"#9C59FF",d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5z"}),a.createElement("g",{stroke:"#9C59FF",strokeWidth:2},a.createElement("path",{strokeLinejoin:"round",d:"M12 22l-4-4 4-4m8 8l4-4-4-4"}),a.createElement("path",{d:"M14 25l4-14"}))))}},6327:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#D1D5DB",d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z"}),a.createElement("path",{fill:"#A3ACB8",d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5z"})))}},53770:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("path",{d:"M2 2a2 2 0 012-2h22a2 2 0 012 2v28a2 2 0 01-2 2H4a2 2 0 01-2-2z",fill:"#acf5f7",fillRule:"evenodd"}),a.createElement("path",{d:"M8 8h14v2H8zm0 4h8v2H8zm0 4h14v2H8zm0 4h10v2H8zM1.5 4h2A1.54 1.54 0 015 5.5 1.54 1.54 0 013.5 7h-2A1.54 1.54 0 010 5.5 1.54 1.54 0 011.5 4zm0 7h2A1.54 1.54 0 015 12.5 1.54 1.54 0 013.5 14h-2A1.54 1.54 0 010 12.5 1.54 1.54 0 011.5 11zm0 7h2A1.54 1.54 0 015 19.5 1.54 1.54 0 013.5 21h-2A1.54 1.54 0 010 19.5 1.54 1.54 0 011.5 18zm0 7h2A1.54 1.54 0 015 26.5 1.54 1.54 0 013.5 28h-2A1.54 1.54 0 010 26.5 1.54 1.54 0 011.5 25zm29.9-6.6l-2.8-2.8a2 2 0 012.8 2.8zm-.7.7L20.8 29l-2.5.9a1 1 0 01-1.3-.6.85.85 0 010-.7l.9-2.5 9.9-9.9z",fill:"#0dcbcf",fillRule:"evenodd"}))}},13631:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#FCD0D5",d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z"}),a.createElement("path",{fill:"#F1132D",d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5zM9 11h14v2H9v-2zm0 4h12v2H9v-2zm.066 4.784h1.904c.283 0 .548.028.796.084.248.056.464.15.648.28.184.13.33.304.436.52.107.216.16.481.16.796 0 .304-.055.568-.164.792a1.54 1.54 0 01-.444.552 1.89 1.89 0 01-.648.32 2.87 2.87 0 01-.784.104h-.728V25H9.066v-5.216zm1.832 2.512c.64 0 .96-.277.96-.832 0-.272-.081-.464-.244-.576-.163-.112-.401-.168-.716-.168h-.656v1.576h.656zm3.016-2.512h1.472c.4 0 .76.05 1.08.152.32.101.595.257.824.468.23.21.405.479.528.804.123.325.184.712.184 1.16 0 .448-.061.837-.184 1.168-.123.33-.296.604-.52.82a2.137 2.137 0 01-.804.484c-.312.107-.66.16-1.044.16h-1.536v-5.216zm1.4 4.264c.224 0 .427-.03.608-.088.181-.059.336-.153.464-.284a1.33 1.33 0 00.3-.516 2.5 2.5 0 00.108-.792c0-.31-.036-.57-.108-.78a1.263 1.263 0 00-.3-.504 1.092 1.092 0 00-.464-.268 2.152 2.152 0 00-.608-.08h-.224v3.312h.224zm3.68-4.264h3.288v.992H20.17v1.208h1.808v.992H20.17V25h-1.176v-5.216z"})))}},22788:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#9FE6A2",d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z"}),a.createElement("path",{fill:"#0FC016",d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5zM8 9h4v2H8V9zm0-4h4v2H8V5zm0 8h4v2H8v-2zm0 4h4v2H8v-2zm0 4h4v2H8v-2zm0 4h4v2H8v-2zm6-16h4v2h-4V9zm0-4h4v2h-4V5zm0 8h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2zm6-12h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2z"})))}},81115:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z",fill:"#FFDEC1"}),a.createElement("path",{d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5zM22.996 24v2h-10v-2h10zM11 24v2H9v-2h2zm11.996-4v2h-10v-2h10zM11 20v2H9v-2h2zm5-10v4h4a4 4 0 11-4-4zm1-1c2 0 4 2 4 4h-4V9z",fill:"#FF9433"})))}},92026:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#B2D3FF",d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z"}),a.createElement("path",{fill:"#197BFF",d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5zM9 11h14v2H9v-2zm0 4h12v2H9v-2zm0 4h14v2H9v-2zm0 4h10v2H9v-2z"})))}},5507:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(3)"},a.createElement("rect",{width:26,height:32,fill:"#D1D5DB",rx:2}),a.createElement("path",{fill:"#4F5B69",d:"M11 1h2v2h-2V1zm0 4h2v2h-2V5zm0 4h2v2h-2V9zm2-6h2v2h-2V3zm0 4h2v2h-2V7zm-2 5h4v7h-4v-7zm1 1h2v2h-2v-2z"})))}},35039:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M0 2.007C0 1.45.451 1 .99 1h4.52c.271 0 .648.157.84.348l1.303 1.304c.192.192.579.348.848.348h6.503c.55 0 .997.456.997 1.002v8.99A2.005 2.005 0 0114.006 15H1.994A2 2 0 010 12.994V2.007zM0 5h16v1H0V5z",fillRule:"evenodd"}))}},68437:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M3.11 4.523a6 6 0 008.367 8.367L3.109 4.524zM4.522 3.11l8.368 8.368A6 6 0 004.524 3.11zM8 16A8 8 0 118 0a8 8 0 010 16z"}))}},20240:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M7.889 13.999L7 10 6 9 4 6l-.355-2.128A6 6 0 007.888 14zm.238-11.998L10 3.5V5L8 6.5l-1.5 1 .5 1 3 .5 1 1v1.5l-1.549 2.323A6 6 0 008.127 2.001zM8 16A8 8 0 118 0a8 8 0 010 16z"}))}},47629:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 17 17"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.002 4.5H2v8h8.002l4-4-4-4zm0-2H2a2 2 0 00-2 2v8a2 2 0 002 2h8.002a2 2 0 001.414-.586l4-4a2 2 0 000-2.828l-4-4a2 2 0 00-1.414-.586z"}))}},50179:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M4.977 12.513s.103-1.083-.956-2.022a6 6 0 117.99-.028c-.674.605-.907 2.05-.907 2.05a.635.635 0 01-.595.487H5.491a.524.524 0 01-.514-.487zM11 14l-1.652 1.652a1.355 1.355 0 01-.853.348h-.99c-.279 0-.662-.157-.853-.348L5 14h6zm1-8a4 4 0 00-4-4 1 1 0 100 2 2 2 0 012 2 1 1 0 002 0z"}))}},40354:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M9.259 4.045a1.043 1.043 0 11-1.475-1.474L9.44.915a3.126 3.126 0 014.417-.002l1.23 1.23a3.126 3.126 0 01-.007 4.422l-3.612 3.612c-1.6 1.6-4.244 1.65-5.77.124a1.043 1.043 0 111.475-1.474c.699.698 2.023.673 2.82-.125l3.613-3.612a1.04 1.04 0 00.006-1.473l-1.23-1.23a1.04 1.04 0 00-1.468.003L9.26 4.045zm-2.518 7.91a1.043 1.043 0 011.475 1.474L6.56 15.085a3.126 3.126 0 01-4.417.002l-1.23-1.23a3.126 3.126 0 01.006-4.422l3.613-3.612c1.6-1.6 4.243-1.65 5.77-.124a1.043 1.043 0 01-1.475 1.474c-.7-.698-2.023-.673-2.82.125L2.393 10.91a1.04 1.04 0 00-.007 1.473l1.23 1.23a1.04 1.04 0 001.469-.003l1.655-1.655z"}))}},28558:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 12V4h-.452l-.117.024-2.73 1.177v1.883l1.323-.54V12H4zm11.245-7.363C14.8 4.21 14.192 4 13.44 4c-.437 0-.84.096-1.204.29a2.155 2.155 0 00-.864.816c-.17.29-.27.61-.298.957l-.021.527h2.08v-.318l.004-.09a.507.507 0 01.11-.28.276.276 0 01.233-.11c.111 0 .184.035.248.116.077.097.12.252.12.472 0 .24-.045.418-.128.54-.05.073-.118.111-.232.123l-.09.005h-.994v1.757h1.021l.08.004c.301.03.434.238.434.742 0 .228-.05.395-.144.512-.08.1-.178.144-.325.144-.108 0-.188-.04-.265-.137a.647.647 0 01-.132-.337l-.023-.431H11v.318l.007.206c.04.607.265 1.116.673 1.513.453.44 1.042.661 1.75.661.751 0 1.374-.22 1.85-.663.48-.446.72-1.04.72-1.762 0-.447-.098-.843-.296-1.182l-.094-.145-.107-.134a1.798 1.798 0 00-.252-.235l-.008-.006.014-.01.128-.133c.082-.092.157-.192.225-.3a2 2 0 00.305-1.07c0-.714-.222-1.296-.67-1.723zm-5.83-.007C8.996 4.208 8.417 4 7.696 4c-.475 0-.907.118-1.289.354a2.37 2.37 0 00-.888.99 2.98 2.98 0 00-.3 1.123L5.2 7.03h2.05v-.322l.004-.157c.015-.25.066-.44.146-.568.077-.122.157-.17.271-.17.096 0 .152.033.204.12.076.127.12.323.12.59 0 .192-.049.397-.148.618-.085.19-.211.41-.378.66L7.331 8 5.33 10.57V12h4.87v-1.815H8.05l.573-.824.185-.226c.417-.519.722-.98.906-1.374.215-.462.323-.923.323-1.38 0-.739-.205-1.328-.623-1.751z"}))}},36329:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M9 0v2h3.5L6 8.5 7.5 10 14 3.5V7h2V1.003A.996.996 0 0014.997 0H9zM7 2V0H1.003A1 1 0 000 1v14c0 .552.445 1 1 1h14c.552 0 1-.438 1-1.003V9h-2v5H2V2h5z",fillRule:"evenodd"}))}},77107:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M8 9c2.21 0 4-2.015 4-4.5S10.21 0 8 0 4 2.015 4 4.5 5.79 9 8 9zm-8 5c0-1 2-4 4-4s1 1 4 1 2-1 4-1 4 3 4 4 0 2-1 2H1c-1 0-1-1-1-2z"}))}},32466:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M3.414 7h11.58C15.548 7 16 7.444 16 8c0 .552-.45 1-1.007 1H3.414l5.293 5.293a1 1 0 01-1.414 1.414l-7-7a1 1 0 010-1.414l7-7a1 1 0 111.414 1.414L3.414 7z",fillRule:"evenodd"}))}},99037:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M9.5 3.5L0 13.025V16h3.038L12.5 6.5l-3-3zM14.912.912A1.995 1.995 0 0012.09.911L11 2l3.03 3 1.062-1.075a2.019 2.019 0 00-.004-2.837l-.176-.176zM7 14h5.997a.999.999 0 11.005 2H5l2-2z"}))}},25735:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M10.054 4.266c-5.39.75-8.705 4.012-10.021 7.685-.184.513.45.912.851.542 2.155-2 5.465-2.93 9.17-2.93v2.496a.5.5 0 00.849.358l4.752-4.634a1.15 1.15 0 00.021-1.626l-4.773-4.655a.5.5 0 00-.849.358v2.406z",fillRule:"evenodd"}))}},47975:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("g",{fillRule:"evenodd"},a.createElement("path",{d:"M1 15h8c4.052 0 7-2.948 7-7s-2.948-7-7-7-7 2.948-7 7a1 1 0 102 0c0-2.948 2.052-5 5-5s5 2.052 5 5-2.052 5-5 5H1a1 1 0 000 2z"}),a.createElement("path",{d:"M1.832 4.445a1 1 0 00-1.664 1.11l2 3a1 1 0 001.387.277l3-2a1 1 0 00-1.11-1.664L3.277 6.613 1.832 4.445z"})))}},73905:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M12.707 7.293l-6-6a.999.999 0 10-1.414 1.414L10.586 8l-5.293 5.293a.999.999 0 101.414 1.414l6-6a.999.999 0 000-1.414"}))}},59639:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M14 0a2 2 0 012 2v11a2 2 0 01-2 2h-1v1h-3v-1H6v1H3v-1H2a2 2 0 01-2-2V2C0 .9.9 0 2 0h12zm0 1H3a1 1 0 00-1 .88V3H1v3h1v3H1v3h1v1a1 1 0 00.88 1H14a1 1 0 001-.88V2a1 1 0 00-.88-1H14zm0 1v11H3v-2H2v-1h1V5H2V4h1V2h11zM8.5 4a3.5 3.5 0 100 7 3.5 3.5 0 000-7zm0 1a2.5 2.5 0 110 5 2.5 2.5 0 010-5zm0 2a.5.5 0 100 1 .5.5 0 000-1z"}))}},94079:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2a2 2 0 012-2h12a2 2 0 012 2v3a2 2 0 01-2 2H2a2 2 0 01-2-2V2zm5 1.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM0 11a2 2 0 012-2h12a2 2 0 012 2v3a2 2 0 01-2 2H2a2 2 0 01-2-2v-3zm5 1.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}))}},53773:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M5.083 10.16a3 3 0 110-4.319l4.94-2.47a3 3 0 11.895 1.789l-4.94 2.47a3.03 3.03 0 010 .74l4.94 2.47a3 3 0 11-.895 1.789l-4.94-2.47z",fillRule:"evenodd"}))}},65719:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M5 6v2H3v6h10V8h-2V6h2a2 2 0 012 2v6a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h2zM8.707.293L11.5 3.086A1 1 0 0110.086 4.5L9 3.414V11a1 1 0 01-2 0V3.414L6 4.5a1 1 0 01-1.414-1.414L7.293.293a1 1 0 011.414 0z",fillRule:"evenodd"}))}},43870:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e,{role:"progressbar","aria-busy":"true"}),a.createElement("path",{opacity:.25,d:"M16 0a16 16 0 000 32 16 16 0 000-32m0 4a12 12 0 010 24 12 12 0 010-24"}),a.createElement("path",{d:"M16 0a16 16 0 0116 16h-4A12 12 0 0016 4z"}))}},58300:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M16 7.2V3c0-.6-.4-1-1-1-.5 0-.8.3-.9.7A8.09 8.09 0 008 0C4.9 0 2 1.8.7 4.6c-.2.5 0 1.1.5 1.3.5.2 1.1 0 1.3-.5C3.5 3.4 5.6 2 8 2c1.5 0 3 .6 4 1.5-.3 0-.6.1-.8.3-.4.4-.3 1.1.1 1.4l3 2.5h.1c.1.1.2.1.3.1h.4c.1 0 .2-.1.3-.1h.1c.1-.1.2-.1.2-.2.2 0 .2-.1.3-.3 0 .1 0 0 0 0m-1.2 2.9c-.5-.2-1.1 0-1.3.5A6 6 0 018 14c-1.5 0-2.9-.6-4-1.5.3 0 .5-.1.7-.4.4-.4.3-1.1-.1-1.4l-3-2.5h-.1L1.3 8h-.1c-.2 0-.5 0-.7.1H.4c-.1.1-.1.2-.2.3-.1.1-.1.2-.2.3V13c0 .6.4 1 1 1 .5 0 .9-.3 1-.8C3.5 14.9 5.6 16 8 16c3.1 0 5.9-1.8 7.3-4.5.2-.5 0-1.1-.5-1.4"}))}},56815:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M11.145 7.75C10.263 7.285 9.647 6.23 9.647 5c0-1.657 1.12-3 2.5-3 1.381 0 2.5 1.343 2.5 3 0 1.231-.618 2.29-1.502 2.752V9l1.105.553c.49.245 1.095.848 1.342 1.342l.106.21c.245.49 0 .895-.55.895H9.142c-.544 0-.797-.4-.55-.895l.106-.21c.245-.49.848-1.095 1.342-1.342L11.145 9V7.75zM4.647 10.8c-1.165-.48-2-1.776-2-3.3 0-1.933 1.343-3.5 3-3.5s3 1.567 3 3.5c0 1.524-.835 2.82-2 3.3V12l2.051.684c.532.177 1.15.717 1.397 1.21l.105.211c.245.49.002.895-.548.895h-8.01c-.539 0-.794-.4-.547-.895l.105-.21c.245-.49.872-1.037 1.397-1.211L4.647 12v-1.2z"}))}},38813:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M5.88 4.655a1.68 1.68 0 00.001-2.377L4.097.492a1.685 1.685 0 00-2.38 0l-.98.979A2.521 2.521 0 00.42 4.646 39.038 39.038 0 0011.356 15.58c.999.662 2.328.53 3.175-.316l.979-.979a1.681 1.681 0 000-2.379l-1.785-1.784a1.679 1.679 0 00-2.379 0l-.594.593A40.017 40.017 0 015.285 5.25l.595-.595z"}))}},61568:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 13a1 1 0 110 2H1a1 1 0 110-2h8zm6-4a1 1 0 110 2H1a1 1 0 110-2h14zm0-4a1 1 0 110 2H1a1 1 0 010-2h14zm0-4a1 1 0 110 2H1a1 1 0 010-2h14z"}))}},21342:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M12.112 5.665a4.132 4.132 0 00-1.239-2.475A4.227 4.227 0 007.918 2c-1.112 0-2.16.422-2.955 1.19-.237.229-.43.487-.603.756l2.847 2.847L9 5v5H4l1.793-1.793-2.452-2.451a4.21 4.21 0 00-2.136 1.148A4.124 4.124 0 000 9.824C0 12.127 1.895 14 4.225 14h7.507c2.33 0 4.227-1.873 4.227-4.176 0-2.176-1.694-3.968-3.847-4.159"}))}},61882:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(16019),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32",fill:"none"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.586 3L10.707.879A3 3 0 0112.828 0h6.344a3 3 0 012.121.879L23.414 3H29a2 2 0 110 4H3a2 2 0 110-4h5.586zm3.535-.707A1 1 0 0112.828 2h6.344a1 1 0 01.707.293l.707.707h-9.172l.707-.707z",fill:"#95999D"}),a.createElement("path",{d:"M4 8a1 1 0 011-1h22a1 1 0 011 1v22a2 2 0 01-2 2H6a2 2 0 01-2-2V8z",fill:"#D6D8DA"}))}},33642:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=n(7397).Z},93045:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>M});var r=n("16019"),a=n("25002"),i=n("77354"),o=n("45697"),s=n.n(o),c=n("67294"),u=n("30910"),l=n("38611"),d=n("46932"),f=n("89526"),p=n("64222"),h=n("26238"),v=n("11998"),m=n("28446"),y=n("17508"),g=n("27361"),b=n.n(g),w=n("16396"),k=n("69898"),x=n("88495");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,y.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S={intentContainer:"styles__intentContainer___gZbMl",intentContainer__error:"styles__intentContainer__error___yQ7K8"},E={closeable:!1,exposeIntentFrameRemoval:!0},P=function(e){(0,h.Z)(i,e);var t,n,a=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,m.Z)(t);return e=n?Reflect.construct(r,arguments,(0,m.Z)(this).constructor):r.apply(this,arguments),(0,v.Z)(this,e)});function i(){var e;(0,d.Z)(this,i);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=a.call.apply(a,[this].concat(n)),(0,y.Z)((0,p.Z)(e),"state",{loading:!1}),(0,y.Z)((0,p.Z)(e),"onFrameLoaded",function(){var t,n;e.setState({loading:!1}),null===(t=e.props.iframeProps)||void 0===t||null===(n=t.setIsLoading)||void 0===n||n.call(t,!1)}),e}return(0,f.Z)(i,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props,r=n.action,a=n.data,i=n.type,o=n.onCancel,s=n.onError,c=n.onTerminate,u=n.client;console.warn("Be carful to use `withBreakpoints()` and not `useBreakpoints()` in intents. See https://github.com/cozy/cozy-ui/issues/1807"),e=this.props.create?this.props.create:new k.Intents({client:u}).create,this.setState({loading:!0}),e(r,i,C(C({},E),a)).start(this.intentViewer,this.onFrameLoaded,this.props.onHideCross,this.props.onShowCross).then(function(e){e?c&&c(e):o()}).catch(function(e){var n,r;null==s||s(e),t.setState({error:e,loading:!1}),null===(n=t.props.iframeProps)||void 0===n||null===(r=n.setIsLoading)||void 0===r||r.call(n,!1)})}},{key:"render",value:function(){var e=this,t=this.props.iframeProps,n=this.state,a=n.error,i=n.loading;return c.createElement("div",(0,r.Z)({ref:function(t){return e.intentViewer=t},className:S.intentContainer,"aria-busy":i},b()(t,"wrapperProps")),i&&c.createElement(x.default,(0,r.Z)({size:"xxlarge"},b()(t,"spinnerProps"))),a&&c.createElement("div",{className:S.intentContainer__error},a.message))}}]),i}(c.Component),_=s().shape({wrapperProps:s().object,spinnerProps:s().object,setIsLoading:s().func});P.propTypes={action:s().string.isRequired,create:s().func,type:s().string.isRequired,data:s().object,onCancel:s().func,onError:s().func,onTerminate:s().func.isRequired,iframeProps:_,onHideCross:s().func,onShowCross:s().func},P.defaultProps={data:{}};let A=(0,w.withClient)(P);var R=["options","action","doctype","children","closable","showCloseButton","create","tag","onComplete","onDismiss","iframeProps","Component"],D=function(e){var t=e.options,n=e.action,o=e.doctype,s=e.children,l=e.closable,d=e.showCloseButton,f=e.create,p=e.tag,h=e.onComplete,v=e.onDismiss,m=e.iframeProps,y=e.Component,g=(0,i.Z)(e,R),b=(0,c.useState)(!1),w=(0,a.Z)(b,2),k=w[0],x=w[1],O=function(){return x(!1)},C=function(){O(),v&&v()},S=[c.cloneElement(s,{key:"opener",onClick:function(e){e.preventDefault(),e.stopPropagation(),x(!0)}})];return k&&S.push(c.createElement(y,(0,r.Z)({key:"intent-modal",open:k,onClose:l&&C},g),l&&d&&c.createElement(u.Z,{onClick:C}),c.createElement(A,{action:n,type:o,data:t,create:f,onCancel:C,onTerminate:function(e){O(),h&&h(e)},iframeProps:m}))),c.createElement(p,null,S)};D.propTypes={children:s().element.isRequired,onComplete:s().func,onDismiss:s().func,action:s().string.isRequired,doctype:s().string.isRequired,closable:s().bool.isRequired,showCloseButton:s().bool.isRequired,tag:s().string.isRequired,Component:s().oneOfType([s().func,s().object]),iframeProps:_},D.defaultProps={tag:"span",closable:!0,Component:l.ZP,showCloseButton:!0};let M=D},25750:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});let r=n(89659).Z},24546:function(e,t,n){"use strict";n.r(t),n.d(t,{BorderedList:function(){return a},default:function(){return i}});var r=n(62822),a=(0,n(68893).Z)({root:{borderTop:"1px solid var(--silver)"}})(r.Z);let i=r.Z},10059:function(e,t,n){"use strict";n.r(t),n.d(t,{LitItemPropTypes:()=>D,default:()=>M});var r=n("16019"),a=n("17508"),i=n("77354"),o=n("50998"),s=n("60988"),c=n("94184"),u=n.n(c),l=n("82492"),d=n.n(l),f=n("45697"),p=n.n(f),h=n("67294"),v=n("41120"),m=function(e){var t,n;return e?(null===(t=e.type)||void 0===t?void 0:t.displayName)||(null===(n=e.type)||void 0===n?void 0:n.name)||"Node":null},y=function(e){var t=h.Children.toArray(e.children);return h.Children.count(t)>0?t:null},g=function(e){var t=y(e);return h.Children.count(t)||null},b=function(e){var t=y(e);if(!t)return null;var n=t[t.length-1];return n.type===h.Fragment?y(n.props)[0]:n},w=["gutters"],k=["gutters"],x=["gutters","ellipsis"],O=["className","gutters","ellipsis","componentElement"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E=(0,v.Z)({gutters:{paddingLeft:function(e){return e.guttersValue.left},paddingRight:function(e){return e.guttersValue.right}},secondaryAction:{paddingRight:function(e){return e.secondaryActionPaddingRight}}}),P=function(e){var t=e.gutters,n=(0,i.Z)(e,w),r=b(n);return r&&(0,s.default)(r,["ListItemSecondaryAction"])?48*g(r.props)+("double"===t?24:8):0},_=function(e){var t=e.gutters,n=(0,i.Z)(e,k),r="double"===t?32:16,a=b(n),o=!!a&&m(a).includes("ListItemIcon");return{left:r,right:o?r-8:r}},A=function(e){var t=e.gutters,n=e.ellipsis,r=(0,i.Z)(e,x),a=y(r),o=g(r);return h.Children.map(a,function(e,r){var a=r===o-1&&(0,s.default)(e,["ListItemSecondaryAction"])||!1,i=m(e).includes("ListItemText");return a&&"double"===t?h.cloneElement(e,{className:"".concat(e.props.className," u-mr-1")}):i?h.cloneElement(e,{ellipsis:n}):e})},R=(0,h.forwardRef)(function(e,t){var n=e.className,a=e.gutters,s=e.ellipsis,c=e.componentElement,l=(0,i.Z)(e,O),f=E({secondaryActionPaddingRight:P(S({gutters:a},l)),guttersValue:_(S({gutters:a},l))}),p=A(S({gutters:a,ellipsis:s},l));return h.createElement(o.Z,(0,r.Z)({},l,{component:c||l.component,ref:t,classes:d()(l.classes,f),className:u()(n,l.size),disableGutters:l.disableGutters||"disabled"===a}),p)});R.displayName="ListItem",R.defaultProps={gutters:"default",size:"medium"};var D={gutters:p().oneOf(["disabled","double","default"]),size:p().oneOf(["small","medium","large"]),ellipsis:p().bool,componentElement:p().elementType};R.propTypes=D;let M=R},96105:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h},largeSize:function(){return f},mediumSize:function(){return d},smallSize:function(){return l}});var r=n(16019),a=n(77354),i=n(46869),o=n(94184),s=n.n(o),c=n(67294),u=["className"],l=16,d=24,f=32,p=(0,c.forwardRef)(function(e,t){var n=e.className,o=(0,a.Z)(e,u);return c.createElement(i.Z,(0,r.Z)({},o,{ref:t,className:s()(n,"cozyListItemIcon")}))});p.displayName="ListItemIcon";let h=p},55392:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});let r=n(81860).Z},11075:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(16019),a=n(77354),i=n(17508),o=n(95757),s=n(94184),c=n.n(s),u=n(51463),l=n.n(u),d=n(67294),f=["primaryText","secondaryText","primaryTextClassName","secondaryTextClassName","primary","secondary","ellipsis"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var h=l()(function(){console.warn('primaryText/primaryTextClassName and secondaryText/secondaryTextClassName are deprecated. Please use directly the primary prop : primary={<span className="u-error">Error</span>} for example.')}),v={variant:"caption"},m=function(e,t,n){return t||n?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({classes:{root:c()(t,n&&"u-db u-ellipsis")}},e):e},y=(0,d.forwardRef)(function(e,t){var n=e.primaryText,i=e.secondaryText,s=e.primaryTextClassName,c=e.secondaryTextClassName,u=e.primary,l=e.secondary,p=e.ellipsis,y=(0,a.Z)(e,f);(0,d.useEffect)(function(){(n||i||s||c)&&h()},[n,i,s,c]);var g=u||n,b=l||i,w=e.primaryTypographyProps,k=e.secondaryTypographyProps;return w=(0,d.useMemo)(function(){return m(w,s,p)},[w,s,p]),k=(0,d.useMemo)(function(){return m(k||v,c,p)},[k,c,p]),d.createElement(o.Z,(0,r.Z)({ref:t,primary:g,secondary:b,primaryTypographyProps:w,secondaryTypographyProps:k},y))});y.displayName="ListItemText",y.defaultProps={ellipsis:!0};let g=y},1756:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(16019),a=n(77354),i=n(94184),o=n.n(i),s=n(45697),c=n.n(s),u=n(67294),l=["text","className","children"],d=u.createElement(u.Fragment,null,"‎"),f=(0,u.forwardRef)(function(e,t){var n=e.text,i=e.className,s=e.children,c=(0,a.Z)(e,l);if(n&&"string"!=typeof n)throw Error('The "text" prop of MidEllipsis can only be a string');if(s&&"string"!=typeof s)throw Error("The children of MidEllipsis can only be a string");var f=n||s,p=Math.round(f.length/2),h=f.substring(0,p),v=f.substring(p,f.length);return u.createElement("div",(0,r.Z)({className:o()("u-midellipsis",i),ref:t},c),u.createElement("span",null,h),u.createElement("span",null,d,v,d))});f.displayName="MidEllipsis",f.propTypes={text:c().string,className:c().string};let p=f},44775:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});let r=n(70541).Z},9758:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});let r=n(79895).Z},33520:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>N});var r,a=n("77354"),i=n("16019"),o=n("45697"),s=n.n(o),c=n("67294"),u=n("34259"),l=n("32419"),d=n("94184"),f=n.n(d),p=n("25002"),h=n("17508");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e,t){var n,r,a,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{!o&&null!=n.return&&n.return()}finally{if(s)throw i}}}}(t);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o.src&&o.dest){var s=o.src,c=o.dest,u=e[s];if(void 0===u)continue;(n=n||function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,h.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e))[c]=e[s],delete n[s],r="`".concat(s,"` is deprecated and has been migrated automatically, you should use `").concat(c,"` now")}else if(o.fn){var l=o.fn(n||e);if(2!==l.length)throw Error("migrateOption `fn` should return [newProps, msg].");var d=(0,p.Z)(l,2);n=d[0],r=d[1]}else console.warn("migrateProps option is not valid, valid properties are `src`, `dest`, `fn`. You passed",o);window.SHOW_DEPRECATION_WARNINGS&&r&&(console.warn("Deprecation: ".concat(r)),r=null)}}catch(e){i.e(e)}finally{i.f()}return n||e},g={"IconStack-wrapper":"styles__IconStack-wrapper___10dhG","IconStack-foregroundIcon":"styles__IconStack-foregroundIcon___ZvY-t"},b=function(e){var t=e.backgroundClassName,n=e.foregroundClassName,r=e.backgroundIcon,a=e.foregroundIcon,i=e.offset;return c.createElement("div",{className:f()(g["IconStack-wrapper"],t)},r,a&&c.createElement("div",{style:{marginTop:null==i?void 0:i.vertical,marginLeft:null==i?void 0:i.horizontal},className:f()(g["IconStack-foregroundIcon"],n)},a))};b.propTypes={backgroundClassName:s().string,foregroundClassName:s().string,backgroundIcon:s().node,foregroundIcon:s().node,offset:s().shape({vertical:s().string,horizontal:s().string})};let w=(r=[{src:"className",dest:"backgroundClassName"},{src:"background",dest:"backgroundIcon"},{src:"foreground",dest:"foregroundIcon"}],function(e){var t=function(t){var n=y(t,r,e);return c.createElement(e,n)};return t.displayName=e.displayName||e.name,t})(b);var k=n("42725"),x=n("56107"),O=n("17699");let C=function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 26 32"},e),c.createElement("g",{fillRule:"evenodd"},c.createElement("path",{d:"M0 2.002C0 .896.89 0 1.997 0H19l7 7v22.996A2 2 0 0124.003 32H1.997A1.995 1.995 0 010 29.998C.048 16 0 16 0 2.002z",opacity:.242}),c.createElement("path",{d:"M18.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5z"})))};var S=n("53770"),E=n("20240"),P=n("77107"),_=n("56815"),A=n("38813"),R=["theme","qualification"];function D(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 26 32"},e),c.createElement("g",{fillRule:"evenodd"},c.createElement("path",{d:"M0 2.002C0 .896.89 0 1.997 0H19l7 7v22.996A2 2 0 0124.003 32H1.997A1.995 1.995 0 010 29.998C.048 16 0 16 0 2.002z",fill:"#ffffff"})))}var M={"bank-check":function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 2a2 2 0 012 2v8a2 2 0 01-2 2H2a2 2 0 01-2-2V4a2 2 0 012-2h12zm0 3H2v7h12V5zm-2 1v1h-.5a1.5 1.5 0 00-1.415 1H12v1h-1.914c.19.54.68.937 1.27.993L11.5 10h.5v1h-.5a2.5 2.5 0 01-.164-4.995L11.5 6h.5zM8 9v1H4V9h4zm0-2v1H4V7h4z"}))},bank:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",d:"M7.979 0L0 5.066v1.966h15.958V5.066L7.979 0zm4 13.063h2v-5h-2v5zm-5 0h2v-5h-2v5zm-5 0h2v-5h-2v5zm-1.979 3h15.958v-2H0v2z"}))},benefit:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.669 1.52A3.99 3.99 0 005.142 3.5H4v2h1.142l.054.19a3.987 3.987 0 006.632 1.639l-1.415-1.415-.125.115A1.995 1.995 0 019 6.5a1.993 1.993 0 01-1.722-1H9v-2H7.278l.085-.134a1.988 1.988 0 013.051-.28l1.414-1.415-.16-.15zM8.986 10c0-.552-.449-1-1.002-1H2.462a2 2 0 00-1.417.586L.629 10a2.142 2.142 0 00-.475 2.313l.974 2.43A2.004 2.004 0 002.988 16H7.41c.376 0 .744-.105 1.062-.304L16 11v-.25c0-.69-.56-1.25-1.252-1.25a4.84 4.84 0 00-2.348.607L8.986 12H4.978v-1h3.006c.553 0 1.002-.448 1.002-1z"}))},bill:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",d:"M13 8a3.99 3.99 0 012.669 1.02l.159.151-1.414 1.415a1.989 1.989 0 00-3.051.28l-.085.134H13v2h-1.722c.347.595.985 1 1.722 1a2 2 0 001.288-.47l.125-.116 1.415 1.415a3.987 3.987 0 01-6.632-1.639L9.142 13H8v-2h1.142A3.99 3.99 0 0113 8zm-8 4a1 1 0 010 2H1a1 1 0 010-2h4zm0-4a1 1 0 010 2H1a1 1 0 010-2h4zm10-8a1 1 0 010 2H1a1 1 0 010-2h14zm0 4a1 1 0 010 2H1a1 1 0 010-2h14z"}))},car:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",d:"M13.92 2.01C13.72 1.42 13.16 1 12.5 1h-9c-.66 0-1.21.42-1.42 1.01L.11 6.68c-.07.21-.11.43-.11.66v6.16c0 .83.67 1.5 1.5 1.5S3 14.33 3 13.5V13h10v.5c0 .82.67 1.5 1.5 1.5.82 0 1.5-.67 1.5-1.5V7.34c0-.22-.04-.45-.11-.66l-1.97-4.67zM3.5 11C2.67 11 2 10.33 2 9.5S2.67 8 3.5 8 5 8.67 5 9.5 4.33 11 3.5 11zm9 0c-.83 0-1.5-.67-1.5-1.5S11.67 8 12.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM2 6l1.27-2.82c.14-.4.52-.68.95-.68h7.56c.43 0 .81.28.95.68L14 6H2z"}))},chess:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.5 13a.5.5 0 01.398.197l.05.079 1 2a.498.498 0 01-.362.717L12.5 16h-10a.501.501 0 01-.483-.628l.036-.096 1-2a.501.501 0 01.355-.267l.092-.01h8zM8.732.023c.2-.061.3 0 .28.18-.117.729.163 1.292.74 1.735l3.973 3.14a.7.7 0 01.106 1.012l-.615.734c-.333.4-.903.51-1.366.27a6.014 6.014 0 01-.57-.322 1.333 1.333 0 00-1.035-.16c-.56.146-1.053.027-1.514-.283l-.137-.1-.3-.241 1.623 2.1c.133.172.282.333.443.48l.308.27.396.363.243.232c.041.04.083.08.124.122.252.25.336.55.363.762l.01.14-.004.129V12H3v-1.957c.02-.703 0-1.39.04-2.096.036-.924.138-1.833.357-2.741.2-.847.454-1.693.974-2.421.447-.64.96-1.106 1.756-1.131h.175c.6.02 1.075-.201 1.375-.805.22-.423.597-.686 1.055-.826z"}))},child:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 0a2.5 2.5 0 110 5 2.5 2.5 0 010-5zm-12 16a1.5 1.5 0 010-3h6a1.5 1.5 0 010 3h-5m8.59-1l-1.4-4H6L1.75 6.75S4 4.25 7.5 4.25c3 0 3.35 1 3.56 1.62L13.92 14c.28.78-.14 1.64-.92 1.92-.78.27-1.64-.14-1.91-.92z"}))},dots:k.default,email:x.Z,euro:O.default,exchange:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 20 20"},e),c.createElement("path",{d:"M4.3 12.5h9.5c.7 0 1.2.6 1.2 1.2s-.6 1.3-1.2 1.3H4.3l1.6 1.6c.5.5.5 1.3 0 1.8s-1.3.5-1.8 0L.3 14.6c-.5-.5-.5-1.3 0-1.8L4.1 9c.5-.5 1.3-.5 1.8 0s.5 1.3 0 1.8l-1.6 1.7zm11.4-5H6.2C5.6 7.5 5 6.9 5 6.2S5.6 5 6.2 5h9.5l-1.6-1.6c-.5-.5-.5-1.3 0-1.8s1.3-.5 1.8 0l3.8 3.8c.5.5.5 1.3 0 1.8L15.9 11c-.5.5-1.3.5-1.8 0s-.5-1.3 0-1.8l1.6-1.7z"}))},"file-type-note":S.Z,fitness:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{d:"M14.982 9.273l.72-.72a.996.996 0 000-1.41l-.02-.02a.996.996 0 00-1.41 0l-2.86 2.86-5.4-5.4 2.86-2.86a.996.996 0 000-1.41l-.02-.02a.996.996 0 00-1.41 0l-.72.72-.72-.72c-.39-.39-1.03-.39-1.42 0l-1.43 1.43-.72-.72a1.02 1.02 0 00-1.43 0 1.02 1.02 0 000 1.43l.72.72-1.43 1.43a.996.996 0 000 1.41l.72.72-.72.73a.996.996 0 000 1.41l.02.02c.39.39 1.02.39 1.41 0l2.86-2.86 5.4 5.4-2.86 2.86a.996.996 0 000 1.41l.02.02c.39.39 1.02.39 1.41 0l.72-.72.72.72c.39.39 1.02.39 1.41 0l1.43-1.43.72.72c.39.39 1.04.39 1.43 0 .39-.39.39-1.04 0-1.43l-.72-.72 1.44-1.43a.996.996 0 000-1.41l-.72-.73z"}))},globe:E.default,gouv:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("g",{clipPath:"url(#gouv_svg__clip0_3250_157)"},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.547 11.767c-.14.185-.278.324-.418.463-.102.102-.295.223-.478.338-.232.144-.449.28-.449.357l-.363.169C1.967 13.497.402 14.22.003 14.5V16H15.2c-.043-.021-.142-.092-.3-.205-.532-.38-1.734-1.236-3.724-2.313a11.965 11.965 0 00-.96-.365c-.21-.072-.364-.125-.384-.145-.14-.093-.232-.603-.047-1.16.01-.026.018-.054.028-.084.038-.124.083-.266.158-.379v-.046a.971.971 0 01.185-.278v-.047c.047 0 .047-.046.047-.046l.046-.046a.722.722 0 01.175-.186c.036-.03.072-.062.103-.092a.676.676 0 01.165-.051c.047-.01.099-.022.16-.042.25 0 .5.05.75.1.168.033.335.067.501.085.047 0 .093 0 .14.047.139 0 .324 0 .463-.047.186-.046.371-.139.464-.37.092-.186.139-.372.046-.557-.13-.163-.009-.257.107-.347a.57.57 0 00.125-.117c.03-.091 0-.143-.037-.207a.64.64 0 01-.056-.117c-.019-.019-.045-.022-.073-.026-.04-.006-.085-.012-.112-.067.185-.093.463-.232.324-.463-.092-.14-.185-.325-.046-.464a.587.587 0 01.203-.066c.122-.025.25-.051.307-.166.11-.221-.043-.443-.18-.64-.036-.051-.07-.1-.098-.148-.062-.124-.124-.206-.186-.288a2.716 2.716 0 01-.133-.19c-.089-.13-.198-.29-.238-.45a.753.753 0 01.017-.333c.015-.074.03-.148.03-.223 0-.37-.093-.741-.186-1.112a1.3 1.3 0 01-.092-.278c-.024-.093-.047-.186-.093-.278a.694.694 0 01-.036-.093.421.421 0 00-.103-.186.14.14 0 010-.185c.092-.046.185-.14.278-.232.093-.139.046-.278-.093-.37-.106-.027-.136.037-.168.106-.025.051-.05.105-.11.125h-.093c0-.046.047-.093.093-.14 0-.045 0-.092-.046-.092a.354.354 0 01-.232-.092c-.232-.325-.603-.51-.974-.65.047 0 .093.012.14.024.046.011.092.023.139.023.185.046.37.046.51-.047.08-.04.125-.182.165-.31l.02-.06c.039-.078-.02-.19-.068-.278l-.025-.047c-.093-.185-.278-.324-.463-.417l-.371-.186C11.269.64 11.315 0 11.315 0H7.04S6.4.32 5.613.872l-.105.051c-.25.124-.52.256-.683.459-.186.232-.371.51-.464.788-.286.164-.465.436-.63.69l-.065.098a6.625 6.625 0 01-.162.271c-.195.315-.384.62-.348.98.039.353.111.672.189 1.014l.043.192c0 .045.004.09.01.136a.877.877 0 01-.01.328c.018.073.022.138.025.2.006.094.011.179.067.263a.686.686 0 01.033.082c.022.062.041.118.106.15v.093c.024 0 .035.011.047.023.011.012.023.023.046.023v.093c.048.06.1.12.152.181.148.174.302.355.405.56.046.186-.232.093-.371.047-.222-.11-.356-.251-.495-.398l-.108-.112s-.046 0-.046.046c.032.066.1.132.165.195.12.116.233.226.113.315-.047.047-.105.035-.163.024-.057-.012-.115-.024-.162.023-.03.03-.02.062-.01.093a.15.15 0 01.01.046.692.692 0 00-.291-.067c-.06-.004-.116-.007-.172-.026-.039-.019-.061-.062-.084-.105-.033-.063-.066-.127-.148-.127a6.564 6.564 0 00-.927-.185l-.245-.03C.998 7.24.655 7.194.282 7.27A.722.722 0 000 7.33v.4c.07-.018.139-.037.205-.056.106-.03.207-.06.308-.08.128-.016.25-.043.371-.07.214-.047.422-.093.645-.074-.323.021-.646.13-.97.237-.121.035-.237.056-.349.077a4.91 4.91 0 00-.21.043v.12c.54.025 1.076.115 1.58.27.185.046.417.139.602.278a.454.454 0 01.116.093c.035.034.07.07.116.092a.45.45 0 00.417.047h.14l.052-.013c.357-.09.747-.186.967-.45 0 .045 0 .045.047.045a1.29 1.29 0 00-.083.245.999.999 0 01-.15.358s0 .047.047.093h.047s-.047 0-.047.046c0 .023.012.023.03.023.017 0 .04 0 .063.024a.42.42 0 00-.325.139c0 .046.047.046.093.046a.223.223 0 01-.07.046.242.242 0 00-.069.047s0 .046.046.046c0 0-.046 0-.046.046v.093c-.046 0-.093.047-.139.093.062.062.124.041.185.02a.3.3 0 01.093-.02c-.139.046-.266.104-.394.162a4.007 4.007 0 01-.394.162c-.023 0-.023.024-.023.047s0 .046-.023.046c.025.025.05.01.081-.01a.196.196 0 01.104-.036c-.114.065-.234.13-.358.198-.228.124-.468.254-.708.405 0 0-.046.046-.046.092h-.093c-.026 0-.038.03-.05.063a.227.227 0 01-.043.076c.072.048.144.022.209-.002.061-.022.117-.043.162.002.046 0-.046.047-.093.047 0 0 0 .046-.046.046h-.278c-.013.012-.025.021-.037.03-.031.023-.056.041-.056.11-.046 0-.093 0-.14.046a8.3 8.3 0 01.362-.023c.419-.02.868-.041 1.262-.256.417-.232.788-.463 1.112-.834 0 0 .047 0 .047.046a1.266 1.266 0 01-.418.556.622.622 0 00-.185.116.622.622 0 01-.186.116c-.046.024-.08.047-.115.07-.035.023-.07.046-.116.07-.356.124-.739.18-1.12.236-.613.09-1.222.18-1.708.552 0-.047 0-.047-.047-.047l-.139.14h.093c.139-.093.278-.14.417-.186L.7 11.72l-.278.14a.64.64 0 00-.186.138v.047c-.046 0-.046.046-.046.046v.046c-.047 0-.047.047-.047.047v.046h.093c.068.034.111-.032.148-.088.013-.02.025-.039.038-.051a.223.223 0 01.07-.046.242.242 0 00.069-.047l-.047.047c0 .046.047.046.047.046a2.55 2.55 0 00-.418.325H.19v.046a.246.246 0 00-.047.07.243.243 0 01-.046.069c-.029 0-.04.018-.055.042a.22.22 0 01-.038.05L0 12.698v.136h.05c.139-.093.278-.232.417-.371h.046c.07-.046.14-.104.209-.162.07-.058.139-.116.209-.163a.64.64 0 00.185-.139l.046-.046c.113-.075.255-.12.38-.158l.084-.027h.046c.14-.024.29-.047.44-.07.151-.023.302-.046.441-.07.186 0 .371 0 .603-.046.11-.027.204-.072.291-.112.06-.028.116-.055.172-.073v.046c.186-.07.348-.185.51-.301.163-.116.325-.232.51-.302.019 0 .037.015.056.03.028.022.056.045.083.017l.081-.066c.206-.17.42-.346.708-.305 0 0 0 .046.046.046-.046.023-.093.058-.14.093a.966.966 0 01-.138.093s0 .046.046.046c.07-.023.116-.058.162-.093a.542.542 0 01.163-.092s0 .046-.047.092c-.046.047-.092.081-.139.116-.046.035-.092.07-.139.116-.216.154-.391.35-.566.546a7.066 7.066 0 01-.268.289zM1.634 7.446c.06 0 .118.002.177.009-.064-.032-.128-.02-.177-.01zm10.55-1.99c-.041-.01-.088-.021-.127-.04-.093-.024-.162-.024-.232-.024s-.139 0-.231-.023a2.36 2.36 0 01-.186.036c-.123.02-.247.041-.37.103.138-.093.277-.186.463-.232.07 0 .127-.023.185-.046a.486.486 0 01.186-.047c.139-.046.278-.092.417-.046.044.015.092.025.14.034.102.022.2.042.23.105.047.186-.092.325-.231.417 0 .024.023.047.046.07.024.023.047.046.047.07 0 .046-.093.092-.14.092-.03 0-.061.041-.092.083a.529.529 0 01-.046.056c.023 0 .023.023.023.047 0 .023 0 .046.023.046-.043.064-.036.147-.03.224.006.089.012.168-.063.193a1.11 1.11 0 01-.556 0 .304.304 0 01.111-.026c.056-.005.111-.01.167-.067v-.046c0-.046 0-.046-.046-.046 0 .046-.047.046-.047.046a.1.1 0 00-.092-.093c-.14.047-.279-.046-.371-.139l.045-.024c.065-.036.11-.06.187-.022.048 0 .058-.038.07-.08.012-.04.024-.083.069-.106h.046c.085-.106.19-.173.283-.233.11-.07.202-.13.227-.23 0-.027-.047-.038-.105-.052z"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 10.039V8.4l.027.004c.07.012.139.024.208.07-.036.036-.066.044-.093.04l.162.047c.686.196 1.358.39 1.925.794-.557.278-1.113.417-1.716.51-.092 0-.139 0-.185-.047 0 .047 0 .093-.046.093-.093 0-.186 0-.232.046a.188.188 0 01-.05.08zm.089-1.542c-.026-.01-.053-.022-.086-.022l.104.03a.668.668 0 01-.018-.008z"}),c.createElement("path",{d:"M.189 11.488a2.37 2.37 0 00-.189.008v-.054a.376.376 0 01.189.046zM0 6.927a.686.686 0 00.138-.121c0 .046 0 .046-.046.093.046.046.046.046.092.046a.712.712 0 01.093-.036.421.421 0 00.185-.103A.929.929 0 000 6.71v.216zm.648 3.495a.22.22 0 00-.039.005c-.046.01-.1.02-.1-.051.034-.102.118-.13.197-.155.028-.01.056-.018.081-.03.046-.047.14-.094.185-.047.028.055.072.061.113.066.028.004.054.008.073.027-.1.133-.224.146-.355.16-.05.006-.103.012-.155.025z"})),c.createElement("defs",null,c.createElement("clipPath",{id:"gouv_svg__clip0_3250_157"},c.createElement("path",{d:"M0 0h16v16H0z"}))))},heart:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",d:"M1.467 8.096a4.023 4.023 0 01-.699-.738L.724 7.31l.007-.006a4 4 0 117.21-2.994 6.685 6.685 0 01.118 0 4.001 4.001 0 117.21 2.995l.005.005-.036.038a4.023 4.023 0 01-.713.753L8 15 1.467 8.096z"}))},home:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",d:"M.416 7.584C-.366 8.366-.105 9 1 9v5.997A.999.999 0 002 16h4v-5h4v5h4c.552 0 1-.438 1-1.003V9c1.105 0 1.367-.633.584-1.416L8 0 .416 7.584z"}))},image:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",d:"M1 1c-.552 0-1 .45-1 1.007v11.986C0 14.55.445 15 1 15h14c.552 0 1-.45 1-1.007V2.007C16 1.45 15.555 1 15 1H1zm4 7l2 2 4-4 3 3v2.99A1.01 1.01 0 0112.998 13H3.002A.999.999 0 012 12v-1l3-3zm.5-2a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"}))},justice:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 0c1.306 0 2.418.835 2.83 2H14a1 1 0 01.139 1.99l1.825 3.824a.499.499 0 01.036.198V8.5a2.5 2.5 0 01-5 0v-.49a.5.5 0 01.036-.196L12.857 4H10.83A3.008 3.008 0 019 5.83V13h6a1 1 0 110 2H1a1 1 0 110-2h6V5.83A3.008 3.008 0 015.17 4H3.144l1.821 3.814A.498.498 0 015 8.012V8.5a2.5 2.5 0 01-5 0v-.49a.498.498 0 01.036-.196l1.826-3.823A1 1 0 012 2h3.17A3.001 3.001 0 018 0zm5.5 5.346L14.935 8h-2.87L13.5 5.346zM1.065 8h2.87L2.5 5.346 1.065 8zM8 4a1 1 0 100-2 1 1 0 000 2z"}))},laudry:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{d:"M10.425 11.475A3.5 3.5 0 015.5 11.5l4.95-4.95a3.5 3.5 0 01-.025 4.925z"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 2a2 2 0 012-2h10a2 2 0 012 2v12a2 2 0 01-2 2H3a2 2 0 01-2-2V2zm3.25 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm2.25.75a.75.75 0 100-1.5.75.75 0 000 1.5zm5.036 2.714a5 5 0 11-7.071 7.071 5 5 0 017.07-7.07z"}))},lightning:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.284.121L2.26 8.404a.982.982 0 00.794 1.56H8l-.814 5.7a.295.295 0 00.53.215l6.024-8.283a.982.982 0 00-.795-1.56H8l.814-5.7a.295.295 0 00-.53-.215z"}))},people:P.default,plane:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.539.461a1.574 1.574 0 00-2.25.023L9.88 4.081 2.025 1.135a.51.51 0 00-.54.117L.15 2.588a.51.51 0 00.108.804l6.561 3.75-3.57 3.57-1.74-.435a.51.51 0 00-.506.158l-.861.98a.51.51 0 00.18.805l2.417 1.042 1.042 2.416a.51.51 0 00.806.181l.979-.861a.51.51 0 00.158-.507l-.435-1.739 3.57-3.57 3.75 6.56a.51.51 0 00.804.108l1.336-1.335a.51.51 0 00.117-.54L11.918 6.12l3.597-3.41c.636-.611.647-1.626.023-2.25z"}))},remboursement:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 0c4.411 0 8 3.589 8 8s-3.589 8-8 8a8.039 8.039 0 01-7.229-4.571 1 1 0 111.806-.858A6.031 6.031 0 008 14c3.309 0 6-2.691 6-6s-2.691-6-6-6c-1.482 0-2.866.571-3.938 1.507a.989.989 0 01.706.353 1 1 0 01-.037 1.322l-.091.086-3 2.5a1 1 0 01-1.634-.655L0 7V3a1 1 0 011-1c.481 0 .865.348.96.801C3.452 1.08 5.636 0 8 0zm1 4a3.99 3.99 0 012.669 1.02l.159.151-1.414 1.415a1.988 1.988 0 00-3.05.28L7.277 7H9v2H7.278c.347.595.985 1 1.722 1a2 2 0 001.288-.47l.125-.116 1.415 1.415a3.987 3.987 0 01-6.632-1.64L5.142 9H4V7h1.142A3.99 3.99 0 019 4z"}))},restaurant:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 0a4 4 0 013.995 3.8L15 4v5a1 1 0 01-.883.993L14 10h-1.5v4.75a1.25 1.25 0 11-2.5 0V1a1 1 0 01.883-.993L11 0zM7 0a1 1 0 01.993.883L8 1v4a3 3 0 01-2.75 2.99v6.76a1.25 1.25 0 11-2.5 0V7.99A3 3 0 01.005 5.176L0 5V1A1 1 0 011.993.883L2 1v4h1V1A1 1 0 014.993.883L5 1v4h1V1a1 1 0 011-1z"}))},school:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 9.102v2.843a.5.5 0 01-.255.435l-4.5 2.532a.5.5 0 01-.49 0l-4.5-2.532A.5.5 0 013 11.945V9.102l4.03 2.155a2.06 2.06 0 001.94 0L13 9.103zM8.16 1.023l.102.042 7.465 3.992a.522.522 0 01.204.194.492.492 0 01-.124.64l-.08.052-7.465 3.992a.56.56 0 01-.423.041l-.101-.041L2 6.867V11a1 1 0 11-2 0V5.5c0-.148.068-.292.192-.39l.08-.053 7.466-3.992a.558.558 0 01.338-.06l.085.019z"}))},shop:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 13a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm8 0a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM2.5 1a1 1 0 01.986.836L3.847 4H14a1 1 0 01.986 1.164l-.86 5.165A2 2 0 0112.153 12H4.847a2 2 0 01-1.973-1.671L1.652 3H1a1 1 0 01-.993-.883L0 2a1 1 0 01.883-.993L1 1h1.5z"}))},team:_.Z,telecom:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 6.04c1.08 0 1.96.878 1.96 1.96 0 1.08-.88 1.96-1.96 1.96S6.04 9.08 6.04 8c0-1.082.88-1.96 1.96-1.96zM8 0C3.59 0 0 3.588 0 8c0 4.41 3.59 8 8 8 1.778 0 3.46-.572 4.865-1.65l.138-.106-1.079-1.404-.137.106A6.167 6.167 0 018 14.228 6.236 6.236 0 011.77 8 6.236 6.236 0 018 1.77 6.236 6.236 0 0114.23 8v.711a1.25 1.25 0 01-2.498 0v-.174h-.04a3.75 3.75 0 00.04-.537V4.98h-1.565A3.688 3.688 0 008 4.268 3.736 3.736 0 004.268 8 3.735 3.735 0 008 11.73c.986 0 1.938-.405 2.642-1.118a3.02 3.02 0 002.338 1.119A3.023 3.023 0 0016 8.71V8c0-4.412-3.59-8-8-8z"}))},telephone:A.Z,water:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.804 3.718C10.076 2.696 9.332 1.627 8.76.511A.93.93 0 007.938 0a.903.903 0 00-.821.511c-.558 1.1-1.27 2.138-1.952 3.145C3.785 5.655 2.5 7.53 2.5 9.621c0 3.238 2.277 5.578 5.423 5.578 3.176 0 5.577-2.402 5.577-5.578 0-2.076-1.317-3.935-2.696-5.903z"}))},work:function(e){return c.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4h2c1.11 0 2 .89 2 2v7c0 1.11-.89 2-2 2H2c-1.11 0-2-.89-2-2l.01-7C.01 4.89.89 4 2 4h2V2c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2zM6 4h4V2H6v2zm1 4a1 1 0 100 2h2a1 1 0 100-2H7z"}))}},T={identity:"people",family:"team",work_study:"work",health:"heart",home:"home",transport:"car",activity:"chess",finance:"bank",invoice:"bill",others:"dots"},j=function(e){var t=e.theme,n=e.qualification,r=(0,a.Z)(e,R),o=n?M[(0,u.getIconByLabel)(n)]:t?M[T[t]]:null;return c.createElement(w,(0,i.Z)({},r,{backgroundIcon:c.createElement(c.Fragment,null,c.createElement(l.default,{className:"u-pos-absolute",icon:D,size:32}),c.createElement(l.default,{icon:C,color:"#E049BF",size:32})),foregroundIcon:c.createElement(l.default,{icon:o,color:"#E049BF",size:16})}))};j.propTypes={qualification:s().string,theme:s().string};let N=j},2182:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>eT});var r=n("11954"),a=n("87757"),i=n.n(a),o=n("45697"),s=n.n(o),c=n("67294"),u=n("16396"),l=n("34259"),d=n("98477"),f=n("48536"),p=n("29444"),h=n("92984"),v=n("32419"),m=n("53770"),y=n("33520"),g=function(e){var t=(0,h.getBoundT)(e);return{children:[{id:"none",title:t("Scan.themes.none"),icon:c.createElement(y.default,null)}].concat((0,d.Z)(f.themesList.map(function(e){return{id:e.id,title:t("Scan.themes.".concat(e.label)),icon:c.createElement(y.default,{theme:e.label}),children:e.items.map(function(e){return{id:e.label,item:e,title:t("Scan.items.".concat(e.label)),icon:(0,p.isQualificationNote)(e)?c.createElement(v.default,{icon:m.Z,size:64}):c.createElement(y.default,{qualification:e.label})}})}})))}},b=function(e){var t=e.options,n=e.title,r=e.noDataLabel,a=e.t;return{placeholderSearch:n||a("QualificationModal.title"),noDataLabel:r||a("QualificationModal.noDataLabel"),onSearch:function(e){var n,r;return n=t,r=e,n.children.flatMap(function(e){return e.children}).reduce(function(e,t){return t&&!e.some(function(e){return e.id===t.id})&&e.push(t),e},[]).filter(function(e){return e.title.toLowerCase().includes(r.toLowerCase())})}}},w={en:{QualificationModal:{title:"Document type",noDataLabel:"No result"}},fr:{QualificationModal:{title:"Type de document",noDataLabel:"Aucun r\xe9sultat"}}},k=n("16019"),x=n("94184"),O=n.n(x),C=n("17508"),S=n("53150"),E=n("25002"),P=n("23279"),_=n.n(P),A=n("57557"),R=n.n(A),D=n("20958"),M=n("73905"),T=n("10059"),j=n("96105"),N=n("11075"),I=n("84827"),L=n("32692"),z=n("89909");function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var B={color:"var(--secondaryTextColor)"},F=function(e){var t=e.item,n=e.onClick,r=e.isSelected,a=e.radioPosition,i=e.isLast,o=e.ellipsis,s=e.noDivider,u=(0,z.default)().isDesktop;return c.createElement(c.Fragment,null,c.createElement(T.default,(0,k.Z)({gutters:u?"double":"default"},!1===o&&{ellipsis:!1},{button:!0,onClick:function(){return n(t)}}),"left"===a&&c.createElement(j.default,null,c.createElement(I.Z,{readOnly:!0,name:t.title,value:t.title,checked:!!r})),t.icon&&c.createElement(j.default,null,t.icon),c.createElement(N.default,{primary:t.title,secondary:t.description}),t.children&&t.children.length>0&&c.createElement(j.default,null,c.createElement(v.default,{icon:M.default,color:"var(--secondaryTextColor)"})),"right"===a&&!(t.children&&t.children.length>0)&&c.createElement("div",{className:"u-flex u-flex-items-center"},!!t.info&&c.createElement(L.default,{style:B,variant:"body2"},t.info),c.createElement(j.default,null,c.createElement(I.Z,{readOnly:!0,edge:"end",name:t.title,value:t.title,checked:!!r}))),"right"===a&&!!t.action&&c.createElement(D.default,{orientation:"vertical",flexItem:!0}),t.action?t.action.Component(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){(0,C.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({item:t},t.action.props)):null),s?null:!i&&c.createElement(D.default,null))};F.propTypes={item:s().object.isRequired,onClick:s().func.isRequired,isSelected:s().bool.isRequired,radioPosition:s().oneOf(["left","right"]),isLast:s().bool,ellipsis:s().bool,noDivider:s().bool};var U=function(e,t){if(!e)return[];var n,r=null!==(n=e.focusedId)&&void 0!==n?n:null;if(!r)return[e];var a=[];return!function e(n){var i;if(null===(i=n.children)||void 0===i?void 0:i.some(function(t){return t.id===r||e(t)})){if(t){var o=n.children.find(function(e){return e.id===r});null!=o&&o.children&&a.push(o)}return a.push(n),!0}return!1}(e),0===a.length&&(console.log("No item found with id",r),a.push(e)),a},V=n("24546"),H=n("77354"),W=n("41256"),q={en:{SearchBar:{placeholder:"Search"}},fr:{SearchBar:{placeholder:"Rechercher"}}};(0,W.Z)(q);let G=n("8477").Z;var K=n("9047");let Q=function(e){return c.createElement("svg",(0,k.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",d:"M8 0a8 8 0 110 16A8 8 0 018 0zM5.707 4.293l-.094-.083a1 1 0 00-1.226 0l-.094.083-.083.094-.07.102a1 1 0 00.062 1.114l.09.104L6.586 8l-2.292 2.293a1 1 0 001.32 1.497l.094-.083L8 9.415l2.293 2.292.094.083a1 1 0 001.226 0l.094-.083.083-.094a1 1 0 000-1.226l-.083-.094L9.415 8l2.292-2.293a1 1 0 00-1.32-1.497l-.094.083L8 6.585 5.707 4.293l-.094-.083.094.083z"}))},Y=n("72129").Z;var J=n("9758"),$=n("62125"),X=n("27507"),ee=n("41120"),et=["placeholder","icon","size","type","label","componentsProps","disabledClear","disabledFocus","className","defaultValue","value","elevation","disabled","onChange","onClear","onFocus","onBlur"];function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach(function(t){(0,C.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ea={small:40,medium:48,large:56,auto:"auto"},ei={small:20,medium:24,large:28,auto:24},eo=(0,ee.Z)(function(e){return{root:{display:"flex",boxSizing:"border-box",position:"relative",alignItems:"center",height:function(e){return ea[e.size]},flex:1,borderRadius:function(e){return ei[e.size]},borderStyle:"solid",borderWidth:1,borderColor:"transparent","&:hover":{"&:not($disabled):not($focused)":{"& $focusHighlight":{opacity:1}}}},flat:{backgroundColor:e.palette.background.contrast},inputBase:{flex:1,paddingLeft:function(e){return!e.icon&&"1rem"}},buttonBase:{flex:1,justifyContent:"start",height:"100%",borderRadius:99},typography:{color:"currentColor",opacity:.42,paddingLeft:function(e){return!e.icon&&"1rem"}},icon:{color:e.palette.text.secondary,padding:"0 1rem"},commonHighlight:{overflow:"hidden",position:"absolute",top:-1,right:-1,bottom:-1,left:-1,borderRadius:"inherit",opacity:0,transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})},focusHighlight:{pointerEvents:"none",backgroundColor:e.palette.action.hover},disableHighlight:{backgroundColor:e.palette.action.disabled},focused:{borderColor:e.palette.primary.main,backgroundColor:e.palette.background.paper},disabled:{"& $icon":{color:e.palette.text.disabled},"& $disableHighlight":{opacity:1}}}}),es=(0,c.forwardRef)(function(e,t){var n,r,a=e.placeholder,i=e.icon,o=e.size,s=e.type,u=e.label,l=e.componentsProps,d=e.disabledClear,f=e.disabledFocus,p=e.className,h=e.defaultValue,m=e.value,y=e.elevation,g=e.disabled,b=e.onChange,w=e.onClear,x=e.onFocus,S=e.onBlur,P=(0,H.Z)(e,et),A=(0,$.useI18n)().t,R=eo({size:o,type:s,icon:i}),D=(0,c.useState)(h),M=(0,E.Z)(D,2),T=M[0],j=M[1],N=(0,c.useState)(!1),I=(0,E.Z)(N,2),z=I[0],Z=I[1],B=a||A("SearchBar.placeholder"),F=u||A("SearchBar.placeholder"),U=m||T,V=void 0===m,W=(0,c.useMemo)(function(){return _()(b,375)},[b]),q=function(e){b(er(er({},e),{},{target:er(er({},e.target),{},{value:""})})),w(e),j("")};return c.createElement(J.default,(0,k.Z)({component:"form",elevation:y?1:0,className:O()(p,R.root,(n={},(0,C.Z)(n,R.flat,!y),(0,C.Z)(n,R.elevation,y),(0,C.Z)(n,R.focused,z&&!f),(0,C.Z)(n,R.disabled,g),n)),ref:t},P),"button"===s?c.createElement(G,{className:R.buttonBase},i&&c.createElement(v.default,{className:R.icon,icon:i}),"string"==typeof F?c.createElement(L.default,{className:R.typography},F):F):c.createElement(c.Fragment,null,i&&c.createElement(v.default,{className:R.icon,icon:i}),c.createElement(Y,(0,k.Z)({},null==l?void 0:l.inputBase,{className:O()(R.inputBase,null==l?void 0:null===(r=l.inputBase)||void 0===r?void 0:r.className),placeholder:g?null:B,value:g?B:U,disabled:g,"aria-label":B,onChange:function(e){if(!V)return b(e);var t=e.target.value;t.length>=1?(W(e),j(t)):q(e)},onFocus:function(e){x(e),Z(!0)},onBlur:function(e){S(e),Z(!1)}}))),U&&!d&&c.createElement(K.default,{size:"medium",onClick:q},c.createElement(v.default,{icon:Q})),c.createElement("span",{className:O()(R.commonHighlight,R.focusHighlight)}),g&&c.createElement("span",{className:O()(R.commonHighlight,R.disableHighlight)}))});es.displayName="SearchBar",es.defaultProps={elevation:!0,icon:function(e){return c.createElement("svg",(0,k.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",d:"M10.472 10H11.5l3.294 3.294a.996.996 0 010 1.412l-.088.088a1 1 0 01-1.412 0L10 11.5v-1.028a6 6 0 11.472-.472zM6 10a4 4 0 100-8 4 4 0 000 8z"}))},size:"small",type:"search",disabledClear:!1,disabledFocus:!1,defaultValue:"",onChange:function(){},onFocus:function(){},onClear:function(){},onBlur:function(){}},es.propTypes={className:s().string,type:s().oneOf(["button","search"]),icon:v.iconPropType,size:s().oneOf(["small","medium","large","auto"]),componentsProps:s().shape({inputBase:s().object}),value:s().string,defaultValue:s().string,disabledClear:s().bool,disabledFocus:s().bool,elevation:s().bool,placeholder:s().string,label:s().oneOfType([s().string,s().func,s().object]),disabled:s().bool,onChange:s().func,onFocus:s().func,onClear:s().func,onBlur:s().func};var ec=(0,c.forwardRef)(function(e,t){return(0,X.Z)(q),c.createElement(es,(0,k.Z)({},e,{ref:t}))});function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function el(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(n),!0).forEach(function(t){(0,C.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ed={"search-container--without-title":"styles__search-container--without-title___3P2fe"},ef=function(e){var t=e.onSelect,n=e.ContentComponent,r=e.HeaderComponent,a=e.canSelectParent,i=e.isSelected,o=e.title,s=e.transformParentItem,u=e.radioPosition,l=e.ellipsis,f=e.options,p=e.searchOptions,h=e.noDivider,v=(0,c.useRef)(),m=(0,c.useState)({history:U(f,a),searchValue:""}),y=(0,E.Z)(m,2),g=y[0],b=y[1],w=(0,c.useState)(null),k=(0,E.Z)(w,2),x=k[0],P=k[1],A=(0,c.useMemo)(function(){return _()(P,250)},[P]),D=function(e){var t=[e].concat((0,d.Z)(g.history));b(function(e){return el(el({},e),{},{history:t})})},M=function(e){t(e)},T=function(e){e.children&&e.children.length>0?D(e):M(e)},j=g.history[0],N=j.children||[],I=g.history.length-1,z=s(R()(j,"children")),Z=function(e){return i(e,I)},B=j.title||o;return c.createElement("span",{ref:v},r?c.createElement(r,{title:B,showBack:g.history.length>1,onClickBack:function(){var e=(0,S.Z)(g.history),t=e[0],n=e.slice(1);return b(function(e){return el(el({},e),{},{history:n})}),t}}):null,I>0?j.header?j.header:"function"==typeof f.childrenHeader?f.childrenHeader(I):f.childrenHeader:f.header,c.createElement(n,null,a&&I>0?c.createElement(F,{radioPosition:u,item:z,onClick:T,isSelected:Z(z),ellipsis:l,noDivider:h}):null,p&&0===I&&c.createElement("div",{className:O()("u-ml-1 u-mb-half",(0,C.Z)({"u-mr-1":B},ed["search-container--without-title"],!B))},c.createElement(ec,{placeholder:p.placeholderSearch,value:g.searchValue,onChange:function(e){var t=null==p?void 0:p.onSearch;if(t){var n=e.target.value,r=t(n);b(function(e){return el(el({},e),{},{searchValue:n})}),A(r)}},onClear:function(){b(function(e){return el(el({},e),{},{searchValue:""})}),A(null)}})),x?0===x.length?c.createElement(L.default,{variant:"body1",className:"u-flex u-flex-justify-center u-mb-1 "},p.noDataLabel):x.map(function(e,t){return c.createElement(F,{radioPosition:u,key:e.key||e.title,item:e,onClick:T,isSelected:Z(e),isLast:t===x.length-1,ellipsis:l,noDivider:h})}):N.map(function(e,t){return c.createElement(F,{radioPosition:u,key:e.key||e.title,item:e,onClick:T,isSelected:Z(e),isLast:t===N.length-1,ellipsis:l,noDivider:h})})))};ef.defaultProps={ContentComponent:V.default,HeaderComponent:null,transformParentItem:function(e){return e},radioPosition:"right"};var ep=s().shape({focusedId:s().string,header:s().node,icon:s().element,key:s().string,title:s().node,description:s().node,children:s().array,info:s().node,action:s().shape({Component:s().func,props:s().object})});ef.propTypes={radioPosition:s().oneOf(["left","right"]),onSelect:s().func.isRequired,isSelected:s().func.isRequired,options:s().shape({header:s().node,childrenHeader:s().oneOfType([s().node,s().func]),children:s().arrayOf(ep)}),canSelectParent:s().bool,transformParentItem:s().func,searchOptions:s().shape({placeholderSearch:s().string.isRequired,noDataLabel:s().string.isRequired,onSearch:s().func.isRequired}),ellipsis:s().bool,noDivider:s().bool,ContentComponent:s().elementType};var eh=n("41800"),ev=n("87838"),em=n("26234");let ey=function(e){return c.createElement("svg",(0,k.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 3.414v11.58C9 15.548 8.556 16 8 16c-.552 0-1-.45-1-1.007V3.414L1.707 8.707A1 1 0 01.293 7.293l7-7a1 1 0 011.414 0l7 7a1 1 0 01-1.414 1.414L9 3.414z"}))};var eg=function(e){var t=e.title,n=e.showBack,r=e.onClickBack;return t?c.createElement(c.Fragment,null,c.createElement(eh.Z,{className:O()("u-h-3",{"u-pl-half u-pr-3":n})},n&&c.createElement(K.default,{onClick:r},c.createElement(v.default,{icon:ey,rotate:-90})),c.createElement(L.default,{className:"u-w-100",variant:"h6",align:"center"},t)),c.createElement(D.default,null)):null};let eb=function(e){var t;return c.createElement(ev.Z,(0,k.Z)({},null==e?void 0:null===(t=e.componentsProps)||void 0===t?void 0:t.bottomsheet,{backdrop:!0,onClose:e.onClose}),c.createElement(em.Z,{disableGutters:!0},c.createElement(ef,(0,k.Z)({HeaderComponent:eg},e))))};var ew=n("98067"),ek=n("30910"),ex=n("36055"),eO=n("46590"),eC=n("38611");let eS=function(e){return c.createElement("svg",(0,k.Z)({viewBox:"0 0 16 16"},e),c.createElement("path",{fillRule:"evenodd",d:"M10.707 2.707a.999.999 0 10-1.414-1.414l-6 6a.999.999 0 000 1.414l6 6a.999.999 0 101.414-1.414L5.414 8l5.293-5.293z"}))};var eE=n("33952"),eP={Modal__back:"styles__Modal__back___qxUn_"},e_=function(e){var t=e.onClickBack,n=e.showBack,r=e.title,a=(0,ew.Z)({open:!0,onClose:!0}).dialogTitleProps;return r?c.createElement(ex.Z,a,c.createElement(eE.p,null,n&&c.createElement(eE.E,{className:eP.Modal__back},c.createElement(K.default,{size:"medium",onClick:t},c.createElement(v.default,{icon:eS}))),c.createElement(eE.Bd,{className:"u-ellipsis"},r))):null},eA=function(e){var t=e.children;return c.createElement(eO.Z,{className:"u-p-0"},c.createElement(V.default,null,t))};let eR=function(e){var t=(0,ew.Z)({open:!0}).dialogProps;return c.createElement(eC.ZP,(0,k.Z)({},t,{onClose:e.onClose}),c.createElement(ek.Z,{onClick:e.onClose,"data-testid":"modal-close-button-nested-select"}),c.createElement(ef,(0,k.Z)({HeaderComponent:e_,ContentComponent:eA},e)))},eD=function(e){var t=(0,z.default)().isMobile;return c.createElement(t?eb:eR,e)};var eM=function(e){var t,n,a,o=e.file,s=e.title,d=e.noDataLabel,f=e.onClose;(0,X.Z)(w);var p=(0,u.useClient)(),h=(0,$.useI18n)(),v=h.t,m=h.lang,y=null===(n=o.metadata)||void 0===n?void 0:null===(a=n.qualification)||void 0===a?void 0:a.label,k=(0,c.useMemo)(function(){return g(m)},[m]),x=(0,c.useMemo)(function(){return b({options:k,title:s,noDataLabel:d,t:v})},[k,s,d,v]);var O=(t=(0,r.Z)(i().mark(function e(t){var n,r,a,s;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.item,a=p.collection("io.cozy.files"),s=y&&"none"===n,e.next=5,a.updateMetadataAttribute(o._id,{qualification:s?null:r});case 5:f();case 6:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});return c.createElement(eD,{options:k,noDivider:!0,document:o,isSelected:function(e){var t=e.id,n=e.item;return(0,l.isSupportedQualification)(y)?y===(null==n?void 0:n.label):"none"===t},searchOptions:x,onSelect:O,onClose:f})};eM.propTypes={file:s().object,title:s().string,noDataLabel:s().string,onClose:s().func};let eT=eM},84827:function(e,t,n){"use strict";n.d(t,{Z:()=>l});var r=n("16019"),a=n("25459"),i=n("67294"),o=n("32419");let s=function(e){return i.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),i.createElement("path",{fillRule:"evenodd",d:"M8 16A8 8 0 108 0a8 8 0 000 16zm0-6a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}))},c=function(e){return i.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),i.createElement("path",{fillRule:"evenodd",d:"M8 0a8 8 0 100 16A8 8 0 008 0zm0 14A6 6 0 108 2a6 6 0 000 12z",clipRule:"evenodd"}))};var u=function(e){return i.createElement(a.Z,(0,r.Z)({},e,{icon:i.createElement(o.default,{icon:c}),checkedIcon:i.createElement(o.default,{icon:s})}))};u.defaultProps={color:"primary"};let l=u},88495:function(e,t,n){"use strict";n.r(t),n.d(t,{Spinner:function(){return m},default:function(){return y}});var r=n(17508),a=n(94184),i=n.n(a),o=n(45697),s=n.n(o),c=n(67294),u=n(32419),l=n(43870),d=n(32692),f=n(8250),p="styles__c-spinner___1snK7",h="styles__c-spinner--middle___RwyII",v="styles__c-spinner--nomargin___13JyW",m=function(e){var t,n=e.t,a=e.loadingType,o=e.middle,s=e.noMargin,f=e.color,m=e.size,y=e.className;return c.createElement("div",{className:i()(p,(t={},(0,r.Z)(t,h,o),(0,r.Z)(t,v,s),t),y)},c.createElement(u.default,{icon:l.Z,color:f,spin:!0,size:{tiny:8,small:12,medium:16,large:24,xlarge:36,xxlarge:80}[m]}),a&&c.createElement(d.default,{variant:"body1",color:"textSecondary",component:"p"},n("loading.".concat(a))))};m.propTypes={loadingType:s().string,middle:s().bool,noMargin:s().bool,color:s().string,size:s().oneOf(["tiny","small","medium","large","xlarge","xxlarge"]),className:s().string},m.defaultProps={loadingType:"",middle:!1,noMargin:!1,color:"var(--primaryColor)",size:"medium",className:""};let y=(0,f.Z)()(m)},8421:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h},spacingProp:function(){return p}});var r=n(16019),a=n(77354),i=n(94184),o=n.n(i),s=n(45697),c=n.n(s),u=n(67294),l=["spacing","tag"],d={"Stack--m":"styles__Stack--m___1tSpV","Stack--xs":"styles__Stack--xs___2R5lW","Stack--s":"styles__Stack--s___22WMg","Stack--l":"styles__Stack--l___3oxCJ","Stack--xl":"styles__Stack--xl___3qy-m","Stack--xxl":"styles__Stack--xxl___2KAsb"},f=function(e){var t=e.spacing,n=e.tag,i=(0,a.Z)(e,l);return u.createElement(n,(0,r.Z)({},i,{className:o()(i.className,t&&d["Stack--"+t])}))},p=c().oneOf(["xs","s","m","l","xl","xxl"]);f.propTypes={spacing:p},f.defaultProps={spacing:"m",tag:"div"};let h=f},23153:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>P});var r=n("16019"),a=n("77354"),i=n("15547"),o=n("67294"),s=n("25002"),c=n("82492"),u=n.n(c),l=n("45697"),d=n.n(l),f=n("95587"),p=n("8934"),h=n("32419"),v=n("52747"),m=n("33642"),y=n("96105"),g=n("11075"),b=n("84827"),w=["name","options","disabled","value","children","onClick","onChange"],k=(0,o.forwardRef)(function(e,t){var n,c=e.name,l=e.options,d=e.disabled,k=e.value,x=e.children,O=e.onClick,C=e.onChange,S=(0,a.Z)(e,w),E=(0,o.useState)({label:"",value:""}),P=(0,s.Z)(E,2),_=P[0],A=P[1],R=(0,o.useState)(!1),D=(0,s.Z)(R,2),M=D[0],T=D[1],j=null===(n=l.find(function(e){return e.value===k}))||void 0===n?void 0:n.label,N=function(e){var t=e.value,n=e.children,r=e.onClick;return function(e){null==r||r(u()({},e,{target:{value:t}})),A({label:n,value:t}),null==C||C({target:{value:t}})}};return(0,o.useEffect)(function(){A({label:j||"",value:k||""})},[j,k]),o.createElement(o.Fragment,null,o.createElement(i.Z,{style:{display:"none"},type:"hidden",name:c,value:_.value}),o.createElement(i.Z,(0,r.Z)({},S,{ref:t,type:"button","aria-controls":"simple-menu","aria-haspopup":"true",name:"dummy",value:_.label,disabled:d,inputProps:{className:"u-ta-left"},InputProps:{endAdornment:o.createElement(m.Z,{position:"end"},o.createElement(h.default,{icon:v.Z,color:d?"var(--disabledTextColor)":"var(--iconTextColor)"}))},onClick:function(){T(!0),null==O||O()}})),M&&o.createElement(p.Z,{open:!0,autoClose:!0,onClose:function(){T(!1)}},o.Children.map(x,function(e){return o.isValidElement(e)?o.createElement(f.Z,(0,r.Z)({},e.props,{size:"small",autoFocus:e.props.value===k,onClick:N(e.props)}),o.createElement(y.default,null,o.createElement(b.Z,{"aria-hidden":"true",tabIndex:"-1",checked:e.props.value===_.value})),o.createElement(g.default,{primary:e.props.children})):null})))});k.propTypes={name:d().string,options:d().array,disabled:d().bool,value:d().string,children:d().oneOfType([d().node,d().arrayOf(d().node)]),onClick:d().func,onChange:d().func};var x=function(){var e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})},O=function(){var e,t,n;return(null===(e=window)||void 0===e?void 0:null===(t=e.crypto)||void 0===t?void 0:null===(n=t.randomUUID)||void 0===n?void 0:n.call(t))||x()},C=n("89909"),S=["select","options","children"],E=(0,o.forwardRef)(function(e,t){var n=e.select,s=e.options,c=e.children,u=(0,a.Z)(e,S),l=O();return(0,C.useBreakpoints)().isMobile&&n&&s?o.createElement(k,(0,r.Z)({ref:t,id:l,options:s},u),c):o.createElement(i.Z,(0,r.Z)({ref:t,id:l,select:n,SelectProps:{IconComponent:function(e){return o.createElement(h.default,(0,r.Z)({},e,{icon:v.Z,color:u.disabled?"var(--disabledTextColor)":"var(--iconTextColor)"}))}}},u),c)});E.displayName="TextField";let P=E},22870:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(25061);r.ZP.defaultProps={arrow:!0};let a=r.ZP},32692:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(16019),a=n(77354),i=n(22318),o=n(67294),s=["color","variant","children"];let c=(0,o.forwardRef)(function(e,t){var n=e.color,c=e.variant,u=e.children,l=(0,a.Z)(e,s);return o.createElement(i.Z,(0,r.Z)({ref:t,variant:c,color:n||("caption"===c?"textSecondary":"textPrimary")},l),u)})},31395:function(e,t,n){"use strict";n.d(t,{L:function(){return u}});var r=n(8920),a=n(25976),i=n(32202),o=n(10923),s=n(99127),c=function(e){var t=document.getElementById("sidebar");return t?getComputedStyle(t).getPropertyValue("background-color"):e.palette.background.paper},u=(0,a.isFlagshipApp)()||i.q6?function(){var e=(0,r.Z)(),t=(0,s.useCozyTheme)().isLight;(0,o.useSetFlagshipUI)({bottomBackground:e.palette.background.paper,bottomTheme:t?"dark":"light",topOverlay:"rgba(0, 0, 0, 0.5)",topBackground:e.palette.background.paper,topTheme:"light"},{bottomBackground:c(e),bottomTheme:t?"dark":"light",topOverlay:"transparent",topBackground:e.palette.background.paper,topTheme:t?"dark":"light"},"cozy-ui/ActionMenu")}:function(){}},75301:function(e,t,n){"use strict";n.r(t),n.d(t,{ActionsItems:()=>J,ActionMenuWithClose:()=>N,ActionMenuItemWrapper:()=>k,default:()=>ei,ActionMenuHeader:()=>d,ActionMenuWrapper:()=>q,ActionMenuItem:()=>v,ActionMenuRadio:()=>M});var r=n("17508"),a=n("94184"),i=n.n(a),o=n("45697"),s=n.n(o),c=n("67294"),u=n("31395"),l="styles__c-actionmenu-header___2p_ke",d=function(e){var t=e.children,n=e.className;return c.createElement("div",{className:i()(l,n)},t)};d.propTypes={children:s().node,className:s().string};var f=n("8421"),p=n("33952"),h="styles__c-actionmenu-item___WzUJQ",v=function(e){var t=e.left,n=e.children,r=e.right,a=e.onClick,o=e.className,s=e.contentSpacing;return c.createElement(p.p,{className:i()(h,o),onClick:a,align:"top"},t&&c.createElement(p.E,{className:"u-mh-1"},t),c.createElement(p.Bd,{className:i()(t?"u-mr-1":"u-mh-1","u-stack-".concat(s))},n),r&&c.createElement(p.E,{className:"u-mr-1"},r))};v.propTypes={left:s().node,right:s().node,children:s().node,onClick:s().func,className:s().string,contentSpacing:f.spacingProp},v.defaultProps={contentSpacing:"xs"};var m=n("16019"),y=n("32419"),g=n("32692"),b=(0,n("41120").Z)(function(e){return{disabledItem:{cursor:"default","&:hover":{backgroundColor:"initial"}},disabledIcon:{fill:e.palette.text.disabled},disabledTypography:{color:e.palette.text.disabled}}}),w=function(e){var t=e.icon,n=e.className,a=e.isEnabled,o=e.componentsProps,s=e.children,u=e.onClick,l=b();return c.createElement(v,{className:i()("u-flex-items-center ".concat(n),(0,r.Z)({},l.disabledItem,!a)),left:t&&c.createElement(y.default,(0,m.Z)({icon:t,className:i()((0,r.Z)({},l.disabledIcon,!a))},null==o?void 0:o.iconProps)),onClick:u},c.createElement(g.default,(0,m.Z)({className:i()((0,r.Z)({},l.disabledTypography,!a))},null==o?void 0:o.typographyProps),s))};w.defaultProps={className:"",isEnabled:!0,componentsProps:{}},w.propTypes={icon:y.iconPropType,className:s().string,isEnabled:s().bool,componentsProps:s().shape({iconProps:s().object,typographyProps:s().object}),children:s().node,onClick:s().func};let k=w;var x=n("77354"),O=n("46464");let C=function(){var e=!1;return function(t){!e&&console.warn(t),e=!0}};var S=["className","value","name","label","error","disabled","style","gutter","onChange","checked"],E="styles__c-input-radio___1f4CB",P="styles__is-error___5jyha",_="styles__c-input-radio--noGutter___2gFTH",A=C(),R=function(e){var t,n=e.className,a=e.value,o=e.name,s=e.label,u=e.error,l=e.disabled,d=e.style,f=e.gutter,p=e.onChange,h=e.checked,v=(0,x.Z)(e,S);A('The Radio component is deprecated, please use `<Radios />` instead. You can replace `<Radio value="" label="" />` by `<FormControlLabel value="" label="" control={<Radios />} />`. See documentation for more details.');var y=(0,O.Z)(),g=h,b=o;y&&(void 0===g&&(g=y.value===e.value),void 0===b&&(b=y.name));var w=p||y&&y.onChange||function(){};return c.createElement("label",{className:i()(E,(t={},(0,r.Z)(t,_,!1===f),(0,r.Z)(t,P,u),t),n),"aria-disabled":l,style:d},c.createElement("input",(0,m.Z)({type:"radio",value:a,name:b,disabled:l,onChange:w,checked:g},v)),c.createElement("span",null,s))};R.propTypes={className:s().string,value:s().string,name:s().string,error:s().bool,disabled:s().bool,label:s().string},R.defaultProps={error:!1,gutter:!0};var D="styles__c-actionmenu-radio___38gls",M=function(e){return c.createElement(R,(0,m.Z)({},e,{className:D}))},T=["onClose","children"],j=(0,c.forwardRef)(function(e,t){var n=e.onClose,r=e.children,a=(0,x.Z)(e,T);return c.createElement(ei,(0,m.Z)({anchorElRef:t,onClose:n},a),c.Children.map(r,function(e){return(0,c.isValidElement)(e)?(0,c.cloneElement)(e,{onClose:n}):null}))});j.displayName="ActionMenuWithClose";let N=j;var I=n("25002"),L=n("52795"),z=n("13482");function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let F=function(e){var t=e.anchorElRef,n=e.popperOptions,r=e.placement,a=e.preventOverflow,i=e.onClose,o=e.children,s=(0,c.useState)(null),u=(0,I.Z)(s,2),l=u[0],d=u[1],f=t?t.current:null,p=(0,z.D)(f,l,n||{placement:r,modifiers:a?void 0:[{name:"preventOverflow",enabled:!1},{name:"hide",enabled:!1}]}),h=p.styles,v=p.attributes;return c.createElement("div",(0,m.Z)({ref:d,style:B(B({},h.popper),{},{zIndex:"var(--zIndex-popover)"})},v.popper),c.createElement(L.Z,{onClickAway:function(e){!f.contains(e.target)&&i(e)}},o))};var U=n("87838"),V=n("41170"),H=n.n(V),W=n("89909");let q=function(e){var t=e.onClose,n=e.anchorElRef,r=e.popperOptions,a=e.placement,i=e.preventOverflow,o=e.children;return(0,W.default)().isMobile?c.createElement(U.Z,{skipAnimation:H()(),backdrop:!0,onClose:t},o):c.createElement(F,{anchorElRef:n,popperOptions:r,onClose:t,placement:a,preventOverflow:i},o)};var G=function(e){return Object.keys(e)[0]},K=function(e,t){var n="";return e.filter(function(e){var n=Object.values(e)[0];return!n.displayCondition||n.displayCondition([t])}).map(function(e){var t=G(e);return n===t?(n=t,null):(n=t,e)}).filter(Boolean).filter(function(e,t,n){return!("hr"===G(e)&&t===n.length-1)})},Q=n("62125"),Y=function(e){var t=e.doc,n=e.actions,r=e.isLast,a=e.setIsRenaming,i=e.onClose,o=(0,Q.useI18n)().t;return(0,c.useMemo)(function(){return K(n,t)},[n,t]).map(function(e,n){var s=G(e),u=Object.values(e)[0],l=u.Component,d=u.action,f=u.isEnabled;return c.createElement(l,{key:s+n,className:"u-flex-items-center",isEnabled:f,docs:t?[t]:[],onClick:function(){d&&d([t],o,r),"rename"===s&&a(!0),i&&i()}})})};Y.propTypes={doc:s().object,actions:s().array,isLast:s().bool,setIsRenaming:s().func,onClose:s().func};let J=Y;var $="styles__c-actionmenu___IUGX7",X="styles__c-actionmenu--inline___1RWrO",ee=C(),et=C(),en=C(),er=C(),ea=function(e){var t=e.className,n=e.anchorElRef,a=e.autoclose,o=e.popperOptions,s=e.children,l=e.onClose,f=e.placement,p=e.preventOverflow,h=e.containerElRef;f&&et("<ActionMenu placement /> is deprecated, use <ActionMenu popperOptions={{ placement }} /> instead"),p&&en("<ActionMenu preventOverflow /> is deprecated, use <ActionMenu popperOptions={{ modifiers }} /> instead"),h&&er("<ActionMenu containerElRef /> is not needed anymore, it can be removed."),ee("The ActionMenu component has been deprecated and should be replaced by ActionsMenu. More infos: https://docs.cozy.io/cozy-ui/react/#!/ActionsMenu");var v=(0,W.default)().isMobile,m=c.createRef();return(0,u.L)(),c.createElement("div",{className:t,ref:m,onClick:a?l:null},c.createElement(q,{anchorElRef:n||m,popperOptions:o,onClose:l,placement:f,preventOverflow:p},c.createElement("div",{className:i()($,(0,r.Z)({},X,!v))},c.Children.map(s,function(e){return e&&e.type===d&&!v?null:e}))))};ea.propTypes={className:s().string,anchorElRef:s().object,autoclose:s().bool,popperOptions:s().shape({placement:s().oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"])}),children:s().node,onClose:s().func,placement:s().string,preventOverflow:s().bool,containerElRef:s().object},ea.defaultProps={popperOptions:{placement:"bottom-start"},autoclose:!1};let ei=ea},78727:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>P});var r,a,i,o=n("46932"),s=n("89526"),c=n("64222"),u=n("26238"),l=n("11998"),d=n("28446"),f=n("17508"),p=n("98477"),h=n("45697"),v=n.n(h),m=n("67294"),y=n("94184"),g=n.n(y),b=n("36198"),w={"c-btn--alert-error":"styles__c-btn--alert-error___3uH5i","c-btn--alert-info":"styles__c-btn--alert-info___1xAkg","c-btn--alert-success":"styles__c-btn--alert-success___3PgiM","c-alert":"styles__c-alert___dJvZ8","c-alert-wrapper":"styles__c-alert-wrapper___1VWFK","c-alert--hidden":"styles__c-alert--hidden___2HD9e","c-alert-title":"styles__c-alert-title___229Am","c-alert--error":"styles__c-alert--error___g5tIs","c-alert--success":"styles__c-alert--success___2DGDO","c-alert--info":"styles__c-alert--info___2EDwe",spin:"styles__spin___10b55",shake:"styles__shake___JTDyQ"},k=function(e){(0,u.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);return e=n?Reflect.construct(r,arguments,(0,d.Z)(this).constructor):r.apply(this,arguments),(0,l.Z)(this,e)});function a(){var e;(0,o.Z)(this,a);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"state",{hidden:!0}),(0,f.Z)((0,c.Z)(e),"notifyClosed",function(){e.props.onClose()}),(0,f.Z)((0,c.Z)(e),"close",function(){e.closeTimer&&clearTimeout(e.closeTimer),e.beginClosing()}),(0,f.Z)((0,c.Z)(e),"buttonAction",function(){var t=e.props.buttonAction;"function"==typeof t&&t(e.close)}),e}return(0,s.Z)(a,[{key:"computeDuration",value:function(){var e=this.props.message.split(/\W/).filter(Boolean);return Math.max(this.props.minDuration,e.length/3*1e3)}},{key:"componentDidMount",value:function(){var e=this;this.props.duration!==1/0&&(this.closeTimer=setTimeout(function(){e.beginClosing()},"auto"===this.props.duration?this.computeDuration():this.props.duration)),setTimeout(function(){e.setState({hidden:!1})},20)}},{key:"beginClosing",value:function(){this.base.addEventListener("transitionend",this.notifyClosed,!1),this.setState({hidden:!0})}},{key:"componentWillUnmount",value:function(){this.base.removeEventListener("transitionend",this.notifyClosed,!1),this.setState({hidden:!1}),this.closeTimer&&clearTimeout(this.closeTimer)}},{key:"render",value:function(){var e=this,t=this.props,n=t.message,r=t.type,a=t.buttonText,i=this.state.hidden;return m.createElement("div",{ref:function(t){return e.base=t},className:g()(w["c-alert"],i?w["c-alert--hidden"]:""),role:"alert"},m.createElement("div",{className:g()(w["c-alert-wrapper"],w["c-alert--".concat(r)])},m.createElement("p",null,n),a&&m.createElement(b.default,{onClick:this.buttonAction,className:w["c-btn--alert-".concat(r)],label:a,size:"tiny"})))}}]),a}(m.Component);k.propTypes={type:v().oneOf(["success","info","error"]),message:v().string.isRequired,onClose:v().func,buttonText:v().string,buttonAction:v().func},k.defaultProps={type:"info",onClose:function(){},buttonText:void 0,buttonAction:function(){},duration:"auto"};var x=n("73935");let O=function(e){var t=e.into,n=e.children,r=document.querySelector(t);return x.createPortal(n,r)};var C=0;var S=(r=[],a=[],i=function(){a.forEach(function(e){return e(r)})},{addNotification:function(e){return e.id=C++,r=[].concat((0,p.Z)(r),[e]),i(),e},removeNotification:function(e){var t=e.id,n=r.findIndex(function(e){return e.id===t});if(-1!==n){var a=r[n];return r=[].concat((0,p.Z)(r.slice(0,n)),(0,p.Z)(r.slice(n+1))),i(),a}},subscribe:function(e){a.push(e)},reset:function(){r=[],i()}}),E=function(e){(0,u.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);return e=n?Reflect.construct(r,arguments,(0,d.Z)(this).constructor):r.apply(this,arguments),(0,l.Z)(this,e)});function a(){var e;(0,o.Z)(this,a);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"state",{notifications:[]}),(0,f.Z)((0,c.Z)(e),"onStoreEvent",function(t){e.setState({notifications:t})}),(0,f.Z)((0,c.Z)(e),"handleClose",function(e){S.removeNotification(e)}),e}return(0,s.Z)(a,[{key:"componentDidMount",value:function(){this.setState({mounted:!0}),S.subscribe(this.onStoreEvent)}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,r=t.into,a=this.state.notifications;return m.createElement(O,{into:r},a.map(function(t){return m.createElement(k,{type:t.type,key:t.id,message:n?n(t.msg,t.options):t.msg,onClose:function(){return e.handleClose(t)},buttonText:t.options&&t.options.buttonText,buttonAction:t.options&&t.options.buttonAction,duration:t.options&&t.options.duration,minDuration:2e3})}))}}],[{key:"reset",value:function(){S.reset()}},{key:"info",value:function(e,t){return S.addNotification({type:"info",msg:e,options:t})}},{key:"success",value:function(e,t){return S.addNotification({type:"success",msg:e,options:t})}},{key:"error",value:function(e,t){return S.addNotification({type:"error",msg:e,options:t})}},{key:"removeNotification",value:function(e){return S.removeNotification(e)}}]),a}(m.Component);E.propTypes={t:v().func,into:v().string},E.defaultProps={into:"body"};let P=E},36198:function(e,t,n){"use strict";n.r(t),n.d(t,{Button:function(){return x},ButtonLink:function(){return O},default:function(){return C}});var r=n(16019),a=n(77354),i=n(17508),o=n(94184),s=n.n(o),c=n(45697),u=n.n(c),l=n(67294),d=n(32419),f=n(43870),p=["busy","disabled"],h=["children","icon","iconOnly","label","subtle","className","extension","round","size","theme","align","extraRight","tag"],v={"c-btn":"styles__c-btn___3kXsk","c-btn--regular":"styles__c-btn--regular___1ilYT","c-btn--ghost":"styles__c-btn--ghost___Md7mm","c-btn--highlight":"styles__c-btn--highlight___GlDOj","c-btn--alpha":"styles__c-btn--alpha___2-bRT","c-btn--action":"styles__c-btn--action___3z98K","c-btn--close":"styles__c-btn--close___C19bl","c-btn--danger":"styles__c-btn--danger___wzHFo","c-btn--secondary":"styles__c-btn--secondary___1hLVM","c-btn--danger-outline":"styles__c-btn--danger-outline___BCng5","c-btn--text":"styles__c-btn--text___33vmu","c-btn--left":"styles__c-btn--left___3f1zH","c-btn--center":"styles__c-btn--center___Nny0n","c-btn--right":"styles__c-btn--right___1B9Tn","c-btn--tiny":"styles__c-btn--tiny___fK37G","c-btn--small":"styles__c-btn--small___9JKyq","c-btn--large":"styles__c-btn--large___3PnsT","c-btn--full":"styles__c-btn--full___1VumB","c-btn--narrow":"styles__c-btn--narrow___erKsd","c-btn--round":"styles__c-btn--round___35GfW","c-btn--subtle":"styles__c-btn--subtle___2rRQ0",spin:"styles__spin___3VrS0",shake:"styles__shake___1yyjR"},m=function(e){var t,n=e.className,r=e.extension,a=e.size,o=e.theme,c=e.variant,u=e.round,l=e.align;return s()(v["c-btn"],(t={},(0,i.Z)(t,v["c-btn--".concat(o)],o),(0,i.Z)(t,v["c-btn--".concat(a)],"normal"!==a),(0,i.Z)(t,v["c-btn--".concat(c)],c),(0,i.Z)(t,v["c-btn--".concat(r)],r),(0,i.Z)(t,v["c-btn--".concat(l)],l),(0,i.Z)(t,v["c-btn--round"],u),t),n)},y=function(e){return function(t){var n=t.busy,r=t.disabled,i=(0,a.Z)(t,p);return n&&(i["aria-busy"]=!0),r&&(i["aria-disabled"]=!0),"button"===e&&r&&(i.disabled=!0),i}},g={button:y("button"),a:y("a")},b=function(e){return e},w={tiny:8,small:12,large:18},k=function(e){var t=e.children,n=e.icon,i=e.iconOnly,o=e.label,s=e.subtle,c=e.className,u=e.extension,p=e.round,v=e.size,y=e.theme,k=e.align,x=e.extraRight,O=e.tag,C=(0,a.Z)(e,h),S=g[O]||b,E=i?o:null;return l.createElement(O,(0,r.Z)({},S(C),{className:m({extension:u,align:k,round:p,size:v,theme:y,className:c,variant:s&&"subtle"}),title:E}),l.createElement("span",null,d.default.isProperIcon(n)?l.createElement(d.default,{size:w[v],icon:n,"aria-hidden":!0,focusable:"false"}):n,o&&l.createElement("span",{className:i?"u-visuallyhidden":null},o),t,x&&l.createElement("span",{className:"u-ml-auto"},x),C.busy&&l.createElement(d.default,{size:w[v],icon:f.Z,spin:!0,className:"u-ml-half","aria-hidden":!0,focusable:"false"})))},x=function(e){return l.createElement(k,e)},O=function(e){return l.createElement(k,e)};let C=function(e){return e.tag?l.createElement(k,e):l.createElement(x,e)};x.propTypes={children:u().node,label:u().node.isRequired,icon:u().oneOfType([u().node,d.iconPropType]),iconOnly:u().bool,theme:u().string,size:u().oneOf(["tiny","small","large","normal"]),extension:u().oneOf(["narrow","full"]),align:u().oneOf(["left","right","center"]),round:u().bool,className:u().string,onClick:u().func,extraRight:u().PropTypes.node,busy:u().bool,disabled:u().bool,type:u().oneOf(["button","reset","submit"]),subtle:u().bool},x.defaultProps={type:"submit",tag:"button",size:"normal",align:"center"},O.defaultProps={tag:"a"}},33952:function(e,t,n){"use strict";n.d(t,{Bd:function(){return y},E:function(){return m},p:function(){return v}});var r=n(16019),a=n(17508),i=n(77354),o=n(94184),s=n.n(o),c=n(45697),u=n.n(c),l=n(67294),d=["children","className","align"],f=["children","className","style"],p=["children","className","style"],h={media:"styles__media___1rIBu","media--top":"styles__media--top___1t0j5","media--bottom":"styles__media--bottom___XsQQe",bd:"styles__bd___3SAX2",img:"styles__img___3sztD"},v=function(e){var t=e.children,n=e.className,o=e.align,c=(0,i.Z)(e,d);return l.createElement("div",(0,r.Z)({className:s()(h.media,(0,a.Z)({},h["media--"+o],o&&"middle"!==o),n)},c),t)};v.propTypes={align:u().oneOf(["top","middle","bottom"])};var m=function(e){var t=e.children,n=e.className,a=e.style,o=(0,i.Z)(e,f);return l.createElement("div",(0,r.Z)({className:s()(h.img,n),style:a},o),t)},y=function(e){var t=e.children,n=e.className,a=e.style,o=(0,i.Z)(e,p);return l.createElement("div",(0,r.Z)({className:s()(h.bd,n),style:a},o),t)}},71917:function(e,t,n){"use strict";n.d(t,{A:function(){return o},Z:function(){return s}});var r=n(25002),a=n(66604),i=n.n(a),o=function(e){var t=window.innerWidth;return i()(e,function(e){var n=(0,r.Z)(e,2),a=n[0],i=n[1];return t>=a&&(void 0===i||t<=i)})};let s={isExtraLarge:[1201],isLarge:[1024,1200],isMedium:[769,1023],isSmall:[544,768],isTiny:[0,543],isDesktop:[1024],isTablet:[769,1023],isMobile:[0,768]}},41170:function(e){e.exports=function(){return navigator&&navigator.userAgent&&navigator.userAgent.includes("Argos")}},34627:function(e,t,n){"use strict";n.d(t,{Q:function(){return r}});function r(e){var t;return null!==(t=e)&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")?e.current:e}},43755:function(e,t,n){"use strict";n.r(t),n.d(t,{breakpointsPropTypes:function(){return v},default:function(){return m}});var r=n(16019),a=n(46932),i=n(89526),o=n(26238),s=n(11998),c=n(28446),u=n(23493),l=n.n(u),d=n(45697),f=n.n(d),p=n(67294),h=n(71917),v=f().shape(Object.keys(h.Z).reduce(function(e,t){return e[t]=f().bool.isRequired,e},{}));let m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.Z;return function(t){var n=function(n){(0,o.Z)(v,n);var u,d,f=(u=v,d=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(u);return e=d?Reflect.construct(t,arguments,(0,c.Z)(this).constructor):t.apply(this,arguments),(0,s.Z)(this,e)});function v(t){var n;return(0,a.Z)(this,v),(n=f.call(this,t)).state={breakpoints:(0,h.A)(e)},n.checkBreakpoints=l()(function(){n.setState({breakpoints:(0,h.A)(e)})},100,{trailing:!0}),n}return(0,i.Z)(v,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.checkBreakpoints)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.checkBreakpoints)}},{key:"render",value:function(){var e=this.props,n=this.state.breakpoints;return p.createElement(t,(0,r.Z)({},e,{breakpoints:n}))}}]),v}(p.Component);return n.displayName="withBreakpoints(".concat(t.displayName||t.name,")"),n}}},90027:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(25002),a=n(67294),i=n(73068);function o(){var e=(0,a.useState)(function(){return window&&window.navigator&&!1===window.navigator.onLine}),t=(0,r.Z)(e,2),n=t[0],o=t[1],s=(0,a.useCallback)(function(){return o(new Date)},[o]),c=(0,a.useCallback)(function(){return o(!1)},[o]);return(0,i.Z)(window,"online",c),(0,i.Z)(window,"offline",s),!!n}},73068:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(67294),a=n(34627);let i=function(e,t,n){(0,r.useEffect)(function(){var r=(0,a.Q)(e);if(r&&t&&n)return r.addEventListener(t,n),function(){r.removeEventListener(t,n)}},[t,n,e])}},32202:function(e,t,n){"use strict";n.d(t,{q6:function(){return a},wn:function(){return o},ym:function(){return i}});var r=n(25976),a=!!document.getElementById("rsg-root"),i=a?function(){var e,t=(null===(e=JSON.parse(localStorage.getItem("flagship-app")))||void 0===e?void 0:e.contained)==="on";return{immersive:!t,statusBarHeight:t?0:40,navbarHeight:t?0:40}}:r.getFlagshipMetadata,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topBackground,n=e.topOverlay,r=e.topTheme,i=e.bottomBackground,o=e.bottomOverlay,s=e.bottomTheme;if(a){var c=document.getElementsByTagName("body")[0];t&&c.style.setProperty("--flagship-top-bgcolor",t),n&&c.style.setProperty("--flagship-top-overlay",n),r&&c.style.setProperty("--flagship-top-color","dark"===r?"black":"white"),i&&c.style.setProperty("--flagship-bottom-bgcolor",i),o&&c.style.setProperty("--flagship-bottom-overlay",o),s&&c.style.setProperty("--flagship-bottom-color","dark"===s?"black":"white")}}},10923:function(e,t,n){"use strict";n.r(t),n.d(t,{ThemeColor:function(){return a},parseArg:function(){return m},useSetFlagshipUI:function(){return y}});var r,a,i=n(6557),o=n.n(i),s=n(41609),c=n.n(s),u=n(13218),l=n.n(u),d=n(35937),f=n.n(d),p=n(67294),h=n(22960),v=n(32202);(r=a||(a={})).Dark="dark",r.Light="light";var m=function(e,t,n){var r=l()(t)?f()(t,o()):void 0,a=!c()(r)&&r;(0,v.wn)(r),e&&a&&e.call("setFlagshipUI",a,n)},y=function(e,t,n){var r=(0,h.useWebviewIntent)();(0,p.useEffect)(function(){return m(r,e,"".concat(n||"unknown"," (onMount)")),function(){return m(r,t,"".concat(n||"unknown"," (onUnmount)"))}},[r])}},85718:function(e){e.exports={black:"var(--black)",white:"var(--white)",paleGrey:"var(--paleGrey)",silver:"var(--silver)",coolGrey:"var(--coolGrey)",slateGrey:"var(--slateGrey)",charcoalGrey:"var(--charcoalGrey)",overlay:"var(--overlay)",primaryColor:"var(--primaryColor)",primaryColorLight:"var(--primaryColorLight)",primaryContrastTextColor:"var(--primaryContrastTextColor)",success:"var(--successColor)",warning:"var(--warningColor)",error:"var(--errorColor)",info:"var(--infoColor)",errorBackground:"var(--errorBackground)",primaryBackgroundLight:"var(--primaryBackgroundLight)",neutralBackground:"var(--paleGrey)",zircon:"#F5FAFF",frenchPass:"#C2DCFF",dodgerBlue:"#297EF2",scienceBlue:"#0B61D6",puertoRico:"#0DCBCF",grannyApple:"#DEF7E7",emerald:"#35CE68",malachite:"#08b442",seafoamGreen:"#3DA67E",brightSun:"#FFC644",texasRose:"#FFAE5F",chablis:"#FFF2F2",yourPink:"#FDCBCB",fuchsia:"#FC4C83",pomegranate:"#F52D2D",monza:"#DD0505",portage:"#9169F2",azure:"#1FA8F1",melon:"#FD7461",blazeOrange:"#FC6D00",mango:"#FF962F",pumpkinOrange:"#FF7F1B",lavender:"#C2ADF4",darkPeriwinkle:"#6984CE",purpley:"#7F6BEE",lightishPurple:"#B449E7",barney:"#922BC2",weirdGreen:"#40DE8E"}},24770:function(e,t,n){"use strict";n.r(t),n.d(t,{AppDoctype:function(){return i},FileDoctype:function(){return o}});var r=n(45697),a=n.n(r),i=a().shape({name:a().string,slug:a().string,developer:a().object,links:a().shape({icon:a().string}),latest_version:a().shape({version:a().string})}),o=a().shape({_id:a().string,class:a().string,mime:a().string,name:a().string})},56664:function(e,t,n){"use strict";n.r(t),n.d(t,{AlertContext:()=>m,useAlert:()=>y,default:()=>w});var r=n("16019"),a=n("77354"),i=n("25002"),o=n("17508"),s=n("67294"),c=n("34978");let u=n("37155").Z;var l=n("64148"),d=["children"],f=(0,s.forwardRef)(function(e,t){var n=e.children,i=(0,a.Z)(e,d);return s.createElement(l.Z,(0,r.Z)({ref:t,anchorOrigin:{vertical:"bottom",horizontal:"center"}},i),n)});f.displayName="Snackbar",f.defaultProps={autoHideDuration:2e3};var p=["open","message","title","duration"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=(0,s.createContext)(),y=function(){var e=(0,s.useContext)(m);if(!e)throw Error("useAlert must be used within a AlertProvider");return e},g={title:"",message:"",duration:null,open:!1},b=function(e,t){return function(){return t(v(v({},e),{},{open:!1}))}};let w=s.memo(function(e){var t=e.children,n=(0,s.useState)(g),o=(0,i.Z)(n,2),l=o[0],d=o[1],h=l.open,y=l.message,w=l.title,k=l.duration,x=(0,a.Z)(l,p),O=(0,s.useMemo)(function(){return{showAlert:function(e){d(v({open:!0},e))}}},[]);return s.createElement(m.Provider,{value:O},t,s.createElement(f,{open:h,autoHideDuration:k,onClose:b(l,d)},s.createElement(c.default,(0,r.Z)({variant:"filled",elevation:6,onClose:b(l,d)},x),w&&s.createElement(u,null,w),y)))})},89909:function(e,t,n){"use strict";n.r(t),n.d(t,{BreakpointsProvider:function(){return l},default:function(){return f},useBreakpoints:function(){return d}});var r=n(25002),a=n(23493),i=n.n(a),o=n(67294),s=n(71917),c=function(){return(0,s.A)(s.Z)},u=(0,o.createContext)(null),l=function(e){var t=e.children,n=(0,o.useState)(c()),a=(0,r.Z)(n,2),s=a[0],l=a[1];return(0,o.useEffect)(function(){var e=i()(function(){l(c())},100);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]),o.createElement(u.Provider,{value:s},t)},d=function(){var e=(0,o.useContext)(u);if(null===e)throw Error("Cannot use useBreakpoints without BreakpointsProvider. The component must have a BreakpointsProvider above it.");return e};let f=d},99127:function(e,t,n){"use strict";n.r(t),n.d(t,{useCozyTheme:()=>ei,CozyThemeContext:()=>ea,default:()=>es});var r=n("77354"),a=n("45697"),i=n.n(a),o=n("67294"),s=n("33918"),c=n.n(s),u=n("16019"),l=n("16396"),d=n("17508"),f=n("94184"),p=n.n(f),h=n("98477"),v=n("59693"),m=function(e,t){return"CozyTheme--".concat(e,"-").concat(t)},y=function(e,t){var n=m(e,t);return document.getElementsByClassName(n)[0]},g=function(e,t){if(!y(e,t)){var n=document.createElement("div");n.className=m(e,t),n.style.display="none",document.body.prepend(n)}},b=function(e,t,n){var r=y(t,n);return window.getComputedStyle(r).getPropertyValue("--".concat(e)).trim()},w=function(e,t,n){return b(e,t,n)},k=function(e){var t=e.theme,n=e.severity;return{standard:(0,v.Fq)(t.palette[n].main,t.palette.background.contrastOpacity),outlined:t.palette[n].main,filled:t.palette[n].main}},x=function(e,t){return{"&-standard":{color:e.palette.text.primary,backgroundColor:k({theme:e,severity:t}).standard,"& $icon":{color:"secondary"===t?e.palette.text.primary:e.palette[t].main},"& $action":{'& button[title="Close"]':{color:e.palette.text.secondary}}},"&-outlined":{color:e.palette.text.primary,border:"1px solid ".concat(k({theme:e,severity:t}).outlined),"& $icon":{color:"secondary"===t?e.palette.text.primary:e.palette[t].main}},"&-filled":{color:e.palette[t].contrastText,backgroundColor:k({theme:e,severity:t}).filled,"& $action":{'& button[title="Close"]':{color:e.palette[t].contrastText}}}}},O=function(e,t){return{color:e.palette.text[t]||e.palette[t].main,borderColor:"primary"===t?e.palette.border.main:(0,v.Fq)(e.palette[t].main,e.palette.border.opacity),"&$clickable, &$deletable":{"&:hover, &:focus":{borderColor:"primary"===t?e.palette.border.main:(0,v.Fq)(e.palette[t].main,e.palette.border.opacity),backgroundColor:"primary"===t?e.palette.action.hover:(0,v.Fq)(e.palette[t].main,e.palette.action.hoverOpacity)}},"& $icon":{color:"primary"===t?e.palette.text.icon:e.palette[t].main,fill:"primary"===t?e.palette.text.icon:e.palette[t].main},"& $deleteIcon":{color:"primary"===t?e.palette.text.secondary:e.palette[t].main,fill:"primary"===t?e.palette.text.secondary:e.palette[t].main},"&$colorPrimary":{padding:"0 1px",color:e.palette[t].contrastText,backgroundColor:e.palette[t].main,"& $icon, & $deleteIcon":{color:e.palette[t].contrastText,fill:e.palette[t].contrastText},"&$disabled":{opacity:1,color:e.palette.text.disabled,backgroundColor:e.palette.action.disabledBackground,"& $icon, & $deleteIcon":{color:e.palette.text.disabled,fill:e.palette.text.disabled}},"&$clickable, &$deletable":{"&:hover, &:focus":{backgroundColor:e.palette[t].dark}}},"&.ghost":{borderWidth:"1px",borderStyle:"dashed","&:not($disabled)":{color:e.palette[t].main,borderColor:(0,v.Fq)(e.palette[t].main,e.palette.border.ghostOpacity),backgroundColor:(0,v.Fq)(e.palette[t].main,e.palette.action.ghostOpacity),"& $icon, & $deleteIcon":{color:e.palette[t].main,fill:e.palette[t].main}},"&$clickable, &$deletable":{"&:hover, &:focus":{borderColor:(0,v.Fq)(e.palette[t].main,e.palette.border.ghostOpacity),backgroundColor:(0,v.Fq)(e.palette[t].main,e.palette.action.hoverGhostOpacity)}}}}},C=function(e,t){return{color:e.palette[t].main,borderColor:e.palette[t].main,"&:hover":{backgroundColor:(0,v.Fq)(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&.ghost":{backgroundColor:(0,v.Fq)(e.palette[t].main,e.palette.action.ghostOpacity),"&:hover":{backgroundColor:(0,v.Fq)(e.palette[t].main,e.palette.action.hoverGhostOpacity),"@media (hover: none)":{backgroundColor:(0,v.Fq)(e.palette[t].main,e.palette.action.ghostOpacity)}}}}},S=function(e,t){return{color:e.palette[t].main,"&:hover":{backgroundColor:(0,v.Fq)(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}},E=function(e,t){return{color:e.palette[t].contrastText,backgroundColor:e.palette[t].main,"&:hover":{backgroundColor:e.palette[t].dark,"@media (hover: none)":{backgroundColor:e.palette[t].main}}}},P=function(e){return"var(--flagship-".concat(e,"-height, 0px)")},_=n("82492"),A=n.n(_),R={light:{normal:{action:{hoverOpacity:.04,selectedOpacity:.08,disabledOpacity:.32,focusOpacity:.12,activatedOpacity:.12,ghostOpacity:.08,hoverGhostOpacity:.16},border:{opacity:.32,ghostOpacity:.48},background:{contrastOpacity:.12}},inverted:{action:{hoverOpacity:.08,selectedOpacity:.16,disabledOpacity:.32,focusOpacity:.25,activatedOpacity:.24,ghostOpacity:.08,hoverGhostOpacity:.16},border:{opacity:.48,ghostOpacity:.48},background:{contrastOpacity:.24}}},dark:{normal:{action:{hoverOpacity:.08,selectedOpacity:.16,disabledOpacity:.32,focusOpacity:.24,activatedOpacity:.24,ghostOpacity:.08,hoverGhostOpacity:.16},border:{opacity:.48,ghostOpacity:.48},background:{contrastOpacity:.24}},inverted:{action:{hoverOpacity:.04,selectedOpacity:.08,disabledOpacity:.32,focusOpacity:.12,activatedOpacity:.12,ghostOpacity:.08,hoverGhostOpacity:.16},border:{opacity:.32,ghostOpacity:.48},background:{contrastOpacity:.12}}}},D=function(e,t){var n={type:e,variant:t,primary:{light:w("primaryColorLight",e,t),main:w("primaryColor",e,t),dark:w("primaryColorDark",e,t),contrastText:w("primaryContrastTextColor",e,t)},secondary:{light:w("secondaryColorLight",e,t),main:w("secondaryColor",e,t),dark:w("secondaryColorDark",e,t),contrastText:w("secondaryContrastTextColor",e,t)},error:{light:w("errorColorLight",e,t),main:w("errorColor",e,t),dark:w("errorColorDark",e,t),contrastText:w("errorColorContrastText",e,t)},warning:{light:w("warningColorLight",e,t),main:w("warningColor",e,t),dark:w("warningColorDark",e,t),contrastText:w("warningColorContrastText",e,t)},success:{light:w("successColorLight",e,t),main:w("successColor",e,t),dark:w("successColorDark",e,t),contrastText:w("successColorContrastText",e,t)},info:{light:w("infoColorLight",e,t),main:w("infoColor",e,t),dark:w("infoColorDark",e,t),contrastText:w("infoColorContrastText",e,t)},text:{primary:w("primaryTextColor",e,t),secondary:w("secondaryTextColor",e,t),disabled:w("disabledTextColor",e,t),hint:w("hintTextColor",e,t),icon:w("iconTextColor",e,t)},grey:{50:w("grey50",e,t),100:w("grey100",e,t),200:w("grey200",e,t),300:w("grey300",e,t),400:w("grey400",e,t),500:w("grey500",e,t),600:w("grey600",e,t),700:w("grey700",e,t),800:w("grey800",e,t),900:w("grey900",e,t),A100:w("greyA100",e,t),A200:w("greyA200",e,t),A400:w("greyA400",e,t),A700:w("greyA700",e,t)},divider:w("dividerColor",e,t),action:{active:w("actionColorActive",e,t),hover:w("actionColorHover",e,t),selected:w("actionColorSelected",e,t),disabled:w("actionColorDisabled",e,t),disabledBackground:w("actionColorDisabledBackground",e,t),focus:w("actionColorFocus",e,t),ghost:w("actionColorGhost",e,t),hoverGhost:w("actionColorHoverGhost",e,t)},border:{main:w("borderMainColor",e,t),disabled:w("borderDisabledColor",e,t),ghost:w("borderGhostColor",e,t),ghostDisabled:w("borderGhostDisabledColor",e,t)},background:{default:w("defaultBackgroundColor",e,t),paper:w("paperBackgroundColor",e,t),contrast:w("contrastBackgroundColor",e,t),selected:"#F5FAFF"}};return A()(n,R[e][t])};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){(0,d.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=function(e){var t,n,r,a;return{MuiSelect:{iconOutlined:{top:"auto",right:14},outlined:{"&&":{paddingRight:39}}},MuiOutlinedInput:{root:{borderRadius:4,"&$disabled":{background:e.palette.background.contrast},"&$focused $notchedOutline":{borderWidth:"0.0625rem"},"&$error $notchedOutline":{borderColor:(0,v.Fq)(e.palette.error.main,e.palette.border.opacity)},"&$focused&$error $notchedOutline":{borderColor:e.palette.error.main},"&:hover $notchedOutline":{borderColor:e.palette.text.hint},"&:hover&$error $notchedOutline":{borderColor:e.palette.error.main}},notchedOutline:{borderColor:e.palette.border.main,transition:"border-color ".concat(e.transitions.duration.shorter,"ms")},input:{textAlign:"left",padding:"18.5px 16px"},inputMarginDense:{paddingTop:14,paddingBottom:15}},MuiInputLabel:{outlined:{"&$marginDense":{transform:"translate(14px, 14px) scale(1)"},"&:not($shrink)":{"&$error":{color:e.palette.text.secondary}}}},MuiButton:{root:{borderRadius:2,height:"2.5rem",lineHeight:"normal",padding:"0 1rem","&.ghost":{borderStyle:"dashed !important","&:hover":{borderStyle:"dashed !important"}}},sizeSmall:{height:"2rem",padding:"0 0.75rem","&$text":{padding:"8px 6px"}},sizeLarge:{height:"3rem",padding:"0 1.25rem","&$text":{padding:"14px 10px"}},text:{minWidth:"auto",padding:"11px 8px","&:not($disabled)":{"&.customColor":{"&-success":S(e,"success"),"&-warning":S(e,"warning"),"&-error":S(e,"error"),"&-info":S(e,"info")}}},outlined:{"&:not($disabled)":{"&.ghost":{backgroundColor:(0,v.Fq)(e.palette.primary.main,e.palette.action.ghostOpacity),"&:hover":{backgroundColor:(0,v.Fq)(e.palette.primary.main,e.palette.action.hoverGhostOpacity),"@media (hover: none)":{backgroundColor:(0,v.Fq)(e.palette.primary.main,e.palette.action.ghostOpacity)}}},"&.customColor":{"&-primary":{color:e.palette.text.primary,borderColor:e.palette.border.main,"&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.ghost":{color:e.palette.primary.main,borderColor:(0,v.Fq)(e.palette.primary.main,e.palette.border.ghostOpacity)}},"&-success":C(e,"success"),"&-warning":C(e,"warning"),"&-error":C(e,"error"),"&-info":C(e,"info")}}},contained:{boxShadow:0,"&:not($disabled)":{"&.customColor":{"&-success":E(e,"success"),"&-warning":E(e,"warning"),"&-error":E(e,"error"),"&-info":E(e,"info")}}},startIcon:{marginLeft:"0 !important"}},MuiTabs:{root:{"&.segmented":{borderRadius:"99px",backgroundColor:e.palette.background.contrast,overflow:"visible",minHeight:"2.5rem","& $indicator":{top:"1px",height:"calc(100% - 2px)",transform:"scale(0.99)",borderRadius:"99px",zIndex:0,boxShadow:e.shadows[1],backgroundColor:e.palette.background.paper},"& $fixed":{overflow:"visible !important"},"& $scrollButtons":{borderRadius:"99px"}}}},MuiTab:{root:T(T({},e.typography.subtitle2),{},{"&:hover":{color:e.palette.text.primary,opacity:1},"&:focus":{color:e.palette.text.primary},"&.narrowed":(0,d.Z)({minWidth:"auto"},e.breakpoints.up("sm"),{minWidth:"auto"}),"&.segmented":T(T({},e.typography.body2),{},{textTransform:"initial",zIndex:1,borderRadius:"99px",minHeight:"2.5rem","&$selected":{color:e.palette.text.primary}})})},MuiAccordion:{rounded:{borderRadius:e.shape.borderRadius},root:{boxShadow:"0 4px 12px 0 rgba(0, 0, 0, 0.08)",borderWidth:"0.0625rem",borderStyle:"solid",borderColor:e.palette.border.main,overflow:"hidden",marginBottom:"1rem"}},MuiAccordionSummary:{expanded:{},root:{backgroundColor:e.palette.grey[100],textTransform:"uppercase",fontWeight:"bold",fontSize:"0.875rem",minHeight:"3.5rem",padding:0,color:e.palette.text.primary,"&$expanded":{minHeight:"3.5rem"}},expandIcon:{order:0,"&&":{marginLeft:"0.3125rem"},transform:"rotate(-90deg)","&$expanded":{marginLeft:"0.3125rem",transform:"rotate(0)"}},content:{margin:"0.75rem 0",paddingLeft:"0.5rem",paddingRight:"0.25rem",order:1,"& > :last-child":{paddingRight:0},"&$expanded":{margin:"0.75rem 0"}}},MuiAccordionDetails:{root:{padding:0,borderTop:"0.0625rem solid ".concat(e.palette.border.main)}},MuiStepConnector:{line:{borderColor:e.palette.divider}},MuiStepContent:{root:{borderColor:e.palette.divider}},MuiStepLabel:{label:T(T({},e.typography.body1),{},{"&$active":T({},e.typography.h6),"&$completed":T({},e.typography.h6)})},MuiListItemIcon:{root:{minWidth:"auto",width:32,height:32,alignItems:"center",justifyContent:"center",color:e.palette.text.icon}},MuiListItem:{root:{gap:16,paddingTop:12,paddingBottom:12,minHeight:56,"&.small":{paddingTop:8,paddingBottom:8,minHeight:48},"&.large":{paddingTop:16,paddingBottom:16,minHeight:64},"&.cozyActionsItem":{wordBreak:"break-word"}},dense:{paddingTop:8,paddingBottom:8,minHeight:48,"&.small":{paddingTop:4,paddingBottom:4,minHeight:40},"&.large":{paddingTop:12,paddingBottom:12,minHeight:56}}},MuiListSubheader:{root:T(T({},e.typography.subtitle2),{},{paddingBottom:8,paddingTop:8,marginBottom:"0.5rem",backgroundColor:e.palette.background.contrast}),sticky:{backgroundColor:e.palette.background.default}},MuiListItemText:{root:{marginTop:1,marginBottom:1},multiline:{marginTop:1,marginBottom:1},secondary:{marginTop:1}},MuiListItemSecondaryAction:{root:{right:0}},MuiMenu:{paper:{maxWidth:320}},MuiMenuItem:{root:(t={whiteSpace:"normal",overflow:"auto",wordBreak:"break-word",paddingTop:4,paddingBottom:4},(0,d.Z)(t,e.breakpoints.up("sm"),{minHeight:40}),(0,d.Z)(t,"&.cozyActionsItem",{minWidth:256}),(0,d.Z)(t,"& .cozyListItemIcon",{width:16,height:16}),t),gutters:{paddingLeft:16,paddingRight:16}},MuiFormLabel:{root:{color:e.palette.text.secondary,"&$disabled&$error":{color:e.palette.text.disabled}}},MuiFormHelperText:{root:{fontStyle:"italic",fontSize:"0.875rem",marginTop:4,"&$disabled&$error":{color:e.palette.text.disabled}}},MuiDialog:{paper:{"&.small":(0,d.Z)({width:"480px",maxWidth:"480px"},e.breakpoints.down("md"),{margin:"16px",padding:"0 8px 8px",height:"auto",maxHeight:"calc(100% - 32px)",borderRadius:"6px","& .divider--dialog":{marginLeft:"-8px",marginRight:"-8px"}}),"&.medium":(0,d.Z)({},e.breakpoints.up("md"),{width:"544px",maxWidth:"544px"}),"&.large":(0,d.Z)({},e.breakpoints.up("md"),{width:"800px",maxWidth:"800px"}),"&.full":{width:"100%",maxWidth:"100%"},"&.overflow":{overflowY:"visible !important","& .cozyDialogContent":{overflowY:"visible !important"}}},scrollPaper:{"&.alignTop":{alignItems:"start"}},paperFullScreen:{"& .cozyDialogActions":{paddingBottom:"calc(env(safe-area-inset-bottom) + ".concat(P("bottom"),")")},'& [class*="DialogCloseButton"]':{transform:"translateY(".concat(P("top"),")")},'& [class*="DialogBackButton"]':{transform:"translateY(".concat(P("top"),")")},".flagship-app & .cozyDialogTitle":{paddingTop:"calc(".concat(P("top")," + 0.75rem) !important")},".flagship-app & .cozyDialogContent":{marginBottom:"".concat(P("bottom")," !important")}}},MuiDialogTitle:{root:T(T({},e.typography.h3),{},(n={boxSizing:"border-box",width:"100%",padding:"1.5rem 2rem"},(0,d.Z)(n,e.breakpoints.down("sm"),T(T({},e.typography.h4),{},{padding:"0.75rem 1rem"})),(0,d.Z)(n,"&.dialogTitleWithBack",(0,d.Z)({paddingLeft:"4rem"},e.breakpoints.down("sm"),{paddingLeft:"3rem"})),(0,d.Z)(n,"&.dialogTitleWithClose",(0,d.Z)({paddingRight:"4rem"},e.breakpoints.down("sm"),{paddingRight:"3rem"})),(0,d.Z)(n,"&.dialogTitleFluid",{paddingTop:0}),n))},MuiDialogContent:{root:(r={padding:"24px 32px 0"},(0,d.Z)(r,e.breakpoints.down("sm"),{padding:"24px 16px 0"}),(0,d.Z)(r,"&.disableGutters",{padding:0,"& .dialogContentInner":{marginBottom:0},"& .dialogTitleFluidContainer":{marginLeft:0,marginRight:0,marginTop:0}}),(0,d.Z)(r,"& .dialogContentInner",{marginBottom:"24px","&.withFluidActions":(0,d.Z)({},e.breakpoints.down("sm"),{marginBottom:0,display:"flex",flexDirection:"column",height:"100%","& .dialogContentWrapper":{flexGrow:1,"&:not(.withActions)":{paddingBottom:"calc(env(safe-area-inset-bottom) + ".concat(P("bottom")," + 16px)")}},"& .cozyDialogActions":{paddingBottom:"calc(env(safe-area-inset-bottom) + ".concat(P("bottom")," + 16px)")}}),"& .dialogTitleFluidContainer":(0,d.Z)({marginLeft:"-2rem",marginRight:"-2rem"},e.breakpoints.down("sm"),{marginLeft:"-1rem",marginRight:"-1rem",marginTop:"-0.75rem"})}),r)},MuiDialogActions:{root:(a={margin:"16px 32px",padding:0},(0,d.Z)(a,e.breakpoints.down("sm"),{margin:"8px 16px","& button":{flexGrow:1}}),(0,d.Z)(a,"&.dialogActionsFluid",{margin:"24px 0 0"}),(0,d.Z)(a,"&.columnLayout",{display:"flex",flexDirection:"column-reverse","& button":{width:"100%",margin:0,"&:not(:first-child)":{marginBottom:"8px"}}}),(0,d.Z)(a,"&:not(.columnLayout) > :not(:first-child):not(:first-child)",{marginLeft:4}),a)},MuiDivider:{inset:{marginLeft:64,"&.divider--dialog":{marginLeft:80}}},MuiCheckbox:{colorSecondary:{"&$checked":{color:e.palette.error.main}}},MuiSwitch:{checked:{"& + $track$track":{opacity:1}},switchBase:{top:1,"&$checked":{transform:"translateX(15px)"}},thumb:{width:16,height:16,backgroundColor:e.palette.common.white},track:{width:25,height:12,opacity:1,backgroundColor:e.palette.text.disabled},colorSecondary:{"&$checked":{"& + $track":{backgroundColor:e.palette.success.main}}},disabled:{"&$checked + $track":{backgroundColor:"".concat(e.palette.grey[200]," !important")},"& $thumb":{backgroundColor:e.palette.common.white}}},MuiTooltip:{tooltip:{borderRadius:"8px",fontSize:"1rem",lineHeight:"1.3",padding:"16px"}},MuiIconButton:{root:{color:e.palette.text.secondary,"&.small":{padding:3},"&.medium":{padding:12},"&.large":{padding:16},"&.dialogIconButton":{backgroundColor:e.palette.background.paper,"&:hover":{backgroundColor:e.palette.action.selected}},"&.cozyStyles":{"&-error":{color:e.palette.error.main,"&:hover":{backgroundColor:(0,v.Fq)(e.palette.error.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}}}},MuiBadge:{badge:{boxSizing:"content-box",padding:0,"&.badgeBorder":{border:"2px solid ".concat(e.palette.background.paper)},"&.badgeSizeLarge":{fontSize:".6875rem",height:"1rem",minWidth:"1rem"},"&.badgeSizeMedium":{height:".875rem",minWidth:".875rem",fontSize:".625rem"},"&.badgeSizeSmall":{height:".75rem",minWidth:".75rem",fontSize:".5rem"}},colorPrimary:{"&.colorSuccess":{backgroundColor:e.palette.success.main,color:e.palette.success.contrastText},"&.colorWarning":{backgroundColor:e.palette.warning.main,color:e.palette.warning.contrastText},"&.colorInfo":{backgroundColor:e.palette.info.main,color:e.palette.info.contrastText}},anchorOriginTopRightRectangular:{transform:"scale(1) translate(37%, -37%)"},anchorOriginBottomRightRectangular:{transform:"scale(1) translate(37%, 37%)"},anchorOriginBottomLeftRectangular:{transform:"scale(1) translate(-37%, 37%)"},anchorOriginTopLeftRectangular:{transform:"scale(1) translate(-37%, -37%)"},dot:{borderRadius:"100%",padding:0,"&.badgeSizeLarge":{height:".625rem",minWidth:".625rem"},"&.badgeSizeMedium":{height:".5rem",minWidth:".5rem"},"&.badgeSizeSmall":{height:".375rem",minWidth:".375rem"}}},MuiRadio:{root:{padding:"12px","&$disabled svg":{borderRadius:"50%",backgroundColor:e.palette.background.contrast,fill:e.palette.border.disabled},"&:not($checked) svg":{fill:e.palette.border.main}},colorPrimary:{"&$checked svg":{fill:e.palette.primary.main},"&$disabled&$checked svg":{fill:e.palette.text.disabled}},colorSecondary:{"&$checked svg":{fill:e.palette.error.main},"&$disabled&$checked svg":{fill:e.palette.text.disabled}}},MuiChip:{root:{"&.noLabel":{width:"32px","& $label":{display:"none"},"& $icon":{margin:0}},"&.customColor":{"&-primary":O(e,"primary"),"&-success":O(e,"success"),"&-error":O(e,"error"),"&-warning":O(e,"warning"),"&-info":O(e,"info")}}},MuiAlert:{root:{padding:"8px 16px","&.cozyStyles":{"&-primary":x(e,"primary"),"&-secondary":x(e,"secondary"),"&-success":x(e,"success"),"&-error":x(e,"error"),"&-warning":x(e,"warning"),"&-info":x(e,"info")},"& $icon":{paddingTop:"9px"},"&.block":{flexWrap:"wrap","& $action":{width:"100%",paddingLeft:0,justifyContent:"end"}}},message:{flex:"auto",display:"flex",alignItems:"center",flexWrap:"wrap"},action:{marginRight:"-8px"}},MuiAlertTitle:{root:{width:"100%",fontWeight:"bold"}},MuiSnackbarContent:{root:{padding:"4px 12px",backgroundColor:e.palette.grey[600]}},MuiFab:{root:{color:e.palette.text.primary,backgroundColor:e.palette.background.paper,"&:hover":{backgroundColor:(0,v._j)(e.palette.background.paper,.05)},"@media (hover: none)":{backgroundColor:e.palette.background.paper}},extended:{borderRadius:28,height:56,minWidth:56,padding:"0 20px","&$sizeSmall":{borderRadius:20,height:40,minWidth:40,padding:"0 12px"},"&$sizeMedium":{borderRadius:24,height:48,minWidth:48,padding:"0 16px"}}},MuiMobileStepper:{root:{background:"transparent",height:40,padding:0},dot:{backgroundColor:"transparent",width:"10px",height:"10px",margin:"0 3px",border:"1px solid ".concat(e.palette.border.main),boxSizing:"border-box"},dotActive:{border:"none"}}}},N=function(e){var t;return A()(j(e),{MuiLinearProgress:{colorPrimary:{backgroundColor:"rgba(255,255,255,0.2)"},colorSecondary:{backgroundColor:"rgba(255,255,255,0.2)"}},MuiSnackbarContent:{root:{backgroundColor:(t=e).palette.grey[200]}},MuiTabs:{root:{"&.segmented":{"& $indicator":{backgroundColor:t.palette.primary.main}}}},MuiTab:{root:{"&.segmented":{"&$selected":{color:t.palette.primary.contrastText}}}},MuiSwitch:{switchBase:{color:t.palette.grey[100]},colorPrimary:{"&$checked":{"& + $track":{backgroundColor:t.palette.success.dark}}},colorSecondary:{"&$checked":{"& + $track":{backgroundColor:t.palette.success.dark}}}}})},I=n("41170"),L=n.n(I),z=n("69710");function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){(0,d.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var F=function(e){return{light:{normal:j(e),inverted:N(e)},dark:{normal:j(e),inverted:N(e)}}},U=B({shape:{borderRadius:6},breakpoints:{values:{xs:0,sm:480,md:768,lg:1023,xl:1200}},zIndex:{modal:"var(--zIndex-modal)"},textShadows:["none","0px 2px 8px rgba(29, 33, 42, 0.16), 0px 0px 1px rgba(29, 33, 42, 0.48)"]},L()()&&{transitions:{create:function(){return"none"}}}),V=function(e,t){g(e,t);var n,r,a=D(e,t);var i=(0,z.Z)(B(B({},U),{},{typography:{fontFamily:"var(--primaryFont)",h1:{fontSize:48,fontWeight:"bold",lineHeight:1.087,letterSpacing:-.8},h2:{fontSize:32,fontWeight:"bold",lineHeight:1.313,letterSpacing:-.4},h3:{fontSize:24,fontWeight:"bold",lineHeight:1.167},h4:{fontSize:20,fontWeight:"bold",lineHeight:1.167},h5:{fontSize:18,fontWeight:"bold",lineHeight:1.313},h6:{fontSize:16,fontWeight:"bold",lineHeight:1.313},subtitle1:{fontWeight:"bold",fontSize:14,lineHeight:1.358,textTransform:"uppercase"},subtitle2:{fontWeight:"bold",fontSize:12,lineHeight:1.334,textTransform:"uppercase"},body1:{fontSize:16,lineHeight:1.313},body2:{fontSize:14,lineHeight:1.313},button:{fontWeight:"bold",fontSize:14,lineHeight:1.313},caption:{fontSize:12,lineHeight:1.313,color:a.text.secondary,display:"block"}},shadows:(n=e,r=t,(0,h.Z)(Array(26)).map(function(e,t){return w("shadow".concat(t),n,r)})),palette:a})),o=F(i)[e][t];return B(B({},i),{},{overrides:o})},H={light:{normal:V("light","normal"),inverted:V("light","inverted")},dark:{normal:V("dark","normal"),inverted:V("dark","inverted")}},W=function(e,t){var n,r=null===(n=H[e])||void 0===n?void 0:n[t];if(!r){var a=Object.keys(H).join(", ");throw Error("[MuiCozyTheme] Unknown theme variant: ".concat(t,". Possible variants are ").concat(a))}return r},q=n("13457"),G=function(e){var t=e.type,n=e.variant,r=e.children,a=W(t,n);return o.createElement(q.Z,{theme:a},r)};G.propTypes={type:i().oneOf(["light","dark"]),variant:i().oneOf(["normal","inverted"])},G.defaultProps={type:"light",variant:"normal"};var K=n("63457");function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach(function(t){(0,d.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var J=function(e){var t,n,r,a=e.variant,i=e.className,s=e.ignoreItself,c=e.settingsThemeType,u=e.children,l=localStorage.getItem("ui-theme-type"),f=localStorage.getItem("ui-theme-variant");var h=(t="(prefers-color-scheme: dark)",(0,K.Z)(t,Y(Y({},void 0),{},{noSsr:!0})))?"dark":"light",v=["light","dark"].includes(c)?c:void 0,m=l||v||h,y=f||a;return o.createElement(ea.Provider,{value:{type:m,variant:y,isLight:"light"===m}},o.createElement(G,{type:m,variant:y},o.createElement("div",{className:p()(i,(r={},(0,d.Z)(r,"CozyTheme--".concat(m,"-").concat(y),!!y),(0,d.Z)(r,"u-dc",s),r))},u)))};J.propTypes={variant:i().oneOf(["normal","inverted"]),ignoreItself:i().bool,className:i().string,settingsThemeType:i().oneOf(["light","dark","auto"]),children:i().node};var $="io.cozy.settings",X=l.fetchPolicies.olderThan(3e5),ee=["data"];let et=function(e){var t={definition:(0,l.Q)($).getById("io.cozy.settings.instance"),options:{as:"".concat($,"/io.cozy.settings.instance"),fetchPolicy:X,singleDocData:!0}},n=(0,l.useQuery)(t.definition,t.options),a=n.data,i=(0,r.Z)(n,ee);return(0,l.isQueryLoading)(i)&&!(0,l.hasQueryBeenLoaded)(i)?null:o.createElement(J,(0,u.Z)({},e,{settingsThemeType:null==a?void 0:a.colorScheme}))};var en=n("32202"),er=["ignoreCozySettings"],ea=(0,o.createContext)(),ei=function(){var e=(0,o.useContext)(ea);return e?e:(c()("error","`CozyThemeContext` is missing. `useCozyTheme()` must be used within a `<CozyTheme>`. `light normal` is returned as fallback value."),{type:"light",variant:"normal",isLight:!0})},eo=function(e){var t=e.ignoreCozySettings,n=(0,r.Z)(e,er),a=t||en.q6?J:et;return o.createElement(a,n)};eo.propTypes={variant:i().oneOf(["normal","inverted"]),ignoreItself:i().bool,ignoreCozySettings:i().bool,className:i().string,children:i().node},eo.defaultProps={variant:"normal",ignoreCozySettings:!1,ignoreItself:!0};let es=eo},33398:function(e,t,n){"use strict";n.r(t),n.d(t,{EncryptedContext:function(){return a},default:function(){return o},useEncrypted:function(){return i}});var r=n(67294),a=r.createContext(),i=function(){var e=(0,r.useContext)(a);if(!e)throw Error("useEncrypted must be used within a EncryptedProvider");return e};let o=r.memo(function(e){var t=e.url,n=e.children;return r.createElement(a.Provider,{value:{url:t}},n)})},68659:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(58622),a=n.n(r),i=n(67294),o=n(62125),s=n(34378);let c=function(e){return function(){var t=((0,o.useI18n)()||{lang:o.DEFAULT_LANG}).lang;return(0,i.useMemo)(function(){var n=new(a())({locale:o.DEFAULT_LANG,phrases:e[o.DEFAULT_LANG]});if(t&&t!==o.DEFAULT_LANG)try{n.locale(t),n.extend(e[t])}catch(e){console.warn('The dict phrases for "'.concat(t,"\" can't be loaded"))}var r=(0,s.NW)(t);return{t:n.t.bind(n),f:r,lang:t}},[t])}}},34378:function(e,t,n){"use strict";n.d(t,{NQ:function(){return h},NW:function(){return p}});var r=n(17508),a=n(43271),i=n(81085),o=n(62125);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var c={},u=o.DEFAULT_LANG,l=function(e){switch(e){case"en":return"en-US";case"zh_cn":return"zh-CN";case"zh_tw":return"zh-TW";default:return e}},d=function(e){return'The "'.concat(e,"\" locale isn't supported by date-fns. or has not been included in the build. Check if you have configured a ContextReplacementPlugin that is too restrictive.")},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.DEFAULT_LANG;u=l(e);var r=l(t);try{c[r]=n(87759)("./".concat(r,"/index.js"))}catch(e){console.warn(d(r))}if(u&&u!==r)try{c[u]=n(87759)("./".concat(u,"/index.js"))}catch(e){console.warn(d(u))}return c[u]},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.DEFAULT_LANG;return function(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=f(e,t),u=n&&"string"==typeof n?new Date(n):n;try{return(0,a.Z)(u,i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({locale:c},o))}catch(e){console.error("Error in initFormat",e)}}},h=function(e){return(0,i.Z)(e,{locale:c[u]})}},14669:function(e,t,n){"use strict";n.r(t),n.d(t,{getI18n:function(){return s}});var r=n(62125),a=n(34378),i=n(79233),o=function(e){var t=document.querySelector("[role=application]"),n={dataset:{cozy:JSON.stringify({locale:localStorage.getItem("lang")||e})}},r=JSON.parse((t||n).dataset.cozy).locale;return/^\{\{\..*\}\}$/.test(r)?e:r},s=function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.DEFAULT_LANG,c=e||o(s),u=(0,i.QE)(c,t,n,s),l=(0,a.NW)(c);return{t:u.t.bind(u),f:l,lang:c}}},62125:function(e,t,n){"use strict";n.r(t),n.d(t,{DEFAULT_LANG:function(){return g},I18n:function(){return k},I18nContext:function(){return b},createUseI18n:function(){return m.Z},default:function(){return x},extend:function(){return h.l7},initTranslation:function(){return h.QE},translate:function(){return v.Z},useExtendI18n:function(){return y.Z},useI18n:function(){return w}});var r=n(46932),a=n(89526),i=n(64222),o=n(26238),s=n(11998),c=n(28446),u=n(17508),l=n(45697),d=n.n(l),f=n(67294),p=n(34378),h=n(79233),v=n(8250),m=n(68659),y=n(27507),g="en",b=f.createContext(),w=function(){var e=(0,f.useContext)(b);if(!e)throw Error("`I18nContext` is missing. `useI18n()` must be used within a `<I18n>`");return e},k=function(e){(0,o.Z)(d,e);var t,n,l=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);return e=n?Reflect.construct(r,arguments,(0,c.Z)(this).constructor):r.apply(this,arguments),(0,s.Z)(this,e)});function d(e){var t;return(0,r.Z)(this,d),t=l.call(this,e),(0,u.Z)((0,i.Z)(t),"UNSAFE_componentWillReceiveProps",function(e){e.lang!==t.props.lang&&t.init(e)}),t.init(t.props),t}return(0,a.Z)(d,[{key:"init",value:function(e){var t=e.polyglot,n=e.lang,r=e.dictRequire,a=e.context,i=e.defaultLang;this.translator=t||(0,h.QE)(n,r,a,i),this.format=(0,p.NW)(n,i),this.t=this.translator.t.bind(this.translator),this.contextValue=this.getContextValue(e)}},{key:"getContextValue",value:function(e){return{t:this.t,f:this.format,polyglot:(e||this.props).polyglot||this.translator,lang:(e||this.props).lang}}},{key:"getChildContext",value:function(){return this.contextValue}},{key:"render",value:function(){return f.createElement(b.Provider,{value:this.contextValue},this.props.children)}}]),d}(f.Component);k.propTypes={lang:d().string.isRequired,polyglot:d().object,dictRequire:d().func,context:d().string,defaultLang:d().string},k.defaultProps={defaultLang:g},k.childContextTypes={t:d().func,f:d().func,polyglot:d().object,lang:d().string};let x=k},8250:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(16019),a=n(67294),i=n(62125);let o=function(){return function(e){var t=(0,a.forwardRef)(function(t,n){var o=(0,a.useContext)(i.I18nContext);return a.createElement(e,(0,r.Z)({},t,{ref:n,t:o&&o.t,f:o&&o.f,lang:o&&o.lang}))});return t.displayName="withI18n(".concat(e.displayName||e.name,")"),t}}},79233:function(e,t,n){"use strict";n.d(t,{QE:function(){return s},l7:function(){return c}});var r,a=n(58622),i=n.n(a),o=n(62125),s=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.DEFAULT_LANG;if(r=new(i())({phrases:t(a),locale:a}),e&&e!==a)try{var s=t(e);r.extend(s),r.locale(e)}catch(t){console.warn('The dict phrases for "'.concat(e,"\" can't be loaded"))}if(n)try{var c=t(e,n);r.extend(c)}catch(t){console.warn("The context ".concat(n," cannot be loaded for lang ").concat(e))}return r},c=function(e,t){var n;return null===(n=t||r)||void 0===n?void 0:n.extend(e)}},27507:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(25002),a=n(58622),i=n.n(a),o=n(67294),s=n(62125),c=n(79233);let u=function(e){var t=(0,s.useI18n)(),n=t.lang,a=t.polyglot,u=(0,o.useState)(""),l=(0,r.Z)(u,2),d=l[0],f=l[1];if(e&&n&&a&&d!==n){var p=new(i())({phrases:e[n],locale:n});(0,c.l7)(a.phrases,p),(0,c.l7)(p.phrases,a),f(n)}}},69311:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(17508),a=n(46932),i=n(89526),o=n(26238),s=n(11998),c=n(28446),u=n(57557),l=n.n(u),d=n(67294),f=n(8250),p=n(62125);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let m=function(e){return function(t){var n=(0,f.Z)()(t),r="function"==typeof e?e:function(t){return e[t]},u=function(e){(0,o.Z)(h,e);var t,u,f=(t=h,u=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);return e=u?Reflect.construct(n,arguments,(0,c.Z)(this).constructor):n.apply(this,arguments),(0,s.Z)(this,e)});function h(){return(0,a.Z)(this,h),f.apply(this,arguments)}return(0,i.Z)(h,[{key:"render",value:function(){var e=this.props.lang,t=l()(this.props,Object.keys(p.I18n.childContextTypes));return d.createElement(p.I18n,{dictRequire:r,lang:e},d.createElement(n,t))}}]),h}(d.Component);return u.propTypes=v(v({},t.propTypes||{}),p.I18n.childContextTypes),u.displayName="withLocales(".concat(t.displayName||t.name,")"),(0,f.Z)()(u)}}},41256:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(17508),a=n(16019),i=n(67294),o=n(62125);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let c=function(e){return function(t){var n="function"==typeof e?e:function(t){return e[t]},c=(0,i.forwardRef)(function(e,r){var s=(0,o.useI18n)().lang;return i.createElement(o.I18n,{dictRequire:n,lang:s},i.createElement(t,(0,a.Z)({},e,{ref:r})))});return c.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t.propTypes||{}),c.displayName="withOnlyLocales(".concat(t.displayName||t.name,")"),c}}},75910:function(e,t,n){"use strict";n.r(t),n.d(t,{MuiThemeProvider:function(){return r.n},ServerStyleSheets:function(){return r.$},StylesProvider:function(){return r.Fo},ThemeProvider:function(){return r.f6},alpha:function(){return r.Fq},createGenerateClassName:function(){return r.hd},createMuiTheme:function(){return r.AY},createStyles:function(){return r.kc},createTheme:function(){return r.jG},darken:function(){return r._j},decomposeColor:function(){return r.tB},duration:function(){return r.x9},easing:function(){return r.Ui},emphasize:function(){return r._4},fade:function(){return r.U1},getContrastRatio:function(){return r.mi},getLuminance:function(){return r.H3},hexToRgb:function(){return r.oo},hslToRgb:function(){return r.ve},jssPreset:function(){return r.pm},lighten:function(){return r.$n},makeStyles:function(){return r.ZL},recomposeColor:function(){return r.wy},responsiveFontSizes:function(){return r.yE},rgbToHex:function(){return r.vq},styled:function(){return r.zo},unstable_createMuiStrictModeTheme:function(){return r.Ol},useTheme:function(){return r.Fg},withStyles:function(){return r.D2},withTheme:function(){return r.Zz}});var r=n(11811)},20499:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(26024),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(6832)),s=n(74799);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}t.default=function(){var e=(0,s.useViewer)(),t=e.file,n=e.isPublic,r=e.isReadOnly,c=(0,o.default)({panelBlocksSpecs:(0,o.getPanelBlocksSpecs)(n),file:t});return c.map(function(e,o){return a.default.createElement(i.BottomSheetItem,{key:o,disableGutters:!0,disableElevation:o===c.length-1},a.default.createElement(e,{file:t,isPublic:n,isReadOnly:r}))})}},73204:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(45697)),s=r(n(67294)),c=n(16396),u=r(n(41496)),l=r(n(32419)),d=r(n(9047)),f=r(n(27108)),p=r(n(78727)),h=n(62125),v=function(e){var t,n=e.file,r=e.variant,o=(0,c.useClient)(),v=(0,h.useI18n)().t,m=s.default.createElement(l.default,{icon:f.default}),y=v("Viewer.download");var g=(t=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.collection("io.cozy.files").download(n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),p.default.info("Viewer.error.generic");case 8:case"end":return e.stop()}},e,null,[[0,5]])})),function(){return t.apply(this,arguments)});return"iconButton"===r?s.default.createElement(d.default,{className:"u-white","aria-label":y,onClick:g},m):"buttonIcon"===r?s.default.createElement(u.default,{variant:"secondary",label:m,"aria-label":y,onClick:g}):s.default.createElement(u.default,{fullWidth:!0,variant:"secondary",startIcon:m,label:y,onClick:g})};v.propTypes={file:o.default.object,variant:o.default.oneOf(["default","iconButton","buttonIcon"])},v.defaultProptypes={variant:"default"},t.default=v},27722:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=n(67294),o=n(95529),s=function(e){var t=e.children,n=e.file;return t?(0,o.mapToAllChildren)(t,function(e){return(0,i.cloneElement)(e,{file:n})}):null};s.displayName="FooterActionButtons",s.propTypes={children:a.default.oneOfType([a.default.node,a.default.arrayOf(a.default.node)]),file:a.default.object},t.default=s},77915:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(94184)),i=r(n(45697)),o=p(n(67294)),s=p(n(26024)),c=n(75910),u=r(n(20499)),l=n(95529),d=n(74799);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}var h=(0,c.makeStyles)(function(e){return{footer:{display:"flex",alignItems:"center",width:"calc(100% - 2rem)",height:"100%",paddingLeft:"1rem",paddingRight:"1rem",borderTop:"1px solid ".concat(e.palette.divider),columnGap:"0.5rem"},bottomSheetHeader:{columnGap:"0.5rem"}}}),v=function(e){var t=e.toolbarRef,n=e.children,r=h(),i=(0,d.useViewer)(),c=i.file,f=i.isPublic,p=(0,o.useMemo)(function(){return{ref:t}},[t]),v=(0,l.extractChildrenCompByName)({children:n,file:c,name:"FooterActionButtons"});return o.default.createElement(s.default,{toolbarProps:p,portalProps:{disablePortal:!0},settings:{isOpenMin:!!f,mediumHeightRatio:f?void 0:.5}},o.default.createElement(s.BottomSheetHeader,{className:(0,a.default)("u-ph-1 u-pb-1",r.bottomSheetHeader)},v),o.default.createElement(u.default,null))};v.propTypes={toolbarRef:i.default.object,children:i.default.oneOfType([i.default.node,i.default.arrayOf(i.default.node)])},t.default=v},67445:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"exportFilesNative",{enumerable:!0,get:function(){return g.exportFilesNative}});var a=r(n(87757)),i=r(n(48926)),o=r(n(45697)),s=r(n(67294)),c=n(16396),u=n(32672),l=n(25976),d=r(n(41496)),f=r(n(32419)),p=r(n(9047)),h=r(n(25735)),v=r(n(65719)),m=r(n(78727)),y=n(62125),g=n(95529),b=(0,l.isIOS)()?v.default:h.default,w=function(e){var t,n=e.file,r=e.variant,o=e.onClick,h=(0,y.useI18n)().t,v=(0,c.useClient)(),w=s.default.createElement(f.default,{icon:b}),k=h("Viewer.actions.forward");var x=(t=(0,i.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,l.isMobileApp)()){e.next=11;break}return e.prev=1,e.next=4,(0,g.exportFilesNative)(v,[t]);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),m.default.info("Viewer.error.".concat(e.t0),{fileMime:t.mime});case 9:e.next=22;break;case 11:return e.prev=11,e.next=14,(0,u.makeSharingLink)(v,[t.id]);case 14:n=e.sent,r={title:h("Viewer.share.title",{name:t.name}),text:h("Viewer.share.text",{name:t.name}),url:n},navigator.share(r),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(11),m.default.error("Viewer.share.error",{error:e.t1});case 22:case"end":return e.stop()}},e,null,[[1,6],[11,19]])})),function(e){return t.apply(this,arguments)}),O=function(){o?o():x(n)};return"iconButton"===r?s.default.createElement(p.default,{className:"u-white","aria-label":k,onClick:O},w):"buttonIcon"===r?s.default.createElement(d.default,{variant:"secondary",label:w,"aria-label":k,onClick:O}):s.default.createElement(d.default,{fullWidth:!0,variant:"secondary",startIcon:w,"data-testid":"openFileButton",label:k,onClick:O})};w.propTypes={file:o.default.object.isRequired,variant:o.default.oneOf(["default","iconButton","buttonIcon"]),onClick:o.default.func},w.defaultProptypes={variant:"default"},t.default=w},42003:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67154)),i=r(n(6479)),o=r(n(45697)),s=r(n(67294)),c=n(16396),u=r(n(73204)),l=r(n(67445)),d=n(95529),f=["file"],p=function(e){var t=e.file,n=(0,i.default)(e,f),r=(0,c.useClient)(),o=(0,d.shouldBeForwardButton)(r)?l.default:u.default;return s.default.createElement(o,(0,a.default)({file:t},n))};p.propTypes={file:o.default.object},t.default=p},45778:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=r(n(67294)),o=n(74122),s=r(n(32419)),c=r(n(9047)),u=r(n(53773)),l=n(15952),d=function(e){var t=e.className,n=e.file,r=e.variant,a=(0,l.useShareModal)().setShowShareModal;return"iconButton"===r?i.default.createElement(c.default,{className:"u-white",onClick:function(){return a(!0)}},i.default.createElement(s.default,{icon:u.default})):i.default.createElement(o.ShareButton,{className:t,fullWidth:!0,useShortLabel:!0,docId:n.id,onClick:function(){return a(!0)}})};d.propTypes={file:a.default.object,variant:a.default.oneOf(["default","iconButton"])},d.defaultProptypes={variant:"default"},t.default=d},95529:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.shouldBeForwardButton=t.mapToAllChildren=t.extractChildrenCompByName=t.exportFilesNative=void 0;var i=a(n(87757)),o=a(n(48926)),s=n(67294),c=n(34177),u=n(25976),l=a(n(78727));t.shouldBeForwardButton=function(e){var t,n=(null==e||null===(t=e.appMetadata)||void 0===t?void 0:t.slug)==="drive";return!!(0,u.isMobileApp)()||!!navigator.share&&!n||!1};var d=function(e){return 404===e.status?"Viewer.error.downloadFile.missing":"Viewer.error.missing"};t.exportFilesNative=(r=(0,o.default)(i.default.mark(function e(t,n,r){var a,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.map(function(){var e=(0,o.default)(i.default.mark(function e(n){var a,o,s,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection("io.cozy.files").fetchFileContentById(n.id);case 2:return a=e.sent,e.next=5,a.blob();case 5:return o=e.sent,s=r||n.name,e.next=9,(0,c.saveFileWithCordova)(o,s);case 9:return u=e.sent,e.abrupt("return",u.nativeURL);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.prev=1,l.default.info("Viewer.alert.preparing",{duration:Math.min(2e3*a.length,6e3)}),e.next=5,Promise.all(a);case 5:1===(s=e.sent).length&&(0,u.isIOS)()?window.plugins.socialsharing.shareWithOptions({url:s[0]},function(e){!0===e.completed&&l.default.success("Viewer.share.success")},function(e){throw e}):window.plugins.socialsharing.shareWithOptions({files:s},null,function(e){throw e}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),l.default.error(d(e.t0));case 12:case"end":return e.stop()}},e,null,[[1,9]])})),function(e,t,n){return r.apply(this,arguments)}),t.mapToAllChildren=function e(t,n){return s.Children.map(t,function(t){if(!(0,s.isValidElement)(t))return t;var r=t.props.children;return r?(0,s.cloneElement)(t,{children:e(r,n)}):n(t)})},t.extractChildrenCompByName=function(e){var t=e.children,n=e.file,r=e.name,a=s.Children.toArray(t).find(function(e){return e.type.name===r||e.type.displayName===r})||null;return(0,s.isValidElement)(a)?(0,s.cloneElement)(a,{file:n}):null}},62265:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=r(n(67294)),o=n(16396),s=n(67348),c=n(22960),u=r(n(36198)),l=n(24770),d=n(62125),f=function(e){var t=e.client,n=e.file,r=e.url,a=(0,d.useI18n)().t,o=(0,c.useWebviewIntent)();return i.default.createElement(u.default,{onClick:function(){return(0,s.downloadFile)({client:t,file:n,url:r,webviewIntent:o})},label:a("Viewer.download")})};f.propTypes={client:a.default.object.isRequired,file:l.FileDoctype,url:a.default.string},t.default=(0,o.withClient)(f)},3872:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(32419)),o=r(n(97082)),s=r(n(5193)),c=r(n(6327)),u=r(n(13631)),l=r(n(22788)),d=r(n(81115)),f=r(n(92026)),p=r(n(5507));t.default=function(e){var t;switch(e.type){case"bin":t=o.default;break;case"code":t=s.default;break;case"spreadsheet":t=l.default;break;case"slide":t=d.default;break;case"text":t=f.default;break;case"zip":t=p.default;break;case"pdf":t=u.default;break;default:t=c.default}return a.default.createElement(i.default,{icon:t,width:160,height:140})}},61933:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=r(n(67294)),o=n(24770),s=r(n(62265)),c=r(n(3872)),u="styles__viewer-noviewer___3HRGf",l="styles__viewer-filename___1-DIz",d=function(e){var t=e.file,n=e.url,r=e.renderFallbackExtraContent;return i.default.createElement("div",{className:u,"data-testid":"no-viewer"},i.default.createElement(c.default,{type:t.class}),i.default.createElement("p",{className:l},t.name),r(t,n))};d.propTypes={file:o.FileDoctype.isRequired,renderFallbackExtraContent:a.default.func,url:a.default.string},d.defaultProps={renderFallbackExtraContent:function(e,t){return i.default.createElement(s.default,{file:e,url:t})}},t.default=d},45974:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(61933))},68304:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=h(n(67294)),o=r(n(32419)),s=r(n(83631)),c=r(n(99037)),u=r(n(32692)),l=h(n(75301)),d=n(62125),f=r(n(35525));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}var v="styles__ActionMenuDesktop-ActionMenu___xxTwZ",m=(0,i.forwardRef)(function(e,t){var n=e.actions,r=e.isEditable,a=e.onClose,p=(0,d.useI18n)().t;return i.default.createElement(l.default,{className:v,onClose:a,anchorElRef:t},r&&i.default.createElement(f.default,{action:"OPEN",doctype:"io.cozy.files.paper",options:{path:n.edit.path},onComplete:a,onDismiss:a},i.default.createElement(l.ActionMenuItem,{left:i.default.createElement(o.default,{icon:c.default,color:"var(--iconTextColor)"})},i.default.createElement(u.default,null,p("Viewer.panel.qualification.actions.edit")))),i.default.createElement(l.ActionMenuItem,{onClick:n.copy.onClick,left:i.default.createElement(o.default,{icon:s.default,color:"var(--iconTextColor)"})},i.default.createElement(u.default,null,p("Viewer.panel.qualification.actions.copy"))))});m.displayName="ActionMenuDesktop",m.propTypes={actions:a.default.shape({copy:a.default.object,edit:a.default.object}),isEditable:a.default.bool,onClose:a.default.func},t.default=m},26463:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=r(n(67294)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(26024)),s=r(n(32419)),c=r(n(83631)),u=r(n(99037)),l=r(n(24546)),d=r(n(10059)),f=r(n(96105)),p=r(n(11075)),h=n(62125),v=r(n(35525));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}var y=function(e){var t=e.actions,n=e.isEditable,r=e.onClose,a=(0,h.useI18n)().t;return i.default.createElement(o.default,{backdrop:!0,onClose:r},i.default.createElement(o.BottomSheetItem,{disableGutters:!0},i.default.createElement(l.default,null,n&&i.default.createElement(v.default,{action:"OPEN",doctype:"io.cozy.files.paper",options:{path:t.edit.path},onComplete:r,onDismiss:r},i.default.createElement(d.default,{button:!0},i.default.createElement(f.default,null,i.default.createElement(s.default,{icon:u.default})),i.default.createElement(p.default,{primary:a("Viewer.panel.qualification.actions.edit")}))),i.default.createElement(d.default,{button:!0,onClick:t.copy.onClick},i.default.createElement(f.default,null,i.default.createElement(s.default,{icon:c.default})),i.default.createElement(p.default,{primary:a("Viewer.panel.qualification.actions.copyClipboard")})))))};y.propTypes={actions:a.default.shape({copy:a.default.object,edit:a.default.object}),isEditable:a.default.bool,onClose:a.default.func},t.default=y},11897:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(45697)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=n(56664),u=r(n(89909)),l=n(62125),d=r(n(68304)),f=r(n(26463)),p=n(33488),h=n(74799);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}var m=(0,s.forwardRef)(function(e,t){var n,r=e.optionFile,o=e.isReadOnly,v=e.onClose,m=r.name,y=r.value,g=(0,u.default)().isMobile,b=(0,h.useViewer)().file,w=(0,l.useI18n)().t,k=(0,c.useAlert)().showAlert,x=(0,p.isEditableAttribute)(m,b)&&!o,O="contact"===m?"".concat(b.metadata.qualification.label,"/").concat(b._id,"/edit/contact"):"".concat(b.metadata.qualification.label,"/").concat(b._id,"/edit/information?metadata=").concat(r.name);var C=(n=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(y);case 3:k({message:w("Viewer.snackbar.copiedToClipboard.success"),severity:"success",variant:"filled",icon:!1}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),k({message:w("Viewer.snackbar.copiedToClipboard.error"),severity:"error",variant:"filled",icon:!1});case 9:v();case 10:case"end":return e.stop()}},e,null,[[0,6]])})),function(){return n.apply(this,arguments)});return g?s.default.createElement(f.default,{actions:{copy:{onClick:C},edit:{path:O}},isEditable:x,onClose:v}):s.default.createElement(d.default,{ref:t,actions:{copy:{onClick:C},edit:{path:O}},isEditable:x,onClose:v})});m.displayName="ActionMenuWrapper",m.propTypes={file:o.default.object,optionFile:o.default.shape({name:o.default.string,value:o.default.oneOfType([o.default.string,o.default.number])}),isReadOnly:o.default.bool,onClose:o.default.func},t.default=m},41628:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(63038)),i=r(n(18721)),o=r(n(45697)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(24321)),u=n(13873),l=r(n(95335)),d=r(n(32419)),f=r(n(9047)),p=r(n(70809)),h=r(n(65786)),v=r(n(42725)),m=r(n(65600)),y=r(n(35039)),g=r(n(59639)),b=r(n(94079)),w=r(n(24546)),k=r(n(10059)),x=r(n(96105)),O=r(n(55392)),C=r(n(11075)),S=n(62125),E=n(28202),P=n(58136);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}var A=function(e){var t=e.file,n=e.isPublic,r=e.t,o=(0,s.useState)(!1),P=(0,a.default)(o,2),_=P[0],A=P[1],R=(0,S.useI18n)(),D=R.f,M=R.lang,T=(0,E.makeFormat)(t),j=(0,E.makePath)(t),N=(0,E.makeSize)(t.size),I=D(t.created_at,(0,E.makeDate)(M)),L=D(t.updated_at,(0,E.makeDate)(M)),z=(0,i.default)(t,"metadata.carbonCopy"),Z=(0,i.default)(t,"metadata.electronicSafe"),B=(0,s.useRef)(),F=(0,u.makeActions)([u.viewInDrive]);return s.default.createElement(w.default,null,s.default.createElement(k.default,null,s.default.createElement(x.default,null,s.default.createElement(d.default,{icon:m.default})),s.default.createElement(C.default,{primary:r("Viewer.panel.informations.format.title",{format:T}),secondary:r("Viewer.panel.informations.format.subtitle")})),s.default.createElement(k.default,null,s.default.createElement(x.default,null,s.default.createElement(d.default,{icon:b.default})),s.default.createElement(C.default,{primary:N,secondary:r("Viewer.panel.informations.size")})),s.default.createElement(k.default,null,s.default.createElement(x.default,null,s.default.createElement(d.default,{icon:y.default})),s.default.createElement(C.default,{primary:j,secondary:r("Viewer.panel.informations.location")}),!n&&s.default.createElement(O.default,null,s.default.createElement(f.default,{ref:B,onClick:function(){return A(function(e){return!e})}},s.default.createElement(d.default,{icon:v.default})))),_&&s.default.createElement(c.default,{ref:B,open:!0,docs:[t],actions:F,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoClose:!0,onClose:function(){return A(!1)}},s.default.createElement(l.default,null,s.default.createElement(C.default,{primary:r("Viewer.panel.informations.location"),primaryTypographyProps:{align:"center",variant:"h6"}}))),s.default.createElement(k.default,null,s.default.createElement(x.default,null,s.default.createElement(d.default,{icon:p.default})),s.default.createElement(C.default,{primary:I,secondary:r("Viewer.panel.informations.creation")})),s.default.createElement(k.default,null,s.default.createElement(x.default,null,s.default.createElement(d.default,{icon:p.default})),s.default.createElement(C.default,{primary:L,secondary:r("Viewer.panel.informations.modification")})),z&&s.default.createElement(k.default,{ellipsis:!1},s.default.createElement(x.default,null,s.default.createElement(d.default,{icon:h.default})),s.default.createElement(C.default,{primary:r("Viewer.panel.certifications.carbonCopy.title"),secondary:r("Viewer.panel.certifications.carbonCopy.caption")})),Z&&s.default.createElement(k.default,{ellipsis:!1},s.default.createElement(x.default,null,s.default.createElement(d.default,{icon:g.default})),s.default.createElement(C.default,{primary:r("Viewer.panel.certifications.electronicSafe.title"),secondary:r("Viewer.panel.certifications.electronicSafe.caption")})))};A.propTypes={file:o.default.object.isRequired,isPublic:o.default.bool,t:o.default.func},t.default=(0,P.withViewerLocales)(A)},95519:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(94184)),i=r(n(67294)),o=r(n(9758)),s=r(n(8421)),c=r(n(32692)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(6832)),l=n(58136),d=n(74799);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}t.default=(0,l.withViewerLocales)(function(e){var t=e.t,n=(0,d.useViewer)(),r=n.file,l=n.isPublic,f=n.componentsProps,p=n.isReadOnly,h=(0,u.default)({panelBlocksSpecs:(0,u.getPanelBlocksSpecs)(l,null==f?void 0:f.panel),file:r});return i.default.createElement(s.default,{spacing:"s",className:(0,a.default)("u-flex u-flex-column u-h-100")},i.default.createElement(o.default,{className:"u-flex u-flex-items-center u-h-3 u-ph-2 u-flex-shrink-0",elevation:2,square:!0},i.default.createElement(c.default,{variant:"h4"},t("Viewer.panel.title"))),h.map(function(e,t){return i.default.createElement(o.default,{key:t,className:(0,a.default)({"u-flex-grow-1":t===h.length-1}),elevation:2,square:!0},i.default.createElement(e,{file:r,isPublic:l,isReadOnly:p}))}))})},40987:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(63038)),i=r(n(45697)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),s=n(34259),c=n(67348),u=n(87067),l=r(n(20958)),d=r(n(24546)),f=r(n(2182)),p=r(n(11897)),h=r(n(96027)),v=r(n(40291)),m=r(n(1665)),y=r(n(32594)),g=r(n(80494)),b=r(n(58147)),w=n(28202),k=r(n(71136)),x=n(58136);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}var C={contact:h.default,date:v.default,information:m.default,other:y.default,bills:m.default},S=function(e){var t=e.file,n=e.isReadOnly,r=t.metadata,i=(0,o.useRef)([]),h=(0,o.useState)(!1),v=(0,a.default)(h,2),m=v[0],y=v[1],x=(0,o.useState)({id:"",name:"",value:""}),O=(0,a.default)(x,2),S=O[0],E=O[1],P=(0,w.makeFormattedMetadataQualification)(t,void 0===r?{}:r),_=(0,c.hasQualifications)(t)&&P.length>1,A=function(e,t,n){E(function(r){return r.value?{id:"",name:"",value:""}:{id:e,name:t,value:n}})};return(0,o.useEffect)(function(){i.current=P.map(function(e,t){var n;return null!==(n=i.current[t])&&void 0!==n?n:(0,o.createRef)()})},[P]),o.default.createElement(o.default.Fragment,null,(0,u.isExpiringSoon)(t)&&!(0,w.isExpirationAlertHidden)(t)&&o.default.createElement(k.default,null),(0,s.hasSupportedQualification)(t)?o.default.createElement(g.default,{file:t,isReadOnly:n,onClick:function(){return y(!0)}}):o.default.createElement(b.default,{file:t,isReadOnly:n,onClick:function(){return y(!0)}}),m&&o.default.createElement(f.default,{file:t,onClose:function(){return y(!1)}}),_&&o.default.createElement(d.default,null,P.map(function(e,r){var a=e.name,s=C[(0,u.getMetadataQualificationType)(a)],c=(0,w.makeHideDivider)(P,r);return o.default.createElement(o.Fragment,{key:r},o.default.createElement(s,{file:t,isReadOnly:n,ref:i.current[r],formattedMetadataQualification:e,toggleActionsMenu:function(e){return A(r,a,e)}}),!c&&o.default.createElement(l.default,{component:"li",variant:"inset"}))}),S.name&&o.default.createElement(p.default,{ref:i.current[S.id],optionFile:S,isReadOnly:n,onClose:function(){E({id:"",name:"",value:""})}})))};S.propTypes={file:i.default.object.isRequired},t.default=(0,x.withViewerLocales)(S)},96027:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(45697)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=n(87067),u=n(13873),l=r(n(32419)),d=r(n(9047)),f=r(n(42725)),p=r(n(77107)),h=r(n(10059)),v=r(n(96105)),m=r(n(55392)),y=r(n(88495)),g=n(56664),b=n(62125),w=r(n(20112)),k=r(n(35525)),x=r(n(34550));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}var C=(0,s.forwardRef)(function(e,t){var n,r=e.file,o=e.isReadOnly,O=e.toggleActionsMenu,C=(0,b.useI18n)().lang,S=(0,x.default)(r),E=S.contacts,P=S.isLoadingContacts,_=(0,g.useAlert)().showAlert;if(P)return s.default.createElement(h.default,null,s.default.createElement(y.default,{color:"var(--secondaryTextColor)"}));var A=(0,c.formatContactValue)(E);if(!A)return null;var R=(0,c.getTranslatedNameForContact)({lang:C}),D=r.metadata.qualification.label;var M=(n=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,u.copyToClipboard)().action(void 0,{showAlert:_,copyValue:A});case 4:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return s.default.createElement(s.default.Fragment,null,s.default.createElement(k.default,{action:"OPEN",doctype:"io.cozy.files.paper",options:{path:"".concat(D,"/").concat(r._id,"/edit/contact")},disabled:!!A||o},s.default.createElement(h.default,{button:!!A||!o,onClick:M},s.default.createElement(v.default,null,s.default.createElement(l.default,{icon:p.default})),s.default.createElement(w.default,{primary:R,secondary:A}),s.default.createElement(m.default,null,s.default.createElement(d.default,{ref:t,onClick:function(){return O("contact",A)}},s.default.createElement(l.default,{icon:f.default}))))))});C.displayName="QualificationListItemContact",C.propTypes={file:o.default.object.isRequired,isReadOnly:o.default.bool},t.default=C},40291:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(45697)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=n(87067),u=n(13873),l=r(n(32419)),d=r(n(9047)),f=r(n(70809)),p=r(n(42725)),h=r(n(73905)),v=r(n(10059)),m=r(n(96105)),y=r(n(55392)),g=r(n(32692)),b=n(56664),w=n(62125),k=r(n(20112)),x=r(n(14073)),O=r(n(35525));function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}var S=(0,s.forwardRef)(function(e,t){var n,r=e.file,o=e.isReadOnly,C=e.formattedMetadataQualification,S=e.toggleActionsMenu,E=(0,w.useI18n)(),P=E.f,_=E.lang,A=(0,b.useAlert)().showAlert,R=C.name,D=C.value,M=r.metadata.qualification.label,T=(0,c.getTranslatedNameForDateMetadata)(R,{lang:_}),j=(0,c.formatDateMetadataValue)(D,{f:P,lang:_}),N="expirationDate"===R;var I=(n=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,u.copyToClipboard)().action(void 0,{showAlert:A,copyValue:D});case 4:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return s.default.createElement(O.default,{action:"OPEN",doctype:"io.cozy.files.paper",options:{path:"".concat(M,"/").concat(r._id,"/edit/information?metadata=").concat(R)},disabled:!!D||o},s.default.createElement(v.default,{button:!!D||!o,onClick:I},s.default.createElement(m.default,null,s.default.createElement(l.default,{icon:f.default})),s.default.createElement(k.default,{primary:D?T:void 0,secondary:D?s.default.createElement(s.default.Fragment,null,s.default.createElement(g.default,{component:"span",variant:"inherit"},j),N&&((0,c.isExpired)(r)||(0,c.isExpiringSoon)(r))&&s.default.createElement(s.default.Fragment,null,s.default.createElement(g.default,{component:"span",variant:"inherit"}," \xb7 "),s.default.createElement(x.default,null))):T,disabled:!D}),D?s.default.createElement(y.default,null,s.default.createElement(d.default,{ref:t,onClick:function(){return S(j)}},s.default.createElement(l.default,{icon:p.default}))):!o&&s.default.createElement(m.default,null,s.default.createElement(l.default,{icon:h.default,color:"var(--secondaryTextColor)"}))))});S.displayName="QualificationListItemDate",S.propTypes={file:o.default.object.isRequired,isReadOnly:o.default.bool,formattedMetadataQualification:o.default.shape({name:o.default.string,value:o.default.string}).isRequired,toggleActionsMenu:o.default.func.isRequired},t.default=S},1665:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(45697)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=n(87067),u=n(13873),l=r(n(32419)),d=r(n(9047)),f=r(n(74841)),p=r(n(29712)),h=r(n(9603)),v=r(n(42725)),m=r(n(17699)),y=r(n(20240)),g=r(n(28558)),b=r(n(73905)),w=r(n(10059)),k=r(n(96105)),x=r(n(55392)),O=r(n(1756)),C=n(56664),S=n(62125),E=r(n(20112)),P=r(n(35525));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}var A=[g.default,g.default,y.default,m.default,h.default,m.default,p.default,g.default,g.default,f.default],R=(0,s.forwardRef)(function(e,t){var n,r,o=e.formattedMetadataQualification,f=e.file,p=e.isReadOnly,h=e.toggleActionsMenu,m=(0,S.useI18n)().lang,y=(0,C.useAlert)().showAlert,g=o.name,_=o.value,R=f.metadata.qualification.label,D=(0,c.getTranslatedNameForInformationMetadata)(g,{lang:m,qualificationLabel:R}),M=(0,c.formatInformationMetadataValue)(_,{lang:m,name:g,qualificationLabel:R});var T=(n=g,A[c.KNOWN_INFORMATION_METADATA_NAMES.findIndex(function(e){return e===n})]),j=D===g?s.default.createElement(O.default,{text:g}):D;var N=(r=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,u.copyToClipboard)().action(void 0,{showAlert:y,copyValue:_});case 4:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)});return s.default.createElement(P.default,{action:"OPEN",doctype:"io.cozy.files.paper",options:{path:"".concat(R,"/").concat(f._id,"/edit/information?metadata=").concat(g)},disabled:!!_||p},s.default.createElement(w.default,{button:!!_||!p,onClick:N},s.default.createElement(k.default,null,s.default.createElement(l.default,{icon:T})),s.default.createElement(E.default,{primary:_?j:void 0,secondary:_?M:j,disabled:!_}),_?s.default.createElement(x.default,null,s.default.createElement(d.default,{ref:t,onClick:function(){return h(_)},"data-testid":"toggleActionsMenuBtn"},s.default.createElement(l.default,{icon:v.default}))):!p&&s.default.createElement(k.default,null,s.default.createElement(l.default,{icon:b.default,color:"var(--secondaryTextColor)"}))))});R.displayName="QualificationListItemNumber",R.propTypes={file:o.default.object.isRequired,isReadOnly:o.default.bool,formattedMetadataQualification:o.default.shape({name:o.default.string,value:o.default.oneOfType([o.default.string,o.default.number])}).isRequired,toggleActionsMenu:o.default.func.isRequired},t.default=R},32594:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(45697)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=n(87067),u=n(13873),l=r(n(32419)),d=r(n(9047)),f=r(n(42725)),p=r(n(93460)),h=r(n(73905)),v=r(n(10059)),m=r(n(96105)),y=r(n(55392)),g=r(n(1756)),b=n(56664),w=n(62125),k=r(n(20112)),x=r(n(35525));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}var C=(0,s.forwardRef)(function(e,t){var n,r=e.file,o=e.isReadOnly,O=e.formattedMetadataQualification,C=e.toggleActionsMenu,S=(0,w.useI18n)().lang,E=(0,b.useAlert)().showAlert,P=O.name,_=O.value,A=r.metadata.qualification.label;if(!_)return null;var R=(0,c.getTranslatedNameForOtherMetadata)(P,{lang:S}),D=(0,c.formatOtherMetadataValue)(_,{lang:S,name:P});var M=(n=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,u.copyToClipboard)().action(void 0,{showAlert:E,copyValue:_});case 4:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return s.default.createElement(x.default,{action:"OPEN",doctype:"io.cozy.files.paper",options:{path:"".concat(A,"/").concat(r._id,"/edit/information?metadata=").concat(P)},disabled:!!_||o},s.default.createElement(v.default,{button:!!_||!o,onClick:M},s.default.createElement(m.default,null,s.default.createElement(l.default,{icon:p.default})),s.default.createElement(k.default,{primary:_?R:void 0,secondary:_?s.default.createElement(g.default,{text:D}):R}),_?s.default.createElement(y.default,null,s.default.createElement(d.default,{ref:t,onClick:function(){return C(D)}},s.default.createElement(l.default,{icon:f.default}))):!o&&s.default.createElement(m.default,null,s.default.createElement(l.default,{icon:h.default,color:"var(--secondaryTextColor)"}))))});C.displayName="QualificationListItemOther",C.propTypes={file:o.default.object.isRequired,isReadOnly:o.default.bool,formattedMetadataQualification:o.default.shape({name:o.default.string,value:o.default.string}).isRequired,toggleActionsMenu:o.default.func.isRequired},t.default=C},80494:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=r(n(67294)),o=n(87067),s=r(n(32419)),c=r(n(73905)),u=r(n(10059)),l=r(n(96105)),d=r(n(11075)),f=r(n(1756)),p=r(n(33520)),h=n(62125),v=n(28202),m=function(e){var t=e.file,n=e.isReadOnly,r=e.onClick,a=(0,h.useI18n)().lang,m=t.metadata.qualification.label,y=(0,o.formatOtherMetadataValue)(m,{lang:a,name:"qualification"});return i.default.createElement(u.default,{size:"large",divider:!0,button:(0,v.canEditQualification)(t,n),onClick:(0,v.canEditQualification)(t,n)?r:void 0},i.default.createElement(l.default,null,i.default.createElement(p.default,{qualification:m})),i.default.createElement(d.default,{primary:i.default.createElement(f.default,{text:y}),primaryTypographyProps:{variant:"h6"}}),(0,v.canEditQualification)(t,n)&&i.default.createElement(l.default,null,i.default.createElement(s.default,{icon:c.default,color:"var(--secondaryTextColor)"})))};m.displayName="QualificationListItemQualification",m.propTypes={file:a.default.object,onClick:a.default.func},t.default=m},58147:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=r(n(67294)),o=r(n(32419)),s=r(n(47629)),c=r(n(73905)),u=r(n(24546)),l=r(n(10059)),d=r(n(96105)),f=r(n(11075)),p=n(28202),h=n(58136),v=function(e){var t=e.file,n=e.isReadOnly,r=e.t,a=e.onClick;return i.default.createElement(u.default,null,i.default.createElement(l.default,{button:(0,p.canEditQualification)(t,n),onClick:(0,p.canEditQualification)(t,n)?a:void 0},i.default.createElement(d.default,null,i.default.createElement(o.default,{icon:s.default})),i.default.createElement(f.default,{style:{color:"var(--disabledTextColor)"},primaryTypographyProps:{color:"inherit"},secondaryTypographyProps:{color:"inherit"},primary:r("Viewer.panel.qualification.empty.primary"),secondary:r("Viewer.panel.qualification.empty.secondary")}),(0,p.canEditQualification)(t,n)&&i.default.createElement(d.default,null,i.default.createElement(o.default,{icon:c.default,color:"var(--secondaryTextColor)"}))))};v.propTypes={onClick:a.default.func},t.default=(0,h.withViewerLocales)(v)},20112:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67154)),i=r(n(6479)),o=r(n(45697)),s=r(n(67294)),c=r(n(11075)),u=r(n(32692)),l=["primary","secondary","disabled"],d=function(e){var t=e.primary,n=e.secondary,r=e.disabled,o=(0,i.default)(e,l);return s.default.createElement(c.default,(0,a.default)({},o,{disableTypography:!0,primary:s.default.createElement(u.default,{variant:"caption"},t),secondary:s.default.createElement(u.default,{component:"div",variant:"body1",style:r?{color:"var(--disabledTextColor)"}:void 0},n)}))};d.propTypes={primary:o.default.string,secondary:o.default.oneOfType([o.default.string,o.default.node]).isRequired,disabled:o.default.bool},t.default=d},28632:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=r(n(67294)),o=n(74122),s=r(n(32419)),c=r(n(73905)),u=r(n(24546)),l=r(n(10059)),d=r(n(96105)),f=r(n(11075)),p=r(n(88495)),h=n(58136),v=n(15952),m=function(e){var t=e.file,n=e.t,r=(0,v.useShareModal)().setShowShareModal,a=(0,o.useSharingContext)(),h=a.isOwner,m=a.getDocumentPermissions,y=a.getSharingLink,g=a.allLoaded,b=a.hasSharedParent,w=a.getRecipients,k=b(t.path)?t.dir_id:t._id,x=w(k),O=m(k),C=y(k),S=h(k);return i.default.createElement(i.default.Fragment,null,i.default.createElement(l.default,{size:"large",divider:!0,button:!0,onClick:function(){return r(!0)}},i.default.createElement(f.default,{primary:i.default.createElement(i.default.Fragment,null,n("Viewer.panel.sharing"),!g&&i.default.createElement(p.default,{className:"u-ml-half",noMargin:!0})),primaryTypographyProps:{variant:"h6"}}),i.default.createElement(d.default,null,i.default.createElement(s.default,{icon:c.default,color:"var(--secondaryTextColor)"}))),i.default.createElement(u.default,null,i.default.createElement(o.LinkRecipientLite,{permissions:O,link:C}),x.length>0?x.map(function(e){return i.default.createElement(o.MemberRecipientLite,{key:e.index,recipient:e,isOwner:S})}):i.default.createElement(o.OwnerRecipientDefaultLite,null)))};m.propTypes={file:a.default.object.isRequired,t:a.default.func},t.default=(0,h.withViewerLocales)(m)},14631:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(63038)),s=r(n(45697)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),u=r(n(24321)),l=n(13873),d=r(n(95335)),f=r(n(32419)),p=r(n(9047)),h=r(n(42725)),v=r(n(73905)),m=r(n(61568)),y=r(n(24546)),g=r(n(10059)),b=r(n(96105)),w=r(n(55392)),k=r(n(11075)),x=n(56664),O=r(n(20112)),C=r(n(75131)),S=n(58136);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}var P=function(e){var t,n,r=e.file,s=e.isReadOnly,S=e.t,E=(0,c.useState)(!1),P=(0,o.default)(E,2),_=P[0],A=P[1],R=(0,c.useState)(!1),D=(0,o.default)(R,2),M=D[0],T=D[1],j=(0,c.useRef)(),N=(0,x.useAlert)().showAlert,I=S("Viewer.panel.summary"),L=null===(n=r.metadata)||void 0===n?void 0:n.description,z=(0,l.makeActions)([l.copyToClipboard,!s&&l.editAttribute]);var Z=(t=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=7;break}return e.next=5,(0,l.copyToClipboard)().action(void 0,{showAlert:N,copyValue:L});case 5:e.next=8;break;case 7:A(!0);case 8:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return c.default.createElement(y.default,null,c.default.createElement(g.default,{button:!s,onClick:Z},c.default.createElement(b.default,null,c.default.createElement(f.default,{icon:m.default})),c.default.createElement(O.default,{style:{wordBreak:"break-word"},primary:L?I:void 0,secondary:L||I,disabled:!L}),L?c.default.createElement(w.default,null,c.default.createElement(p.default,{ref:j,onClick:function(){return T(function(e){return!e})}},c.default.createElement(f.default,{icon:h.default}))):!s&&c.default.createElement(b.default,null,c.default.createElement(f.default,{icon:v.default,color:"var(--secondaryTextColor)"}))),_&&c.default.createElement(C.default,{file:r,onClose:function(){return A(!1)}}),M&&c.default.createElement(u.default,{ref:j,open:!0,docs:[r],actions:z,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoClose:!0,componentsProps:{actionsItems:{actionOptions:{showAlert:N,copyValue:L,editAttributeCallback:function(){return A(!0)}}}},onClose:function(){return T(!1)}},c.default.createElement(d.default,null,c.default.createElement(k.default,{primary:I,primaryTypographyProps:{align:"center",variant:"h6"}}))))};P.propTypes={file:s.default.object.isRequired,t:s.default.func},t.default=(0,S.withViewerLocales)(P)},75131:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(59713)),o=r(n(48926)),s=r(n(63038)),c=r(n(45697)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),l=n(16396),d=r(n(41496)),f=n(40137),p=r(n(23153)),h=n(58136);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=function(e){var t,n,r=e.file,i=e.t,c=e.onClose,h=(0,u.useState)(null===(n=r.metadata)||void 0===n?void 0:n.description),v=(0,s.default)(h,2),m=v[0],g=v[1],b=(0,u.useState)(!1),w=(0,s.default)(b,2),k=w[0],x=w[1],O=(0,l.useClient)();var C=(t=(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,O.collection("io.cozy.files").updateMetadataAttribute(r._id,y(y({},r.metadata),{},{description:m}));case 3:c();case 4:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return u.default.createElement(f.ConfirmDialog,{open:!0,title:i("Viewer.panel.summary"),content:u.default.createElement(p.default,{multiline:!0,value:m,rows:4,autoFocus:!0,fullWidth:!0,required:!0,variant:"outlined",onChange:function(e){return g(e.target.value)}}),actions:u.default.createElement(u.default.Fragment,null,u.default.createElement(d.default,{className:"u-miw-4",variant:"secondary",label:i("Viewer.cancel"),onClick:c}),u.default.createElement(d.default,{className:"u-miw-4",label:i("Viewer.ok"),busy:k,onClick:C})),onClose:c})};g.propTypes={file:c.default.object.isRequired,t:c.default.func,onClose:c.default.func},t.default=(0,h.withViewerLocales)(g)},6832:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getPanelBlocksSpecs=t.default=void 0;var a=n(67348),i=r(n(10505)),o=r(n(41628)),s=r(n(40987)),c=r(n(28632)),u=r(n(14631));t.getPanelBlocksSpecs=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return{qualifications:{condition:function(){var e;return!(null!=t&&null!==(e=t.qualifications)&&void 0!==e&&e.disabled)},component:s.default},summary:{condition:function(){var e;return!(null!=t&&null!==(e=t.summary)&&void 0!==e&&e.disabled)},component:u.default},konnector:{condition:function(n){var r;return!(null!=t&&null!==(r=t.konnector)&&void 0!==r&&r.disabled)&&(0,a.isFromKonnector)(n)&&!e},component:i.default},informations:{condition:function(){var e;return!(null!=t&&null!==(e=t.informations)&&void 0!==e&&e.disabled)},component:o.default},sharing:{condition:function(){var n;return!(null!=t&&null!==(n=t.sharing)&&void 0!==n&&n.disabled)&&!e},component:c.default}}};t.default=function(e){var t=e.panelBlocksSpecs,n=e.file,r=[];return Object.values(t).forEach(function(e){e.condition(n)&&r.push(e.component)}),r}},28202:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.metadataByQualificationLabel=t.makeSize=t.makePath=t.makeHideDivider=t.makeFormattedMetadataQualification=t.makeFormat=t.makeDate=t.isExpirationAlertHidden=t.canEditQualification=void 0;var a=r(n(27361)),i=n(67348),o=n(87067);t.makeFormat=function(e){return((0,i.splitFilename)(e).extension.replace(".","")||e.class).toUpperCase()},t.makeDate=function(e){return"fr"===e?"dd LLL yyyy \xe0 HH:mm":"LLL dd yyyy at HH:mm"},t.makeSize=function(e){if(!+e)return"0";var t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(2))," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t])},t.makePath=function(e){var t;return null===(t=e.path)||void 0===t?void 0:t.replace("/".concat(e.name),"")},t.makeHideDivider=function(e,t){var n=e.at(-1),r=t===e.length-1,a=t===e.length-2;return r||a&&"contact"===n.name};var s=t.metadataByQualificationLabel={accommodation_proof:["issueDate"],bank_details:["number","bicNumber"],bank_statement:["referencedDate"],birth_certificate:[],caf:["number","issueDate"],car_insurance:[],condition_report:["date"],diploma:["referencedDate"],divorce:[],driver_license:["number","country","AObtentionDate","BObtentionDate","CObtentionDate","DObtentionDate","expirationDate","noticePeriod"],electoral_card:["referencedDate"],employment_center_certificate:["referencedDate"],energy_invoice:["issueDate"],expense_claim:["referencedDate"],family_record_book:[],fidelity_card:["number","expirationDate","noticePeriod"],health_certificate:["referencedDate"],health_insurance_card:["expirationDate","noticePeriod"],house_insurance:["referencedDate"],identity_photo:["shootingDate"],isp_invoice:["issueDate"],lease:["date"],loan_agreement:["issueDate"],national_health_insurance_card:["number","issueDate"],national_health_insurance_right_certificate:["referencedDate"],national_id_card:["number","country","expirationDate","noticePeriod"],note_activity_document:[],note_family_document:[],note_finance:[],note_health_document:[],note_house_document:[],note_identity_document:[],note_invoice:[],note_transport_document:[],note_work_document:[],other_activity_document:["date"],other_administrative_document:["referencedDate"],other_bank_document:["date"],other_family_document:["date"],other_health_document:["date"],other_house_document:["date"],other_identity_document:["date"],other_invoice:["issueDate"],other_revenue:["referencedDate"],other_transport_document:["date"],other_work_document:["date"],pacs:["referencedDate"],passport:["country","number","expirationDate","noticePeriod"],pay_sheet:["number","netSocialAmount","employerName","referencedDate"],payment_proof_family_allowance:["number","issueDate"],phone_invoice:["issueDate"],pregnancy_medical_certificate:["referencedDate"],prescription:["referencedDate"],real_estate_tax:["number","referencedDate"],rent_receipt:["referencedDate"],residence_permit:["country","number","expirationDate","noticePeriod"],resume:["referencedDate"],school_attendance_certificate:["referencedDate"],school_insurance_certificate:["referencedDate"],single_parent_benefit:["referencedDate"],student_card:["referencedDate"],tax_certificate:["referencedDate"],tax_notice:["number","refTaxIncome","referencedDate"],tax_return:["number","referencedDate"],tax_timetable:["number","referencedDate"],transport_card:["expirationDate","noticePeriod"],transport_invoice:["issueDate"],unemployment_benefit:["referencedDate"],unfit_for_habitation_declaration:["issueDate"],vehicle_registration:["vehicle.licenseNumber","number","vehicle.confidentialNumber"],water_invoice:["issueDate"],work_contract:["contractType","date"],work_disability_recognition:["referencedDate"],work_quote:[]};t.makeFormattedMetadataQualification=function(e){var t,n,r=null===(t=e.metadata)||void 0===t||null===(t=t.qualification)||void 0===t?void 0:t.label,i=null===(n=e.bills)||void 0===n||null===(n=n.data)||void 0===n?void 0:n[0];if(!r)return[];var c=s[r],u=c?c.reduce(function(t,n){return t.push({name:n,value:(0,a.default)(e,"metadata.".concat(n))}),t},[]):[],l=i?o.KNOWN_BILLS_ATTRIBUTES_NAMES.map(function(e){return{name:e,value:i[e]}}):[];return u.concat(l).concat([{name:"contact",value:null}])},t.isExpirationAlertHidden=function(e){var t,n;return null!==(t=null==e||null===(n=e.metadata)||void 0===n?void 0:n.hideExpirationAlert)&&void 0!==t&&t},t.canEditQualification=function(e,t){return!(0,i.isFromKonnector)(e)&&!t}},25649:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(81506)),s=r(n(2205)),c=r(n(78585)),u=r(n(29754)),l=r(n(59713)),d=r(n(45697)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),p=r(n(61950)),h=r(n(85230)),v=n(70323);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=function(e){(0,s.default)(d,e);var t,n,r=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function d(){var e;return(0,a.default)(this,d),e=r.call(this),(0,l.default)((0,o.default)(e),"onKeyUp",function(t){37===t.keyCode?e.onPrevious():39===t.keyCode?e.onNext():27===t.keyCode&&e.onClose()}),(0,l.default)((0,o.default)(e),"onNext",function(){var t=e.props,n=t.files,r=t.currentIndex;if(r!==n.length-1){var a=r+1,i=n[a];e.onChange(i,a)}}),(0,l.default)((0,o.default)(e),"onPrevious",function(){var t=e.props,n=t.files,r=t.currentIndex;if(0!==r){var a=r-1,i=n[a];e.onChange(i,a)}}),(0,l.default)((0,o.default)(e),"onClose",function(){e.props.onCloseRequest&&e.props.onCloseRequest()}),e}return(0,i.default)(d,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.onKeyUp,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.onKeyUp,!1)}},{key:"onChange",value:function(e,t){this.props.onChangeRequest&&this.props.onChangeRequest(e,t)}},{key:"render",value:function(){var e=this.props,t=e.hasPrevious,n=e.hasNext,r=e.toolbarRef,a=e.showNavigation,i=e.renderFallbackExtraContent,o=e.validForPanel,s=e.children,c=e.componentsProps;return f.default.createElement(f.default.Fragment,null,f.default.createElement(h.default,{hasPrevious:t,hasNext:n,toolbarProps:g(g({},c.toolbarProps),{},{toolbarRef:r}),showNavigation:a,showInfoPanel:o,onPrevious:this.onPrevious,onNext:this.onNext,onClose:this.onClose},s,f.default.createElement(p.default,{renderFallbackExtraContent:i,componentsProps:c,onClose:this.onClose})))}}]),d}(f.Component);b.propTypes={hasNext:d.default.bool,hasPrevious:d.default.bool,onCloseRequest:d.default.func,onChangeRequest:d.default.func,toolbarRef:d.default.object,showNavigation:d.default.bool,renderFallbackExtraContent:d.default.func,validForPanel:d.default.bool,componentsProps:d.default.shape({OnlyOfficeViewer:d.default.shape({isEnabled:d.default.bool,opener:d.default.func}),toolbarProps:d.default.shape(v.toolbarPropsPropType)})},t.default=b},39955:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(67154)),o=r(n(48926)),s=r(n(59713)),c=r(n(63038)),u=r(n(6479)),l=r(n(94184)),d=r(n(45697)),f=M(n(67294)),p=n(16396),h=n(13001),v=M(n(74122)),m=r(n(44775)),y=n(24770),g=r(n(56664)),b=r(n(89909)),w=n(99127),k=r(n(33398)),x=n(62125),O=r(n(25649)),C=r(n(7121)),S=n(76310),E=n(70323),P=r(n(15952)),_=r(n(74799)),A=["className","disableFooter","disablePanel","children","componentsProps","isPublic"],R=["disableModal"];function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}function M(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N="styles__viewer-wrapper___OkRf5",I=function(e){var t=e.className,n=e.disableFooter,r=e.disablePanel,s=e.children,d=e.componentsProps,m=e.isPublic,y=(0,u.default)(e,A),w=e.currentIndex,E=e.files,R=e.currentURL,D=(0,f.createRef)(),M=(0,b.default)().isDesktop,T=(0,f.useState)(!0),I=(0,c.default)(T,2),L=I[0],z=I[1],Z=(0,p.useClient)();(0,x.useExtendI18n)(S.locales);var B=(0,v.useSharingContext)(),F=B.hasWriteAccess,U=B.hasSharedParent,V=B.allLoaded,H=E[w],W=E.length,q=M&&!r,G=j(j({},d),{},{toolbarProps:j({showToolbar:!0,showClose:!0},null==d?void 0:d.toolbarProps)});return(0,f.useEffect)(function(){var e;(e=(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=6;break}return e.next=3,(0,h.isDocumentReadOnly)({document:H,client:Z});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=!V||!F(U(H.path)?H.dir_id:H._id);case 7:z(e.t0);case 9:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[Z,H,F,U,V,m]),f.default.createElement(_.default,{file:H,isPublic:m,isReadOnly:L,componentsProps:G},f.default.createElement(g.default,null,f.default.createElement(v.default,{client:Z,doctype:"io.cozy.files",documentType:"Files",isPublic:m},f.default.createElement(P.default,null,f.default.createElement("div",{id:"viewer-wrapper",className:(0,l.default)(N,t)},f.default.createElement(k.default,{url:R},f.default.createElement(O.default,(0,i.default)({},y,{componentsProps:G,hasPrevious:w>0,hasNext:w<W-1,validForPanel:q,toolbarRef:D}),s)),f.default.createElement(C.default,{disableFooter:n,validForPanel:q,toolbarRef:D},s))))))};I.propTypes={files:d.default.arrayOf(y.FileDoctype).isRequired,currentIndex:d.default.number,currentURL:d.default.string,className:d.default.string,onCloseRequest:d.default.func,onChangeRequest:d.default.func,showNavigation:d.default.bool,renderFallbackExtraContent:d.default.func,disablePanel:d.default.bool,disableFooter:d.default.bool,isPublic:d.default.bool,componentsProps:d.default.shape({OnlyOfficeViewer:d.default.shape({isEnabled:d.default.bool,opener:d.default.func}),panel:d.default.shape({qualifications:d.default.shape({disabled:d.default.bool}),summary:d.default.shape({disabled:d.default.bool}),konnector:d.default.shape({disabled:d.default.bool}),informations:d.default.shape({disabled:d.default.bool}),sharing:d.default.shape({disabled:d.default.bool})}),toolbarProps:d.default.shape(E.toolbarPropsPropType)})},I.defaultProps={currentIndex:0,showNavigation:!0};var L=function(e){var t=e.disableModal,n=(0,u.default)(e,R),r=(0,w.useCozyTheme)(),a=r.type,o=r.variant,s=(n.componentsProps||{}).modalProps;return t?f.default.createElement(I,n):f.default.createElement(m.default,(0,i.default)({},void 0===s?{open:!0}:s,{className:"CozyTheme--".concat(a,"-").concat(o)}),f.default.createElement("div",null,f.default.createElement(I,n)))};L.defaultProps={componentsProps:{modalProps:{open:!0}}},L.propTypes={disableModal:d.default.bool,componentsProps:d.default.shape({modalProps:d.default.object})},t.default=L},7121:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=r(n(67294)),o=n(10923),s=n(99127),c=n(75910),u=r(n(77915)),l=r(n(95519)),d=r(n(44617)),f=r(n(30553)),p=function(e){var t=e.disableFooter,n=e.validForPanel,r=e.toolbarRef,a=e.children,p=(0,c.useTheme)(),h=(0,s.useCozyTheme)().isLight,v=document.querySelector('[class*="sidebar"]');return(0,o.useSetFlagshipUI)({bottomBackground:p.palette.background.paper,bottomTheme:h?"dark":"light"},{bottomBackground:p.palette.background[v?"default":"paper"]}),i.default.createElement(i.default.Fragment,null,!t&&i.default.createElement(d.default,null,i.default.createElement(u.default,{toolbarRef:r},a)),n&&i.default.createElement(f.default,null,i.default.createElement(l.default,null)))};p.propTypes={disableFooter:a.default.bool,validForPanel:a.default.bool,toolbarRef:a.default.object,children:a.default.oneOfType([a.default.node,a.default.arrayOf(a.default.node)])},t.default=p},18256:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(32419)),o=r(n(40870)),s=r(n(41170)),c=r(n(81754)),u="styles__viewer-audioviewer___dpxUM",l="styles__viewer-filename___1-DIz";t.default=(0,c.default)(function(e){var t=e.file,n=e.url;return a.default.createElement("div",{className:u},a.default.createElement(i.default,{icon:o.default,width:160,height:140}),a.default.createElement("p",{className:l},t.name),a.default.createElement("audio",{src:n,controls:"controls",preload:(0,s.default)()?"none":"auto"}))})},53161:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(41496)),o=r(n(41581)),s=r(n(40444)),c=r(n(35525)),u=n(58136),l="styles__viewer-noviewer___3HRGf";t.default=(0,u.withViewerLocales)(function(e){var t,n=e.file,r=e.t;return a.default.createElement("div",{className:l},a.default.createElement(o.default,{icon:a.default.createElement("img",{src:s.default}),text:r("Viewer.noImage"),componentsProps:{text:{color:"inherit"}}},a.default.createElement(c.default,{action:"OPEN",doctype:"io.cozy.files.paper",options:{path:"".concat(null===(t=n.metadata)||void 0===t||null===(t=t.qualification)||void 0===t?void 0:t.label,"/").concat(n._id)}},a.default.createElement(i.default,{className:"u-mt-1",label:r("Viewer.complete")}))))})},51937:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(34575)),i=r(n(93913)),o=r(n(81506)),s=r(n(2205)),c=r(n(78585)),u=r(n(29754)),l=r(n(59713)),d=r(n(50840)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),p=r(n(14868)),h=r(n(27671)),v=r(n(20133));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b="styles__viewer-imageviewer___2O8pW",w=function(e,t,n){return Math.max(e,Math.min(n,t))},k=function(e){(0,s.default)(m,e);var t,n,r=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);return e=n?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function m(e){var t;return(0,a.default)(this,m),t=r.call(this,e),(0,l.default)((0,o.default)(t),"reload",function(){t.setState(function(e){return g(g({},e),{},{loading:!0,canceled:!1})})}),(0,l.default)((0,o.default)(t),"onImageError",function(){t.setState(function(e){return g(g({},e),{},{loading:!1,canceled:!0})})}),(0,l.default)((0,o.default)(t),"onImageLoad",function(){t.setState(function(e){return g(g({},e),{},{loading:!1})})}),(0,l.default)((0,o.default)(t),"onSwipe",function(e){!(t.state.scale>1)&&(t.gestures.off("pan"),t.gestures.off("panend"),t.props.onSwipe(e))}),t.state={loading:!0,canceled:!1,scale:1,offsetX:0,offsetY:0,initialOffset:{x:0,y:0},initialScale:0,momentum:{x:0,y:0}},t}return(0,i.default)(m,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.file&&this.props.file&&e.file.id!==this.props.file.id&&(this.tearDownGestures(),this.setState({loading:!0,canceled:!1,scale:1,offsetX:0,offsetY:0}))}},{key:"componentDidMount",value:function(){this.props.gestures&&this.initGestures()}},{key:"componentDidUpdate",value:function(e,t){var n=t.loading&&!this.state.loading&&!this.state.canceled;!e.gestures&&this.initGestures(),n&&this.setupGestures()}},{key:"componentWillUnmount",value:function(){this.tearDownGestures()}},{key:"tearDownGestures",value:function(){this.gestures&&(this.gestures.off("swipe"),this.gestures.on("swipe",this.props.onSwipe),this.gestures.off("panstart"),this.gestures.off("pinchstart"),this.gestures.off("pinchend"),this.gestures.off("pan"),this.gestures.off("pinch"),this.gestures.off("panend"))}},{key:"initGestures",value:function(){this.gestures=this.props.gestures,this.viewer=this.props.gesturesRef}},{key:"setupGestures",value:function(){var e=this;this.gestures.off("swipe"),this.gestures.on("swipe",this.onSwipe),this.gestures.get("pinch").set({enable:!0}),this.gestures.get("pan").set({direction:d.default.DIRECTION_ALL}),this.gestures.on("panstart",this.prepareForGesture.bind(this)),this.gestures.on("pinchstart",this.prepareForGesture.bind(this)),this.gestures.on("pinchend",this.prepareForGesture.bind(this)),this.gestures.on("pan",function(t){e.setState(function(n){var r=e.computeMaxOffset();return{offsetX:w(-r.x,n.initialOffset.x+t.deltaX/n.scale,r.x),offsetY:w(-r.y,n.initialOffset.y+t.deltaY/n.scale,r.y)}})}),this.gestures.on("pinch",function(t){!t.isFinal&&e.setState(function(n){var r=w(1/n.initialScale,t.scale,6/n.initialScale),a=e.viewer.getBoundingClientRect(),i={x:(a.right-a.left)/2,y:(a.bottom-a.top)/2},o={x:(i.x-t.center.x)/n.scale,y:(i.y-t.center.y)/n.scale},s={x:o.x*r,y:o.y*r},c={x:s.x-o.x+n.initialOffset.x,y:s.y-o.y+n.initialOffset.y},u=e.computeMaxOffset();return{scale:n.initialScale*r,offsetX:w(-u.x,c.x,u.x),offsetY:w(-u.y,c.y,u.y)}})}),this.gestures.on("panend",function(t){e.setState({momentum:{x:10*t.velocityX,y:10*t.velocityY}},e.applyMomentum.bind(e))})}},{key:"render",value:function(){var e=this;if(this.state.canceled)return f.default.createElement(h.default,{onReload:this.reload});var t=this.props,n=t.file,r=t.url,a=this.state,i=a.scale,o=a.offsetX,s=a.offsetY,c=a.loading,u={transform:"scale(".concat(i,") translate(").concat(o,"px, ").concat(s,"px)")};return f.default.createElement("div",{className:b},c&&f.default.createElement(v.default,null),n&&f.default.createElement(p.default,{file:n,url:r,linkType:"large",onError:this.onImageError,key:n.id,render:function(t){return f.default.createElement("img",{ref:function(t){return e.photo=t},style:u,alt:n.name,src:t,onLoad:e.onImageLoad})}}))}},{key:"prepareForGesture",value:function(){this.setState(function(e){return{initialScale:e.scale,initialOffset:{x:e.offsetX,y:e.offsetY},momentum:{x:0,y:0}}})}},{key:"applyMomentum",value:function(){var e=this;this.setState(function(t){var n=e.computeMaxOffset();return{offsetX:w(-n.x,t.offsetX+t.momentum.x,n.x),offsetY:w(-n.y,t.offsetY+t.momentum.y,n.y),momentum:{x:.9*t.momentum.x,y:.9*t.momentum.y}}},function(){(Math.abs(e.state.momentum.x)>.1||Math.abs(e.state.momentum.y)>.1)&&requestAnimationFrame(e.applyMomentum.bind(e))})}},{key:"computeMaxOffset",value:function(){if(!this.viewer||!this.photo)return{x:0,y:0};var e=this.viewer.getBoundingClientRect(),t=this.photo.getBoundingClientRect();return{x:Math.max(t.width/2-e.width/2,0)/this.state.scale,y:Math.max(t.height/2-e.height/2,0)/this.state.scale}}}]),m}(f.Component);t.default=k},27671:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(32419)),o=r(n(77992)),s=r(n(36198)),c=n(58136),u="styles__viewer-canceled___3KRBk";t.default=(0,c.withViewerLocales)(function(e){var t=e.t,n=e.onReload;return a.default.createElement("div",{className:u},a.default.createElement(i.default,{icon:o.default,width:160,height:140}),a.default.createElement("h2",null,t("Viewer.error.network")),a.default.createElement(s.default,{onClick:n,label:t("Viewer.retry")}))})},4811:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=r(n(67294)),o=r(n(36198)),s=n(24770),c=r(n(45974)),u=n(58136),l=function(e){var t=e.file,n=e.onlyOfficeOpener,r=e.t;return i.default.createElement(c.default,{file:t,renderFallbackExtraContent:function(){return i.default.createElement(o.default,{label:r("Viewer.openInOnlyOffice"),onClick:function(){return n(t)}})}})};l.propTypes={file:s.FileDoctype,onlyOfficeOpener:a.default.func.isRequired},t.default=(0,u.withViewerLocales)(l)},49444:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PdfJsViewer=t.MIN_SCALE=t.MAX_SIZE_FILE=t.MAX_SCALE=t.MAX_PAGES=void 0;var i=a(n(319)),o=a(n(34575)),s=a(n(93913)),c=a(n(81506)),u=a(n(2205)),l=a(n(78585)),d=a(n(29754)),f=a(n(59713)),p=a(n(94184)),h=a(n(59242)),v=a(n(23493)),m=a(n(45697)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),g=n(56535),b=a(n(45974)),w=a(n(98533)),k=a(n(20133)),x=a(n(81754)),O=n(58136);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}var S={"viewer-pdfviewer":"styles__viewer-pdfviewer___3MJPk","viewer-pdfviewer-input-page":"styles__viewer-pdfviewer-input-page___9HErK","viewer-pdfviewer-pdf":"styles__viewer-pdfviewer-pdf___3R4jL","viewer-pdfviewer-page":"styles__viewer-pdfviewer-page___VvOF3","viewer-pdfviewer-toolbar":"styles__viewer-pdfviewer-toolbar___2Eat3","viewer-pdfviewer-toolbar--hidden":"styles__viewer-pdfviewer-toolbar--hidden___3LBfu"},E=t.MIN_SCALE=.25,P=t.MAX_SCALE=3,_=t.MAX_PAGES=40,A=t.MAX_SIZE_FILE=0xa00000,R=function(e){var t=Math.max(1,String(Math.abs(e)).length-1);return{maxWidth:"".concat(t,".5rem")}},D=t.PdfJsViewer=function(e){(0,u.default)(h,e);var t,n,a=(t=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);return e=n?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function h(){var e;return(0,o.default)(this,h),e=a.call(this),(0,f.default)((0,c.default)(e),"state",{totalPages:1,scale:1,currentPage:1,inputPageValue:1,loaded:!1,errored:!1,width:null,renderAllPages:!1,toolbarDisplayed:!0,keepToolbarDisplayed:!1,isInputPageFocused:!1}),(0,f.default)((0,c.default)(e),"onMouseMove",function(){!e.state.toolbarDisplayed&&e.setState({toolbarDisplayed:!0}),r&&clearTimeout(r),r=setTimeout(function(){e.setState({toolbarDisplayed:!1})},1e3)}),(0,f.default)((0,c.default)(e),"onKeyUp",function(t){38===t.keyCode?e.previousPage():40===t.keyCode&&e.nextPage(),e.onMouseMove()}),(0,f.default)((0,c.default)(e),"setWrapperSize",function(){var t=e.wrapper?e.wrapper.getBoundingClientRect().width:null;e.setState({width:t})}),(0,f.default)((0,c.default)(e),"onLoadSuccess",function(t){var n=t.numPages;e.setState({totalPages:n,renderAllPages:n<=_&&parseInt(e.props.file.size,10)<=A,loaded:!0})}),(0,f.default)((0,c.default)(e),"onLoadError",function(t){console.warn(t),e.setState({errored:!0})}),(0,f.default)((0,c.default)(e),"nextPage",function(){e.setState(function(e){var t=Math.min(e.currentPage+1,e.totalPages);return{currentPage:t,inputPageValue:t}})}),(0,f.default)((0,c.default)(e),"previousPage",function(){e.setState(function(e){var t=Math.max(e.currentPage-1,1);return{currentPage:t,inputPageValue:t}})}),(0,f.default)((0,c.default)(e),"scaleUp",function(){e.setState(function(t){var n=t.scale,r=Math.min(n+.25,P);return r>1&&n<=1&&e.toggleGestures(!1),{scale:r}})}),(0,f.default)((0,c.default)(e),"scaleDown",function(){e.setState(function(t){var n=t.scale,r=Math.max(n-.25,E);return r<=1&&n>1&&e.toggleGestures(!0),{scale:r}})}),(0,f.default)((0,c.default)(e),"handleInputPageChange",function(t){var n=t.target.value;(""===n||n<=e.state.totalPages&&n>0)&&e.setState({inputPageValue:n})}),(0,f.default)((0,c.default)(e),"handleInputPageKeyDown",function(t){13===t.keyCode&&e.inputRef.current.blur()}),(0,f.default)((0,c.default)(e),"handleInputPageFocus",function(){e.setState({isInputPageFocused:!0,keepToolbarDisplayed:!0})}),(0,f.default)((0,c.default)(e),"handleInputPageBlur",function(){e.setState(function(e){return{keepToolbarDisplayed:!1,isInputPageFocused:!1,inputPageValue:e.inputPageValue?e.inputPageValue:e.currentPage,currentPage:e.inputPageValue?parseInt(e.inputPageValue,10):e.currentPage}})}),e.inputRef=y.default.createRef(),e}return(0,s.default)(h,[{key:"componentDidMount",value:function(){this.setWrapperSize(),this.resizeListener=(0,v.default)(this.setWrapperSize,500),this.mouseMoveListener=(0,v.default)(this.onMouseMove,500),window.addEventListener("resize",this.resizeListener),document.addEventListener("mousemove",this.mouseMoveListener),document.addEventListener("keyup",this.onKeyUp,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeListener),document.removeEventListener("mousemove",this.mouseMoveListener),document.removeEventListener("keyup",this.onKeyUp,!1),r&&clearTimeout(r)}},{key:"toggleGestures",value:function(e){this.props.gestures&&(this.props.gestures.get("swipe").set({enable:e}),this.props.gestures.get("pan").set({enable:e}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.url,r=t.file,a=t.renderFallbackExtraContent,o=t.t,s=this.state,c=s.loaded,u=s.errored,l=s.totalPages,d=s.currentPage,h=s.inputPageValue,v=s.scale,m=s.width,x=s.renderAllPages,O=s.toolbarDisplayed,C=s.keepToolbarDisplayed,_=s.isInputPageFocused;if(u)return y.default.createElement(b.default,{file:r,renderFallbackExtraContent:a});var A=m&&l>1?m-15:m,D=h||""===h?h:d.toString();return y.default.createElement("div",{className:S["viewer-pdfviewer"],ref:function(t){return e.wrapper=t},"data-testid":"pdfjs-viewer"},y.default.createElement(g.Document,{file:n,onLoadSuccess:this.onLoadSuccess,onLoadError:this.onLoadError,className:S["viewer-pdfviewer-pdf"],loading:y.default.createElement(k.default,null)},x?(0,i.default)(Array(l)).map(function(e,t){return y.default.createElement(g.Page,{key:t,pageNumber:t+1,width:A,scale:v,renderAnnotations:!1,className:(0,p.default)("u-mv-1",S["viewer-pdfviewer-page"])})}):y.default.createElement(g.Page,{pageNumber:d,width:A,scale:v,renderAnnotations:!1,className:S["viewer-pdfviewer-page"]})),c&&y.default.createElement("div",{className:(0,p.default)(S["viewer-pdfviewer-toolbar"],"u-p-half",(0,f.default)({},S["viewer-pdfviewer-toolbar--hidden"],!O&&!C)),onMouseEnter:function(){return!_&&e.setState({keepToolbarDisplayed:!0})},onMouseLeave:function(){return!_&&e.setState({keepToolbarDisplayed:!1})}},!x&&y.default.createElement("span",{className:"u-mh-half"},y.default.createElement(w.default,{icon:"top",onClick:this.previousPage,disabled:1===d,label:o("Viewer.previous")}),y.default.createElement("label",{htmlFor:"input-page"},y.default.createElement("input",{ref:this.inputRef,id:"input-page",className:S["viewer-pdfviewer-input-page"],type:"text",inputMode:"numeric",style:R(l),value:D,onChange:this.handleInputPageChange,onKeyDown:this.handleInputPageKeyDown,onFocus:this.handleInputPageFocus,onBlur:this.handleInputPageBlur}),"/",l),y.default.createElement(w.default,{icon:"bottom",onClick:this.nextPage,disabled:d===l,label:o("Viewer.next")})),y.default.createElement("span",{className:"u-mh-half"},y.default.createElement(w.default,{icon:"dash",onClick:this.scaleDown,disabled:v===E,label:o("Viewer.scaledown")}),y.default.createElement(w.default,{icon:"plus",onClick:this.scaleUp,disabled:v===P,label:o("Viewer.scaleup")}))))}}]),h}(y.Component);D.propTypes={url:m.default.string.isRequired,gestures:m.default.object,renderFallbackExtraContent:m.default.func},t.default=(0,h.default)(x.default,O.withViewerLocales)(D)},7141:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PdfMobileViewer=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(63038)),s=r(n(23493)),c=r(n(45697)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),l=n(16396),d=n(67348),f=n(22960),p=r(n(14868)),h=r(n(88495)),v=n(24770),m=n(56664),y=r(n(45974)),g=r(n(62265)),b=n(58136);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}var k={"viewer-pdfMobile":"styles__viewer-pdfMobile___ym7we","viewer-pdfMobile--image":"styles__viewer-pdfMobile--image___3_zsS"},x=t.PdfMobileViewer=function(e){var t=e.file,n=e.url,r=e.t,c=e.gestures,v=(0,u.useState)(!0),b=(0,o.default)(v,2),w=b[0],x=b[1],O=(0,u.useState)(!1),C=(0,o.default)(O,2),S=C[0],E=C[1],P=(0,u.useRef)(null),_=(0,m.useAlert)().showAlert,A=(0,l.useClient)(),R=(0,f.useWebviewIntent)(),D=function(){x(!1)},M=(0,u.useMemo)(function(){var e;return(0,s.default)((e=(0,i.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.downloadFile)({client:A,file:t,webviewIntent:R});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),_({message:r("Viewer.error.generic"),severity:"error",variant:"filled",icon:!1});case 8:case"end":return e.stop()}},e,null,[[0,5]])})),function(t){return e.apply(this,arguments)}),1e3,{trailing:!1})},[A,_,r,R]);return((0,u.useEffect)(function(){if(c)return c.get("pinch").set({enable:!0}),c.get("press").set({time:1}),c.on("pinchend press",function(e){("pinchend"===e.type||"press"===e.type)&&e.target===P.current&&M(t)}),function(){c.off("pinchend press")}},[A,c,t,M]),S)?u.default.createElement(y.default,{file:t,renderFallbackExtraContent:function(e){return u.default.createElement(g.default,{file:e})}}):u.default.createElement("div",{className:k["viewer-pdfMobile"]},w&&u.default.createElement(h.default,{size:"xxlarge",middle:!0,noMargin:!0}),t&&u.default.createElement(p.default,{file:t,url:n,linkType:"medium",onError:function(){x(!1),E(!0)},key:t.id,render:function(e){return u.default.createElement("img",{ref:P,className:k["viewer-pdfMobile--image"],alt:t.name,src:e,onLoad:D})}}))};x.prototype={file:v.FileDoctype.isRequired,url:c.default.string,gestures:c.default.object},t.default=(0,b.withViewerLocales)(x)},74367:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(27361)),i=r(n(67294)),o=n(16396),s=r(n(36329)),c=n(36198),u=n(24770),l=r(n(45974)),d=n(58136),f=function(e){var t=e.t,n=e.file,r=(0,o.useClient)(),u=(0,o.useFetchShortcut)(r,n.id).shortcutInfos,d="";return u&&(d=new URL((0,a.default)(u,"data.attributes.url"))),i.default.createElement(l.default,{file:n,renderFallbackExtraContent:function(){return i.default.createElement(c.ButtonLink,{label:"".concat(t("Viewer.goto",{url:(0,a.default)(d,"origin","")})),icon:s.default,href:"".concat((0,a.default)(d,"origin","")),target:"_blank"})}})};f.propTypes={file:u.FileDoctype.isRequired},t.default=(0,d.withViewerLocales)(f)},68434:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isMarkdown=t.default=t.TextViewer=void 0;var a=r(n(87757)),i=r(n(48926)),o=r(n(34575)),s=r(n(93913)),c=r(n(81506)),u=r(n(2205)),l=r(n(78585)),d=r(n(29754)),f=r(n(59713)),p=r(n(94184)),h=r(n(45697)),v=r(n(67294)),m=r(n(30724)),y=n(16396),g=n(24770),b=r(n(45974)),w=r(n(20133)),k=n(33488),x=r(n(81754)),O={"viewer-textviewer":"styles__viewer-textviewer___1fl1c","viewer-textviewer-content":"styles__viewer-textviewer-content___30dhP","viewer-filename":"styles__viewer-filename___1-DIz"},C=function(e){var t=e.text;return v.default.createElement(m.default,{className:(0,p.default)(O["viewer-textviewer-content"],"u-p-1"),source:t})},S=function(e){var t=e.text;return v.default.createElement("pre",{className:(0,p.default)(O["viewer-textviewer-content"],"u-mh-auto","u-mv-2"),"data-testid":"viewer-plaintext"},t)},E=function(){return v.default.createElement("div",{className:O["viewer-textviewer"],"data-testid":"viewer-spinner"},v.default.createElement(w.default,null))},P=t.isMarkdown=function(e){return"text/markdown"===e.mime||/.md$/.test(e.name)||y.models.file.isNote(e)},_=t.TextViewer=function(e){(0,u.default)(m,e);var t,n,r,h=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);return e=n?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function m(){var e;(0,o.default)(this,m);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=h.call.apply(h,[this].concat(n)),(0,f.default)((0,c.default)(e),"state",{text:"",isMarkdown:!1,loading:!0,error:null}),(0,f.default)((0,c.default)(e),"_mounted",!1),e}return(0,s.default)(m,[{key:"componentDidMount",value:function(){this._mounted=!0,this.loadFile()}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"loadFile",value:(r=(0,i.default)(a.default.mark(function e(){var t,n,r,i,o,s,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=this.props).url,r=t.file,e.prev=1,!(0,k.isFileEncrypted)(r)){e.next=8;break}return e.next=5,fetch(n);case 5:i=e.sent,e.next=13;break;case 8:return o=new URL(n).pathname,s=this.props.client.getStackClient(),e.next=12,s.fetch("GET",o);case 12:i=e.sent;case 13:return e.next=15,i.text();case 15:c=e.sent,this._mounted&&this.setState({text:c,isMarkdown:P(r),loading:!1}),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.warn(e.t0),this._mounted&&this.setState({loading:!1,error:e.t0});case 23:case"end":return e.stop()}},e,this,[[1,19]])})),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.error,r=e.text,a=e.isMarkdown,i=this.props,o=i.file,s=i.renderFallbackExtraContent;return t?v.default.createElement(E,null):n?v.default.createElement(b.default,{file:o,renderFallbackExtraContent:s}):v.default.createElement("div",{className:O["viewer-textviewer"]},v.default.createElement("h2",{className:(0,p.default)(O["viewer-filename"],"u-mt-3","u-mb-1")},o.name),a?v.default.createElement(C,{text:r}):v.default.createElement(S,{text:r}))}}]),m}(v.default.Component);_.propTypes={client:h.default.object.isRequired,url:h.default.string.isRequired,file:g.FileDoctype.isRequired,renderFallbackExtraContent:h.default.func},t.default=(0,x.default)((0,y.withClient)(_))},46155:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(81754)),o="styles__viewer-videoviewer___3yUQ5",s="styles__viewer-filename___1-DIz";t.default=(0,i.default)(function(e){var t=e.file,n=e.url;return a.default.createElement("div",{className:o},a.default.createElement("video",{src:n,controls:"controls"}),a.default.createElement("p",{className:s},t.name))})},71136:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(59713)),o=r(n(48926)),s=r(n(63038)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),u=n(16396),l=n(87067),d=r(n(34978)),f=r(n(41496)),p=r(n(25750)),h=r(n(32692)),v=n(62125),m=n(58136),y=n(74799);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.default=(0,m.withViewerLocales)(function(){var e,t=(0,v.useI18n)(),n=t.t,r=t.lang,i=(0,u.useClient)(),m=(0,y.useViewer)().file,g=(0,c.useState)(!1),b=(0,s.default)(g,2),k=b[0],x=b[1];var O=(e=(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,i.collection("io.cozy.files").updateMetadataAttribute(m.id,w(w({},m.metadata),{},{hideExpirationAlert:!0}));case 3:x(!1);case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),C=(0,l.computeExpirationDate)(m),S=(0,l.isForeignPaper)(m)?null:(0,l.computeExpirationNoticeLink)(m);return c.default.createElement(d.default,{severity:"warning",block:!0,action:c.default.createElement(f.default,{color:"warning",variant:"text",size:"small",busy:k,label:n("Viewer.panel.expiration.dismiss"),onClick:O}),className:"u-mt-1 u-mh-1"},c.default.createElement(h.default,{component:"span",variant:"inherit"},c.default.createElement(h.default,{component:"span",variant:"inherit"},(0,l.makeExpirationDescription)(C,{lang:r})),S&&c.default.createElement(c.default.Fragment,null,c.default.createElement(h.default,{component:"span",variant:"inherit"}," : "),c.default.createElement(p.default,{href:S,rel:"noreferrer",target:"_blank",className:"u-warning"},new URL(S).hostname))))})},14073:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(16396),o=r(n(32692)),s=n(62125),c=n(74799),u=i.models.paper,l=u.computeExpirationDate,d=u.isExpired,f=u.makeExpiredMessage,p=u.makeExpiresInMessage;t.default=function(){var e=(0,s.useI18n)().lang,t=(0,c.useViewer)().file;if(d(t))return a.default.createElement(o.default,{component:"span",variant:"inherit",color:"error"},f({lang:e}));var n=l(t);return a.default.createElement(o.default,{component:"span",variant:"inherit",className:"u-warning"},p(n,{lang:e}))}},44617:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(89909)),o={"viewer-footer":"styles__viewer-footer___iGv8J"};t.default=function(e){var t=e.children;return(0,i.default)().isDesktop?null:a.default.createElement("div",{className:o["viewer-footer"]},t)}},30553:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.infoWidth=t.default=void 0;var a=r(n(45697)),i=r(n(67294)),o={width:t.infoWidth="22rem",backgroundColor:"var(--defaultBackgroundColor)"},s=function(e){var t=e.children;return i.default.createElement("div",{style:o,className:"u-h-100 u-ov-auto"},t)};s.propTypes={classes:a.default.object,children:a.default.element},t.default=s},35525:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67154)),i=r(n(6479)),o=r(n(45697)),s=r(n(67294)),c=r(n(93045)),u=["action","doctype","options","disabled","children"],l=function(e){var t=e.action,n=e.doctype,r=e.options,o=e.disabled,l=e.children,d=(0,i.default)(e,u);return o?l:s.default.createElement(c.default,(0,a.default)({},d,{action:t,doctype:n,options:r,showCloseButton:!1,iframeProps:{spinnerProps:{className:"u-m-0",middle:!0,color:"white"}},fullScreen:!0,fullWidth:!0,PaperComponent:"div"}),l)};l.propTypes={action:o.default.string,doctype:o.default.string,options:o.default.object,disabled:o.default.bool,children:o.default.oneOfType([o.default.node,o.default.arrayOf(o.default.node)])},t.default=l},7123:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(59713)),i=r(n(94184)),o=r(n(45697)),s=r(n(67294)),c=r(n(32419)),u=r(n(88415)),l="styles__viewer-nav___3V03k",d="styles__viewer-nav--visible___4GLTe",f="styles__viewer-nav-arrow___Z0ykc",p=function(e){var t=e.className,n=e.hidden,r=e.onMouseEnter,o=e.onMouseLeave,p=e.onClick;return s.default.createElement("div",{role:"button",className:(0,i.default)(t,l,(0,a.default)({},d,!n)),onClick:p,onMouseEnter:r,onMouseLeave:o},s.default.createElement(c.default,{icon:u.default,size:"32",className:f}))};p.propTypes={className:o.default.string.isRequired,hidden:o.default.bool.isRequired,onMouseEnter:o.default.func.isRequired,onMouseLeave:o.default.func.isRequired,onClick:o.default.func.isRequired},t.default=p},98533:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=r(n(67294)),o=r(n(41496)),s=r(n(32419)),c=function(e){var t=e.icon,n=e.onClick,r=e.disabled,a=e.label;return i.default.createElement(o.default,{variant:"text",color:"secondary",className:"u-p-half u-m-half u-mah-2",icon:t,onClick:n,disabled:r,label:i.default.createElement(s.default,{icon:t,size:16}),"aria-label":a,disableRipple:!0})};c.propTypes={icon:a.default.string.isRequired,onClick:a.default.func.isRequired,disabled:a.default.bool,label:a.default.string.isRequired},t.default=c},13797:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(59713)),i=r(n(94184)),o=r(n(45697)),s=r(n(67294)),c=n(16396),u=n(22960),l=n(74122),d=n(13873),f=r(n(41496)),p=r(n(32419)),h=r(n(9047)),v=r(n(27108)),m=r(n(32466)),y=r(n(1756)),g=r(n(32692)),b=r(n(43755)),w=n(62125),k=n(8933),x=n(95529),O=n(15952),C=n(74799),S="styles__viewer-toolbar___1GLOA",E="styles__viewer-toolbar--hidden___Zq97m",P=function(e){var t=e.hidden,n=e.onMouseEnter,r=e.onMouseLeave,o=e.onClose,b=e.toolbarRef,P=e.breakpoints.isDesktop,_=e.children,A=e.showFilePath,R=(0,c.useClient)(),D=(0,w.useI18n)().t,M=(0,u.useWebviewIntent)(),T=(0,C.useViewer)().file,j=(0,l.useSharingInfos)(),N=j.isSharingShortcutCreated,I=j.addSharingLink,L=j.loading,z=(0,l.useSharingContext)().isOwner,Z=(0,O.useShareModal)().setShowShareModal,B="/preview"===window.location.pathname,F=(0,x.extractChildrenCompByName)({children:_,file:T,name:"ToolbarButtons"});return s.default.createElement("div",{ref:b,"data-testid":"viewer-toolbar",className:(0,i.default)(S,(0,a.default)({},E,t)),onMouseEnter:n,onMouseLeave:r},o&&s.default.createElement(h.default,{className:(0,i.default)({"u-white":P}),onClick:o},s.default.createElement(p.default,{icon:m.default})),s.default.createElement("div",{className:"u-pl-half u-ov-auto u-w-100"},s.default.createElement(g.default,{variant:P?"h3":"h4",color:P?"inherit":"textPrimary",noWrap:!0},s.default.createElement(y.default,{text:T.name})),A?s.default.createElement(k.ToolbarFilePath,null):null),P&&s.default.createElement("div",{className:"u-flex u-flex-items-center"},!B&&!z(T._id)&&s.default.createElement(l.ShareButton,{className:"u-white",fullWidth:!0,useShortLabel:!0,docId:T._id,onClick:function(){return Z(!0)}}),B&&!L&&!N&&s.default.createElement(l.OpenSharingLinkButton,{link:I,isSharingShortcutCreated:N,variant:"text",className:"u-white",color:"default",isShortLabel:!0}),s.default.createElement(f.default,{className:"u-white",variant:"text","aria-label":D("Viewer.download"),label:D("Viewer.download"),startIcon:s.default.createElement(p.default,{icon:v.default}),onClick:function(){return d.download.action([T],{client:R,webviewIntent:M})}})),F)};P.propTypes={hidden:o.default.bool,onMouseEnter:o.default.func.isRequired,onMouseLeave:o.default.func.isRequired,onClose:o.default.func,showFilePath:o.default.bool},t.default=(0,b.default)()(P)},60734:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(27722)),o=function(e){return a.default.createElement(i.default,e)};o.displayName="ToolbarButtons",t.default=o},8933:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarFilePath=void 0;var a=r(n(59713)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=n(16396),s=n(67348),c=r(n(51008)),u=r(n(67655)),l=r(n(25750)),d=r(n(89909)),f=n(33488),p=n(74799),h=n(95270);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.ToolbarFilePath=function(){var e=(0,o.useClient)(),t=(0,d.default)().isDesktop,n=(0,p.useViewer)().file,r=(0,f.normalizeAndSpreadAttributes)(n),a=(0,h.buildFileByIdQuery)(r.dir_id),v=(0,o.useQuery)(a.definition,y(y({},a.options),{},{enabled:!!r.dir_id})),m=(0,i.useMemo)(function(){return v.data?(0,s.ensureFilePath)(r,v.data):void 0},[r,v.data]);if(m){var g="drive",b="/folder/".concat(m.dir_id),w=(0,f.removeFilenameFromPath)(m.path),k=(0,f.makeWebLink)({client:e,path:b,slug:g});return t&&k?i.default.createElement(c.default,{app:{slug:g},nativePath:b,href:k},function(e){var t=e.href,n=e.onClick;return i.default.createElement(l.default,{href:t,onClick:n,color:"inherit"},i.default.createElement(u.default,{className:"u-white"},w))}):i.default.createElement(u.default,{className:t?"u-white":null},w)}return null}},61950:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getViewerComponentName=t.default=void 0;var a=r(n(45697)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=n(67348),s=n(25976),c=r(n(43755)),u=n(33398),l=r(n(45974)),d=r(n(18256)),f=r(n(53161)),p=r(n(51937)),h=r(n(4811)),v=r(n(49444)),m=r(n(7141)),y=r(n(74367)),g=r(n(68434)),b=r(n(46155)),w=n(74799);function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}var x=function(e){var t;return null===(t=e.metadata)||void 0===t||null===(t=t.paperProps)||void 0===t?void 0:t.isBlank},O=t.getViewerComponentName=function(e){var t=e.file,n=e.isDesktop,r=e.isOnlyOfficeEnabled;switch(t.class){case"shortcut":return y.default;case"image":return p.default;case"audio":return d.default;case"video":return(0,s.isMobile)()?l.default:b.default;case"pdf":return x(t)?f.default:n?v.default:m.default;case"text":return(0,o.isPlainText)(t.mime,t.name)?g.default:r?h.default:l.default;case"slide":case"spreadsheet":return r?h.default:l.default;default:return l.default}},C=(0,c.default)()(function(e){var t,n,r=e.onClose,a=e.renderFallbackExtraContent,o=e.gestures,s=e.gesturesRef,c=e.onSwipe,l=e.breakpoints.isDesktop,d=e.componentsProps,f=(0,w.useViewer)().file,p=null==d||null===(t=d.OnlyOfficeViewer)||void 0===t?void 0:t.isEnabled,h=null==d||null===(n=d.OnlyOfficeViewer)||void 0===n?void 0:n.opener,v=(0,u.useEncrypted)().url,m=(0,i.useMemo)(function(){return O({file:f,isDesktop:l,isOnlyOfficeEnabled:p})},[f,l,p]);return i.default.createElement(m,{file:f,url:v,renderFallbackExtraContent:a,gestures:o,gesturesRef:s,onlyOfficeOpener:h,onSwipe:c,onClose:r})});C.propTypes={onClose:a.default.func.isRequired,renderFallbackExtraContent:a.default.func,gestures:a.default.object,gesturesRef:a.default.object,onSwipe:a.default.func,componentsProps:a.default.object},C.displayName="ViewerByFile",t.default=C},85230:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67154)),i=r(n(34575)),o=r(n(93913)),s=r(n(81506)),c=r(n(2205)),u=r(n(78585)),l=r(n(29754)),d=r(n(59713)),f=r(n(94184)),p=r(n(50840)),h=r(n(45697)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),m=n(89909),y=n(75910),g=n(30553),b=r(n(7123)),w=r(n(13797)),k=n(70323),x=n(74799);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}var C={"viewer-nav":"styles__viewer-nav___3V03k","viewer-nav--visible":"styles__viewer-nav--visible___4GLTe","viewer-nav--previous":"styles__viewer-nav--previous___2LsMS","viewer-nav-arrow":"styles__viewer-nav-arrow___Z0ykc","viewer-nav--next":"styles__viewer-nav--next___3mBHi","viewer-controls":"styles__viewer-controls___2lf-z","--expanded":"styles__--expanded___1sp4Q","viewer-toolbar":"styles__viewer-toolbar___1GLOA","viewer-toolbar--hidden":"styles__viewer-toolbar--hidden___Zq97m","viewer-footer":"styles__viewer-footer___iGv8J"},S=function(e){(0,c.default)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);return e=n?Reflect.construct(r,arguments,(0,l.default)(this).constructor):r.apply(this,arguments),(0,u.default)(this,e)});function a(){var e;(0,i.default)(this,a);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=r.call.apply(r,[this].concat(n)),(0,d.default)((0,s.default)(e),"state",{hidden:!1,gestures:null}),(0,d.default)((0,s.default)(e),"_mounted",!1),(0,d.default)((0,s.default)(e),"showControls",function(){e._mounted&&(e.setState({hidden:!1}),e.hideAfterDelay(),document.removeEventListener("mousemove",e.showControls),document.addEventListener("mousemove",e.hideAfterDelay))}),(0,d.default)((0,s.default)(e),"hideControls",function(){e._mounted&&(e.setState({hidden:!0}),document.removeEventListener("mousemove",e.hideAfterDelay),document.addEventListener("mousemove",e.showControls))}),(0,d.default)((0,s.default)(e),"hideAfterDelay",function(){clearTimeout(e.hideTimeout),e.hideTimeout=setTimeout(function(){e.hideControls()},3e3)}),(0,d.default)((0,s.default)(e),"onSwipe",function(t){t.direction===p.default.DIRECTION_LEFT?e.props.onNext():t.direction===p.default.DIRECTION_RIGHT&&e.props.onPrevious()}),(0,d.default)((0,s.default)(e),"initGestures",function(){var t=new p.default(e.wrapped,e.props.isDesktop?{cssProps:{userSelect:"auto"}}:{});return!e.props.isDesktop&&t.on("swipe",e.onSwipe),t}),e}return(0,o.default)(a,[{key:"componentDidMount",value:function(){this._mounted=!0,clearTimeout(this.hideTimeout),this.hideAfterDelay();var e=this.initGestures();this.setState({gestures:e})}},{key:"componentWillUnmount",value:function(){this._mounted=!1,clearTimeout(this.hideTimeout),this.state.gestures&&this.state.gestures.destroy()}},{key:"renderChildren",value:function(e){var t=this;return e?v.default.Children.map(e,function(e){var n,r;if((null==e||null===(n=e.type)||void 0===n?void 0:n.name)==="ViewerByFile"||(null==e||null===(r=e.type)||void 0===r?void 0:r.displayName)==="ViewerByFile")return v.default.cloneElement(e,{gestures:t.state.gestures,gesturesRef:t.wrapped,onSwipe:t.onSwipe})}):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.hasPrevious,a=t.hasNext,i=t.onPrevious,o=t.onNext,s=t.expanded,c=t.toolbarProps,u=t.showNavigation,l=t.showInfoPanel,p=t.children,h=t.classes,m=t.isDesktop,y=c.showToolbar,g=c.showClose,k=c.toolbarRef,x=c.showFilePath,O=this.state.hidden;return v.default.createElement("div",{className:(0,f.default)(C["viewer-controls"],(0,d.default)((0,d.default)({},C["viewer-controls--expanded"],s),h.viewerControlsWithInfo,l)),ref:function(t){e.wrapped=t}},y&&v.default.createElement(w.default,{toolbarRef:k,showFilePath:x,onMouseEnter:this.showControls,onMouseLeave:this.hideControls,onClose:g?n:void 0},p),u&&m&&r&&v.default.createElement(b.default,{className:C["viewer-nav--previous"],hidden:O,onMouseEnter:this.showControls,onMouseLeave:this.hideControls,onClick:i}),this.renderChildren(p),u&&m&&a&&v.default.createElement(b.default,{className:C["viewer-nav--next"],hidden:O,onMouseEnter:this.showControls,onMouseLeave:this.hideControls,onClick:o}))}}]),a}(v.Component);S.propTypes={isDesktop:h.default.bool,onClose:h.default.func.isRequired,hasPrevious:h.default.bool.isRequired,hasNext:h.default.bool.isRequired,onPrevious:h.default.func.isRequired,onNext:h.default.func.isRequired,expanded:h.default.bool.isRequired,toolbarProps:h.default.shape(k.toolbarPropsPropType),showNavigation:h.default.bool.isRequired,showInfoPanel:h.default.bool};t.default=(0,y.withStyles)(function(){return{viewerControlsWithInfo:{width:"calc(100% - ".concat(g.infoWidth,") !important")}}})(function(e){var t=(0,x.useViewer)().file,n=(0,m.useBreakpoints)().isDesktop,r=t&&"image"===t.class;return v.default.createElement(S,(0,a.default)({expanded:r,isDesktop:n},e))})},20133:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67154)),i=r(n(67294)),o=r(n(88495)),s=n(89909);t.default=function(){var e=(0,s.useBreakpoints)().isDesktop;return i.default.createElement(o.default,(0,a.default)({size:"xxlarge",middle:!0,noMargin:!0},e&&{color:"white"}))}},33488:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.removeFilenameFromPath=t.normalizeAndSpreadAttributes=t.makeWebLink=t.isFileEncrypted=t.isEditableAttribute=t.formatDate=void 0;var a=r(n(59713)),i=n(16396),o=n(67348);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.isFileEncrypted=function(e){return(0,o.isEncrypted)(e)},t.formatDate=function(e){var t=e.f,n=e.lang,r=e.date;return"en"===n?t(r,"LL/dd/yyyy"):t(r,"dd/LL/yyyy")},t.isEditableAttribute=function(e,t){return!["datetime","qualification"].includes(e)&&("issueDate"===e&&!(0,o.isFromKonnector)(t)||"issueDate"!==e)},t.normalizeAndSpreadAttributes=function(e){var t=(0,o.normalize)(e);return c(c({},t),null==t?void 0:t.attributes)},t.makeWebLink=function(e){var t=e.client,n=e.slug,r=e.path;try{var a=new URL(t.getStackClient().uri),o=t.getInstanceOptions().subdomain;return(0,i.generateWebLink)({pathname:"/",cozyUrl:a.origin,slug:n,hash:r,subDomainType:o})}catch(e){return null}},t.removeFilenameFromPath=function(e){var t=e.substring(0,e.lastIndexOf("/"));return""===t?"/":t}},81754:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(87757)),i=r(n(67154)),o=r(n(48926)),s=r(n(34575)),c=r(n(93913)),u=r(n(81506)),l=r(n(2205)),d=r(n(78585)),f=r(n(29754)),p=r(n(59713)),h=r(n(45697)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),m=r(n(27671)),y=r(n(20133)),g=n(33488);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,p.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x="LOADING",O="LOADED",C="FAILED";t.default=function(e){var t;return t=function(t){(0,l.default)(w,t);var n,r,h,b=(n=w,r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,f.default)(n);return e=r?Reflect.construct(t,arguments,(0,f.default)(this).constructor):t.apply(this,arguments),(0,d.default)(this,e)});function w(){var e;(0,s.default)(this,w);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=b.call.apply(b,[this].concat(n)),(0,p.default)((0,u.default)(e),"state",{status:x,downloadUrl:null}),(0,p.default)((0,u.default)(e),"reset",function(){e.clearTimeout(),e.setState({status:x,downloadUrl:null})}),e}return(0,c.default)(w,[{key:"UNSAFE_componentWillMount",value:function(){this.loadDownloadUrl()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){(e.file.id!==this.props.file.id||e.url!==this.props.url)&&this.reset()}},{key:"componentDidUpdate",value:function(){this.state.status===x&&!this.timeout&&this.loadDownloadUrl()}},{key:"loadDownloadUrl",value:(h=(0,o.default)(a.default.mark(function e(){var t,n,r,i,o=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=this.props).file,r=t.url,this.timeout=setTimeout(function(){return o.setState(function(e){return k(k({},e),{},{status:C})})},6e3),e.prev=2,!(0,g.isFileEncrypted)(n)){e.next=6;break}return r&&(this.clearTimeout(),this.setState({downloadUrl:r,status:O})),e.abrupt("return");case 6:return e.next=8,this.getDownloadLink(n);case 8:i=e.sent,this.clearTimeout(),this.setState({downloadUrl:i,status:O}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),this.clearTimeout(),this.setState(function(e){return k(k({},e),{},{status:C})});case 17:case"end":return e.stop()}},e,this,[[2,13]])})),function(){return h.apply(this,arguments)})},{key:"getDownloadLink",value:function(e){return this.context.client.collection("io.cozy.files").getDownloadLinkById(e._id,e.name)}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){clearTimeout(this.timeout),this.timeout=null})},{key:"render",value:function(){return this.state.status===x?v.default.createElement(y.default,null):this.state.status===C?v.default.createElement(m.default,{onReload:this.reset}):v.default.createElement(e,(0,i.default)({},this.props,{url:this.state.downloadUrl}))}}]),w}(v.Component),(0,p.default)(t,"contextTypes",{client:h.default.object.isRequired}),t}},58136:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.withViewerLocales=void 0;var a=r(n(69311)),i=n(76310);t.withViewerLocales=(0,a.default)(i.locales)},34550:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(59713)),i=r(n(6479)),o=n(16396),s=n(95270),c=["data"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.default=function(e){var t=(0,o.getReferencedBy)(e,"io.cozy.contacts").map(function(e){return e.id}),n=t.length>0,r=(0,s.buildContactByIdsQuery)(t),a=(0,o.useQuery)(r.definition,l(l({},r.options),{},{enabled:n})),u=a.data,d=(0,i.default)(a,c);return{contacts:u,isLoadingContacts:n&&((0,o.isQueryLoading)(d)||d.hasMore)}}},45281:function(e,t,n){"use strict";var r,a=n(95318);Object.defineProperty(t,"FooterActionButtons",{enumerable:!0,get:function(){return u.default}});Object.defineProperty(t,"ForwardOrDownloadButton",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"SharingButton",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"ToolbarButtons",{enumerable:!0,get:function(){return c.default}});t.default=void 0;var i=a(n(39955)),o=a(n(25649)),s=n(70323),c=a(n(60734)),u=a(n(27722)),l=a(n(67445)),d=a(n(42003)),f=a(n(45778));t.default=i.default},76310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.locales=t.getViewerI18n=void 0;var r=n(14669),a=t.locales={en:{Viewer:{actions:{download:"Download",forward:"Send"},alert:{preparing:"Preparing your files…"},close:"close",cancel:"Cancel",ok:"Ok",download:"Download",complete:"Complete the document",noImage:"No image",error:{downloadFile:{offline:"You should be connected to download this file"},generic:"An error occurred when opening this file, please try again.",missing:"This file is missing",network:"This file could not be loaded. Do you have a working internet connection right now?"},goto:"Go to %{url}",next:"Next",openWith:"Open with...",openInOnlyOffice:"Open with Only Office",panel:{summary:"Summary",sharing:"Who has access?",informations:{format:{title:"%{format} Document",subtitle:"Format"},size:"Size",location:"Location",creation:"Creation",modification:"Last modification"},certifications:{carbonCopy:{title:"Carbon Copy",caption:'Indicates whether the document is defined as "authentic and original" by Cozy Cloud, the host of your Cozy, as it can claim that it comes directly from a third-party service, without having undergone any modification.'},electronicSafe:{title:"Electronic Safe",caption:"Indicates whether the original document is secured by your personal digital safe with the certifications that give it probative value and a 50-year retention guarantee beyond its deposit."}},qualification:{empty:{primary:"Document type",secondary:"Bills, contract, identity card..."},actions:{copy:"Copy",copyClipboard:"Copy to clipboard",edit:"Edit"}},expiration:{dismiss:"I understood"},title:"Useful information"},previous:"Previous",retry:"Retry",scaledown:"Zoom out",scaleup:"Zoom in",share:{title:"Link to my document %{name}",text:"Here is a link to my document %{name}: ",error:"Problem with link recovery: %{error}",success:"Your file has been shared with success"},snackbar:{copiedToClipboard:{success:"Copied to clipboard",error:"Cannot copy to clipboard"}}}},fr:{Viewer:{actions:{download:"T\xe9l\xe9charger",forward:"Envoyer"},alert:{preparing:"Preparation de vos fichiers…"},close:"Fermer",cancel:"Annuler",ok:"Ok",download:"T\xe9l\xe9charger",complete:"Compl\xe9ter le document",noImage:"Aucune image",error:{downloadFile:{offline:"Vous devez \xeatre connect\xe9 pour t\xe9l\xe9charger ce fichier"},generic:"Une erreur s'est produite lors de l'ouverture de ce fichier, veuillez r\xe9essayer.",missing:"Le fichier est manquant",network:"Ce fichier n'a pas pu \xeatre charg\xe9. Avez-vous une connexion internet qui fonctionne actuellement ?"},goto:"Ouvrir %{url}",next:"Suivante",openWith:"Ouvrir avec...",openInOnlyOffice:"Ouvrir avec Only Office",panel:{summary:"R\xe9sum\xe9",sharing:"Qui a acc\xe8s ?",informations:{format:{title:"Document %{format}",subtitle:"Format"},size:"Taille",location:"Emplacement",creation:"Cr\xe9ation",modification:"Derni\xe8re modification"},certifications:{carbonCopy:{title:"Copie conforme",caption:"Le document est d\xe9fini \"authentique et original\" par Cozy Cloud, l'h\xe9bergeur de votre Cozy, car il peut affirmer qu'il provient directement des services de son \xe9metteur sans avoir subi aucune modification."},electronicSafe:{title:"Coffre-fort \xe9lectronique",caption:"Indique si le document original est s\xe9curis\xe9 par votre coffre-fort num\xe9rique personnel avec les certifications qui lui conf\xe8rent une valeur probante et une garantie de conservation de 50 ans au-del\xe0 de son d\xe9p\xf4t."}},qualification:{empty:{primary:"Type de document",secondary:"Facture, contrat, carte d'identit\xe9..."},actions:{copy:"Copier",copyClipboard:"Copier dans le presse-papier",edit:"Modifier"}},expiration:{dismiss:"J'ai compris"},title:"Informations utiles"},previous:"Pr\xe9c\xe9dente",retry:"R\xe9essayer",scaledown:"Zoom arri\xe8re",scaleup:"Zoom avant",share:{title:"Lien vers mon document %{name}",text:"Voici un lien vers mon document %{name} : ",error:"Probl\xe8me avec la r\xe9cup\xe9ration du lien : %{error}",success:"Votre fichier a \xe9t\xe9 partag\xe9 avec succ\xe8s"},snackbar:{copiedToClipboard:{success:"Copi\xe9 dans le presse-papier",error:"Impossible de copier dans le presse-papier"}}}}};t.getViewerI18n=function(){return(0,r.getI18n)(void 0,function(e){return a[e]})}},70323:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.toolbarPropsPropType=void 0;var a=r(n(45697));t.toolbarPropsPropType={showToolbar:a.default.bool,showClose:a.default.bool,toolbarRef:a.default.object,showFilePath:a.default.bool}},15952:function(e,t,n){"use strict";var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.useShareModal=t.default=t.ShareModalContext=void 0;var a=r(n(63038)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=n(74122),s=n(74799);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var u=t.ShareModalContext=i.default.createContext();t.useShareModal=function(){var e=(0,i.useContext)(u);if(!e)throw Error("useShareModal must be used within a ShareModalProvider");return e};t.default=i.default.memo(function(e){var t=e.children,n=(0,s.useViewer)().file,r=(0,i.useState)(!1),c=(0,a.default)(r,2),l=c[0],d=c[1],f=(0,i.useMemo)(function(){return{setShowShareModal:d}},[]);return i.default.createElement(u.Provider,{value:f},t,l&&i.default.createElement(o.ShareModal,{document:n,documentType:"Files",sharingDesc:n.name,onClose:function(){return d(!1)}}))})},74799:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useViewer=t.default=t.ViewerContext=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(67294));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}var i=t.ViewerContext=r.default.createContext();t.useViewer=function(){var e=(0,r.useContext)(i);if(!e)throw Error("useViewer must be used within a ViewerProvider");return e};t.default=r.default.memo(function(e){var t=e.file,n=e.isPublic,a=e.isReadOnly,o=e.componentsProps,s=e.children;return r.default.createElement(i.Provider,{value:{file:t,isPublic:n,componentsProps:o,isReadOnly:a}},s)})},95270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildFileByIdQuery=t.buildContactByIdsQuery=void 0;var r=n(16396),a=r.fetchPolicies.olderThan(3e4);t.buildContactByIdsQuery=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{definition:function(){return(0,r.Q)("io.cozy.contacts").getByIds(e)},options:{as:"io.cozy.contacts/".concat(e.join("")),fetchPolicy:a}}},t.buildFileByIdQuery=function(e){return{definition:function(){return(0,r.Q)("io.cozy.files").getById(e)},options:{as:"io.cozy.files/".concat(e),fetchPolicy:a,singleDocData:!0}}}},40444:function(e,t,n){"use strict";e.exports=n.p+"static/svg/IlluGenericNewPage.b0906447.svg"},24789:function(e,t,n){var r=n(77749).default;function a(){"use strict";e.exports=a=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},i=Object.prototype,o=i.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function p(e,n,r,a){var i=Object.create((n&&n.prototype instanceof b?n:b).prototype);return s(i,"_invoke",{value:function(e,n,r){var a=v;return function(i,o){if(a===m)throw Error("Generator is already running");if(a===y){if("throw"===i)throw o;return{value:t,done:!0}}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var c=function e(n,r){var a=r.method,i=n.iterator[a];if(i===t)return r.delegate=null,"throw"===a&&n.iterator.return&&(r.method="return",r.arg=t,e(n,r),"throw"===r.method)||"return"!==a&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+a+"' method")),g;var o=h(i,n.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var s=o.arg;return s?s.done?(r[n.resultName]=s.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,g)}(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===v)throw a=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=m;var u=h(e,n,r);if("normal"===u.type){if(a=r.done?y:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=y,r.method="throw",r.arg=u.arg)}}}(e,r,new R(a||[]))}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=p;var v="suspendedStart",m="executing",y="completed",g={};function b(){}function w(){}function k(){}var x={};f(x,u,function(){return this});var O=Object.getPrototypeOf,C=O&&O(O(D([])));C&&C!==i&&o.call(C,u)&&(x=C);var S=k.prototype=b.prototype=Object.create(x);function E(e){["next","throw","return"].forEach(function(t){f(e,t,function(e){return this._invoke(t,e)})})}function P(e,t){var n;s(this,"_invoke",{value:function(a,i){function s(){return new t(function(n,s){!function n(a,i,s,c){var u=h(e[a],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,s,c)},function(e){n("throw",e,s,c)}):t.resolve(d).then(function(e){l.value=e,s(l)},function(e){return n("throw",e,s,c)})}c(u.arg)}(a,i,n,s)})}return n=n?n.then(s,s):s()}})}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(o.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw TypeError(r(e)+" is not iterable")}return w.prototype=k,s(S,"constructor",{value:k,configurable:!0}),s(k,"constructor",{value:w,configurable:!0}),w.displayName=f(k,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,f(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},n.awrap=function(e){return{__await:e}},E(P.prototype),f(P.prototype,l,function(){return this}),n.AsyncIterator=P,n.async=function(e,t,r,a,i){void 0===i&&(i=Promise);var o=new P(p(e,t,r,a),i);return n.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},E(S),f(S,d,"Generator"),f(S,u,function(){return this}),f(S,"toString",function(){return"[object Generator]"}),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=D,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;A(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},n}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},77749:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},73461:function(e,t,n){var r=n(24789)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},71821:function(e,t,n){"use strict";var r=n(42124),a=n(35362),i=n(14453),o=n(19702),s=r("%Reflect.apply%",!0)||a("Function.prototype.apply");e.exports=function(e,t){var n=arguments.length>2?arguments[2]:[];if(!o(n))throw new i("Assertion failed: optional `argumentsList`, if provided, must be a List");return s(e,t,n)}},62554:function(e,t,n){"use strict";var r=n(14453),a=n(83774),i=n(60423),o=n(63630);e.exports=function(e,t){if("Object"!==o(e))throw new r("Assertion failed: Type(O) is not Object");if(!i(t))throw new r("Assertion failed: IsPropertyKey(P) is not true, got "+a(t));return e[t]}},40801:function(e,t,n){"use strict";var r=n(14453),a=n(60423),i=n(63630);e.exports=function(e,t){if("Object"!==i(e))throw new r("Assertion failed: `O` must be an Object");if(!a(t))throw new r("Assertion failed: `P` must be a Property Key");return t in e}},19702:function(e,t,n){"use strict";e.exports=n(82201)},31062:function(e,t,n){"use strict";e.exports=n(95320)},60423:function(e){"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==typeof e}},49206:function(e,t,n){"use strict";var r=n(14453),a=n(62554),i=n(48369),o=n(63630);e.exports=function(e){if("Object"!==o(e))throw new r("Assertion failed: `obj` must be an Object");return i(a(e,"length"))}},42964:function(e,t,n){"use strict";var r=n(42124),a=r("%Number%"),i=r("%RegExp%"),o=n(14453),s=r("%parseInt%"),c=n(35362),u=n(1107),l=c("String.prototype.slice"),d=u(/^0b[01]+$/i),f=u(/^0o[0-7]+$/i),p=u(/^[-+]0x[0-9a-f]+$/i),h=u(new i("[\x85​￾]","g")),v=n(46057);e.exports=function e(t){if("string"!=typeof t)throw new o("Assertion failed: `argument` is not a String");if(d(t))return a(s(l(t,2),2));if(f(t))return a(s(l(t,2),8));if(h(t)||p(t))return NaN;var n=v(t);return n!==t?e(n):a(t)}},61603:function(e,t,n){"use strict";var r=n(96354),a=n(69799),i=n(20944),o=n(95074);e.exports=function(e){var t=r(e);return i(t)||0===t?0:o(t)?a(t):t}},48369:function(e,t,n){"use strict";var r=n(57475),a=n(61603);e.exports=function(e){var t=a(e);return t<=0?0:t>r?r:t}},96354:function(e,t,n){"use strict";var r=n(42124),a=n(14453),i=r("%Number%"),o=n(86222),s=n(82767),c=n(42964);e.exports=function(e){var t=o(e)?e:s(e,i);if("symbol"==typeof t)throw new a("Cannot convert a Symbol value to a number");if("bigint"==typeof t)throw new a("Conversion from 'BigInt' to 'number' is not allowed.");return"string"==typeof t?c(t):i(t)}},82767:function(e,t,n){"use strict";var r=n(41503);e.exports=function(e){return arguments.length>1?r(e,arguments[1]):r(e)}},42694:function(e,t,n){"use strict";var r=n(42124)("%String%"),a=n(14453);e.exports=function(e){if("symbol"==typeof e)throw new a("Cannot convert a Symbol value to a string");return r(e)}},63630:function(e,t,n){"use strict";var r=n(92309);e.exports=function(e){return"symbol"==typeof e?"Symbol":"bigint"==typeof e?"BigInt":r(e)}},33878:function(e){"use strict";var t=Math.floor;e.exports=function(e){return"bigint"==typeof e?e:t(e)}},69799:function(e,t,n){"use strict";var r=n(33878),a=n(14453);e.exports=function(e){if("number"!=typeof e&&"bigint"!=typeof e)throw new a("argument must be a Number or a BigInt");var t=e<0?-r(-e):r(e);return 0===t?0:t}},92309:function(e){"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}},82201:function(e,t,n){"use strict";var r=n(42124)("%Array%"),a=!r.isArray&&n(35362)("Object.prototype.toString");e.exports=r.isArray||function(e){return"[object Array]"===a(e)}},95074:function(e,t,n){"use strict";var r=n(20944);e.exports=function(e){return("number"==typeof e||"bigint"==typeof e)&&!r(e)&&e!==1/0&&e!==-1/0}},20944:function(e){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},86222:function(e){"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},57475:function(e){"use strict";e.exports=Number.MAX_SAFE_INTEGER||0x1fffffffffffff},37504:function(e){"use strict";e.exports=JSON.parse('{"qualifications":[{"label":"identity_photo","purpose":"attestation","subjects":["identity"]},{"label":"national_id_card","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["identity"]},{"label":"passport","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["identity"]},{"label":"residence_permit","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"immigration","subjects":["permit","identity"]},{"label":"family_record_book","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"birth_certificate","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["identity","family"]},{"label":"driver_license","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"transport","subjects":["permit","driving"]},{"label":"other_identity_document","purpose":"attestation","subjects":["identity"]},{"label":"wedding","purpose":"contract","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"pacs","purpose":"contract","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"divorce","purpose":"contract","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"large_family_card","purpose":"attestation","sourceCategory":"transport","subjects":["right"]},{"label":"caf","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"family","subjects":["right"]},{"label":"other_family_document","subjects":["family"]},{"label":"diploma","purpose":"attestation","sourceCategory":"education","subjects":["achievement"]},{"label":"work_contract","purpose":"contract","sourceCategory":"employer","subjects":["work","employment"]},{"label":"pay_sheet","purpose":"attestation","sourceCategory":"employer","subjects":["work","revenues"]},{"label":"fidelity_card","sourceCategory":"shopping"},{"label":"single_parent_benefit","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"family","subjects":["revenues"]},{"label":"transport_card","sourceCategory":"transport","subjects":["vehicule"]},{"label":"electoral_card","sourceCategory":"gov"},{"label":"employment_center_certificate","purpose":"attestation","sourceCategory":"gov","subjects":["employment"]},{"label":"unemployment_benefit","purpose":"attestation","sourceCategory":"gov","subjects":["revenues"]},{"label":"pension","purpose":"attestation","sourceCategory":"gov","subjects":["revenues"]},{"label":"other_revenue","purpose":"attestation","subjects":["revenues"]},{"label":"gradebook","purpose":"report","sourceCategory":"education","subjects":["history"]},{"label":"student_card","purpose":"attestation","sourceCategory":"education","subjects":["identity","right","employment","education"]},{"label":"resume","purpose":"description","subjects":["employment"]},{"label":"motivation_letter","purpose":"description","subjects":["employment"]},{"label":"other_work_document","purpose":"employment"},{"label":"health_book","purpose":"attestation","sourceCategory":"health","subjects":["capacity","vaccine"]},{"label":"health_certificate","purpose":"attestation","sourceCategory":"health","subjects":["capacity","vaccine"]},{"label":"pregnancy_medical_certificate","purpose":"attestation","sourceCategory":"health","subjects":["pregnancy"]},{"label":"work_disability_recognition","purpose":"attestation","sourceCategory":"health","subjects":["right"]},{"label":"national_health_insurance_card","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"health","subjects":["insurance"]},{"label":"national_health_insurance_right_certificate","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"health","subjects":["right","insurance"]},{"label":"health_insurance_card","purpose":"attestation","sourceCategory":"insurance","sourceSubCategory":"health","subjects":["insurance"]},{"label":"prescription","purpose":"attestation","sourceCategory":"health","subjects":["right","medecine"]},{"label":"health_invoice","purpose":"invoice","sourceCategory":"health"},{"label":"other_health_document","subjects":["health"]},{"label":"vehicle_registration","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"transport","subjects":["vehicule","identity","right"]},{"label":"car_insurance","purpose":"attestation","sourceCategory":"insurance","sourceSubCategory":"transport","subjects":["insurance","car"]},{"label":"mechanic_invoice","purpose":"invoice","sourceCategory":"transport"},{"label":"transport_invoice","purpose":"invoice","sourceCategory":"transport"},{"label":"other_transport_document","sourceCategory":"transport"},{"label":"house_sale_agreeement","purpose":"contract","sourceCategory":"real_estate","subjects":["house"]},{"label":"real_estate_tax","purpose":"invoice","sourceCategory":"gov","sourceSubCategory":"real_estate","subjects":["tax","house"]},{"label":"building_permit","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"real_estate","subjects":["permit","house"]},{"label":"technical_diagnostic_record","purpose":"report","sourceCategory":"real_estate","subjects":["compliance","house"]},{"label":"lease","purpose":"contract","sourceCategory":"real_estate","subjects":["house"]},{"label":"rent_receipt","purpose":"invoice","sourceCategory":"real_estate","subjects":["house"]},{"label":"house_insurance","purpose":"contract","sourceCategory":"insurance","sourceSubCategory":"real_estate","subjects":["insurance","house"]},{"label":"work_quote","purpose":"description","sourceCategory":"building","subjects":["building","house"]},{"label":"work_invoice","purpose":"invoice","sourceCategory":"building","subjects":["building","house"]},{"label":"other_house_document","subjects":["house"]},{"label":"phone_invoice","purpose":"invoice","sourceCategory":"telecom","sourceSubCategory":"mobile"},{"label":"isp_invoice","purpose":"invoice","sourceCategory":"telecom","sourceSubCategory":"internet","subjects":["subscription"]},{"label":"telecom_invoice","purpose":"invoice","sourceCategory":"telecom"},{"label":"energy_invoice","purpose":"invoice","sourceCategory":"energy"},{"label":"water_invoice","purpose":"invoice","sourceCategory":"water"},{"label":"energy_contract","purpose":"contract","sourceCategory":"energy"},{"label":"appliance_invoice","purpose":"invoice","sourceCategory":"retail"},{"label":"web_service_invoice","purpose":"invoice","sourceCategory":"web"},{"label":"restaurant_invoice","purpose":"invoice","sourceCategory":"alimentation"},{"label":"grocery_invoice","purpose":"invoice","sourceCategory":"shopping"},{"label":"other_invoice","purpose":"invoice"},{"label":"tax_certificate","purpose":"attestation","sourceCategory":"gov","subjects":["tax"]},{"label":"tax_return","purpose":"report","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["tax"]},{"label":"tax_notice","purpose":"invoice","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["tax"]},{"label":"tax_timetable","purpose":"report","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["tax"]},{"label":"other_tax_document","subjects":["tax"]},{"label":"bank_details","purpose":"attestation","sourceCategory":"bank","subjects":["bank_account"]},{"label":"bank_statement","purpose":"report","sourceCategory":"bank","subjects":["history"]},{"label":"loan_agreement","purpose":"contract","sourceCategory":"bank"},{"label":"other_bank_document","sourceCategory":"bank"},{"label":"receipt","purpose":"report"},{"label":"payment_proof_family_allowance","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["subvention"]},{"label":"school_attendance_certificate","purpose":"attestation","sourceCategory":"education","subjects":["identity","right","education"]},{"label":"school_insurance_certificate","purpose":"attestation","sourceCategory":"education","subjects":["education","insurance"]},{"label":"unfit_for_habitation_declaration","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"real_estate","subjects":["compliance"]},{"label":"accommodation_proof","purpose":"attestation","sourceCategory":"individual","subjects":["address"]},{"label":"citizen_registration_certificate","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["achievement","education"]},{"label":"personal_sporting_licence","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"sport","subjects":["permit","invoice"]},{"label":"other_activity_document","sourceSubCategory":"sport","subjects":["permit","invoice"]},{"label":"real_estate_insurance","purpose":"contract","sourceCategory":"insurance","sourceSubCategory":"real_estate","subjects":["insurance"]},{"label":"person_insurance","purpose":"contract","sourceCategory":"insurance","subjects":["insurance"]},{"label":"other_administrative_document"},{"label":"expense_claim","purpose":"invoice"},{"label":"fine","purpose":"invoice","sourceCategory":"gov"},{"label":"condition_report","purpose":"contract","sourceCategory":"real_estate","subjects":["house"]},{"label":"note_identity_document"},{"label":"note_family_document"},{"label":"note_work_document"},{"label":"note_health_document"},{"label":"note_house_document"},{"label":"note_transport_document"},{"label":"note_activity_document"},{"label":"note_finance"},{"label":"note_invoice"}],"purposeKnownValues":["attestation","contract","invoice","report","description","evaluation","employment"],"sourceCategoryKnownValues":["bank","insurance","retail","telecom","energy","water","health","gov","association","education","employer","transport","goods","alimentation","building","real_estate","web","individual","shopping"],"sourceSubCategoryKnownValues":["civil_registration","immigration","transport","family","tax","health","real_estate","mobile","internet","citizen","sport"],"subjectsKnownValues":["identity","permit","family","address","driving","right","subvention","achievement","degree","work","employment","revenues","history","insurance","medical_act","vehicule","car","moto","truck","boat","subscription","buy/sale","house","compliance","building","food","real_estate","tax","address","education","statement","course","internet","phone","vaccine","capacity","health","drugs","child","pregnancy","bank_account"]}')},20455:function(e){"use strict";e.exports=JSON.parse('{"nationalities":{"AD":"Andorran","AE":"Emirian","AF":"Afghan","AG":"Antiguans","AL":"Albanian","AM":"Armenian","AO":"Angolan","AR":"Argentinean","AT":"Austrian","AU":"Australian","AX":"\xc5land Islands","AZ":"Azerbaijani","BA":"Bosnian - Herzegovinian","BB":"Barbadian","BD":"Bangladeshi","BE":"Belgian","BF":"Burkinabe","BG":"Bulgarian","BH":"Bahraini","BI":"Burundian","BJ":"Beninese","BL":"Saint Barth\xe9lemy","BM":"Bermuda","BN":"Bruneian","BO":"Bolivian","BQ":"Bonaire, Sint Eustatius and Saba","BR":"Brazilian","BS":"Bahamian","BT":"Bhutanese","BV":"Bouvet Island","BW":"Batswana","BY":"Belarusian","BZ":"Belizean","CA":"Canadian","CC":"Cocos (Keeling) Islands","CD":"Congolese (Democratic Republic of the Congo)","CF":"Central African","CG":"Congolese (Republic of the Congo)","CH":"Swiss","CI":"Ivorian","CK":"Cook Islands","CL":"Chilean","CM":"Cameroonian","CN":"Chinese","CO":"Colombian","CR":"Costa Rican","CU":"Cuban","CV":"Cape Verdean","CW":"Cura\xe7ao","CX":"Christmas Island","CY":"Cypriot","CZ":"Czech","DE":"German","DJ":"Djibouti","DK":"Danish","DM":"Dominican (Dominica)","DO":"Dominican (Dominican Republic)","DZ":"Algerian","EC":"Ecuadorean","EE":"Estonian","EG":"Egyptian","EH":"Western Sahara","ER":"Eritrean","ES":"Spanish","ET":"Ethiopian","FI":"Finnish","FJ":"Fijian","FK":"Falkland Islands (Malvinas)","FM":"Micronesian","FO":"Faroe Islands","FR":"French","GA":"Gabonese","GB":"British","GD":"Grenadian","GE":"Georgian","GF":"French (French Guiana)","GG":"Guernsey","GH":"Ghanaian","GI":"Gibraltar","GL":"Greenland","GM":"Gambian","GN":"Guinean","GP":"Guadeloupe","GQ":"Equatorial Guinean","GR":"Greek","GS":"South Georgia and the South Sandwich Islands","GT":"Guatemalan","GU":"Guam","GW":"Guinea-Bissauan","GY":"Guyanese","HK":"Hong Kong","HM":"Heard Island and Mcdonald Islands","HN":"Honduran","HR":"Croatian","HT":"Haitian","HU":"Hungarian","ID":"Indonesian","IE":"Irish","IL":"Israeli","IM":"Manx","IN":"Indian","IO":"British Indian Ocean Territory","IQ":"Iraqi","IR":"Iranian","IS":"Icelandic","IT":"Italian","JE":"Jersey","JM":"Jamaican","JO":"Jordanian","JP":"Japanese","KE":"Kenyan","KG":"Kyrgyz","KH":"Cambodian","KI":"I-Kiribati","KM":"Comoran","KN":"Kittian and Nevisian","KP":"North Korean","KR":"South Korean","KW":"Kuwaiti","KY":"Cayman Islands","KZ":"Kazakhstani","LA":"Laotian","LB":"Lebanese","LC":"Saint Lucian","LI":"Liechtensteiner","LK":"Sri Lankan","LR":"Liberian","LS":"Mosotho","LT":"Lithuanian","LU":"Luxembourger","LV":"Latvian","LY":"Libyan","MA":"Moroccan","MC":"Monacan","MD":"Moldovan","ME":"Montenegrin","MF":"Saint Martin (French part)","MG":"Malagasy","MH":"Marshallese","MK":"Macedonian","ML":"Malian","MM":"Burmese","MN":"Mongolian","MO":"Macao","MP":"Northern Mariana Islands","MQ":"Martinique","MR":"Mauritanian","MS":"Montserrat","MT":"Maltese","MU":"Mauritian","MV":"Maldivan","MW":"Malawian","MX":"Mexican","MY":"Malaysian","MZ":"Mozambican","NA":"Namibian","NC":"New Caledonia","NE":"Nigerien","NF":"Norfolk Island","NG":"Nigerian","NI":"Nicaraguan","NL":"Dutch","NO":"Norwegian","NP":"Nepalese","NR":"Nauruan","NU":"Niue","NZ":"New Zealander","OM":"Omani","PA":"Panamanian","PE":"Peruvian","PF":"French (French Polynesia)","PG":"Papua New Guinea","PH":"Filipino","PK":"Pakistani","PL":"Polish","PM":"Saint Pierre and Miquelon","PN":"Pitcairn","PR":"Puerto Rico","PS":"Palestinian Territory, Occupied","PT":"Portuguese","PW":"Palauan","PY":"Paraguayan","QA":"Qatari","RE":"Reunion","RO":"Romanian","RS":"Serbian","RU":"Russian","RW":"Rwandan","SA":"Saudi","SB":"Solomon Islander","SC":"Seychellois","SD":"Sudanese","SE":"Swedish","SG":"Singaporean","SH":"Saint Helena","SI":"Slovenian","SJ":"Svalbard and Jan Mayen","SK":"Slovakian","SL":"Sierra Leonean","SM":"San Marinese","SN":"Senegalese","SO":"Somali","SR":"Surinamer","SS":"South Sudan","ST":"Sao Tomean","SV":"Salvadoran","SX":"Sint Maarten (Dutch part)","SY":"Syrian","SZ":"Swazi","TC":"Turks and Caicos Islands","TD":"Chadian","TF":"French (French Southern Territories)","TG":"Togolese","TH":"Thai","TJ":"Tajik","TK":"Tokelau","TL":"East Timorese","TM":"Turkmenistan","TN":"Tunisian","TO":"Tongan","TR":"Turkish","TT":"Trinidadian or Tobagonian","TV":"Tuvaluan","TW":"Taiwanese","TZ":"Tanzanian","UA":"Ukrainian","UG":"Ugandan","UM":"United States Minor Outlying Islands","US":"American","UY":"Uruguayan","UZ":"Uzbekistani","VA":"Holy See (Vatican City State)","VC":"Saint Vincent and the Grenadines","VE":"Venezuelan","VG":"Virgin Islands, British","VI":"Virgin Islands, U.S.","VN":"Vietnamese","VU":"Vanuatu","WF":"Welsh","WS":"Samoan","YE":"Yemenite","YT":"Mayotte","ZA":"South African","ZM":"Zambian","ZW":"Zimbabwean"},"countries":{"AD":"Andorra","AE":"United Arab Emirates","AF":"Afghanistan","AG":"Antigua and Barbuda","AL":"Albania","AM":"Armenia","AO":"Angola","AR":"Argentina","AT":"Austria","AU":"Australia","AX":"\xc5land Islands","AZ":"Azerbaijan","BA":"Bosnia and Herzegovina","BB":"Barbados","BD":"Bangladesh","BE":"Belgium","BF":"Burkina Faso","BG":"Bulgaria","BH":"Bahrain","BI":"Burundi","BJ":"Benin","BL":"Saint Barth\xe9lemy","BM":"Bermuda","BN":"Brunei Darussalam","BO":"Bolivia","BQ":"Bonaire, Sint Eustatius and Saba","BR":"Brazil","BS":"Bahamas","BT":"Bhutan","BV":"Bouvet Island","BW":"Botswana","BY":"Belarus","BZ":"Belize","CA":"Canada","CC":"Cocos (Keeling) Islands","CD":"Democratic Republic of the Congo","CF":"Central African Republic","CG":"Republic of the Congo","CH":"Switzerland","CI":"Ivory Coast","CK":"Cook Islands","CL":"Chile","CM":"Cameroon","CN":"People\'s Republic of China","CO":"Colombia","CR":"Costa Rica","CU":"Cuba","CV":"Cape Verde","CW":"Cura\xe7ao","CX":"Christmas Island","CY":"Cyprus","CZ":"Czech Republic","DE":"Germany","DJ":"Djibouti","DK":"Denmark","DM":"Dominica","DO":"Dominican Republic","DZ":"Algeria","EC":"Ecuador","EE":"Estonia","EG":"Egypt","EH":"Western Sahara","ER":"Eritrea","ES":"Spain","ET":"Ethiopia","FI":"Finland","FJ":"Fiji","FK":"Falkland Islands (Malvinas)","FM":"Micronesia, Federated States of","FO":"Faroe Islands","FR":"France","GA":"Gabon","GB":"United Kingdom","GD":"Grenada","GE":"Georgia","GF":"French Guiana","GG":"Guernsey","GH":"Ghana","GI":"Gibraltar","GL":"Greenland","GM":"Gambia","GN":"Guinea","GP":"Guadeloupe","GQ":"Equatorial Guinea","GR":"Greece","GS":"South Georgia and the South Sandwich Islands","GT":"Guatemala","GU":"Guam","GW":"Guinea-Bissau","GY":"Guyana","HK":"Hong Kong","HM":"Heard Island and McDonald Islands","HN":"Honduras","HR":"Croatia","HT":"Haiti","HU":"Hungary","ID":"Indonesia","IE":"Ireland","IL":"Israel","IM":"Isle of Man","IN":"India","IO":"British Indian Ocean Territory","IQ":"Iraq","IR":"Iran","IS":"Iceland","IT":"Italy","JE":"Jersey","JM":"Jamaica","JO":"Jordan","JP":"Japan","KE":"Kenya","KG":"Kyrgyzstan","KH":"Cambodia","KI":"Kiribati","KM":"Comoros","KN":"Saint Kitts and Nevis","KP":"North Korea","KR":"South Korea","KW":"Kuwait","KY":"Cayman Islands","KZ":"Kazakhstan","LA":"Lao People\'s Democratic Republic","LB":"Lebanon","LC":"Saint Lucia","LI":"Liechtenstein","LK":"Sri Lanka","LR":"Liberia","LS":"Lesotho","LT":"Lithuania","LU":"Luxembourg","LV":"Latvia","LY":"Libya","MA":"Morocco","MC":"Monaco","MD":"Moldova, Republic of","ME":"Montenegro","MF":"Saint Martin (French part)","MG":"Madagascar","MH":"Marshall Islands","MK":"North Macedonia","ML":"Mali","MM":"Myanmar","MN":"Mongolia","MO":"Macao","MP":"Northern Mariana Islands","MQ":"Martinique","MR":"Mauritania","MS":"Montserrat","MT":"Malta","MU":"Mauritius","MV":"Maldives","MW":"Malawi","MX":"Mexico","MY":"Malaysia","MZ":"Mozambique","NA":"Namibia","NC":"New Caledonia","NE":"Niger","NF":"Norfolk Island","NG":"Nigeria","NI":"Nicaragua","NL":"Netherlands","NO":"Norway","NP":"Nepal","NR":"Nauru","NU":"Niue","NZ":"New Zealand","OM":"Oman","PA":"Panama","PE":"Peru","PF":"French Polynesia","PG":"Papua New Guinea","PH":"Philippines","PK":"Pakistan","PL":"Poland","PM":"Saint Pierre and Miquelon","PN":"Pitcairn Islands","PR":"Puerto Rico","PS":"Palestine","PT":"Portugal","PW":"Palau","PY":"Paraguay","QA":"Qatar","RE":"Reunion","RO":"Romania","RS":"Serbia","RU":"Russia","RW":"Rwanda","SA":"Saudi Arabia","SB":"Solomon Islands","SC":"Seychelles","SD":"Sudan","SE":"Sweden","SG":"Singapore","SH":"Saint Helena","SI":"Slovenia","SJ":"Svalbard and Jan Mayen","SK":"Slovakia","SL":"Sierra Leone","SM":"San Marino","SN":"Senegal","SO":"Somalia","SR":"Suriname","SS":"South Sudan","ST":"Sao Tome and Principe","SV":"El Salvador","SX":"Sint Maarten (Dutch part)","SY":"Syrian Arab Republic","SZ":"Eswatini","TC":"Turks and Caicos Islands","TD":"Chad","TF":"French Southern Territories","TG":"Togo","TH":"Thailand","TJ":"Tajikistan","TK":"Tokelau","TL":"Timor-Leste","TM":"Turkmenistan","TN":"Tunisia","TO":"Tonga","TR":"Turkey","TT":"Trinidad and Tobago","TV":"Tuvalu","TW":"Taiwan","TZ":"United Republic of Tanzania","UA":"Ukraine","UG":"Uganda","UM":"United States Minor Outlying Islands","US":"United States of America","UY":"Uruguay","UZ":"Uzbekistan","VA":"Holy See (Vatican City State)","VC":"Saint Vincent and the Grenadines","VE":"Venezuela","VG":"Virgin Islands, British","VI":"Virgin Islands, U.S.","VN":"Vietnam","VU":"Vanuatu","WF":"Wallis and Futuna","WS":"Samoa","YE":"Yemen","YT":"Mayotte","ZA":"South Africa","ZM":"Zambia","ZW":"Zimbabwe"}}')},40883:function(e){"use strict";e.exports=JSON.parse('{"nationalities":{"AD":"Andorran","AE":"\xc9mirien","AF":"Afghan","AG":"Antiguayen","AL":"Albanais","AM":"Arm\xe9nien","AO":"Angolais","AR":"Argentin","AT":"Autrichien","AU":"Australien","AX":"\xceles Aland","AZ":"Azerba\xefdjanais","BA":"Bosnien","BB":"Barbadien","BD":"Bangladais","BE":"Belge","BF":"Burkinab\xe9","BG":"Bulgare","BH":"Bahre\xefnien","BI":"Burundais","BJ":"B\xe9ninois","BL":"Saint-Barth\xe9lemy","BM":"Bermudien","BN":"Brun\xe9ien","BO":"Bolivien","BQ":"Pays-Bas Carib\xe9ens","BR":"Br\xe9silien","BS":"Bahamien","BT":"Bhoutanais","BV":"\xcele Bouvet","BW":"Botswanais","BY":"Bi\xe9lorusse","BZ":"B\xe9lizien","CA":"Canadien","CC":"\xceles Cocos","CD":"Congolais (R\xe9publique d\xe9mocratique du Congo)","CF":"Centrafricain","CG":"Congolais (R\xe9publique du Congo)","CH":"Suisse","CI":"Ivoirien","CK":"\xceles Cook","CL":"Chilien","CM":"Camerounais","CN":"Chinois","CO":"Colombien","CR":"Costaricain","CU":"Cubain","CV":"Cap verdien","CW":"Curacien","CX":"L\'\xeele Christmas","CY":"Chypriote","CZ":"Tch\xe8que","DE":"Allemand","DJ":"Djiboutien","DK":"Danois","DM":"Dominicain (Dominique)","DO":"Dominicain (R\xe9publique dominicaine)","DZ":"Alg\xe9rien","EC":"\xc9quatorien","EE":"Estonien","EG":"\xc9gyptien","EH":"Sahara Occidental","ER":"\xc9rythr\xe9en","ES":"Espagnol","ET":"\xc9thiopien","FI":"Finlandais","FJ":"Fidjien","FK":"Malouin","FM":"Micron\xe9sien","FO":"F\xe9ro\xefen","FR":"Fran\xe7ais","GA":"Gabonais","GB":"Britannique","GD":"Grenadien","GE":"G\xe9orgien","GF":"Fran\xe7ais (Guyane)","GG":"Guernesiais","GH":"Ghan\xe9en","GI":"Gibraltariens","GL":"Groenlandais","GM":"Gambien","GN":"Guin\xe9en","GP":"Guadeloup\xe9en","GQ":"\xc9quato-guin\xe9en","GR":"Grec","GS":"G\xe9orgie du Sud et les \xeeles Sandwich du Sud","GT":"Guat\xe9malt\xe8que","GU":"Guam","GW":"Bissaoguin\xe9en","GY":"Guyanais","HK":"Hongkongais","HM":"\xceles Heard-et-MacDonald","HN":"Hondurien","HR":"Croate","HT":"Ha\xeftien","HU":"Hongrois","ID":"Indon\xe9sien","IE":"Irlandais","IL":"Isra\xe9lien","IM":"\xcele de Man","IN":"Indien","IO":"Territoire britannique de l\'oc\xe9an Indien","IQ":"Irakien","IR":"Iranien","IS":"Islandais","IT":"Italien","JE":"Jersiais","JM":"Jama\xefquain","JO":"Jordanien","JP":"Japonais","KE":"K\xe9nyan","KG":"Kirghiz","KH":"Cambodgien","KI":"Kiribatiens","KM":"Comorien","KN":"Afro-Kittitien et Afro-Nevisien","KP":"Nord cor\xe9en","KR":"Sud cor\xe9en","KW":"Kowe\xeftien","KY":"Ca\xefmanien","KZ":"Kazakhstanais","LA":"Laotien","LB":"Libanais","LC":"Saint-Lucien","LI":"Liechtensteinois","LK":"Sri Lankais","LR":"Liberian","LS":"Mosotho","LT":"Lituanien","LU":"Luxembourgeois","LV":"Letton","LY":"Libyen","MA":"Marocain","MC":"Mon\xe9gasque","MD":"Moldave","ME":"Mont\xe9n\xe9grin","MF":"Saint-Martinois (France)","MG":"Malgache","MH":"Marshallais","MK":"Mac\xe9donien","ML":"Malien","MM":"Birman","MN":"Mongol","MO":"Macan\xe9en","MP":"\xceles Mariannes du Nord","MQ":"Martiniquais","MR":"Mauritanien","MS":"Montserratien","MT":"Maltais","MU":"Mauricien","MV":"Maldivien","MW":"Malawien","MX":"Mexicain","MY":"Malaisien","MZ":"Mozambicain","NA":"Namibien","NC":"N\xe9o-Cal\xe9donien","NE":"Nig\xe9rien","NF":"Norfolkais","NG":"Nig\xe9rian","NI":"Nicaraguayen","NL":"N\xe9erlandais","NO":"Norv\xe9gien","NP":"N\xe9palais","NR":"Nauruan","NU":"Niu\xe9en","NZ":"N\xe9o-Z\xe9landais","OM":"Omanais","PA":"Panam\xe9en","PE":"P\xe9ruvien","PF":"Fran\xe7ais (Polyn\xe9sie fran\xe7aise)","PG":"Papouasien","PH":"Philippin","PK":"Pakistanais","PL":"Polonais","PM":"Saint-Pierrais ou Miquelonais","PN":"\xceles Pitcairn","PR":"Portoricain","PS":"Territoires Palestiniens, Occup\xe9s","PT":"Portugais","PW":"Palauan","PY":"Paraguayen","QA":"Qatarien","RE":"R\xe9unionnais","RO":"Roumain","RS":"Serbe","RU":"Russe","RW":"Rwandais","SA":"Saoudien","SB":"Salomonais","SC":"Seychellois","SD":"Soudanais","SE":"Su\xe9dois","SG":"Singapourien","SH":"Sainte H\xe9l\xe8ne","SI":"Slov\xe8ne","SJ":"Svalbard et Jan Mayen","SK":"Slovaque","SL":"Sierra L\xe9onais","SM":"Saint-Marinais","SN":"S\xe9n\xe9galais","SO":"Somalien","SR":"Surinamais","SS":"Sud-Soudanais","ST":"Santom\xe9en","SV":"Salvadorien","SX":"Saint-Martinois (Pays-Bas)","SY":"Syrien","SZ":"Swazi","TC":"\xceles Turques-et-Ca\xefques","TD":"Tchadien","TF":"Fran\xe7ais (TAAF)","TG":"Togolais","TH":"Tha\xeflandais","TJ":"Tadjik","TK":"Tok\xe9laou","TL":"Est-Timorais","TM":"Turkm\xe8ne","TN":"Tunisien","TO":"Tongien","TR":"Turc","TT":"Trinidadien ou Tobagonien","TV":"Tuvalais","TW":"Ta\xefwanais","TZ":"Tanzanien","UA":"Ukrainien","UG":"Ougandais","UM":"\xceles mineures \xe9loign\xe9es des \xc9tats-Unis","US":"Am\xe9ricain","UY":"Uruguayen","UZ":"Ouzbek","VA":"Saint-Si\xe8ge (\xc9tat de la cit\xe9 du Vatican)","VC":"Vincentais","VE":"V\xe9n\xe9zu\xe9lien","VG":"\xceles Vierges Britanniques","VI":"\xceles Vierges Am\xe9ricaines","VN":"Vietnamien","VU":"Vanuatais","WF":"Gallois","WS":"Samoan","YE":"Y\xe9m\xe9nite","YT":"Mahorais","ZA":"Sud Africain","ZM":"Zambien","ZW":"Zimbabw\xe9en"},"countries":{"AD":"Andorre","AE":"\xc9mirats Arabes Unis","AF":"Afghanistan","AG":"Antigua-et-Barbuda","AL":"Albanie","AM":"Arm\xe9nie","AO":"Angola","AR":"Argentine","AT":"Autriche","AU":"Australie","AX":"\xc5land","AZ":"Azerba\xefdjan","BA":"Bosnie-Herz\xe9govine","BB":"Barbade","BD":"Bangladesh","BE":"Belgique","BF":"Burkina Faso","BG":"Bulgarie","BH":"Bahre\xefn","BI":"Burundi","BJ":"B\xe9nin","BL":"Saint-Barth\xe9lemy","BM":"Bermudes","BN":"Brunei Darussalam","BO":"Bolivie","BQ":"Bonaire, Saint-Eustache et Saba","BR":"Br\xe9sil","BS":"Bahamas","BT":"Bhoutan","BV":"\xcele Bouvet","BW":"Botswana","BY":"Bi\xe9lorussie","BZ":"Belize","CA":"Canada","CC":"\xceles Cocos","CD":"R\xe9publique d\xe9mocratique du Congo","CF":"R\xe9publique Centrafricaine","CG":"R\xe9publique du Congo","CH":"Suisse","CI":"C\xf4te-d\'Ivoire","CK":"\xceles Cook","CL":"Chili","CM":"Cameroun","CN":"Chine","CO":"Colombie","CR":"Costa Rica","CU":"Cuba","CV":"Cap-Vert","CW":"Cura\xe7ao","CX":"\xcele Christmas","CY":"Chypre","CZ":"R\xe9publique Tch\xe8que","DE":"Allemagne","DJ":"Djibouti","DK":"Danemark","DM":"Dominique","DO":"R\xe9publique Dominicaine","DZ":"Alg\xe9rie","EC":"\xc9quateur","EE":"Estonie","EG":"\xc9gypte","EH":"Sahara occidental","ER":"\xc9rythr\xe9e","ES":"Espagne","ET":"\xc9thiopie","FI":"Finlande","FJ":"Fidji","FK":"\xceles Malouines","FM":"Micron\xe9sie","FO":"\xceles F\xe9ro\xe9","FR":"France","GA":"Gabon","GB":"Royaume-Uni","GD":"Grenade","GE":"G\xe9orgie","GF":"Guyane fran\xe7aise","GG":"Guernesey","GH":"Ghana","GI":"Gibraltar","GL":"Groenland","GM":"Gambie","GN":"Guin\xe9e","GP":"Guadeloupe","GQ":"Guin\xe9e \xe9quatoriale","GR":"Gr\xe8ce","GS":"G\xe9orgie du Sud-et-les \xceles Sandwich du Sud","GT":"Guatemala","GU":"Guam","GW":"Guin\xe9e-Bissau","GY":"Guyana","HK":"Hong Kong","HM":"\xceles Heard-et-MacDonald","HN":"Honduras","HR":"Croatie","HT":"Ha\xefti","HU":"Hongrie","ID":"Indon\xe9sie","IE":"Irlande","IL":"Isra\xebl","IM":"\xcele de Man","IN":"Inde","IO":"Oc\xe9an Indien Britannique","IQ":"Irak","IR":"Iran","IS":"Islande","IT":"Italie","JE":"Jersey","JM":"Jama\xefque","JO":"Jordanie","JP":"Japon","KE":"Kenya","KG":"Kirghizistan","KH":"Cambodge","KI":"Kiribati","KM":"Comores","KN":"Saint-Christophe-et-Ni\xe9v\xe8s","KP":"Cor\xe9e du Nord","KR":"Cor\xe9e du Sud","KW":"Kowe\xeft","KY":"\xceles Ca\xefmans","KZ":"Kazakhstan","LA":"Laos","LB":"Liban","LC":"Sainte-Lucie","LI":"Liechtenstein","LK":"Sri Lanka","LR":"Lib\xe9ria","LS":"Lesotho","LT":"Lituanie","LU":"Luxembourg","LV":"Lettonie","LY":"Libye","MA":"Maroc","MC":"Monaco","MD":"Moldavie","ME":"Mont\xe9n\xe9gro","MF":"Saint-Martin (partie fran\xe7aise)","MG":"Madagascar","MH":"\xceles Marshall","MK":"Mac\xe9doine du Nord","ML":"Mali","MM":"Myanmar","MN":"Mongolie","MO":"Macao","MP":"\xceles Mariannes du Nord","MQ":"Martinique","MR":"Mauritanie","MS":"Montserrat","MT":"Malte","MU":"Maurice","MV":"Maldives","MW":"Malawi","MX":"Mexique","MY":"Malaisie","MZ":"Mozambique","NA":"Namibie","NC":"Nouvelle-Cal\xe9donie","NE":"Niger","NF":"\xcele Norfolk","NG":"Nig\xe9ria","NI":"Nicaragua","NL":"Pays-Bas","NO":"Norv\xe8ge","NP":"N\xe9pal","NR":"Nauru","NU":"Niu\xe9","NZ":"Nouvelle-Z\xe9lande","OM":"Oman","PA":"Panama","PE":"P\xe9rou","PF":"Polyn\xe9sie fran\xe7aise","PG":"Papouasie-Nouvelle-Guin\xe9e","PH":"Philippines","PK":"Pakistan","PL":"Pologne","PM":"Saint-Pierre-et-Miquelon","PN":"\xceles Pitcairn","PR":"Porto Rico","PS":"Palestine","PT":"Portugal","PW":"Palaos","PY":"Paraguay","QA":"Qatar","RE":"R\xe9union","RO":"Roumanie","RS":"Serbie","RU":"Russie","RW":"Rwanda","SA":"Arabie Saoudite","SB":"\xceles Salomon","SC":"Seychelles","SD":"Soudan","SE":"Su\xe8de","SG":"Singapour","SH":"Sainte-H\xe9l\xe8ne","SI":"Slov\xe9nie","SJ":"Svalbard et \xcele Jan Mayen","SK":"Slovaquie","SL":"Sierra Leone","SM":"Saint-Marin","SN":"S\xe9n\xe9gal","SO":"Somalie","SR":"Suriname","SS":"Soudan du Sud","ST":"S\xe3o Tom\xe9-et-Principe","SV":"El Salvador","SX":"Saint-Martin (partie n\xe9erlandaise)","SY":"Syrie","SZ":"Royaume d\'Eswatini","TC":"\xceles Turques-et-Ca\xefques","TD":"Tchad","TF":"Terres australes fran\xe7aises","TG":"Togo","TH":"Tha\xeflande","TJ":"Tadjikistan","TK":"Tokelau","TL":"Timor-Leste","TM":"Turkm\xe9nistan","TN":"Tunisie","TO":"Tonga","TR":"Turquie","TT":"Trinit\xe9-et-Tobago","TV":"Tuvalu","TW":"Ta\xefwan","TZ":"R\xe9publique unie de Tanzanie","UA":"Ukraine","UG":"Ouganda","UM":"\xceles mineures \xe9loign\xe9es des \xc9tats-Unis","US":"\xc9tats-Unis d\'Am\xe9rique","UY":"Uruguay","UZ":"Ouzb\xe9kistan","VA":"Saint-Si\xe8ge (Vatican)","VC":"Saint-Vincent-et-les-Grenadines","VE":"Venezuela","VG":"\xceles vierges britanniques","VI":"\xceles vierges am\xe9ricaines","VN":"Vietnam","VU":"Vanuatu","WF":"Wallis-et-Futuna","WS":"Samoa","YE":"Y\xe9men","YT":"Mayotte","ZA":"Afrique du Sud","ZM":"Zambie","ZW":"Zimbabwe"}}')},28330:function(e){"use strict";e.exports=JSON.parse('{"country":{"foreign":"Foreign"},"Scan":{"scan_a_doc":"Scan a doc","save_doc":"Save the doc","filename":"Filename","save":"Save","cancel":"Cancel","qualify":"Describe","apply":"Apply","error":{"offline":"You are currently offline and you can\'t use this functionality. Please, try again later.","uploading":"You are already uploading a file. Please wait until the end of this upload and try again.","generic":"Something went wrong. Please try again."},"successful":{"qualified_ok":"You just have successfully described your file! "},"items":{"accommodation_proof":"Proof of accommodation |||| Proof of accommodations","appliance_invoice":"Appliance invoice |||| Appliance invoices","bank_details":"Bank detail |||| Bank details","bank_statement":"Bank statement |||| Bank statements","birth_certificate":"Birth certificate |||| Birth certificates","building_permit":"Building permit |||| Building permits","caf":"Social benefit rate |||| Social benefit rates","car_insurance":"Car insurance certificate |||| Car insurance certificates","citizen_registration_certificate":"Certificate of citizen registration |||| Certificates of citizen registration","condition_report":"Condition report |||| Condition reports","diploma":"Diploma |||| Diplomas","divorce":"Divorce |||| Divorces","driver_license":"Driving license |||| Driving licenses","electoral_card":"Electoral card |||| Electoral cards","employment_center_certificate":"Employment center certificate |||| Employment center certificates","energy_contract":"Energy provider contract |||| Energy provider contracts","energy_invoice":"Energy invoice |||| Energy invoices","expense_claim":"Expense claim |||| Expense claims","family_record_book":"Family record book |||| Family record books","family":"Family","fidelity_card":"Benefit card |||| Benefit cards","fine":"Fine |||| Fines","gradebook":"Gradebook |||| Gradebooks","grocery_invoice":"Grocery invoice |||| Grocery invoices","health_book":"Health book |||| Health books","health_certificate":"Health/Vaccination certificate |||| Health/Vaccination certificates","health_insurance_card":"Insurance card |||| Insurance cards","health_invoice":"Health invoice |||| Health invoices","health":"Health","home":"Home","house_insurance":"Home insurance |||| Home insurances","house_sale_agreeement":"House sale agreement |||| House sale agreements","identity_photo":"Identity photo |||| Identity photos","identity":"Identity","invoice":"Invoice |||| Invoices","isp_invoice":"ISP invoice |||| ISP invoices","large_family_card":" Large Family Card |||| Large Family Cards","lease":"Lease |||| Leases","loan_agreement":"Loan agreement |||| Loan agreements","mechanic_invoice":"Repair bill |||| Repair bills","motivation_letter":"Motivation letter |||| Motivation letters","national_health_insurance_card":"National health insurance card |||| National health insurance cards","national_health_insurance_right_certificate":"National health insurance right certificate |||| National health insurance right certificates","national_id_card":"ID card |||| ID cards","note_identity_document":"Note Identity |||| Notes Identity","note_family_document":"Note Family |||| Notes Family","note_work_document":"Note Work & Study |||| Notes Work & Study","note_health_document":"Note Health |||| Notes Health","note_house_document":"Note Home |||| Notes Home","note_transport_document":"Note Transport |||| Notes Transport","note_activity_document":"Note Activities |||| Notes Activities","note_finance":"Note Finance |||| Notes Finance","note_invoice":"Note Invoice |||| Notes Invoice","other_activity_document":"Other activities document |||| Other activities documents","other_bank_document":"Other financial document |||| Other financial documents","other_family_document":"Other family document |||| Other family documents","other_health_document":"Other health document |||| Other health documents","other_house_document":"Other house document |||| Other house documents","other_identity_document":"Other document of identity |||| Other documents of identity","other_invoice":"Other invoice |||| Other invoices","other_revenue":"Other revenue |||| Other revenues","other_tax_document":"Other tax document |||| Other tax documents","other_transport_document":"Other transport document |||| Other transport documents","other_work_document":"Other work document |||| Other work documents","other_administrative_document":"Other administrative document |||| Other administrative documents","others":"Others","pacs":"Civil union |||| Civil unions","passport":"Passeport |||| Passeports","pay_sheet":"Pay sheet |||| Pay sheets","payment_proof_family_allowance":"family allowance payment proof |||| family allowance payment proofs","pension":"Pension |||| Pensions","person_insurance":"Individual insurance certificate |||| Individual insurance certificates","personal_sporting_licence":"Sporting licence |||| Sporting licences","phone_invoice":"Phone invoice |||| Phone invoices","pregnancy_medical_certificate":"Certificate of pregnancy |||| Certificates of pregnancy","prescription":"Prescription |||| Prescriptions","real_estate_insurance":"Real estate insurance certificate |||| Real estate insurance certificates","real_estate_tax":"Real estate tax |||| Real estate taxes","receipt":"Receipt |||| Receipts","rent_receipt":"Rent receipt |||| Rent receipts","residence_permit":"Residence permit |||| Residence permits","restaurant_invoice":"Restaurant invoice |||| Restaurant invoices","resume":"Resume |||| Resumes","school_attendance_certificate":"Certificate of school attendance |||| Certificates of school attendance","school_insurance_certificate":"Certificate of school insurance |||| Certificates of school insurance","single_parent_benefit":"Single parent benefit |||| Single parent benefits","student_card":"Student card |||| Student cards","tax_certificate":"Tax certificate |||| Tax certificates","tax_notice":"Tax notice |||| Tax notices","tax_return":"Tax return |||| Tax returns","tax_timetable":"Payment Plans Installment Agreement |||| Payment Plans Installment Agreements","technical_diagnostic_record":"Technical diagnostic record |||| Technical diagnostic records","telecom_invoice":"Telecom invoice |||| Telecom invoices","transport_card":"Transport card |||| Transport cards","transport_invoice":"Transport invoice |||| Transport invoices","transport":"Transport","unemployment_benefit":"Unemployment benefit |||| Unemployment benefits","unfit_for_habitation_declaration":"Declaration of unfit for habitation |||| Declarations of unfit for habitation","vehicle_registration":"Vehicle registration |||| Vehicle registrations","water_invoice":"Water invoice |||| Water invoices","web_service_invoice":"Web service invoice |||| Web service invoices","wedding":"Wedding contract |||| Wedding contracts","work_contract":"Work contract |||| Work contracts","work_disability_recognition":"Recognition of disability |||| Recognitions of disability","work_invoice":"Work invoice |||| Work invoices","work_quote":"Work quote |||| Work quotes","work_study":"Work & Study"},"attributes":{"contractType":{"cdi":"CDI","cdd":"CDD","alternate":"Alternate","internship":"Internship","other":"Other"},"noticePeriod":{"oneWeek":"1 week before","oneMonth":"1 month before","threeMonth":"3 months before","oneYear":"1 year before","custom":"Custom","noAlert":"Do not be alerted"}},"themes":{"none":"None","activity":"Activities","family":"Family","finance":"Finance","health":"Health","home":"Home","identity":"Identity","invoice":"Invoice","others":"Others","transport":"Transport","undefined":"Undefined","work_study":"Work & Study"},"expiration":{"expired":"Expired","expiresIn":"Expires in %{duration}","description":"This document expires in %{duration}, consider renewing it"},"qualification":{"date":{"title":{"datetime":"Added on","AObtentionDate":"License A, delivered on","BObtentionDate":"License B, delivered on","CObtentionDate":"License C, delivered on","DObtentionDate":"License D, delivered on","issueDate":"Delivered on","expirationDate":"Expiration date","referencedDate":"Referenced date","shootingDate":"Shooting date","obtentionDate":"Date obtained","date":"Document date"}},"information":{"title":{"fine":{"number":"Amount of the fine"},"fidelity_card":{"number":"Card number"},"caf":{"number":"CAF file number"},"payment_proof_family_allowance":{"number":"CAF file number"},"vehicle":{"licenseNumber":"Vehicle registration number","confidentialNumber":"Confidential vehicle registration code"},"vehicle_registration":{"number":"Vehicle registration number (VIN)"},"national_id_card":{"number":"National ID card number"},"bank_details":{"number":"IBAN number"},"passport":{"number":"Passport number"},"driver_license":{"number":"License number"},"residence_permit":{"number":"License number"},"national_health_insurance_card":{"number":"National health insurance card number"},"pay_sheet":{"number":"Gross remuneration"},"tax_return":{"number":"Reference tax number"},"tax_notice":{"number":"Reference tax number"},"real_estate_tax":{"number":"Reference tax number"},"tax_timetable":{"number":"Reference tax number"},"country":"Document issuing country","refTaxIncome":"Reference tax income","contractType":"Contract type","noticePeriod":"Expiration alert","netSocialAmount":"Net social amount","employerName":"Name of employer","employer":"Name of employer","amount":"Amount of expenditure","subtype":"Purpose of expenditure","bicNumber":"BIC number"},"day":"day |||| days"},"contact":"Owner","page":"Side of the document","front":"Front side","back":"Back side","qualification":"Qualification","noInfo":"No information"}},"MagicFolders":{"administrative":"Administrative","photos":"Photos"}}')},6765:function(e){"use strict";e.exports=JSON.parse('{"country":{"foreign":"\xc9tranger"},"Scan":{"scan_a_doc":"Num\xe9riser un doc","save_doc":"Enregistrer le document","filename":"Nom du fichier","save":"Sauvegarder","cancel":"Annuler","qualify":"Qualifier","apply":"Appliquer","error":{"offline":"Vous \xeates actuellement d\xe9connect\xe9, vous ne pouvez donc pas utiliser cette fonctionnalit\xe9. Connectez-vous \xe0 internet et recommencez. ","uploading":"Vous avez d\xe9j\xe0 un fichier en cours de t\xe9l\xe9chargement. Attendez la fin et recommencez.","generic":"Un probl\xe8me est survenu. Veuillez r\xe9essayer. "},"successful":{"qualified_ok":"Vous venez de qualifier votre fichier avec succ\xe8s !"},"items":{"accommodation_proof":"Attestation d\'h\xe9bergement |||| Attestations d\'h\xe9bergement","appliance_invoice":"Facture d\'\xe9lectrom\xe9nager |||| Factures d\'\xe9lectrom\xe9nager","bank_details":"RIB","bank_statement":"Relev\xe9 de compte |||| Relev\xe9s de compte","birth_certificate":"Acte de naissance |||| Actes de naissance","building_permit":"Permis de construire","caf":"Attestation de quotient familial CAF |||| Attestations de quotient familial CAF","car_insurance":"Attestation d\'assurance auto |||| Attestations d\'assurance auto","citizen_registration_certificate":"Attestation de recensement citoyen |||| Attestations de recensement citoyen","condition_report":"\xc9tat des lieux - Entr\xe9e/Sortie |||| \xc9tats des lieux - Entr\xe9e/Sortie","diploma":"Dipl\xf4me |||| Dipl\xf4mes","divorce":"Attestation de divorce |||| Attestations de divorce","driver_license":"Permis de conduire","electoral_card":"Carte \xe9lectorale |||| Cartes \xe9lectorales","employment_center_certificate":"Attestation de France Travail |||| Attestations de France Travail","energy_contract":"Contrat de fournisseur d\'\xe9nergies |||| Contrats de fournisseur d\'\xe9nergies","energy_invoice":"Facture d\'\xe9nergie |||| Factures d\'\xe9nergie","expense_claim":"Note de frais |||| Notes de frais","family_record_book":"Livret de famille |||| Livrets de famille","family":"Famille","fidelity_card":"Carte avantage |||| Cartes avantages","fine":"Amende |||| Amendes","gradebook":"Bulletin de notes |||| Bulletins de notes","grocery_invoice":"Facture de courses |||| Factures de courses","health_book":"Carnet de sant\xe9 |||| Carnets de sant\xe9","health_certificate":"Certificat de sant\xe9/vaccination |||| Certificats de sant\xe9/vaccination","health_insurance_card":"Carte de mutuelle |||| Cartes de mutuelle","health_invoice":"Facture m\xe9dicale |||| Factures m\xe9dicales","health":"Sant\xe9","home":"Logement","house_insurance":"Assurance logement |||| Assurances logement","house_sale_agreeement":"Compromis de vente","identity_photo":"Photo d\'identit\xe9 |||| Photos d\'identit\xe9","identity":"Identit\xe9","invoice":"Facture |||| Factures","isp_invoice":"Facture d\'internet |||| Factures d\'internet","large_family_card":"Carte famille nombreuse |||| Cartes famille nombreuse","lease":"Bail |||| Baux","loan_agreement":"Contrat de pr\xeat |||| Contrats de pr\xeat","mechanic_invoice":"Facture de r\xe9paration |||| Factures de r\xe9paration","motivation_letter":"Lettre de motivation |||| Lettres de motivation","national_health_insurance_card":"Carte vitale |||| Cartes vitales","national_health_insurance_right_certificate":"Attestation de droits de l\'Assurance Maladie |||| Attestations de droits de l\'Assurance Maladie","national_id_card":"Carte d\'identit\xe9 |||| Cartes d\'identit\xe9","note_identity_document":"Note Identit\xe9 |||| Notes Identit\xe9","note_family_document":"Note Famille |||| Notes Famille","note_work_document":"Note Travail & \xc9tudes |||| Notes Travail & \xc9tudes","note_health_document":"Note Sant\xe9 |||| Notes Sant\xe9","note_house_document":"Note Logement |||| Notes Logement","note_transport_document":"Note Transport |||| Notes Transport","note_activity_document":"Note Activit\xe9s & loisirs |||| Notes Activit\xe9s & loisirs","note_finance":"Note Finances |||| Notes Finances","note_invoice":"Note Factures |||| Notes Factures","other_activity_document":"Autre document de loisirs |||| Autres documents de loisirs","other_bank_document":"Autre document financier |||| Autres documents financiers","other_family_document":"Autre document de famille |||| Autres documents de famille","other_health_document":"Autre document de sant\xe9 |||| Autres documents de sant\xe9","other_house_document":"Autre document de logement |||| Autres documents de logement","other_identity_document":"Autre document d\'identit\xe9 |||| Autres documents d\'identit\xe9","other_invoice":"Autre facture |||| Autres factures","other_revenue":"Autre revenu |||| Autres revenus","other_tax_document":"Imp\xf4ts - Autre document |||| Imp\xf4ts - Autres documents","other_transport_document":"Autre document de transport |||| Autres documents de transport","other_work_document":"Autre document de travail |||| Autres documents de travail","other_administrative_document":"Autre document administratif |||| Autres documents administratifs","others":"Autres","pacs":"Attestation de PACS |||| Attestations de PACS","passport":"Passeport |||| Passeports","pay_sheet":"Fiche de paie |||| Fiches de paie","payment_proof_family_allowance":"Attestation de paiement CAF |||| Attestations de paiement CAF","pension":"Retraite |||| Retraites","person_insurance":"Attestation d\'assurance individuelle |||| Attestations d\'assurance individuelle","personal_sporting_licence":"Licence sportive |||| Licences sportives","phone_invoice":"Facture de t\xe9l\xe9phone |||| Factures de t\xe9l\xe9phone","pregnancy_medical_certificate":"Certificat de grossesse |||| Certificats de grossesse","prescription":"Ordonnance |||| Ordonnances","real_estate_insurance":"Attestation d\'assurance immobili\xe8re |||| Attestations d\'assurance immobili\xe8re","real_estate_tax":"Imp\xf4ts - Taxe fonci\xe8re |||| Imp\xf4ts - Taxes fonci\xe8res","receipt":"Accus\xe9 de r\xe9ception |||| Accus\xe9s de r\xe9ception","rent_receipt":"Quittance de loyer |||| Quittances de loyer","residence_permit":"Titre de s\xe9jour |||| Titres de s\xe9jour","restaurant_invoice":"Facture de restaurant |||| Factures de restaurant","resume":"CV","school_attendance_certificate":"Certificat de scolarit\xe9 |||| Certificats de scolarit\xe9","school_insurance_certificate":"Attestation d\'assurance scolaire |||| Attestations d\'assurance scolaire","single_parent_benefit":"Allocation parent isol\xe9 |||| Allocations parent isol\xe9","student_card":"Carte d\'\xe9tudiant |||| Cartes d\'\xe9tudiant","tax_certificate":"Attestation fiscale |||| Attestations fiscales","tax_notice":"Imp\xf4ts - Avis d\'imposition","tax_return":"Imp\xf4ts - D\xe9claration de revenus |||| Imp\xf4ts - D\xe9clarations de revenus","tax_timetable":"Imp\xf4ts - Ech\xe9ancier |||| Imp\xf4ts - Ech\xe9anciers","technical_diagnostic_record":"Dossier de diagnostic technique |||| Dossiers de diagnostic technique","telecom_invoice":"Facture de t\xe9l\xe9com |||| Factures de t\xe9l\xe9com","transport_card":"Carte de transport |||| Cartes de transport","transport_invoice":"Facture de transport |||| Factures de transport","transport":"Transport","unemployment_benefit":"Allocation ch\xf4mage |||| Allocations ch\xf4mage","unfit_for_habitation_declaration":"Arr\xeat\xe9 d\'insalubrit\xe9 |||| Arr\xeat\xe9s d\'insalubrit\xe9","vehicle_registration":"Carte grise |||| Cartes grises","water_invoice":"Facture d\'eau |||| Factures d\'eau","web_service_invoice":"Facture de service web |||| Factures de service web","wedding":"Contrat de mariage |||| Contrats de mariage","work_contract":"Contrat de travail |||| Contrats de travail","work_disability_recognition":"Reconnaissance de handicap - RQTH |||| Reconnaissances de handicap - RQTH","work_invoice":"Facture de travaux |||| Factures de travaux","work_quote":"Devis de travaux","work_study":"Travail & \xc9tudes"},"attributes":{"contractType":{"cdi":"CDI","cdd":"CDD","alternate":"Alternance","internship":"Stage","other":"Autre"},"noticePeriod":{"oneWeek":"1 semaine avant","oneMonth":"1 mois avant","threeMonth":"3 mois avant","oneYear":"1 an avant","custom":"Personnalis\xe9","noAlert":"Ne pas \xeatre alert\xe9"}},"themes":{"none":"Aucun","activity":"Activit\xe9s & loisirs","family":"Famille","finance":"Finances","health":"Sant\xe9","home":"Logement","identity":"Identit\xe9","invoice":"Factures","others":"Autres","transport":"Transport","undefined":"Ind\xe9fini","work_study":"Travail & \xc9tudes"},"expiration":{"expired":"Expir\xe9","expiresIn":"Expire dans %{duration}","description":"Ce document expire dans %{duration}, pensez \xe0 le renouveler"},"qualification":{"date":{"title":{"datetime":"Ajout\xe9 le","AObtentionDate":"Permis A, d\xe9livr\xe9 le","BObtentionDate":"Permis B, d\xe9livr\xe9 le","CObtentionDate":"Permis C, d\xe9livr\xe9 le","DObtentionDate":"Permis D, d\xe9livr\xe9 le","issueDate":"D\xe9livr\xe9 le","expirationDate":"Date d\'expiration","referencedDate":"Date de r\xe9f\xe9rence","shootingDate":"Date de prise de vue","obtentionDate":"Date d\'obtention","date":"Date du document"}},"information":{"title":{"fine":{"number":"Montant de l\'amende"},"fidelity_card":{"number":"Num\xe9ro de la carte"},"caf":{"number":"Num\xe9ro de dossier CAF"},"payment_proof_family_allowance":{"number":"Num\xe9ro de dossier CAF"},"vehicle":{"licenseNumber":"Num\xe9ro d\'immatriculation","confidentialNumber":"Code confidentiel de la carte grise"},"vehicle_registration":{"number":"Num\xe9ro de la carte grise (VIN)"},"national_id_card":{"number":"Num\xe9ro de la carte d\'identit\xe9"},"bank_details":{"number":"Num\xe9ro d\'IBAN"},"passport":{"number":"Num\xe9ro du passeport"},"driver_license":{"number":"Num\xe9ro du permis"},"residence_permit":{"number":"Num\xe9ro du permis"},"national_health_insurance_card":{"number":"Num\xe9ro de s\xe9curit\xe9 sociale"},"pay_sheet":{"number":"R\xe9mun\xe9ration brute"},"tax_return":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"tax_notice":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"real_estate_tax":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"tax_timetable":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"country":"Pays \xe9metteur du document","refTaxIncome":"Revenu fiscal de r\xe9f\xe9rence","contractType":"Type de contrat","noticePeriod":"Alerte d’expiration","netSocialAmount":"Montant net social","employerName":"Nom de l\'employeur","employer":"Nom de l\'employeur","amount":"Montant de la d\xe9pense","subtype":"Objet de la d\xe9pense","bicNumber":"Num\xe9ro BIC"},"day":"jour |||| jours"},"contact":"Titulaire","page":"Face du document","front":"Face avant","back":"Face arri\xe8re","qualification":"Qualification","noInfo":"Non renseign\xe9(e)"}},"MagicFolders":{"administrative":"Administratif","photos":"Photos"}}')},46040:function(e){"use strict";e.exports=JSON.parse('{"close":"Close","back":"Go back","badges":{"warning":"Warning"},"accountForm":{"submit":{"label":"Connect"},"fields":{"optional":"(optional)"},"password":{"show":"Show","hide":"Hide"},"disconnect":{"button":"Disconnect this account"},"installFlagship":{"label":"Install Cozy on mobile"},"cannotConnectModal":{"title":"You can\'t connect?","content":"You can check your login or reset your password on the [%{vendorName}](%{vendorLink})\'s website.","noAccount":"If you do not have an account you will need to create one on the [%{vendorName}](%{vendorLink})\'s website."},"cannotConnectLink":"I can\'t connect","notClientSide":"To synchronize your %{name} data in your Cozy you must use the Cozy app on your phone or tablet.","clientSide":{"title":"Connect to your Cozy","submit":"Connect","description":"Connect %{name} to your Cozy to synchronize your account and retrieve all your data. "}},"contracts":{"headers":{"bankAccounts":"Bank accounts","default":"Contracts"},"deleted":"Deleted","no-contracts":"No contracts anymore","handle-synchronization":"Handle my synchronizations","desynchronized":{"message":"you have desynchronized this account on %{date}","dateFormat":"LL/dd/yy"}},"contractForm":{"details":"Details","sharing":"Sharing","back-to-accounts":"Back to accounts","update":"Update","delete":"Reset","deleting":"Resetting...","confirm-deletion":{"description":"This will also delete your transactions along with bill links. If you do not wish to reimport your banking data at the next scheduled synchronization, you\'ll have to remove the connection.","confirm":"Confirm account deletion","title":"Are you definitive ?"},"deletion_error":"An error occurred while group deletion.","label":"Label","owner":"Owner","addOwnerBtn":"Add an owner","removeOwnerBtn":"Remove this owner","ownerPlaceholder":"Select an owner","bank":"Bank","number":"Number","type":"Type","apply":"Apply","success":"Account updated successfully","failure":"Error while updating the account","removeAccountBtn":"Remove the account","listPlaceholder":"Search a contact","listEmptyMessage":"No contact found","addContactLabel":"Add a contact","cancel":"Cancel","imported":"Synchronized account"},"card":{"launchTrigger":{"button":{"label":"Synchronize"},"configure":"Configure","connect":"Connect","success":"Successful synchronization","error":"An error occured.","frequency":{"label":"Frequency:","hourly":"Each hour","daily":"Once a day","weekly":"Once a week","monthly":"Once a month","undefined":"Manually"},"lastSync":{"label":"Update:","syncing":"Data recovery…","unknown":"Last sync. unknown","afterSomeTimes":"Sync. %{times} ago","format":"LL/dd/yyyy","disconnected":"Disconnected","justNow":"Sync. just now"},"runningAlert":{"title":"Don\'t Close Your App!","body":"For the data recovery to be complete, the phone must remain turned on. However, you can continue to browse within the mobile app as long as it stays active in the foreground.","button":"I understand"}},"appLink":{"drive":{"title":"Your documents","description":"This service retrieves your latest documents and keeps a complete back-up for you.","button":"Open the documents","install":"Discover Cozy Drive"},"contacts":{"title":"Your contacts","description":"This service synchronizes all your contacts for you.","button":"Open contacts","install":"Discover Cozy Contacts"},"banks":{"title":"Your banking data","description":"This service retrieves and keeps a complete record of your latest banking operations for you.","button":"Access bank accounts","install":"Discover Cozy Banks"},"coachco2":{"title":"Apps to go further","description":"The following apps are able to use privately this kind of data inside your Cozy.","button":"Coach CO2","install":"Discover CoachCO2"}},"information":{"title":"Useful information","websiteLink":"Open the website","store":"See in Cozy Cloud Store","storeDescription":"Access the description of this app"}},"default":{"dateFormat":"LL/dd/yyyy","baseDir":"/Administrative"},"error":{"application-not-found":"This app doesn\'t exist","reconnect-via-form":"Reconnect","job":{"DISK_QUOTA_EXCEEDED":{"title":"Storage full","description":"This service cannot fetch your documents now. Please remove some files or go to **Settings > Storage** to get more free space."},"CHALLENGE_ASKED":{"title":"Challenge required","description":"The website requires a second authentification factor. You may re-run the connector manually to provide the code and continue to retrieve your data."},"OAUTH_CANCELED":{"title":"Canceled","description":"We could not add your bank since you canceled the connection. Click \\"Add your bank\\" one more time to try again."},"LOGIN_FAILED":{"title":"Incorrect or expired credentials","description":"Sorry, your login or password are invalid or are expired. You may check your credentials on [%{name}](%{link}) website before updating."},"LOGIN_FAILED.NEEDS_SECRET":{"title":"Additional information needed","description":"An additional field must be filled in to connect your service. You may re-run the connector manually to provide the information."},"LOGIN_FAILED.TOO_MANY_ATTEMPTS":{"title":"Temporarily blocked","description":"Too many attempts occured. Please update your credentials on [%{name}](%{link}) website and update the konnector later on."},"MAINTENANCE":{"title":"Unavailable website","description":"It seems that the [%{name}](%{link}) website is unavailable or the konnector must be updated. Please rerun the connector later or visit our online help."},"NOT_EXISTING_DIRECTORY":{"title":"Missing destination folder","description":"It seems that this account\'s destination folder has been deleted. Please restore it by disconnecting this account and then reconnect again."},"TERMS_VERSION_MISMATCH":{"title":"Latest Terms of Service non accepted","description":"%{name} seems to have updated its Terms Of Service. Please check that the service is up to date. It this error still occurs, please contact us at [%{supportMail}](mailto:%{supportMail})."},"UNKNOWN_ERROR":{"title":"Connection error","description":"An unknown error has occurred. You can try to update your data. If the problem persists, please contact us at [%{supportMail}](mailto:%{supportMail})."},"UNKNOWN_ERROR.PARTIAL_SYNC":{"title":"Connection error","description":"The synchronization is complete but some elements may be missing"},"USER_ACTION_NEEDED":{"title":"Action needed on the provider\'s website","description":"It seems that the [%{name}](%{link}) website requires you to log in and to complete a specific action. Please re-run the connector once you have settled the issue on the website."},"USER_ACTION_NEEDED.OAUTH_OUTDATED":{"title":"Access renewal required","description":"The [%{name}](%{link}) service requires you to renew your authentication. Please disconnect and reconnect your account %{name} to this application. No data will be lost."},"USER_ACTION_NEEDED.ACCOUNT_REMOVED":{"title":"Unavailable account","description":"It seems that your account is no longer active. Please check your account on [%{name}](%{link}) before retry."},"USER_ACTION_NEEDED.CHANGE_PASSWORD":{"title":"Password update required","description":"It seems that the [%{name}](%{link}) website requires you to log in and update your password. Please rerun the connector once you have settled the issue on the website."},"USER_ACTION_NEEDED.PERMISSIONS_CHANGED":{"title":"New permissions needed","description":"You connector was updated and the permissions changed. Please validate them before launching the connector again."},"USER_ACTION_NEEDED.SCA_REQUIRED":{"title":"Renewal of authentication  required","description":"It seems that %{name} requires a login recheck for the synchronisation to work. Please re-run the connector to start the verification process. You will receive a one-time password or a validation process on your bank application or website."},"USER_ACTION_NEEDED.TWOFA_EXPIRED":{"title":"Authentication renewal required","description":"The last connexion to the service failed; please launch it again. You may have to provide a validation code."},"USER_ACTION_NEEDED.WEBAUTH_REQUIRED":{"title":"Authentication on vendor website required","description":"It seems that [%{name}](%{link}) requires you to log in on their website for the synchronisation to work. Please re-run the connector once you have settled the issue on the website."},"USER_ACTION_NEEDED.WRONG_TWOFA_CODE":{"title":"Incorrect strong authentication code","description":"The second-factor code provided is incorrect, please start again."},"USER_ACTION_NEEDED.CGU_FORM":{"title":"New terms of service validation needed","description":"It seems that a new validation of terms of service is needed. Please validate them on the [%{name}](%{link}) website and synchronize again."},"VENDOR_DOWN":{"title":"Unavailable service","description":"It seems that the [%{name}](%{link}) service is unavailable at the moment. Please rerun the connector later."},"VENDOR_DOWN.BANK_DOWN":{"title":"Unavailable bank website","description":"Access to the [%{name}](%{link}) customer area is currently unavailable. Please rerun the connector later"},"VENDOR_DOWN.LINXO_DOWN":{"title":"Unavailable service","description":"It seems that we are experiencing overload with our bank konnectors at the moment. Please rerun the connector later."},"ACCOUNT_WITH_SAME_IDENTIFIER_ALREADY_DEFINED":{"title":"This account already exists","description":"Your possible modification of the list of synchronized accounts will be taken into account within a few minutes."},"WRONG_ACCOUNT_IDENTIFIER":{"title":"These are the wrong identifiers","description":"You submitted the wrong identifier which are not associated to this account"}}},"fields":{"answer":{"label":"Secret answer"},"birthdate":{"label":"Birth date","placeholder":"mm/dd/yyyy"},"code":{"label":"Confidential code"},"date":{"label":"Date","placeholder":"mm/dd/yyyy"},"email":{"label":"Email address"},"firstname":{"label":"First name"},"lastname":{"label":"Last name"},"login":{"label":"Login"},"password":{"label":"Password"},"phone":{"label":"Phone number"},"two_fa_code":{"label":"Strong authentication code"}},"folder":{"administrative":"Administrative","photos":"Photos"},"infos":{"konnectorUpdate":{"title":"An update is available for this service.","body":{"regular":"Perform this update to keep fetching your data and to have the latest features:","blocking":"Update it to keep fetching your data:"},"button":{"label":"See update"}}},"legacy":{"fields":{"access_token":{"label":"Access token"},"accessTokenSecret":{"label":"Access token secret"},"accountName":{"label":"Account name"},"agreement":{"label":"I agree"},"apikey":{"label":"Api key"},"appKey":{"label":"Application Key"},"appSecret":{"label":"Application Secret"},"authCode":{"label":"Auth code"},"bank_identifier":{"label":"Bank identifier (optional)"},"branchName":{"label":"Branch"},"cardNumber":{"label":"Card Number"},"consumerKey":{"label":"Consumer Key"},"consumerSecret":{"label":"Consumer Secret"},"dob":{"label":"Date of birth"},"folderPath":{"label":"Folder path"},"identifier":{"label":"Identifier"},"loginUrl":{"label":"Login URL"},"namePath":{"label":"Folder name"},"new_identifier":{"label":"Identifier"},"phoneNumber":{"label":"Phone number"},"profileName":{"label":"Profile Name"},"refreshToken":{"label":"Refresh Token"},"secret":{"label":"Password"},"timeout":{"label":"Delay (ms)"},"token":{"label":"Token"},"tricountUrl":{"label":"Tricount URL"}}},"modal":{"aria-label":"Connector configuration","konnector":{"error":{"title":"Unable to retrieve your account","description":"The account cannot be retrieved (%{message}).","button":"Close"}},"accounts":{"title":"Select a %{name} account","error":{"title":"Error","description":"Unable to retrieve your account(s)","retry":"Retry"}},"tabs":{"data":"Data","configuration":"Configuration"},"addAccount":{"title":"Connect to %{name}","button":"Add an account"},"deleteBIConnection":{"title":"Bank disconnect","description":"Your request has been recorded. It will be effective in a short moment. Previously imported data will not be deleted.","confirm-deletion":"Close"},"deleteAccount":{"title":"Disconnection","description":"Your account will be disconnected, but already imported data will be kept.","confirm":"Disconnect","cancel":"Cancel"},"updateAccount":{"general-subheader":"General","identifiers":"Identifiers","delete-account-success":"Account has been disconnected","delete-account-error":"Account could not be disconnected, please retry later or contact our support."}},"oauth":{"banking":{"connect":{"label":"Add your bank"},"reconnect":{"label":"Reconnect"}},"reconnect":{"label":"Reconnect"},"connect":{"description":"Connect %{name} to your Cozy to synchronize your account and automatically retrieve all your data.","label":"Connect","submit":"Connect","title":"Connect to your Cozy"},"window":{"title":"OAuth"}},"triggerSuccessMessage":{"button":{"label":"Close"},"description":"Your data will be available in a few minutes and the next ones will follow automatically.","figure":{"alt":"connected"},"title":"Successful configuration!"},"twoFAForm":{"modal-label":"Two factor authentication form","providers":{"default":"Enter the code sent to you by e-mail or SMS","email":"Enter the code sent to you by e-mail","sms":"Enter the code sent to you by SMS","app_code":"Enter the one-time code to generate in ${name} mobile app","app":"Use your provider\'s app to continue authentication"},"desc-2fa":"You need to open your provider\'s app to confirm your authentication. In some cases, you will have to validate two times.","desc_1":"This code enables you to finish your connexion.","desc_2":"The second code received on your mobile phone or by email enables you to finalize your connexion.","code":{"label_1":"code","label_2":"Second code"},"retry":"Invalid code, please re-enter.","CTA":"Validate"},"account":{"success":{"title":"Successful configuration!","connect":"Your data will be available in a few minutes and the next ones will follow automatically.","banksLinkText":"See my accounts in %{appName}","driveLinkText":"Open the folder in Cozy Drive","button":"Close"}},"maintenance":{"noService":"Service interrupted","explanationTitle":"What is going on?"},"suggestions":{"title":"Import your data from %{name}","data":"Installing %{name} will automatically import the following data:","why":"Why is %{name} suggested to me?","reason_bank":"%{name} has been detected in one of your bank transactions. Don\'t worry, no one else can access this information","install":"Install","silence":"Don\'t suggest it again"},"dataType":{"none":"%{name} won\'t access any of your personal data","activity":"Your activities","appointment":"Your appointments","bankTransactions":"Your bank transactions","bankAccounts":"Your bank accounts","bill":"Your bills","bloodPressure":"Your blood pressure","calendar":"Your calendars","certificate":"Your certificates","commit":"Your commits","consumption":"Your consumption","contact":"Your contacts","contract":"Your contracts","courseMaterial":"Your course materials","document":"Your documents","event":"Your events","family":"Your family informations","geopoint":"Your geolocations","heartbeat":"Your heartbeats","home":"Your home informations","phonecommunicationlog":"Your phone communications log","picture":"Your pictures","podcast":"Your podcasts","profile":"Your client profile","refund":"Your refunds","sinister":"Your sinisters","sleepTime":"Your sleep time","stepsNumber":"Your number of steps","temperature":"Your temperature data","travelDate":"Your travel dates","tweet":"Your tweets","videostream":"Your videos","weight":"Your weights"},"vaultCiphersList":{"title":"From which account do you want to import your data?","otherAccount":"From another account…"},"triggerManager":{"confirmationModal":{"title":"Update credentials?","description":"Your previous credentials will be definitively lost. Add a new account to keep them.","primaryText":"Update","secondaryText":"Cancel"}},"connectionBackdrop":{"connecting":"Connection in progress","progress":"Establishing a connection to %{name} can take up to 30 seconds..."},"disconnectedAccountModal":{"disconnected-help":"This account is disconnected. Your data has been kept. If you want to restart the synchronisation, please reconfigure your account with the \\"Add a bank\\" button."},"konnectorBlock":{"open":"Open the website","store":{"primary":"See in Cozy Cloud store","secondary":"Access the description of this app"},"disconnected":"Disconnected","inMaintenance":"In maintenance","hasNewVersionAvailable":"New version available","fatalError":"An error occurred while recovering the service. If this problem persists, do not hesitate to contact us at [%{name}](%{link})"},"datacards":{"trips":{"title":"Last trips","caption":"See your 5 most recent trips retrieved on %{konnectorName}","modes":{"AIR_OR_HSR":"Plane","BICYCLING":"Bike","BUS":"Bus","CAR":"Car","IN_VEHICLE":"Vehicle","TRAIN":"Train","UNKNOWN":"Unknown","WALKING":"Walking","ON_FOOT":"Walking","RUNNING":"Running"}},"files":{"title":"Your documents","imported":"Imported on %{date}","caption":"This service retrieves your latest documents and keeps a complete back-up for you."}}}')},67898:function(e){"use strict";e.exports=JSON.parse('{"close":"Fermer","back":"Revenir","badges":{"warning":"Warning"},"accountForm":{"submit":{"label":"Connecter"},"fields":{"optional":"(Optionnel)"},"password":{"show":"Voir","hide":"Cacher"},"disconnect":{"button":"D\xe9connecter le compte"},"installFlagship":{"label":"Installer Cozy sur mobile"},"cannotConnectModal":{"title":"Vous ne parvenez pas \xe0 vous connecter ?","content":"Vous pouvez v\xe9rifier vos identifiants ou r\xe9initialiser votre mot de passe sur le site [%{vendorName}](%{vendorLink}).","noAccount":"Si vous n\'avez pas de compte il vous faudra en cr\xe9er un sur le site [%{vendorName}](%{vendorLink})."},"cannotConnectLink":"Je ne parviens pas \xe0 me connecter","notClientSide":"Pour synchroniser vos donn\xe9es %{name} dans votre Cozy vous devez utiliser l\'application Cozy de votre t\xe9l\xe9phone ou tablette.","clientSide":{"title":"Connecter \xe0 mon Cozy","submit":"Connecter","description":"Connectez %{name} \xe0 votre Cozy pour synchroniser votre compte et r\xe9cup\xe9rer vos donn\xe9es."}},"contracts":{"headers":{"bankAccounts":"Comptes et livrets d\'\xe9pargne","default":"Contrats"},"deleted":"Supprim\xe9","no-contracts":"Vous n\'avez plus de contrats","handle-synchronization":"G\xe9rer mes synchronisations","desynchronized":{"message":"vous avez d\xe9synchronis\xe9 ce compte le %{date}","dateFormat":"dd/LL/yy"}},"contractForm":{"details":"D\xe9tails","sharing":"Partage","back-to-accounts":"Revenir aux comptes","update":"Modifier","delete":"Effacer","deleting":"Effacement...","confirm-deletion":{"description":"Cette action supprimera les mouvements d\xe9j\xe0 import\xe9s. D\xe9connectez \xe9galement votre compte si vous ne souhaitez pas r\xe9importer vos donn\xe9es \xe0 la prochaine connexion.","confirm":"Confirmer la suppression","title":"\xcates-vous s\xfbr ?"},"deletion_error":"Une erreur est survenue lors de la suppression du compte.","label":"Libell\xe9","owner":"Titulaire","addOwnerBtn":"Ajouter un titulaire","removeOwnerBtn":"Supprimer ce titulaire","ownerPlaceholder":"S\xe9lectionner un titulaire","bank":"Banque","number":"Num\xe9ro","type":"Type","apply":"Appliquer","success":"Compte mis \xe0 jour avec succ\xe8s","failure":"Erreur lors de la mise \xe0 jour du compte","removeAccountBtn":"Effacer le compte","listPlaceholder":"Rechercher un contact","listEmptyMessage":"Aucun contact trouv\xe9","addContactLabel":"Cr\xe9er un contact","cancel":"Annuler","imported":"Compte synchronis\xe9"},"card":{"launchTrigger":{"button":{"label":"Synchroniser"},"configure":"Configurer","connect":"Se connecter","success":"Synchronisation r\xe9ussie","error":"Une erreur est survenue.","frequency":{"label":"Fr\xe9quence :","hourly":"Une fois par heure","daily":"Journalier","weekly":"Hebdomadaire","monthly":"Mensuel","undefined":"Manuellement"},"lastSync":{"label":"Synchronis\xe9 :","syncing":"R\xe9cup\xe9ration des donn\xe9es…","unknown":"Derni\xe8re sync. inconnue","afterSomeTimes":"Sync. il y a %{times}","format":"dd/LL/yyyy","disconnected":"D\xe9connect\xe9","justNow":"Sync. \xe0 l\'instant"},"runningAlert":{"title":"Ne fermez pas votre app !","body":"Pour que la r\xe9cup\xe9ration de vos donn\xe9es soit compl\xe8te, le t\xe9l\xe9phone doit rester allum\xe9. Vous pouvez cependant continuer \xe0 naviguer dans l\'app mobile tant qu\'elle reste active au premier plan.","button":"J\'ai compris"}},"appLink":{"drive":{"title":"Vos documents","description":"Ce service r\xe9cup\xe8re vos derniers documents et en sauvegarde l\'historique complet \xe0 votre place.","button":"Ouvrir les documents","install":"D\xe9couvrir Cozy Drive"},"contacts":{"title":"Vos contacts","description":"Ce service synchronise l\'ensemble de vos contacts \xe0 votre place.","button":"Acc\xe9der aux contacts","install":"D\xe9couvrir Cozy Contacts"},"banks":{"title":"Vos donn\xe9es bancaires","description":"Ce service r\xe9cup\xe8re vos derni\xe8res lignes bancaires et en sauvegarde l\'historique complet \xe0 votre place.","button":"Acc\xe9der aux comptes bancaires","install":"D\xe9couvrir Cozy Banks"},"coachco2":{"title":"Applications pour aller plus loin","description":"Les applications suivantes proposent d\'utiliser ces donn\xe9es en toute confidentialit\xe9 au sein de votre Cozy","button":"Coach CO2","install":"D\xe9couvrir Coach CO2"}},"information":{"title":"Informations utiles","websiteLink":"Ouvrir le site","store":"Voir dans le Store Cozy Cloud","storeDescription":"Acc\xe8s \xe0 la fiche descriptive de cette application"}},"default":{"dateFormat":"dd/LL/yyyy","baseDir":"/Administratif"},"error":{"application-not-found":"Cette application n\'existe pas","reconnect-via-form":"Se reconnecter","job":{"DISK_QUOTA_EXCEEDED":{"title":"Espace Disque plein","description":"Actuellement, le service ne peut plus r\xe9cup\xe9rer vos documents.\\nLib\xe9rez de l\'espace en supprimant des fichiers ou rendez-vous dans **Param\xe8tres > Stockage** pour augmenter votre espace de stockage."},"CHALLENGE_ASKED":{"title":"Second facteur d’authentification demand\xe9","description":"Le site demande une authentification forte \xe0 deux facteurs. Vous devez synchroniser manuellement le service pour valider votre authentification et continuer \xe0 r\xe9cup\xe9rer vos donn\xe9es."},"OAUTH_CANCELED":{"title":"Annul\xe9","description":"Nous n\'avons pas pu ajouter votre banque car vous avez annul\xe9 la connexion. Cliquez sur \\"Ajouter votre banque\\" encore une fois pour faire un nouvel essai."},"LOGIN_FAILED":{"title":"Identifiants erron\xe9s ou expir\xe9s","description":"Votre identifiant et/ou mot de passe ne semblent pas corrects. Merci de les v\xe9rifier sur le site [%{name}](%{link}) avant de r\xe9essayer."},"LOGIN_FAILED.NEEDS_SECRET":{"title":"Information additionnelle requise","description":"Un champ additionnel doit \xeatre rempli pour v\xe9rifier vos identifiants."},"LOGIN_FAILED.TOO_MANY_ATTEMPTS":{"title":"Temporairement bloqu\xe9","description":"Trop de tentatives erron\xe9es ont eu lieu. Merci de modifier votre mot de passe sur le site [%{name}](%{link}) avant de synchroniser \xe0 nouveau vos donn\xe9es."},"MAINTENANCE":{"title":"Site non disponible","description":"Il semble que le site [%{name}](%{link}) soit indisponible. Merci de synchroniser ult\xe9rieurement ou de consulter notre aide en ligne."},"NOT_EXISTING_DIRECTORY":{"title":"Dossier de destination manquant","description":"Il semble que le dossier de destination pour ce compte ait \xe9t\xe9 supprim\xe9. Merci de le restaurer en d\xe9connectant ce compte puis en le reconnectant \xe0 nouveau."},"TERMS_VERSION_MISMATCH":{"title":"Nouvelles CGUs \xe0 accepter","description":"Il semblerait que %{name} ait mis \xe0 jour ses Conditions G\xe9n\xe9rales d\'Utilisation. Merci de valider ces derni\xe8res sur le site [%{name}](%{link}) avant de synchroniser \xe0 nouveau vos donn\xe9es."},"UNKNOWN_ERROR":{"title":"Erreur de Connexion","description":"Une erreur inconnue est survenue. Vous pouvez essayer de synchroniser \xe0 nouveau vos donn\xe9es. Si le probl\xe8me persiste, n\'h\xe9sitez pas \xe0 nous contacter via [%{supportMail}](mailto:%{supportMail})."},"UNKNOWN_ERROR.PARTIAL_SYNC":{"title":"Erreur de Connexion","description":"La synchronisation est termin\xe9 mais certains \xe9l\xe9ments peuvent manquer"},"USER_ACTION_NEEDED":{"title":"Action n\xe9cessaire chez le fournisseur","description":"Il semble que [%{name}](%{link}) ait besoin de rev\xe9rifier votre connexion. Connectez-vous sur [%{name}](%{link}) avant de synchroniser \xe0 nouveau vos donn\xe9es."},"USER_ACTION_NEEDED.OAUTH_OUTDATED":{"title":"Renouvellement de l’authentification requis","description":"Le service [%{name}](%{link}) demande d\'autoriser \xe0 nouveau votre acc\xe8s. Merci de d\xe9connecter puis reconnecter votre compte %{name} sur cette application. Aucune donn\xe9e ne sera perdue."},"USER_ACTION_NEEDED.ACCOUNT_REMOVED":{"title":"Compte client non accessible","description":"Il semble que votre compte ne soit plus actif. Merci de v\xe9rifier son statut sur le site [%{name}](%{link}) avant de r\xe9essayer."},"USER_ACTION_NEEDED.CHANGE_PASSWORD":{"title":"Renouvellement de mot de passe demand\xe9","description":"Il semble que le site [%{name}](%{link}) ait besoin que vous vous y authentifiiez pour renouveler votre mot de passe. Merci de renouveler votre mot de passe avant de synchroniser vos donn\xe9es."},"USER_ACTION_NEEDED.PERMISSIONS_CHANGED":{"title":"Validation des nouvelles permissions n\xe9cessaire","description":"Votre service a \xe9t\xe9 mis \xe0 jour et les permissions n\xe9cessaires ont chang\xe9. Merci de valider les nouvelles permissions avant de synchroniser vos donn\xe9es."},"USER_ACTION_NEEDED.SCA_REQUIRED":{"title":"Renouvellement d\'authentification demand\xe9","description":"Il semble que %{name} ait besoin de rev\xe9rifier votre connexion afin d\'autoriser une nouvelle synchronisation de vos comptes. Merci de synchroniser votre service, cela d\xe9clenchera la demande aupr\xe8s de votre banque. Vous recevrez un code \xe0 usage unique ou une demande sur l\'espace client ou l\'application de votre banque."},"USER_ACTION_NEEDED.TWOFA_EXPIRED":{"title":"Renouvellement de l’authentification demand\xe9","description":"La derni\xe8re connexion au service a \xe9chou\xe9; merci de la relancer.\\nIl vous faudra peut-\xeatre renseigner un code de validation."},"USER_ACTION_NEEDED.WEBAUTH_REQUIRED":{"title":"Authentification sur le site web demand\xe9e","description":"Il semble que [%{name}](%{link}) ait besoin que vous vous authentifiiez \xe0 leur site web pour que la synchronisation refonctionne. Merci de vous authentifier sur le site avant de synchroniser vos donn\xe9es."},"USER_ACTION_NEEDED.WRONG_TWOFA_CODE":{"title":"Le code fourni ne semble pas correct","description":"Le second facteur d’authentification fourni est incorrect, veuillez recommencer."},"USER_ACTION_NEEDED.CGU_FORM":{"title":"Des nouvelles conditions g\xe9n\xe9rales d\'utilisation sont \xe0 valider","description":"Il semble que le service ait de nouvelles conditions g\xe9n\xe9rales d\'utilisation \xe0 valider. Merci de valider ces derni\xe8res sur le site [%{name}](%{link}) puis de synchroniser \xe0 nouveau."},"VENDOR_DOWN":{"title":"Service non disponible","description":"Il semble que le service [%{name}](%{link}) ne nous ait pas r\xe9pondu dans les temps. Vous pouvez tenter de synchroniser vos donn\xe9es manuellement maintenant ou ult\xe9rieurement."},"VENDOR_DOWN.BANK_DOWN":{"title":"Site non disponible","description":"L\'acc\xe8s \xe0 l\'espace client de [%{name}](%{link}) est actuellement indisponible, veuillez vous reconnecter plus tard"},"VENDOR_DOWN.LINXO_DOWN":{"title":"Service non disponible","description":"Il semble que le service [%{name}](%{link}) ne nous ait pas r\xe9pondu dans les temps. Vous pouvez tenter de synchroniser vos donn\xe9es manuellement maintenant ou ult\xe9rieurement."},"ACCOUNT_WITH_SAME_IDENTIFIER_ALREADY_DEFINED":{"title":"Ce compte est d\xe9j\xe0 configur\xe9","description":"Votre \xe9ventuelle modification de la liste des comptes synchronis\xe9s sera prise en compte sous quelques minutes."},"WRONG_ACCOUNT_IDENTIFIER":{"title":"Mauvais identifiants","description":"Vous avez saisi des identifiant qui ne sont pas associ\xe9s \xe0 ce compte"}}},"fields":{"answer":{"label":"R\xe9ponse secr\xe8te"},"birthdate":{"label":"Date de naissance","placeholder":"jj/mm/aaaa"},"code":{"label":"Code confidentiel"},"date":{"label":"Date","placeholder":"jj/mm/aaaa"},"email":{"label":"Adresse e-mail"},"firstname":{"label":"Pr\xe9nom"},"lastname":{"label":"Nom de famille"},"login":{"label":"Identifiant"},"password":{"label":"Mot de passe"},"phone":{"label":"Num\xe9ro de t\xe9l\xe9phone"},"two_fa_code":{"label":"Second facteur d’authentification"}},"folder":{"administrative":"Administratif","photos":"Photos"},"infos":{"konnectorUpdate":{"title":"Une mise \xe0 jour est disponible pour ce service.","body":{"regular":"Effectuez la mise \xe0 jour pour continuer \xe0 r\xe9cup\xe9rer vos donn\xe9es et profiter des derni\xe8res fonctionnalit\xe9s.","blocking":"Mettez-le \xe0 jour pour continuer \xe0 r\xe9cup\xe9rer vos donn\xe9es."},"button":{"label":"Voir la mise \xe0 jour"}}},"legacy":{"fields":{"access_token":{"label":"Jeton d\'acc\xe8s"},"accessTokenSecret":{"label":"Jeton d\'acc\xe8s secret"},"accountName":{"label":"Nom du compte"},"agreement":{"label":"J\'accepte"},"apikey":{"label":"Cl\xe9 d\'API"},"appKey":{"label":"Cl\xe9 d\'application"},"appSecret":{"label":"Secret d\'application"},"authCode":{"label":"Code Auth"},"bank_identifier":{"label":"Identifiant Banque (optionnel)"},"branchName":{"label":"Agence"},"cardNumber":{"label":"Num\xe9ro de carte"},"consumerKey":{"label":"Cl\xe9 client"},"consumerSecret":{"label":"Secret client"},"dob":{"label":"Date de naissance"},"folderPath":{"label":"Chemin du dossier"},"identifier":{"label":"Identifiant"},"loginUrl":{"label":"URL du login"},"namePath":{"label":"Nom du dossier"},"new_identifier":{"label":"Identifiant"},"phoneNumber":{"label":"Num\xe9ro de t\xe9l\xe9phone"},"profileName":{"label":"Nom du profil"},"refreshToken":{"label":"Jeton de rafra\xeechissement"},"secret":{"label":"Mot de passe"},"timeout":{"label":"D\xe9lai (ms)"},"token":{"label":"Jeton"},"tricountUrl":{"label":"URL de Tricount"}}},"modal":{"aria-label":"Configuration","konnector":{"error":{"title":"Impossible de r\xe9cup\xe9rer le compte","description":"Le compte n\'a pas pu \xeatre r\xe9cup\xe9r\xe9 (%{message})","button":"Fermer"}},"accounts":{"title":"S\xe9lectionner un compte %{name} ","error":{"title":"Erreur","description":"Impossible de charger vos comptes","retry":"R\xe9essayer"}},"tabs":{"data":"Donn\xe9es","configuration":"Configuration"},"addAccount":{"title":"Connexion \xe0 %{name}","button":"Ajouter un compte"},"deleteBIConnection":{"title":"D\xe9connexion de votre banque","description":"La d\xe9connexion de votre banque a bien \xe9t\xe9 prise en compte et sera effective dans quelques instants. Les donn\xe9es pr\xe9c\xe9demment import\xe9es seront conserv\xe9es.","confirm-deletion":"Fermer"},"deleteAccount":{"title":"D\xe9connexion","description":"Vous serez d\xe9connect\xe9 de ce compte, mais les donn\xe9es d\xe9j\xe0 import\xe9es seront conserv\xe9es.","confirm":"D\xe9connecter","cancel":"Annuler"},"updateAccount":{"general-subheader":"G\xe9n\xe9ral","identifiers":"Identifiants","delete-account-success":"Le compte a \xe9t\xe9 d\xe9connect\xe9","delete-account-error":"Le compte n\'a pas pu \xeatre d\xe9connect\xe9, merci de r\xe9essayer plus tard, ou contactez notre support."}},"oauth":{"banking":{"connect":{"label":"Ajouter votre banque"},"reconnect":{"label":"Se reconnecter"}},"reconnect":{"label":"Se reconnecter"},"connect":{"description":"Connectez %{name} \xe0 votre Cozy pour synchroniser votre compte et r\xe9cup\xe9rer automatiquement vos donn\xe9es.","label":"Ajouter un compte","submit":"Connecter","title":"Connecter \xe0 mon Cozy"},"window":{"title":"OAuth"}},"triggerSuccessMessage":{"button":{"label":"Fermer"},"description":"Vos donn\xe9es existantes seront disponibles dans quelques minutes et les prochaines suivront automatiquement.","figure":{"alt":"Connect\xe9"},"title":"Configuration r\xe9ussie !"},"twoFAForm":{"modal-label":"Formulaire d\'authentification \xe0 deux facteurs","providers":{"default":"Saisissez le code qui vous a \xe9t\xe9 envoy\xe9 par e-mail ou SMS.","email":"Saisissez le code qui vous a \xe9t\xe9 envoy\xe9 par e-mail.","sms":"Saisissez le code qui vous a \xe9t\xe9 envoy\xe9 par SMS.","app_code":"Entrez un code \xe0 usage unique \xe0 g\xe9n\xe9rer depuis l\'application mobile %{name}.","app":"Utilisez l\'application de votre service pour continuer \xe0 vous connecter"},"desc-2fa":" Vous devez ouvrir l\'application de votre banque pour confirmer votre identit\xe9. Dans certains cas, vous devrez valider deux fois la demande.","desc_1":"Ce code re\xe7u sur votre mobile ou par email vous permet de valider votre connexion.","desc_2":"Ce second code re\xe7u sur votre mobile ou par email vous permet de finaliser votre connexion.","code":{"label_1":"code","label_2":"Second code"},"retry":"Code invalide, veuillez le ressaisir.","CTA":"Valider"},"account":{"success":{"title":"Configuration r\xe9ussie !","connect":"Vos donn\xe9es existantes seront disponibles dans quelques minutes et les prochaines suivront automatiquement.","banksLinkText":"Voir mes comptes dans %{appName}","driveLinkText":"Ouvrir le dossier dans %{appName}","button":"Fermer"}},"maintenance":{"noService":"Service interrompu","explanationTitle":"Que se passe-t-il ?"},"suggestions":{"title":"Importer mes donn\xe9es %{name}","data":"Installer %{name} importera automatiquement les donn\xe9es suivantes :","why":"Pourquoi %{name} m’est propos\xe9 ?","reason_bank":"%{name} a \xe9t\xe9 d\xe9tect\xe9 \xe0 partir de vos d\xe9penses bancaires. Pas d’inqui\xe9tude, personne \xe0 part vous ne peut avoir acc\xe8s \xe0 cette\xa0 information.","install":"Installer","silence":"Ne plus me proposer"},"dataType":{"none":"%{name} n\'acc\xe8dera \xe0 aucune de vos donn\xe9es personnelles.","activity":"Vos activit\xe9s","appointment":"Vos rendez-vous","bankTransactions":"Vos mouvements bancaires","bankAccounts":"Vos comptes bancaires","bill":"Vos factures","bloodPressure":"Votre pression art\xe9rielle","calendar":"Vos calendriers","certificate":"Vos attestations","commit":"Vos commits","consumption":"Votre consommation","contact":"Vos contacts","contract":"Vos contrats","courseMaterial":"Vos supports de cours","document":"Vos documents","event":"Vos \xe9v\xe8nements","family":"Informations sur votre foyer","geopoint":"Vos g\xe9olocalisations","heartbeat":"Votre rythme cardiaque","home":"Informations sur votre domicile","phonecommunicationlog":"Votre journal d\'appels","picture":"Vos images","podcast":"Vos podcasts","profile":"Votre profil client","refund":"Vos remboursements","sinister":"Vos sinistres","sleepTime":"Votre temps de sommeil","stepsNumber":"Vos nombres de pas","temperature":"Vos donn\xe9es de temp\xe9rature","travelDate":"Vos s\xe9jours et voyages","tweet":"Vos tweets","videostream":"Vos vid\xe9os","weight":"Votre poids"},"vaultCiphersList":{"title":"Depuis quel compte souhaitez vous importer vos donn\xe9es ?","otherAccount":"Depuis un autre compte…"},"triggerManager":{"confirmationModal":{"title":"Mettre \xe0 jour les identifiants ?","description":"Vos identifiants pr\xe9c\xe9dents seront perdus. Ajoutez un nouveau compte pour les conserver.","primaryText":"Mettre \xe0 jour","secondaryText":"Annuler"}},"connectionBackdrop":{"connecting":"Connexion en cours","progress":"\xc9tablissement de la connexion \xe0 %{name}, cela peut prendre jusqu\'\xe0 30 secondes.."},"disconnectedAccountModal":{"disconnected-help":"Vous avez d\xe9connect\xe9 votre compte. Vous conservez l\'historique de vos donn\xe9es d\xe9j\xe0 import\xe9es. Si vous souhaitez reprendre la connexion, reconfigurez votre compte depuis le bouton \\"Ajouter une banque\\"."},"konnectorBlock":{"open":"Ouvrir le site","store":{"primary":"Voir dans le store Cozy Cloud","secondary":"Acc\xe8s \xe0 la fiche descriptive de cette app"},"disconnected":"D\xe9connect\xe9","inMaintenance":"En maintenance","hasNewVersionAvailable":"Nouvelle version disponible","fatalError":"Une erreur est survenue \xe0 la r\xe9cup\xe9ration du service. Si ce probl\xe8me persiste, n\'h\xe9sitez pas \xe0 nous contacter \xe0 [%{name}](%{link})"},"datacards":{"trips":{"title":"Derniers trajets","caption":"Visualisez vos 5 trajets les plus r\xe9cents r\xe9cup\xe9r\xe9s sur %{konnectorName}","modes":{"AIR_OR_HSR":"Avion","BICYCLING":"V\xe9lo","BUS":"Bus","CAR":"Voiture","IN_VEHICLE":"V\xe9hicule","TRAIN":"Train","UNKNOWN":"Non reconnu","WALKING":"Marche","ON_FOOT":"Marche","RUNNING":"Course"}},"files":{"title":"Vos documents","imported":"Import\xe9 le %{date}","caption":"Ce service r\xe9cup\xe8re vos derniers documents et garde une sauvegarde compl\xe8te pour vous."}}}')},35343:function(e){"use strict";e.exports=JSON.parse('{"close":"Sluiten","back":"Ga terug","badges":{"warning":"Waarschuwing"},"accountForm":{"submit":{"label":"Koppelen"},"fields":{"optional":"(optioneel)"},"password":{"show":"Tonen","hide":"Verbergen"},"disconnect":{"button":"Rekening loskoppelen"},"installFlagship":{"label":"Installeer Cozy op je telefoon"},"cannotConnectModal":{"title":"Kun je geen verbinding maken?","content":"Controleer je inloggegevens of herstel je wachtwoord op de website van [%{vendorName}](%{vendorLink}).","noAccount":"Als je nog geen account hebt, maak die dan aan op de website van [%{vendorName}](%{vendorLink})."},"cannotConnectLink":"Ik kan geen verbinding maken","notClientSide":"Installeer de Cozy-app op je telefoon of tablet om je %{name}-gegevens te synchroniseren.","clientSide":{"title":"Koppelen aan mijn Cozy","submit":"Koppelen","description":"Koppel %{name} aan je Cozy om te synchroniseren met je account en automatisch al je gegevens op te halen."}},"contracts":{"headers":{"bankAccounts":"Bankrekeningen","default":"Contracten"},"deleted":"Verwijderd","no-contracts":"Er zijn geen contracten meer","handle-synchronization":"Synchronisaties beheren","desynchronized":{"message":"je hebt de synchroniastie met dit account stopgezet op %{date}","dateFormat":"dd-LL-yyyy"}},"contractForm":{"details":"Details","sharing":"Delen","back-to-accounts":"Terug naar rekeningen","update":"Bijwerken","delete":"Standaardwaarden","deleting":"Bezig met herstellen…","confirm-deletion":{"description":"Hiermee worden tevens je transacties en rekeningkoppelingen verwijderd. Als je je bankgegevens niet opnieuw wilt importeren tijdens de volgende geplande synchronisatie, verwijder dan de koppeling.","confirm":"Rekeningverwijdering bevestigen","title":"Weet je het zeker?"},"deletion_error":"Er is een fout opgetreden tijdens het verwijderen van de groep.","label":"Label","owner":"Eigenaar","addOwnerBtn":"Eigenaar toevoegen","removeOwnerBtn":"Eigenaar verwijderen","ownerPlaceholder":"Kies een eigenaar","bank":"Bank","number":"Nummer","type":"Soort","apply":"Toepassen","success":"De rekening is bijgewerkt","failure":"Fout tijdens bijwerken van rekening","removeAccountBtn":"Rekening verwijderen","listPlaceholder":"Zoeken naar contactpersoon","listEmptyMessage":"Geen contactpersoon gevonden","addContactLabel":"Contactpersoon toevoegen","cancel":"Annuleren","imported":"Gesynchroniseerd account"},"card":{"launchTrigger":{"button":{"label":"Synchroniseren"},"configure":"Instellen","connect":"Koppelen","success":"De synchronisatie is voltooid","error":"Er is een fout opgetreden.","frequency":{"label":"Frequentie:","hourly":"Elk uur","daily":"Elke dag","weekly":"Elke week","monthly":"Elke maand","undefined":"Handmatig"},"lastSync":{"label":"Bijwerken:","syncing":"Gegevensherstel…","unknown":"Onbekend","afterSomeTimes":"%{times} geleden gesynchroniseerd","format":"dd-LL-yyyy","disconnected":"Losgekoppeld","justNow":"Zojuist gesynchroniseerd"},"runningAlert":{"title":"Sluit de app niet!","body":"De telefoon moet aan blijven om het proces te kunnen voltooien. Je kunt echter gebruik blijven maken van de app.","button":"Ik begrijp het"}},"appLink":{"drive":{"title":"Mijn documenten","description":"Deze dienst haalt je recentste documenten op en maakt er een volledige back-up van.","button":"Documenten openen","install":"Ontdek Cozy Schijf"},"contacts":{"title":"Mijn contactpersonen","description":"Deze dienst synchroniseert al je contactpersonen.","button":"Contactpersonen tonen","install":"Ontdek Cozy Contactpersonen"},"banks":{"title":"Mijn bankgegevens","description":"Deze dienst haalt al je bankgegevens op en maakt er een handig overzicht van.","button":"Bankrekeningen tonen","install":"Ontdek Cozy Banken"},"coachco2":{"title":"Apps die verdergaan","description":"De volgende apps maken gebruik van je anonieme Cozy-gegevens.","button":"Coach CO2","install":"Ontdek CoachCO2"}},"information":{"title":"Nuttige informatie","websiteLink":"De website openen","store":"Zie in de Cozy Cloud Store","storeDescription":"Ga naar de beschrijving van deze app"}},"default":{"dateFormat":"dd-LL-yyyy","baseDir":"/Administratief"},"error":{"application-not-found":"Deze app bestaat niet","reconnect-via-form":"Opnieuw koppelen","job":{"DISK_QUOTA_EXCEEDED":{"title":"Geen vrije ruimte meer","description":"De dienst kan je documenten momenteel niet ophalen. Verwijder enkele bestanden of ga naar **Instellingen --\x3e Opslag** om meer vrije ruimte te verkrijgen."},"CHALLENGE_ASKED":{"title":"Tweede stap vereist","description":"Deze website vereist een tweede authenticatiemethode. Doorloop het proces opnieuw om de code op te geven en je gegevens op te halen."},"OAUTH_CANCELED":{"title":"Afgebroken","description":"Je bank kan niet worden toegevoegd omdat je de koppeling hebt afgebroken. Klik op ‘Bank toevoegen’ op het opnieuw te proberen."},"LOGIN_FAILED":{"title":"Onjuiste of verouderde inloggegevens","description":"Je inloggegevens zijn onjuist of verlopen. Controleer je inloggegevens op [%{name}](%{link}) voordat je ze bijwerkt."},"LOGIN_FAILED.NEEDS_SECRET":{"title":"Aanvullende informatie benodigd","description":"Er is een aanvullende stap gevraagd om de dienst te koppelen. Doorloop het proces opnieuw om de gevraagde gegevens in te voeren."},"LOGIN_FAILED.TOO_MANY_ATTEMPTS":{"title":"Tijdelijk geblokkeerd","description":"Te veel pogingen. Werk je gegevens bij op [%{name}](%{link}) en werk de connector later bij."},"MAINTENANCE":{"title":"Website is niet beschikbaar","description":"Het lijkt er op dat [%{name}](%{link}) niet beschikbaar is of de verbinding moet worden bijgewerkt. Doorloop het proces later opnieuw of bekijk onze online-hulp."},"NOT_EXISTING_DIRECTORY":{"title":"Bestemming ontbreekt","description":"Het lijkt er op dat de map niet aanwezig is op de bestemming. Herstel deze door je account opnieuw te koppelen."},"TERMS_VERSION_MISMATCH":{"title":"Recentste algemene voorwaarden niet geaccepteerd","description":"Het lijkt er op dat %{name} haar algemene voorwaarden heeft bijgewerkt. Controleer of de dienst is bijgewerkt. Als de fout blijft optreden, neem dan contact met ons op via [%{supportMail}](mailto:%{supportMail})."},"UNKNOWN_ERROR":{"title":"Verbindingsfout","description":"Er is een onbekende fout opgetreden. Probeer of het helpt om je gegevens bij te werken. Als dat niet helpt, neem dan contact met ons op via [%{supportMail}](mailto:%{supportMail})."},"USER_ACTION_NEEDED":{"title":"Actie benodigd op website van dienst","description":"Het lijkt er op dat [%{name}](%{link}) vereist dat je inlogt en een specifieke actie uitvoert. Verhelp het probleem en doorloop het proces opnieuw."},"USER_ACTION_NEEDED.OAUTH_OUTDATED":{"title":"Nieuwe goedkeuring vereist","description":"[%{name}](%{link}) vereist dat je de toegang opnieuw goedkeurt. Koppel je account \'%{name}\' opnieuw - er gaan geen gegevens verloren."},"USER_ACTION_NEEDED.ACCOUNT_REMOVED":{"title":"Account is niet beschikbaar","description":"Het lijkt er op dat je account niet meer beschikbaar is. Controleer je account op [%{name}](%{link}) voordat je het opnieuw probeert."},"USER_ACTION_NEEDED.CHANGE_PASSWORD":{"title":"Wachtwoord moet worden bijgewerkt","description":"Het lijkt er op dat [%{name}](%{link}) vereist dat je wachtwoord moet worden bijgewerkt. Verhelp het probleem en doorloop het proces opnieuw."},"USER_ACTION_NEEDED.PERMISSIONS_CHANGED":{"title":"Nieuwe machtigingen benodigd","description":"De connector is bijgewerkt en heeft nieuwe machtigingen nodig. Keur deze goed en doorloop het proces opnieuw."},"USER_ACTION_NEEDED.SCA_REQUIRED":{"title":"Nieuwe goedkeuring vereist","description":"Het lijkt er op dat [%{name}](%{link}) vereist dat je inlogt om te kunnen synchroniseren. Verhelp het probleem en doorloop het proces opnieuw."},"USER_ACTION_NEEDED.TWOFA_EXPIRED":{"title":"Nieuwe goedkeuring vereist","description":"De recentste verbindingspoging is mislukt. Probeer het opnieuw en geef desgewenst een goedkeuringscode op."},"USER_ACTION_NEEDED.WEBAUTH_REQUIRED":{"title":"Goedkeuring op website van dienst vereist","description":"Het lijkt er op dat [%{name}](%{link}) vereist dat je inlogt om te kunnen synchroniseren. Verhelp het probleem en doorloop het proces opnieuw."},"USER_ACTION_NEEDED.WRONG_TWOFA_CODE":{"title":"Onjuiste authenticatiecode","description":"De opgegeven authenticatiecode is onjuist. Probeer het opnieuw."},"VENDOR_DOWN":{"title":"Dienst is niet beschikbaar","description":"Het lijkt er op dat [%{name}](%{link}) niet beschikbaar is. Doorloop het proces later opnieuw."},"VENDOR_DOWN.BANK_DOWN":{"title":"Banksite is niet beschikbaar","description":"Het lijkt er op dat [%{name}](%{link}) niet beschikbaar is. Doorloop het proces later opnieuw."},"VENDOR_DOWN.LINXO_DOWN":{"title":"Dienst is niet beschikbaar","description":"Het lijkt er op dat de bankconnectors overbelast zijn. Doorloop het proces later opnieuw."},"ACCOUNT_WITH_SAME_IDENTIFIER_ALREADY_DEFINED":{"title":"Dit account is al toegevoegd","description":"Je mogelijke aanpassing aan de accountlijst wordt binnen een paar minuten doorgevoerd."}}},"fields":{"answer":{"label":"Geheim antwoord"},"birthdate":{"label":"Geboortedatum","placeholder":"dd-mm-yyyy"},"code":{"label":"Geheime code"},"date":{"label":"Datum","placeholder":"dd-mm-yyyy"},"email":{"label":"E-mailadres"},"firstname":{"label":"Voornaam"},"lastname":{"label":"Achternaam"},"login":{"label":"Gebruikersnaam"},"password":{"label":"Wachtwoord"},"phone":{"label":"Telefoonnummer"},"two_fa_code":{"label":"Authenticatiecode"}},"folder":{"administrative":"Administratief","photos":"Foto\'s"},"infos":{"konnectorUpdate":{"title":"Er is een update beschikbaar voor deze dienst.","body":{"regular":"Voer de update uit om je gegevens op te kunnen blijven halen en over de nieuwste functies te beschikken:","blocking":"Voer de update uit om je gegevens op te kunnen blijven halen:"},"button":{"label":"Update bekijken"}}},"legacy":{"fields":{"access_token":{"label":"Toegangssleutel"},"accessTokenSecret":{"label":"Toegangssleutelgeheim"},"accountName":{"label":"Accountnaam"},"agreement":{"label":"Ik ga akkoord"},"apikey":{"label":"API-sleutel"},"appKey":{"label":"Appsleutel"},"appSecret":{"label":"Appgeheim"},"authCode":{"label":"Auth.code"},"bank_identifier":{"label":"Bankidentificatie (optioneel)"},"branchName":{"label":"Filiaal"},"cardNumber":{"label":"Kaartnummer"},"consumerKey":{"label":"Klantsleutel"},"consumerSecret":{"label":"Klantgeheim"},"dob":{"label":"Geboortedatum"},"folderPath":{"label":"Mappad"},"identifier":{"label":"Identificatie"},"loginUrl":{"label":"Inlog-url"},"namePath":{"label":"Mapnaam"},"new_identifier":{"label":"Identificatie"},"phoneNumber":{"label":"Telefoonnummer"},"profileName":{"label":"Profielnaam"},"refreshToken":{"label":"Toegangssleutel vernieuwen"},"secret":{"label":"Wachtwoord"},"timeout":{"label":"Vertraging (in ms)"},"token":{"label":"Toegangssleutel"},"tricountUrl":{"label":"Tricount-url"}}},"modal":{"aria-label":"Connector instellen","konnector":{"error":{"title":"Je account kan niet worden opgehaald","description":"Je account kan niet worden opgehaald (%{message}).","button":"Sluiten"}},"accounts":{"title":"Kies een %{name}-account","error":{"title":"Fout","description":"Je account(s) kan/kunnen niet worden opgehaald","retry":"Opnieuw proberen"}},"tabs":{"data":"Gegevens","configuration":"Instellen"},"addAccount":{"title":"%{name} koppelen","button":"Account toevoegen"},"deleteBIConnection":{"title":"Loskoppelen","description":"Je verzoek is genoteerd en wordt over enkele ogenblikken uitgevoerd. Eerder ge\xefmporteerde gegevens worden niet verwijderd.","confirm-deletion":"Sluiten"},"deleteAccount":{"title":"Loskoppelen","description":"Je account wordt losgekoppeld, maar belangrijke gegevens worden bewaard","confirm":"Loskoppelen","cancel":"Annuleren"},"updateAccount":{"general-subheader":"Algemeen","identifiers":"Identificaties","delete-account-success":"Het account is losgekoppeld","delete-account-error":"Het account kan niet worden losgekoppeld. Probeer het later opnieuw of neem contact op met ons ondersteuningsteam."}},"oauth":{"banking":{"connect":{"label":"Bank toevoegen"},"reconnect":{"label":"Opnieuw koppelen"}},"reconnect":{"label":"Opnieuw koppelen"},"connect":{"description":"Koppel %{name} aan je Cozy om te synchroniseren met je account en automatisch al je gegevens op te halen.","label":"Koppelen","submit":"Koppelen","title":"Koppelen aan mijn Cozy"},"window":{"title":"OAuth"}},"triggerSuccessMessage":{"button":{"label":"Sluiten"},"description":"Je gegevens zijn over een paar minuten beschikbaar op je Cozy en worden voortaan automatisch bijgewerkt.","figure":{"alt":"gekoppeld"},"title":"Instellen voltooid!"},"twoFAForm":{"modal-label":"Authenticatie in twee stappen","providers":{"default":"Voer de code in die je per e-mail of sms hebt ontvangen","email":"Voer de code in die je per e-mail hebt ontvangen","sms":"Voer de code in die je per sms hebt ontvangen","app_code":"Voer de eenmalige code in die je kunt aanmaken in ${name}","app":"Open de app van de dienst om de koppeling goed te keuren."},"desc-2fa":"Open de app van de dienst om de koppeling goed te keuren. In sommige gevallen moet je twee keer toestemming geven.","desc_1":"Met deze code kun je de koppeling bevestigen.","desc_2":"De tweede code, om de koppeling te bevestigen, ontvang je op je telefoon of per e-mail.","code":{"label_1":"code","label_2":"Tweede code"},"retry":"Ongeldige code - probeer het opnieuw.","CTA":"Verifi\xebren"},"account":{"success":{"title":"Instellen voltooid!","connect":"Je gegevens zijn over een paar minuten beschikbaar op je Cozy en worden voortaan automatisch bijgewerkt.","banksLinkText":"Accounts bekijken in %{appName}","driveLinkText":"Map openen in Cozy Schijf","button":"Sluiten"}},"maintenance":{"noService":"Dienst is onderbroken","explanationTitle":"Wat gebeurt er allemaal?"},"suggestions":{"title":"Gegevens importeren uit %{name}","data":"Door %{name} te installeren worden de volgende gegevens automatisch ge\xefmporteerd:","why":"Waarom is %{name} aanbevolen?","reason_bank":"%{name} is aangetroffen in \xe9\xe9n van je bankoverschrijvingen. Geen zorgen: niemand anders heeft toegang tot deze informatie.","install":"Installeren","silence":"Niet meer aanbevelen"},"dataType":{"none":"%{name} heeft geen toegang tot je persoonlijke gegevens","activity":"Mijn activiteiten","appointment":"Mijn afspraken","bankTransactions":"Mijn bankoverschrijvingen","bankAccounts":"Mijn bankrekeningen","bill":"Mijn rekeningen","bloodPressure":"Mijn bloeddruk","calendar":"Mijn agenda\'s","certificate":"Mijn certificaten","commit":"Mijn commits","consumption":"Mijn consumpties","contact":"Mijn contactpersonen","contract":"Mijn contracten","courseMaterial":"Mijn cursusmateriaal","document":"Mijn documenten","event":"Mijn gebeurtenissen","family":"Mijn gezinsinformatie","geopoint":"Mijn geolocaties","heartbeat":"Mijn hartslagen","home":"Mijn woninginformatie","phonecommunicationlog":"Mijn oproepgeschiedenis","picture":"Mijn afbeeldingen","podcast":"Mijn podcasts","profile":"Mijn klantprofiel","refund":"Mijn terugbetalingen","sinister":"Mijn sinisters","sleepTime":"Mijn slaaptijd","stepsNumber":"Mijn wandelstappen","temperature":"Mijn temperatuurgegevens","travelDate":"Mijn reisdatums","tweet":"Mijn tweets","videostream":"Mijn video\'s","weight":"Mijn gewicht"},"vaultCiphersList":{"title":"Vanuit welk account wil je je gegevens importeren?","otherAccount":"Uit ander account…"},"triggerManager":{"confirmationModal":{"title":"Inloggegevens bijwerken?","description":"Je vorige inloggegevens worden gewist - voeg een nieuw account toe om ze te bewaren.","primaryText":"Bijwerken","secondaryText":"Annuleren"}},"connectionBackdrop":{"connecting":"Bezig met verbinden…","progress":"We zoeken %{name} op - dit kan max. 30 seconden duren…"},"disconnectedAccountModal":{"disconnected-help":"Dit account is losgekoppeld, maar je gegevens zijn bewaard. Als je opnieuw wilt synchroniseren, stel dan je account opnieuw in middels de knop \'Bank toevoegen\'."},"konnectorBlock":{"account":"Klantaccount","disconnected":"Losgekoppeld","inMaintenance":"Onderhoudswerkzaamheden","hasNewVersionAvailable":"Nieuwe versie beschikbaar","fatalError":"Er is een fout opgetreden bij het herstellen van de dienst. Als het probleem zich blijft voordoen, neem dan contact met ons op via [%{name}](%{link})"},"datacards":{"trips":{"title":"Recente reizen","caption":"Bekijk je 5 recentste reizen van %{konnectorName}","modes":{"AIR_OR_HSR":"Vliegtuig","BICYCLING":"Fiets","CAR":"Auto","SUBWAY":"Metro","TRAIN":"Trein","UNKNOWN":"","WALKING":"Wandelen"}},"files":{"title":"Mijn documenten","imported":"Ge\xefmporteerd op %{date}","caption":"Deze dienst haalt je recentste documenten op en maakt er een volledige back-up van."}}}')},26030:function(e){"use strict";e.exports=JSON.parse('{"loading":{"sharing":"Loading in progress"},"Share":{"status":{"owner":"Owner","pending":"Invitation sent","seen":"Invitation seen","ready":"Accepted","refused":"Refused","mail-not-sent":"Sending invitation mail...","revoked":"Error","unregistered":"Error"},"type":{"one-way":"Can view","two-way":"Can change","desc":{"one-way":"Contacts can view, download, and add the content to their Cozy. If they add the content to their Cozy, they will get updates you make to the content, but they won\'t be able to update it.","two-way":"Contacts can update, delete and add the content to their Cozy. Updates on the content will be seen on other Cozies."}},"locked-type-file":"Coming soon: you will be able to change permissions you grant on the file.","locked-type-folder":"Coming soon: you will be able to change permissions you grant on the folder.","recipients":{"you":"You","anyoneWithTheLink":"Anyone with the link","linkWithPassword":"Anyone with a password","expires":"Until %{date}","accessCount":"%{count} people have access"},"create-cozy":"Create |||| Create my cozy","members":{"count":"%{smart_count} member |||| %{smart_count} members","others":"and 1 other… |||| and %{smart_count} others…","otherContacts":"other contact |||| other contacts"},"contacts":{"whoHasAccess":"Who has access?","permissionRequired":{"title":"Save your contacts in your Cozy?","desc":"Authorize the application to access to your Cozy\'s contacts: you\'ll be able to select them next time.","action":"Authorize access","success":"The application has access to your contacts"},"defaultDisplayName":"Anonymous"},"twoStepsConfirmation":{"title":"Confirm contact\'s identity","titleReject":"Reject contact","confirm":"Confirm","reject":"Reject","cancel":"Cancel","verify":"Verify","contactAreWaitingForConfirmation":"Some contacts are waiting for your confirmation. Confirm their identities to allow them to access items you shared with them.||||%{smart_count} contacts are waiting for your confirmation. Confirm their identities to allow them to access items you shared with them.","confirmRejection":"Do you really want to reject contact %{userName} (%{userEmail})?"},"loadingError":"Loading error","banner":{"shared_from":"The items below are displayed from ![avatar](%{image}) **%{name}**\'s Cozy. You can add a link to this share in your Cozy","whats_cozy":"Cozy is a secure digital home for all your data, hosted in France - ","know_more":"More information","sync_to_mine":"Synchronise |||| Synchronise in my Cozy","add_to_mine":"Add |||| Add to my Cozy","close":"Close"},"permissionLink":{"title":"Allow anyone with the link to:","seeFile":"See file","modifyFile":"Modify file","seeFolder":"See folder","modifyFolder":"Modify folder","readDescription":"Link holders can only read or download content.","writeDescription":"Link holders can alter and delete content.","deactivate":"Deactivate link","cancel":"Cancel","confirm":"OK"},"errors":{"errors":{"groupMemberAlreadyInSharing":"%{groupName} members have already been invited with %{sharingRights} rights. It is not possible to invite the same contact twice with different rights. |||| Contacts have already been invited with %{sharingRights} rights. It is not possible to invite the same contact twice with different rights.","contactAlreadyInSharing":"%{contactName} has already been invited in a group with %{sharingRights} rights. It is not possible to invite the same contact twice with different rights. |||| Contacts have already been invited with %{sharingRights} rights. It is not possible to invite the same contact twice with different rights.","sharingRights":{"readOnly":"read","readWrite":"write"}}},"send":"Send..."},"Sharings":{"unavailable":{"title":"Switch online!","message":"An internet connection is needed to display the list of your last sharings."}},"Files":{"share":{"cta":"Share","title":"Share \\"%{name}\\"","details":{"title":"Sharing details","createdAt":"On %{date}","ro":"Can read","rw":"Can change","desc":{"ro":"You can view, download, and add this content to your Cozy. You will get updates by the owner, but you won\'t be able to update this content yourself.","rw":"You can view, update, delete and add this content to your Cozy. Updates you make will be seen on other Cozies."}},"sharedByMe":"Shared by me","shared":"Shared","sharedWithMe":"Shared with me","sharedBy":"Shared by %{name}","sharedByLink":"Shared by link","shareByLink":{"create":"Generate a link","send":"Send link","copy":"Copy link","copied":"Link has been copied to clipboard","failed":"Unable to copy to clipboard","permserror":"An error occurred while changing the permissions of the link, please try again.","shareDescription":"Here is the link to the document %{name}:"},"shareByEmail":{"subtitle":"By email","emailPlaceholder":"Add contacts or groups","send":"Send","singleContactSuccess":"You sent an invite to %{email}.","contactSuccess":"You sent an invite to %{smart_count} contact. |||| You sent an invite to %{smart_count} contacts.","singleGroupSuccess":"You sent an invite to the members of the %{groupName} group.","groupSuccess":"You sent an invite to the members of %{smart_count} group. |||| You sent an invite to the members of %{smart_count} groups.","contactAndGroupSuccess":"You sent an invite to %{nbContact} contacts and the members of %{nbGroup} groups.","comingsoon":"Coming soon! You will be able to share documents and photos in a single click with your family, your friends, and even your coworkers. Don\'t worry, we\'ll let you know when it\'s ready!","onlyByLink":"This %{type} can only be shared by link, because","type":{"file":"file","folder":"folder"},"hasSharedParent":"it has a shared parent","hasSharedChild":"it contains a shared element"},"sharingLink":{"title":"Link to share","copy":"Copy","copied":"Copied"},"protectedShare":{"title":"Coming soon!","desc":"Share anything by email with your family and friends!"},"close":"Close","gettingLink":"Getting your link...","error":{"generic":"An error occurred when creating the file share link, please try again.","revoke":"Woops, an error occurred. Please contact us so we can fix this issue as soon as possible."},"specialCase":{"base":"This %{type} cannot be shared but with a link as it","isInSharedFolder":"is in a shared folder","hasSharedFolder":"contains a shared folder"}}},"Notes":{"share":{"cta":"Share","title":"Share \\"%{name}\\"","details":{"title":"Sharing details","createdAt":"On %{date}","ro":"Can read","rw":"Can change","desc":{"ro":"You can view, download, and add this content to your Cozy. You will get updates by the owner, but you won\'t be able to update this content yourself.","rw":"You can view, update, delete and add this content to your Cozy. Updates you make will be seen on other Cozies."}},"sharedByMe":"Shared by me","shared":"Shared","sharedWithMe":"Shared with me","sharedBy":"Shared by %{name}","shareByLink":{"create":"Generate a link","send":"Send link","copy":"Copy link","copied":"Link has been copied to clipboard","failed":"Unable to copy to clipboard","permserror":"An error occurred while changing the permissions of the link, please try again.","shareDescription":"Here is the link to the document %{name}:"},"shareByEmail":{"subtitle":"By email","email":"To:","emailPlaceholder":"Enter the email address or name of the recipient","send":"Send","singleContactSuccess":"You sent an invite to %{email}.","contactSuccess":"You sent an invite to %{smart_count} contact. |||| You sent an invite to %{smart_count} contacts.","singleGroupSuccess":"You sent an invite to the members of the %{groupName} group.","groupSuccess":"You sent an invite to the members of %{smart_count} group. |||| You sent an invite to the members of %{smart_count} groups.","contactAndGroupSuccess":"You sent an invite to %{nbContact} contacts and the members of %{nbGroup} groups.","comingsoon":"Coming soon! You will be able to share documents and photos in a single click with your family, your friends, and even your coworkers. Don\'t worry, we\'ll let you know when it\'s ready!","onlyByLink":"This %{type} can only be shared by link, because","type":{"file":"file","folder":"folder","note":"note"},"hasSharedParent":"it has a shared parent","hasSharedChild":"it contains a shared element"},"sharingLink":{"title":"Link to share","copy":"Copy","copied":"Copied"},"whoHasAccess":{"title":"1 person has access |||| %{smart_count} people have access"},"protectedShare":{"title":"Coming soon!","desc":"Share anything by email with your family and friends!"},"close":"Close","gettingLink":"Getting your link...","error":{"generic":"An error occurred when creating the note share link, please try again.","revoke":"Woops, an error occurred. Please contact us so we can fix this issue as soon as possible."},"specialCase":{"base":"This %{type} cannot be shared but with a link as it","isInSharedFolder":"is in a shared folder","hasSharedFolder":"contains a shared folder"}}},"Albums":{"share":{"cta":"Share","title":"Share  \\"%{name}\\" with others","details":{"title":"Sharing details","createdAt":"On %{date}","ro":"Read only","rw":"Read/write"},"sharedByMe":"Shared","shared":"Shared","sharedWithMe":"Shared with me","shareByLink":{"create":"Generate a link","send":"Send link","copy":"Copy link","copied":"Link has been copied to clipboard","failed":"Unable to copy to clipboard","permserror":"An error occurred while changing the permissions of the link, please try again.","fetchFailed":"Woops! It seems your connectivity is limited, try again later when it gets better.","shareDescription":"Here is the link to the album %{name}:"},"shareByEmail":{"title":"By email","subtitle":"By email","email":"email","emailPlaceholder":"Enter the email address or name of the recipient","send":"Send","singleContactSuccess":"You sent an invite to %{email}.","contactSuccess":"You sent an invite to %{smart_count} contact. |||| You sent an invite to %{smart_count} contacts.","singleGroupSuccess":"You sent an invite to the members of the %{groupName} group.","groupSuccess":"You sent an invite to the members of %{smart_count} group. |||| You sent an invite to the members of %{smart_count} groups.","contactAndGroupSuccess":"You sent an invite to %{nbContact} contacts and the members of %{nbGroup} groups.","comingsoon":"Coming soon! You will be able to share documents and photos in a single click with your family, your friends, and even your coworkers. Don\'t worry, we\'ll let you know when it\'s ready!"},"unshare":{"title":"Remove from album","success":"You removed this shared album from %{email}."},"sharingLink":{"title":"Link to share","copy":"Copy","copied":"Copied"},"whoHasAccess":{"title":"Who has access"},"protectedShare":{"title":"Coming soon!","desc":"Share anything by email with your family and friends!"},"close":"Close","gettingLink":"Getting your link...","error":{"generic":"An error occurred when creating the album share link, please try again.","revoke":"An error occurred when revoking the album share link, please try again."}}},"Organizations":{"share":{"cta":"Share","title":"Share \\"%{name}\\"","details":{"title":"Sharing details","createdAt":"On %{date}","ro":"Can read","rw":"Can change","desc":{"ro":"You can view, download, and add this content to your Cozy. You will get updates by the owner, but you won\'t be able to update this content yourself.","rw":"You can view, update, delete and add this content to your Cozy. Updates you make will be seen on other Cozies."}},"sharedByMe":"Shared by me","shared":"Shared","sharedWithMe":"Shared with me","sharedBy":"Shared by %{name}","sharedByLink":"Shared by link","shareByLink":{"create":"Generate a link","send":"Send link","copy":"Copy link","copied":"Link has been copied to clipboard","failed":"Unable to copy to clipboard","permserror":"An error occurred while changing the permissions of the link, please try again.","shareDescription":"Here is the link to the document %{name}:"},"shareByEmail":{"subtitle":"By email","email":"Send to:","emailPlaceholder":"Enter the email address or name of the recipient","send":"Send","singleContactSuccess":"You sent an invite to %{email}.","contactSuccess":"You sent an invite to %{smart_count} contact. |||| You sent an invite to %{smart_count} contacts.","singleGroupSuccess":"You sent an invite to the members of the %{groupName} group.","groupSuccess":"You sent an invite to the members of %{smart_count} group. |||| You sent an invite to the members of %{smart_count} groups.","contactAndGroupSuccess":"You sent an invite to %{nbContact} contacts and the members of %{nbGroup} groups.","comingsoon":"Coming soon! You will be able to share documents and photos in a single click with your family, your friends, and even your coworkers. Don\'t worry, we\'ll let you know when it\'s ready!","onlyByLink":"This %{type} can only be shared by link, because","type":{"file":"file","folder":"folder"},"hasSharedParent":"it has a shared parent","hasSharedChild":"it contains a shared element"},"sharingLink":{"title":"Link to share","copy":"Copy","copied":"Copied"},"protectedShare":{"title":"Coming soon!","desc":"Share anything by email with your family and friends!"},"close":"Close","gettingLink":"Getting your link...","error":{"generic":"An error occurred when creating the file share link, please try again.","revoke":"Woops, an error occurred. Please contact us so we can fix this issue as soon as possible."},"specialCase":{"base":"This %{type} cannot be shared but with a link as it","isInSharedFolder":"is in a shared folder","hasSharedFolder":"contains a shared folder"}},"fingerprint":{"instruction":"For security reasons, please verify **%{userName} (%{userEmail})**\'s identity. To do this, contact **%{userName}** via the means of communication of your choice (call, text message, instant messaging app...) and verify their security code.<br><br>Every Cozy user has a security code that they can find using their web application. Their security code must correspond to:","instruction2":"If it is the case, then you can confirm this contact who will be considered as secure for your next sharings."}},"ConfirmRecipientModal":{"title":"%{smart_count} contact waiting for confirmation |||| %{smart_count} contacts waiting for confirmation","intruction":"Verify identity of their Cozy in order to give them access content you shared with them."},"ShareRecipientsLimitModal":{"title":"Problem with your sharing","content":"You cannot share %{documentName} with more than %{limit} members.","confirm":"I understand"},"RevokeMemberItem":{"revoke":{"title":"Remove from sharing","desc":"This contact will keep a copy but the changes won\'t be synchrnoized anymore."},"revokeSelf":{"title":"Remove me from sharing","desc":"You keep the content but it won\'t be updated between your Cozy anymore."}},"GroupRecipient":{"secondary":"%{memberCount} member |||| %{memberCount} members","secondary_you":"including you"},"RevokeGroupItem":{"revoke":{"title":"Remove group from sharing","desc":"Group members will keep a copy but the changes won\'t be synchrnoized anymore."},"revokeSelf":{"title":"Remove me from sharing","desc":"You keep the content but it won\'t be updated between your Cozy anymore."}},"GroupRecipientDetail":{"subtitle":"Managed by %{ownerName}","empty":{"content":"Your contact group is empty! Quickly add members to start sharing your valuable documents with them!","action":"Open Contacts"},"withAccess":{"title":"Access to item"},"withoutAccess":{"title":"No access","status":{"mail-not-sent":"Invitation failed","revoked":"Sharing revoked"},"addEmail":"Enter an email address to invite the contact"}},"ShareRestrictionModal":{"action":{"confirm":"Confirm"},"invalidPasswordMessage":"%{smart_count} character is missing |||| %{smart_count} characters are missings"},"BoxDate":{"label":"Deadline","text":"Remove access after a deadline"},"BoxPassword":{"label":"Password","text":"Limit access with a password"},"BoxEditingRights":{"editSubText":"People with access to the link can modify the content","readOnlySubText":"People who have access to the link can only view the content","text":"Editing rights"},"copyReminderContent":{"success":"Copied to clipboard","error":"Cannot copy to clipboard"},"shareFile":{"error":"Problem with link recovery: %{error}","text":"Link to my document %{name}: |||| Link to my documents %{name}: ","title":"Link to my document %{name} |||| Link to my documents %{name}"}}')},40552:function(e){"use strict";e.exports=JSON.parse('{"loading":{"sharing":"Chargement en cours"},"Share":{"status":{"owner":"Propri\xe9taire","pending":"Invitation envoy\xe9e","seen":"Partage consult\xe9","ready":"Accept\xe9","refused":"Refus\xe9","mail-not-sent":"Envoi du mail d\'invitation...","revoked":"Erreur","unregistered":"Erreur"},"type":{"one-way":"Peut consulter","two-way":"Peut modifier","desc":{"one-way":"Les contacts peuvent consulter, t\xe9l\xe9charger, et ajouter le contenu \xe0 leur Cozy. En cas d’ajout \xe0 leur Cozy, ils recevront vos modifications sur le contenu mais ils ne pourront pas le modifier.","two-way":"Les contacts peuvent modifier, supprimer et ajouter le contenu \xe0 leur Cozy. Les modifications sur le contenu seront r\xe9percut\xe9es automatiquement entre vos Cozy."}},"locked-type-file":"Bient\xf4t : vous pourrez changer la permission donn\xe9e sur le fichier.","locked-type-folder":"Bient\xf4t : vous pourrez changer la permission donn\xe9e sur le dossier.","recipients":{"you":"Vous","anyoneWithTheLink":"N\'importe qui avec le lien","linkWithPassword":"N\'importe qui avec un mot de passe","expires":"Jusqu\'au %{date}","accessCount":"%{count} personnes y ont acc\xe8s"},"create-cozy":"Cr\xe9er |||| Cr\xe9er mon Cozy","members":{"count":"%{smart_count} membre |||| %{smart_count} membres","others":"et 1 autre… |||| et %{smart_count} autres…","otherContacts":"autre contact |||| autres contacts"},"contacts":{"whoHasAccess":"Qui a acc\xe8s ?","permissionRequired":{"title":"Enregistrer vos contacts dans votre Cozy ?","desc":"Autorisez l\'application \xe0 acc\xe9der aux contacts de votre Cozy : vous pourrez les s\xe9lectionner la prochaine fois.","action":"Autoriser l\'acc\xe8s","success":"L\'application a acc\xe8s \xe0 vos contacts"},"defaultDisplayName":"Anonyme"},"twoStepsConfirmation":{"title":"Confirmer l\'identit\xe9 du contact","titleReject":"Refuser le contact","confirm":"Confirmer","reject":"Refuser","cancel":"Annuler","verify":"V\xe9rifier","contactAreWaitingForConfirmation":"%{smart_count} contact en attente de confirmation. Confirmer son identit\xe9 pour lui permettre d’acc\xe9der aux \xe9l\xe9ments que vous avez partag\xe9 avec lui.||||%{smart_count} contacts en attente de confirmation. Confirmer leur identit\xe9 pour leur permettre d’acc\xe9der aux \xe9l\xe9ments que vous avez partag\xe9 avec eux.","confirmRejection":"\xcates-vous s\xfbr de vouloir refuser le contact %{userName} (%{userEmail})?"},"loadingError":"Erreur de chargement","banner":{"shared_from":"Les \xe9l\xe9ments ci-dessous sont affich\xe9s depuis le Cozy de ![avatar](%{image}) **%{name}**. Vous pouvez ajouter un lien vers ce partage dans votre Cozy.","whats_cozy":"Cozy est un domicile num\xe9rique s\xe9curis\xe9 pour toutes vos donn\xe9es, h\xe9berg\xe9 en France - ","know_more":"En savoir plus","sync_to_mine":"Synchroniser |||| Synchroniser dans mon Cozy","add_to_mine":"Ajouter |||| Ajouter \xe0 mon Cozy","close":"Fermer"},"permissionLink":{"title":"Autoriser n\'importe qui avec le lien \xe0 :","seeFile":"Consulter le fichier","modifyFile":"Modifier le fichier","seeFolder":"Consulter le dossier","modifyFolder":"Modifier le dossier","readDescription":"Les d\xe9tenteurs du lien peuvent uniquement consulter ou t\xe9l\xe9charger le contenu.","writeDescription":"Les d\xe9tenteurs du lien peuvent modifier et supprimer le contenu.","deactivate":"D\xe9sactiver le lien","cancel":"Annuler","confirm":"OK"},"errors":{"groupMemberAlreadyInSharing":"Des membres de %{groupName} ont d\xe9j\xe0 \xe9t\xe9 invit\xe9s avec des droits de %{sharingRights}. Impossible d’inviter 2 fois le m\xeame contact avec des droits diff\xe9rents. |||| Des contacts ont d\xe9j\xe0 \xe9t\xe9 invit\xe9s avec des droits de %{sharingRights}. Impossible d’inviter 2 fois le m\xeame contact avec des droits diff\xe9rents.","contactAlreadyInSharing":"%{contactName} a d\xe9j\xe0 \xe9t\xe9 invit\xe9 dans un groupe avec des droits de %{sharingRights}. Impossible d’inviter 2 fois le m\xeame contact avec des droits diff\xe9rents. |||| Des contacts ont d\xe9j\xe0 \xe9t\xe9 invit\xe9s avec des droits de %{sharingRights}. Impossible d’inviter 2 fois le m\xeame contact avec des droits diff\xe9rents.","sharingRights":{"readOnly":"lecture","readWrite":"modification"}},"send":"Envoyer..."},"Sharings":{"unavailable":{"title":"Ravi de vous revoir !","message":"Connectez-vous \xe0 Internet pour faire apparaitre la liste de vos r\xe9cents partages."}},"Files":{"share":{"cta":"Partager","title":"Partager \xab %{name} \xbb","details":{"title":"D\xe9tails du partage","createdAt":"Depuis le %{date}","ro":"Peut consulter","rw":"Peut modifier","desc":{"ro":"Vous pouvez consulter, t\xe9l\xe9charger, et ajouter ce contenu \xe0 votre Cozy. Vous recevrez les modifications faites par le propri\xe9taire, mais vous ne pourrez pas le modifier.","rw":"Vous pouvez consulter, modifier et supprimer du contenu. Les modifications sur le contenu seront r\xe9percut\xe9es automatiquement entre vos Cozy."}},"sharedByMe":"Partag\xe9","shared":"Partag\xe9","sharedWithMe":"Partag\xe9 avec moi","sharedBy":"Partag\xe9 par %{name}","shareByLink":{"create":"G\xe9n\xe9rer un lien","send":"Envoyer le lien","copy":"Copier le lien","copied":"Lien copi\xe9 dans le presse-papiers.","failed":"Impossible de copier dans le presse papier","permserror":"Une erreur est survenue lors du changement de permissions du lien, merci de r\xe9essayer.","shareDescription":"Voici le lien de partage du document %{name} :"},"shareByEmail":{"subtitle":"Par email","emailPlaceholder":"Ajouter des contacts ou des groupes","send":"Envoyer","singleContactSuccess":"Vous avez envoy\xe9 une invitation \xe0 %{email}.","contactSuccess":"Vous avez invit\xe9 %{smart_count} contact. |||| Vous avez invit\xe9 %{smart_count} contacts.","singleGroupSuccess":"Vous avez invit\xe9 les membres du groupe %{groupName}.","groupSuccess":"Vous avez invit\xe9 les membres de %{smart_count} groupe. |||| Vous avez invit\xe9 les membres de %{smart_count} groupes.","contactAndGroupSuccess":"Vous avez invit\xe9 %{nbContact} contacts et les membres de %{nbGroup} groupes.","comingsoon":"Bient\xf4t disponible ! Vous pourrez partager un document et vos photos en un seul clic avec votre famille, vos amis, et m\xeame vos collaborateurs. Ne vous inqui\xe9tez pas, on vous pr\xe9vient quand ce sera pr\xeat !","onlyByLink":"Ce %{type} ne peut \xeatre partag\xe9 que sous la forme d\'un lien, car il","type":{"file":"fichier","folder":"dossier"},"hasSharedParent":"se trouve dans un dossier partag\xe9.","hasSharedChild":"contient un \xe9l\xe9ment partag\xe9."},"sharingLink":{"title":"Partager","copy":"Copier","copied":"Copi\xe9"},"protectedShare":{"title":"Prochainement !","desc":"Partagez ce que vous souhaitez par email avec votre famille et vos amis !"},"close":"Fermer","gettingLink":"Cr\xe9ation du lien…","error":{"generic":"Une erreur est survenue lors de la cr\xe9ation du lien de partage, merci de r\xe9essayer","revoke":"Oups, une erreur est survenue. Contactez-nous pour que nous r\xe9solvions la situation au plus vite.\\n"},"specialCase":{"base":"Ce %{type} ne peut \xeatre partag\xe9 que sous la forme d\'un lien, car il","isInSharedFolder":"se trouve dans un dossier partag\xe9.","hasSharedFolder":"contient un dossier partag\xe9."}}},"Notes":{"share":{"cta":"Partager","title":"Partager \xab %{name} \xbb","details":{"title":"D\xe9tails du partage","createdAt":"Depuis le %{date}","ro":"Peut consulter","rw":"Peut modifier","desc":{"ro":"Vous pouvez consulter, t\xe9l\xe9charger, et ajouter ce contenu \xe0 votre Cozy. Vous recevrez les modifications faites par le propri\xe9taire, mais vous ne pourrez pas le modifier.","rw":"Vous pouvez consulter, modifier et supprimer du contenu. Les modifications sur le contenu seront r\xe9percut\xe9es automatiquement entre vos Cozy."}},"sharedByMe":"Partag\xe9","shared":"Partag\xe9","sharedWithMe":"Partag\xe9 avec moi","sharedBy":"Partag\xe9 par %{name}","shareByLink":{"create":"G\xe9n\xe9rer un lien","send":"Envoyer le lien","copy":"Copier le lien","copied":"Lien copi\xe9 dans le presse-papiers.","failed":"Impossible de copier dans le presse papier","permserror":"Une erreur est survenue lors du changement de permissions du lien, merci de r\xe9essayer.","shareDescription":"Voici le lien de partage du document %{name} :"},"shareByEmail":{"subtitle":"Par email","email":"\xc0 :","emailPlaceholder":"Saisissez le courriel ou le nom du destinataire.","send":"Envoyer","singleContactSuccess":"Vous avez envoy\xe9 une invitation \xe0 %{email}.","contactSuccess":"Vous avez invit\xe9 %{smart_count} contact. |||| Vous avez invit\xe9 %{smart_count} contacts.","singleGroupSuccess":"Vous avez invit\xe9 les membres du groupe %{groupName}.","groupSuccess":"Vous avez invit\xe9 les membres de %{smart_count} groupe. |||| Vous avez invit\xe9 les membres de %{smart_count} groupes.","contactAndGroupSuccess":"Vous avez invit\xe9 %{nbContact} contacts et les membres de %{nbGroup} groupes.","success":"Vous avez envoy\xe9 une invitation \xe0 %{email}.","comingsoon":"Bient\xf4t disponible ! Vous pourrez partager un document et vos photos en un seul clic avec votre famille, vos amis, et m\xeame vos collaborateurs. Ne vous inqui\xe9tez pas, on vous pr\xe9vient quand ce sera pr\xeat !","onlyByLink":"Ce %{type} ne peut \xeatre partag\xe9 que sous la forme d\'un lien, car il","type":{"file":"fichier","folder":"dossier","note":"note"},"hasSharedParent":"se trouve dans un dossier partag\xe9.","hasSharedChild":"contient un \xe9l\xe9ment partag\xe9."},"sharingLink":{"title":"Partager","copy":"Copier","copied":"Copi\xe9"},"whoHasAccess":{"title":"1 personne y a acc\xe8s |||| %{smart_count} personnes y ont acc\xe8s"},"protectedShare":{"title":"Prochainement !","desc":"Partagez ce que vous souhaitez par email avec votre famille et vos amis !"},"close":"Fermer","gettingLink":"Cr\xe9ation du lien…","error":{"generic":"Une erreur est survenue lors de la cr\xe9ation du lien de partage, merci de r\xe9essayer","revoke":"Oups, une erreur est survenue. Contactez-nous pour que nous r\xe9solvions la situation au plus vite.\\n"},"specialCase":{"base":"Ce %{type} ne peut \xeatre partag\xe9 que sous la forme d\'un lien, car il","isInSharedFolder":"se trouve dans un dossier partag\xe9.","hasSharedFolder":"contient un dossier partag\xe9."}}},"Albums":{"share":{"cta":"Partager","title":"Partager \xab %{name} \xbb avec d\'autres","details":{"title":"D\xe9tails du partage","createdAt":"Depuis le %{date}","ro":"Permission de lecture","rw":"Permission d\'\xe9criture et de lecture"},"sharedByMe":"Partag\xe9","shared":"Partag\xe9","sharedWithMe":"Partag\xe9 avec moi","shareByLink":{"create":"G\xe9n\xe9rer un lien","send":"Envoyer le lien","copy":"Copier le lien","copied":"Lien copi\xe9 dans le presse-papier","failed":"Impossible de copier dans le presse-papier","permserror":"Une erreur est survenue lors du changement de permissions du lien, merci de r\xe9essayer.","fetchFailed":"Oups ! Il semblerait que votre connexion internet soit limit\xe9e, r\xe9essayez plus tard quand le r\xe9seau sera meilleur.","shareDescription":"Voici le lien de partage de l\'album %{name} :"},"shareByEmail":{"title":"Par e-mail","subtitle":"Par email","email":"e-mail","emailPlaceholder":"Saisissez l\'email ou le nom du destinataire.","send":"Envoyer","singleContactSuccess":"Vous avez envoy\xe9 une invitation \xe0 %{email}.","contactSuccess":"Vous avez invit\xe9 %{smart_count} contact. |||| Vous avez invit\xe9 %{smart_count} contacts.","singleGroupSuccess":"Vous avez invit\xe9 les membres du groupe %{groupName}.","groupSuccess":"Vous avez invit\xe9 les membres de %{smart_count} groupe. |||| Vous avez invit\xe9 les membres de %{smart_count} groupes.","contactAndGroupSuccess":"Vous avez invit\xe9 %{nbContact} contacts et les membres de %{nbGroup} groupes.","success":"Vous avez envoy\xe9 une invitation \xe0 %{email}.","comingsoon":"Bient\xf4t disponible ! Vous pourrez partager vos documents et vos photos en un seul clic avec votre famille, vos amis et m\xeame vos collaborateurs. Ne vous inqui\xe9tez pas, on vous pr\xe9viendra quand ce sera pr\xeat !\\n"},"unshare":{"title":"Arr\xeater le partage avec ce contact","success":"Vous avez cess\xe9 de partager cet album avec %{email}."},"sharingLink":{"title":"Partager","copy":"Copier","copied":"Copi\xe9"},"whoHasAccess":{"title":"Qui a acc\xe8s"},"protectedShare":{"title":"Prochainement !","desc":"Partagez ce que vous souhaitez par email avec votre famille et vos amis !"},"close":"Fermer","gettingLink":"R\xe9cup\xe9ration du lien...","error":{"generic":"Une erreur est survenue lors de la cr\xe9ation du lien de partage de l\'album, merci de r\xe9essayer","revoke":"Une erreur est survenue lors de la r\xe9vocation du lien de partage de l\'album, merci de r\xe9essayer"}}},"Organizations":{"share":{"cta":"Partager","title":"Partager \xab %{name} \xbb","details":{"title":"D\xe9tails du partage","createdAt":"Depuis le %{date}","ro":"Peut consulter","rw":"Peut modifier","desc":{"ro":"Vous pouvez consulter, t\xe9l\xe9charger, et ajouter ce contenu \xe0 votre Cozy. Vous recevrez les modifications faites par le propri\xe9taire, mais vous ne pourrez pas le modifier.","rw":"Vous pouvez consulter, modifier et supprimer du contenu. Les modifications sur le contenu seront r\xe9percut\xe9es automatiquement entre vos Cozy."}},"sharedByMe":"Partag\xe9","shared":"Partag\xe9","sharedWithMe":"Partag\xe9 avec moi","sharedBy":"Partag\xe9 par %{name}","shareByLink":{"create":"G\xe9n\xe9rer un lien","send":"Envoyer le lien","copy":"Copier le lien","copied":"Lien copi\xe9 dans le presse-papiers.","failed":"Impossible de copier dans le presse papier","permserror":"Une erreur est survenue lors du changement de permissions du lien, merci de r\xe9essayer.","shareDescription":"Voici le lien de partage du document %{name} :"},"shareByEmail":{"subtitle":"Par email","email":"Envoyer \xe0 :","emailPlaceholder":"Saisissez le courriel ou le nom du destinataire.","send":"Envoyer","singleContactSuccess":"Vous avez envoy\xe9 une invitation \xe0 %{email}.","contactSuccess":"Vous avez invit\xe9 %{smart_count} contact. |||| Vous avez invit\xe9 %{smart_count} contacts.","singleGroupSuccess":"Vous avez invit\xe9 les membres du groupe %{groupName}.","groupSuccess":"Vous avez invit\xe9 les membres de %{smart_count} groupe. |||| Vous avez invit\xe9 les membres de %{smart_count} groupes.","contactAndGroupSuccess":"Vous avez invit\xe9 %{nbContact} contacts et les membres de %{nbGroup} groupes.","comingsoon":"Bient\xf4t disponible ! Vous pourrez partager un document et vos photos en un seul clic avec votre famille, vos amis, et m\xeame vos collaborateurs. Ne vous inqui\xe9tez pas, on vous pr\xe9vient quand ce sera pr\xeat !","onlyByLink":"Ce %{type} ne peut \xeatre partag\xe9 que sous la forme d\'un lien, car il","type":{"file":"fichier","folder":"dossier"},"hasSharedParent":"se trouve dans un dossier partag\xe9.","hasSharedChild":"contient un \xe9l\xe9ment partag\xe9."},"sharingLink":{"title":"Partager","copy":"Copier","copied":"Copi\xe9"},"protectedShare":{"title":"Prochainement !","desc":"Partagez ce que vous souhaitez par email avec votre famille et vos amis !"},"close":"Fermer","gettingLink":"Cr\xe9ation du lien…","error":{"generic":"Une erreur est survenue lors de la cr\xe9ation du lien de partage, merci de r\xe9essayer","revoke":"Oups, une erreur est survenue. Contactez-nous pour que nous r\xe9solvions la situation au plus vite.\\n"},"specialCase":{"base":"Ce %{type} ne peut \xeatre partag\xe9 que sous la forme d\'un lien, car il","isInSharedFolder":"se trouve dans un dossier partag\xe9.","hasSharedFolder":"contient un dossier partag\xe9."}},"fingerprint":{"instruction":"Par s\xe9curit\xe9, nous vous proposons de v\xe9rifier l\'identit\xe9 de **%{userName} (%{userEmail})**. Pour cela, contactez **%{userName}** par le moyen de votre choix (Appel, SMS, messagerie instantan\xe9e, ...) afin de v\xe9rifier son code de s\xe9curit\xe9.<br><br>Chaque Cozy a une phrase de s\xe9curit\xe9 qu\'il peut retrouver dans son interface web. Sa phrase de s\xe9curit\xe9 doit correspondre \xe0\xa0:","instruction2":"Si c\'est bien le cas, vous pouvez confirmer ce contact qui sera alors vu comme s\xe9curis\xe9 pour vos prochains partages."}},"ConfirmRecipientModal":{"title":"%{smart_count} contact en attente de v\xe9rification |||| %{smart_count} contacts en attente de v\xe9rification","intruction":"V\xe9rifier l\'identit\xe9 de leur Cozy pour leur permettre d\'acc\xe9der aux \xe9l\xe9ments que vous avez partag\xe9s avec eux."},"ShareRecipientsLimitModal":{"title":"Probl\xe8me au niveau de votre partage","content":"Vous ne pouvez pas partager %{documentName} \xe0 plus de %{limit} membres.","confirm":"J\'ai compris"},"RevokeMemberItem":{"revoke":{"title":"Arr\xeater le partage","desc":"Votre contact conservera une copie mais vos changements ne seront plus synchronis\xe9s."},"revokeSelf":{"title":"Arr\xeater le partage","desc":"Vous conservez le contenu mais il ne sera plus mis \xe0 jour entre vos Cozy."}},"GroupRecipient":{"secondary":"%{memberCount} membre |||| %{memberCount} membres","secondary_you":"dont vous"},"RevokeGroupItem":{"revoke":{"title":"Arr\xeater le partage pour le groupe","desc":"Les membres du groupe conserveront une copie mais vos changements ne seront plus synchronis\xe9s"},"revokeSelf":{"title":"Quitter le partage","desc":"Vous conserverez une copie mais vos changements ne seront plus synchronis\xe9s."}},"GroupRecipientDetail":{"subtitle":"G\xe9r\xe9 par %{ownerName}","empty":{"content":"Votre groupe de contacts est vide ! Ajoutez rapidement des membres pour commencer \xe0 leur partager vos pr\xe9cieux documents !","action":"Ouvrir Contacts"},"withAccess":{"title":"Acc\xe8s \xe0 l’\xe9l\xe9ment"},"withoutAccess":{"title":"Aucun acc\xe8s","status":{"mail-not-sent":"Echec de l’invitation","revoked":"Partage r\xe9voqu\xe9"},"addEmail":"Renseigner un email pour pouvoir inviter le contact"}},"ShareRestrictionModal":{"title":"Lien de partage","action":{"confirm":"Valider"},"invalidPasswordMessage":"Il manque %{smart_count} caract\xe8re |||| Il manque %{smart_count} caract\xe8res"},"BoxDate":{"label":"Date limite","text":"Restreindre l\'acc\xe8s apr\xe8s une date limite"},"BoxPassword":{"label":"Mot de passe","text":"Limiter l\'acc\xe8s par un mot de passe"},"BoxEditingRights":{"editSubText":"Les personnes ayant acc\xe8s au lien peuvent modifier le contenu","readOnlySubText":"Les personnes ayant acc\xe8s au lien peuvent uniquement consulter le contenu","text":"Droit d’\xe9dition"},"copyReminderContent":{"success":"Copi\xe9 dans le presse-papier","error":"Impossible de copier dans le presse-papier"},"shareFile":{"error":"Probl\xe8me avec la r\xe9cup\xe9ration du lien\xa0: %{error}","text":"Voici un lien vers mon document %{name}\xa0: |||| Voici un lien contenant mes documents %{name}\xa0: ","title":"Lien vers mon document %{name} |||| Lien vers mes documents %{name}"}}')}}]);