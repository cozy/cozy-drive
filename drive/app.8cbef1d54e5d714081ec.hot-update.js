webpackHotUpdate("app",{

/***/ "./src/drive/lib/encryption.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isEncryptedFileOrFolder\", function() { return isEncryptedFileOrFolder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isEncryptedFolder\", function() { return isEncryptedFolder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getEncryptiondRef\", function() { return getEncryptiondRef; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isEncryptedFile\", function() { return isEncryptedFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getEncryptionKeyFromDirId\", function() { return getEncryptionKeyFromDirId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createEncryptedDir\", function() { return createEncryptedDir; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"encryptAndUploadNewFile\", function() { return encryptAndUploadNewFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"encryptAndUploadExistingFile\", function() { return encryptAndUploadExistingFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"decryptAndUploadExistingFile\", function() { return decryptAndUploadExistingFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"reencryptAndUploadExistingFile\", function() { return reencryptAndUploadExistingFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"decryptFileIntoBlob\", function() { return decryptFileIntoBlob; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"downloadEncryptedFile\", function() { return downloadEncryptedFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getDecryptedFileURL\", function() { return getDecryptedFileURL; });\n/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/objectSpread.js\");\n/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./node_modules/lodash/get.js\");\n/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var cozy_flags__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./node_modules/cozy-flags/dist/index.browser.js\");\n/* harmony import */ var cozy_flags__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(cozy_flags__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./src/drive/lib/doctypes.js\");\n/* harmony import */ var drive_web_modules_queries__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./src/drive/web/modules/queries.js\");\n/* harmony import */ var cozy_client__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./node_modules/cozy-client/dist/index.js\");\n/* harmony import */ var cozy_client__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\nvar isEncrypted = cozy_client__WEBPACK_IMPORTED_MODULE_7__[\"models\"].file.isEncrypted;\nvar isEncryptedFileOrFolder = function isEncryptedFileOrFolder(fileOrdir) {\n  return isEncryptedFolder(fileOrdir) || isEncryptedFile(fileOrdir);\n};\nvar isEncryptedFolder = function isEncryptedFolder(dir) {\n  return !!getEncryptiondRef(dir);\n};\nvar getEncryptiondRef = function getEncryptiondRef(dir) {\n  var refs = lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(dir, 'referenced_by', []);\n  return refs.find(function (ref) {\n    return ref.type === drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_5__[\"DOCTYPE_FILES_ENCRYPTION\"];\n  });\n};\nvar isEncryptedFile = function isEncryptedFile(file) {\n  return isEncrypted(file);\n};\nvar getEncryptionKeyFromDirId = /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(client, dirId) {\n    var docId, query, res;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (cozy_flags__WEBPACK_IMPORTED_MODULE_4___default()('drive.enable-encryption')) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", null);\n\n          case 2:\n            docId = \"\".concat(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_5__[\"DOCTYPE_FILES\"], \"/\").concat(dirId);\n            query = Object(drive_web_modules_queries__WEBPACK_IMPORTED_MODULE_6__[\"buildEncryptionByIdQuery\"])(docId);\n            _context.next = 6;\n            return client.query(query.definition, {\n              options: query.options\n            });\n\n          case 6:\n            res = _context.sent;\n            return _context.abrupt(\"return\", res && res.data ? res.data.key : null);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getEncryptionKeyFromDirId(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar createEncryptedDir = /*#__PURE__*/function () {\n  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2(client, vaultClient, _ref2) {\n    var name, dirID, _yield$client$create, dir, docId, key, _yield$client$create2, encryption, hydratedDir;\n\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            name = _ref2.name, dirID = _ref2.dirID;\n            _context2.next = 3;\n            return client.create(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_5__[\"DOCTYPE_FILES\"], {\n              name: name,\n              dirId: dirID,\n              type: 'directory'\n            });\n\n          case 3:\n            _yield$client$create = _context2.sent;\n            dir = _yield$client$create.data;\n            // Create the encryption key\n            docId = \"\".concat(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_5__[\"DOCTYPE_FILES\"], \"/\").concat(dir._id);\n            _context2.next = 8;\n            return vaultClient.generateEncryptionKey();\n\n          case 8:\n            key = _context2.sent;\n            _context2.next = 11;\n            return client.create(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_5__[\"DOCTYPE_FILES_ENCRYPTION\"], {\n              _id: docId,\n              key: key.encryptedKey.encryptedString\n            });\n\n          case 11:\n            _yield$client$create2 = _context2.sent;\n            encryption = _yield$client$create2.data;\n            // Add the relationship\n            hydratedDir = client.hydrateDocument(dir);\n            return _context2.abrupt(\"return\", hydratedDir.encryption.addById(encryption._id));\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function createEncryptedDir(_x3, _x4, _x5) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar encryptAndUploadNewFile = /*#__PURE__*/function () {\n  var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee3(client, vaultClient, _ref4) {\n    var binary, encryptionKey, fileOptions, name, dirID, onUploadProgress, encryptedFile, resp;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            binary = _ref4.binary, encryptionKey = _ref4.encryptionKey, fileOptions = _ref4.fileOptions;\n            name = fileOptions.name, dirID = fileOptions.dirID, onUploadProgress = fileOptions.onUploadProgress;\n            _context3.next = 4;\n            return vaultClient.encryptFile(binary, encryptionKey);\n\n          case 4:\n            encryptedFile = _context3.sent;\n            _context3.next = 7;\n            return client.collection(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_5__[\"DOCTYPE_FILES\"]).createFile(encryptedFile, {\n              name: name,\n              dirId: dirID,\n              onUploadProgress: onUploadProgress,\n              encrypted: true\n            });\n\n          case 7:\n            resp = _context3.sent;\n            return _context3.abrupt(\"return\", resp.data);\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function encryptAndUploadNewFile(_x6, _x7, _x8) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar encryptAndUploadExistingFile = /*#__PURE__*/function () {\n  var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee4(client, vaultClient, _ref6) {\n    var file, encryptionKey, encryptedFile, attributes, resp;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            file = _ref6.file, encryptionKey = _ref6.encryptionKey;\n            _context4.next = 3;\n            return encryptFile(client, vaultClient, {\n              file: file,\n              encryptionKey: encryptionKey\n            });\n\n          case 3:\n            encryptedFile = _context4.sent;\n            attributes = _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default()({}, file, {\n              encrypted: true,\n              fileId: file._id,\n              data: encryptedFile\n            });\n            _context4.next = 7;\n            return client.save(attributes);\n\n          case 7:\n            resp = _context4.sent;\n            return _context4.abrupt(\"return\", resp.data);\n\n          case 9:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function encryptAndUploadExistingFile(_x9, _x10, _x11) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nvar decryptAndUploadExistingFile = /*#__PURE__*/function () {\n  var _ref9 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee5(client, vaultClient, _ref8) {\n    var file, decryptionKey, plaintextFile, attributes, resp;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            file = _ref8.file, decryptionKey = _ref8.decryptionKey;\n            _context5.next = 3;\n            return decryptFile(client, vaultClient, {\n              file: file,\n              decryptionKey: decryptionKey\n            });\n\n          case 3:\n            plaintextFile = _context5.sent;\n            attributes = _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default()({}, file, {\n              encrypted: false,\n              fileId: file._id,\n              data: plaintextFile\n            });\n            _context5.next = 7;\n            return client.save(attributes);\n\n          case 7:\n            resp = _context5.sent;\n            return _context5.abrupt(\"return\", resp.data);\n\n          case 9:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function decryptAndUploadExistingFile(_x12, _x13, _x14) {\n    return _ref9.apply(this, arguments);\n  };\n}();\nvar reencryptAndUploadExistingFile = /*#__PURE__*/function () {\n  var _ref11 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee6(client, vaultClient, _ref10) {\n    var file, encryptionKey, decryptionKey, plaintextFile, reencryptedFile, attributes, resp;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            file = _ref10.file, encryptionKey = _ref10.encryptionKey, decryptionKey = _ref10.decryptionKey;\n            _context6.next = 3;\n            return decryptFile(client, vaultClient, {\n              file: file,\n              decryptionKey: decryptionKey\n            });\n\n          case 3:\n            plaintextFile = _context6.sent;\n            _context6.next = 6;\n            return vaultClient.encryptFile(plaintextFile, encryptionKey);\n\n          case 6:\n            reencryptedFile = _context6.sent;\n            attributes = _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default()({}, file, {\n              encrypted: true,\n              fileId: file._id,\n              data: reencryptedFile\n            });\n            _context6.next = 10;\n            return client.save(attributes);\n\n          case 10:\n            resp = _context6.sent;\n            return _context6.abrupt(\"return\", resp.data);\n\n          case 12:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function reencryptAndUploadExistingFile(_x15, _x16, _x17) {\n    return _ref11.apply(this, arguments);\n  };\n}();\n\nvar getBinaryFile = /*#__PURE__*/function () {\n  var _ref12 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee7(client, fileId) {\n    var resp;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return client.collection(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_5__[\"DOCTYPE_FILES\"]).fetchFileContentById(fileId);\n\n          case 2:\n            resp = _context7.sent;\n            return _context7.abrupt(\"return\", resp.arrayBuffer());\n\n          case 4:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function getBinaryFile(_x18, _x19) {\n    return _ref12.apply(this, arguments);\n  };\n}();\n\nvar decryptFile = /*#__PURE__*/function () {\n  var _ref14 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee8(client, vaultClient, _ref13) {\n    var file, decryptionKey, cipher;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            file = _ref13.file, decryptionKey = _ref13.decryptionKey;\n            _context8.next = 3;\n            return getBinaryFile(client, file._id);\n\n          case 3:\n            cipher = _context8.sent;\n            return _context8.abrupt(\"return\", vaultClient.decryptFile(cipher, decryptionKey));\n\n          case 5:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n\n  return function decryptFile(_x20, _x21, _x22) {\n    return _ref14.apply(this, arguments);\n  };\n}();\n\nvar encryptFile = /*#__PURE__*/function () {\n  var _ref16 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee9(client, vaultClient, _ref15) {\n    var file, encryptionKey, cipher;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            file = _ref15.file, encryptionKey = _ref15.encryptionKey;\n            _context9.next = 3;\n            return getBinaryFile(client, file._id);\n\n          case 3:\n            cipher = _context9.sent;\n            return _context9.abrupt(\"return\", vaultClient.encryptFile(cipher, encryptionKey));\n\n          case 5:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n\n  return function encryptFile(_x23, _x24, _x25) {\n    return _ref16.apply(this, arguments);\n  };\n}();\n\nvar decryptFileIntoBlob = /*#__PURE__*/function () {\n  var _ref18 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee10(client, vaultClient, _ref17) {\n    var file, decryptionKey, plaintextFile;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            file = _ref17.file, decryptionKey = _ref17.decryptionKey;\n            plaintextFile = decryptFile(client, vaultClient, {\n              file: file,\n              decryptionKey: decryptionKey\n            });\n            return _context10.abrupt(\"return\", new Blob([plaintextFile], {\n              type: file.type\n            }));\n\n          case 3:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10);\n  }));\n\n  return function decryptFileIntoBlob(_x26, _x27, _x28) {\n    return _ref18.apply(this, arguments);\n  };\n}();\nvar downloadEncryptedFile = /*#__PURE__*/function () {\n  var _ref20 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee11(client, vaultClient, _ref19) {\n    var file, decryptionKey, url;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            file = _ref19.file, decryptionKey = _ref19.decryptionKey;\n            _context11.next = 3;\n            return getDecryptedFileURL(client, vaultClient, {\n              file: file,\n              decryptionKey: decryptionKey\n            });\n\n          case 3:\n            url = _context11.sent;\n            return _context11.abrupt(\"return\", client.collection(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_5__[\"DOCTYPE_FILES\"]).forceFileDownload(url, file.name));\n\n          case 5:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11);\n  }));\n\n  return function downloadEncryptedFile(_x29, _x30, _x31) {\n    return _ref20.apply(this, arguments);\n  };\n}();\nvar getDecryptedFileURL = /*#__PURE__*/function () {\n  var _ref22 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee12(client, vaultClient, _ref21) {\n    var file, decryptionKey, plaintextFile, blob;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee12$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            file = _ref21.file, decryptionKey = _ref21.decryptionKey;\n            _context12.next = 3;\n            return decryptFile(client, vaultClient, {\n              file: file,\n              decryptionKey: decryptionKey\n            });\n\n          case 3:\n            plaintextFile = _context12.sent;\n            blob = new Blob([plaintextFile], {\n              type: file.type\n            });\n            return _context12.abrupt(\"return\", URL.createObjectURL(blob));\n\n          case 6:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, _callee12);\n  }));\n\n  return function getDecryptedFileURL(_x32, _x33, _x34) {\n    return _ref22.apply(this, arguments);\n  };\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZHJpdmUvbGliL2VuY3J5cHRpb24uanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZHJpdmUvbGliL2VuY3J5cHRpb24uanM/MWY5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ2V0IGZyb20gJ2xvZGFzaC9nZXQnXG5pbXBvcnQgZmxhZyBmcm9tICdjb3p5LWZsYWdzJ1xuaW1wb3J0IHsgRE9DVFlQRV9GSUxFUywgRE9DVFlQRV9GSUxFU19FTkNSWVBUSU9OIH0gZnJvbSAnZHJpdmUvbGliL2RvY3R5cGVzJ1xuaW1wb3J0IHsgYnVpbGRFbmNyeXB0aW9uQnlJZFF1ZXJ5IH0gZnJvbSAnZHJpdmUvd2ViL21vZHVsZXMvcXVlcmllcydcbmltcG9ydCB7IG1vZGVscyB9IGZyb20gJ2NvenktY2xpZW50J1xuY29uc3QgeyBpc0VuY3J5cHRlZCB9ID0gbW9kZWxzLmZpbGVcblxuZXhwb3J0IGNvbnN0IGlzRW5jcnlwdGVkRmlsZU9yRm9sZGVyID0gZmlsZU9yZGlyID0+IHtcbiAgcmV0dXJuIGlzRW5jcnlwdGVkRm9sZGVyKGZpbGVPcmRpcikgfHwgaXNFbmNyeXB0ZWRGaWxlKGZpbGVPcmRpcilcbn1cblxuZXhwb3J0IGNvbnN0IGlzRW5jcnlwdGVkRm9sZGVyID0gZGlyID0+IHtcbiAgcmV0dXJuICEhZ2V0RW5jcnlwdGlvbmRSZWYoZGlyKVxufVxuXG5leHBvcnQgY29uc3QgZ2V0RW5jcnlwdGlvbmRSZWYgPSBkaXIgPT4ge1xuICBjb25zdCByZWZzID0gZ2V0KGRpciwgJ3JlZmVyZW5jZWRfYnknLCBbXSlcbiAgcmV0dXJuIHJlZnMuZmluZChyZWYgPT4gcmVmLnR5cGUgPT09IERPQ1RZUEVfRklMRVNfRU5DUllQVElPTilcbn1cblxuZXhwb3J0IGNvbnN0IGlzRW5jcnlwdGVkRmlsZSA9IGZpbGUgPT4ge1xuICByZXR1cm4gaXNFbmNyeXB0ZWQoZmlsZSlcbn1cblxuZXhwb3J0IGNvbnN0IGdldEVuY3J5cHRpb25LZXlGcm9tRGlySWQgPSBhc3luYyAoY2xpZW50LCBkaXJJZCkgPT4ge1xuICBpZiAoIWZsYWcoJ2RyaXZlLmVuYWJsZS1lbmNyeXB0aW9uJykpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGNvbnN0IGRvY0lkID0gYCR7RE9DVFlQRV9GSUxFU30vJHtkaXJJZH1gXG4gIGNvbnN0IHF1ZXJ5ID0gYnVpbGRFbmNyeXB0aW9uQnlJZFF1ZXJ5KGRvY0lkKVxuICBjb25zdCByZXMgPSBhd2FpdCBjbGllbnQucXVlcnkocXVlcnkuZGVmaW5pdGlvbiwgeyBvcHRpb25zOiBxdWVyeS5vcHRpb25zIH0pXG4gIHJldHVybiByZXMgJiYgcmVzLmRhdGEgPyByZXMuZGF0YS5rZXkgOiBudWxsXG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVFbmNyeXB0ZWREaXIgPSBhc3luYyAoXG4gIGNsaWVudCxcbiAgdmF1bHRDbGllbnQsXG4gIHsgbmFtZSwgZGlySUQgfVxuKSA9PiB7XG4gIC8vIENyZWF0ZSB0aGUgZGlyZWN0b3J5XG4gIGNvbnN0IHsgZGF0YTogZGlyIH0gPSBhd2FpdCBjbGllbnQuY3JlYXRlKERPQ1RZUEVfRklMRVMsIHtcbiAgICBuYW1lLFxuICAgIGRpcklkOiBkaXJJRCxcbiAgICB0eXBlOiAnZGlyZWN0b3J5J1xuICB9KVxuXG4gIC8vIENyZWF0ZSB0aGUgZW5jcnlwdGlvbiBrZXlcbiAgY29uc3QgZG9jSWQgPSBgJHtET0NUWVBFX0ZJTEVTfS8ke2Rpci5faWR9YFxuICBjb25zdCBrZXkgPSBhd2FpdCB2YXVsdENsaWVudC5nZW5lcmF0ZUVuY3J5cHRpb25LZXkoKVxuICBjb25zdCB7IGRhdGE6IGVuY3J5cHRpb24gfSA9IGF3YWl0IGNsaWVudC5jcmVhdGUoRE9DVFlQRV9GSUxFU19FTkNSWVBUSU9OLCB7XG4gICAgX2lkOiBkb2NJZCxcbiAgICBrZXk6IGtleS5lbmNyeXB0ZWRLZXkuZW5jcnlwdGVkU3RyaW5nXG4gIH0pXG5cbiAgLy8gQWRkIHRoZSByZWxhdGlvbnNoaXBcbiAgY29uc3QgaHlkcmF0ZWREaXIgPSBjbGllbnQuaHlkcmF0ZURvY3VtZW50KGRpcilcbiAgcmV0dXJuIGh5ZHJhdGVkRGlyLmVuY3J5cHRpb24uYWRkQnlJZChlbmNyeXB0aW9uLl9pZClcbn1cblxuZXhwb3J0IGNvbnN0IGVuY3J5cHRBbmRVcGxvYWROZXdGaWxlID0gYXN5bmMgKFxuICBjbGllbnQsXG4gIHZhdWx0Q2xpZW50LFxuICB7IGJpbmFyeSwgZW5jcnlwdGlvbktleSwgZmlsZU9wdGlvbnMgfVxuKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgZGlySUQsIG9uVXBsb2FkUHJvZ3Jlc3MgfSA9IGZpbGVPcHRpb25zXG4gIGNvbnN0IGVuY3J5cHRlZEZpbGUgPSBhd2FpdCB2YXVsdENsaWVudC5lbmNyeXB0RmlsZShiaW5hcnksIGVuY3J5cHRpb25LZXkpXG4gIGNvbnN0IHJlc3AgPSBhd2FpdCBjbGllbnRcbiAgICAuY29sbGVjdGlvbihET0NUWVBFX0ZJTEVTKVxuICAgIC5jcmVhdGVGaWxlKGVuY3J5cHRlZEZpbGUsIHtcbiAgICAgIG5hbWUsXG4gICAgICBkaXJJZDogZGlySUQsXG4gICAgICBvblVwbG9hZFByb2dyZXNzLFxuICAgICAgZW5jcnlwdGVkOiB0cnVlXG4gICAgfSlcbiAgcmV0dXJuIHJlc3AuZGF0YVxufVxuXG5leHBvcnQgY29uc3QgZW5jcnlwdEFuZFVwbG9hZEV4aXN0aW5nRmlsZSA9IGFzeW5jIChcbiAgY2xpZW50LFxuICB2YXVsdENsaWVudCxcbiAgeyBmaWxlLCBlbmNyeXB0aW9uS2V5IH1cbikgPT4ge1xuICBjb25zdCBlbmNyeXB0ZWRGaWxlID0gYXdhaXQgZW5jcnlwdEZpbGUoY2xpZW50LCB2YXVsdENsaWVudCwge1xuICAgIGZpbGUsXG4gICAgZW5jcnlwdGlvbktleVxuICB9KVxuXG4gIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgLi4uZmlsZSxcbiAgICBlbmNyeXB0ZWQ6IHRydWUsXG4gICAgZmlsZUlkOiBmaWxlLl9pZCxcbiAgICBkYXRhOiBlbmNyeXB0ZWRGaWxlXG4gIH1cbiAgY29uc3QgcmVzcCA9IGF3YWl0IGNsaWVudC5zYXZlKGF0dHJpYnV0ZXMpXG4gIHJldHVybiByZXNwLmRhdGFcbn1cblxuZXhwb3J0IGNvbnN0IGRlY3J5cHRBbmRVcGxvYWRFeGlzdGluZ0ZpbGUgPSBhc3luYyAoXG4gIGNsaWVudCxcbiAgdmF1bHRDbGllbnQsXG4gIHsgZmlsZSwgZGVjcnlwdGlvbktleSB9XG4pID0+IHtcbiAgY29uc3QgcGxhaW50ZXh0RmlsZSA9IGF3YWl0IGRlY3J5cHRGaWxlKGNsaWVudCwgdmF1bHRDbGllbnQsIHtcbiAgICBmaWxlLFxuICAgIGRlY3J5cHRpb25LZXlcbiAgfSlcblxuICBjb25zdCBhdHRyaWJ1dGVzID0ge1xuICAgIC4uLmZpbGUsXG4gICAgZW5jcnlwdGVkOiBmYWxzZSxcbiAgICBmaWxlSWQ6IGZpbGUuX2lkLFxuICAgIGRhdGE6IHBsYWludGV4dEZpbGVcbiAgfVxuICBjb25zdCByZXNwID0gYXdhaXQgY2xpZW50LnNhdmUoYXR0cmlidXRlcylcbiAgcmV0dXJuIHJlc3AuZGF0YVxufVxuXG5leHBvcnQgY29uc3QgcmVlbmNyeXB0QW5kVXBsb2FkRXhpc3RpbmdGaWxlID0gYXN5bmMgKFxuICBjbGllbnQsXG4gIHZhdWx0Q2xpZW50LFxuICB7IGZpbGUsIGVuY3J5cHRpb25LZXksIGRlY3J5cHRpb25LZXkgfVxuKSA9PiB7XG4gIGNvbnN0IHBsYWludGV4dEZpbGUgPSBhd2FpdCBkZWNyeXB0RmlsZShjbGllbnQsIHZhdWx0Q2xpZW50LCB7XG4gICAgZmlsZSxcbiAgICBkZWNyeXB0aW9uS2V5XG4gIH0pXG4gIGNvbnN0IHJlZW5jcnlwdGVkRmlsZSA9IGF3YWl0IHZhdWx0Q2xpZW50LmVuY3J5cHRGaWxlKFxuICAgIHBsYWludGV4dEZpbGUsXG4gICAgZW5jcnlwdGlvbktleVxuICApXG4gIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgLi4uZmlsZSxcbiAgICBlbmNyeXB0ZWQ6IHRydWUsXG4gICAgZmlsZUlkOiBmaWxlLl9pZCxcbiAgICBkYXRhOiByZWVuY3J5cHRlZEZpbGVcbiAgfVxuICBjb25zdCByZXNwID0gYXdhaXQgY2xpZW50LnNhdmUoYXR0cmlidXRlcylcbiAgcmV0dXJuIHJlc3AuZGF0YVxufVxuXG5jb25zdCBnZXRCaW5hcnlGaWxlID0gYXN5bmMgKGNsaWVudCwgZmlsZUlkKSA9PiB7XG4gIGNvbnN0IHJlc3AgPSBhd2FpdCBjbGllbnRcbiAgICAuY29sbGVjdGlvbihET0NUWVBFX0ZJTEVTKVxuICAgIC5mZXRjaEZpbGVDb250ZW50QnlJZChmaWxlSWQpXG4gIHJldHVybiByZXNwLmFycmF5QnVmZmVyKClcbn1cblxuY29uc3QgZGVjcnlwdEZpbGUgPSBhc3luYyAoY2xpZW50LCB2YXVsdENsaWVudCwgeyBmaWxlLCBkZWNyeXB0aW9uS2V5IH0pID0+IHtcbiAgY29uc3QgY2lwaGVyID0gYXdhaXQgZ2V0QmluYXJ5RmlsZShjbGllbnQsIGZpbGUuX2lkKVxuICByZXR1cm4gdmF1bHRDbGllbnQuZGVjcnlwdEZpbGUoY2lwaGVyLCBkZWNyeXB0aW9uS2V5KVxufVxuXG5jb25zdCBlbmNyeXB0RmlsZSA9IGFzeW5jIChjbGllbnQsIHZhdWx0Q2xpZW50LCB7IGZpbGUsIGVuY3J5cHRpb25LZXkgfSkgPT4ge1xuICBjb25zdCBjaXBoZXIgPSBhd2FpdCBnZXRCaW5hcnlGaWxlKGNsaWVudCwgZmlsZS5faWQpXG4gIHJldHVybiB2YXVsdENsaWVudC5lbmNyeXB0RmlsZShjaXBoZXIsIGVuY3J5cHRpb25LZXkpXG59XG5cbmV4cG9ydCBjb25zdCBkZWNyeXB0RmlsZUludG9CbG9iID0gYXN5bmMgKFxuICBjbGllbnQsXG4gIHZhdWx0Q2xpZW50LFxuICB7IGZpbGUsIGRlY3J5cHRpb25LZXkgfVxuKSA9PiB7XG4gIGNvbnN0IHBsYWludGV4dEZpbGUgPSBkZWNyeXB0RmlsZShjbGllbnQsIHZhdWx0Q2xpZW50LCB7XG4gICAgZmlsZSxcbiAgICBkZWNyeXB0aW9uS2V5XG4gIH0pXG4gIHJldHVybiBuZXcgQmxvYihbcGxhaW50ZXh0RmlsZV0sIHsgdHlwZTogZmlsZS50eXBlIH0pXG59XG5cbmV4cG9ydCBjb25zdCBkb3dubG9hZEVuY3J5cHRlZEZpbGUgPSBhc3luYyAoXG4gIGNsaWVudCxcbiAgdmF1bHRDbGllbnQsXG4gIHsgZmlsZSwgZGVjcnlwdGlvbktleSB9XG4pID0+IHtcbiAgY29uc3QgdXJsID0gYXdhaXQgZ2V0RGVjcnlwdGVkRmlsZVVSTChjbGllbnQsIHZhdWx0Q2xpZW50LCB7XG4gICAgZmlsZSxcbiAgICBkZWNyeXB0aW9uS2V5XG4gIH0pXG4gIHJldHVybiBjbGllbnQuY29sbGVjdGlvbihET0NUWVBFX0ZJTEVTKS5mb3JjZUZpbGVEb3dubG9hZCh1cmwsIGZpbGUubmFtZSlcbn1cblxuZXhwb3J0IGNvbnN0IGdldERlY3J5cHRlZEZpbGVVUkwgPSBhc3luYyAoXG4gIGNsaWVudCxcbiAgdmF1bHRDbGllbnQsXG4gIHsgZmlsZSwgZGVjcnlwdGlvbktleSB9XG4pID0+IHtcbiAgY29uc3QgcGxhaW50ZXh0RmlsZSA9IGF3YWl0IGRlY3J5cHRGaWxlKGNsaWVudCwgdmF1bHRDbGllbnQsIHtcbiAgICBmaWxlLFxuICAgIGRlY3J5cHRpb25LZXlcbiAgfSlcbiAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtwbGFpbnRleHRGaWxlXSwgeyB0eXBlOiBmaWxlLnR5cGUgfSlcblxuICByZXR1cm4gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUxBO0FBQUE7QUFNQTtBQUFBO0FBQ0E7QUFQQTtBQU1BO0FBTkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUhBO0FBQUE7QUFPQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBUEE7QUFBQTtBQU1BO0FBTUE7QUFDQTtBQWJBO0FBQUE7QUFDQTtBQURBO0FBY0E7QUFkQTtBQUFBO0FBZ0JBO0FBQ0E7QUFGQTtBQUNBO0FBaEJBO0FBQUE7QUFlQTtBQUtBO0FBQ0E7QUFyQkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQXlCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFMQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBTkE7QUFBQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQVZBO0FBT0E7QUFQQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBa0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFIQTtBQUFBO0FBTUE7QUFDQTtBQUZBO0FBQ0E7QUFOQTtBQUtBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFkQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBZ0JBO0FBaEJBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFvQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUhBO0FBQUE7QUFNQTtBQUNBO0FBRkE7QUFDQTtBQU5BO0FBS0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQWRBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFnQkE7QUFoQkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQW9CQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBSEE7QUFBQTtBQU1BO0FBQ0E7QUFGQTtBQUNBO0FBTkE7QUFLQTtBQUxBO0FBQUE7QUFDQTtBQURBO0FBU0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQWpCQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBbUJBO0FBbkJBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXNCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFTQTtBQUFBO0FBQ0E7QUFWQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFZQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBSEE7QUFBQTtBQU1BO0FBQ0E7QUFGQTtBQUNBO0FBTkE7QUFLQTtBQUxBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFZQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBSEE7QUFBQTtBQU1BO0FBQ0E7QUFGQTtBQUNBO0FBTkE7QUFLQTtBQUlBO0FBQUE7QUFBQTtBQVRBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/drive/lib/encryption.js\n");

/***/ })

})