webpackHotUpdate("app",{

/***/ "./src/drive/web/modules/move/MoveModal.jsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MoveModal\", function() { return MoveModal; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var redux__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./node_modules/redux/es/index.js\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./node_modules/react-redux/lib/index.js\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"./node_modules/@material-ui/core/esm/styles/index.js\");\n/* harmony import */ var cozy_client__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"./node_modules/cozy-client/dist/index.js\");\n/* harmony import */ var cozy_client__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var models__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"./src/models/index.js\");\n/* harmony import */ var cozy_keys_lib__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"./node_modules/cozy-keys-lib/transpiled/index.js\");\n/* harmony import */ var lib_logger__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"./src/lib/logger.js\");\n/* harmony import */ var cozy_sharing__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(\"./node_modules/cozy-sharing/dist/index.js\");\n/* harmony import */ var cozy_sharing_dist_hoc_withSharingState__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(\"./node_modules/cozy-sharing/dist/hoc/withSharingState.js\");\n/* harmony import */ var cozy_ui_transpiled_react_CozyDialogs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(\"./node_modules/cozy-ui/transpiled/react/CozyDialogs/index.js\");\n/* harmony import */ var cozy_ui_transpiled_react_I18n__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(\"./node_modules/cozy-ui/transpiled/react/I18n/index.js\");\n/* harmony import */ var cozy_ui_transpiled_react_Alerter__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(\"./node_modules/cozy-ui/transpiled/react/Alerter/index.js\");\n/* harmony import */ var cozy_ui_transpiled_react_helpers_tracker__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(\"./node_modules/cozy-ui/transpiled/react/helpers/tracker.js\");\n/* harmony import */ var cozy_ui_transpiled_react__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(\"./node_modules/cozy-ui/transpiled/react/index.js\");\n/* harmony import */ var drive_web_modules_move_Header__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(\"./src/drive/web/modules/move/Header.jsx\");\n/* harmony import */ var drive_web_modules_move_Explorer__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(\"./src/drive/web/modules/move/Explorer.jsx\");\n/* harmony import */ var drive_web_modules_move_FileList__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(\"./src/drive/web/modules/move/FileList.jsx\");\n/* harmony import */ var drive_web_modules_move_Loader__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(\"./src/drive/web/modules/move/Loader.jsx\");\n/* harmony import */ var drive_web_modules_move_LoadMore__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(\"./src/drive/web/modules/move/LoadMore.jsx\");\n/* harmony import */ var drive_web_modules_move_Footer__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(\"./src/drive/web/modules/move/Footer.jsx\");\n/* harmony import */ var drive_web_modules_move_Topbar__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(\"./src/drive/web/modules/move/Topbar.jsx\");\n/* harmony import */ var drive_web_modules_selectors__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(\"./src/drive/web/modules/selectors.js\");\n/* harmony import */ var drive_web_modules_queries__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(\"./src/drive/web/modules/queries.js\");\n/* harmony import */ var drive_lib_encryption__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(\"./src/drive/lib/encryption.js\");\n\n\n\n\n\n\n\n\n\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar styles = function styles(theme) {\n  return {\n    paper: {\n      height: '100%',\n      '& .MuiDialogContent-root': {\n        padding: '0'\n      },\n      '& .MuiDialogTitle-root': _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()({\n        padding: '0'\n      }, theme.breakpoints.down('sm'), {\n        width: '100%',\n        overflow: 'visible',\n        // back button\n        '& .MuiButtonBase-root': {\n          display: 'none'\n        }\n      })\n    }\n  };\n};\n\nvar MoveModal = /*#__PURE__*/function (_React$Component) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(MoveModal, _React$Component);\n\n  var _super = _createSuper(MoveModal);\n\n  function MoveModal(props) {\n    var _this;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, MoveModal);\n\n    _this = _super.call(this, props);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), \"navigateTo\", function (folder) {\n      _this.setState({\n        targetFolder: folder\n      });\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), \"registerCancelable\", function (promise) {\n      if (!_this.promises) _this.promises = [];\n      var cancelableP = Object(cozy_client__WEBPACK_IMPORTED_MODULE_14__[\"cancelable\"])(promise);\n\n      _this.promises.push(cancelableP);\n\n      return cancelableP;\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), \"unregisterCancelables\", function () {\n      _this.promises.forEach(function (p) {\n        return p.cancel();\n      });\n\n      _this.promises = [];\n    });\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), \"moveEncryptedEntry\", /*#__PURE__*/function () {\n      var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(client, vaultClient, entry, _ref) {\n        var isEncryptedTarget, isEncryptedFileEntry, targetFolder, sourceFolder, encryptionKey, decryptionKey, _encryptionKey, _decryptionKey;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                isEncryptedTarget = _ref.isEncryptedTarget, isEncryptedFileEntry = _ref.isEncryptedFileEntry, targetFolder = _ref.targetFolder, sourceFolder = _ref.sourceFolder;\n                console.log('isEncryptedTarget : ', isEncryptedTarget);\n                console.log('isEncryptedFileEntry: ', isEncryptedFileEntry);\n\n                if (!(isEncryptedTarget && !isEncryptedFileEntry)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                _context.next = 6;\n                return Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_34__[\"getEncryptionKeyFromDirId\"])(client, targetFolder._id);\n\n              case 6:\n                encryptionKey = _context.sent;\n                _context.next = 9;\n                return Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_34__[\"encryptAndUploadExistingFile\"])(client, vaultClient, {\n                  file: entry,\n                  encryptionKey: encryptionKey\n                });\n\n              case 9:\n                _context.next = 28;\n                break;\n\n              case 11:\n                if (!(!isEncryptedTarget && isEncryptedFileEntry)) {\n                  _context.next = 19;\n                  break;\n                }\n\n                _context.next = 14;\n                return Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_34__[\"getEncryptionKeyFromDirId\"])(client, sourceFolder._id);\n\n              case 14:\n                decryptionKey = _context.sent;\n                _context.next = 17;\n                return Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_34__[\"decryptAndUploadExistingFile\"])(client, vaultClient, {\n                  file: entry,\n                  decryptionKey: decryptionKey\n                });\n\n              case 17:\n                _context.next = 28;\n                break;\n\n              case 19:\n                if (!(isEncryptedTarget && isEncryptedFileEntry)) {\n                  _context.next = 28;\n                  break;\n                }\n\n                _context.next = 22;\n                return Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_34__[\"getEncryptionKeyFromDirId\"])(client, targetFolder._id);\n\n              case 22:\n                _encryptionKey = _context.sent;\n                _context.next = 25;\n                return Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_34__[\"getEncryptionKeyFromDirId\"])(client, sourceFolder._id);\n\n              case 25:\n                _decryptionKey = _context.sent;\n                _context.next = 28;\n                return Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_34__[\"reencryptAndUploadExistingFile\"])(client, vaultClient, {\n                  file: entry,\n                  decryptionKey: _decryptionKey,\n                  encryptionKey: _encryptionKey\n                });\n\n              case 28:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2, _x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), \"moveEntry\", /*#__PURE__*/function () {\n      var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(entry, targetFolder, _ref3) {\n        var sharedPaths, isEncryptedTarget, client, vaultClient, displayedFolder, isEncryptedFileEntry, targetPath, force;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                sharedPaths = _ref3.sharedPaths, isEncryptedTarget = _ref3.isEncryptedTarget, client = _ref3.client, vaultClient = _ref3.vaultClient;\n                displayedFolder = _this.props.displayedFolder;\n                isEncryptedFileEntry = Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_34__[\"isEncryptedFile\"])(entry);\n\n                if (!(isEncryptedTarget || isEncryptedFileEntry)) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                console.log('lets move encrypted entry');\n                console.log('isEncryptedTarget', isEncryptedTarget);\n                console.log('isEncryptedFileEntry', isEncryptedFileEntry);\n                _context2.next = 9;\n                return _this.moveEncryptedEntry(client, vaultClient, entry, {\n                  isEncryptedTarget: isEncryptedTarget,\n                  isEncryptedFileEntry: isEncryptedFileEntry,\n                  targetFolder: targetFolder,\n                  sourceFolder: displayedFolder\n                });\n\n              case 9:\n                _context2.next = 11;\n                return models__WEBPACK_IMPORTED_MODULE_15__[\"CozyFile\"].getFullpath(targetFolder._id, entry.name);\n\n              case 11:\n                targetPath = _context2.sent;\n                console.log('targetpath : ', targetPath);\n                force = !sharedPaths.includes(targetPath);\n                return _context2.abrupt(\"return\", models__WEBPACK_IMPORTED_MODULE_15__[\"CozyFile\"].move(entry._id, {\n                  folderId: targetFolder._id\n                }, force));\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x5, _x6, _x7) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), \"moveEntries\", /*#__PURE__*/function () {\n      var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(callback) {\n        var _this$props, client, vaultClient, entries, onClose, sharingState, t, sharedPaths, targetFolder, isEncryptedTarget, trashedFiles, response, targetName;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this$props = _this.props, client = _this$props.client, vaultClient = _this$props.vaultClient, entries = _this$props.entries, onClose = _this$props.onClose, sharingState = _this$props.sharingState, t = _this$props.t;\n                sharedPaths = sharingState.sharedPaths;\n                targetFolder = _this.state.targetFolder;\n                _context4.prev = 3;\n\n                _this.setState({\n                  isMoveInProgress: true\n                });\n\n                isEncryptedTarget = Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_34__[\"isEncryptedFolder\"])(targetFolder);\n                trashedFiles = [];\n                _context4.next = 9;\n                return Promise.all(entries.map( /*#__PURE__*/function () {\n                  var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(entry) {\n                    var moveResponse;\n                    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            _context3.next = 2;\n                            return _this.registerCancelable(_this.moveEntry(entry, targetFolder, {\n                              sharedPaths: sharedPaths,\n                              isEncryptedTarget: isEncryptedTarget,\n                              client: client,\n                              vaultClient: vaultClient\n                            }));\n\n                          case 2:\n                            moveResponse = _context3.sent;\n\n                            if (moveResponse.deleted) {\n                              trashedFiles.push(moveResponse.deleted);\n                            }\n\n                          case 4:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3);\n                  }));\n\n                  return function (_x9) {\n                    return _ref6.apply(this, arguments);\n                  };\n                }()));\n\n              case 9:\n                _context4.next = 11;\n                return _this.registerCancelable(client.query(Object(cozy_client__WEBPACK_IMPORTED_MODULE_14__[\"Q\"])('io.cozy.files').getById(targetFolder._id)));\n\n              case 11:\n                response = _context4.sent;\n                targetName = response.data.name;\n                cozy_ui_transpiled_react_Alerter__WEBPACK_IMPORTED_MODULE_22__[\"default\"].info('Move.success', {\n                  subject: entries.length === 1 ? entries[0].name : '',\n                  target: targetName,\n                  smart_count: entries.length,\n                  buttonText: t('Move.cancel'),\n                  buttonAction: function buttonAction() {\n                    return _this.cancelMove(entries, trashedFiles, callback, {\n                      targetFolder: targetFolder\n                    });\n                  }\n                });\n\n                _this.trackEvent(entries.length);\n\n                if (callback) callback();\n                _context4.next = 22;\n                break;\n\n              case 18:\n                _context4.prev = 18;\n                _context4.t0 = _context4[\"catch\"](3);\n                lib_logger__WEBPACK_IMPORTED_MODULE_17__[\"default\"].warn(_context4.t0);\n                cozy_ui_transpiled_react_Alerter__WEBPACK_IMPORTED_MODULE_22__[\"default\"].error('Move.error', {\n                  smart_count: entries.length\n                });\n\n              case 22:\n                _context4.prev = 22;\n\n                _this.setState({\n                  isMoveInProgress: false\n                });\n\n                onClose({\n                  cancelSelection: true\n                });\n                return _context4.finish(22);\n\n              case 26:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[3, 18, 22, 26]]);\n      }));\n\n      return function (_x8) {\n        return _ref5.apply(this, arguments);\n      };\n    }());\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this), \"cancelMove\", /*#__PURE__*/function () {\n      var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6(entries, trashedFiles, callback) {\n        var _this$props2, client, vaultClient, displayedFolder, targetFolder, isEncryptedDisplayedFolder, isEncryptedTargetFolder, fileCollection, restoreErrorsCount;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _this$props2 = _this.props, client = _this$props2.client, vaultClient = _this$props2.vaultClient, displayedFolder = _this$props2.displayedFolder;\n                targetFolder = _this.state.targetFolder;\n                _context6.prev = 2;\n                isEncryptedDisplayedFolder = Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_34__[\"isEncryptedFolder\"])(displayedFolder);\n                console.log('is encrypted displayed folder : ', isEncryptedDisplayedFolder);\n                isEncryptedTargetFolder = Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_34__[\"isEncryptedFolder\"])(targetFolder); //const isEncryptedFileEntry = isEncryptedTargetFolder\n\n                _context6.next = 8;\n                return Promise.all(entries.map( /*#__PURE__*/function () {\n                  var _ref8 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(entry) {\n                    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {\n                      while (1) {\n                        switch (_context5.prev = _context5.next) {\n                          case 0:\n                            //const wasEncryptedFileEntry = isEncryptedFile(entry)\n                            if (isEncryptedDisplayedFolder || isEncryptedTargetFolder) {\n                              console.log('lets cancel move encrypted entry');\n\n                              _this.registerCancelable(_this.moveEncryptedEntry(client, vaultClient, entry, {\n                                isEncryptedTarget: isEncryptedDisplayedFolder,\n                                isEncryptedFileEntry: isEncryptedTargetFolder,\n                                targetFolder: displayedFolder,\n                                sourceFolder: targetFolder\n                              }));\n                            }\n\n                            return _context5.abrupt(\"return\", _this.registerCancelable(models__WEBPACK_IMPORTED_MODULE_15__[\"CozyFile\"].move(entry._id, {\n                              folderId: entry.dir_id\n                            })));\n\n                          case 2:\n                          case \"end\":\n                            return _context5.stop();\n                        }\n                      }\n                    }, _callee5);\n                  }));\n\n                  return function (_x13) {\n                    return _ref8.apply(this, arguments);\n                  };\n                }()));\n\n              case 8:\n                fileCollection = client.collection(models__WEBPACK_IMPORTED_MODULE_15__[\"CozyFile\"].doctype);\n                restoreErrorsCount = 0;\n                _context6.next = 12;\n                return Promise.all(trashedFiles.map(function (id) {\n                  try {\n                    _this.registerCancelable(fileCollection.restore(id));\n                  } catch (_unused) {\n                    restoreErrorsCount++;\n                  }\n                }));\n\n              case 12:\n                if (restoreErrorsCount) {\n                  cozy_ui_transpiled_react_Alerter__WEBPACK_IMPORTED_MODULE_22__[\"default\"].info('Move.cancelledWithRestoreErrors', {\n                    subject: entries.length === 1 ? entries[0].name : '',\n                    smart_count: entries.length,\n                    restoreErrorsCount: restoreErrorsCount\n                  });\n                } else {\n                  cozy_ui_transpiled_react_Alerter__WEBPACK_IMPORTED_MODULE_22__[\"default\"].info('Move.cancelled', {\n                    subject: entries.length === 1 ? entries[0].name : '',\n                    smart_count: entries.length\n                  });\n                }\n\n                _context6.next = 19;\n                break;\n\n              case 15:\n                _context6.prev = 15;\n                _context6.t0 = _context6[\"catch\"](2);\n                lib_logger__WEBPACK_IMPORTED_MODULE_17__[\"default\"].warn(_context6.t0);\n                cozy_ui_transpiled_react_Alerter__WEBPACK_IMPORTED_MODULE_22__[\"default\"].error('Move.cancelled_error', {\n                  smart_count: entries.length\n                });\n\n              case 19:\n                _context6.prev = 19;\n                if (callback) callback();\n                return _context6.finish(19);\n\n              case 22:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[2, 15, 19, 22]]);\n      }));\n\n      return function (_x10, _x11, _x12) {\n        return _ref7.apply(this, arguments);\n      };\n    }());\n\n    _this.promises = [];\n    var _displayedFolder = props.displayedFolder;\n    _this.state = {\n      targetFolder: _displayedFolder,\n      isMoveInProgress: false\n    };\n    return _this;\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(MoveModal, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unregisterCancelables();\n    }\n  }, {\n    key: \"trackEvent\",\n    value: function trackEvent(eventValue) {\n      var tracker = Object(cozy_ui_transpiled_react_helpers_tracker__WEBPACK_IMPORTED_MODULE_23__[\"getTracker\"])();\n\n      if (tracker) {\n        tracker.push(['trackEvent', 'Drive', 'move', 'moveTo', eventValue]);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          onClose = _this$props3.onClose,\n          entries = _this$props3.entries,\n          classes = _this$props3.classes,\n          isMobile = _this$props3.breakpoints.isMobile;\n      var _this$state = this.state,\n          targetFolder = _this$state.targetFolder,\n          isMoveInProgress = _this$state.isMoveInProgress;\n      var contentQuery = Object(drive_web_modules_queries__WEBPACK_IMPORTED_MODULE_33__[\"buildMoveOrImportQuery\"])(targetFolder._id);\n      var folderQuery = Object(drive_web_modules_queries__WEBPACK_IMPORTED_MODULE_33__[\"buildOnlyFolderQuery\"])(targetFolder._id);\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(cozy_ui_transpiled_react_CozyDialogs__WEBPACK_IMPORTED_MODULE_20__[\"FixedDialog\"], {\n        open: true,\n        onClose: isMobile ? undefined : onClose,\n        size: \"large\",\n        classes: {\n          paper: classes.paper\n        },\n        title: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_9___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(drive_web_modules_move_Header__WEBPACK_IMPORTED_MODULE_25__[\"default\"], {\n          entries: entries\n        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(cozy_client__WEBPACK_IMPORTED_MODULE_14__[\"Query\"], {\n          query: folderQuery.definition(),\n          fetchPolicy: folderQuery.options.fetchPolicy,\n          as: folderQuery.options.as,\n          key: \"breadcrumb-\".concat(targetFolder._id)\n        }, function (_ref9) {\n          var data = _ref9.data,\n              fetchStatus = _ref9.fetchStatus;\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(drive_web_modules_move_Topbar__WEBPACK_IMPORTED_MODULE_31__[\"default\"], {\n            navigateTo: _this2.navigateTo,\n            currentDir: data,\n            fetchStatus: fetchStatus\n          });\n        })),\n        content: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(cozy_client__WEBPACK_IMPORTED_MODULE_14__[\"Query\"], {\n          query: contentQuery.definition(),\n          fetchPolicy: contentQuery.options.fetchPolicy,\n          as: contentQuery.options.as,\n          key: \"content-\".concat(targetFolder._id)\n        }, function (_ref10) {\n          var data = _ref10.data,\n              fetchStatus = _ref10.fetchStatus,\n              hasMore = _ref10.hasMore,\n              fetchMore = _ref10.fetchMore;\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(drive_web_modules_move_Explorer__WEBPACK_IMPORTED_MODULE_26__[\"default\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(drive_web_modules_move_Loader__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n            fetchStatus: fetchStatus,\n            hasNoData: data.length === 0\n          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(drive_web_modules_move_FileList__WEBPACK_IMPORTED_MODULE_27__[\"default\"], {\n            files: data,\n            entries: entries,\n            navigateTo: _this2.navigateTo\n          }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(drive_web_modules_move_LoadMore__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n            hasMore: hasMore,\n            fetchMore: fetchMore\n          })));\n        }),\n        actions: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(cozy_sharing__WEBPACK_IMPORTED_MODULE_18__[\"RefreshableSharings\"], null, function (_ref11) {\n          var refresh = _ref11.refresh;\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(drive_web_modules_move_Footer__WEBPACK_IMPORTED_MODULE_30__[\"default\"], {\n            onConfirm: function onConfirm() {\n              return _this2.moveEntries(refresh);\n            },\n            onClose: onClose,\n            targets: entries,\n            currentDirId: targetFolder._id,\n            isMoving: isMoveInProgress\n          });\n        })\n      });\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return MoveModal;\n}(react__WEBPACK_IMPORTED_MODULE_9___default.a.Component);\nMoveModal.propTypes = {\n  client: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.object.isRequired,\n  displayedFolder: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.object.isRequired,\n  entries: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.array,\n  t: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.func.isRequired,\n  // in case of move conflicts, shared files are not overridden\n  sharingState: prop_types__WEBPACK_IMPORTED_MODULE_10___default.a.object\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    displayedFolder: Object(drive_web_modules_selectors__WEBPACK_IMPORTED_MODULE_32__[\"getDisplayedFolder\"])(state)\n  };\n};\n\nvar _default = Object(redux__WEBPACK_IMPORTED_MODULE_11__[\"compose\"])(Object(react_redux__WEBPACK_IMPORTED_MODULE_12__[\"connect\"])(mapStateToProps), Object(cozy_ui_transpiled_react_I18n__WEBPACK_IMPORTED_MODULE_21__[\"translate\"])(), cozy_client__WEBPACK_IMPORTED_MODULE_14__[\"withClient\"], cozy_keys_lib__WEBPACK_IMPORTED_MODULE_16__[\"withVaultUnlockContext\"], cozy_sharing_dist_hoc_withSharingState__WEBPACK_IMPORTED_MODULE_19__[\"default\"], Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_13__[\"withStyles\"])(styles), Object(cozy_ui_transpiled_react__WEBPACK_IMPORTED_MODULE_24__[\"withBreakpoints\"])())(MoveModal);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (_default);\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(styles, \"styles\", \"/home/paul/dev/cozy/apps/cozy-drive/src/drive/web/modules/move/MoveModal.jsx\");\n  reactHotLoader.register(MoveModal, \"MoveModal\", \"/home/paul/dev/cozy/apps/cozy-drive/src/drive/web/modules/move/MoveModal.jsx\");\n  reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/home/paul/dev/cozy/apps/cozy-drive/src/drive/web/modules/move/MoveModal.jsx\");\n  reactHotLoader.register(_default, \"default\", \"/home/paul/dev/cozy/apps/cozy-drive/src/drive/web/modules/move/MoveModal.jsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(\"./node_modules/webpack/buildin/harmony-module.js\")(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZHJpdmUvd2ViL21vZHVsZXMvbW92ZS9Nb3ZlTW9kYWwuanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2RyaXZlL3dlYi9tb2R1bGVzL21vdmUvTW92ZU1vZGFsLmpzeD9mYTZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcydcbmltcG9ydCB7IGNvbXBvc2UgfSBmcm9tICdyZWR1eCdcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCdcbmltcG9ydCB7IHdpdGhTdHlsZXMgfSBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9zdHlsZXMnXG5cbmltcG9ydCB7IFF1ZXJ5LCBjYW5jZWxhYmxlLCB3aXRoQ2xpZW50LCBRIH0gZnJvbSAnY296eS1jbGllbnQnXG5pbXBvcnQgeyBDb3p5RmlsZSB9IGZyb20gJ21vZGVscydcbmltcG9ydCB7IHdpdGhWYXVsdFVubG9ja0NvbnRleHQgfSBmcm9tICdjb3p5LWtleXMtbGliJ1xuaW1wb3J0IGxvZ2dlciBmcm9tICdsaWIvbG9nZ2VyJ1xuXG5pbXBvcnQgeyBSZWZyZXNoYWJsZVNoYXJpbmdzIH0gZnJvbSAnY296eS1zaGFyaW5nJ1xuaW1wb3J0IHdpdGhTaGFyaW5nU3RhdGUgZnJvbSAnY296eS1zaGFyaW5nL2Rpc3QvaG9jL3dpdGhTaGFyaW5nU3RhdGUnXG5pbXBvcnQgeyBGaXhlZERpYWxvZyB9IGZyb20gJ2NvenktdWkvdHJhbnNwaWxlZC9yZWFjdC9Db3p5RGlhbG9ncydcbmltcG9ydCB7IHRyYW5zbGF0ZSB9IGZyb20gJ2NvenktdWkvdHJhbnNwaWxlZC9yZWFjdC9JMThuJ1xuaW1wb3J0IEFsZXJ0ZXIgZnJvbSAnY296eS11aS90cmFuc3BpbGVkL3JlYWN0L0FsZXJ0ZXInXG5pbXBvcnQgeyBnZXRUcmFja2VyIH0gZnJvbSAnY296eS11aS90cmFuc3BpbGVkL3JlYWN0L2hlbHBlcnMvdHJhY2tlcidcbmltcG9ydCB7IHdpdGhCcmVha3BvaW50cyB9IGZyb20gJ2NvenktdWkvdHJhbnNwaWxlZC9yZWFjdCdcblxuaW1wb3J0IEhlYWRlciBmcm9tICdkcml2ZS93ZWIvbW9kdWxlcy9tb3ZlL0hlYWRlcidcbmltcG9ydCBFeHBsb3JlciBmcm9tICdkcml2ZS93ZWIvbW9kdWxlcy9tb3ZlL0V4cGxvcmVyJ1xuaW1wb3J0IEZpbGVMaXN0IGZyb20gJ2RyaXZlL3dlYi9tb2R1bGVzL21vdmUvRmlsZUxpc3QnXG5pbXBvcnQgTG9hZGVyIGZyb20gJ2RyaXZlL3dlYi9tb2R1bGVzL21vdmUvTG9hZGVyJ1xuaW1wb3J0IExvYWRNb3JlIGZyb20gJ2RyaXZlL3dlYi9tb2R1bGVzL21vdmUvTG9hZE1vcmUnXG5pbXBvcnQgRm9vdGVyIGZyb20gJ2RyaXZlL3dlYi9tb2R1bGVzL21vdmUvRm9vdGVyJ1xuaW1wb3J0IFRvcGJhciBmcm9tICdkcml2ZS93ZWIvbW9kdWxlcy9tb3ZlL1RvcGJhcidcblxuaW1wb3J0IHsgZ2V0RGlzcGxheWVkRm9sZGVyIH0gZnJvbSAnZHJpdmUvd2ViL21vZHVsZXMvc2VsZWN0b3JzJ1xuaW1wb3J0IHtcbiAgYnVpbGRNb3ZlT3JJbXBvcnRRdWVyeSxcbiAgYnVpbGRPbmx5Rm9sZGVyUXVlcnlcbn0gZnJvbSAnZHJpdmUvd2ViL21vZHVsZXMvcXVlcmllcydcbmltcG9ydCB7XG4gIGlzRW5jcnlwdGVkRm9sZGVyLFxuICBpc0VuY3J5cHRlZEZpbGUsXG4gIGdldEVuY3J5cHRpb25LZXlGcm9tRGlySWQsXG4gIGVuY3J5cHRBbmRVcGxvYWRFeGlzdGluZ0ZpbGUsXG4gIGRlY3J5cHRBbmRVcGxvYWRFeGlzdGluZ0ZpbGUsXG4gIHJlZW5jcnlwdEFuZFVwbG9hZEV4aXN0aW5nRmlsZVxufSBmcm9tICdkcml2ZS9saWIvZW5jcnlwdGlvbidcblxuY29uc3Qgc3R5bGVzID0gdGhlbWUgPT4gKHtcbiAgcGFwZXI6IHtcbiAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAnJiAuTXVpRGlhbG9nQ29udGVudC1yb290Jzoge1xuICAgICAgcGFkZGluZzogJzAnXG4gICAgfSxcbiAgICAnJiAuTXVpRGlhbG9nVGl0bGUtcm9vdCc6IHtcbiAgICAgIHBhZGRpbmc6ICcwJyxcbiAgICAgIFt0aGVtZS5icmVha3BvaW50cy5kb3duKCdzbScpXToge1xuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBvdmVyZmxvdzogJ3Zpc2libGUnLFxuICAgICAgICAvLyBiYWNrIGJ1dHRvblxuICAgICAgICAnJiAuTXVpQnV0dG9uQmFzZS1yb290Jzoge1xuICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59KVxuXG5leHBvcnQgY2xhc3MgTW92ZU1vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLnByb21pc2VzID0gW11cbiAgICBjb25zdCB7IGRpc3BsYXllZEZvbGRlciB9ID0gcHJvcHNcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdGFyZ2V0Rm9sZGVyOiBkaXNwbGF5ZWRGb2xkZXIsXG4gICAgICBpc01vdmVJblByb2dyZXNzOiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMudW5yZWdpc3RlckNhbmNlbGFibGVzKClcbiAgfVxuXG4gIG5hdmlnYXRlVG8gPSBmb2xkZXIgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyB0YXJnZXRGb2xkZXI6IGZvbGRlciB9KVxuICB9XG5cbiAgcmVnaXN0ZXJDYW5jZWxhYmxlID0gcHJvbWlzZSA9PiB7XG4gICAgaWYgKCF0aGlzLnByb21pc2VzKSB0aGlzLnByb21pc2VzID0gW11cbiAgICBjb25zdCBjYW5jZWxhYmxlUCA9IGNhbmNlbGFibGUocHJvbWlzZSlcbiAgICB0aGlzLnByb21pc2VzLnB1c2goY2FuY2VsYWJsZVApXG4gICAgcmV0dXJuIGNhbmNlbGFibGVQXG4gIH1cblxuICB1bnJlZ2lzdGVyQ2FuY2VsYWJsZXMgPSAoKSA9PiB7XG4gICAgdGhpcy5wcm9taXNlcy5mb3JFYWNoKHAgPT4gcC5jYW5jZWwoKSlcbiAgICB0aGlzLnByb21pc2VzID0gW11cbiAgfVxuXG4gIG1vdmVFbmNyeXB0ZWRFbnRyeSA9IGFzeW5jIChcbiAgICBjbGllbnQsXG4gICAgdmF1bHRDbGllbnQsXG4gICAgZW50cnksXG4gICAgeyBpc0VuY3J5cHRlZFRhcmdldCwgaXNFbmNyeXB0ZWRGaWxlRW50cnksIHRhcmdldEZvbGRlciwgc291cmNlRm9sZGVyIH1cbiAgKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2lzRW5jcnlwdGVkVGFyZ2V0IDogJywgaXNFbmNyeXB0ZWRUYXJnZXQpXG4gICAgY29uc29sZS5sb2coJ2lzRW5jcnlwdGVkRmlsZUVudHJ5OiAnLCBpc0VuY3J5cHRlZEZpbGVFbnRyeSlcbiAgICBpZiAoaXNFbmNyeXB0ZWRUYXJnZXQgJiYgIWlzRW5jcnlwdGVkRmlsZUVudHJ5KSB7XG4gICAgICAvLyBUaGUgcGxhaW50ZXh0IGZpbGUgaXMgbW92ZWQgdG8gYW4gZW5jcnlwdGVkIGRpcmVjdG9yeVxuICAgICAgY29uc3QgZW5jcnlwdGlvbktleSA9IGF3YWl0IGdldEVuY3J5cHRpb25LZXlGcm9tRGlySWQoXG4gICAgICAgIGNsaWVudCxcbiAgICAgICAgdGFyZ2V0Rm9sZGVyLl9pZFxuICAgICAgKVxuXG4gICAgICBhd2FpdCBlbmNyeXB0QW5kVXBsb2FkRXhpc3RpbmdGaWxlKGNsaWVudCwgdmF1bHRDbGllbnQsIHtcbiAgICAgICAgZmlsZTogZW50cnksXG4gICAgICAgIGVuY3J5cHRpb25LZXlcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmICghaXNFbmNyeXB0ZWRUYXJnZXQgJiYgaXNFbmNyeXB0ZWRGaWxlRW50cnkpIHtcbiAgICAgIC8vIFRoZSBlbmNyeXB0ZWQgZmlsZSBpcyBtb3ZlZCB0byBhIHBsYWludGV4dCBkaXJlY3RvcnlcbiAgICAgIGNvbnN0IGRlY3J5cHRpb25LZXkgPSBhd2FpdCBnZXRFbmNyeXB0aW9uS2V5RnJvbURpcklkKFxuICAgICAgICBjbGllbnQsXG4gICAgICAgIHNvdXJjZUZvbGRlci5faWRcbiAgICAgIClcblxuICAgICAgYXdhaXQgZGVjcnlwdEFuZFVwbG9hZEV4aXN0aW5nRmlsZShjbGllbnQsIHZhdWx0Q2xpZW50LCB7XG4gICAgICAgIGZpbGU6IGVudHJ5LFxuICAgICAgICBkZWNyeXB0aW9uS2V5XG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoaXNFbmNyeXB0ZWRUYXJnZXQgJiYgaXNFbmNyeXB0ZWRGaWxlRW50cnkpIHtcbiAgICAgIC8vIFRoZSBlbmNyeXB0ZWQgZmlsZSBpcyBtb3ZlZCB0byBhbm90aGVyIGVuY3J5cHRlZCBkaXJlY3RvcnlcbiAgICAgIGNvbnN0IGVuY3J5cHRpb25LZXkgPSBhd2FpdCBnZXRFbmNyeXB0aW9uS2V5RnJvbURpcklkKFxuICAgICAgICBjbGllbnQsXG4gICAgICAgIHRhcmdldEZvbGRlci5faWRcbiAgICAgIClcbiAgICAgIGNvbnN0IGRlY3J5cHRpb25LZXkgPSBhd2FpdCBnZXRFbmNyeXB0aW9uS2V5RnJvbURpcklkKFxuICAgICAgICBjbGllbnQsXG4gICAgICAgIHNvdXJjZUZvbGRlci5faWRcbiAgICAgIClcbiAgICAgIGF3YWl0IHJlZW5jcnlwdEFuZFVwbG9hZEV4aXN0aW5nRmlsZShjbGllbnQsIHZhdWx0Q2xpZW50LCB7XG4gICAgICAgIGZpbGU6IGVudHJ5LFxuICAgICAgICBkZWNyeXB0aW9uS2V5LFxuICAgICAgICBlbmNyeXB0aW9uS2V5XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG1vdmVFbnRyeSA9IGFzeW5jIChcbiAgICBlbnRyeSxcbiAgICB0YXJnZXRGb2xkZXIsXG4gICAgeyBzaGFyZWRQYXRocywgaXNFbmNyeXB0ZWRUYXJnZXQsIGNsaWVudCwgdmF1bHRDbGllbnQgfVxuICApID0+IHtcbiAgICBjb25zdCB7IGRpc3BsYXllZEZvbGRlciB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGlzRW5jcnlwdGVkRmlsZUVudHJ5ID0gaXNFbmNyeXB0ZWRGaWxlKGVudHJ5KVxuICAgIGlmIChpc0VuY3J5cHRlZFRhcmdldCB8fCBpc0VuY3J5cHRlZEZpbGVFbnRyeSkge1xuICAgICAgY29uc29sZS5sb2coJ2xldHMgbW92ZSBlbmNyeXB0ZWQgZW50cnknKVxuICAgICAgY29uc29sZS5sb2coJ2lzRW5jcnlwdGVkVGFyZ2V0JywgaXNFbmNyeXB0ZWRUYXJnZXQpXG4gICAgICBjb25zb2xlLmxvZygnaXNFbmNyeXB0ZWRGaWxlRW50cnknLCBpc0VuY3J5cHRlZEZpbGVFbnRyeSlcbiAgICAgIGF3YWl0IHRoaXMubW92ZUVuY3J5cHRlZEVudHJ5KGNsaWVudCwgdmF1bHRDbGllbnQsIGVudHJ5LCB7XG4gICAgICAgIGlzRW5jcnlwdGVkVGFyZ2V0LFxuICAgICAgICBpc0VuY3J5cHRlZEZpbGVFbnRyeSxcbiAgICAgICAgdGFyZ2V0Rm9sZGVyLFxuICAgICAgICBzb3VyY2VGb2xkZXI6IGRpc3BsYXllZEZvbGRlclxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRQYXRoID0gYXdhaXQgQ296eUZpbGUuZ2V0RnVsbHBhdGgodGFyZ2V0Rm9sZGVyLl9pZCwgZW50cnkubmFtZSlcbiAgICBjb25zb2xlLmxvZygndGFyZ2V0cGF0aCA6ICcsIHRhcmdldFBhdGgpXG4gICAgY29uc3QgZm9yY2UgPSAhc2hhcmVkUGF0aHMuaW5jbHVkZXModGFyZ2V0UGF0aClcbiAgICByZXR1cm4gQ296eUZpbGUubW92ZShlbnRyeS5faWQsIHsgZm9sZGVySWQ6IHRhcmdldEZvbGRlci5faWQgfSwgZm9yY2UpXG4gIH1cblxuICBtb3ZlRW50cmllcyA9IGFzeW5jIGNhbGxiYWNrID0+IHtcbiAgICBjb25zdCB7IGNsaWVudCwgdmF1bHRDbGllbnQsIGVudHJpZXMsIG9uQ2xvc2UsIHNoYXJpbmdTdGF0ZSwgdCB9ID1cbiAgICAgIHRoaXMucHJvcHNcbiAgICBjb25zdCB7IHNoYXJlZFBhdGhzIH0gPSBzaGFyaW5nU3RhdGVcbiAgICBjb25zdCB7IHRhcmdldEZvbGRlciB9ID0gdGhpcy5zdGF0ZVxuICAgIHRyeSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgaXNNb3ZlSW5Qcm9ncmVzczogdHJ1ZSB9KVxuICAgICAgY29uc3QgaXNFbmNyeXB0ZWRUYXJnZXQgPSBpc0VuY3J5cHRlZEZvbGRlcih0YXJnZXRGb2xkZXIpXG4gICAgICBjb25zdCB0cmFzaGVkRmlsZXMgPSBbXVxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIGVudHJpZXMubWFwKGFzeW5jIGVudHJ5ID0+IHtcbiAgICAgICAgICBjb25zdCBtb3ZlUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlZ2lzdGVyQ2FuY2VsYWJsZShcbiAgICAgICAgICAgIHRoaXMubW92ZUVudHJ5KGVudHJ5LCB0YXJnZXRGb2xkZXIsIHtcbiAgICAgICAgICAgICAgc2hhcmVkUGF0aHMsXG4gICAgICAgICAgICAgIGlzRW5jcnlwdGVkVGFyZ2V0LFxuICAgICAgICAgICAgICBjbGllbnQsXG4gICAgICAgICAgICAgIHZhdWx0Q2xpZW50XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAobW92ZVJlc3BvbnNlLmRlbGV0ZWQpIHtcbiAgICAgICAgICAgIHRyYXNoZWRGaWxlcy5wdXNoKG1vdmVSZXNwb25zZS5kZWxldGVkKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIClcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlZ2lzdGVyQ2FuY2VsYWJsZShcbiAgICAgICAgY2xpZW50LnF1ZXJ5KFEoJ2lvLmNvenkuZmlsZXMnKS5nZXRCeUlkKHRhcmdldEZvbGRlci5faWQpKVxuICAgICAgKVxuICAgICAgY29uc3QgdGFyZ2V0TmFtZSA9IHJlc3BvbnNlLmRhdGEubmFtZVxuICAgICAgQWxlcnRlci5pbmZvKCdNb3ZlLnN1Y2Nlc3MnLCB7XG4gICAgICAgIHN1YmplY3Q6IGVudHJpZXMubGVuZ3RoID09PSAxID8gZW50cmllc1swXS5uYW1lIDogJycsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0TmFtZSxcbiAgICAgICAgc21hcnRfY291bnQ6IGVudHJpZXMubGVuZ3RoLFxuICAgICAgICBidXR0b25UZXh0OiB0KCdNb3ZlLmNhbmNlbCcpLFxuICAgICAgICBidXR0b25BY3Rpb246ICgpID0+XG4gICAgICAgICAgdGhpcy5jYW5jZWxNb3ZlKGVudHJpZXMsIHRyYXNoZWRGaWxlcywgY2FsbGJhY2ssIHsgdGFyZ2V0Rm9sZGVyIH0pXG4gICAgICB9KVxuICAgICAgdGhpcy50cmFja0V2ZW50KGVudHJpZXMubGVuZ3RoKVxuICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nZ2VyLndhcm4oZSlcbiAgICAgIEFsZXJ0ZXIuZXJyb3IoJ01vdmUuZXJyb3InLCB7IHNtYXJ0X2NvdW50OiBlbnRyaWVzLmxlbmd0aCB9KVxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgaXNNb3ZlSW5Qcm9ncmVzczogZmFsc2UgfSlcbiAgICAgIG9uQ2xvc2Uoe1xuICAgICAgICBjYW5jZWxTZWxlY3Rpb246IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY2FuY2VsTW92ZSA9IGFzeW5jIChlbnRyaWVzLCB0cmFzaGVkRmlsZXMsIGNhbGxiYWNrKSA9PiB7XG4gICAgY29uc3QgeyBjbGllbnQsIHZhdWx0Q2xpZW50LCBkaXNwbGF5ZWRGb2xkZXIgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IHRhcmdldEZvbGRlciB9ID0gdGhpcy5zdGF0ZVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBpc0VuY3J5cHRlZERpc3BsYXllZEZvbGRlciA9IGlzRW5jcnlwdGVkRm9sZGVyKGRpc3BsYXllZEZvbGRlcilcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAnaXMgZW5jcnlwdGVkIGRpc3BsYXllZCBmb2xkZXIgOiAnLFxuICAgICAgICBpc0VuY3J5cHRlZERpc3BsYXllZEZvbGRlclxuICAgICAgKVxuICAgICAgY29uc3QgaXNFbmNyeXB0ZWRUYXJnZXRGb2xkZXIgPSBpc0VuY3J5cHRlZEZvbGRlcih0YXJnZXRGb2xkZXIpXG5cbiAgICAgIC8vY29uc3QgaXNFbmNyeXB0ZWRGaWxlRW50cnkgPSBpc0VuY3J5cHRlZFRhcmdldEZvbGRlclxuXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgZW50cmllcy5tYXAoYXN5bmMgZW50cnkgPT4ge1xuICAgICAgICAgIC8vY29uc3Qgd2FzRW5jcnlwdGVkRmlsZUVudHJ5ID0gaXNFbmNyeXB0ZWRGaWxlKGVudHJ5KVxuICAgICAgICAgIGlmIChpc0VuY3J5cHRlZERpc3BsYXllZEZvbGRlciB8fCBpc0VuY3J5cHRlZFRhcmdldEZvbGRlcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xldHMgY2FuY2VsIG1vdmUgZW5jcnlwdGVkIGVudHJ5JylcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJDYW5jZWxhYmxlKFxuICAgICAgICAgICAgICB0aGlzLm1vdmVFbmNyeXB0ZWRFbnRyeShjbGllbnQsIHZhdWx0Q2xpZW50LCBlbnRyeSwge1xuICAgICAgICAgICAgICAgIGlzRW5jcnlwdGVkVGFyZ2V0OiBpc0VuY3J5cHRlZERpc3BsYXllZEZvbGRlcixcbiAgICAgICAgICAgICAgICBpc0VuY3J5cHRlZEZpbGVFbnRyeTogaXNFbmNyeXB0ZWRUYXJnZXRGb2xkZXIsXG4gICAgICAgICAgICAgICAgdGFyZ2V0Rm9sZGVyOiBkaXNwbGF5ZWRGb2xkZXIsXG4gICAgICAgICAgICAgICAgc291cmNlRm9sZGVyOiB0YXJnZXRGb2xkZXJcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJDYW5jZWxhYmxlKFxuICAgICAgICAgICAgQ296eUZpbGUubW92ZShlbnRyeS5faWQsIHsgZm9sZGVySWQ6IGVudHJ5LmRpcl9pZCB9KVxuICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIGNvbnN0IGZpbGVDb2xsZWN0aW9uID0gY2xpZW50LmNvbGxlY3Rpb24oQ296eUZpbGUuZG9jdHlwZSlcbiAgICAgIGxldCByZXN0b3JlRXJyb3JzQ291bnQgPSAwXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgdHJhc2hlZEZpbGVzLm1hcChpZCA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJDYW5jZWxhYmxlKGZpbGVDb2xsZWN0aW9uLnJlc3RvcmUoaWQpKVxuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgcmVzdG9yZUVycm9yc0NvdW50KytcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICBpZiAocmVzdG9yZUVycm9yc0NvdW50KSB7XG4gICAgICAgIEFsZXJ0ZXIuaW5mbygnTW92ZS5jYW5jZWxsZWRXaXRoUmVzdG9yZUVycm9ycycsIHtcbiAgICAgICAgICBzdWJqZWN0OiBlbnRyaWVzLmxlbmd0aCA9PT0gMSA/IGVudHJpZXNbMF0ubmFtZSA6ICcnLFxuICAgICAgICAgIHNtYXJ0X2NvdW50OiBlbnRyaWVzLmxlbmd0aCxcbiAgICAgICAgICByZXN0b3JlRXJyb3JzQ291bnRcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEFsZXJ0ZXIuaW5mbygnTW92ZS5jYW5jZWxsZWQnLCB7XG4gICAgICAgICAgc3ViamVjdDogZW50cmllcy5sZW5ndGggPT09IDEgPyBlbnRyaWVzWzBdLm5hbWUgOiAnJyxcbiAgICAgICAgICBzbWFydF9jb3VudDogZW50cmllcy5sZW5ndGhcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2dnZXIud2FybihlKVxuICAgICAgQWxlcnRlci5lcnJvcignTW92ZS5jYW5jZWxsZWRfZXJyb3InLCB7IHNtYXJ0X2NvdW50OiBlbnRyaWVzLmxlbmd0aCB9KVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKClcbiAgICB9XG4gIH1cblxuICB0cmFja0V2ZW50KGV2ZW50VmFsdWUpIHtcbiAgICBjb25zdCB0cmFja2VyID0gZ2V0VHJhY2tlcigpXG4gICAgaWYgKHRyYWNrZXIpIHtcbiAgICAgIHRyYWNrZXIucHVzaChbJ3RyYWNrRXZlbnQnLCAnRHJpdmUnLCAnbW92ZScsICdtb3ZlVG8nLCBldmVudFZhbHVlXSlcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgb25DbG9zZSxcbiAgICAgIGVudHJpZXMsXG4gICAgICBjbGFzc2VzLFxuICAgICAgYnJlYWtwb2ludHM6IHsgaXNNb2JpbGUgfVxuICAgIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyB0YXJnZXRGb2xkZXIsIGlzTW92ZUluUHJvZ3Jlc3MgfSA9IHRoaXMuc3RhdGVcblxuICAgIGNvbnN0IGNvbnRlbnRRdWVyeSA9IGJ1aWxkTW92ZU9ySW1wb3J0UXVlcnkodGFyZ2V0Rm9sZGVyLl9pZClcbiAgICBjb25zdCBmb2xkZXJRdWVyeSA9IGJ1aWxkT25seUZvbGRlclF1ZXJ5KHRhcmdldEZvbGRlci5faWQpXG5cbiAgICByZXR1cm4gKFxuICAgICAgPEZpeGVkRGlhbG9nXG4gICAgICAgIG9wZW5cbiAgICAgICAgb25DbG9zZT17aXNNb2JpbGUgPyB1bmRlZmluZWQgOiBvbkNsb3NlfVxuICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICBjbGFzc2VzPXt7XG4gICAgICAgICAgcGFwZXI6IGNsYXNzZXMucGFwZXJcbiAgICAgICAgfX1cbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8SGVhZGVyIGVudHJpZXM9e2VudHJpZXN9IC8+XG4gICAgICAgICAgICA8UXVlcnlcbiAgICAgICAgICAgICAgcXVlcnk9e2ZvbGRlclF1ZXJ5LmRlZmluaXRpb24oKX1cbiAgICAgICAgICAgICAgZmV0Y2hQb2xpY3k9e2ZvbGRlclF1ZXJ5Lm9wdGlvbnMuZmV0Y2hQb2xpY3l9XG4gICAgICAgICAgICAgIGFzPXtmb2xkZXJRdWVyeS5vcHRpb25zLmFzfVxuICAgICAgICAgICAgICBrZXk9e2BicmVhZGNydW1iLSR7dGFyZ2V0Rm9sZGVyLl9pZH1gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7KHsgZGF0YSwgZmV0Y2hTdGF0dXMgfSkgPT4gKFxuICAgICAgICAgICAgICAgIDxUb3BiYXJcbiAgICAgICAgICAgICAgICAgIG5hdmlnYXRlVG89e3RoaXMubmF2aWdhdGVUb31cbiAgICAgICAgICAgICAgICAgIGN1cnJlbnREaXI9e2RhdGF9XG4gICAgICAgICAgICAgICAgICBmZXRjaFN0YXR1cz17ZmV0Y2hTdGF0dXN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvUXVlcnk+XG4gICAgICAgICAgPC8+XG4gICAgICAgIH1cbiAgICAgICAgY29udGVudD17XG4gICAgICAgICAgPFF1ZXJ5XG4gICAgICAgICAgICBxdWVyeT17Y29udGVudFF1ZXJ5LmRlZmluaXRpb24oKX1cbiAgICAgICAgICAgIGZldGNoUG9saWN5PXtjb250ZW50UXVlcnkub3B0aW9ucy5mZXRjaFBvbGljeX1cbiAgICAgICAgICAgIGFzPXtjb250ZW50UXVlcnkub3B0aW9ucy5hc31cbiAgICAgICAgICAgIGtleT17YGNvbnRlbnQtJHt0YXJnZXRGb2xkZXIuX2lkfWB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgeyh7IGRhdGEsIGZldGNoU3RhdHVzLCBoYXNNb3JlLCBmZXRjaE1vcmUgfSkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxFeHBsb3Jlcj5cbiAgICAgICAgICAgICAgICAgIDxMb2FkZXJcbiAgICAgICAgICAgICAgICAgICAgZmV0Y2hTdGF0dXM9e2ZldGNoU3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICBoYXNOb0RhdGE9e2RhdGEubGVuZ3RoID09PSAwfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8RmlsZUxpc3RcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlcz17ZGF0YX1cbiAgICAgICAgICAgICAgICAgICAgICBlbnRyaWVzPXtlbnRyaWVzfVxuICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRlVG89e3RoaXMubmF2aWdhdGVUb31cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPExvYWRNb3JlIGhhc01vcmU9e2hhc01vcmV9IGZldGNoTW9yZT17ZmV0Y2hNb3JlfSAvPlxuICAgICAgICAgICAgICAgICAgPC9Mb2FkZXI+XG4gICAgICAgICAgICAgICAgPC9FeHBsb3Jlcj5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA8L1F1ZXJ5PlxuICAgICAgICB9XG4gICAgICAgIGFjdGlvbnM9e1xuICAgICAgICAgIDxSZWZyZXNoYWJsZVNoYXJpbmdzPlxuICAgICAgICAgICAgeyh7IHJlZnJlc2ggfSkgPT4gKFxuICAgICAgICAgICAgICA8Rm9vdGVyXG4gICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB0aGlzLm1vdmVFbnRyaWVzKHJlZnJlc2gpfVxuICAgICAgICAgICAgICAgIG9uQ2xvc2U9e29uQ2xvc2V9XG4gICAgICAgICAgICAgICAgdGFyZ2V0cz17ZW50cmllc31cbiAgICAgICAgICAgICAgICBjdXJyZW50RGlySWQ9e3RhcmdldEZvbGRlci5faWR9XG4gICAgICAgICAgICAgICAgaXNNb3Zpbmc9e2lzTW92ZUluUHJvZ3Jlc3N9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvUmVmcmVzaGFibGVTaGFyaW5ncz5cbiAgICAgICAgfVxuICAgICAgLz5cbiAgICApXG4gIH1cbn1cblxuTW92ZU1vZGFsLnByb3BUeXBlcyA9IHtcbiAgY2xpZW50OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gIGRpc3BsYXllZEZvbGRlcjogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBlbnRyaWVzOiBQcm9wVHlwZXMuYXJyYXksXG4gIHQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIC8vIGluIGNhc2Ugb2YgbW92ZSBjb25mbGljdHMsIHNoYXJlZCBmaWxlcyBhcmUgbm90IG92ZXJyaWRkZW5cbiAgc2hhcmluZ1N0YXRlOiBQcm9wVHlwZXMub2JqZWN0XG59XG5cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IHN0YXRlID0+ICh7XG4gIGRpc3BsYXllZEZvbGRlcjogZ2V0RGlzcGxheWVkRm9sZGVyKHN0YXRlKVxufSlcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9zZShcbiAgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMpLFxuICB0cmFuc2xhdGUoKSxcbiAgd2l0aENsaWVudCxcbiAgd2l0aFZhdWx0VW5sb2NrQ29udGV4dCxcbiAgd2l0aFNoYXJpbmdTdGF0ZSxcbiAgd2l0aFN0eWxlcyhzdHlsZXMpLFxuICB3aXRoQnJlYWtwb2ludHMoKVxuKShNb3ZlTW9kYWwpXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFRQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUpBO0FBUEE7QUFEQTtBQUFBO0FBQ0E7QUFtQkE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBRkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBakJBO0FBbUJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUF4QkE7QUEwQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUE3QkE7QUFBQTtBQThCQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQVVBO0FBVkE7QUFBQTtBQWdCQTtBQUNBO0FBRkE7QUFDQTtBQWhCQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBcUJBO0FBckJBO0FBQUE7QUEyQkE7QUFDQTtBQUZBO0FBQ0E7QUEzQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQWdDQTtBQWhDQTtBQUFBO0FBQ0E7QUFEQTtBQW9DQTtBQXBDQTtBQUFBO0FBeUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUF6Q0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQS9CQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQThFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFQQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBVkE7QUFBQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQVpBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFtQkE7QUFDQTtBQUNBO0FBckJBO0FBc0JBO0FBQUE7QUFDQTtBQXZCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBL0VBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBdUdBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUpBO0FBQ0E7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFSQTtBQUFBO0FBVUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQUhBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFYQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBeUJBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUxBO0FBQ0E7QUFPQTtBQUNBO0FBQUE7QUF0Q0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBd0NBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUExQ0E7QUFBQTtBQUNBO0FBMENBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBNUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBeEdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBeUpBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFGQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBVkE7QUFBQTtBQWNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFiQTtBQWNBO0FBQUE7QUFDQTtBQWZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBZkE7QUFnQ0E7QUFDQTtBQWpDQTtBQUFBO0FBb0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMUNBO0FBMkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBdkRBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQXdEQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBMURBO0FBQUE7QUEyREE7QUEzREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUExSkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBUUE7QUFDQTtBQVZBO0FBQUE7QUFBQTtBQVlBO0FBQ0E7QUFiQTtBQUFBO0FBQUE7QUEwTkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBOU5BO0FBQUE7QUFBQTtBQWdPQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBVUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBSUE7QUFHQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBREE7QUF0REE7QUFtRUE7QUFoVEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQW1UQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFRQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBREE7Ozs7Ozs7Ozs7QUFwVkE7QUFvQkE7QUE0VEE7Ozs7Ozs7Ozs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/drive/web/modules/move/MoveModal.jsx\n");

/***/ })

})