webpackHotUpdate("public",{

/***/ "./src/drive/web/modules/views/Folder/hooks/useBreadcrumbPath.jsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"useBreadcrumbPath\", function() { return useBreadcrumbPath; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var cozy_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./node_modules/cozy-client/dist/index.js\");\n/* harmony import */ var cozy_client__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _queries_fetchFolder__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./src/drive/web/modules/views/Folder/queries/fetchFolder.js\");\n/* harmony import */ var cozy_logger__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./node_modules/cozy-logger/dist/index.js\");\n/* harmony import */ var cozy_logger__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(cozy_logger__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\n\n\n\n\nvar useBreadcrumbPath = function useBreadcrumbPath(_ref) {\n  var currentFolderId = _ref.currentFolderId,\n      rootBreadcrumbPath = _ref.rootBreadcrumbPath,\n      sharedDocumentIds = _ref.sharedDocumentIds;\n  var client = Object(cozy_client__WEBPACK_IMPORTED_MODULE_4__[\"useClient\"])();\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useState\"])([]),\n      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useState, 2),\n      paths = _useState2[0],\n      setPaths = _useState2[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    var hasAccessToSharedDocument = function hasAccessToSharedDocument(id) {\n      if (!sharedDocumentIds) return true;\n      return !sharedDocumentIds.includes(id);\n    };\n\n    var isSubscribed = true;\n    var returnedPaths = [];\n\n    var fetchBreadcrumbs = /*#__PURE__*/function () {\n      var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n        var id, folder;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                id = currentFolderId;\n\n              case 1:\n                if (!(!!id && id !== rootBreadcrumbPath.id)) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 4;\n                return Object(_queries_fetchFolder__WEBPACK_IMPORTED_MODULE_5__[\"fetchFolder\"])({\n                  client: client,\n                  folderId: id\n                });\n\n              case 4:\n                folder = _context.sent;\n\n                if (!folder) {\n                  id = undefined;\n                } else {\n                  returnedPaths.unshift({\n                    name: folder.name,\n                    id: folder.id\n                  });\n                  id = hasAccessToSharedDocument(folder.id) ? folder.dir_id : undefined;\n                }\n\n                _context.next = 1;\n                break;\n\n              case 8:\n                if (isSubscribed) {\n                  if (rootBreadcrumbPath.name !== 'Public') {\n                    returnedPaths.unshift(rootBreadcrumbPath);\n                  }\n\n                  setPaths(returnedPaths);\n                }\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetchBreadcrumbs() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetchBreadcrumbs().catch(function (error) {\n      if (rootBreadcrumbPath && rootBreadcrumbPath.name === 'Public') {\n        if (isSubscribed) {\n          setPaths(returnedPaths);\n        }\n      } else {\n        cozy_logger__WEBPACK_IMPORTED_MODULE_6___default()('error', \"Error while fetching folder for breadcrumbs of folder id: \".concat(currentFolderId, \", here is the error: \").concat(error));\n      }\n    });\n    return function () {\n      isSubscribed = false;\n    };\n  }, [currentFolderId, client, sharedDocumentIds, rootBreadcrumbPath]);\n  return paths;\n};\n\n__signature__(useBreadcrumbPath, \"useClient{client}\\nuseState{[paths, setPaths]([])}\\nuseEffect{}\", function () {\n  return [cozy_client__WEBPACK_IMPORTED_MODULE_4__[\"useClient\"]];\n});\n\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(useBreadcrumbPath, \"useBreadcrumbPath\", \"/home/paul/dev/cozy/apps/cozy-drive/src/drive/web/modules/views/Folder/hooks/useBreadcrumbPath.jsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(\"./node_modules/webpack/buildin/harmony-module.js\")(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZHJpdmUvd2ViL21vZHVsZXMvdmlld3MvRm9sZGVyL2hvb2tzL3VzZUJyZWFkY3J1bWJQYXRoLmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9kcml2ZS93ZWIvbW9kdWxlcy92aWV3cy9Gb2xkZXIvaG9va3MvdXNlQnJlYWRjcnVtYlBhdGguanN4PzRmNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlQ2xpZW50IH0gZnJvbSAnY296eS1jbGllbnQnXG5pbXBvcnQgeyBmZXRjaEZvbGRlciB9IGZyb20gJy4uL3F1ZXJpZXMvZmV0Y2hGb2xkZXInXG5pbXBvcnQgbG9nIGZyb20gJ2NvenktbG9nZ2VyJ1xuXG5leHBvcnQgY29uc3QgdXNlQnJlYWRjcnVtYlBhdGggPSAoe1xuICBjdXJyZW50Rm9sZGVySWQsXG4gIHJvb3RCcmVhZGNydW1iUGF0aCxcbiAgc2hhcmVkRG9jdW1lbnRJZHNcbn0pID0+IHtcbiAgY29uc3QgY2xpZW50ID0gdXNlQ2xpZW50KClcbiAgY29uc3QgW3BhdGhzLCBzZXRQYXRoc10gPSB1c2VTdGF0ZShbXSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhc0FjY2Vzc1RvU2hhcmVkRG9jdW1lbnQgPSBpZCA9PiB7XG4gICAgICBpZiAoIXNoYXJlZERvY3VtZW50SWRzKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuICFzaGFyZWREb2N1bWVudElkcy5pbmNsdWRlcyhpZClcbiAgICB9XG5cbiAgICBsZXQgaXNTdWJzY3JpYmVkID0gdHJ1ZVxuICAgIGNvbnN0IHJldHVybmVkUGF0aHMgPSBbXVxuXG4gICAgY29uc3QgZmV0Y2hCcmVhZGNydW1icyA9IGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBpZCA9IGN1cnJlbnRGb2xkZXJJZFxuICAgICAgd2hpbGUgKCEhaWQgJiYgaWQgIT09IHJvb3RCcmVhZGNydW1iUGF0aC5pZCkge1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBhd2FpdCBmZXRjaEZvbGRlcih7IGNsaWVudCwgZm9sZGVySWQ6IGlkIH0pXG4gICAgICAgIGlmICghZm9sZGVyKSB7XG4gICAgICAgICAgaWQgPSB1bmRlZmluZWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm5lZFBhdGhzLnVuc2hpZnQoeyBuYW1lOiBmb2xkZXIubmFtZSwgaWQ6IGZvbGRlci5pZCB9KVxuICAgICAgICAgIGlkID0gaGFzQWNjZXNzVG9TaGFyZWREb2N1bWVudChmb2xkZXIuaWQpID8gZm9sZGVyLmRpcl9pZCA6IHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpc1N1YnNjcmliZWQpIHtcbiAgICAgICAgaWYgKHJvb3RCcmVhZGNydW1iUGF0aC5uYW1lICE9PSAnUHVibGljJykge1xuICAgICAgICAgIHJldHVybmVkUGF0aHMudW5zaGlmdChyb290QnJlYWRjcnVtYlBhdGgpXG4gICAgICAgIH1cbiAgICAgICAgc2V0UGF0aHMocmV0dXJuZWRQYXRocylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmZXRjaEJyZWFkY3J1bWJzKCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgaWYgKHJvb3RCcmVhZGNydW1iUGF0aCAmJiByb290QnJlYWRjcnVtYlBhdGgubmFtZSA9PT0gJ1B1YmxpYycpIHtcbiAgICAgICAgaWYgKGlzU3Vic2NyaWJlZCkge1xuICAgICAgICAgIHNldFBhdGhzKHJldHVybmVkUGF0aHMpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZyhcbiAgICAgICAgICAnZXJyb3InLFxuICAgICAgICAgIGBFcnJvciB3aGlsZSBmZXRjaGluZyBmb2xkZXIgZm9yIGJyZWFkY3J1bWJzIG9mIGZvbGRlciBpZDogJHtjdXJyZW50Rm9sZGVySWR9LCBoZXJlIGlzIHRoZSBlcnJvcjogJHtlcnJvcn1gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlzU3Vic2NyaWJlZCA9IGZhbHNlXG4gICAgfVxuICB9LCBbY3VycmVudEZvbGRlcklkLCBjbGllbnQsIHNoYXJlZERvY3VtZW50SWRzLCByb290QnJlYWRjcnVtYlBhdGhdKVxuXG4gIHJldHVybiBwYXRoc1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBSkE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQUFBO0FBQ0E7QUFEQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFsQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUF6REE7QUFLQTs7Ozs7Ozs7Ozs7O0FBTEE7Ozs7Ozs7OztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/drive/web/modules/views/Folder/hooks/useBreadcrumbPath.jsx\n");

/***/ })

})